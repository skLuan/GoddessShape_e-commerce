{"version":3,"file":"./build/block-editor/index.min.js","mappings":"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K,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAA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","sources":["webpack://wp/./node_modules/autosize/dist/autosize.js","webpack://wp/./node_modules/classnames/index.js","webpack://wp/./node_modules/computed-style/dist/computedStyle.commonjs.js","webpack://wp/./node_modules/diff/src/diff/base.js","webpack://wp/./node_modules/diff/src/diff/character.js","webpack://wp/./node_modules/dom-scroll-into-view/lib/dom-scroll-into-view.js","webpack://wp/./node_modules/dom-scroll-into-view/lib/index.js","webpack://wp/./node_modules/dom-scroll-into-view/lib/util.js","webpack://wp/./node_modules/fast-deep-equal/es6/index.js","webpack://wp/./node_modules/inherits/inherits_browser.js","webpack://wp/./node_modules/line-height/lib/line-height.js","webpack://wp/./node_modules/normalize-wheel/index.js","webpack://wp/./node_modules/normalize-wheel/src/ExecutionEnvironment.js","webpack://wp/./node_modules/normalize-wheel/src/UserAgent_DEPRECATED.js","webpack://wp/./node_modules/normalize-wheel/src/isEventSupported.js","webpack://wp/./node_modules/normalize-wheel/src/normalizeWheel.js","webpack://wp/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://wp/./node_modules/prop-types/index.js","webpack://wp/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://wp/./node_modules/react-autosize-textarea/lib/TextareaAutosize.js","webpack://wp/./node_modules/react-autosize-textarea/lib/index.js","webpack://wp/./node_modules/remove-accents/index.js","webpack://wp/./node_modules/traverse/index.js","webpack://wp/./packages/block-editor/node_modules/deepmerge/dist/cjs.js","webpack://wp/external window \"React\"","webpack://wp/webpack/bootstrap","webpack://wp/webpack/runtime/compat get default export","webpack://wp/webpack/runtime/define property getters","webpack://wp/webpack/runtime/hasOwnProperty shorthand","webpack://wp/webpack/runtime/make namespace object","webpack://wp/external window [\"wp\",\"blocks\"]","webpack://wp/external window [\"wp\",\"hooks\"]","webpack://wp/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/compat.js","webpack://wp/external window [\"wp\",\"element\"]","webpack://wp/external window [\"wp\",\"compose\"]","webpack://wp/external window [\"wp\",\"components\"]","webpack://wp/external window [\"wp\",\"data\"]","webpack://wp/./packages/block-editor/build-module/components/block-controls/@wordpress/block-editor/src/components/block-controls/groups.js","webpack://wp/external window [\"wp\",\"i18n\"]","webpack://wp/./packages/block-editor/build-module/store/@wordpress/block-editor/src/store/defaults.js","webpack://wp/./packages/block-editor/build-module/store/@wordpress/block-editor/src/store/array.js","webpack://wp/./packages/block-editor/build-module/store/@wordpress/block-editor/src/store/reducer.js","webpack://wp/./node_modules/rememo/rememo.js","webpack://wp/external window [\"wp\",\"primitives\"]","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/symbol.js","webpack://wp/external window [\"wp\",\"richText\"]","webpack://wp/external window [\"wp\",\"deprecated\"]","webpack://wp/./packages/block-editor/build-module/store/@wordpress/block-editor/src/store/utils.js","webpack://wp/./packages/block-editor/build-module/utils/@wordpress/block-editor/src/utils/sorting.js","webpack://wp/./packages/block-editor/build-module/store/@wordpress/block-editor/src/store/private-selectors.js","webpack://wp/./packages/block-editor/build-module/store/@wordpress/block-editor/src/store/selectors.js","webpack://wp/./packages/block-editor/build-module/store/@wordpress/block-editor/src/store/private-actions.js","webpack://wp/external window [\"wp\",\"a11y\"]","webpack://wp/./packages/block-editor/build-module/utils/@wordpress/block-editor/src/utils/selection.js","webpack://wp/./packages/block-editor/build-module/store/@wordpress/block-editor/src/store/actions.js","webpack://wp/./packages/block-editor/build-module/store/@wordpress/block-editor/src/store/constants.js","webpack://wp/external window [\"wp\",\"privateApis\"]","webpack://wp/./packages/block-editor/build-module/@wordpress/block-editor/src/lock-unlock.js","webpack://wp/./packages/block-editor/build-module/store/@wordpress/block-editor/src/store/index.js","webpack://wp/./packages/block-editor/build-module/components/block-edit/@wordpress/block-editor/src/components/block-edit/context.js","webpack://wp/./packages/block-editor/build-module/components/use-display-block-controls/@wordpress/block-editor/src/components/use-display-block-controls/index.js","webpack://wp/./packages/block-editor/build-module/components/block-controls/@wordpress/block-editor/src/components/block-controls/fill.js","webpack://wp/./packages/block-editor/build-module/components/block-controls/@wordpress/block-editor/src/components/block-controls/hook.js","webpack://wp/external window [\"wp\",\"warning\"]","webpack://wp/./packages/block-editor/build-module/components/block-controls/@wordpress/block-editor/src/components/block-controls/slot.js","webpack://wp/./packages/block-editor/build-module/components/block-controls/@wordpress/block-editor/src/components/block-controls/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/justify-left.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/justify-center.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/justify-right.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/justify-space-between.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/justify-stretch.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/arrow-right.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/arrow-down.js","webpack://wp/./packages/block-editor/build-module/layouts/@wordpress/block-editor/src/layouts/utils.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/sides-all.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/sides-axial.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/sides-horizontal.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/sides-vertical.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/sides-top.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/sides-right.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/sides-bottom.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/sides-left.js","webpack://wp/./packages/block-editor/build-module/components/spacing-sizes-control/@wordpress/block-editor/src/components/spacing-sizes-control/utils.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/gap.js","webpack://wp/./packages/block-editor/build-module/components/block-vertical-alignment-control/@wordpress/block-editor/src/components/block-vertical-alignment-control/icons.js","webpack://wp/./packages/block-editor/build-module/components/block-vertical-alignment-control/@wordpress/block-editor/src/components/block-vertical-alignment-control/ui.js","webpack://wp/./packages/block-editor/build-module/components/block-vertical-alignment-control/@wordpress/block-editor/src/components/block-vertical-alignment-control/index.js","webpack://wp/./packages/block-editor/build-module/components/justify-content-control/@wordpress/block-editor/src/components/justify-content-control/ui.js","webpack://wp/./packages/block-editor/build-module/components/justify-content-control/@wordpress/block-editor/src/components/justify-content-control/index.js","webpack://wp/external window \"lodash\"","webpack://wp/./packages/block-editor/build-module/components/use-setting/@wordpress/block-editor/src/components/use-setting/index.js","webpack://wp/./packages/block-editor/build-module/components/font-sizes/@wordpress/block-editor/src/components/font-sizes/fluid-utils.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/typography-utils.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/utils.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/context.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/hooks.js","webpack://wp/./packages/block-editor/build-module/utils/@wordpress/block-editor/src/utils/object.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/utils.js","webpack://wp/./packages/block-editor/build-module/layouts/@wordpress/block-editor/src/layouts/flex.js","webpack://wp/./packages/block-editor/build-module/layouts/@wordpress/block-editor/src/layouts/flow.js","webpack://wp/./packages/icons/build-module/icon/@wordpress/icons/src/icon/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/position-center.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/stretch-wide.js","webpack://wp/external window [\"wp\",\"styleEngine\"]","webpack://wp/./packages/block-editor/build-module/layouts/@wordpress/block-editor/src/layouts/constrained.js","webpack://wp/./packages/block-editor/build-module/layouts/@wordpress/block-editor/src/layouts/grid.js","webpack://wp/./packages/block-editor/build-module/layouts/@wordpress/block-editor/src/layouts/index.js","webpack://wp/./packages/block-editor/build-module/components/block-list/@wordpress/block-editor/src/components/block-list/layout.js","webpack://wp/./packages/block-editor/build-module/components/block-alignment-control/@wordpress/block-editor/src/components/block-alignment-control/use-available-alignments.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/align-none.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/position-left.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/position-right.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/stretch-full-width.js","webpack://wp/./packages/block-editor/build-module/components/block-alignment-control/@wordpress/block-editor/src/components/block-alignment-control/constants.js","webpack://wp/./packages/block-editor/build-module/components/block-alignment-control/@wordpress/block-editor/src/components/block-alignment-control/ui.js","webpack://wp/./packages/block-editor/build-module/components/block-alignment-control/@wordpress/block-editor/src/components/block-alignment-control/index.js","webpack://wp/./packages/block-editor/build-module/components/block-list/@wordpress/block-editor/src/components/block-list/block-list-block-context.js","webpack://wp/./packages/block-editor/build-module/components/block-editing-mode/@wordpress/block-editor/src/components/block-editing-mode/index.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/align.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/lock.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls/@wordpress/block-editor/src/components/inspector-controls/groups.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls/@wordpress/block-editor/src/components/inspector-controls/fill.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls/@wordpress/block-editor/src/components/inspector-controls/block-support-tools-panel.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls/@wordpress/block-editor/src/components/inspector-controls/block-support-slot-container.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls/@wordpress/block-editor/src/components/inspector-controls/slot.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls/@wordpress/block-editor/src/components/inspector-controls/index.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/anchor.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/aria-label.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/custom-class-name.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/generated-class-name.js","webpack://wp/external window [\"wp\",\"dom\"]","webpack://wp/./packages/block-editor/build-module/components/block-context/@wordpress/block-editor/src/components/block-context/index.js","webpack://wp/./packages/block-editor/build-module/components/block-edit/@wordpress/block-editor/src/components/block-edit/edit.js","webpack://wp/./packages/block-editor/build-module/components/block-edit/@wordpress/block-editor/src/components/block-edit/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/more-horizontal.js","webpack://wp/./packages/block-editor/build-module/components/warning/@wordpress/block-editor/src/components/warning/index.js","webpack://wp/./packages/block-editor/build-module/components/block-compare/@wordpress/block-editor/src/components/block-compare/block-view.js","webpack://wp/./packages/block-editor/build-module/components/block-compare/@wordpress/block-editor/src/components/block-compare/index.js","webpack://wp/./packages/block-editor/build-module/components/block-list/@wordpress/block-editor/src/components/block-list/block-invalid-warning.js","webpack://wp/./packages/block-editor/build-module/components/block-list/@wordpress/block-editor/src/components/block-list/block-crash-warning.js","webpack://wp/./packages/block-editor/build-module/components/block-list/@wordpress/block-editor/src/components/block-list/block-crash-boundary.js","webpack://wp/./packages/block-editor/build-module/components/block-list/@wordpress/block-editor/src/components/block-list/block-html.js","webpack://wp/./node_modules/@react-spring/rafz/dist/react-spring-rafz.esm.js","webpack://wp/./node_modules/@react-spring/shared/dist/react-spring-shared.esm.js","webpack://wp/./node_modules/@react-spring/animated/dist/react-spring-animated.esm.js","webpack://wp/./node_modules/@react-spring/core/dist/react-spring-core.esm.js","webpack://wp/external window \"ReactDOM\"","webpack://wp/./node_modules/@react-spring/web/dist/react-spring-web.esm.js","webpack://wp/./packages/block-editor/build-module/components/use-moving-animation/@wordpress/block-editor/src/components/use-moving-animation/index.js","webpack://wp/./packages/block-editor/build-module/utils/@wordpress/block-editor/src/utils/dom.js","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/use-focus-first-element.js","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/use-is-hovered.js","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/use-block-class-names.js","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/use-block-default-class-name.js","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/use-block-custom-class-name.js","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/use-block-moving-mode-class-names.js","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/use-focus-handler.js","webpack://wp/external window [\"wp\",\"keycodes\"]","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/use-selected-block-event-handlers.js","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/use-nav-mode-exit.js","webpack://wp/./packages/block-editor/build-module/components/provider/@wordpress/block-editor/src/components/provider/block-refs-provider.js","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/use-block-refs.js","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/use-intersection-observer.js","webpack://wp/./packages/block-editor/build-module/components/block-content-overlay/@wordpress/block-editor/src/components/block-content-overlay/index.js","webpack://wp/./packages/block-editor/build-module/components/block-list/use-block-props/@wordpress/block-editor/src/components/block-list/use-block-props/index.js","webpack://wp/./packages/block-editor/build-module/components/block-list/@wordpress/block-editor/src/components/block-list/block.js","webpack://wp/external window [\"wp\",\"htmlEntities\"]","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/plus.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/tips.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/chevron-right.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/chevron-left.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/block-default.js","webpack://wp/./packages/block-editor/build-module/components/block-icon/@wordpress/block-editor/src/components/block-icon/index.js","webpack://wp/./packages/block-editor/build-module/components/block-card/@wordpress/block-editor/src/components/block-card/index.js","webpack://wp/./packages/block-editor/build-module/components/provider/@wordpress/block-editor/src/components/provider/with-registry-provider.js","webpack://wp/./packages/block-editor/build-module/components/provider/@wordpress/block-editor/src/components/provider/use-block-sync.js","webpack://wp/./packages/block-editor/build-module/components/provider/@wordpress/block-editor/src/components/provider/index.js","webpack://wp/./packages/block-editor/build-module/components/block-selection-clearer/@wordpress/block-editor/src/components/block-selection-clearer/index.js","webpack://wp/./packages/block-editor/build-module/components/writing-flow/@wordpress/block-editor/src/components/writing-flow/use-multi-selection.js","webpack://wp/./packages/block-editor/build-module/components/writing-flow/@wordpress/block-editor/src/components/writing-flow/use-arrow-nav.js","webpack://wp/external window [\"wp\",\"keyboardShortcuts\"]","webpack://wp/./packages/block-editor/build-module/components/writing-flow/@wordpress/block-editor/src/components/writing-flow/use-select-all.js","webpack://wp/./packages/block-editor/build-module/components/writing-flow/@wordpress/block-editor/src/components/writing-flow/use-drag-selection.js","webpack://wp/./packages/block-editor/build-module/components/writing-flow/@wordpress/block-editor/src/components/writing-flow/use-selection-observer.js","webpack://wp/./packages/block-editor/build-module/components/writing-flow/@wordpress/block-editor/src/components/writing-flow/use-click-selection.js","webpack://wp/./packages/block-editor/build-module/components/writing-flow/@wordpress/block-editor/src/components/writing-flow/use-input.js","webpack://wp/./packages/block-editor/build-module/components/writing-flow/@wordpress/block-editor/src/components/writing-flow/index.js","webpack://wp/./packages/block-editor/build-module/components/writing-flow/@wordpress/block-editor/src/components/writing-flow/use-tab-nav.js","webpack://wp/./packages/block-editor/build-module/components/iframe/@wordpress/block-editor/src/components/iframe/index.js","webpack://wp/./packages/block-editor/build-module/components/iframe/@wordpress/block-editor/src/components/iframe/use-compatibility-styles.js","webpack://wp/./node_modules/colord/index.mjs","webpack://wp/./node_modules/colord/plugins/names.mjs","webpack://wp/./node_modules/colord/plugins/a11y.mjs","webpack://wp/./packages/block-editor/build-module/utils/transform-styles/ast/@wordpress/block-editor/src/utils/transform-styles/ast/parse.js","webpack://wp/./packages/block-editor/build-module/utils/transform-styles/ast/stringify/@wordpress/block-editor/src/utils/transform-styles/ast/stringify/compiler.js","webpack://wp/./packages/block-editor/build-module/utils/transform-styles/ast/stringify/@wordpress/block-editor/src/utils/transform-styles/ast/stringify/compress.js","webpack://wp/./packages/block-editor/build-module/utils/transform-styles/ast/stringify/@wordpress/block-editor/src/utils/transform-styles/ast/stringify/identity.js","webpack://wp/./packages/block-editor/build-module/utils/transform-styles/transforms/@wordpress/block-editor/src/utils/transform-styles/transforms/url-rewrite.js","webpack://wp/./packages/block-editor/build-module/utils/transform-styles/transforms/@wordpress/block-editor/src/utils/transform-styles/transforms/wrap.js","webpack://wp/./packages/block-editor/build-module/utils/transform-styles/@wordpress/block-editor/src/utils/transform-styles/index.js","webpack://wp/./packages/block-editor/build-module/utils/transform-styles/@wordpress/block-editor/src/utils/transform-styles/traverse.js","webpack://wp/./packages/block-editor/build-module/utils/transform-styles/ast/stringify/@wordpress/block-editor/src/utils/transform-styles/ast/stringify/index.js","webpack://wp/./packages/block-editor/build-module/components/editor-styles/@wordpress/block-editor/src/components/editor-styles/index.js","webpack://wp/./packages/block-editor/build-module/components/block-preview/@wordpress/block-editor/src/components/block-preview/auto.js","webpack://wp/./packages/block-editor/build-module/components/block-preview/@wordpress/block-editor/src/components/block-preview/index.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/preview-panel.js","webpack://wp/./packages/block-editor/build-module/components/inserter-listbox/@wordpress/block-editor/src/components/inserter-listbox/context.js","webpack://wp/./packages/block-editor/build-module/components/inserter-listbox/@wordpress/block-editor/src/components/inserter-listbox/item.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/drag-handle.js","webpack://wp/./packages/block-editor/build-module/components/block-draggable/@wordpress/block-editor/src/components/block-draggable/draggable-chip.js","webpack://wp/./packages/block-editor/build-module/components/inserter-draggable-blocks/@wordpress/block-editor/src/components/inserter-draggable-blocks/index.js","webpack://wp/./packages/block-editor/build-module/components/inserter-list-item/@wordpress/block-editor/src/components/inserter-list-item/index.js","webpack://wp/./packages/block-editor/build-module/components/inserter-listbox/@wordpress/block-editor/src/components/inserter-listbox/group.js","webpack://wp/./packages/block-editor/build-module/components/inserter-listbox/@wordpress/block-editor/src/components/inserter-listbox/row.js","webpack://wp/./packages/block-editor/build-module/components/block-types-list/@wordpress/block-editor/src/components/block-types-list/index.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/panel.js","webpack://wp/./packages/block-editor/build-module/components/inserter/hooks/@wordpress/block-editor/src/components/inserter/hooks/use-block-types-state.js","webpack://wp/./packages/block-editor/build-module/components/inserter-listbox/@wordpress/block-editor/src/components/inserter-listbox/index.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/block-types-tab.js","webpack://wp/external window [\"wp\",\"notices\"]","webpack://wp/./packages/block-editor/build-module/components/inserter/hooks/@wordpress/block-editor/src/components/inserter/hooks/use-patterns-state.js","webpack://wp/./packages/block-editor/build-module/components/block-patterns-list/@wordpress/block-editor/src/components/block-patterns-list/index.js","webpack://wp/./packages/block-editor/build-module/components/inserter/block-patterns-explorer/@wordpress/block-editor/src/components/inserter/block-patterns-explorer/sidebar.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/no-results.js","webpack://wp/./packages/block-editor/build-module/components/inserter/hooks/@wordpress/block-editor/src/components/inserter/hooks/use-insertion-point.js","webpack://wp/./node_modules/lower-case/src/index.ts","webpack://wp/./node_modules/no-case/src/index.ts","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/search-items.js","webpack://wp/./packages/block-editor/build-module/components/inserter/block-patterns-explorer/@wordpress/block-editor/src/components/inserter/block-patterns-explorer/patterns-list.js","webpack://wp/./packages/block-editor/build-module/components/inserter/block-patterns-explorer/@wordpress/block-editor/src/components/inserter/block-patterns-explorer/explorer.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/mobile-tab-navigation.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/block-patterns-tab.js","webpack://wp/external window [\"wp\",\"url\"]","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/reusable-blocks-tab.js","webpack://wp/./packages/block-editor/build-module/components/inserter/media-tab/@wordpress/block-editor/src/components/inserter/media-tab/hooks.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/more-vertical.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/external.js","webpack://wp/external window [\"wp\",\"blob\"]","webpack://wp/./packages/block-editor/build-module/components/inserter/media-tab/@wordpress/block-editor/src/components/inserter/media-tab/utils.js","webpack://wp/./packages/block-editor/build-module/components/inserter/media-tab/@wordpress/block-editor/src/components/inserter/media-tab/media-preview.js","webpack://wp/./packages/block-editor/build-module/components/inserter/media-tab/@wordpress/block-editor/src/components/inserter/media-tab/media-list.js","webpack://wp/./packages/block-editor/build-module/components/inserter/hooks/@wordpress/block-editor/src/components/inserter/hooks/use-debounced-input.js","webpack://wp/./packages/block-editor/build-module/components/inserter/media-tab/@wordpress/block-editor/src/components/inserter/media-tab/media-panel.js","webpack://wp/./packages/block-editor/build-module/components/media-upload/@wordpress/block-editor/src/components/media-upload/check.js","webpack://wp/./packages/block-editor/build-module/components/media-upload/@wordpress/block-editor/src/components/media-upload/index.js","webpack://wp/./packages/block-editor/build-module/components/inserter/media-tab/@wordpress/block-editor/src/components/inserter/media-tab/media-tab.js","webpack://wp/./packages/block-editor/build-module/components/inserter-menu-extension/@wordpress/block-editor/src/components/inserter-menu-extension/index.js","webpack://wp/./packages/block-editor/build-module/utils/@wordpress/block-editor/src/utils/order-inserter-block-items.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/search-results.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/tabs.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/menu.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/quick-inserter.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/index.js","webpack://wp/./packages/block-editor/build-module/components/default-block-appender/@wordpress/block-editor/src/components/default-block-appender/index.js","webpack://wp/./packages/block-editor/build-module/components/button-block-appender/@wordpress/block-editor/src/components/button-block-appender/index.js","webpack://wp/./packages/block-editor/build-module/components/block-list-appender/@wordpress/block-editor/src/components/block-list-appender/index.js","webpack://wp/./packages/block-editor/build-module/components/block-popover/@wordpress/block-editor/src/components/block-popover/use-popover-scroll.js","webpack://wp/./packages/block-editor/build-module/components/block-popover/@wordpress/block-editor/src/components/block-popover/inbetween.js","webpack://wp/./packages/block-editor/build-module/components/block-popover/@wordpress/block-editor/src/components/block-popover/index.js","webpack://wp/./packages/block-editor/build-module/components/block-popover/@wordpress/block-editor/src/components/block-popover/drop-zone.js","webpack://wp/./packages/block-editor/build-module/components/block-tools/@wordpress/block-editor/src/components/block-tools/insertion-point.js","webpack://wp/./packages/block-editor/build-module/components/block-list/@wordpress/block-editor/src/components/block-list/use-in-between-inserter.js","webpack://wp/./packages/block-editor/build-module/utils/@wordpress/block-editor/src/utils/pre-parse-patterns.js","webpack://wp/./packages/block-editor/build-module/components/use-block-display-information/@wordpress/block-editor/src/components/use-block-display-information/index.js","webpack://wp/./packages/block-editor/build-module/components/block-title/@wordpress/block-editor/src/components/block-title/use-block-display-title.js","webpack://wp/./packages/block-editor/build-module/components/block-title/@wordpress/block-editor/src/components/block-title/index.js","webpack://wp/./packages/block-editor/build-module/components/block-draggable/@wordpress/block-editor/src/components/block-draggable/index.js","webpack://wp/./packages/block-editor/build-module/components/block-draggable/@wordpress/block-editor/src/components/block-draggable/use-scroll-when-dragging.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/chevron-up.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/chevron-down.js","webpack://wp/./packages/block-editor/build-module/components/block-mover/@wordpress/block-editor/src/components/block-mover/mover-description.js","webpack://wp/./packages/block-editor/build-module/components/block-mover/@wordpress/block-editor/src/components/block-mover/button.js","webpack://wp/./packages/block-editor/build-module/components/block-mover/@wordpress/block-editor/src/components/block-mover/index.js","webpack://wp/./packages/block-editor/build-module/components/block-tools/@wordpress/block-editor/src/components/block-tools/block-selection-button.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/level-up.js","webpack://wp/./packages/block-editor/build-module/components/navigable-toolbar/@wordpress/block-editor/src/components/navigable-toolbar/index.js","webpack://wp/./packages/block-editor/build-module/components/block-toolbar/@wordpress/block-editor/src/components/block-toolbar/utils.js","webpack://wp/./packages/block-editor/build-module/components/block-parent-selector/@wordpress/block-editor/src/components/block-parent-selector/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/copy.js","webpack://wp/./packages/block-editor/build-module/components/block-switcher/@wordpress/block-editor/src/components/block-switcher/preview-block-popover.js","webpack://wp/./packages/block-editor/build-module/components/block-switcher/@wordpress/block-editor/src/components/block-switcher/block-variation-transformations.js","webpack://wp/./packages/block-editor/build-module/components/block-switcher/@wordpress/block-editor/src/components/block-switcher/block-transformations-menu.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/check.js","webpack://wp/external window [\"wp\",\"tokenList\"]","webpack://wp/./packages/block-editor/build-module/components/block-styles/@wordpress/block-editor/src/components/block-styles/utils.js","webpack://wp/./packages/block-editor/build-module/components/block-styles/@wordpress/block-editor/src/components/block-styles/use-styles-for-block.js","webpack://wp/./packages/block-editor/build-module/components/block-styles/@wordpress/block-editor/src/components/block-styles/menu-items.js","webpack://wp/./packages/block-editor/build-module/components/block-switcher/@wordpress/block-editor/src/components/block-switcher/block-styles-menu.js","webpack://wp/./packages/block-editor/build-module/components/block-switcher/@wordpress/block-editor/src/components/block-switcher/utils.js","webpack://wp/./packages/block-editor/build-module/components/block-switcher/@wordpress/block-editor/src/components/block-switcher/use-transformed-patterns.js","webpack://wp/./packages/block-editor/build-module/components/block-switcher/@wordpress/block-editor/src/components/block-switcher/pattern-transformations-menu.js","webpack://wp/./packages/block-editor/build-module/components/block-switcher/@wordpress/block-editor/src/components/block-switcher/index.js","webpack://wp/./packages/block-editor/build-module/components/block-toolbar/@wordpress/block-editor/src/components/block-toolbar/block-toolbar-last-item.js","webpack://wp/./packages/block-editor/build-module/utils/@wordpress/block-editor/src/utils/pasting.js","webpack://wp/./packages/block-editor/build-module/components/copy-handler/@wordpress/block-editor/src/components/copy-handler/index.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/supports.js","webpack://wp/./packages/block-editor/build-module/components/use-paste-styles/@wordpress/block-editor/src/components/use-paste-styles/index.js","webpack://wp/./packages/block-editor/build-module/components/block-actions/@wordpress/block-editor/src/components/block-actions/index.js","webpack://wp/./packages/block-editor/build-module/components/block-settings-menu/@wordpress/block-editor/src/components/block-settings-menu/block-html-convert-button.js","webpack://wp/./packages/block-editor/build-module/components/block-settings-menu/@wordpress/block-editor/src/components/block-settings-menu/block-convert-button.js","webpack://wp/./packages/block-editor/build-module/components/block-settings-menu/@wordpress/block-editor/src/components/block-settings-menu/block-settings-menu-first-item.js","webpack://wp/./packages/block-editor/build-module/components/convert-to-group-buttons/@wordpress/block-editor/src/components/convert-to-group-buttons/index.js","webpack://wp/./packages/block-editor/build-module/components/convert-to-group-buttons/@wordpress/block-editor/src/components/convert-to-group-buttons/use-convert-to-group-button-props.js","webpack://wp/./packages/block-editor/build-module/components/block-lock/@wordpress/block-editor/src/components/block-lock/use-block-lock.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/unlock.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/lock-outline.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/lock.js","webpack://wp/./packages/block-editor/build-module/components/block-lock/@wordpress/block-editor/src/components/block-lock/modal.js","webpack://wp/./packages/block-editor/build-module/components/block-lock/@wordpress/block-editor/src/components/block-lock/menu-item.js","webpack://wp/./packages/block-editor/build-module/components/block-settings-menu/@wordpress/block-editor/src/components/block-settings-menu/block-mode-toggle.js","webpack://wp/./packages/block-editor/build-module/components/block-settings-menu-controls/@wordpress/block-editor/src/components/block-settings-menu-controls/index.js","webpack://wp/./packages/block-editor/build-module/components/block-settings-menu/@wordpress/block-editor/src/components/block-settings-menu/block-settings-dropdown.js","webpack://wp/./packages/block-editor/build-module/components/block-settings-menu/@wordpress/block-editor/src/components/block-settings-menu/index.js","webpack://wp/./packages/block-editor/build-module/components/block-lock/@wordpress/block-editor/src/components/block-lock/toolbar.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/group.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/row.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/stack.js","webpack://wp/./packages/block-editor/build-module/components/convert-to-group-buttons/@wordpress/block-editor/src/components/convert-to-group-buttons/toolbar.js","webpack://wp/./packages/block-editor/build-module/components/block-edit-visually-button/@wordpress/block-editor/src/components/block-edit-visually-button/index.js","webpack://wp/./packages/block-editor/build-module/components/block-toolbar/@wordpress/block-editor/src/components/block-toolbar/block-name-context.js","webpack://wp/./packages/block-editor/build-module/components/block-toolbar/@wordpress/block-editor/src/components/block-toolbar/index.js","webpack://wp/./packages/block-editor/build-module/components/block-tools/@wordpress/block-editor/src/components/block-tools/block-contextual-toolbar.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/position.js","webpack://wp/./packages/block-editor/build-module/components/block-tools/@wordpress/block-editor/src/components/block-tools/use-block-toolbar-popover-props.js","webpack://wp/./packages/block-editor/build-module/utils/@wordpress/block-editor/src/utils/use-should-contextual-toolbar-show.js","webpack://wp/./packages/block-editor/build-module/components/block-tools/@wordpress/block-editor/src/components/block-tools/selected-block-popover.js","webpack://wp/./packages/block-editor/build-module/components/block-tools/@wordpress/block-editor/src/components/block-tools/back-compat.js","webpack://wp/./packages/block-editor/build-module/components/inner-blocks/@wordpress/block-editor/src/components/inner-blocks/with-client-id.js","webpack://wp/./packages/block-editor/build-module/components/inner-blocks/@wordpress/block-editor/src/components/inner-blocks/button-block-appender.js","webpack://wp/./packages/block-editor/build-module/components/inner-blocks/@wordpress/block-editor/src/components/inner-blocks/default-block-appender.js","webpack://wp/external window [\"wp\",\"isShallowEqual\"]","webpack://wp/./packages/block-editor/build-module/components/inner-blocks/@wordpress/block-editor/src/components/inner-blocks/use-nested-settings-update.js","webpack://wp/./packages/block-editor/build-module/components/use-on-block-drop/@wordpress/block-editor/src/components/use-on-block-drop/index.js","webpack://wp/./packages/block-editor/build-module/utils/@wordpress/block-editor/src/utils/math.js","webpack://wp/./packages/block-editor/build-module/components/inner-blocks/@wordpress/block-editor/src/components/inner-blocks/index.js","webpack://wp/./packages/block-editor/build-module/components/inner-blocks/@wordpress/block-editor/src/components/inner-blocks/use-inner-block-template-sync.js","webpack://wp/./packages/block-editor/build-module/components/inner-blocks/@wordpress/block-editor/src/components/inner-blocks/use-block-context.js","webpack://wp/./packages/block-editor/build-module/components/use-block-drop-zone/@wordpress/block-editor/src/components/use-block-drop-zone/index.js","webpack://wp/./packages/block-editor/build-module/components/block-list/@wordpress/block-editor/src/components/block-list/index.js","webpack://wp/./packages/block-editor/build-module/components/colors/@wordpress/block-editor/src/components/colors/utils.js","webpack://wp/./packages/block-editor/build-module/components/colors-gradients/@wordpress/block-editor/src/components/colors-gradients/use-multiple-origin-colors-and-gradients.js","webpack://wp/./packages/block-editor/build-module/components/border-radius-control/@wordpress/block-editor/src/components/border-radius-control/utils.js","webpack://wp/./packages/block-editor/build-module/components/border-radius-control/@wordpress/block-editor/src/components/border-radius-control/all-input-control.js","webpack://wp/./packages/block-editor/build-module/components/border-radius-control/@wordpress/block-editor/src/components/border-radius-control/input-controls.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/link.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/link-off.js","webpack://wp/./packages/block-editor/build-module/components/border-radius-control/@wordpress/block-editor/src/components/border-radius-control/linked-button.js","webpack://wp/./packages/block-editor/build-module/components/border-radius-control/@wordpress/block-editor/src/components/border-radius-control/index.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/border-panel.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/border.js","webpack://wp/./packages/block-editor/build-module/components/gradients/@wordpress/block-editor/src/components/gradients/use-gradient.js","webpack://wp/./packages/block-editor/build-module/components/colors-gradients/@wordpress/block-editor/src/components/colors-gradients/control.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/color-panel.js","webpack://wp/./packages/block-editor/build-module/components/contrast-checker/@wordpress/block-editor/src/components/contrast-checker/index.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/contrast-checker.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/color.js","webpack://wp/./packages/block-editor/build-module/components/font-family/@wordpress/block-editor/src/components/font-family/index.js","webpack://wp/./packages/block-editor/build-module/components/font-appearance-control/@wordpress/block-editor/src/components/font-appearance-control/index.js","webpack://wp/./packages/block-editor/build-module/components/line-height-control/@wordpress/block-editor/src/components/line-height-control/utils.js","webpack://wp/./packages/block-editor/build-module/components/line-height-control/@wordpress/block-editor/src/components/line-height-control/index.js","webpack://wp/./packages/block-editor/build-module/components/letter-spacing-control/@wordpress/block-editor/src/components/letter-spacing-control/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/reset.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/format-uppercase.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/format-lowercase.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/format-capitalize.js","webpack://wp/./packages/block-editor/build-module/components/text-transform-control/@wordpress/block-editor/src/components/text-transform-control/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/format-underline.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/format-strikethrough.js","webpack://wp/./packages/block-editor/build-module/components/text-decoration-control/@wordpress/block-editor/src/components/text-decoration-control/index.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/typography-panel.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/line-height.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/font-family.js","webpack://wp/./packages/block-editor/build-module/components/font-sizes/@wordpress/block-editor/src/components/font-sizes/utils.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/font-size.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/typography.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/settings.js","webpack://wp/./packages/block-editor/build-module/components/spacing-sizes-control/input-controls/@wordpress/block-editor/src/components/spacing-sizes-control/input-controls/spacing-input-control.js","webpack://wp/./packages/block-editor/build-module/components/spacing-sizes-control/input-controls/@wordpress/block-editor/src/components/spacing-sizes-control/input-controls/axial.js","webpack://wp/./packages/block-editor/build-module/components/spacing-sizes-control/input-controls/@wordpress/block-editor/src/components/spacing-sizes-control/input-controls/separated.js","webpack://wp/./packages/block-editor/build-module/components/spacing-sizes-control/input-controls/@wordpress/block-editor/src/components/spacing-sizes-control/input-controls/single.js","webpack://wp/./packages/block-editor/build-module/components/spacing-sizes-control/sides-dropdown/@wordpress/block-editor/src/components/spacing-sizes-control/sides-dropdown/index.js","webpack://wp/./packages/block-editor/build-module/components/spacing-sizes-control/@wordpress/block-editor/src/components/spacing-sizes-control/index.js","webpack://wp/./packages/block-editor/build-module/components/spacing-sizes-control/hooks/@wordpress/block-editor/src/components/spacing-sizes-control/hooks/use-spacing-sizes.js","webpack://wp/./packages/block-editor/build-module/components/height-control/@wordpress/block-editor/src/components/height-control/index.js","webpack://wp/./packages/block-editor/build-module/components/child-layout-control/@wordpress/block-editor/src/components/child-layout-control/index.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/dimensions-panel.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/margin.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/padding.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/dimensions.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/style.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/settings.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/filter.js","webpack://wp/./packages/block-editor/build-module/components/duotone-control/@wordpress/block-editor/src/components/duotone-control/index.js","webpack://wp/./packages/block-editor/build-module/components/duotone/@wordpress/block-editor/src/components/duotone/utils.js","webpack://wp/./packages/block-editor/build-module/components/duotone/@wordpress/block-editor/src/components/duotone/components.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/get-block-css-selector.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/filters-panel.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/duotone.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/layout.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/content-lock-ui.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/metadata.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/metadata-name.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/behaviors.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/use-border-props.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/use-color-props.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/use-spacing-props.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/use-typography-props.js","webpack://wp/./packages/block-editor/build-module/hooks/@wordpress/block-editor/src/hooks/use-cached-truthy.js","webpack://wp/./packages/block-editor/build-module/components/colors/@wordpress/block-editor/src/components/colors/with-colors.js","webpack://wp/./packages/block-editor/build-module/components/font-sizes/@wordpress/block-editor/src/components/font-sizes/font-size-picker.js","webpack://wp/./packages/block-editor/build-module/components/font-sizes/@wordpress/block-editor/src/components/font-sizes/with-font-sizes.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/align-left.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/align-center.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/align-right.js","webpack://wp/./packages/block-editor/build-module/components/alignment-control/@wordpress/block-editor/src/components/alignment-control/ui.js","webpack://wp/./packages/block-editor/build-module/components/alignment-control/@wordpress/block-editor/src/components/alignment-control/index.js","webpack://wp/./packages/block-editor/build-module/autocompleters/@wordpress/block-editor/src/autocompleters/block.js","webpack://wp/external window [\"wp\",\"apiFetch\"]","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/page.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/post.js","webpack://wp/./packages/block-editor/build-module/autocompleters/@wordpress/block-editor/src/autocompleters/link.js","webpack://wp/./packages/block-editor/build-module/components/autocomplete/@wordpress/block-editor/src/components/autocomplete/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/fullscreen.js","webpack://wp/./packages/block-editor/build-module/components/block-full-height-alignment-control/@wordpress/block-editor/src/components/block-full-height-alignment-control/index.js","webpack://wp/./packages/block-editor/build-module/components/block-alignment-matrix-control/@wordpress/block-editor/src/components/block-alignment-matrix-control/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/chevron-right-small.js","webpack://wp/./packages/block-editor/build-module/components/block-breadcrumb/@wordpress/block-editor/src/components/block-breadcrumb/index.js","webpack://wp/./packages/block-editor/build-module/components/color-style-selector/@wordpress/block-editor/src/components/color-style-selector/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/list-view.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/context.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/aria-referenced-text.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/appender.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/leaf.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/lock-small.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/chevron-left-small.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/expander.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/block-select-button.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/block-contents.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/block.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/utils.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/use-list-view-scroll-into-view.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/branch.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/drop-indicator.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/use-list-view-drop-zone.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/index.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/use-list-view-client-ids.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/use-block-selection.js","webpack://wp/./packages/block-editor/build-module/components/list-view/@wordpress/block-editor/src/components/list-view/use-list-view-expand-selected-item.js","webpack://wp/./packages/block-editor/build-module/components/block-navigation/@wordpress/block-editor/src/components/block-navigation/dropdown.js","webpack://wp/./packages/block-editor/build-module/components/block-styles/@wordpress/block-editor/src/components/block-styles/preview-panel.js","webpack://wp/./packages/block-editor/build-module/components/block-styles/@wordpress/block-editor/src/components/block-styles/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/layout.js","webpack://wp/./packages/block-editor/build-module/components/block-variation-picker/@wordpress/block-editor/src/components/block-variation-picker/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/grid.js","webpack://wp/./packages/block-editor/build-module/components/block-pattern-setup/@wordpress/block-editor/src/components/block-pattern-setup/constants.js","webpack://wp/./packages/block-editor/build-module/components/block-pattern-setup/@wordpress/block-editor/src/components/block-pattern-setup/setup-toolbar.js","webpack://wp/./packages/block-editor/build-module/components/block-pattern-setup/@wordpress/block-editor/src/components/block-pattern-setup/index.js","webpack://wp/./packages/block-editor/build-module/components/block-pattern-setup/@wordpress/block-editor/src/components/block-pattern-setup/use-patterns-setup.js","webpack://wp/./packages/block-editor/build-module/components/block-variation-transforms/@wordpress/block-editor/src/components/block-variation-transforms/index.js","webpack://wp/./packages/block-editor/build-module/components/color-palette/@wordpress/block-editor/src/components/color-palette/with-color-context.js","webpack://wp/./packages/block-editor/build-module/components/color-palette/@wordpress/block-editor/src/components/color-palette/index.js","webpack://wp/./packages/block-editor/build-module/components/color-palette/@wordpress/block-editor/src/components/color-palette/control.js","webpack://wp/external window [\"wp\",\"date\"]","webpack://wp/./packages/block-editor/build-module/components/date-format-picker/@wordpress/block-editor/src/components/date-format-picker/index.js","webpack://wp/./packages/block-editor/build-module/components/colors-gradients/@wordpress/block-editor/src/components/colors-gradients/dropdown.js","webpack://wp/./packages/block-editor/build-module/components/colors-gradients/@wordpress/block-editor/src/components/colors-gradients/panel-color-gradient-settings.js","webpack://wp/./packages/block-editor/build-module/components/image-editor/@wordpress/block-editor/src/components/image-editor/context.js","webpack://wp/./packages/block-editor/build-module/components/image-editor/@wordpress/block-editor/src/components/image-editor/use-transform-image.js","webpack://wp/./packages/block-editor/build-module/components/image-editor/@wordpress/block-editor/src/components/image-editor/use-save-image.js","webpack://wp/./node_modules/react-easy-crop/node_modules/tslib/tslib.es6.js","webpack://wp/./node_modules/src/helpers.ts","webpack://wp/./node_modules/src/Cropper.tsx","webpack://wp/./packages/block-editor/build-module/components/image-editor/@wordpress/block-editor/src/components/image-editor/constants.js","webpack://wp/./packages/block-editor/build-module/components/image-editor/@wordpress/block-editor/src/components/image-editor/cropper.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/search.js","webpack://wp/./packages/block-editor/build-module/components/image-editor/@wordpress/block-editor/src/components/image-editor/zoom-dropdown.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/aspect-ratio.js","webpack://wp/./packages/block-editor/build-module/components/image-editor/@wordpress/block-editor/src/components/image-editor/aspect-ratio-dropdown.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/rotate-right.js","webpack://wp/./packages/block-editor/build-module/components/image-editor/@wordpress/block-editor/src/components/image-editor/rotation-button.js","webpack://wp/./packages/block-editor/build-module/components/image-editor/@wordpress/block-editor/src/components/image-editor/form-controls.js","webpack://wp/./packages/block-editor/build-module/components/image-editor/@wordpress/block-editor/src/components/image-editor/index.js","webpack://wp/./packages/block-editor/build-module/components/image-size-control/@wordpress/block-editor/src/components/image-size-control/index.js","webpack://wp/./packages/block-editor/build-module/components/image-size-control/@wordpress/block-editor/src/components/image-size-control/use-dimension-handler.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/settings-drawer.js","webpack://wp/./packages/block-editor/build-module/components/url-input/@wordpress/block-editor/src/components/url-input/index.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/search-create-button.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/post-list.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/tag.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/category.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/file.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/globe.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/search-item.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/constants.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/search-results.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/is-url-like.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/use-search-handler.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/search-input.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/info.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/edit.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/pencil.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/viewer-slot.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/use-rich-url-data.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/link-preview.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/settings.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/index.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/use-internal-value.js","webpack://wp/./packages/block-editor/build-module/components/link-control/@wordpress/block-editor/src/components/link-control/use-create-page.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/media.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/upload.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/post-featured-image.js","webpack://wp/./packages/block-editor/build-module/components/media-replace-flow/@wordpress/block-editor/src/components/media-replace-flow/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/keyboard-return.js","webpack://wp/./packages/block-editor/build-module/components/url-popover/@wordpress/block-editor/src/components/url-popover/link-viewer-url.js","webpack://wp/./packages/block-editor/build-module/components/url-popover/@wordpress/block-editor/src/components/url-popover/index.js","webpack://wp/./packages/block-editor/build-module/components/url-popover/@wordpress/block-editor/src/components/url-popover/link-editor.js","webpack://wp/./packages/block-editor/build-module/components/url-popover/@wordpress/block-editor/src/components/url-popover/link-viewer.js","webpack://wp/./packages/block-editor/build-module/components/media-placeholder/@wordpress/block-editor/src/components/media-placeholder/index.js","webpack://wp/./packages/block-editor/build-module/components/panel-color-settings/@wordpress/block-editor/src/components/panel-color-settings/index.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/format-toolbar/@wordpress/block-editor/src/components/rich-text/format-toolbar/index.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/format-toolbar-container.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-undo-automatic-change.js","webpack://wp/external window [\"wp\",\"shortcode\"]","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/utils.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/split-value.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-paste-handler.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-before-input-rules.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-input-rules.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/prevent-event-discovery.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-delete.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-enter.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-format-types.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-shortcuts.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-input-events.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-insert-replacement-text.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-firefox-compat.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/format-edit.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/index.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-mark-persistent.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/use-remove-browser-shortcuts.js","webpack://wp/./packages/block-editor/build-module/components/editable-text/@wordpress/block-editor/src/components/editable-text/index.js","webpack://wp/./packages/block-editor/build-module/components/plain-text/@wordpress/block-editor/src/components/plain-text/index.js","webpack://wp/./packages/block-editor/build-module/components/responsive-block-control/@wordpress/block-editor/src/components/responsive-block-control/label.js","webpack://wp/./packages/block-editor/build-module/components/responsive-block-control/@wordpress/block-editor/src/components/responsive-block-control/index.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/shortcut.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/toolbar-button.js","webpack://wp/./packages/block-editor/build-module/components/rich-text/@wordpress/block-editor/src/components/rich-text/input-event.js","webpack://wp/./packages/block-editor/build-module/components/tool-selector/@wordpress/block-editor/src/components/tool-selector/index.js","webpack://wp/./packages/block-editor/build-module/components/unit-control/@wordpress/block-editor/src/components/unit-control/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/arrow-left.js","webpack://wp/./packages/block-editor/build-module/components/url-input/@wordpress/block-editor/src/components/url-input/button.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/close.js","webpack://wp/./packages/block-editor/build-module/components/url-popover/@wordpress/block-editor/src/components/url-popover/image-url-input-ui.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/mobile.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/tablet.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/desktop.js","webpack://wp/./packages/block-editor/build-module/components/preview-options/@wordpress/block-editor/src/components/preview-options/index.js","webpack://wp/./packages/block-editor/build-module/components/use-resize-canvas/@wordpress/block-editor/src/components/use-resize-canvas/index.js","webpack://wp/./packages/block-editor/build-module/components/skip-to-selected-block/@wordpress/block-editor/src/components/skip-to-selected-block/index.js","webpack://wp/external window [\"wp\",\"wordcount\"]","webpack://wp/./packages/block-editor/build-module/components/multi-selection-inspector/@wordpress/block-editor/src/components/multi-selection-inspector/index.js","webpack://wp/./packages/block-editor/build-module/components/default-style-picker/@wordpress/block-editor/src/components/default-style-picker/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/cog.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/styles.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls-tabs/@wordpress/block-editor/src/components/inspector-controls-tabs/utils.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls-tabs/@wordpress/block-editor/src/components/inspector-controls-tabs/advanced-controls-panel.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls-tabs/@wordpress/block-editor/src/components/inspector-controls-tabs/position-controls-panel.js","webpack://wp/external window [\"wp\",\"preferences\"]","webpack://wp/./packages/block-editor/build-module/components/inspector-controls-tabs/@wordpress/block-editor/src/components/inspector-controls-tabs/settings-tab-hint.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls-tabs/@wordpress/block-editor/src/components/inspector-controls-tabs/settings-tab.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls-tabs/@wordpress/block-editor/src/components/inspector-controls-tabs/styles-tab.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls-tabs/@wordpress/block-editor/src/components/inspector-controls-tabs/use-is-list-view-tab-disabled.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls-tabs/@wordpress/block-editor/src/components/inspector-controls-tabs/index.js","webpack://wp/./packages/block-editor/build-module/components/inspector-controls-tabs/@wordpress/block-editor/src/components/inspector-controls-tabs/use-inspector-controls-tabs.js","webpack://wp/./packages/block-editor/build-module/components/block-info-slot-fill/@wordpress/block-editor/src/components/block-info-slot-fill/index.js","webpack://wp/./packages/block-editor/build-module/components/block-inspector/@wordpress/block-editor/src/components/block-inspector/index.js","webpack://wp/./packages/block-editor/build-module/components/block-inspector/@wordpress/block-editor/src/components/block-inspector/useBlockInspectorAnimationSettings.js","webpack://wp/./packages/block-editor/build-module/components/block-tools/@wordpress/block-editor/src/components/block-tools/zoom-out-mode-inserters.js","webpack://wp/./packages/block-editor/build-module/components/block-tools/@wordpress/block-editor/src/components/block-tools/index.js","webpack://wp/./packages/block-editor/build-module/components/inserter/@wordpress/block-editor/src/components/inserter/library.js","webpack://wp/./packages/block-editor/build-module/components/keyboard-shortcuts/@wordpress/block-editor/src/components/keyboard-shortcuts/index.js","webpack://wp/./packages/block-editor/build-module/components/selection-scroll-into-view/@wordpress/block-editor/src/components/selection-scroll-into-view/index.js","webpack://wp/./packages/block-editor/build-module/components/observe-typing/@wordpress/block-editor/src/components/observe-typing/index.js","webpack://wp/./packages/block-editor/build-module/components/typewriter/@wordpress/block-editor/src/components/typewriter/index.js","webpack://wp/./packages/block-editor/build-module/components/recursion-provider/@wordpress/block-editor/src/components/recursion-provider/index.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/close-small.js","webpack://wp/./packages/block-editor/build-module/components/inspector-popover-header/@wordpress/block-editor/src/components/inspector-popover-header/index.js","webpack://wp/./packages/block-editor/build-module/components/publish-date-time-picker/@wordpress/block-editor/src/components/publish-date-time-picker/index.js","webpack://wp/./packages/block-editor/build-module/elements/@wordpress/block-editor/src/elements/index.js","webpack://wp/./packages/block-editor/build-module/utils/@wordpress/block-editor/src/utils/block-variation-transforms.js","webpack://wp/./packages/block-editor/build-module/utils/@wordpress/block-editor/src/utils/parse-css-unit-to-px.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/use-global-styles-output.js","webpack://wp/./packages/icons/build-module/library/@wordpress/icons/src/library/shadow.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/effects-panel.js","webpack://wp/./packages/block-editor/build-module/components/global-styles/@wordpress/block-editor/src/components/global-styles/advanced-panel.js","webpack://wp/./packages/block-editor/build-module/@wordpress/block-editor/src/private-apis.js","webpack://wp/./packages/block-editor/build-module/components/resizable-box-popover/@wordpress/block-editor/src/components/resizable-box-popover/index.js"],"sourcesContent":["/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// This code has been refactored for 140 bytes\n// You can see the original here: https://github.com/twolfson/computedStyle/blob/04cd1da2e30fa45844f95f5cb1ac898e9b9ef050/lib/computedStyle.js\nvar computedStyle = function (el, prop, getComputedStyle) {\n  getComputedStyle = window.getComputedStyle;\n\n  // In one fell swoop\n  return (\n    // If we have getComputedStyle\n    getComputedStyle ?\n      // Query it\n      // TODO: From CSS-Query notes, we might need (node, null) for FF\n      getComputedStyle(el) :\n\n    // Otherwise, we are in IE and use currentStyle\n      el.currentStyle\n  )[\n    // Switch to camelCase for CSSOM\n    // DEV: Grabbed from jQuery\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/css.js#L191-L194\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/core.js#L593-L597\n    prop.replace(/-(\\w)/gi, function (word, letter) {\n      return letter.toUpperCase();\n    })\n  ];\n};\n\nmodule.exports = computedStyle;\n","export default function Diff() {}\n\nDiff.prototype = {\n  diff(oldString, newString, options = {}) {\n    let callback = options.callback;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    this.options = options;\n\n    let self = this;\n\n    function done(value) {\n      if (callback) {\n        setTimeout(function() { callback(undefined, value); }, 0);\n        return true;\n      } else {\n        return value;\n      }\n    }\n\n    // Allow subclasses to massage the input prior to running\n    oldString = this.castInput(oldString);\n    newString = this.castInput(newString);\n\n    oldString = this.removeEmpty(this.tokenize(oldString));\n    newString = this.removeEmpty(this.tokenize(newString));\n\n    let newLen = newString.length, oldLen = oldString.length;\n    let editLength = 1;\n    let maxEditLength = newLen + oldLen;\n    let bestPath = [{ newPos: -1, components: [] }];\n\n    // Seed editLength = 0, i.e. the content starts with the same values\n    let oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n      // Identity per the equality and tokenizer\n      return done([{value: this.join(newString), count: newString.length}]);\n    }\n\n    // Main worker method. checks all permutations of a given edit length for acceptance.\n    function execEditLength() {\n      for (let diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n        let basePath;\n        let addPath = bestPath[diagonalPath - 1],\n            removePath = bestPath[diagonalPath + 1],\n            oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n        if (addPath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n\n        let canAdd = addPath && addPath.newPos + 1 < newLen,\n            canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        }\n\n        // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the new string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n        if (!canAdd || (canRemove && addPath.newPos < removePath.newPos)) {\n          basePath = clonePath(removePath);\n          self.pushComponent(basePath.components, undefined, true);\n        } else {\n          basePath = addPath; // No need to clone, we've pulled it from the list\n          basePath.newPos++;\n          self.pushComponent(basePath.components, true, undefined);\n        }\n\n        oldPos = self.extractCommon(basePath, newString, oldString, diagonalPath);\n\n        // If we have hit the end of both strings, then we are done\n        if (basePath.newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n          return done(buildValues(self, basePath.components, newString, oldString, self.useLongestToken));\n        } else {\n          // Otherwise track this path as a potential candidate and continue.\n          bestPath[diagonalPath] = basePath;\n        }\n      }\n\n      editLength++;\n    }\n\n    // Performs the length of edit iteration. Is a bit fugly as this has to support the\n    // sync and async mode which is never fun. Loops over execEditLength until a value\n    // is produced.\n    if (callback) {\n      (function exec() {\n        setTimeout(function() {\n          // This should not happen, but we want to be safe.\n          /* istanbul ignore next */\n          if (editLength > maxEditLength) {\n            return callback();\n          }\n\n          if (!execEditLength()) {\n            exec();\n          }\n        }, 0);\n      }());\n    } else {\n      while (editLength <= maxEditLength) {\n        let ret = execEditLength();\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n\n  pushComponent(components, added, removed) {\n    let last = components[components.length - 1];\n    if (last && last.added === added && last.removed === removed) {\n      // We need to clone here as the component clone operation is just\n      // as shallow array clone\n      components[components.length - 1] = {count: last.count + 1, added: added, removed: removed };\n    } else {\n      components.push({count: 1, added: added, removed: removed });\n    }\n  },\n  extractCommon(basePath, newString, oldString, diagonalPath) {\n    let newLen = newString.length,\n        oldLen = oldString.length,\n        newPos = basePath.newPos,\n        oldPos = newPos - diagonalPath,\n\n        commonCount = 0;\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n    }\n\n    if (commonCount) {\n      basePath.components.push({count: commonCount});\n    }\n\n    basePath.newPos = newPos;\n    return oldPos;\n  },\n\n  equals(left, right) {\n    if (this.options.comparator) {\n      return this.options.comparator(left, right);\n    } else {\n      return left === right\n        || (this.options.ignoreCase && left.toLowerCase() === right.toLowerCase());\n    }\n  },\n  removeEmpty(array) {\n    let ret = [];\n    for (let i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n    return ret;\n  },\n  castInput(value) {\n    return value;\n  },\n  tokenize(value) {\n    return value.split('');\n  },\n  join(chars) {\n    return chars.join('');\n  }\n};\n\nfunction buildValues(diff, components, newString, oldString, useLongestToken) {\n  let componentPos = 0,\n      componentLen = components.length,\n      newPos = 0,\n      oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    let component = components[componentPos];\n    if (!component.removed) {\n      if (!component.added && useLongestToken) {\n        let value = newString.slice(newPos, newPos + component.count);\n        value = value.map(function(value, i) {\n          let oldValue = oldString[oldPos + i];\n          return oldValue.length > value.length ? oldValue : value;\n        });\n\n        component.value = diff.join(value);\n      } else {\n        component.value = diff.join(newString.slice(newPos, newPos + component.count));\n      }\n      newPos += component.count;\n\n      // Common case\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n      oldPos += component.count;\n\n      // Reverse add and remove so removes are output first to match common convention\n      // The diffing algorithm is tied to add then remove output and this is the simplest\n      // route to get the desired output with minimal overhead.\n      if (componentPos && components[componentPos - 1].added) {\n        let tmp = components[componentPos - 1];\n        components[componentPos - 1] = components[componentPos];\n        components[componentPos] = tmp;\n      }\n    }\n  }\n\n  // Special case handle for when one terminal is ignored (i.e. whitespace).\n  // For this case we merge the terminal into the prior string and drop the change.\n  // This is only available for string mode.\n  let lastComponent = components[componentLen - 1];\n  if (componentLen > 1\n      && typeof lastComponent.value === 'string'\n      && (lastComponent.added || lastComponent.removed)\n      && diff.equals('', lastComponent.value)) {\n    components[componentLen - 2].value += lastComponent.value;\n    components.pop();\n  }\n\n  return components;\n}\n\nfunction clonePath(path) {\n  return { newPos: path.newPos, components: path.components.slice(0) };\n}\n","import Diff from './base';\n\nexport const characterDiff = new Diff();\nexport function diffChars(oldStr, newStr, options) { return characterDiff.diff(oldStr, newStr, options); }\n","'use strict';\n\nvar util = require('./util');\n\nfunction scrollIntoView(elem, container, config) {\n  config = config || {};\n  // document 归一化到 window\n  if (container.nodeType === 9) {\n    container = util.getWindow(container);\n  }\n\n  var allowHorizontalScroll = config.allowHorizontalScroll;\n  var onlyScrollIfNeeded = config.onlyScrollIfNeeded;\n  var alignWithTop = config.alignWithTop;\n  var alignWithLeft = config.alignWithLeft;\n  var offsetTop = config.offsetTop || 0;\n  var offsetLeft = config.offsetLeft || 0;\n  var offsetBottom = config.offsetBottom || 0;\n  var offsetRight = config.offsetRight || 0;\n\n  allowHorizontalScroll = allowHorizontalScroll === undefined ? true : allowHorizontalScroll;\n\n  var isWin = util.isWindow(container);\n  var isFramed = !!(isWin && container.frameElement);\n  var elemOffset = util.offset(elem);\n  var eh = util.outerHeight(elem);\n  var ew = util.outerWidth(elem);\n  var containerOffset = undefined;\n  var ch = undefined;\n  var cw = undefined;\n  var containerScroll = undefined;\n  var diffTop = undefined;\n  var diffBottom = undefined;\n  var win = undefined;\n  var winScroll = undefined;\n  var ww = undefined;\n  var wh = undefined;\n\n  if (isFramed) {\n    container = container.document.scrollingElement || container.document.body;\n  }\n\n  if (isWin || isFramed) {\n    win = container;\n    wh = util.height(win);\n    ww = util.width(win);\n    winScroll = {\n      left: util.scrollLeft(win),\n      top: util.scrollTop(win)\n    };\n    // elem 相对 container 可视视窗的距离\n    diffTop = {\n      left: elemOffset.left - winScroll.left - offsetLeft,\n      top: elemOffset.top - winScroll.top - offsetTop\n    };\n    diffBottom = {\n      left: elemOffset.left + ew - (winScroll.left + ww) + offsetRight,\n      top: elemOffset.top + eh - (winScroll.top + wh) + offsetBottom\n    };\n    containerScroll = winScroll;\n  } else {\n    containerOffset = util.offset(container);\n    ch = container.clientHeight;\n    cw = container.clientWidth;\n    containerScroll = {\n      left: container.scrollLeft,\n      top: container.scrollTop\n    };\n    // elem 相对 container 可视视窗的距离\n    // 注意边框, offset 是边框到根节点\n    diffTop = {\n      left: elemOffset.left - (containerOffset.left + (parseFloat(util.css(container, 'borderLeftWidth')) || 0)) - offsetLeft,\n      top: elemOffset.top - (containerOffset.top + (parseFloat(util.css(container, 'borderTopWidth')) || 0)) - offsetTop\n    };\n    diffBottom = {\n      left: elemOffset.left + ew - (containerOffset.left + cw + (parseFloat(util.css(container, 'borderRightWidth')) || 0)) + offsetRight,\n      top: elemOffset.top + eh - (containerOffset.top + ch + (parseFloat(util.css(container, 'borderBottomWidth')) || 0)) + offsetBottom\n    };\n  }\n\n  if (diffTop.top < 0 || diffBottom.top > 0) {\n    // 强制向上\n    if (alignWithTop === true) {\n      util.scrollTop(container, containerScroll.top + diffTop.top);\n    } else if (alignWithTop === false) {\n      util.scrollTop(container, containerScroll.top + diffBottom.top);\n    } else {\n      // 自动调整\n      if (diffTop.top < 0) {\n        util.scrollTop(container, containerScroll.top + diffTop.top);\n      } else {\n        util.scrollTop(container, containerScroll.top + diffBottom.top);\n      }\n    }\n  } else {\n    if (!onlyScrollIfNeeded) {\n      alignWithTop = alignWithTop === undefined ? true : !!alignWithTop;\n      if (alignWithTop) {\n        util.scrollTop(container, containerScroll.top + diffTop.top);\n      } else {\n        util.scrollTop(container, containerScroll.top + diffBottom.top);\n      }\n    }\n  }\n\n  if (allowHorizontalScroll) {\n    if (diffTop.left < 0 || diffBottom.left > 0) {\n      // 强制向上\n      if (alignWithLeft === true) {\n        util.scrollLeft(container, containerScroll.left + diffTop.left);\n      } else if (alignWithLeft === false) {\n        util.scrollLeft(container, containerScroll.left + diffBottom.left);\n      } else {\n        // 自动调整\n        if (diffTop.left < 0) {\n          util.scrollLeft(container, containerScroll.left + diffTop.left);\n        } else {\n          util.scrollLeft(container, containerScroll.left + diffBottom.left);\n        }\n      }\n    } else {\n      if (!onlyScrollIfNeeded) {\n        alignWithLeft = alignWithLeft === undefined ? true : !!alignWithLeft;\n        if (alignWithLeft) {\n          util.scrollLeft(container, containerScroll.left + diffTop.left);\n        } else {\n          util.scrollLeft(container, containerScroll.left + diffBottom.left);\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = scrollIntoView;","'use strict';\n\nmodule.exports = require('./dom-scroll-into-view');","'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar RE_NUM = /[\\-+]?(?:\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/.source;\n\nfunction getClientPosition(elem) {\n  var box = undefined;\n  var x = undefined;\n  var y = undefined;\n  var doc = elem.ownerDocument;\n  var body = doc.body;\n  var docElem = doc && doc.documentElement;\n  // 根据 GBS 最新数据，A-Grade Browsers 都已支持 getBoundingClientRect 方法，不用再考虑传统的实现方式\n  box = elem.getBoundingClientRect();\n\n  // 注：jQuery 还考虑减去 docElem.clientLeft/clientTop\n  // 但测试发现，这样反而会导致当 html 和 body 有边距/边框样式时，获取的值不正确\n  // 此外，ie6 会忽略 html 的 margin 值，幸运地是没有谁会去设置 html 的 margin\n\n  x = box.left;\n  y = box.top;\n\n  // In IE, most of the time, 2 extra pixels are added to the top and left\n  // due to the implicit 2-pixel inset border.  In IE6/7 quirks mode and\n  // IE6 standards mode, this border can be overridden by setting the\n  // document element's border to zero -- thus, we cannot rely on the\n  // offset always being 2 pixels.\n\n  // In quirks mode, the offset can be determined by querying the body's\n  // clientLeft/clientTop, but in standards mode, it is found by querying\n  // the document element's clientLeft/clientTop.  Since we already called\n  // getClientBoundingRect we have already forced a reflow, so it is not\n  // too expensive just to query them all.\n\n  // ie 下应该减去窗口的边框吧，毕竟默认 absolute 都是相对窗口定位的\n  // 窗口边框标准是设 documentElement ,quirks 时设置 body\n  // 最好禁止在 body 和 html 上边框 ，但 ie < 9 html 默认有 2px ，减去\n  // 但是非 ie 不可能设置窗口边框，body html 也不是窗口 ,ie 可以通过 html,body 设置\n  // 标准 ie 下 docElem.clientTop 就是 border-top\n  // ie7 html 即窗口边框改变不了。永远为 2\n  // 但标准 firefox/chrome/ie9 下 docElem.clientTop 是窗口边框，即使设了 border-top 也为 0\n\n  x -= docElem.clientLeft || body.clientLeft || 0;\n  y -= docElem.clientTop || body.clientTop || 0;\n\n  return {\n    left: x,\n    top: y\n  };\n}\n\nfunction getScroll(w, top) {\n  var ret = w['page' + (top ? 'Y' : 'X') + 'Offset'];\n  var method = 'scroll' + (top ? 'Top' : 'Left');\n  if (typeof ret !== 'number') {\n    var d = w.document;\n    // ie6,7,8 standard mode\n    ret = d.documentElement[method];\n    if (typeof ret !== 'number') {\n      // quirks mode\n      ret = d.body[method];\n    }\n  }\n  return ret;\n}\n\nfunction getScrollLeft(w) {\n  return getScroll(w);\n}\n\nfunction getScrollTop(w) {\n  return getScroll(w, true);\n}\n\nfunction getOffset(el) {\n  var pos = getClientPosition(el);\n  var doc = el.ownerDocument;\n  var w = doc.defaultView || doc.parentWindow;\n  pos.left += getScrollLeft(w);\n  pos.top += getScrollTop(w);\n  return pos;\n}\nfunction _getComputedStyle(elem, name, computedStyle_) {\n  var val = '';\n  var d = elem.ownerDocument;\n  var computedStyle = computedStyle_ || d.defaultView.getComputedStyle(elem, null);\n\n  // https://github.com/kissyteam/kissy/issues/61\n  if (computedStyle) {\n    val = computedStyle.getPropertyValue(name) || computedStyle[name];\n  }\n\n  return val;\n}\n\nvar _RE_NUM_NO_PX = new RegExp('^(' + RE_NUM + ')(?!px)[a-z%]+$', 'i');\nvar RE_POS = /^(top|right|bottom|left)$/;\nvar CURRENT_STYLE = 'currentStyle';\nvar RUNTIME_STYLE = 'runtimeStyle';\nvar LEFT = 'left';\nvar PX = 'px';\n\nfunction _getComputedStyleIE(elem, name) {\n  // currentStyle maybe null\n  // http://msdn.microsoft.com/en-us/library/ms535231.aspx\n  var ret = elem[CURRENT_STYLE] && elem[CURRENT_STYLE][name];\n\n  // 当 width/height 设置为百分比时，通过 pixelLeft 方式转换的 width/height 值\n  // 一开始就处理了! CUSTOM_STYLE.height,CUSTOM_STYLE.width ,cssHook 解决@2011-08-19\n  // 在 ie 下不对，需要直接用 offset 方式\n  // borderWidth 等值也有问题，但考虑到 borderWidth 设为百分比的概率很小，这里就不考虑了\n\n  // From the awesome hack by Dean Edwards\n  // http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n  // If we're not dealing with a regular pixel number\n  // but a number that has a weird ending, we need to convert it to pixels\n  // exclude left right for relativity\n  if (_RE_NUM_NO_PX.test(ret) && !RE_POS.test(name)) {\n    // Remember the original values\n    var style = elem.style;\n    var left = style[LEFT];\n    var rsLeft = elem[RUNTIME_STYLE][LEFT];\n\n    // prevent flashing of content\n    elem[RUNTIME_STYLE][LEFT] = elem[CURRENT_STYLE][LEFT];\n\n    // Put in the new values to get a computed value out\n    style[LEFT] = name === 'fontSize' ? '1em' : ret || 0;\n    ret = style.pixelLeft + PX;\n\n    // Revert the changed values\n    style[LEFT] = left;\n\n    elem[RUNTIME_STYLE][LEFT] = rsLeft;\n  }\n  return ret === '' ? 'auto' : ret;\n}\n\nvar getComputedStyleX = undefined;\nif (typeof window !== 'undefined') {\n  getComputedStyleX = window.getComputedStyle ? _getComputedStyle : _getComputedStyleIE;\n}\n\nfunction each(arr, fn) {\n  for (var i = 0; i < arr.length; i++) {\n    fn(arr[i]);\n  }\n}\n\nfunction isBorderBoxFn(elem) {\n  return getComputedStyleX(elem, 'boxSizing') === 'border-box';\n}\n\nvar BOX_MODELS = ['margin', 'border', 'padding'];\nvar CONTENT_INDEX = -1;\nvar PADDING_INDEX = 2;\nvar BORDER_INDEX = 1;\nvar MARGIN_INDEX = 0;\n\nfunction swap(elem, options, callback) {\n  var old = {};\n  var style = elem.style;\n  var name = undefined;\n\n  // Remember the old values, and insert the new ones\n  for (name in options) {\n    if (options.hasOwnProperty(name)) {\n      old[name] = style[name];\n      style[name] = options[name];\n    }\n  }\n\n  callback.call(elem);\n\n  // Revert the old values\n  for (name in options) {\n    if (options.hasOwnProperty(name)) {\n      style[name] = old[name];\n    }\n  }\n}\n\nfunction getPBMWidth(elem, props, which) {\n  var value = 0;\n  var prop = undefined;\n  var j = undefined;\n  var i = undefined;\n  for (j = 0; j < props.length; j++) {\n    prop = props[j];\n    if (prop) {\n      for (i = 0; i < which.length; i++) {\n        var cssProp = undefined;\n        if (prop === 'border') {\n          cssProp = prop + which[i] + 'Width';\n        } else {\n          cssProp = prop + which[i];\n        }\n        value += parseFloat(getComputedStyleX(elem, cssProp)) || 0;\n      }\n    }\n  }\n  return value;\n}\n\n/**\n * A crude way of determining if an object is a window\n * @member util\n */\nfunction isWindow(obj) {\n  // must use == for ie8\n  /* eslint eqeqeq:0 */\n  return obj != null && obj == obj.window;\n}\n\nvar domUtils = {};\n\neach(['Width', 'Height'], function (name) {\n  domUtils['doc' + name] = function (refWin) {\n    var d = refWin.document;\n    return Math.max(\n    // firefox chrome documentElement.scrollHeight< body.scrollHeight\n    // ie standard mode : documentElement.scrollHeight> body.scrollHeight\n    d.documentElement['scroll' + name],\n    // quirks : documentElement.scrollHeight 最大等于可视窗口多一点？\n    d.body['scroll' + name], domUtils['viewport' + name](d));\n  };\n\n  domUtils['viewport' + name] = function (win) {\n    // pc browser includes scrollbar in window.innerWidth\n    var prop = 'client' + name;\n    var doc = win.document;\n    var body = doc.body;\n    var documentElement = doc.documentElement;\n    var documentElementProp = documentElement[prop];\n    // 标准模式取 documentElement\n    // backcompat 取 body\n    return doc.compatMode === 'CSS1Compat' && documentElementProp || body && body[prop] || documentElementProp;\n  };\n});\n\n/*\n 得到元素的大小信息\n @param elem\n @param name\n @param {String} [extra]  'padding' : (css width) + padding\n 'border' : (css width) + padding + border\n 'margin' : (css width) + padding + border + margin\n */\nfunction getWH(elem, name, extra) {\n  if (isWindow(elem)) {\n    return name === 'width' ? domUtils.viewportWidth(elem) : domUtils.viewportHeight(elem);\n  } else if (elem.nodeType === 9) {\n    return name === 'width' ? domUtils.docWidth(elem) : domUtils.docHeight(elem);\n  }\n  var which = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n  var borderBoxValue = name === 'width' ? elem.offsetWidth : elem.offsetHeight;\n  var computedStyle = getComputedStyleX(elem);\n  var isBorderBox = isBorderBoxFn(elem, computedStyle);\n  var cssBoxValue = 0;\n  if (borderBoxValue == null || borderBoxValue <= 0) {\n    borderBoxValue = undefined;\n    // Fall back to computed then un computed css if necessary\n    cssBoxValue = getComputedStyleX(elem, name);\n    if (cssBoxValue == null || Number(cssBoxValue) < 0) {\n      cssBoxValue = elem.style[name] || 0;\n    }\n    // Normalize '', auto, and prepare for extra\n    cssBoxValue = parseFloat(cssBoxValue) || 0;\n  }\n  if (extra === undefined) {\n    extra = isBorderBox ? BORDER_INDEX : CONTENT_INDEX;\n  }\n  var borderBoxValueOrIsBorderBox = borderBoxValue !== undefined || isBorderBox;\n  var val = borderBoxValue || cssBoxValue;\n  if (extra === CONTENT_INDEX) {\n    if (borderBoxValueOrIsBorderBox) {\n      return val - getPBMWidth(elem, ['border', 'padding'], which, computedStyle);\n    }\n    return cssBoxValue;\n  }\n  if (borderBoxValueOrIsBorderBox) {\n    var padding = extra === PADDING_INDEX ? -getPBMWidth(elem, ['border'], which, computedStyle) : getPBMWidth(elem, ['margin'], which, computedStyle);\n    return val + (extra === BORDER_INDEX ? 0 : padding);\n  }\n  return cssBoxValue + getPBMWidth(elem, BOX_MODELS.slice(extra), which, computedStyle);\n}\n\nvar cssShow = {\n  position: 'absolute',\n  visibility: 'hidden',\n  display: 'block'\n};\n\n// fix #119 : https://github.com/kissyteam/kissy/issues/119\nfunction getWHIgnoreDisplay(elem) {\n  var val = undefined;\n  var args = arguments;\n  // in case elem is window\n  // elem.offsetWidth === undefined\n  if (elem.offsetWidth !== 0) {\n    val = getWH.apply(undefined, args);\n  } else {\n    swap(elem, cssShow, function () {\n      val = getWH.apply(undefined, args);\n    });\n  }\n  return val;\n}\n\nfunction css(el, name, v) {\n  var value = v;\n  if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n    for (var i in name) {\n      if (name.hasOwnProperty(i)) {\n        css(el, i, name[i]);\n      }\n    }\n    return undefined;\n  }\n  if (typeof value !== 'undefined') {\n    if (typeof value === 'number') {\n      value += 'px';\n    }\n    el.style[name] = value;\n    return undefined;\n  }\n  return getComputedStyleX(el, name);\n}\n\neach(['width', 'height'], function (name) {\n  var first = name.charAt(0).toUpperCase() + name.slice(1);\n  domUtils['outer' + first] = function (el, includeMargin) {\n    return el && getWHIgnoreDisplay(el, name, includeMargin ? MARGIN_INDEX : BORDER_INDEX);\n  };\n  var which = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n\n  domUtils[name] = function (elem, val) {\n    if (val !== undefined) {\n      if (elem) {\n        var computedStyle = getComputedStyleX(elem);\n        var isBorderBox = isBorderBoxFn(elem);\n        if (isBorderBox) {\n          val += getPBMWidth(elem, ['padding', 'border'], which, computedStyle);\n        }\n        return css(elem, name, val);\n      }\n      return undefined;\n    }\n    return elem && getWHIgnoreDisplay(elem, name, CONTENT_INDEX);\n  };\n});\n\n// 设置 elem 相对 elem.ownerDocument 的坐标\nfunction setOffset(elem, offset) {\n  // set position first, in-case top/left are set even on static elem\n  if (css(elem, 'position') === 'static') {\n    elem.style.position = 'relative';\n  }\n\n  var old = getOffset(elem);\n  var ret = {};\n  var current = undefined;\n  var key = undefined;\n\n  for (key in offset) {\n    if (offset.hasOwnProperty(key)) {\n      current = parseFloat(css(elem, key)) || 0;\n      ret[key] = current + offset[key] - old[key];\n    }\n  }\n  css(elem, ret);\n}\n\nmodule.exports = _extends({\n  getWindow: function getWindow(node) {\n    var doc = node.ownerDocument || node;\n    return doc.defaultView || doc.parentWindow;\n  },\n  offset: function offset(el, value) {\n    if (typeof value !== 'undefined') {\n      setOffset(el, value);\n    } else {\n      return getOffset(el);\n    }\n  },\n\n  isWindow: isWindow,\n  each: each,\n  css: css,\n  clone: function clone(obj) {\n    var ret = {};\n    for (var i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        ret[i] = obj[i];\n      }\n    }\n    var overflow = obj.overflow;\n    if (overflow) {\n      for (var i in obj) {\n        if (obj.hasOwnProperty(i)) {\n          ret.overflow[i] = obj.overflow[i];\n        }\n      }\n    }\n    return ret;\n  },\n  scrollLeft: function scrollLeft(w, v) {\n    if (isWindow(w)) {\n      if (v === undefined) {\n        return getScrollLeft(w);\n      }\n      window.scrollTo(v, getScrollTop(w));\n    } else {\n      if (v === undefined) {\n        return w.scrollLeft;\n      }\n      w.scrollLeft = v;\n    }\n  },\n  scrollTop: function scrollTop(w, v) {\n    if (isWindow(w)) {\n      if (v === undefined) {\n        return getScrollTop(w);\n      }\n      window.scrollTo(getScrollLeft(w), v);\n    } else {\n      if (v === undefined) {\n        return w.scrollTop;\n      }\n      w.scrollTop = v;\n    }\n  },\n\n  viewportWidth: 0,\n  viewportHeight: 0\n}, domUtils);","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n  var envHasBigInt64Array = typeof BigInt64Array !== 'undefined';\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n    if ((a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      for (i of a.entries())\n        if (!equal(i[1], b.get(i[0]))) return false;\n      return true;\n    }\n\n    if ((a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      return true;\n    }\n\n    if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","// Load in dependencies\nvar computedStyle = require('computed-style');\n\n/**\n * Calculate the `line-height` of a given node\n * @param {HTMLElement} node Element to calculate line height of. Must be in the DOM.\n * @returns {Number} `line-height` of the element in pixels\n */\nfunction lineHeight(node) {\n  // Grab the line-height via style\n  var lnHeightStr = computedStyle(node, 'line-height');\n  var lnHeight = parseFloat(lnHeightStr, 10);\n\n  // If the lineHeight did not contain a unit (i.e. it was numeric), convert it to ems (e.g. '2.3' === '2.3em')\n  if (lnHeightStr === lnHeight + '') {\n    // Save the old lineHeight style and update the em unit to the element\n    var _lnHeightStyle = node.style.lineHeight;\n    node.style.lineHeight = lnHeightStr + 'em';\n\n    // Calculate the em based height\n    lnHeightStr = computedStyle(node, 'line-height');\n    lnHeight = parseFloat(lnHeightStr, 10);\n\n    // Revert the lineHeight style\n    if (_lnHeightStyle) {\n      node.style.lineHeight = _lnHeightStyle;\n    } else {\n      delete node.style.lineHeight;\n    }\n  }\n\n  // If the lineHeight is in `pt`, convert it to pixels (4px for 3pt)\n  // DEV: `em` units are converted to `pt` in IE6\n  // Conversion ratio from https://developer.mozilla.org/en-US/docs/Web/CSS/length\n  if (lnHeightStr.indexOf('pt') !== -1) {\n    lnHeight *= 4;\n    lnHeight /= 3;\n  // Otherwise, if the lineHeight is in `mm`, convert it to pixels (96px for 25.4mm)\n  } else if (lnHeightStr.indexOf('mm') !== -1) {\n    lnHeight *= 96;\n    lnHeight /= 25.4;\n  // Otherwise, if the lineHeight is in `cm`, convert it to pixels (96px for 2.54cm)\n  } else if (lnHeightStr.indexOf('cm') !== -1) {\n    lnHeight *= 96;\n    lnHeight /= 2.54;\n  // Otherwise, if the lineHeight is in `in`, convert it to pixels (96px for 1in)\n  } else if (lnHeightStr.indexOf('in') !== -1) {\n    lnHeight *= 96;\n  // Otherwise, if the lineHeight is in `pc`, convert it to pixels (12pt for 1pc)\n  } else if (lnHeightStr.indexOf('pc') !== -1) {\n    lnHeight *= 16;\n  }\n\n  // Continue our computation\n  lnHeight = Math.round(lnHeight);\n\n  // If the line-height is \"normal\", calculate by font-size\n  if (lnHeightStr === 'normal') {\n    // Create a temporary node\n    var nodeName = node.nodeName;\n    var _node = document.createElement(nodeName);\n    _node.innerHTML = '&nbsp;';\n\n    // If we have a text area, reset it to only 1 row\n    // https://github.com/twolfson/line-height/issues/4\n    if (nodeName.toUpperCase() === 'TEXTAREA') {\n      _node.setAttribute('rows', '1');\n    }\n\n    // Set the font-size of the element\n    var fontSizeStr = computedStyle(node, 'font-size');\n    _node.style.fontSize = fontSizeStr;\n\n    // Remove default padding/border which can affect offset height\n    // https://github.com/twolfson/line-height/issues/4\n    // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetHeight\n    _node.style.padding = '0px';\n    _node.style.border = '0px';\n\n    // Append it to the body\n    var body = document.body;\n    body.appendChild(_node);\n\n    // Assume the line height of the element is the height\n    var height = _node.offsetHeight;\n    lnHeight = height;\n\n    // Remove our child from the DOM\n    body.removeChild(_node);\n  }\n\n  // Return the calculated height\n  return lnHeight;\n}\n\n// Export lineHeight\nmodule.exports = lineHeight;\n","module.exports = require('./src/normalizeWheel.js');\n","/**\n * Copyright (c) 2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ExecutionEnvironment\n */\n\n/*jslint evil: true */\n\n'use strict';\n\nvar canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\n/**\n * Simple, lightweight module assisting with the detection and context of\n * Worker. Helps avoid circular dependencies and allows code to reason about\n * whether or not they are in a Worker, even if they never include the main\n * `ReactWorker` dependency.\n */\nvar ExecutionEnvironment = {\n\n  canUseDOM: canUseDOM,\n\n  canUseWorkers: typeof Worker !== 'undefined',\n\n  canUseEventListeners:\n    canUseDOM && !!(window.addEventListener || window.attachEvent),\n\n  canUseViewport: canUseDOM && !!window.screen,\n\n  isInWorker: !canUseDOM // For now, this is true - might change in the future.\n\n};\n\nmodule.exports = ExecutionEnvironment;\n","/**\n * Copyright 2004-present Facebook. All Rights Reserved.\n *\n * @providesModule UserAgent_DEPRECATED\n */\n\n/**\n *  Provides entirely client-side User Agent and OS detection. You should prefer\n *  the non-deprecated UserAgent module when possible, which exposes our\n *  authoritative server-side PHP-based detection to the client.\n *\n *  Usage is straightforward:\n *\n *    if (UserAgent_DEPRECATED.ie()) {\n *      //  IE\n *    }\n *\n *  You can also do version checks:\n *\n *    if (UserAgent_DEPRECATED.ie() >= 7) {\n *      //  IE7 or better\n *    }\n *\n *  The browser functions will return NaN if the browser does not match, so\n *  you can also do version compares the other way:\n *\n *    if (UserAgent_DEPRECATED.ie() < 7) {\n *      //  IE6 or worse\n *    }\n *\n *  Note that the version is a float and may include a minor version number,\n *  so you should always use range operators to perform comparisons, not\n *  strict equality.\n *\n *  **Note:** You should **strongly** prefer capability detection to browser\n *  version detection where it's reasonable:\n *\n *    http://www.quirksmode.org/js/support.html\n *\n *  Further, we have a large number of mature wrapper functions and classes\n *  which abstract away many browser irregularities. Check the documentation,\n *  grep for things, or ask on javascript@lists.facebook.com before writing yet\n *  another copy of \"event || window.event\".\n *\n */\n\nvar _populated = false;\n\n// Browsers\nvar _ie, _firefox, _opera, _webkit, _chrome;\n\n// Actual IE browser for compatibility mode\nvar _ie_real_version;\n\n// Platforms\nvar _osx, _windows, _linux, _android;\n\n// Architectures\nvar _win64;\n\n// Devices\nvar _iphone, _ipad, _native;\n\nvar _mobile;\n\nfunction _populate() {\n  if (_populated) {\n    return;\n  }\n\n  _populated = true;\n\n  // To work around buggy JS libraries that can't handle multi-digit\n  // version numbers, Opera 10's user agent string claims it's Opera\n  // 9, then later includes a Version/X.Y field:\n  //\n  // Opera/9.80 (foo) Presto/2.2.15 Version/10.10\n  var uas = navigator.userAgent;\n  var agent = /(?:MSIE.(\\d+\\.\\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\\d+\\.\\d+))|(?:Opera(?:.+Version.|.)(\\d+\\.\\d+))|(?:AppleWebKit.(\\d+(?:\\.\\d+)?))|(?:Trident\\/\\d+\\.\\d+.*rv:(\\d+\\.\\d+))/.exec(uas);\n  var os    = /(Mac OS X)|(Windows)|(Linux)/.exec(uas);\n\n  _iphone = /\\b(iPhone|iP[ao]d)/.exec(uas);\n  _ipad = /\\b(iP[ao]d)/.exec(uas);\n  _android = /Android/i.exec(uas);\n  _native = /FBAN\\/\\w+;/i.exec(uas);\n  _mobile = /Mobile/i.exec(uas);\n\n  // Note that the IE team blog would have you believe you should be checking\n  // for 'Win64; x64'.  But MSDN then reveals that you can actually be coming\n  // from either x64 or ia64;  so ultimately, you should just check for Win64\n  // as in indicator of whether you're in 64-bit IE.  32-bit IE on 64-bit\n  // Windows will send 'WOW64' instead.\n  _win64 = !!(/Win64/.exec(uas));\n\n  if (agent) {\n    _ie = agent[1] ? parseFloat(agent[1]) : (\n          agent[5] ? parseFloat(agent[5]) : NaN);\n    // IE compatibility mode\n    if (_ie && document && document.documentMode) {\n      _ie = document.documentMode;\n    }\n    // grab the \"true\" ie version from the trident token if available\n    var trident = /(?:Trident\\/(\\d+.\\d+))/.exec(uas);\n    _ie_real_version = trident ? parseFloat(trident[1]) + 4 : _ie;\n\n    _firefox = agent[2] ? parseFloat(agent[2]) : NaN;\n    _opera   = agent[3] ? parseFloat(agent[3]) : NaN;\n    _webkit  = agent[4] ? parseFloat(agent[4]) : NaN;\n    if (_webkit) {\n      // We do not add the regexp to the above test, because it will always\n      // match 'safari' only since 'AppleWebKit' appears before 'Chrome' in\n      // the userAgent string.\n      agent = /(?:Chrome\\/(\\d+\\.\\d+))/.exec(uas);\n      _chrome = agent && agent[1] ? parseFloat(agent[1]) : NaN;\n    } else {\n      _chrome = NaN;\n    }\n  } else {\n    _ie = _firefox = _opera = _chrome = _webkit = NaN;\n  }\n\n  if (os) {\n    if (os[1]) {\n      // Detect OS X version.  If no version number matches, set _osx to true.\n      // Version examples:  10, 10_6_1, 10.7\n      // Parses version number as a float, taking only first two sets of\n      // digits.  If only one set of digits is found, returns just the major\n      // version number.\n      var ver = /(?:Mac OS X (\\d+(?:[._]\\d+)?))/.exec(uas);\n\n      _osx = ver ? parseFloat(ver[1].replace('_', '.')) : true;\n    } else {\n      _osx = false;\n    }\n    _windows = !!os[2];\n    _linux   = !!os[3];\n  } else {\n    _osx = _windows = _linux = false;\n  }\n}\n\nvar UserAgent_DEPRECATED = {\n\n  /**\n   *  Check if the UA is Internet Explorer.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  ie: function() {\n    return _populate() || _ie;\n  },\n\n  /**\n   * Check if we're in Internet Explorer compatibility mode.\n   *\n   * @return bool true if in compatibility mode, false if\n   * not compatibility mode or not ie\n   */\n  ieCompatibilityMode: function() {\n    return _populate() || (_ie_real_version > _ie);\n  },\n\n\n  /**\n   * Whether the browser is 64-bit IE.  Really, this is kind of weak sauce;  we\n   * only need this because Skype can't handle 64-bit IE yet.  We need to remove\n   * this when we don't need it -- tracked by #601957.\n   */\n  ie64: function() {\n    return UserAgent_DEPRECATED.ie() && _win64;\n  },\n\n  /**\n   *  Check if the UA is Firefox.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  firefox: function() {\n    return _populate() || _firefox;\n  },\n\n\n  /**\n   *  Check if the UA is Opera.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  opera: function() {\n    return _populate() || _opera;\n  },\n\n\n  /**\n   *  Check if the UA is WebKit.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  webkit: function() {\n    return _populate() || _webkit;\n  },\n\n  /**\n   *  For Push\n   *  WILL BE REMOVED VERY SOON. Use UserAgent_DEPRECATED.webkit\n   */\n  safari: function() {\n    return UserAgent_DEPRECATED.webkit();\n  },\n\n  /**\n   *  Check if the UA is a Chrome browser.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  chrome : function() {\n    return _populate() || _chrome;\n  },\n\n\n  /**\n   *  Check if the user is running Windows.\n   *\n   *  @return bool `true' if the user's OS is Windows.\n   */\n  windows: function() {\n    return _populate() || _windows;\n  },\n\n\n  /**\n   *  Check if the user is running Mac OS X.\n   *\n   *  @return float|bool   Returns a float if a version number is detected,\n   *                       otherwise true/false.\n   */\n  osx: function() {\n    return _populate() || _osx;\n  },\n\n  /**\n   * Check if the user is running Linux.\n   *\n   * @return bool `true' if the user's OS is some flavor of Linux.\n   */\n  linux: function() {\n    return _populate() || _linux;\n  },\n\n  /**\n   * Check if the user is running on an iPhone or iPod platform.\n   *\n   * @return bool `true' if the user is running some flavor of the\n   *    iPhone OS.\n   */\n  iphone: function() {\n    return _populate() || _iphone;\n  },\n\n  mobile: function() {\n    return _populate() || (_iphone || _ipad || _android || _mobile);\n  },\n\n  nativeApp: function() {\n    // webviews inside of the native apps\n    return _populate() || _native;\n  },\n\n  android: function() {\n    return _populate() || _android;\n  },\n\n  ipad: function() {\n    return _populate() || _ipad;\n  }\n};\n\nmodule.exports = UserAgent_DEPRECATED;\n","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule isEventSupported\n */\n\n'use strict';\n\nvar ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar useHasFeature;\nif (ExecutionEnvironment.canUseDOM) {\n  useHasFeature =\n    document.implementation &&\n    document.implementation.hasFeature &&\n    // always returns true in newer browsers as per the standard.\n    // @see http://dom.spec.whatwg.org/#dom-domimplementation-hasfeature\n    document.implementation.hasFeature('', '') !== true;\n}\n\n/**\n * Checks if an event is supported in the current execution environment.\n *\n * NOTE: This will not work correctly for non-generic events such as `change`,\n * `reset`, `load`, `error`, and `select`.\n *\n * Borrows from Modernizr.\n *\n * @param {string} eventNameSuffix Event name, e.g. \"click\".\n * @param {?boolean} capture Check if the capture phase is supported.\n * @return {boolean} True if the event is supported.\n * @internal\n * @license Modernizr 3.0.0pre (Custom Build) | MIT\n */\nfunction isEventSupported(eventNameSuffix, capture) {\n  if (!ExecutionEnvironment.canUseDOM ||\n      capture && !('addEventListener' in document)) {\n    return false;\n  }\n\n  var eventName = 'on' + eventNameSuffix;\n  var isSupported = eventName in document;\n\n  if (!isSupported) {\n    var element = document.createElement('div');\n    element.setAttribute(eventName, 'return;');\n    isSupported = typeof element[eventName] === 'function';\n  }\n\n  if (!isSupported && useHasFeature && eventNameSuffix === 'wheel') {\n    // This is the only way to test support for the `wheel` event in IE9+.\n    isSupported = document.implementation.hasFeature('Events.wheel', '3.0');\n  }\n\n  return isSupported;\n}\n\nmodule.exports = isEventSupported;\n","/**\n * Copyright (c) 2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule normalizeWheel\n * @typechecks\n */\n\n'use strict';\n\nvar UserAgent_DEPRECATED = require('./UserAgent_DEPRECATED');\n\nvar isEventSupported = require('./isEventSupported');\n\n\n// Reasonable defaults\nvar PIXEL_STEP  = 10;\nvar LINE_HEIGHT = 40;\nvar PAGE_HEIGHT = 800;\n\n/**\n * Mouse wheel (and 2-finger trackpad) support on the web sucks.  It is\n * complicated, thus this doc is long and (hopefully) detailed enough to answer\n * your questions.\n *\n * If you need to react to the mouse wheel in a predictable way, this code is\n * like your bestest friend. * hugs *\n *\n * As of today, there are 4 DOM event types you can listen to:\n *\n *   'wheel'                -- Chrome(31+), FF(17+), IE(9+)\n *   'mousewheel'           -- Chrome, IE(6+), Opera, Safari\n *   'MozMousePixelScroll'  -- FF(3.5 only!) (2010-2013) -- don't bother!\n *   'DOMMouseScroll'       -- FF(0.9.7+) since 2003\n *\n * So what to do?  The is the best:\n *\n *   normalizeWheel.getEventType();\n *\n * In your event callback, use this code to get sane interpretation of the\n * deltas.  This code will return an object with properties:\n *\n *   spinX   -- normalized spin speed (use for zoom) - x plane\n *   spinY   -- \" - y plane\n *   pixelX  -- normalized distance (to pixels) - x plane\n *   pixelY  -- \" - y plane\n *\n * Wheel values are provided by the browser assuming you are using the wheel to\n * scroll a web page by a number of lines or pixels (or pages).  Values can vary\n * significantly on different platforms and browsers, forgetting that you can\n * scroll at different speeds.  Some devices (like trackpads) emit more events\n * at smaller increments with fine granularity, and some emit massive jumps with\n * linear speed or acceleration.\n *\n * This code does its best to normalize the deltas for you:\n *\n *   - spin is trying to normalize how far the wheel was spun (or trackpad\n *     dragged).  This is super useful for zoom support where you want to\n *     throw away the chunky scroll steps on the PC and make those equal to\n *     the slow and smooth tiny steps on the Mac. Key data: This code tries to\n *     resolve a single slow step on a wheel to 1.\n *\n *   - pixel is normalizing the desired scroll delta in pixel units.  You'll\n *     get the crazy differences between browsers, but at least it'll be in\n *     pixels!\n *\n *   - positive value indicates scrolling DOWN/RIGHT, negative UP/LEFT.  This\n *     should translate to positive value zooming IN, negative zooming OUT.\n *     This matches the newer 'wheel' event.\n *\n * Why are there spinX, spinY (or pixels)?\n *\n *   - spinX is a 2-finger side drag on the trackpad, and a shift + wheel turn\n *     with a mouse.  It results in side-scrolling in the browser by default.\n *\n *   - spinY is what you expect -- it's the classic axis of a mouse wheel.\n *\n *   - I dropped spinZ/pixelZ.  It is supported by the DOM 3 'wheel' event and\n *     probably is by browsers in conjunction with fancy 3D controllers .. but\n *     you know.\n *\n * Implementation info:\n *\n * Examples of 'wheel' event if you scroll slowly (down) by one step with an\n * average mouse:\n *\n *   OS X + Chrome  (mouse)     -    4   pixel delta  (wheelDelta -120)\n *   OS X + Safari  (mouse)     -  N/A   pixel delta  (wheelDelta  -12)\n *   OS X + Firefox (mouse)     -    0.1 line  delta  (wheelDelta  N/A)\n *   Win8 + Chrome  (mouse)     -  100   pixel delta  (wheelDelta -120)\n *   Win8 + Firefox (mouse)     -    3   line  delta  (wheelDelta -120)\n *\n * On the trackpad:\n *\n *   OS X + Chrome  (trackpad)  -    2   pixel delta  (wheelDelta   -6)\n *   OS X + Firefox (trackpad)  -    1   pixel delta  (wheelDelta  N/A)\n *\n * On other/older browsers.. it's more complicated as there can be multiple and\n * also missing delta values.\n *\n * The 'wheel' event is more standard:\n *\n * http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents\n *\n * The basics is that it includes a unit, deltaMode (pixels, lines, pages), and\n * deltaX, deltaY and deltaZ.  Some browsers provide other values to maintain\n * backward compatibility with older events.  Those other values help us\n * better normalize spin speed.  Example of what the browsers provide:\n *\n *                          | event.wheelDelta | event.detail\n *        ------------------+------------------+--------------\n *          Safari v5/OS X  |       -120       |       0\n *          Safari v5/Win7  |       -120       |       0\n *         Chrome v17/OS X  |       -120       |       0\n *         Chrome v17/Win7  |       -120       |       0\n *                IE9/Win7  |       -120       |   undefined\n *         Firefox v4/OS X  |     undefined    |       1\n *         Firefox v4/Win7  |     undefined    |       3\n *\n */\nfunction normalizeWheel(/*object*/ event) /*object*/ {\n  var sX = 0, sY = 0,       // spinX, spinY\n      pX = 0, pY = 0;       // pixelX, pixelY\n\n  // Legacy\n  if ('detail'      in event) { sY = event.detail; }\n  if ('wheelDelta'  in event) { sY = -event.wheelDelta / 120; }\n  if ('wheelDeltaY' in event) { sY = -event.wheelDeltaY / 120; }\n  if ('wheelDeltaX' in event) { sX = -event.wheelDeltaX / 120; }\n\n  // side scrolling on FF with DOMMouseScroll\n  if ( 'axis' in event && event.axis === event.HORIZONTAL_AXIS ) {\n    sX = sY;\n    sY = 0;\n  }\n\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n\n  if ('deltaY' in event) { pY = event.deltaY; }\n  if ('deltaX' in event) { pX = event.deltaX; }\n\n  if ((pX || pY) && event.deltaMode) {\n    if (event.deltaMode == 1) {          // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else {                             // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pX && !sX) { sX = (pX < 1) ? -1 : 1; }\n  if (pY && !sY) { sY = (pY < 1) ? -1 : 1; }\n\n  return { spinX  : sX,\n           spinY  : sY,\n           pixelX : pX,\n           pixelY : pY };\n}\n\n\n/**\n * The best combination if you prefer spinX + spinY normalization.  It favors\n * the older DOMMouseScroll for Firefox, as FF does not include wheelDelta with\n * 'wheel' event, making spin speed determination impossible.\n */\nnormalizeWheel.getEventType = function() /*string*/ {\n  return (UserAgent_DEPRECATED.firefox())\n           ? 'DOMMouseScroll'\n           : (isEventSupported('wheel'))\n               ? 'wheel'\n               : 'mousewheel';\n};\n\nmodule.exports = normalizeWheel;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nexports.__esModule = true;\nvar React = require(\"react\");\nvar PropTypes = require(\"prop-types\");\nvar autosize = require(\"autosize\");\nvar _getLineHeight = require(\"line-height\");\nvar getLineHeight = _getLineHeight;\nvar RESIZED = \"autosize:resized\";\n/**\n * A light replacement for built-in textarea component\n * which automaticaly adjusts its height to match the content\n */\nvar TextareaAutosizeClass = /** @class */ (function (_super) {\n    __extends(TextareaAutosizeClass, _super);\n    function TextareaAutosizeClass() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            lineHeight: null\n        };\n        _this.textarea = null;\n        _this.onResize = function (e) {\n            if (_this.props.onResize) {\n                _this.props.onResize(e);\n            }\n        };\n        _this.updateLineHeight = function () {\n            if (_this.textarea) {\n                _this.setState({\n                    lineHeight: getLineHeight(_this.textarea)\n                });\n            }\n        };\n        _this.onChange = function (e) {\n            var onChange = _this.props.onChange;\n            _this.currentValue = e.currentTarget.value;\n            onChange && onChange(e);\n        };\n        return _this;\n    }\n    TextareaAutosizeClass.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, maxRows = _a.maxRows, async = _a.async;\n        if (typeof maxRows === \"number\") {\n            this.updateLineHeight();\n        }\n        if (typeof maxRows === \"number\" || async) {\n            /*\n              the defer is needed to:\n                - force \"autosize\" to activate the scrollbar when this.props.maxRows is passed\n                - support StyledComponents (see #71)\n            */\n            setTimeout(function () { return _this.textarea && autosize(_this.textarea); });\n        }\n        else {\n            this.textarea && autosize(this.textarea);\n        }\n        if (this.textarea) {\n            this.textarea.addEventListener(RESIZED, this.onResize);\n        }\n    };\n    TextareaAutosizeClass.prototype.componentWillUnmount = function () {\n        if (this.textarea) {\n            this.textarea.removeEventListener(RESIZED, this.onResize);\n            autosize.destroy(this.textarea);\n        }\n    };\n    TextareaAutosizeClass.prototype.render = function () {\n        var _this = this;\n        var _a = this, _b = _a.props, onResize = _b.onResize, maxRows = _b.maxRows, onChange = _b.onChange, style = _b.style, innerRef = _b.innerRef, children = _b.children, props = __rest(_b, [\"onResize\", \"maxRows\", \"onChange\", \"style\", \"innerRef\", \"children\"]), lineHeight = _a.state.lineHeight;\n        var maxHeight = maxRows && lineHeight ? lineHeight * maxRows : null;\n        return (React.createElement(\"textarea\", __assign({}, props, { onChange: this.onChange, style: maxHeight ? __assign({}, style, { maxHeight: maxHeight }) : style, ref: function (element) {\n                _this.textarea = element;\n                if (typeof _this.props.innerRef === 'function') {\n                    _this.props.innerRef(element);\n                }\n                else if (_this.props.innerRef) {\n                    _this.props.innerRef.current = element;\n                }\n            } }), children));\n    };\n    TextareaAutosizeClass.prototype.componentDidUpdate = function () {\n        this.textarea && autosize.update(this.textarea);\n    };\n    TextareaAutosizeClass.defaultProps = {\n        rows: 1,\n        async: false\n    };\n    TextareaAutosizeClass.propTypes = {\n        rows: PropTypes.number,\n        maxRows: PropTypes.number,\n        onResize: PropTypes.func,\n        innerRef: PropTypes.any,\n        async: PropTypes.bool\n    };\n    return TextareaAutosizeClass;\n}(React.Component));\nexports.TextareaAutosize = React.forwardRef(function (props, ref) {\n    return React.createElement(TextareaAutosizeClass, __assign({}, props, { innerRef: ref }));\n});\n","\"use strict\";\nexports.__esModule = true;\nvar TextareaAutosize_1 = require(\"./TextareaAutosize\");\nexports[\"default\"] = TextareaAutosize_1.TextareaAutosize;\n","var characterMap = {\r\n\t\"À\": \"A\",\r\n\t\"Á\": \"A\",\r\n\t\"Â\": \"A\",\r\n\t\"Ã\": \"A\",\r\n\t\"Ä\": \"A\",\r\n\t\"Å\": \"A\",\r\n\t\"Ấ\": \"A\",\r\n\t\"Ắ\": \"A\",\r\n\t\"Ẳ\": \"A\",\r\n\t\"Ẵ\": \"A\",\r\n\t\"Ặ\": \"A\",\r\n\t\"Æ\": \"AE\",\r\n\t\"Ầ\": \"A\",\r\n\t\"Ằ\": \"A\",\r\n\t\"Ȃ\": \"A\",\r\n\t\"Ç\": \"C\",\r\n\t\"Ḉ\": \"C\",\r\n\t\"È\": \"E\",\r\n\t\"É\": \"E\",\r\n\t\"Ê\": \"E\",\r\n\t\"Ë\": \"E\",\r\n\t\"Ế\": \"E\",\r\n\t\"Ḗ\": \"E\",\r\n\t\"Ề\": \"E\",\r\n\t\"Ḕ\": \"E\",\r\n\t\"Ḝ\": \"E\",\r\n\t\"Ȇ\": \"E\",\r\n\t\"Ì\": \"I\",\r\n\t\"Í\": \"I\",\r\n\t\"Î\": \"I\",\r\n\t\"Ï\": \"I\",\r\n\t\"Ḯ\": \"I\",\r\n\t\"Ȋ\": \"I\",\r\n\t\"Ð\": \"D\",\r\n\t\"Ñ\": \"N\",\r\n\t\"Ò\": \"O\",\r\n\t\"Ó\": \"O\",\r\n\t\"Ô\": \"O\",\r\n\t\"Õ\": \"O\",\r\n\t\"Ö\": \"O\",\r\n\t\"Ø\": \"O\",\r\n\t\"Ố\": \"O\",\r\n\t\"Ṍ\": \"O\",\r\n\t\"Ṓ\": \"O\",\r\n\t\"Ȏ\": \"O\",\r\n\t\"Ù\": \"U\",\r\n\t\"Ú\": \"U\",\r\n\t\"Û\": \"U\",\r\n\t\"Ü\": \"U\",\r\n\t\"Ý\": \"Y\",\r\n\t\"à\": \"a\",\r\n\t\"á\": \"a\",\r\n\t\"â\": \"a\",\r\n\t\"ã\": \"a\",\r\n\t\"ä\": \"a\",\r\n\t\"å\": \"a\",\r\n\t\"ấ\": \"a\",\r\n\t\"ắ\": \"a\",\r\n\t\"ẳ\": \"a\",\r\n\t\"ẵ\": \"a\",\r\n\t\"ặ\": \"a\",\r\n\t\"æ\": \"ae\",\r\n\t\"ầ\": \"a\",\r\n\t\"ằ\": \"a\",\r\n\t\"ȃ\": \"a\",\r\n\t\"ç\": \"c\",\r\n\t\"ḉ\": \"c\",\r\n\t\"è\": \"e\",\r\n\t\"é\": \"e\",\r\n\t\"ê\": \"e\",\r\n\t\"ë\": \"e\",\r\n\t\"ế\": \"e\",\r\n\t\"ḗ\": \"e\",\r\n\t\"ề\": \"e\",\r\n\t\"ḕ\": \"e\",\r\n\t\"ḝ\": \"e\",\r\n\t\"ȇ\": \"e\",\r\n\t\"ì\": \"i\",\r\n\t\"í\": \"i\",\r\n\t\"î\": \"i\",\r\n\t\"ï\": \"i\",\r\n\t\"ḯ\": \"i\",\r\n\t\"ȋ\": \"i\",\r\n\t\"ð\": \"d\",\r\n\t\"ñ\": \"n\",\r\n\t\"ò\": \"o\",\r\n\t\"ó\": \"o\",\r\n\t\"ô\": \"o\",\r\n\t\"õ\": \"o\",\r\n\t\"ö\": \"o\",\r\n\t\"ø\": \"o\",\r\n\t\"ố\": \"o\",\r\n\t\"ṍ\": \"o\",\r\n\t\"ṓ\": \"o\",\r\n\t\"ȏ\": \"o\",\r\n\t\"ù\": \"u\",\r\n\t\"ú\": \"u\",\r\n\t\"û\": \"u\",\r\n\t\"ü\": \"u\",\r\n\t\"ý\": \"y\",\r\n\t\"ÿ\": \"y\",\r\n\t\"Ā\": \"A\",\r\n\t\"ā\": \"a\",\r\n\t\"Ă\": \"A\",\r\n\t\"ă\": \"a\",\r\n\t\"Ą\": \"A\",\r\n\t\"ą\": \"a\",\r\n\t\"Ć\": \"C\",\r\n\t\"ć\": \"c\",\r\n\t\"Ĉ\": \"C\",\r\n\t\"ĉ\": \"c\",\r\n\t\"Ċ\": \"C\",\r\n\t\"ċ\": \"c\",\r\n\t\"Č\": \"C\",\r\n\t\"č\": \"c\",\r\n\t\"C̆\": \"C\",\r\n\t\"c̆\": \"c\",\r\n\t\"Ď\": \"D\",\r\n\t\"ď\": \"d\",\r\n\t\"Đ\": \"D\",\r\n\t\"đ\": \"d\",\r\n\t\"Ē\": \"E\",\r\n\t\"ē\": \"e\",\r\n\t\"Ĕ\": \"E\",\r\n\t\"ĕ\": \"e\",\r\n\t\"Ė\": \"E\",\r\n\t\"ė\": \"e\",\r\n\t\"Ę\": \"E\",\r\n\t\"ę\": \"e\",\r\n\t\"Ě\": \"E\",\r\n\t\"ě\": \"e\",\r\n\t\"Ĝ\": \"G\",\r\n\t\"Ǵ\": \"G\",\r\n\t\"ĝ\": \"g\",\r\n\t\"ǵ\": \"g\",\r\n\t\"Ğ\": \"G\",\r\n\t\"ğ\": \"g\",\r\n\t\"Ġ\": \"G\",\r\n\t\"ġ\": \"g\",\r\n\t\"Ģ\": \"G\",\r\n\t\"ģ\": \"g\",\r\n\t\"Ĥ\": \"H\",\r\n\t\"ĥ\": \"h\",\r\n\t\"Ħ\": \"H\",\r\n\t\"ħ\": \"h\",\r\n\t\"Ḫ\": \"H\",\r\n\t\"ḫ\": \"h\",\r\n\t\"Ĩ\": \"I\",\r\n\t\"ĩ\": \"i\",\r\n\t\"Ī\": \"I\",\r\n\t\"ī\": \"i\",\r\n\t\"Ĭ\": \"I\",\r\n\t\"ĭ\": \"i\",\r\n\t\"Į\": \"I\",\r\n\t\"į\": \"i\",\r\n\t\"İ\": \"I\",\r\n\t\"ı\": \"i\",\r\n\t\"Ĳ\": \"IJ\",\r\n\t\"ĳ\": \"ij\",\r\n\t\"Ĵ\": \"J\",\r\n\t\"ĵ\": \"j\",\r\n\t\"Ķ\": \"K\",\r\n\t\"ķ\": \"k\",\r\n\t\"Ḱ\": \"K\",\r\n\t\"ḱ\": \"k\",\r\n\t\"K̆\": \"K\",\r\n\t\"k̆\": \"k\",\r\n\t\"Ĺ\": \"L\",\r\n\t\"ĺ\": \"l\",\r\n\t\"Ļ\": \"L\",\r\n\t\"ļ\": \"l\",\r\n\t\"Ľ\": \"L\",\r\n\t\"ľ\": \"l\",\r\n\t\"Ŀ\": \"L\",\r\n\t\"ŀ\": \"l\",\r\n\t\"Ł\": \"l\",\r\n\t\"ł\": \"l\",\r\n\t\"Ḿ\": \"M\",\r\n\t\"ḿ\": \"m\",\r\n\t\"M̆\": \"M\",\r\n\t\"m̆\": \"m\",\r\n\t\"Ń\": \"N\",\r\n\t\"ń\": \"n\",\r\n\t\"Ņ\": \"N\",\r\n\t\"ņ\": \"n\",\r\n\t\"Ň\": \"N\",\r\n\t\"ň\": \"n\",\r\n\t\"ŉ\": \"n\",\r\n\t\"N̆\": \"N\",\r\n\t\"n̆\": \"n\",\r\n\t\"Ō\": \"O\",\r\n\t\"ō\": \"o\",\r\n\t\"Ŏ\": \"O\",\r\n\t\"ŏ\": \"o\",\r\n\t\"Ő\": \"O\",\r\n\t\"ő\": \"o\",\r\n\t\"Œ\": \"OE\",\r\n\t\"œ\": \"oe\",\r\n\t\"P̆\": \"P\",\r\n\t\"p̆\": \"p\",\r\n\t\"Ŕ\": \"R\",\r\n\t\"ŕ\": \"r\",\r\n\t\"Ŗ\": \"R\",\r\n\t\"ŗ\": \"r\",\r\n\t\"Ř\": \"R\",\r\n\t\"ř\": \"r\",\r\n\t\"R̆\": \"R\",\r\n\t\"r̆\": \"r\",\r\n\t\"Ȓ\": \"R\",\r\n\t\"ȓ\": \"r\",\r\n\t\"Ś\": \"S\",\r\n\t\"ś\": \"s\",\r\n\t\"Ŝ\": \"S\",\r\n\t\"ŝ\": \"s\",\r\n\t\"Ş\": \"S\",\r\n\t\"Ș\": \"S\",\r\n\t\"ș\": \"s\",\r\n\t\"ş\": \"s\",\r\n\t\"Š\": \"S\",\r\n\t\"š\": \"s\",\r\n\t\"Ţ\": \"T\",\r\n\t\"ţ\": \"t\",\r\n\t\"ț\": \"t\",\r\n\t\"Ț\": \"T\",\r\n\t\"Ť\": \"T\",\r\n\t\"ť\": \"t\",\r\n\t\"Ŧ\": \"T\",\r\n\t\"ŧ\": \"t\",\r\n\t\"T̆\": \"T\",\r\n\t\"t̆\": \"t\",\r\n\t\"Ũ\": \"U\",\r\n\t\"ũ\": \"u\",\r\n\t\"Ū\": \"U\",\r\n\t\"ū\": \"u\",\r\n\t\"Ŭ\": \"U\",\r\n\t\"ŭ\": \"u\",\r\n\t\"Ů\": \"U\",\r\n\t\"ů\": \"u\",\r\n\t\"Ű\": \"U\",\r\n\t\"ű\": \"u\",\r\n\t\"Ų\": \"U\",\r\n\t\"ų\": \"u\",\r\n\t\"Ȗ\": \"U\",\r\n\t\"ȗ\": \"u\",\r\n\t\"V̆\": \"V\",\r\n\t\"v̆\": \"v\",\r\n\t\"Ŵ\": \"W\",\r\n\t\"ŵ\": \"w\",\r\n\t\"Ẃ\": \"W\",\r\n\t\"ẃ\": \"w\",\r\n\t\"X̆\": \"X\",\r\n\t\"x̆\": \"x\",\r\n\t\"Ŷ\": \"Y\",\r\n\t\"ŷ\": \"y\",\r\n\t\"Ÿ\": \"Y\",\r\n\t\"Y̆\": \"Y\",\r\n\t\"y̆\": \"y\",\r\n\t\"Ź\": \"Z\",\r\n\t\"ź\": \"z\",\r\n\t\"Ż\": \"Z\",\r\n\t\"ż\": \"z\",\r\n\t\"Ž\": \"Z\",\r\n\t\"ž\": \"z\",\r\n\t\"ſ\": \"s\",\r\n\t\"ƒ\": \"f\",\r\n\t\"Ơ\": \"O\",\r\n\t\"ơ\": \"o\",\r\n\t\"Ư\": \"U\",\r\n\t\"ư\": \"u\",\r\n\t\"Ǎ\": \"A\",\r\n\t\"ǎ\": \"a\",\r\n\t\"Ǐ\": \"I\",\r\n\t\"ǐ\": \"i\",\r\n\t\"Ǒ\": \"O\",\r\n\t\"ǒ\": \"o\",\r\n\t\"Ǔ\": \"U\",\r\n\t\"ǔ\": \"u\",\r\n\t\"Ǖ\": \"U\",\r\n\t\"ǖ\": \"u\",\r\n\t\"Ǘ\": \"U\",\r\n\t\"ǘ\": \"u\",\r\n\t\"Ǚ\": \"U\",\r\n\t\"ǚ\": \"u\",\r\n\t\"Ǜ\": \"U\",\r\n\t\"ǜ\": \"u\",\r\n\t\"Ứ\": \"U\",\r\n\t\"ứ\": \"u\",\r\n\t\"Ṹ\": \"U\",\r\n\t\"ṹ\": \"u\",\r\n\t\"Ǻ\": \"A\",\r\n\t\"ǻ\": \"a\",\r\n\t\"Ǽ\": \"AE\",\r\n\t\"ǽ\": \"ae\",\r\n\t\"Ǿ\": \"O\",\r\n\t\"ǿ\": \"o\",\r\n\t\"Þ\": \"TH\",\r\n\t\"þ\": \"th\",\r\n\t\"Ṕ\": \"P\",\r\n\t\"ṕ\": \"p\",\r\n\t\"Ṥ\": \"S\",\r\n\t\"ṥ\": \"s\",\r\n\t\"X́\": \"X\",\r\n\t\"x́\": \"x\",\r\n\t\"Ѓ\": \"Г\",\r\n\t\"ѓ\": \"г\",\r\n\t\"Ќ\": \"К\",\r\n\t\"ќ\": \"к\",\r\n\t\"A̋\": \"A\",\r\n\t\"a̋\": \"a\",\r\n\t\"E̋\": \"E\",\r\n\t\"e̋\": \"e\",\r\n\t\"I̋\": \"I\",\r\n\t\"i̋\": \"i\",\r\n\t\"Ǹ\": \"N\",\r\n\t\"ǹ\": \"n\",\r\n\t\"Ồ\": \"O\",\r\n\t\"ồ\": \"o\",\r\n\t\"Ṑ\": \"O\",\r\n\t\"ṑ\": \"o\",\r\n\t\"Ừ\": \"U\",\r\n\t\"ừ\": \"u\",\r\n\t\"Ẁ\": \"W\",\r\n\t\"ẁ\": \"w\",\r\n\t\"Ỳ\": \"Y\",\r\n\t\"ỳ\": \"y\",\r\n\t\"Ȁ\": \"A\",\r\n\t\"ȁ\": \"a\",\r\n\t\"Ȅ\": \"E\",\r\n\t\"ȅ\": \"e\",\r\n\t\"Ȉ\": \"I\",\r\n\t\"ȉ\": \"i\",\r\n\t\"Ȍ\": \"O\",\r\n\t\"ȍ\": \"o\",\r\n\t\"Ȑ\": \"R\",\r\n\t\"ȑ\": \"r\",\r\n\t\"Ȕ\": \"U\",\r\n\t\"ȕ\": \"u\",\r\n\t\"B̌\": \"B\",\r\n\t\"b̌\": \"b\",\r\n\t\"Č̣\": \"C\",\r\n\t\"č̣\": \"c\",\r\n\t\"Ê̌\": \"E\",\r\n\t\"ê̌\": \"e\",\r\n\t\"F̌\": \"F\",\r\n\t\"f̌\": \"f\",\r\n\t\"Ǧ\": \"G\",\r\n\t\"ǧ\": \"g\",\r\n\t\"Ȟ\": \"H\",\r\n\t\"ȟ\": \"h\",\r\n\t\"J̌\": \"J\",\r\n\t\"ǰ\": \"j\",\r\n\t\"Ǩ\": \"K\",\r\n\t\"ǩ\": \"k\",\r\n\t\"M̌\": \"M\",\r\n\t\"m̌\": \"m\",\r\n\t\"P̌\": \"P\",\r\n\t\"p̌\": \"p\",\r\n\t\"Q̌\": \"Q\",\r\n\t\"q̌\": \"q\",\r\n\t\"Ř̩\": \"R\",\r\n\t\"ř̩\": \"r\",\r\n\t\"Ṧ\": \"S\",\r\n\t\"ṧ\": \"s\",\r\n\t\"V̌\": \"V\",\r\n\t\"v̌\": \"v\",\r\n\t\"W̌\": \"W\",\r\n\t\"w̌\": \"w\",\r\n\t\"X̌\": \"X\",\r\n\t\"x̌\": \"x\",\r\n\t\"Y̌\": \"Y\",\r\n\t\"y̌\": \"y\",\r\n\t\"A̧\": \"A\",\r\n\t\"a̧\": \"a\",\r\n\t\"B̧\": \"B\",\r\n\t\"b̧\": \"b\",\r\n\t\"Ḑ\": \"D\",\r\n\t\"ḑ\": \"d\",\r\n\t\"Ȩ\": \"E\",\r\n\t\"ȩ\": \"e\",\r\n\t\"Ɛ̧\": \"E\",\r\n\t\"ɛ̧\": \"e\",\r\n\t\"Ḩ\": \"H\",\r\n\t\"ḩ\": \"h\",\r\n\t\"I̧\": \"I\",\r\n\t\"i̧\": \"i\",\r\n\t\"Ɨ̧\": \"I\",\r\n\t\"ɨ̧\": \"i\",\r\n\t\"M̧\": \"M\",\r\n\t\"m̧\": \"m\",\r\n\t\"O̧\": \"O\",\r\n\t\"o̧\": \"o\",\r\n\t\"Q̧\": \"Q\",\r\n\t\"q̧\": \"q\",\r\n\t\"U̧\": \"U\",\r\n\t\"u̧\": \"u\",\r\n\t\"X̧\": \"X\",\r\n\t\"x̧\": \"x\",\r\n\t\"Z̧\": \"Z\",\r\n\t\"z̧\": \"z\",\r\n};\r\n\r\nvar chars = Object.keys(characterMap).join('|');\r\nvar allAccents = new RegExp(chars, 'g');\r\nvar firstAccent = new RegExp(chars, '');\r\n\r\nvar removeAccents = function(string) {\t\r\n\treturn string.replace(allAccents, function(match) {\r\n\t\treturn characterMap[match];\r\n\t});\r\n};\r\n\r\nvar hasAccents = function(string) {\r\n\treturn !!string.match(firstAccent);\r\n};\r\n\r\nmodule.exports = removeAccents;\r\nmodule.exports.has = hasAccents;\r\nmodule.exports.remove = removeAccents;\r\n","var traverse = module.exports = function (obj) {\n    return new Traverse(obj);\n};\n\nfunction Traverse (obj) {\n    this.value = obj;\n}\n\nTraverse.prototype.get = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            node = undefined;\n            break;\n        }\n        node = node[key];\n    }\n    return node;\n};\n\nTraverse.prototype.has = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            return false;\n        }\n        node = node[key];\n    }\n    return true;\n};\n\nTraverse.prototype.set = function (ps, value) {\n    var node = this.value;\n    for (var i = 0; i < ps.length - 1; i ++) {\n        var key = ps[i];\n        if (!hasOwnProperty.call(node, key)) node[key] = {};\n        node = node[key];\n    }\n    node[ps[i]] = value;\n    return value;\n};\n\nTraverse.prototype.map = function (cb) {\n    return walk(this.value, cb, true);\n};\n\nTraverse.prototype.forEach = function (cb) {\n    this.value = walk(this.value, cb, false);\n    return this.value;\n};\n\nTraverse.prototype.reduce = function (cb, init) {\n    var skip = arguments.length === 1;\n    var acc = skip ? this.value : init;\n    this.forEach(function (x) {\n        if (!this.isRoot || !skip) {\n            acc = cb.call(this, acc, x);\n        }\n    });\n    return acc;\n};\n\nTraverse.prototype.paths = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.path); \n    });\n    return acc;\n};\n\nTraverse.prototype.nodes = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.node);\n    });\n    return acc;\n};\n\nTraverse.prototype.clone = function () {\n    var parents = [], nodes = [];\n    \n    return (function clone (src) {\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i] === src) {\n                return nodes[i];\n            }\n        }\n        \n        if (typeof src === 'object' && src !== null) {\n            var dst = copy(src);\n            \n            parents.push(src);\n            nodes.push(dst);\n            \n            forEach(objectKeys(src), function (key) {\n                dst[key] = clone(src[key]);\n            });\n            \n            parents.pop();\n            nodes.pop();\n            return dst;\n        }\n        else {\n            return src;\n        }\n    })(this.value);\n};\n\nfunction walk (root, cb, immutable) {\n    var path = [];\n    var parents = [];\n    var alive = true;\n    \n    return (function walker (node_) {\n        var node = immutable ? copy(node_) : node_;\n        var modifiers = {};\n        \n        var keepGoing = true;\n        \n        var state = {\n            node : node,\n            node_ : node_,\n            path : [].concat(path),\n            parent : parents[parents.length - 1],\n            parents : parents,\n            key : path.slice(-1)[0],\n            isRoot : path.length === 0,\n            level : path.length,\n            circular : null,\n            update : function (x, stopHere) {\n                if (!state.isRoot) {\n                    state.parent.node[state.key] = x;\n                }\n                state.node = x;\n                if (stopHere) keepGoing = false;\n            },\n            'delete' : function (stopHere) {\n                delete state.parent.node[state.key];\n                if (stopHere) keepGoing = false;\n            },\n            remove : function (stopHere) {\n                if (isArray(state.parent.node)) {\n                    state.parent.node.splice(state.key, 1);\n                }\n                else {\n                    delete state.parent.node[state.key];\n                }\n                if (stopHere) keepGoing = false;\n            },\n            keys : null,\n            before : function (f) { modifiers.before = f },\n            after : function (f) { modifiers.after = f },\n            pre : function (f) { modifiers.pre = f },\n            post : function (f) { modifiers.post = f },\n            stop : function () { alive = false },\n            block : function () { keepGoing = false }\n        };\n        \n        if (!alive) return state;\n        \n        function updateState() {\n            if (typeof state.node === 'object' && state.node !== null) {\n                if (!state.keys || state.node_ !== state.node) {\n                    state.keys = objectKeys(state.node)\n                }\n                \n                state.isLeaf = state.keys.length == 0;\n                \n                for (var i = 0; i < parents.length; i++) {\n                    if (parents[i].node_ === node_) {\n                        state.circular = parents[i];\n                        break;\n                    }\n                }\n            }\n            else {\n                state.isLeaf = true;\n                state.keys = null;\n            }\n            \n            state.notLeaf = !state.isLeaf;\n            state.notRoot = !state.isRoot;\n        }\n        \n        updateState();\n        \n        // use return values to update if defined\n        var ret = cb.call(state, state.node);\n        if (ret !== undefined && state.update) state.update(ret);\n        \n        if (modifiers.before) modifiers.before.call(state, state.node);\n        \n        if (!keepGoing) return state;\n        \n        if (typeof state.node == 'object'\n        && state.node !== null && !state.circular) {\n            parents.push(state);\n            \n            updateState();\n            \n            forEach(state.keys, function (key, i) {\n                path.push(key);\n                \n                if (modifiers.pre) modifiers.pre.call(state, state.node[key], key);\n                \n                var child = walker(state.node[key]);\n                if (immutable && hasOwnProperty.call(state.node, key)) {\n                    state.node[key] = child.node;\n                }\n                \n                child.isLast = i == state.keys.length - 1;\n                child.isFirst = i == 0;\n                \n                if (modifiers.post) modifiers.post.call(state, child);\n                \n                path.pop();\n            });\n            parents.pop();\n        }\n        \n        if (modifiers.after) modifiers.after.call(state, state.node);\n        \n        return state;\n    })(root).node;\n}\n\nfunction copy (src) {\n    if (typeof src === 'object' && src !== null) {\n        var dst;\n        \n        if (isArray(src)) {\n            dst = [];\n        }\n        else if (isDate(src)) {\n            dst = new Date(src.getTime ? src.getTime() : src);\n        }\n        else if (isRegExp(src)) {\n            dst = new RegExp(src);\n        }\n        else if (isError(src)) {\n            dst = { message: src.message };\n        }\n        else if (isBoolean(src)) {\n            dst = new Boolean(src);\n        }\n        else if (isNumber(src)) {\n            dst = new Number(src);\n        }\n        else if (isString(src)) {\n            dst = new String(src);\n        }\n        else if (Object.create && Object.getPrototypeOf) {\n            dst = Object.create(Object.getPrototypeOf(src));\n        }\n        else if (src.constructor === Object) {\n            dst = {};\n        }\n        else {\n            var proto =\n                (src.constructor && src.constructor.prototype)\n                || src.__proto__\n                || {}\n            ;\n            var T = function () {};\n            T.prototype = proto;\n            dst = new T;\n        }\n        \n        forEach(objectKeys(src), function (key) {\n            dst[key] = src[key];\n        });\n        return dst;\n    }\n    else return src;\n}\n\nvar objectKeys = Object.keys || function keys (obj) {\n    var res = [];\n    for (var key in obj) res.push(key)\n    return res;\n};\n\nfunction toS (obj) { return Object.prototype.toString.call(obj) }\nfunction isDate (obj) { return toS(obj) === '[object Date]' }\nfunction isRegExp (obj) { return toS(obj) === '[object RegExp]' }\nfunction isError (obj) { return toS(obj) === '[object Error]' }\nfunction isBoolean (obj) { return toS(obj) === '[object Boolean]' }\nfunction isNumber (obj) { return toS(obj) === '[object Number]' }\nfunction isString (obj) { return toS(obj) === '[object String]' }\n\nvar isArray = Array.isArray || function isArray (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) return xs.forEach(fn)\n    else for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    }\n};\n\nforEach(objectKeys(Traverse.prototype), function (key) {\n    traverse[key] = function (obj) {\n        var args = [].slice.call(arguments, 1);\n        var t = new Traverse(obj);\n        return t[key].apply(t, args);\n    };\n});\n\nvar hasOwnProperty = Object.hasOwnProperty || function (obj, key) {\n    return key in obj;\n};\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn Object.propertyIsEnumerable.call(target, symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","module.exports = window[\"React\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","/**\n * WordPress dependencies\n */\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport { addFilter } from '@wordpress/hooks';\n\nfunction migrateLightBlockWrapper( settings ) {\n\tconst { apiVersion = 1 } = settings;\n\tif (\n\t\tapiVersion < 2 &&\n\t\thasBlockSupport( settings, 'lightBlockWrapper', false )\n\t) {\n\t\tsettings.apiVersion = 2;\n\t}\n\n\treturn settings;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/compat/migrateLightBlockWrapper',\n\tmigrateLightBlockWrapper\n);\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"compose\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst BlockControlsDefault = createSlotFill( 'BlockControls' );\nconst BlockControlsBlock = createSlotFill( 'BlockControlsBlock' );\nconst BlockControlsInline = createSlotFill( 'BlockFormatControls' );\nconst BlockControlsOther = createSlotFill( 'BlockControlsOther' );\nconst BlockControlsParent = createSlotFill( 'BlockControlsParent' );\n\nconst groups = {\n\tdefault: BlockControlsDefault,\n\tblock: BlockControlsBlock,\n\tinline: BlockControlsInline,\n\tother: BlockControlsOther,\n\tparent: BlockControlsParent,\n};\n\nexport default groups;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\n\nexport const PREFERENCES_DEFAULTS = {\n\tinsertUsage: {},\n};\n\n/**\n * The default editor settings\n *\n * @typedef {Object} SETTINGS_DEFAULT\n * @property {boolean}       alignWide                              Enable/Disable Wide/Full Alignments\n * @property {boolean}       supportsLayout                         Enable/disable layouts support in container blocks.\n * @property {boolean}       imageEditing                           Image Editing settings set to false to disable.\n * @property {Array}         imageSizes                             Available image sizes\n * @property {number}        maxWidth                               Max width to constraint resizing\n * @property {boolean|Array} allowedBlockTypes                      Allowed block types\n * @property {boolean}       hasFixedToolbar                        Whether or not the editor toolbar is fixed\n * @property {boolean}       focusMode                              Whether the focus mode is enabled or not\n * @property {Array}         styles                                 Editor Styles\n * @property {boolean}       keepCaretInsideBlock                   Whether caret should move between blocks in edit mode\n * @property {string}        bodyPlaceholder                        Empty post placeholder\n * @property {string}        titlePlaceholder                       Empty title placeholder\n * @property {boolean}       canLockBlocks                          Whether the user can manage Block Lock state\n * @property {boolean}       codeEditingEnabled                     Whether or not the user can switch to the code editor\n * @property {boolean}       generateAnchors                        Enable/Disable auto anchor generation for Heading blocks\n * @property {boolean}       enableOpenverseMediaCategory           Enable/Disable the Openverse media category in the inserter.\n * @property {boolean}       clearBlockSelection                    Whether the block editor should clear selection on mousedown when a block is not clicked.\n * @property {boolean}       __experimentalCanUserUseUnfilteredHTML Whether the user should be able to use unfiltered HTML or the HTML should be filtered e.g., to remove elements considered insecure like iframes.\n * @property {boolean}       __experimentalBlockDirectory           Whether the user has enabled the Block Directory\n * @property {Array}         __experimentalBlockPatterns            Array of objects representing the block patterns\n * @property {Array}         __experimentalBlockPatternCategories   Array of objects representing the block pattern categories\n * @property {boolean}       __unstableGalleryWithImageBlocks       Whether the user has enabled the refactored gallery block which uses InnerBlocks\n */\nexport const SETTINGS_DEFAULTS = {\n\talignWide: false,\n\tsupportsLayout: true,\n\n\t// colors setting is not used anymore now defaults are passed from theme.json on the server and core has its own defaults.\n\t// The setting is only kept for backward compatibility purposes.\n\tcolors: [\n\t\t{\n\t\t\tname: __( 'Black' ),\n\t\t\tslug: 'black',\n\t\t\tcolor: '#000000',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Cyan bluish gray' ),\n\t\t\tslug: 'cyan-bluish-gray',\n\t\t\tcolor: '#abb8c3',\n\t\t},\n\t\t{\n\t\t\tname: __( 'White' ),\n\t\t\tslug: 'white',\n\t\t\tcolor: '#ffffff',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Pale pink' ),\n\t\t\tslug: 'pale-pink',\n\t\t\tcolor: '#f78da7',\n\t\t},\n\t\t{ name: __( 'Vivid red' ), slug: 'vivid-red', color: '#cf2e2e' },\n\t\t{\n\t\t\tname: __( 'Luminous vivid orange' ),\n\t\t\tslug: 'luminous-vivid-orange',\n\t\t\tcolor: '#ff6900',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Luminous vivid amber' ),\n\t\t\tslug: 'luminous-vivid-amber',\n\t\t\tcolor: '#fcb900',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Light green cyan' ),\n\t\t\tslug: 'light-green-cyan',\n\t\t\tcolor: '#7bdcb5',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Vivid green cyan' ),\n\t\t\tslug: 'vivid-green-cyan',\n\t\t\tcolor: '#00d084',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Pale cyan blue' ),\n\t\t\tslug: 'pale-cyan-blue',\n\t\t\tcolor: '#8ed1fc',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Vivid cyan blue' ),\n\t\t\tslug: 'vivid-cyan-blue',\n\t\t\tcolor: '#0693e3',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Vivid purple' ),\n\t\t\tslug: 'vivid-purple',\n\t\t\tcolor: '#9b51e0',\n\t\t},\n\t],\n\t// fontSizes setting is not used anymore now defaults are passed from theme.json on the server and core has its own defaults.\n\t// The setting is only kept for backward compatibility purposes.\n\tfontSizes: [\n\t\t{\n\t\t\tname: _x( 'Small', 'font size name' ),\n\t\t\tsize: 13,\n\t\t\tslug: 'small',\n\t\t},\n\t\t{\n\t\t\tname: _x( 'Normal', 'font size name' ),\n\t\t\tsize: 16,\n\t\t\tslug: 'normal',\n\t\t},\n\t\t{\n\t\t\tname: _x( 'Medium', 'font size name' ),\n\t\t\tsize: 20,\n\t\t\tslug: 'medium',\n\t\t},\n\t\t{\n\t\t\tname: _x( 'Large', 'font size name' ),\n\t\t\tsize: 36,\n\t\t\tslug: 'large',\n\t\t},\n\t\t{\n\t\t\tname: _x( 'Huge', 'font size name' ),\n\t\t\tsize: 42,\n\t\t\tslug: 'huge',\n\t\t},\n\t],\n\n\t// Image default size slug.\n\timageDefaultSize: 'large',\n\n\timageSizes: [\n\t\t{ slug: 'thumbnail', name: __( 'Thumbnail' ) },\n\t\t{ slug: 'medium', name: __( 'Medium' ) },\n\t\t{ slug: 'large', name: __( 'Large' ) },\n\t\t{ slug: 'full', name: __( 'Full Size' ) },\n\t],\n\n\t// Allow plugin to disable Image Editor if need be.\n\timageEditing: true,\n\n\t// This is current max width of the block inner area\n\t// It's used to constraint image resizing and this value could be overridden later by themes\n\tmaxWidth: 580,\n\n\t// Allowed block types for the editor, defaulting to true (all supported).\n\tallowedBlockTypes: true,\n\n\t// Maximum upload size in bytes allowed for the site.\n\tmaxUploadFileSize: 0,\n\n\t// List of allowed mime types and file extensions.\n\tallowedMimeTypes: null,\n\n\t// Allows to disable block locking interface.\n\tcanLockBlocks: true,\n\n\t// Allows to disable Openverse media category in the inserter.\n\tenableOpenverseMediaCategory: true,\n\n\tclearBlockSelection: true,\n\n\t__experimentalCanUserUseUnfilteredHTML: false,\n\t__experimentalBlockDirectory: false,\n\t__mobileEnablePageTemplates: false,\n\t__experimentalBlockPatterns: [],\n\t__experimentalBlockPatternCategories: [],\n\t__unstableGalleryWithImageBlocks: false,\n\t__unstableIsPreviewMode: false,\n\n\t// These settings will be completely revamped in the future.\n\t// The goal is to evolve this into an API which will instruct\n\t// the block inspector to animate transitions between what it\n\t// displays based on the relationship between the selected block\n\t// and its parent, and only enable it if the parent is controlling\n\t// its children blocks.\n\tblockInspectorAnimation: {\n\t\tanimationParent: 'core/navigation',\n\t\t'core/navigation': { enterDirection: 'leftToRight' },\n\t\t'core/navigation-submenu': { enterDirection: 'rightToLeft' },\n\t\t'core/navigation-link': { enterDirection: 'rightToLeft' },\n\t\t'core/search': { enterDirection: 'rightToLeft' },\n\t\t'core/social-links': { enterDirection: 'rightToLeft' },\n\t\t'core/page-list': { enterDirection: 'rightToLeft' },\n\t\t'core/spacer': { enterDirection: 'rightToLeft' },\n\t\t'core/home-link': { enterDirection: 'rightToLeft' },\n\t\t'core/site-title': { enterDirection: 'rightToLeft' },\n\t\t'core/site-logo': { enterDirection: 'rightToLeft' },\n\t},\n\n\tgenerateAnchors: false,\n\t// gradients setting is not used anymore now defaults are passed from theme.json on the server and core has its own defaults.\n\t// The setting is only kept for backward compatibility purposes.\n\tgradients: [\n\t\t{\n\t\t\tname: __( 'Vivid cyan blue to vivid purple' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)',\n\t\t\tslug: 'vivid-cyan-blue-to-vivid-purple',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Light green cyan to vivid green cyan' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%)',\n\t\t\tslug: 'light-green-cyan-to-vivid-green-cyan',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Luminous vivid amber to luminous vivid orange' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%)',\n\t\t\tslug: 'luminous-vivid-amber-to-luminous-vivid-orange',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Luminous vivid orange to vivid red' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%)',\n\t\t\tslug: 'luminous-vivid-orange-to-vivid-red',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Very light gray to cyan bluish gray' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%)',\n\t\t\tslug: 'very-light-gray-to-cyan-bluish-gray',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Cool to warm spectrum' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%)',\n\t\t\tslug: 'cool-to-warm-spectrum',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Blush light purple' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%)',\n\t\t\tslug: 'blush-light-purple',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Blush bordeaux' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%)',\n\t\t\tslug: 'blush-bordeaux',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Luminous dusk' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%)',\n\t\t\tslug: 'luminous-dusk',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Pale ocean' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%)',\n\t\t\tslug: 'pale-ocean',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Electric grass' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%)',\n\t\t\tslug: 'electric-grass',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Midnight' ),\n\t\t\tgradient:\n\t\t\t\t'linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%)',\n\t\t\tslug: 'midnight',\n\t\t},\n\t],\n\n\t__unstableResolvedAssets: { styles: [], scripts: [] },\n};\n","/**\n * Insert one or multiple elements into a given position of an array.\n *\n * @param {Array}  array    Source array.\n * @param {*}      elements Elements to insert.\n * @param {number} index    Insert Position.\n *\n * @return {Array} Result.\n */\nexport function insertAt( array, elements, index ) {\n\treturn [\n\t\t...array.slice( 0, index ),\n\t\t...( Array.isArray( elements ) ? elements : [ elements ] ),\n\t\t...array.slice( index ),\n\t];\n}\n\n/**\n * Moves an element in an array.\n *\n * @param {Array}  array Source array.\n * @param {number} from  Source index.\n * @param {number} to    Destination index.\n * @param {number} count Number of elements to move.\n *\n * @return {Array} Result.\n */\nexport function moveTo( array, from, to, count = 1 ) {\n\tconst withoutMovedElements = [ ...array ];\n\twithoutMovedElements.splice( from, count );\n\treturn insertAt(\n\t\twithoutMovedElements,\n\t\tarray.slice( from, from + count ),\n\t\tto\n\t);\n}\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * WordPress dependencies\n */\nimport { pipe } from '@wordpress/compose';\nimport { combineReducers, select } from '@wordpress/data';\nimport { store as blocksStore } from '@wordpress/blocks';\n/**\n * Internal dependencies\n */\nimport { PREFERENCES_DEFAULTS, SETTINGS_DEFAULTS } from './defaults';\nimport { insertAt, moveTo } from './array';\n\nconst identity = ( x ) => x;\n\n/**\n * Given an array of blocks, returns an object where each key is a nesting\n * context, the value of which is an array of block client IDs existing within\n * that nesting context.\n *\n * @param {Array}   blocks       Blocks to map.\n * @param {?string} rootClientId Assumed root client ID.\n *\n * @return {Object} Block order map object.\n */\nfunction mapBlockOrder( blocks, rootClientId = '' ) {\n\tconst result = new Map();\n\tconst current = [];\n\tresult.set( rootClientId, current );\n\tblocks.forEach( ( block ) => {\n\t\tconst { clientId, innerBlocks } = block;\n\t\tcurrent.push( clientId );\n\t\tmapBlockOrder( innerBlocks, clientId ).forEach(\n\t\t\t( order, subClientId ) => {\n\t\t\t\tresult.set( subClientId, order );\n\t\t\t}\n\t\t);\n\t} );\n\treturn result;\n}\n\n/**\n * Given an array of blocks, returns an object where each key contains\n * the clientId of the block and the value is the parent of the block.\n *\n * @param {Array}   blocks       Blocks to map.\n * @param {?string} rootClientId Assumed root client ID.\n *\n * @return {Object} Block order map object.\n */\nfunction mapBlockParents( blocks, rootClientId = '' ) {\n\tconst result = [];\n\tconst stack = [ [ rootClientId, blocks ] ];\n\twhile ( stack.length ) {\n\t\tconst [ parent, currentBlocks ] = stack.shift();\n\t\tcurrentBlocks.forEach( ( { innerBlocks, ...block } ) => {\n\t\t\tresult.push( [ block.clientId, parent ] );\n\t\t\tif ( innerBlocks?.length ) {\n\t\t\t\tstack.push( [ block.clientId, innerBlocks ] );\n\t\t\t}\n\t\t} );\n\t}\n\treturn result;\n}\n\n/**\n * Helper method to iterate through all blocks, recursing into inner blocks,\n * applying a transformation function to each one.\n * Returns a flattened object with the transformed blocks.\n *\n * @param {Array}    blocks    Blocks to flatten.\n * @param {Function} transform Transforming function to be applied to each block.\n *\n * @return {Array} Flattened object.\n */\nfunction flattenBlocks( blocks, transform = identity ) {\n\tconst result = [];\n\n\tconst stack = [ ...blocks ];\n\twhile ( stack.length ) {\n\t\tconst { innerBlocks, ...block } = stack.shift();\n\t\tstack.push( ...innerBlocks );\n\t\tresult.push( [ block.clientId, transform( block ) ] );\n\t}\n\n\treturn result;\n}\n\nfunction getFlattenedClientIds( blocks ) {\n\tconst result = {};\n\tconst stack = [ ...blocks ];\n\twhile ( stack.length ) {\n\t\tconst { innerBlocks, ...block } = stack.shift();\n\t\tstack.push( ...innerBlocks );\n\t\tresult[ block.clientId ] = true;\n\t}\n\n\treturn result;\n}\n\n/**\n * Given an array of blocks, returns an object containing all blocks, without\n * attributes, recursing into inner blocks. Keys correspond to the block client\n * ID, the value of which is the attributes object.\n *\n * @param {Array} blocks Blocks to flatten.\n *\n * @return {Array} Flattened block attributes object.\n */\nfunction getFlattenedBlocksWithoutAttributes( blocks ) {\n\treturn flattenBlocks( blocks, ( block ) => {\n\t\tconst { attributes, ...restBlock } = block;\n\t\treturn restBlock;\n\t} );\n}\n\n/**\n * Given an array of blocks, returns an object containing all block attributes,\n * recursing into inner blocks. Keys correspond to the block client ID, the\n * value of which is the attributes object.\n *\n * @param {Array} blocks Blocks to flatten.\n *\n * @return {Array} Flattened block attributes object.\n */\nfunction getFlattenedBlockAttributes( blocks ) {\n\treturn flattenBlocks( blocks, ( block ) => block.attributes );\n}\n\n/**\n * Returns true if the two object arguments have the same keys, or false\n * otherwise.\n *\n * @param {Object} a First object.\n * @param {Object} b Second object.\n *\n * @return {boolean} Whether the two objects have the same keys.\n */\nexport function hasSameKeys( a, b ) {\n\treturn fastDeepEqual( Object.keys( a ), Object.keys( b ) );\n}\n\n/**\n * Returns true if, given the currently dispatching action and the previously\n * dispatched action, the two actions are updating the same block attribute, or\n * false otherwise.\n *\n * @param {Object} action     Currently dispatching action.\n * @param {Object} lastAction Previously dispatched action.\n *\n * @return {boolean} Whether actions are updating the same block attribute.\n */\nexport function isUpdatingSameBlockAttribute( action, lastAction ) {\n\treturn (\n\t\taction.type === 'UPDATE_BLOCK_ATTRIBUTES' &&\n\t\tlastAction !== undefined &&\n\t\tlastAction.type === 'UPDATE_BLOCK_ATTRIBUTES' &&\n\t\tfastDeepEqual( action.clientIds, lastAction.clientIds ) &&\n\t\thasSameKeys( action.attributes, lastAction.attributes )\n\t);\n}\n\nfunction updateBlockTreeForBlocks( state, blocks ) {\n\tconst treeToUpdate = state.tree;\n\tconst stack = [ ...blocks ];\n\tconst flattenedBlocks = [ ...blocks ];\n\twhile ( stack.length ) {\n\t\tconst block = stack.shift();\n\t\tstack.push( ...block.innerBlocks );\n\t\tflattenedBlocks.push( ...block.innerBlocks );\n\t}\n\t// Create objects before mutating them, that way it's always defined.\n\tfor ( const block of flattenedBlocks ) {\n\t\ttreeToUpdate.set( block.clientId, {} );\n\t}\n\tfor ( const block of flattenedBlocks ) {\n\t\ttreeToUpdate.set(\n\t\t\tblock.clientId,\n\t\t\tObject.assign( treeToUpdate.get( block.clientId ), {\n\t\t\t\t...state.byClientId.get( block.clientId ),\n\t\t\t\tattributes: state.attributes.get( block.clientId ),\n\t\t\t\tinnerBlocks: block.innerBlocks.map( ( subBlock ) =>\n\t\t\t\t\ttreeToUpdate.get( subBlock.clientId )\n\t\t\t\t),\n\t\t\t} )\n\t\t);\n\t}\n}\n\nfunction updateParentInnerBlocksInTree(\n\tstate,\n\tupdatedClientIds,\n\tupdateChildrenOfUpdatedClientIds = false\n) {\n\tconst treeToUpdate = state.tree;\n\tconst uncontrolledParents = new Set( [] );\n\tconst controlledParents = new Set();\n\tfor ( const clientId of updatedClientIds ) {\n\t\tlet current = updateChildrenOfUpdatedClientIds\n\t\t\t? clientId\n\t\t\t: state.parents.get( clientId );\n\t\tdo {\n\t\t\tif ( state.controlledInnerBlocks[ current ] ) {\n\t\t\t\t// Should stop on controlled blocks.\n\t\t\t\t// If we reach a controlled parent, break out of the loop.\n\t\t\t\tcontrolledParents.add( current );\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\t// Else continue traversing up through parents.\n\t\t\t\tuncontrolledParents.add( current );\n\t\t\t\tcurrent = state.parents.get( current );\n\t\t\t}\n\t\t} while ( current !== undefined );\n\t}\n\n\t// To make sure the order of assignments doesn't matter,\n\t// we first create empty objects and mutates the inner blocks later.\n\tfor ( const clientId of uncontrolledParents ) {\n\t\ttreeToUpdate.set( clientId, { ...treeToUpdate.get( clientId ) } );\n\t}\n\tfor ( const clientId of uncontrolledParents ) {\n\t\ttreeToUpdate.get( clientId ).innerBlocks = (\n\t\t\tstate.order.get( clientId ) || []\n\t\t).map( ( subClientId ) => treeToUpdate.get( subClientId ) );\n\t}\n\n\t// Controlled parent blocks, need a dedicated key for their inner blocks\n\t// to be used when doing getBlocks( controlledBlockClientId ).\n\tfor ( const clientId of controlledParents ) {\n\t\ttreeToUpdate.set( 'controlled||' + clientId, {\n\t\t\tinnerBlocks: ( state.order.get( clientId ) || [] ).map(\n\t\t\t\t( subClientId ) => treeToUpdate.get( subClientId )\n\t\t\t),\n\t\t} );\n\t}\n}\n\n/**\n * Higher-order reducer intended to compute full block objects key for each block in the post.\n * This is a denormalization to optimize the performance of the getBlock selectors and avoid\n * recomputing the block objects and avoid heavy memoization.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withBlockTree =\n\t( reducer ) =>\n\t( state = {}, action ) => {\n\t\tconst newState = reducer( state, action );\n\n\t\tif ( newState === state ) {\n\t\t\treturn state;\n\t\t}\n\n\t\tnewState.tree = state.tree ? state.tree : new Map();\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdateBlockTreeForBlocks( newState, action.blocks );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\taction.rootClientId ? [ action.rootClientId ] : [ '' ],\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'UPDATE_BLOCK':\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tnewState.tree.set( action.clientId, {\n\t\t\t\t\t...newState.tree.get( action.clientId ),\n\t\t\t\t\t...newState.byClientId.get( action.clientId ),\n\t\t\t\t\tattributes: newState.attributes.get( action.clientId ),\n\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\t[ action.clientId ],\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'UPDATE_BLOCK_ATTRIBUTES': {\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\taction.clientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.tree.set( clientId, {\n\t\t\t\t\t\t...newState.tree.get( clientId ),\n\t\t\t\t\t\tattributes: newState.attributes.get( clientId ),\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\taction.clientIds,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst inserterClientIds = getFlattenedClientIds(\n\t\t\t\t\taction.blocks\n\t\t\t\t);\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\taction.replacedClientIds\n\t\t\t\t\t.concat(\n\t\t\t\t\t\t// Controlled inner blocks are only removed\n\t\t\t\t\t\t// if the block doesn't move to another position\n\t\t\t\t\t\t// otherwise their content will be lost.\n\t\t\t\t\t\taction.replacedClientIds\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t( clientId ) => ! inserterClientIds[ clientId ]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map( ( clientId ) => 'controlled||' + clientId )\n\t\t\t\t\t)\n\t\t\t\t\t.forEach( ( key ) => {\n\t\t\t\t\t\tnewState.tree.delete( key );\n\t\t\t\t\t} );\n\n\t\t\t\tupdateBlockTreeForBlocks( newState, action.blocks );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\taction.blocks.map( ( b ) => b.clientId ),\n\t\t\t\t\tfalse\n\t\t\t\t);\n\n\t\t\t\t// If there are no replaced blocks, it means we're removing blocks so we need to update their parent.\n\t\t\t\tconst parentsOfRemovedBlocks = [];\n\t\t\t\tfor ( const clientId of action.clientIds ) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tstate.parents.get( clientId ) !== undefined &&\n\t\t\t\t\t\t( state.parents.get( clientId ) === '' ||\n\t\t\t\t\t\t\tnewState.byClientId.get(\n\t\t\t\t\t\t\t\tstate.parents.get( clientId )\n\t\t\t\t\t\t\t) )\n\t\t\t\t\t) {\n\t\t\t\t\t\tparentsOfRemovedBlocks.push(\n\t\t\t\t\t\t\tstate.parents.get( clientId )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tparentsOfRemovedBlocks,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN':\n\t\t\t\tconst parentsOfRemovedBlocks = [];\n\t\t\t\tfor ( const clientId of action.clientIds ) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tstate.parents.get( clientId ) !== undefined &&\n\t\t\t\t\t\t( state.parents.get( clientId ) === '' ||\n\t\t\t\t\t\t\tnewState.byClientId.get(\n\t\t\t\t\t\t\t\tstate.parents.get( clientId )\n\t\t\t\t\t\t\t) )\n\t\t\t\t\t) {\n\t\t\t\t\t\tparentsOfRemovedBlocks.push(\n\t\t\t\t\t\t\tstate.parents.get( clientId )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\taction.removedClientIds\n\t\t\t\t\t.concat(\n\t\t\t\t\t\taction.removedClientIds.map(\n\t\t\t\t\t\t\t( clientId ) => 'controlled||' + clientId\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.forEach( ( key ) => {\n\t\t\t\t\t\tnewState.tree.delete( key );\n\t\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tparentsOfRemovedBlocks,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'MOVE_BLOCKS_TO_POSITION': {\n\t\t\t\tconst updatedBlockUids = [];\n\t\t\t\tif ( action.fromRootClientId ) {\n\t\t\t\t\tupdatedBlockUids.push( action.fromRootClientId );\n\t\t\t\t} else {\n\t\t\t\t\tupdatedBlockUids.push( '' );\n\t\t\t\t}\n\t\t\t\tif ( action.toRootClientId ) {\n\t\t\t\t\tupdatedBlockUids.push( action.toRootClientId );\n\t\t\t\t}\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tupdatedBlockUids,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'MOVE_BLOCKS_UP':\n\t\t\tcase 'MOVE_BLOCKS_DOWN': {\n\t\t\t\tconst updatedBlockUids = [\n\t\t\t\t\taction.rootClientId ? action.rootClientId : '',\n\t\t\t\t];\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tupdatedBlockUids,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'SAVE_REUSABLE_BLOCK_SUCCESS': {\n\t\t\t\tconst updatedBlockUids = [];\n\t\t\t\tnewState.attributes.forEach( ( attributes, clientId ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tnewState.byClientId.get( clientId ).name ===\n\t\t\t\t\t\t\t'core/block' &&\n\t\t\t\t\t\tattributes.ref === action.updatedId\n\t\t\t\t\t) {\n\t\t\t\t\t\tupdatedBlockUids.push( clientId );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdatedBlockUids.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.tree.set( clientId, {\n\t\t\t\t\t\t...newState.byClientId.get( clientId ),\n\t\t\t\t\t\tattributes: newState.attributes.get( clientId ),\n\t\t\t\t\t\tinnerBlocks: newState.tree.get( clientId ).innerBlocks,\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tupdatedBlockUids,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn newState;\n\t};\n\n/**\n * Higher-order reducer intended to augment the blocks reducer, assigning an\n * `isPersistentChange` property value corresponding to whether a change in\n * state can be considered as persistent. All changes are considered persistent\n * except when updating the same block attribute as in the previous action.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nfunction withPersistentBlockChange( reducer ) {\n\tlet lastAction;\n\tlet markNextChangeAsNotPersistent = false;\n\n\treturn ( state, action ) => {\n\t\tlet nextState = reducer( state, action );\n\n\t\tconst isExplicitPersistentChange =\n\t\t\taction.type === 'MARK_LAST_CHANGE_AS_PERSISTENT' ||\n\t\t\tmarkNextChangeAsNotPersistent;\n\n\t\t// Defer to previous state value (or default) unless changing or\n\t\t// explicitly marking as persistent.\n\t\tif ( state === nextState && ! isExplicitPersistentChange ) {\n\t\t\tmarkNextChangeAsNotPersistent =\n\t\t\t\taction.type === 'MARK_NEXT_CHANGE_AS_NOT_PERSISTENT';\n\n\t\t\tconst nextIsPersistentChange = state?.isPersistentChange ?? true;\n\t\t\tif ( state.isPersistentChange === nextIsPersistentChange ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...nextState,\n\t\t\t\tisPersistentChange: nextIsPersistentChange,\n\t\t\t};\n\t\t}\n\n\t\tnextState = {\n\t\t\t...nextState,\n\t\t\tisPersistentChange: isExplicitPersistentChange\n\t\t\t\t? ! markNextChangeAsNotPersistent\n\t\t\t\t: ! isUpdatingSameBlockAttribute( action, lastAction ),\n\t\t};\n\n\t\t// In comparing against the previous action, consider only those which\n\t\t// would have qualified as one which would have been ignored or not\n\t\t// have resulted in a changed state.\n\t\tlastAction = action;\n\t\tmarkNextChangeAsNotPersistent =\n\t\t\taction.type === 'MARK_NEXT_CHANGE_AS_NOT_PERSISTENT';\n\n\t\treturn nextState;\n\t};\n}\n\n/**\n * Higher-order reducer intended to augment the blocks reducer, assigning an\n * `isIgnoredChange` property value corresponding to whether a change in state\n * can be considered as ignored. A change is considered ignored when the result\n * of an action not incurred by direct user interaction.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nfunction withIgnoredBlockChange( reducer ) {\n\t/**\n\t * Set of action types for which a blocks state change should be ignored.\n\t *\n\t * @type {Set}\n\t */\n\tconst IGNORED_ACTION_TYPES = new Set( [ 'RECEIVE_BLOCKS' ] );\n\n\treturn ( state, action ) => {\n\t\tconst nextState = reducer( state, action );\n\n\t\tif ( nextState !== state ) {\n\t\t\tnextState.isIgnoredChange = IGNORED_ACTION_TYPES.has( action.type );\n\t\t}\n\n\t\treturn nextState;\n\t};\n}\n\n/**\n * Higher-order reducer targeting the combined blocks reducer, augmenting\n * block client IDs in remove action to include cascade of inner blocks.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withInnerBlocksRemoveCascade = ( reducer ) => ( state, action ) => {\n\t// Gets all children which need to be removed.\n\tconst getAllChildren = ( clientIds ) => {\n\t\tlet result = clientIds;\n\t\tfor ( let i = 0; i < result.length; i++ ) {\n\t\t\tif (\n\t\t\t\t! state.order.get( result[ i ] ) ||\n\t\t\t\t( action.keepControlledInnerBlocks &&\n\t\t\t\t\taction.keepControlledInnerBlocks[ result[ i ] ] )\n\t\t\t) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( result === clientIds ) {\n\t\t\t\tresult = [ ...result ];\n\t\t\t}\n\n\t\t\tresult.push( ...state.order.get( result[ i ] ) );\n\t\t}\n\t\treturn result;\n\t};\n\n\tif ( state ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'REMOVE_BLOCKS':\n\t\t\t\taction = {\n\t\t\t\t\t...action,\n\t\t\t\t\ttype: 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN',\n\t\t\t\t\tremovedClientIds: getAllChildren( action.clientIds ),\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\tcase 'REPLACE_BLOCKS':\n\t\t\t\taction = {\n\t\t\t\t\t...action,\n\t\t\t\t\ttype: 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN',\n\t\t\t\t\treplacedClientIds: getAllChildren( action.clientIds ),\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn reducer( state, action );\n};\n\n/**\n * Higher-order reducer which targets the combined blocks reducer and handles\n * the `RESET_BLOCKS` action. When dispatched, this action will replace all\n * blocks that exist in the post, leaving blocks that exist only in state (e.g.\n * reusable blocks and blocks controlled by inner blocks controllers) alone.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withBlockReset = ( reducer ) => ( state, action ) => {\n\tif ( action.type === 'RESET_BLOCKS' ) {\n\t\tconst newState = {\n\t\t\t...state,\n\t\t\tbyClientId: new Map(\n\t\t\t\tgetFlattenedBlocksWithoutAttributes( action.blocks )\n\t\t\t),\n\t\t\tattributes: new Map( getFlattenedBlockAttributes( action.blocks ) ),\n\t\t\torder: mapBlockOrder( action.blocks ),\n\t\t\tparents: new Map( mapBlockParents( action.blocks ) ),\n\t\t\tcontrolledInnerBlocks: {},\n\t\t};\n\n\t\tnewState.tree = new Map( state?.tree );\n\t\tupdateBlockTreeForBlocks( newState, action.blocks );\n\t\tnewState.tree.set( '', {\n\t\t\tinnerBlocks: action.blocks.map( ( subBlock ) =>\n\t\t\t\tnewState.tree.get( subBlock.clientId )\n\t\t\t),\n\t\t} );\n\n\t\treturn newState;\n\t}\n\n\treturn reducer( state, action );\n};\n\n/**\n * Higher-order reducer which targets the combined blocks reducer and handles\n * the `REPLACE_INNER_BLOCKS` action. When dispatched, this action the state\n * should become equivalent to the execution of a `REMOVE_BLOCKS` action\n * containing all the child's of the root block followed by the execution of\n * `INSERT_BLOCKS` with the new blocks.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withReplaceInnerBlocks = ( reducer ) => ( state, action ) => {\n\tif ( action.type !== 'REPLACE_INNER_BLOCKS' ) {\n\t\treturn reducer( state, action );\n\t}\n\n\t// Finds every nested inner block controller. We must check the action blocks\n\t// and not just the block parent state because some inner block controllers\n\t// should be deleted if specified, whereas others should not be deleted. If\n\t// a controlled should not be deleted, then we need to avoid deleting its\n\t// inner blocks from the block state because its inner blocks will not be\n\t// attached to the block in the action.\n\tconst nestedControllers = {};\n\tif ( Object.keys( state.controlledInnerBlocks ).length ) {\n\t\tconst stack = [ ...action.blocks ];\n\t\twhile ( stack.length ) {\n\t\t\tconst { innerBlocks, ...block } = stack.shift();\n\t\t\tstack.push( ...innerBlocks );\n\t\t\tif ( !! state.controlledInnerBlocks[ block.clientId ] ) {\n\t\t\t\tnestedControllers[ block.clientId ] = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t// The `keepControlledInnerBlocks` prop will keep the inner blocks of the\n\t// marked block in the block state so that they can be reattached to the\n\t// marked block when we re-insert everything a few lines below.\n\tlet stateAfterBlocksRemoval = state;\n\tif ( state.order.get( action.rootClientId ) ) {\n\t\tstateAfterBlocksRemoval = reducer( stateAfterBlocksRemoval, {\n\t\t\ttype: 'REMOVE_BLOCKS',\n\t\t\tkeepControlledInnerBlocks: nestedControllers,\n\t\t\tclientIds: state.order.get( action.rootClientId ),\n\t\t} );\n\t}\n\tlet stateAfterInsert = stateAfterBlocksRemoval;\n\tif ( action.blocks.length ) {\n\t\tstateAfterInsert = reducer( stateAfterInsert, {\n\t\t\t...action,\n\t\t\ttype: 'INSERT_BLOCKS',\n\t\t\tindex: 0,\n\t\t} );\n\n\t\t// We need to re-attach the controlled inner blocks to the blocks tree and\n\t\t// preserve their block order. Otherwise, an inner block controller's blocks\n\t\t// will be deleted entirely from its entity.\n\t\tconst stateAfterInsertOrder = new Map( stateAfterInsert.order );\n\t\tObject.keys( nestedControllers ).forEach( ( key ) => {\n\t\t\tif ( state.order.get( key ) ) {\n\t\t\t\tstateAfterInsertOrder.set( key, state.order.get( key ) );\n\t\t\t}\n\t\t} );\n\t\tstateAfterInsert.order = stateAfterInsertOrder;\n\t\tstateAfterInsert.tree = new Map( stateAfterInsert.tree );\n\t\tObject.keys( nestedControllers ).forEach( ( _key ) => {\n\t\t\tconst key = `controlled||${ _key }`;\n\t\t\tif ( state.tree.has( key ) ) {\n\t\t\t\tstateAfterInsert.tree.set( key, state.tree.get( key ) );\n\t\t\t}\n\t\t} );\n\t}\n\treturn stateAfterInsert;\n};\n\n/**\n * Higher-order reducer which targets the combined blocks reducer and handles\n * the `SAVE_REUSABLE_BLOCK_SUCCESS` action. This action can't be handled by\n * regular reducers and needs a higher-order reducer since it needs access to\n * both `byClientId` and `attributes` simultaneously.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withSaveReusableBlock = ( reducer ) => ( state, action ) => {\n\tif ( state && action.type === 'SAVE_REUSABLE_BLOCK_SUCCESS' ) {\n\t\tconst { id, updatedId } = action;\n\n\t\t// If a temporary reusable block is saved, we swap the temporary id with the final one.\n\t\tif ( id === updatedId ) {\n\t\t\treturn state;\n\t\t}\n\n\t\tstate = { ...state };\n\t\tstate.attributes = new Map( state.attributes );\n\t\tstate.attributes.forEach( ( attributes, clientId ) => {\n\t\t\tconst { name } = state.byClientId.get( clientId );\n\t\t\tif ( name === 'core/block' && attributes.ref === id ) {\n\t\t\t\tstate.attributes.set( clientId, {\n\t\t\t\t\t...attributes,\n\t\t\t\t\tref: updatedId,\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn reducer( state, action );\n};\n/**\n * Higher-order reducer which removes blocks from state when switching parent block controlled state.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withResetControlledBlocks = ( reducer ) => ( state, action ) => {\n\tif ( action.type === 'SET_HAS_CONTROLLED_INNER_BLOCKS' ) {\n\t\t// when switching a block from controlled to uncontrolled or inverse,\n\t\t// we need to remove its content first.\n\t\tconst tempState = reducer( state, {\n\t\t\ttype: 'REPLACE_INNER_BLOCKS',\n\t\t\trootClientId: action.clientId,\n\t\t\tblocks: [],\n\t\t} );\n\t\treturn reducer( tempState, action );\n\t}\n\n\treturn reducer( state, action );\n};\n\n/**\n * Reducer returning the blocks state.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport const blocks = pipe(\n\tcombineReducers,\n\twithSaveReusableBlock, // Needs to be before withBlockCache.\n\twithBlockTree, // Needs to be before withInnerBlocksRemoveCascade.\n\twithInnerBlocksRemoveCascade,\n\twithReplaceInnerBlocks, // Needs to be after withInnerBlocksRemoveCascade.\n\twithBlockReset,\n\twithPersistentBlockChange,\n\twithIgnoredBlockChange,\n\twithResetControlledBlocks\n)( {\n\t// The state is using a Map instead of a plain object for performance reasons.\n\t// You can run the \"./test/performance.js\" unit test to check the impact\n\t// code changes can have on this reducer.\n\tbyClientId( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tgetFlattenedBlocksWithoutAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'UPDATE_BLOCK': {\n\t\t\t\t// Ignore updates if block isn't known.\n\t\t\t\tif ( ! state.has( action.clientId ) ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\t// Do nothing if only attributes change.\n\t\t\t\tconst { attributes, ...changes } = action.updates;\n\t\t\t\tif ( Object.values( changes ).length === 0 ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set( action.clientId, {\n\t\t\t\t\t...state.get( action.clientId ),\n\t\t\t\t\t...changes,\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tif ( ! action.blocks ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\n\t\t\t\tgetFlattenedBlocksWithoutAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\t// The state is using a Map instead of a plain object for performance reasons.\n\t// You can run the \"./test/performance.js\" unit test to check the impact\n\t// code changes can have on this reducer.\n\tattributes( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tgetFlattenedBlockAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'UPDATE_BLOCK': {\n\t\t\t\t// Ignore updates if block isn't known or there are no attribute changes.\n\t\t\t\tif (\n\t\t\t\t\t! state.get( action.clientId ) ||\n\t\t\t\t\t! action.updates.attributes\n\t\t\t\t) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set( action.clientId, {\n\t\t\t\t\t...state.get( action.clientId ),\n\t\t\t\t\t...action.updates.attributes,\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'UPDATE_BLOCK_ATTRIBUTES': {\n\t\t\t\t// Avoid a state change if none of the block IDs are known.\n\t\t\t\tif ( action.clientIds.every( ( id ) => ! state.get( id ) ) ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tlet hasChange = false;\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tfor ( const clientId of action.clientIds ) {\n\t\t\t\t\tconst updatedAttributeEntries = Object.entries(\n\t\t\t\t\t\taction.uniqueByBlock\n\t\t\t\t\t\t\t? action.attributes[ clientId ]\n\t\t\t\t\t\t\t: action.attributes ?? {}\n\t\t\t\t\t);\n\t\t\t\t\tif ( updatedAttributeEntries.length === 0 ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tlet hasUpdatedAttributes = false;\n\t\t\t\t\tconst existingAttributes = state.get( clientId );\n\t\t\t\t\tconst newAttributes = {};\n\t\t\t\t\tupdatedAttributeEntries.forEach( ( [ key, value ] ) => {\n\t\t\t\t\t\tif ( existingAttributes[ key ] !== value ) {\n\t\t\t\t\t\t\thasUpdatedAttributes = true;\n\t\t\t\t\t\t\tnewAttributes[ key ] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t\thasChange = hasChange || hasUpdatedAttributes;\n\t\t\t\t\tif ( hasUpdatedAttributes ) {\n\t\t\t\t\t\tnewState.set( clientId, {\n\t\t\t\t\t\t\t...existingAttributes,\n\t\t\t\t\t\t\t...newAttributes,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn hasChange ? newState : state;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tif ( ! action.blocks ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tgetFlattenedBlockAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\t// The state is using a Map instead of a plain object for performance reasons.\n\t// You can run the \"./test/performance.js\" unit test to check the impact\n\t// code changes can have on this reducer.\n\torder( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS': {\n\t\t\t\tconst blockOrder = mapBlockOrder( action.blocks );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tblockOrder.forEach( ( order, clientId ) => {\n\t\t\t\t\tif ( clientId !== '' ) {\n\t\t\t\t\t\tnewState.set( clientId, order );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tnewState.set(\n\t\t\t\t\t'',\n\t\t\t\t\t( state.get( '' ) ?? [] ).concat( blockOrder[ '' ] )\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst { rootClientId = '' } = action;\n\t\t\t\tconst subState = state.get( rootClientId ) || [];\n\t\t\t\tconst mappedBlocks = mapBlockOrder(\n\t\t\t\t\taction.blocks,\n\t\t\t\t\trootClientId\n\t\t\t\t);\n\t\t\t\tconst { index = subState.length } = action;\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tmappedBlocks.forEach( ( order, clientId ) => {\n\t\t\t\t\tnewState.set( clientId, order );\n\t\t\t\t} );\n\t\t\t\tnewState.set(\n\t\t\t\t\trootClientId,\n\t\t\t\t\tinsertAt(\n\t\t\t\t\t\tsubState,\n\t\t\t\t\t\tmappedBlocks.get( rootClientId ),\n\t\t\t\t\t\tindex\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCKS_TO_POSITION': {\n\t\t\t\tconst {\n\t\t\t\t\tfromRootClientId = '',\n\t\t\t\t\ttoRootClientId = '',\n\t\t\t\t\tclientIds,\n\t\t\t\t} = action;\n\t\t\t\tconst { index = state.get( toRootClientId ).length } = action;\n\n\t\t\t\t// Moving inside the same parent block.\n\t\t\t\tif ( fromRootClientId === toRootClientId ) {\n\t\t\t\t\tconst subState = state.get( toRootClientId );\n\t\t\t\t\tconst fromIndex = subState.indexOf( clientIds[ 0 ] );\n\t\t\t\t\tconst newState = new Map( state );\n\t\t\t\t\tnewState.set(\n\t\t\t\t\t\ttoRootClientId,\n\t\t\t\t\t\tmoveTo(\n\t\t\t\t\t\t\tstate.get( toRootClientId ),\n\t\t\t\t\t\t\tfromIndex,\n\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\tclientIds.length\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\treturn newState;\n\t\t\t\t}\n\n\t\t\t\t// Moving from a parent block to another.\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set(\n\t\t\t\t\tfromRootClientId,\n\t\t\t\t\tstate\n\t\t\t\t\t\t.get( fromRootClientId )\n\t\t\t\t\t\t?.filter( ( id ) => ! clientIds.includes( id ) ) ?? []\n\t\t\t\t);\n\t\t\t\tnewState.set(\n\t\t\t\t\ttoRootClientId,\n\t\t\t\t\tinsertAt( state.get( toRootClientId ), clientIds, index )\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCKS_UP': {\n\t\t\t\tconst { clientIds, rootClientId = '' } = action;\n\t\t\t\tconst firstClientId = clientIds[ 0 ];\n\t\t\t\tconst subState = state.get( rootClientId );\n\n\t\t\t\tif ( ! subState.length || firstClientId === subState[ 0 ] ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst firstIndex = subState.indexOf( firstClientId );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set(\n\t\t\t\t\trootClientId,\n\t\t\t\t\tmoveTo(\n\t\t\t\t\t\tsubState,\n\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\tfirstIndex - 1,\n\t\t\t\t\t\tclientIds.length\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCKS_DOWN': {\n\t\t\t\tconst { clientIds, rootClientId = '' } = action;\n\t\t\t\tconst firstClientId = clientIds[ 0 ];\n\t\t\t\tconst lastClientId = clientIds[ clientIds.length - 1 ];\n\t\t\t\tconst subState = state.get( rootClientId );\n\n\t\t\t\tif (\n\t\t\t\t\t! subState.length ||\n\t\t\t\t\tlastClientId === subState[ subState.length - 1 ]\n\t\t\t\t) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst firstIndex = subState.indexOf( firstClientId );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set(\n\t\t\t\t\trootClientId,\n\t\t\t\t\tmoveTo(\n\t\t\t\t\t\tsubState,\n\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\tfirstIndex + 1,\n\t\t\t\t\t\tclientIds.length\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst { clientIds } = action;\n\t\t\t\tif ( ! action.blocks ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst mappedBlocks = mapBlockOrder( action.blocks );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tmappedBlocks.forEach( ( order, clientId ) => {\n\t\t\t\t\tif ( clientId !== '' ) {\n\t\t\t\t\t\tnewState.set( clientId, order );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tnewState.forEach( ( order, clientId ) => {\n\t\t\t\t\tconst newSubOrder = Object.values( order ).reduce(\n\t\t\t\t\t\t( result, subClientId ) => {\n\t\t\t\t\t\t\tif ( subClientId === clientIds[ 0 ] ) {\n\t\t\t\t\t\t\t\treturn [ ...result, ...mappedBlocks.get( '' ) ];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( clientIds.indexOf( subClientId ) === -1 ) {\n\t\t\t\t\t\t\t\tresult.push( subClientId );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[]\n\t\t\t\t\t);\n\t\t\t\t\tnewState.set( clientId, newSubOrder );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\t// Remove inner block ordering for removed blocks.\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tnewState.forEach( ( order, clientId ) => {\n\t\t\t\t\tconst newSubOrder =\n\t\t\t\t\t\torder?.filter(\n\t\t\t\t\t\t\t( id ) => ! action.removedClientIds.includes( id )\n\t\t\t\t\t\t) ?? [];\n\t\t\t\t\tif ( newSubOrder.length !== order.length ) {\n\t\t\t\t\t\tnewState.set( clientId, newSubOrder );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\t// While technically redundant data as the inverse of `order`, it serves as\n\t// an optimization for the selectors which derive the ancestry of a block.\n\tparents( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tmapBlockParents( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tmapBlockParents(\n\t\t\t\t\taction.blocks,\n\t\t\t\t\taction.rootClientId || ''\n\t\t\t\t).forEach( ( [ key, value ] ) => {\n\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'MOVE_BLOCKS_TO_POSITION': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.clientIds.forEach( ( id ) => {\n\t\t\t\t\tnewState.set( id, action.toRootClientId || '' );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tmapBlockParents(\n\t\t\t\t\taction.blocks,\n\t\t\t\t\tstate.get( action.clientIds[ 0 ] )\n\t\t\t\t).forEach( ( [ key, value ] ) => {\n\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\tcontrolledInnerBlocks(\n\t\tstate = {},\n\t\t{ type, clientId, hasControlledInnerBlocks }\n\t) {\n\t\tif ( type === 'SET_HAS_CONTROLLED_INNER_BLOCKS' ) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ clientId ]: hasControlledInnerBlocks,\n\t\t\t};\n\t\t}\n\t\treturn state;\n\t},\n} );\n\n/**\n * Reducer returning visibility status of block interface.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isBlockInterfaceHidden( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'HIDE_BLOCK_INTERFACE':\n\t\t\treturn true;\n\n\t\tcase 'SHOW_BLOCK_INTERFACE':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning typing state.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isTyping( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_TYPING':\n\t\t\treturn true;\n\n\t\tcase 'STOP_TYPING':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning dragged block client id.\n *\n * @param {string[]} state  Current state.\n * @param {Object}   action Dispatched action.\n *\n * @return {string[]} Updated state.\n */\nexport function draggedBlocks( state = [], action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_DRAGGING_BLOCKS':\n\t\t\treturn action.clientIds;\n\n\t\tcase 'STOP_DRAGGING_BLOCKS':\n\t\t\treturn [];\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer tracking the visible blocks.\n *\n * @param {Record<string,boolean>} state  Current state.\n * @param {Object}                 action Dispatched action.\n *\n * @return {Record<string,boolean>} Block visibility.\n */\nexport function blockVisibility( state = {}, action ) {\n\tif ( action.type === 'SET_BLOCK_VISIBILITY' ) {\n\t\treturn {\n\t\t\t...state,\n\t\t\t...action.updates,\n\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Internal helper reducer for selectionStart and selectionEnd. Can hold a block\n * selection, represented by an object with property clientId.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nfunction selectionHelper( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'CLEAR_SELECTED_BLOCK': {\n\t\t\tif ( state.clientId ) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn state;\n\t\t}\n\t\tcase 'SELECT_BLOCK':\n\t\t\tif ( action.clientId === state.clientId ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { clientId: action.clientId };\n\t\tcase 'REPLACE_INNER_BLOCKS':\n\t\tcase 'INSERT_BLOCKS': {\n\t\t\tif ( ! action.updateSelection || ! action.blocks.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { clientId: action.blocks[ 0 ].clientId };\n\t\t}\n\t\tcase 'REMOVE_BLOCKS':\n\t\t\tif (\n\t\t\t\t! action.clientIds ||\n\t\t\t\t! action.clientIds.length ||\n\t\t\t\taction.clientIds.indexOf( state.clientId ) === -1\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {};\n\t\tcase 'REPLACE_BLOCKS': {\n\t\t\tif ( action.clientIds.indexOf( state.clientId ) === -1 ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst blockToSelect =\n\t\t\t\taction.blocks[ action.indexToSelect ] ||\n\t\t\t\taction.blocks[ action.blocks.length - 1 ];\n\n\t\t\tif ( ! blockToSelect ) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tif ( blockToSelect.clientId === state.clientId ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { clientId: blockToSelect.clientId };\n\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the selection state.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function selection( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SELECTION_CHANGE':\n\t\t\tif ( action.clientId ) {\n\t\t\t\treturn {\n\t\t\t\t\tselectionStart: {\n\t\t\t\t\t\tclientId: action.clientId,\n\t\t\t\t\t\tattributeKey: action.attributeKey,\n\t\t\t\t\t\toffset: action.startOffset,\n\t\t\t\t\t},\n\t\t\t\t\tselectionEnd: {\n\t\t\t\t\t\tclientId: action.clientId,\n\t\t\t\t\t\tattributeKey: action.attributeKey,\n\t\t\t\t\t\toffset: action.endOffset,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tselectionStart: action.start || state.selectionStart,\n\t\t\t\tselectionEnd: action.end || state.selectionEnd,\n\t\t\t};\n\t\tcase 'RESET_SELECTION':\n\t\t\tconst { selectionStart, selectionEnd } = action;\n\t\t\treturn {\n\t\t\t\tselectionStart,\n\t\t\t\tselectionEnd,\n\t\t\t};\n\t\tcase 'MULTI_SELECT':\n\t\t\tconst { start, end } = action;\n\n\t\t\tif (\n\t\t\t\tstart === state.selectionStart?.clientId &&\n\t\t\t\tend === state.selectionEnd?.clientId\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tselectionStart: { clientId: start },\n\t\t\t\tselectionEnd: { clientId: end },\n\t\t\t};\n\t\tcase 'RESET_BLOCKS':\n\t\t\tconst startClientId = state?.selectionStart?.clientId;\n\t\t\tconst endClientId = state?.selectionEnd?.clientId;\n\n\t\t\t// Do nothing if there's no selected block.\n\t\t\tif ( ! startClientId && ! endClientId ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\t// If the start of the selection won't exist after reset, remove selection.\n\t\t\tif (\n\t\t\t\t! action.blocks.some(\n\t\t\t\t\t( block ) => block.clientId === startClientId\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tselectionStart: {},\n\t\t\t\t\tselectionEnd: {},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If the end of the selection won't exist after reset, collapse selection.\n\t\t\tif (\n\t\t\t\t! action.blocks.some(\n\t\t\t\t\t( block ) => block.clientId === endClientId\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectionEnd: state.selectionStart,\n\t\t\t\t};\n\t\t\t}\n\t}\n\n\tconst selectionStart = selectionHelper( state.selectionStart, action );\n\tconst selectionEnd = selectionHelper( state.selectionEnd, action );\n\n\tif (\n\t\tselectionStart === state.selectionStart &&\n\t\tselectionEnd === state.selectionEnd\n\t) {\n\t\treturn state;\n\t}\n\n\treturn {\n\t\tselectionStart,\n\t\tselectionEnd,\n\t};\n}\n\n/**\n * Reducer returning whether the user is multi-selecting.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isMultiSelecting( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_MULTI_SELECT':\n\t\t\treturn true;\n\n\t\tcase 'STOP_MULTI_SELECT':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning whether selection is enabled.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isSelectionEnabled( state = true, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'TOGGLE_SELECTION':\n\t\t\treturn action.isSelectionEnabled;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the initial block selection.\n *\n * Currently this in only used to restore the selection after block deletion and\n * pasting new content.This reducer should eventually be removed in favour of setting\n * selection directly.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {number|null} Initial position: 0, -1 or null.\n */\nexport function initialPosition( state = null, action ) {\n\tif (\n\t\taction.type === 'REPLACE_BLOCKS' &&\n\t\taction.initialPosition !== undefined\n\t) {\n\t\treturn action.initialPosition;\n\t} else if (\n\t\t[\n\t\t\t'MULTI_SELECT',\n\t\t\t'SELECT_BLOCK',\n\t\t\t'RESET_SELECTION',\n\t\t\t'INSERT_BLOCKS',\n\t\t\t'REPLACE_INNER_BLOCKS',\n\t\t].includes( action.type )\n\t) {\n\t\treturn action.initialPosition;\n\t}\n\n\treturn state;\n}\n\nexport function blocksMode( state = {}, action ) {\n\tif ( action.type === 'TOGGLE_BLOCK_MODE' ) {\n\t\tconst { clientId } = action;\n\t\treturn {\n\t\t\t...state,\n\t\t\t[ clientId ]:\n\t\t\t\tstate[ clientId ] && state[ clientId ] === 'html'\n\t\t\t\t\t? 'visual'\n\t\t\t\t\t: 'html',\n\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the block insertion point visibility, either null if there\n * is not an explicit insertion point assigned, or an object of its `index` and\n * `rootClientId`.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function insertionPoint( state = null, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SHOW_INSERTION_POINT': {\n\t\t\tconst { rootClientId, index, __unstableWithInserter, operation } =\n\t\t\t\taction;\n\t\t\tconst nextState = {\n\t\t\t\trootClientId,\n\t\t\t\tindex,\n\t\t\t\t__unstableWithInserter,\n\t\t\t\toperation,\n\t\t\t};\n\n\t\t\t// Bail out updates if the states are the same.\n\t\t\treturn fastDeepEqual( state, nextState ) ? state : nextState;\n\t\t}\n\n\t\tcase 'HIDE_INSERTION_POINT':\n\t\t\treturn null;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning whether the post blocks match the defined template or not.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function template( state = { isValid: true }, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_TEMPLATE_VALIDITY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisValid: action.isValid,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the editor setting.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function settings( state = SETTINGS_DEFAULTS, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'UPDATE_SETTINGS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...action.settings,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the user preferences.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {string} Updated state.\n */\nexport function preferences( state = PREFERENCES_DEFAULTS, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'INSERT_BLOCKS':\n\t\tcase 'REPLACE_BLOCKS':\n\t\t\treturn action.blocks.reduce( ( prevState, block ) => {\n\t\t\t\tconst { attributes, name: blockName } = block;\n\t\t\t\tlet id = blockName;\n\t\t\t\t// If a block variation match is found change the name to be the same with the\n\t\t\t\t// one that is used for block variations in the Inserter (`getItemFromVariation`).\n\t\t\t\tconst match = select( blocksStore ).getActiveBlockVariation(\n\t\t\t\t\tblockName,\n\t\t\t\t\tattributes\n\t\t\t\t);\n\t\t\t\tif ( match?.name ) {\n\t\t\t\t\tid += '/' + match.name;\n\t\t\t\t}\n\t\t\t\tif ( blockName === 'core/block' ) {\n\t\t\t\t\tid += '/' + attributes.ref;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...prevState,\n\t\t\t\t\tinsertUsage: {\n\t\t\t\t\t\t...prevState.insertUsage,\n\t\t\t\t\t\t[ id ]: {\n\t\t\t\t\t\t\ttime: action.time,\n\t\t\t\t\t\t\tcount: prevState.insertUsage[ id ]\n\t\t\t\t\t\t\t\t? prevState.insertUsage[ id ].count + 1\n\t\t\t\t\t\t\t\t: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}, state );\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning an object where each key is a block client ID, its value\n * representing the settings for its nested blocks.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport const blockListSettings = ( state = {}, action ) => {\n\tswitch ( action.type ) {\n\t\t// Even if the replaced blocks have the same client ID, our logic\n\t\t// should correct the state.\n\t\tcase 'REPLACE_BLOCKS':\n\t\tcase 'REMOVE_BLOCKS': {\n\t\t\treturn Object.fromEntries(\n\t\t\t\tObject.entries( state ).filter(\n\t\t\t\t\t( [ id ] ) => ! action.clientIds.includes( id )\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tcase 'UPDATE_BLOCK_LIST_SETTINGS': {\n\t\t\tconst { clientId } = action;\n\t\t\tif ( ! action.settings ) {\n\t\t\t\tif ( state.hasOwnProperty( clientId ) ) {\n\t\t\t\t\tconst { [ clientId ]: removedBlock, ...restBlocks } = state;\n\t\t\t\t\treturn restBlocks;\n\t\t\t\t}\n\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tif ( fastDeepEqual( state[ clientId ], action.settings ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ clientId ]: action.settings,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n};\n\n/**\n * Reducer returning which mode is enabled.\n *\n * @param {string} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {string} Updated state.\n */\nexport function editorMode( state = 'edit', action ) {\n\t// Let inserting block in navigation mode always trigger Edit mode.\n\tif ( action.type === 'INSERT_BLOCKS' && state === 'navigation' ) {\n\t\treturn 'edit';\n\t}\n\n\tif ( action.type === 'SET_EDITOR_MODE' ) {\n\t\treturn action.mode;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning whether the block moving mode is enabled or not.\n *\n * @param {string|null} state  Current state.\n * @param {Object}      action Dispatched action.\n *\n * @return {string|null} Updated state.\n */\nexport function hasBlockMovingClientId( state = null, action ) {\n\tif ( action.type === 'SET_BLOCK_MOVING_MODE' ) {\n\t\treturn action.hasBlockMovingClientId;\n\t}\n\n\tif ( action.type === 'SET_EDITOR_MODE' ) {\n\t\treturn null;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer return an updated state representing the most recent block attribute\n * update. The state is structured as an object where the keys represent the\n * client IDs of blocks, the values a subset of attributes from the most recent\n * block update. The state is always reset to null if the last action is\n * anything other than an attributes update.\n *\n * @param {Object<string,Object>} state  Current state.\n * @param {Object}                action Action object.\n *\n * @return {[string,Object]} Updated state.\n */\nexport function lastBlockAttributesChange( state = null, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'UPDATE_BLOCK':\n\t\t\tif ( ! action.updates.attributes ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn { [ action.clientId ]: action.updates.attributes };\n\n\t\tcase 'UPDATE_BLOCK_ATTRIBUTES':\n\t\t\treturn action.clientIds.reduce(\n\t\t\t\t( accumulator, id ) => ( {\n\t\t\t\t\t...accumulator,\n\t\t\t\t\t[ id ]: action.uniqueByBlock\n\t\t\t\t\t\t? action.attributes[ id ]\n\t\t\t\t\t\t: action.attributes,\n\t\t\t\t} ),\n\t\t\t\t{}\n\t\t\t);\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning current highlighted block.\n *\n * @param {boolean} state  Current highlighted block.\n * @param {Object}  action Dispatched action.\n *\n * @return {string} Updated state.\n */\nexport function highlightedBlock( state, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'TOGGLE_BLOCK_HIGHLIGHT':\n\t\t\tconst { clientId, isHighlighted } = action;\n\n\t\t\tif ( isHighlighted ) {\n\t\t\t\treturn clientId;\n\t\t\t} else if ( state === clientId ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn state;\n\t\tcase 'SELECT_BLOCK':\n\t\t\tif ( action.clientId !== state ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the block insertion event list state.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function lastBlockInserted( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'INSERT_BLOCKS':\n\t\tcase 'REPLACE_BLOCKS':\n\t\tcase 'REPLACE_INNER_BLOCKS':\n\t\t\tif ( ! action.blocks.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst clientIds = action.blocks.map( ( block ) => {\n\t\t\t\treturn block.clientId;\n\t\t\t} );\n\n\t\t\tconst source = action.meta?.source;\n\n\t\t\treturn { clientIds, source };\n\t\tcase 'RESET_BLOCKS':\n\t\t\treturn {};\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning the block that is eding temporarily edited as blocks.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function temporarilyEditingAsBlocks( state = '', action ) {\n\tif ( action.type === 'SET_TEMPORARILY_EDITING_AS_BLOCKS' ) {\n\t\treturn action.temporarilyEditingAsBlocks;\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning a map of block client IDs to block editing modes.\n *\n * @param {Map}    state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Map} Updated state.\n */\nexport function blockEditingModes( state = new Map(), action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_BLOCK_EDITING_MODE':\n\t\t\treturn new Map( state ).set( action.clientId, action.mode );\n\t\tcase 'UNSET_BLOCK_EDITING_MODE': {\n\t\t\tconst newState = new Map( state );\n\t\t\tnewState.delete( action.clientId );\n\t\t\treturn newState;\n\t\t}\n\t\tcase 'RESET_BLOCKS': {\n\t\t\treturn state.has( '' )\n\t\t\t\t? new Map().set( '', state.get( '' ) )\n\t\t\t\t: state;\n\t\t}\n\t}\n\treturn state;\n}\n\nconst combinedReducers = combineReducers( {\n\tblocks,\n\tisTyping,\n\tisBlockInterfaceHidden,\n\tdraggedBlocks,\n\tselection,\n\tisMultiSelecting,\n\tisSelectionEnabled,\n\tinitialPosition,\n\tblocksMode,\n\tblockListSettings,\n\tinsertionPoint,\n\ttemplate,\n\tsettings,\n\tpreferences,\n\tlastBlockAttributesChange,\n\teditorMode,\n\thasBlockMovingClientId,\n\thighlightedBlock,\n\tlastBlockInserted,\n\ttemporarilyEditingAsBlocks,\n\tblockVisibility,\n\tblockEditingModes,\n} );\n\nfunction withAutomaticChangeReset( reducer ) {\n\treturn ( state, action ) => {\n\t\tconst nextState = reducer( state, action );\n\n\t\tif ( ! state ) {\n\t\t\treturn nextState;\n\t\t}\n\n\t\t// Take over the last value without creating a new reference.\n\t\tnextState.automaticChangeStatus = state.automaticChangeStatus;\n\n\t\tif ( action.type === 'MARK_AUTOMATIC_CHANGE' ) {\n\t\t\treturn {\n\t\t\t\t...nextState,\n\t\t\t\tautomaticChangeStatus: 'pending',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\taction.type === 'MARK_AUTOMATIC_CHANGE_FINAL' &&\n\t\t\tstate.automaticChangeStatus === 'pending'\n\t\t) {\n\t\t\treturn {\n\t\t\t\t...nextState,\n\t\t\t\tautomaticChangeStatus: 'final',\n\t\t\t};\n\t\t}\n\n\t\t// If there's a change that doesn't affect blocks or selection, maintain\n\t\t// the current status.\n\t\tif (\n\t\t\tnextState.blocks === state.blocks &&\n\t\t\tnextState.selection === state.selection\n\t\t) {\n\t\t\treturn nextState;\n\t\t}\n\n\t\t// As long as the state is not final, ignore any selection changes.\n\t\tif (\n\t\t\tnextState.automaticChangeStatus !== 'final' &&\n\t\t\tnextState.selection !== state.selection\n\t\t) {\n\t\t\treturn nextState;\n\t\t}\n\n\t\t// Reset the status if blocks change or selection changes (when status is final).\n\t\treturn {\n\t\t\t...nextState,\n\t\t\tautomaticChangeStatus: undefined,\n\t\t};\n\t};\n}\n\nexport default withAutomaticChangeReset( combinedReducers );\n","'use strict';\n\n/** @typedef {(...args: any[]) => *[]} GetDependants */\n\n/** @typedef {() => void} Clear */\n\n/**\n * @typedef {{\n *   getDependants: GetDependants,\n *   clear: Clear\n * }} EnhancedSelector\n */\n\n/**\n * Internal cache entry.\n *\n * @typedef CacheNode\n *\n * @property {?CacheNode|undefined} [prev] Previous node.\n * @property {?CacheNode|undefined} [next] Next node.\n * @property {*[]} args Function arguments for cache entry.\n * @property {*} val Function result.\n */\n\n/**\n * @typedef Cache\n *\n * @property {Clear} clear Function to clear cache.\n * @property {boolean} [isUniqueByDependants] Whether dependants are valid in\n * considering cache uniqueness. A cache is unique if dependents are all arrays\n * or objects.\n * @property {CacheNode?} [head] Cache head.\n * @property {*[]} [lastDependants] Dependants from previous invocation.\n */\n\n/**\n * Arbitrary value used as key for referencing cache object in WeakMap tree.\n *\n * @type {{}}\n */\nvar LEAF_KEY = {};\n\n/**\n * Returns the first argument as the sole entry in an array.\n *\n * @template T\n *\n * @param {T} value Value to return.\n *\n * @return {[T]} Value returned as entry in array.\n */\nfunction arrayOf(value) {\n\treturn [value];\n}\n\n/**\n * Returns true if the value passed is object-like, or false otherwise. A value\n * is object-like if it can support property assignment, e.g. object or array.\n *\n * @param {*} value Value to test.\n *\n * @return {boolean} Whether value is object-like.\n */\nfunction isObjectLike(value) {\n\treturn !!value && 'object' === typeof value;\n}\n\n/**\n * Creates and returns a new cache object.\n *\n * @return {Cache} Cache object.\n */\nfunction createCache() {\n\t/** @type {Cache} */\n\tvar cache = {\n\t\tclear: function () {\n\t\t\tcache.head = null;\n\t\t},\n\t};\n\n\treturn cache;\n}\n\n/**\n * Returns true if entries within the two arrays are strictly equal by\n * reference from a starting index.\n *\n * @param {*[]} a First array.\n * @param {*[]} b Second array.\n * @param {number} fromIndex Index from which to start comparison.\n *\n * @return {boolean} Whether arrays are shallowly equal.\n */\nfunction isShallowEqual(a, b, fromIndex) {\n\tvar i;\n\n\tif (a.length !== b.length) {\n\t\treturn false;\n\t}\n\n\tfor (i = fromIndex; i < a.length; i++) {\n\t\tif (a[i] !== b[i]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/**\n * Returns a memoized selector function. The getDependants function argument is\n * called before the memoized selector and is expected to return an immutable\n * reference or array of references on which the selector depends for computing\n * its own return value. The memoize cache is preserved only as long as those\n * dependant references remain the same. If getDependants returns a different\n * reference(s), the cache is cleared and the selector value regenerated.\n *\n * @template {(...args: *[]) => *} S\n *\n * @param {S} selector Selector function.\n * @param {GetDependants=} getDependants Dependant getter returning an array of\n * references used in cache bust consideration.\n */\nexport default function (selector, getDependants) {\n\t/** @type {WeakMap<*,*>} */\n\tvar rootCache;\n\n\t/** @type {GetDependants} */\n\tvar normalizedGetDependants = getDependants ? getDependants : arrayOf;\n\n\t/**\n\t * Returns the cache for a given dependants array. When possible, a WeakMap\n\t * will be used to create a unique cache for each set of dependants. This\n\t * is feasible due to the nature of WeakMap in allowing garbage collection\n\t * to occur on entries where the key object is no longer referenced. Since\n\t * WeakMap requires the key to be an object, this is only possible when the\n\t * dependant is object-like. The root cache is created as a hierarchy where\n\t * each top-level key is the first entry in a dependants set, the value a\n\t * WeakMap where each key is the next dependant, and so on. This continues\n\t * so long as the dependants are object-like. If no dependants are object-\n\t * like, then the cache is shared across all invocations.\n\t *\n\t * @see isObjectLike\n\t *\n\t * @param {*[]} dependants Selector dependants.\n\t *\n\t * @return {Cache} Cache object.\n\t */\n\tfunction getCache(dependants) {\n\t\tvar caches = rootCache,\n\t\t\tisUniqueByDependants = true,\n\t\t\ti,\n\t\t\tdependant,\n\t\t\tmap,\n\t\t\tcache;\n\n\t\tfor (i = 0; i < dependants.length; i++) {\n\t\t\tdependant = dependants[i];\n\n\t\t\t// Can only compose WeakMap from object-like key.\n\t\t\tif (!isObjectLike(dependant)) {\n\t\t\t\tisUniqueByDependants = false;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Does current segment of cache already have a WeakMap?\n\t\t\tif (caches.has(dependant)) {\n\t\t\t\t// Traverse into nested WeakMap.\n\t\t\t\tcaches = caches.get(dependant);\n\t\t\t} else {\n\t\t\t\t// Create, set, and traverse into a new one.\n\t\t\t\tmap = new WeakMap();\n\t\t\t\tcaches.set(dependant, map);\n\t\t\t\tcaches = map;\n\t\t\t}\n\t\t}\n\n\t\t// We use an arbitrary (but consistent) object as key for the last item\n\t\t// in the WeakMap to serve as our running cache.\n\t\tif (!caches.has(LEAF_KEY)) {\n\t\t\tcache = createCache();\n\t\t\tcache.isUniqueByDependants = isUniqueByDependants;\n\t\t\tcaches.set(LEAF_KEY, cache);\n\t\t}\n\n\t\treturn caches.get(LEAF_KEY);\n\t}\n\n\t/**\n\t * Resets root memoization cache.\n\t */\n\tfunction clear() {\n\t\trootCache = new WeakMap();\n\t}\n\n\t/* eslint-disable jsdoc/check-param-names */\n\t/**\n\t * The augmented selector call, considering first whether dependants have\n\t * changed before passing it to underlying memoize function.\n\t *\n\t * @param {*}    source    Source object for derivation.\n\t * @param {...*} extraArgs Additional arguments to pass to selector.\n\t *\n\t * @return {*} Selector result.\n\t */\n\t/* eslint-enable jsdoc/check-param-names */\n\tfunction callSelector(/* source, ...extraArgs */) {\n\t\tvar len = arguments.length,\n\t\t\tcache,\n\t\t\tnode,\n\t\t\ti,\n\t\t\targs,\n\t\t\tdependants;\n\n\t\t// Create copy of arguments (avoid leaking deoptimization).\n\t\targs = new Array(len);\n\t\tfor (i = 0; i < len; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\n\t\tdependants = normalizedGetDependants.apply(null, args);\n\t\tcache = getCache(dependants);\n\n\t\t// If not guaranteed uniqueness by dependants (primitive type), shallow\n\t\t// compare against last dependants and, if references have changed,\n\t\t// destroy cache to recalculate result.\n\t\tif (!cache.isUniqueByDependants) {\n\t\t\tif (\n\t\t\t\tcache.lastDependants &&\n\t\t\t\t!isShallowEqual(dependants, cache.lastDependants, 0)\n\t\t\t) {\n\t\t\t\tcache.clear();\n\t\t\t}\n\n\t\t\tcache.lastDependants = dependants;\n\t\t}\n\n\t\tnode = cache.head;\n\t\twhile (node) {\n\t\t\t// Check whether node arguments match arguments\n\t\t\tif (!isShallowEqual(node.args, args, 1)) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif (node !== cache.head) {\n\t\t\t\t// Adjust siblings to point to each other.\n\t\t\t\t/** @type {CacheNode} */ (node.prev).next = node.next;\n\t\t\t\tif (node.next) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = cache.head;\n\t\t\t\tnode.prev = null;\n\t\t\t\t/** @type {CacheNode} */ (cache.head).prev = node;\n\t\t\t\tcache.head = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\tnode = /** @type {CacheNode} */ ({\n\t\t\t// Generate the result from original function\n\t\t\tval: selector.apply(null, args),\n\t\t});\n\n\t\t// Avoid including the source object in the cache.\n\t\targs[0] = null;\n\t\tnode.args = args;\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif (cache.head) {\n\t\t\tcache.head.prev = node;\n\t\t\tnode.next = cache.head;\n\t\t}\n\n\t\tcache.head = node;\n\n\t\treturn node.val;\n\t}\n\n\tcallSelector.getDependants = normalizedGetDependants;\n\tcallSelector.clear = clear;\n\tclear();\n\n\treturn /** @type {S & EnhancedSelector} */ (callSelector);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"primitives\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst symbol = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-1 1.4l-5.6 5.6c-.1.1-.3.1-.4 0l-5.6-5.6c-.1-.1-.1-.3 0-.4l5.6-5.6s.1-.1.2-.1.1 0 .2.1l5.6 5.6c.1.1.1.3 0 .4zm-16.6-.4L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z\" />\n\t</SVG>\n);\n\nexport default symbol;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"richText\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"deprecated\"];","/**\n * Helper function that maps attribute definition properties to the\n * ones used by RichText utils like `create, toHTMLString, etc..`.\n *\n * @param {Object} attributeDefinition A block's attribute definition object.\n * @return {Object} The mapped object.\n */\nexport function mapRichTextSettings( attributeDefinition ) {\n\tconst {\n\t\tmultiline: multilineTag,\n\t\t__unstableMultilineWrapperTags: multilineWrapperTags,\n\t\t__unstablePreserveWhiteSpace: preserveWhiteSpace,\n\t} = attributeDefinition;\n\treturn {\n\t\tmultilineTag,\n\t\tmultilineWrapperTags,\n\t\tpreserveWhiteSpace,\n\t};\n}\n","/**\n * Recursive stable sorting comparator function.\n *\n * @param {string|Function} field Field to sort by.\n * @param {Array}           items Items to sort.\n * @param {string}          order Order, 'asc' or 'desc'.\n * @return {Function} Comparison function to be used in a `.sort()`.\n */\nconst comparator = ( field, items, order ) => {\n\treturn ( a, b ) => {\n\t\tlet cmpA, cmpB;\n\n\t\tif ( typeof field === 'function' ) {\n\t\t\tcmpA = field( a );\n\t\t\tcmpB = field( b );\n\t\t} else {\n\t\t\tcmpA = a[ field ];\n\t\t\tcmpB = b[ field ];\n\t\t}\n\n\t\tif ( cmpA > cmpB ) {\n\t\t\treturn order === 'asc' ? 1 : -1;\n\t\t} else if ( cmpB > cmpA ) {\n\t\t\treturn order === 'asc' ? -1 : 1;\n\t\t}\n\n\t\tconst orderA = items.findIndex( ( item ) => item === a );\n\t\tconst orderB = items.findIndex( ( item ) => item === b );\n\n\t\t// Stable sort: maintaining original array order\n\t\tif ( orderA > orderB ) {\n\t\t\treturn 1;\n\t\t} else if ( orderB > orderA ) {\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn 0;\n\t};\n};\n\n/**\n * Order items by a certain key.\n * Supports decorator functions that allow complex picking of a comparison field.\n * Sorts in ascending order by default, but supports descending as well.\n * Stable sort - maintains original order of equal items.\n *\n * @param {Array}           items Items to order.\n * @param {string|Function} field Field to order by.\n * @param {string}          order Sorting order, `asc` or `desc`.\n * @return {Array} Sorted items.\n */\nexport function orderBy( items, field, order = 'asc' ) {\n\treturn items.concat().sort( comparator( field, items, order ) );\n}\n","/**\n * External dependencies\n */\nimport createSelector from 'rememo';\n\n/**\n * WordPress dependencies\n */\nimport { select } from '@wordpress/data';\nimport { store as blocksStore } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetBlockRootClientId,\n\tgetTemplateLock,\n\tgetBlockName,\n\tgetBlockOrder,\n} from './selectors';\n\n/**\n * Returns true if the block interface is hidden, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the block toolbar is hidden.\n */\nexport function isBlockInterfaceHidden( state ) {\n\treturn state.isBlockInterfaceHidden;\n}\n\n/**\n * Gets the client ids of the last inserted blocks.\n *\n * @param {Object} state Global application state.\n * @return {Array|undefined} Client Ids of the last inserted block(s).\n */\nexport function getLastInsertedBlocksClientIds( state ) {\n\treturn state?.lastBlockInserted?.clientIds;\n}\n\n/**\n * @typedef {import('../components/block-editing-mode').BlockEditingMode} BlockEditingMode\n */\n\n/**\n * Returns the block editing mode for a given block.\n *\n * The mode can be one of three options:\n *\n * - `'disabled'`: Prevents editing the block entirely, i.e. it cannot be\n *   selected.\n * - `'contentOnly'`: Hides all non-content UI, e.g. auxiliary controls in the\n *   toolbar, the block movers, block settings.\n * - `'default'`: Allows editing the block as normal.\n *\n * Blocks can set a mode using the `useBlockEditingMode` hook.\n *\n * The mode is inherited by all of the block's inner blocks, unless they have\n * their own mode.\n *\n * A template lock can also set a mode. If the template lock is `'contentOnly'`,\n * the block's mode is overridden to `'contentOnly'` if the block has a content\n * role attribute, or `'disabled'` otherwise.\n *\n * @see useBlockEditingMode\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block client ID, or `''` for the root container.\n *\n * @return {BlockEditingMode} The block editing mode. One of `'disabled'`,\n *                            `'contentOnly'`, or `'default'`.\n */\nexport const getBlockEditingMode = createSelector(\n\t( state, clientId = '' ) => {\n\t\tif ( state.blockEditingModes.has( clientId ) ) {\n\t\t\treturn state.blockEditingModes.get( clientId );\n\t\t}\n\t\tif ( ! clientId ) {\n\t\t\treturn 'default';\n\t\t}\n\t\tconst rootClientId = getBlockRootClientId( state, clientId );\n\t\tconst templateLock = getTemplateLock( state, rootClientId );\n\t\tif ( templateLock === 'contentOnly' ) {\n\t\t\tconst name = getBlockName( state, clientId );\n\t\t\t// TODO: Terrible hack! We're calling the global select() function\n\t\t\t// here instead of using createRegistrySelector(). The problem with\n\t\t\t// using createRegistrySelector() is that then the public\n\t\t\t// block-editor selectors (e.g. canInsertBlockTypeUnmemoized) can't\n\t\t\t// call this private block-editor selector due to a bug in\n\t\t\t// @wordpress/data. See\n\t\t\t// https://github.com/WordPress/gutenberg/pull/50985.\n\t\t\tconst isContent =\n\t\t\t\tselect( blocksStore ).__experimentalHasContentRoleAttribute(\n\t\t\t\t\tname\n\t\t\t\t);\n\t\t\treturn isContent ? 'contentOnly' : 'disabled';\n\t\t}\n\t\tconst parentMode = getBlockEditingMode( state, rootClientId );\n\t\treturn parentMode === 'contentOnly' ? 'default' : parentMode;\n\t},\n\t( state ) => [\n\t\tstate.blockEditingModes,\n\t\tstate.blocks.parents,\n\t\tstate.settings.templateLock,\n\t\tstate.blockListSettings,\n\t]\n);\n\n/**\n * Returns true if the block with the given client ID and all of its descendants\n * have an editing mode of 'disabled', or false otherwise.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block client ID.\n *\n * @return {boolean} Whether the block and its descendants are disabled.\n */\nexport const isBlockSubtreeDisabled = createSelector(\n\t( state, clientId ) => {\n\t\tconst isChildSubtreeDisabled = ( childClientId ) => {\n\t\t\tconst mode = state.blockEditingModes.get( childClientId );\n\t\t\treturn (\n\t\t\t\t( mode === undefined || mode === 'disabled' ) &&\n\t\t\t\tgetBlockOrder( state, childClientId ).every(\n\t\t\t\t\tisChildSubtreeDisabled\n\t\t\t\t)\n\t\t\t);\n\t\t};\n\t\treturn (\n\t\t\tgetBlockEditingMode( state, clientId ) === 'disabled' &&\n\t\t\tgetBlockOrder( state, clientId ).every( isChildSubtreeDisabled )\n\t\t);\n\t},\n\t( state ) => [ state.blockEditingModes, state.blocks.parents ]\n);\n","/**\n * External dependencies\n */\nimport createSelector from 'rememo';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tgetBlockType,\n\tgetBlockTypes,\n\tgetBlockVariations,\n\thasBlockSupport,\n\tgetPossibleBlockTransformations,\n\tparse,\n\tswitchToBlockType,\n} from '@wordpress/blocks';\nimport { Platform } from '@wordpress/element';\nimport { applyFilters } from '@wordpress/hooks';\nimport { symbol } from '@wordpress/icons';\nimport { create, remove, toHTMLString } from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { mapRichTextSettings } from './utils';\nimport { orderBy } from '../utils/sorting';\nimport { getBlockEditingMode } from './private-selectors';\n\n/**\n * A block selection object.\n *\n * @typedef {Object} WPBlockSelection\n *\n * @property {string} clientId     A block client ID.\n * @property {string} attributeKey A block attribute key.\n * @property {number} offset       An attribute value offset, based on the rich\n *                                 text value. See `wp.richText.create`.\n */\n\n// Module constants.\nconst MILLISECONDS_PER_HOUR = 3600 * 1000;\nconst MILLISECONDS_PER_DAY = 24 * 3600 * 1000;\nconst MILLISECONDS_PER_WEEK = 7 * 24 * 3600 * 1000;\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation, as in a connected or\n * other pure component which performs `shouldComponentUpdate` check on props.\n * This should be used as a last resort, since the normalized data should be\n * maintained by the reducer result in state.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\n/**\n * Shared reference to an empty Set for cases where it is important to avoid\n * returning a new Set reference on every invocation, as in a connected or\n * other pure component which performs `shouldComponentUpdate` check on props.\n * This should be used as a last resort, since the normalized data should be\n * maintained by the reducer result in state.\n *\n * @type {Set}\n */\nconst EMPTY_SET = new Set();\n\n/**\n * Returns a block's name given its client ID, or null if no block exists with\n * the client ID.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {string} Block name.\n */\nexport function getBlockName( state, clientId ) {\n\tconst block = state.blocks.byClientId.get( clientId );\n\tconst socialLinkName = 'core/social-link';\n\n\tif ( Platform.OS !== 'web' && block?.name === socialLinkName ) {\n\t\tconst attributes = state.blocks.attributes.get( clientId );\n\t\tconst { service } = attributes ?? {};\n\n\t\treturn service ? `${ socialLinkName }-${ service }` : socialLinkName;\n\t}\n\treturn block ? block.name : null;\n}\n\n/**\n * Returns whether a block is valid or not.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Is Valid.\n */\nexport function isBlockValid( state, clientId ) {\n\tconst block = state.blocks.byClientId.get( clientId );\n\treturn !! block && block.isValid;\n}\n\n/**\n * Returns a block's attributes given its client ID, or null if no block exists with\n * the client ID.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object?} Block attributes.\n */\nexport function getBlockAttributes( state, clientId ) {\n\tconst block = state.blocks.byClientId.get( clientId );\n\tif ( ! block ) {\n\t\treturn null;\n\t}\n\n\treturn state.blocks.attributes.get( clientId );\n}\n\n/**\n * Returns a block given its client ID. This is a parsed copy of the block,\n * containing its `blockName`, `clientId`, and current `attributes` state. This\n * is not the block's registration settings, which must be retrieved from the\n * blocks module registration store.\n *\n * getBlock recurses through its inner blocks until all its children blocks have\n * been retrieved. Note that getBlock will not return the child inner blocks of\n * an inner block controller. This is because an inner block controller syncs\n * itself with its own entity, and should therefore not be included with the\n * blocks of a different entity. For example, say you call `getBlocks( TP )` to\n * get the blocks of a template part. If another template part is a child of TP,\n * then the nested template part's child blocks will not be returned. This way,\n * the template block itself is considered part of the parent, but the children\n * are not.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Parsed block object.\n */\nexport function getBlock( state, clientId ) {\n\tif ( ! state.blocks.byClientId.has( clientId ) ) {\n\t\treturn null;\n\t}\n\n\treturn state.blocks.tree.get( clientId );\n}\n\nexport const __unstableGetBlockWithoutInnerBlocks = createSelector(\n\t( state, clientId ) => {\n\t\tif ( ! state.blocks.byClientId.has( clientId ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\t...state.blocks.byClientId.get( clientId ),\n\t\t\tattributes: getBlockAttributes( state, clientId ),\n\t\t};\n\t},\n\t( state, clientId ) => [\n\t\tstate.blocks.byClientId.get( clientId ),\n\t\tstate.blocks.attributes.get( clientId ),\n\t]\n);\n\n/**\n * Returns all block objects for the current post being edited as an array in\n * the order they appear in the post. Note that this will exclude child blocks\n * of nested inner block controllers.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Object[]} Post blocks.\n */\nexport function getBlocks( state, rootClientId ) {\n\tconst treeKey =\n\t\t! rootClientId || ! areInnerBlocksControlled( state, rootClientId )\n\t\t\t? rootClientId || ''\n\t\t\t: 'controlled||' + rootClientId;\n\treturn state.blocks.tree.get( treeKey )?.innerBlocks || EMPTY_ARRAY;\n}\n\n/**\n * Returns a stripped down block object containing only its client ID,\n * and its inner blocks' client IDs.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Client ID of the block to get.\n *\n * @return {Object} Client IDs of the post blocks.\n */\nexport const __unstableGetClientIdWithClientIdsTree = createSelector(\n\t( state, clientId ) => ( {\n\t\tclientId,\n\t\tinnerBlocks: __unstableGetClientIdsTree( state, clientId ),\n\t} ),\n\t( state ) => [ state.blocks.order ]\n);\n\n/**\n * Returns the block tree represented in the block-editor store from the\n * given root, consisting of stripped down block objects containing only\n * their client IDs, and their inner blocks' client IDs.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Object[]} Client IDs of the post blocks.\n */\nexport const __unstableGetClientIdsTree = createSelector(\n\t( state, rootClientId = '' ) =>\n\t\tgetBlockOrder( state, rootClientId ).map( ( clientId ) =>\n\t\t\t__unstableGetClientIdWithClientIdsTree( state, clientId )\n\t\t),\n\t( state ) => [ state.blocks.order ]\n);\n\n/**\n * Returns an array containing the clientIds of all descendants of the blocks\n * given. Returned ids are ordered first by the order of the ids given, then\n * by the order that they appear in the editor.\n *\n * @param {Object} state     Global application state.\n * @param {Array}  clientIds Array of blocks to inspect.\n *\n * @return {Array} ids of descendants.\n */\nexport const getClientIdsOfDescendants = createSelector(\n\t( state, clientIds ) => {\n\t\tconst collectedIds = [];\n\t\tfor ( const givenId of clientIds ) {\n\t\t\tfor ( const descendantId of getBlockOrder( state, givenId ) ) {\n\t\t\t\tcollectedIds.push(\n\t\t\t\t\tdescendantId,\n\t\t\t\t\t...getClientIdsOfDescendants( state, [ descendantId ] )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn collectedIds;\n\t},\n\t( state ) => [ state.blocks.order ]\n);\n\n/**\n * Returns an array containing the clientIds of the top-level blocks and\n * their descendants of any depth (for nested blocks). Ids are returned\n * in the same order that they appear in the editor.\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} ids of top-level and descendant blocks.\n */\nexport const getClientIdsWithDescendants = createSelector(\n\t( state ) => {\n\t\tconst collectedIds = [];\n\t\tfor ( const topLevelId of getBlockOrder( state ) ) {\n\t\t\tcollectedIds.push(\n\t\t\t\ttopLevelId,\n\t\t\t\t...getClientIdsOfDescendants( state, [ topLevelId ] )\n\t\t\t);\n\t\t}\n\t\treturn collectedIds;\n\t},\n\t( state ) => [ state.blocks.order ]\n);\n\n/**\n * Returns the total number of blocks, or the total number of blocks with a specific name in a post.\n * The number returned includes nested blocks.\n *\n * @param {Object}  state     Global application state.\n * @param {?string} blockName Optional block name, if specified only blocks of that type will be counted.\n *\n * @return {number} Number of blocks in the post, or number of blocks with name equal to blockName.\n */\nexport const getGlobalBlockCount = createSelector(\n\t( state, blockName ) => {\n\t\tconst clientIds = getClientIdsWithDescendants( state );\n\t\tif ( ! blockName ) {\n\t\t\treturn clientIds.length;\n\t\t}\n\t\treturn clientIds.reduce( ( accumulator, clientId ) => {\n\t\t\tconst block = state.blocks.byClientId.get( clientId );\n\t\t\treturn block.name === blockName ? accumulator + 1 : accumulator;\n\t\t}, 0 );\n\t},\n\t( state ) => [ state.blocks.order, state.blocks.byClientId ]\n);\n\n/**\n * Returns all global blocks that match a blockName. Results include nested blocks.\n *\n * @param {Object}  state     Global application state.\n * @param {?string} blockName Optional block name, if not specified, returns an empty array.\n *\n * @return {Array} Array of clientIds of blocks with name equal to blockName.\n */\nexport const __experimentalGetGlobalBlocksByName = createSelector(\n\t( state, blockName ) => {\n\t\tif ( ! blockName ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\t\tconst clientIds = getClientIdsWithDescendants( state );\n\t\tconst foundBlocks = clientIds.filter( ( clientId ) => {\n\t\t\tconst block = state.blocks.byClientId.get( clientId );\n\t\t\treturn block.name === blockName;\n\t\t} );\n\t\treturn foundBlocks.length > 0 ? foundBlocks : EMPTY_ARRAY;\n\t},\n\t( state ) => [ state.blocks.order, state.blocks.byClientId ]\n);\n\n/**\n * Given an array of block client IDs, returns the corresponding array of block\n * objects.\n *\n * @param {Object}   state     Editor state.\n * @param {string[]} clientIds Client IDs for which blocks are to be returned.\n *\n * @return {WPBlock[]} Block objects.\n */\nexport const getBlocksByClientId = createSelector(\n\t( state, clientIds ) =>\n\t\t( Array.isArray( clientIds ) ? clientIds : [ clientIds ] ).map(\n\t\t\t( clientId ) => getBlock( state, clientId )\n\t\t),\n\t( state, clientIds ) =>\n\t\t( Array.isArray( clientIds ) ? clientIds : [ clientIds ] ).map(\n\t\t\t( clientId ) => state.blocks.tree.get( clientId )\n\t\t)\n);\n\n/**\n * Given an array of block client IDs, returns the corresponding array of block\n * names.\n *\n * @param {Object}   state     Editor state.\n * @param {string[]} clientIds Client IDs for which block names are to be returned.\n *\n * @return {string[]} Block names.\n */\nexport const getBlockNamesByClientId = createSelector(\n\t( state, clientIds ) =>\n\t\tgetBlocksByClientId( state, clientIds )\n\t\t\t.filter( Boolean )\n\t\t\t.map( ( block ) => block.name ),\n\t( state, clientIds ) => getBlocksByClientId( state, clientIds )\n);\n\n/**\n * Returns the number of blocks currently present in the post.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {number} Number of blocks in the post.\n */\nexport function getBlockCount( state, rootClientId ) {\n\treturn getBlockOrder( state, rootClientId ).length;\n}\n\n/**\n * Returns the current selection start block client ID, attribute key and text\n * offset.\n *\n * @param {Object} state Block editor state.\n *\n * @return {WPBlockSelection} Selection start information.\n */\nexport function getSelectionStart( state ) {\n\treturn state.selection.selectionStart;\n}\n\n/**\n * Returns the current selection end block client ID, attribute key and text\n * offset.\n *\n * @param {Object} state Block editor state.\n *\n * @return {WPBlockSelection} Selection end information.\n */\nexport function getSelectionEnd( state ) {\n\treturn state.selection.selectionEnd;\n}\n\n/**\n * Returns the current block selection start. This value may be null, and it\n * may represent either a singular block selection or multi-selection start.\n * A selection is singular if its start and end match.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Client ID of block selection start.\n */\nexport function getBlockSelectionStart( state ) {\n\treturn state.selection.selectionStart.clientId;\n}\n\n/**\n * Returns the current block selection end. This value may be null, and it\n * may represent either a singular block selection or multi-selection end.\n * A selection is singular if its start and end match.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Client ID of block selection end.\n */\nexport function getBlockSelectionEnd( state ) {\n\treturn state.selection.selectionEnd.clientId;\n}\n\n/**\n * Returns the number of blocks currently selected in the post.\n *\n * @param {Object} state Global application state.\n *\n * @return {number} Number of blocks selected in the post.\n */\nexport function getSelectedBlockCount( state ) {\n\tconst multiSelectedBlockCount =\n\t\tgetMultiSelectedBlockClientIds( state ).length;\n\n\tif ( multiSelectedBlockCount ) {\n\t\treturn multiSelectedBlockCount;\n\t}\n\n\treturn state.selection.selectionStart.clientId ? 1 : 0;\n}\n\n/**\n * Returns true if there is a single selected block, or false otherwise.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether a single block is selected.\n */\nexport function hasSelectedBlock( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\treturn (\n\t\t!! selectionStart.clientId &&\n\t\tselectionStart.clientId === selectionEnd.clientId\n\t);\n}\n\n/**\n * Returns the currently selected block client ID, or null if there is no\n * selected block.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Selected block client ID.\n */\nexport function getSelectedBlockClientId( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\tconst { clientId } = selectionStart;\n\n\tif ( ! clientId || clientId !== selectionEnd.clientId ) {\n\t\treturn null;\n\t}\n\n\treturn clientId;\n}\n\n/**\n * Returns the currently selected block, or null if there is no selected block.\n *\n * @param {Object} state Global application state.\n *\n * @return {?Object} Selected block.\n */\nexport function getSelectedBlock( state ) {\n\tconst clientId = getSelectedBlockClientId( state );\n\treturn clientId ? getBlock( state, clientId ) : null;\n}\n\n/**\n * Given a block client ID, returns the root block from which the block is\n * nested, an empty string for top-level blocks, or null if the block does not\n * exist.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find root client ID.\n *\n * @return {?string} Root client ID, if exists\n */\nexport function getBlockRootClientId( state, clientId ) {\n\treturn state.blocks.parents.has( clientId )\n\t\t? state.blocks.parents.get( clientId )\n\t\t: null;\n}\n\n/**\n * Given a block client ID, returns the list of all its parents from top to bottom.\n *\n * @param {Object}  state     Editor state.\n * @param {string}  clientId  Block from which to find root client ID.\n * @param {boolean} ascending Order results from bottom to top (true) or top to bottom (false).\n *\n * @return {Array} ClientIDs of the parent blocks.\n */\nexport const getBlockParents = createSelector(\n\t( state, clientId, ascending = false ) => {\n\t\tconst parents = [];\n\t\tlet current = clientId;\n\t\twhile ( !! state.blocks.parents.get( current ) ) {\n\t\t\tcurrent = state.blocks.parents.get( current );\n\t\t\tparents.push( current );\n\t\t}\n\n\t\tif ( ! parents.length ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\treturn ascending ? parents : parents.reverse();\n\t},\n\t( state ) => [ state.blocks.parents ]\n);\n\n/**\n * Given a block client ID and a block name, returns the list of all its parents\n * from top to bottom, filtered by the given name(s). For example, if passed\n * 'core/group' as the blockName, it will only return parents which are group\n * blocks. If passed `[ 'core/group', 'core/cover']`, as the blockName, it will\n * return parents which are group blocks and parents which are cover blocks.\n *\n * @param {Object}          state     Editor state.\n * @param {string}          clientId  Block from which to find root client ID.\n * @param {string|string[]} blockName Block name(s) to filter.\n * @param {boolean}         ascending Order results from bottom to top (true) or top to bottom (false).\n *\n * @return {Array} ClientIDs of the parent blocks.\n */\nexport const getBlockParentsByBlockName = createSelector(\n\t( state, clientId, blockName, ascending = false ) => {\n\t\tconst parents = getBlockParents( state, clientId, ascending );\n\t\treturn parents\n\t\t\t.map( ( id ) => ( {\n\t\t\t\tid,\n\t\t\t\tname: getBlockName( state, id ),\n\t\t\t} ) )\n\t\t\t.filter( ( { name } ) => {\n\t\t\t\tif ( Array.isArray( blockName ) ) {\n\t\t\t\t\treturn blockName.includes( name );\n\t\t\t\t}\n\t\t\t\treturn name === blockName;\n\t\t\t} )\n\t\t\t.map( ( { id } ) => id );\n\t},\n\t( state ) => [ state.blocks.parents ]\n);\n/**\n * Given a block client ID, returns the root of the hierarchy from which the block is nested, return the block itself for root level blocks.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find root client ID.\n *\n * @return {string} Root client ID\n */\nexport function getBlockHierarchyRootClientId( state, clientId ) {\n\tlet current = clientId;\n\tlet parent;\n\tdo {\n\t\tparent = current;\n\t\tcurrent = state.blocks.parents.get( current );\n\t} while ( current );\n\treturn parent;\n}\n\n/**\n * Given a block client ID, returns the lowest common ancestor with selected client ID.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find common ancestor client ID.\n *\n * @return {string} Common ancestor client ID or undefined\n */\nexport function getLowestCommonAncestorWithSelectedBlock( state, clientId ) {\n\tconst selectedId = getSelectedBlockClientId( state );\n\tconst clientParents = [ ...getBlockParents( state, clientId ), clientId ];\n\tconst selectedParents = [\n\t\t...getBlockParents( state, selectedId ),\n\t\tselectedId,\n\t];\n\n\tlet lowestCommonAncestor;\n\n\tconst maxDepth = Math.min( clientParents.length, selectedParents.length );\n\tfor ( let index = 0; index < maxDepth; index++ ) {\n\t\tif ( clientParents[ index ] === selectedParents[ index ] ) {\n\t\t\tlowestCommonAncestor = clientParents[ index ];\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn lowestCommonAncestor;\n}\n\n/**\n * Returns the client ID of the block adjacent one at the given reference\n * startClientId and modifier directionality. Defaults start startClientId to\n * the selected block, and direction as next block. Returns null if there is no\n * adjacent block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n * @param {?number} modifier      Directionality multiplier (1 next, -1\n *                                previous).\n *\n * @return {?string} Return the client ID of the block, or null if none exists.\n */\nexport function getAdjacentBlockClientId( state, startClientId, modifier = 1 ) {\n\t// Default to selected block.\n\tif ( startClientId === undefined ) {\n\t\tstartClientId = getSelectedBlockClientId( state );\n\t}\n\n\t// Try multi-selection starting at extent based on modifier.\n\tif ( startClientId === undefined ) {\n\t\tif ( modifier < 0 ) {\n\t\t\tstartClientId = getFirstMultiSelectedBlockClientId( state );\n\t\t} else {\n\t\t\tstartClientId = getLastMultiSelectedBlockClientId( state );\n\t\t}\n\t}\n\n\t// Validate working start client ID.\n\tif ( ! startClientId ) {\n\t\treturn null;\n\t}\n\n\t// Retrieve start block root client ID, being careful to allow the falsey\n\t// empty string top-level root by explicitly testing against null.\n\tconst rootClientId = getBlockRootClientId( state, startClientId );\n\tif ( rootClientId === null ) {\n\t\treturn null;\n\t}\n\n\tconst { order } = state.blocks;\n\tconst orderSet = order.get( rootClientId );\n\tconst index = orderSet.indexOf( startClientId );\n\tconst nextIndex = index + 1 * modifier;\n\n\t// Block was first in set and we're attempting to get previous.\n\tif ( nextIndex < 0 ) {\n\t\treturn null;\n\t}\n\n\t// Block was last in set and we're attempting to get next.\n\tif ( nextIndex === orderSet.length ) {\n\t\treturn null;\n\t}\n\n\t// Assume incremented index is within the set.\n\treturn orderSet[ nextIndex ];\n}\n\n/**\n * Returns the previous block's client ID from the given reference start ID.\n * Defaults start to the selected block. Returns null if there is no previous\n * block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n *\n * @return {?string} Adjacent block's client ID, or null if none exists.\n */\nexport function getPreviousBlockClientId( state, startClientId ) {\n\treturn getAdjacentBlockClientId( state, startClientId, -1 );\n}\n\n/**\n * Returns the next block's client ID from the given reference start ID.\n * Defaults start to the selected block. Returns null if there is no next\n * block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n *\n * @return {?string} Adjacent block's client ID, or null if none exists.\n */\nexport function getNextBlockClientId( state, startClientId ) {\n\treturn getAdjacentBlockClientId( state, startClientId, 1 );\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns the initial caret position for the selected block.\n * This position is to used to position the caret properly when the selected block changes.\n * If the current block is not a RichText, having initial position set to 0 means \"focus block\"\n *\n * @param {Object} state Global application state.\n *\n * @return {0|-1|null} Initial position.\n */\nexport function getSelectedBlocksInitialCaretPosition( state ) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn state.initialPosition;\n}\n\n/**\n * Returns the current selection set of block client IDs (multiselection or single selection).\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block client IDs.\n */\nexport const getSelectedBlockClientIds = createSelector(\n\t( state ) => {\n\t\tconst { selectionStart, selectionEnd } = state.selection;\n\n\t\tif ( ! selectionStart.clientId || ! selectionEnd.clientId ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\t\treturn [ selectionStart.clientId ];\n\t\t}\n\n\t\t// Retrieve root client ID to aid in retrieving relevant nested block\n\t\t// order, being careful to allow the falsey empty string top-level root\n\t\t// by explicitly testing against null.\n\t\tconst rootClientId = getBlockRootClientId(\n\t\t\tstate,\n\t\t\tselectionStart.clientId\n\t\t);\n\n\t\tif ( rootClientId === null ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\tconst blockOrder = getBlockOrder( state, rootClientId );\n\t\tconst startIndex = blockOrder.indexOf( selectionStart.clientId );\n\t\tconst endIndex = blockOrder.indexOf( selectionEnd.clientId );\n\n\t\tif ( startIndex > endIndex ) {\n\t\t\treturn blockOrder.slice( endIndex, startIndex + 1 );\n\t\t}\n\n\t\treturn blockOrder.slice( startIndex, endIndex + 1 );\n\t},\n\t( state ) => [\n\t\tstate.blocks.order,\n\t\tstate.selection.selectionStart.clientId,\n\t\tstate.selection.selectionEnd.clientId,\n\t]\n);\n\n/**\n * Returns the current multi-selection set of block client IDs, or an empty\n * array if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block client IDs.\n */\nexport function getMultiSelectedBlockClientIds( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\treturn getSelectedBlockClientIds( state );\n}\n\n/**\n * Returns the current multi-selection set of blocks, or an empty array if\n * there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block objects.\n */\nexport const getMultiSelectedBlocks = createSelector(\n\t( state ) => {\n\t\tconst multiSelectedBlockClientIds =\n\t\t\tgetMultiSelectedBlockClientIds( state );\n\t\tif ( ! multiSelectedBlockClientIds.length ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\treturn multiSelectedBlockClientIds.map( ( clientId ) =>\n\t\t\tgetBlock( state, clientId )\n\t\t);\n\t},\n\t( state ) => [\n\t\t...getSelectedBlockClientIds.getDependants( state ),\n\t\tstate.blocks.byClientId,\n\t\tstate.blocks.order,\n\t\tstate.blocks.attributes,\n\t]\n);\n\n/**\n * Returns the client ID of the first block in the multi-selection set, or null\n * if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} First block client ID in the multi-selection set.\n */\nexport function getFirstMultiSelectedBlockClientId( state ) {\n\treturn getMultiSelectedBlockClientIds( state )[ 0 ] || null;\n}\n\n/**\n * Returns the client ID of the last block in the multi-selection set, or null\n * if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Last block client ID in the multi-selection set.\n */\nexport function getLastMultiSelectedBlockClientId( state ) {\n\tconst selectedClientIds = getMultiSelectedBlockClientIds( state );\n\treturn selectedClientIds[ selectedClientIds.length - 1 ] || null;\n}\n\n/**\n * Returns true if a multi-selection exists, and the block corresponding to the\n * specified client ID is the first block of the multi-selection set, or false\n * otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is first in multi-selection.\n */\nexport function isFirstMultiSelectedBlock( state, clientId ) {\n\treturn getFirstMultiSelectedBlockClientId( state ) === clientId;\n}\n\n/**\n * Returns true if the client ID occurs within the block multi-selection, or\n * false otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is in multi-selection set.\n */\nexport function isBlockMultiSelected( state, clientId ) {\n\treturn getMultiSelectedBlockClientIds( state ).indexOf( clientId ) !== -1;\n}\n\n/**\n * Returns true if an ancestor of the block is multi-selected, or false\n * otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether an ancestor of the block is in multi-selection\n *                   set.\n */\nexport const isAncestorMultiSelected = createSelector(\n\t( state, clientId ) => {\n\t\tlet ancestorClientId = clientId;\n\t\tlet isMultiSelected = false;\n\t\twhile ( ancestorClientId && ! isMultiSelected ) {\n\t\t\tancestorClientId = getBlockRootClientId( state, ancestorClientId );\n\t\t\tisMultiSelected = isBlockMultiSelected( state, ancestorClientId );\n\t\t}\n\t\treturn isMultiSelected;\n\t},\n\t( state ) => [\n\t\tstate.blocks.order,\n\t\tstate.selection.selectionStart.clientId,\n\t\tstate.selection.selectionEnd.clientId,\n\t]\n);\n\n/**\n * Returns the client ID of the block which begins the multi-selection set, or\n * null if there is no multi-selection.\n *\n * This is not necessarily the first client ID in the selection.\n *\n * @see getFirstMultiSelectedBlockClientId\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Client ID of block beginning multi-selection.\n */\nexport function getMultiSelectedBlocksStartClientId( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\treturn null;\n\t}\n\n\treturn selectionStart.clientId || null;\n}\n\n/**\n * Returns the client ID of the block which ends the multi-selection set, or\n * null if there is no multi-selection.\n *\n * This is not necessarily the last client ID in the selection.\n *\n * @see getLastMultiSelectedBlockClientId\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Client ID of block ending multi-selection.\n */\nexport function getMultiSelectedBlocksEndClientId( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\treturn null;\n\t}\n\n\treturn selectionEnd.clientId || null;\n}\n\n/**\n * Returns true if the selection is not partial.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether the selection is mergeable.\n */\nexport function __unstableIsFullySelected( state ) {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\treturn (\n\t\t! selectionAnchor.attributeKey &&\n\t\t! selectionFocus.attributeKey &&\n\t\ttypeof selectionAnchor.offset === 'undefined' &&\n\t\ttypeof selectionFocus.offset === 'undefined'\n\t);\n}\n\n/**\n * Returns true if the selection is collapsed.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether the selection is collapsed.\n */\nexport function __unstableIsSelectionCollapsed( state ) {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\treturn (\n\t\t!! selectionAnchor &&\n\t\t!! selectionFocus &&\n\t\tselectionAnchor.clientId === selectionFocus.clientId &&\n\t\tselectionAnchor.attributeKey === selectionFocus.attributeKey &&\n\t\tselectionAnchor.offset === selectionFocus.offset\n\t);\n}\n\nexport function __unstableSelectionHasUnmergeableBlock( state ) {\n\treturn getSelectedBlockClientIds( state ).some( ( clientId ) => {\n\t\tconst blockName = getBlockName( state, clientId );\n\t\tconst blockType = getBlockType( blockName );\n\t\treturn ! blockType.merge;\n\t} );\n}\n\n/**\n * Check whether the selection is mergeable.\n *\n * @param {Object}  state     Editor state.\n * @param {boolean} isForward Whether to merge forwards.\n *\n * @return {boolean} Whether the selection is mergeable.\n */\nexport function __unstableIsSelectionMergeable( state, isForward ) {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\n\t// It's not mergeable if the start and end are within the same block.\n\tif ( selectionAnchor.clientId === selectionFocus.clientId ) return false;\n\n\t// It's not mergeable if there's no rich text selection.\n\tif (\n\t\t! selectionAnchor.attributeKey ||\n\t\t! selectionFocus.attributeKey ||\n\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\ttypeof selectionFocus.offset === 'undefined'\n\t)\n\t\treturn false;\n\n\tconst anchorRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionAnchor.clientId\n\t);\n\tconst focusRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionFocus.clientId\n\t);\n\n\t// It's not mergeable if the selection doesn't start and end in the same\n\t// block list. Maybe in the future it should be allowed.\n\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\treturn false;\n\t}\n\n\tconst blockOrder = getBlockOrder( state, anchorRootClientId );\n\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t// Reassign selection start and end based on order.\n\tlet selectionStart, selectionEnd;\n\n\tif ( anchorIndex > focusIndex ) {\n\t\tselectionStart = selectionFocus;\n\t\tselectionEnd = selectionAnchor;\n\t} else {\n\t\tselectionStart = selectionAnchor;\n\t\tselectionEnd = selectionFocus;\n\t}\n\n\tconst targetBlockClientId = isForward\n\t\t? selectionEnd.clientId\n\t\t: selectionStart.clientId;\n\tconst blockToMergeClientId = isForward\n\t\t? selectionStart.clientId\n\t\t: selectionEnd.clientId;\n\n\tconst targetBlockName = getBlockName( state, targetBlockClientId );\n\tconst targetBlockType = getBlockType( targetBlockName );\n\n\tif ( ! targetBlockType.merge ) return false;\n\n\tconst blockToMerge = getBlock( state, blockToMergeClientId );\n\n\t// It's mergeable if the blocks are of the same type.\n\tif ( blockToMerge.name === targetBlockName ) return true;\n\n\t// If the blocks are of a different type, try to transform the block being\n\t// merged into the same type of block.\n\tconst blocksToMerge = switchToBlockType( blockToMerge, targetBlockName );\n\n\treturn blocksToMerge && blocksToMerge.length;\n}\n\n/**\n * Get partial selected blocks with their content updated\n * based on the selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object[]} Updated partial selected blocks.\n */\nexport const __unstableGetSelectedBlocksWithPartialSelection = ( state ) => {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\n\tif ( selectionAnchor.clientId === selectionFocus.clientId ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\t// Can't split if the selection is not set.\n\tif (\n\t\t! selectionAnchor.attributeKey ||\n\t\t! selectionFocus.attributeKey ||\n\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\ttypeof selectionFocus.offset === 'undefined'\n\t) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\tconst anchorRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionAnchor.clientId\n\t);\n\tconst focusRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionFocus.clientId\n\t);\n\n\t// It's not splittable if the selection doesn't start and end in the same\n\t// block list. Maybe in the future it should be allowed.\n\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\tconst blockOrder = getBlockOrder( state, anchorRootClientId );\n\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t// Reassign selection start and end based on order.\n\tconst [ selectionStart, selectionEnd ] =\n\t\tanchorIndex > focusIndex\n\t\t\t? [ selectionFocus, selectionAnchor ]\n\t\t\t: [ selectionAnchor, selectionFocus ];\n\n\tconst blockA = getBlock( state, selectionStart.clientId );\n\tconst blockAType = getBlockType( blockA.name );\n\n\tconst blockB = getBlock( state, selectionEnd.clientId );\n\tconst blockBType = getBlockType( blockB.name );\n\n\tconst htmlA = blockA.attributes[ selectionStart.attributeKey ];\n\tconst htmlB = blockB.attributes[ selectionEnd.attributeKey ];\n\n\tconst attributeDefinitionA =\n\t\tblockAType.attributes[ selectionStart.attributeKey ];\n\tconst attributeDefinitionB =\n\t\tblockBType.attributes[ selectionEnd.attributeKey ];\n\n\tlet valueA = create( {\n\t\thtml: htmlA,\n\t\t...mapRichTextSettings( attributeDefinitionA ),\n\t} );\n\tlet valueB = create( {\n\t\thtml: htmlB,\n\t\t...mapRichTextSettings( attributeDefinitionB ),\n\t} );\n\n\tvalueA = remove( valueA, 0, selectionStart.offset );\n\tvalueB = remove( valueB, selectionEnd.offset, valueB.text.length );\n\n\treturn [\n\t\t{\n\t\t\t...blockA,\n\t\t\tattributes: {\n\t\t\t\t...blockA.attributes,\n\t\t\t\t[ selectionStart.attributeKey ]: toHTMLString( {\n\t\t\t\t\tvalue: valueA,\n\t\t\t\t\t...mapRichTextSettings( attributeDefinitionA ),\n\t\t\t\t} ),\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\t...blockB,\n\t\t\tattributes: {\n\t\t\t\t...blockB.attributes,\n\t\t\t\t[ selectionEnd.attributeKey ]: toHTMLString( {\n\t\t\t\t\tvalue: valueB,\n\t\t\t\t\t...mapRichTextSettings( attributeDefinitionB ),\n\t\t\t\t} ),\n\t\t\t},\n\t\t},\n\t];\n};\n\n/**\n * Returns an array containing all block client IDs in the editor in the order\n * they appear. Optionally accepts a root client ID of the block list for which\n * the order should be returned, defaulting to the top-level block order.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Array} Ordered client IDs of editor blocks.\n */\nexport function getBlockOrder( state, rootClientId ) {\n\treturn state.blocks.order.get( rootClientId || '' ) || EMPTY_ARRAY;\n}\n\n/**\n * Returns the index at which the block corresponding to the specified client\n * ID occurs within the block order, or `-1` if the block does not exist.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {number} Index at which block exists in order.\n */\nexport function getBlockIndex( state, clientId ) {\n\tconst rootClientId = getBlockRootClientId( state, clientId );\n\treturn getBlockOrder( state, rootClientId ).indexOf( clientId );\n}\n\n/**\n * Returns true if the block corresponding to the specified client ID is\n * currently selected and no multi-selection exists, or false otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is selected and multi-selection exists.\n */\nexport function isBlockSelected( state, clientId ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId !== selectionEnd.clientId ) {\n\t\treturn false;\n\t}\n\n\treturn selectionStart.clientId === clientId;\n}\n\n/**\n * Returns true if one of the block's inner blocks is selected.\n *\n * @param {Object}  state    Editor state.\n * @param {string}  clientId Block client ID.\n * @param {boolean} deep     Perform a deep check.\n *\n * @return {boolean} Whether the block has an inner block selected\n */\nexport function hasSelectedInnerBlock( state, clientId, deep = false ) {\n\treturn getBlockOrder( state, clientId ).some(\n\t\t( innerClientId ) =>\n\t\t\tisBlockSelected( state, innerClientId ) ||\n\t\t\tisBlockMultiSelected( state, innerClientId ) ||\n\t\t\t( deep && hasSelectedInnerBlock( state, innerClientId, deep ) )\n\t);\n}\n\n/**\n * Returns true if one of the block's inner blocks is dragged.\n *\n * @param {Object}  state    Editor state.\n * @param {string}  clientId Block client ID.\n * @param {boolean} deep     Perform a deep check.\n *\n * @return {boolean} Whether the block has an inner block dragged\n */\nexport function hasDraggedInnerBlock( state, clientId, deep = false ) {\n\treturn getBlockOrder( state, clientId ).some(\n\t\t( innerClientId ) =>\n\t\t\tisBlockBeingDragged( state, innerClientId ) ||\n\t\t\t( deep && hasDraggedInnerBlock( state, innerClientId, deep ) )\n\t);\n}\n\n/**\n * Returns true if the block corresponding to the specified client ID is\n * currently selected but isn't the last of the selected blocks. Here \"last\"\n * refers to the block sequence in the document, _not_ the sequence of\n * multi-selection, which is why `state.selectionEnd` isn't used.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is selected and not the last in the\n *                   selection.\n */\nexport function isBlockWithinSelection( state, clientId ) {\n\tif ( ! clientId ) {\n\t\treturn false;\n\t}\n\n\tconst clientIds = getMultiSelectedBlockClientIds( state );\n\tconst index = clientIds.indexOf( clientId );\n\treturn index > -1 && index < clientIds.length - 1;\n}\n\n/**\n * Returns true if a multi-selection has been made, or false otherwise.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether multi-selection has been made.\n */\nexport function hasMultiSelection( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\treturn selectionStart.clientId !== selectionEnd.clientId;\n}\n\n/**\n * Whether in the process of multi-selecting or not. This flag is only true\n * while the multi-selection is being selected (by mouse move), and is false\n * once the multi-selection has been settled.\n *\n * @see hasMultiSelection\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} True if multi-selecting, false if not.\n */\nexport function isMultiSelecting( state ) {\n\treturn state.isMultiSelecting;\n}\n\n/**\n * Selector that returns if multi-selection is enabled or not.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} True if it should be possible to multi-select blocks, false if multi-selection is disabled.\n */\nexport function isSelectionEnabled( state ) {\n\treturn state.isSelectionEnabled;\n}\n\n/**\n * Returns the block's editing mode, defaulting to \"visual\" if not explicitly\n * assigned.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Block editing mode.\n */\nexport function getBlockMode( state, clientId ) {\n\treturn state.blocksMode[ clientId ] || 'visual';\n}\n\n/**\n * Returns true if the user is typing, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether user is typing.\n */\nexport function isTyping( state ) {\n\treturn state.isTyping;\n}\n\n/**\n * Returns true if the user is dragging blocks, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether user is dragging blocks.\n */\nexport function isDraggingBlocks( state ) {\n\treturn !! state.draggedBlocks.length;\n}\n\n/**\n * Returns the client ids of any blocks being directly dragged.\n *\n * This does not include children of a parent being dragged.\n *\n * @param {Object} state Global application state.\n *\n * @return {string[]} Array of dragged block client ids.\n */\nexport function getDraggedBlockClientIds( state ) {\n\treturn state.draggedBlocks;\n}\n\n/**\n * Returns whether the block is being dragged.\n *\n * Only returns true if the block is being directly dragged,\n * not if the block is a child of a parent being dragged.\n * See `isAncestorBeingDragged` for child blocks.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client id for block to check.\n *\n * @return {boolean} Whether the block is being dragged.\n */\nexport function isBlockBeingDragged( state, clientId ) {\n\treturn state.draggedBlocks.includes( clientId );\n}\n\n/**\n * Returns whether a parent/ancestor of the block is being dragged.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client id for block to check.\n *\n * @return {boolean} Whether the block's ancestor is being dragged.\n */\nexport function isAncestorBeingDragged( state, clientId ) {\n\t// Return early if no blocks are being dragged rather than\n\t// the more expensive check for parents.\n\tif ( ! isDraggingBlocks( state ) ) {\n\t\treturn false;\n\t}\n\n\tconst parents = getBlockParents( state, clientId );\n\treturn parents.some( ( parentClientId ) =>\n\t\tisBlockBeingDragged( state, parentClientId )\n\t);\n}\n\n/**\n * Returns true if the caret is within formatted text, or false otherwise.\n *\n * @deprecated\n *\n * @return {boolean} Whether the caret is within formatted text.\n */\nexport function isCaretWithinFormattedText() {\n\tdeprecated(\n\t\t'wp.data.select( \"core/block-editor\" ).isCaretWithinFormattedText',\n\t\t{\n\t\t\tsince: '6.1',\n\t\t\tversion: '6.3',\n\t\t}\n\t);\n\n\treturn false;\n}\n\n/**\n * Returns the insertion point, the index at which the new inserted block would\n * be placed. Defaults to the last index.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} Insertion point object with `rootClientId`, `index`.\n */\nexport const getBlockInsertionPoint = createSelector(\n\t( state ) => {\n\t\tlet rootClientId, index;\n\n\t\tconst {\n\t\t\tinsertionPoint,\n\t\t\tselection: { selectionEnd },\n\t\t} = state;\n\t\tif ( insertionPoint !== null ) {\n\t\t\treturn insertionPoint;\n\t\t}\n\n\t\tconst { clientId } = selectionEnd;\n\n\t\tif ( clientId ) {\n\t\t\trootClientId = getBlockRootClientId( state, clientId ) || undefined;\n\t\t\tindex = getBlockIndex( state, selectionEnd.clientId ) + 1;\n\t\t} else {\n\t\t\tindex = getBlockOrder( state ).length;\n\t\t}\n\n\t\treturn { rootClientId, index };\n\t},\n\t( state ) => [\n\t\tstate.insertionPoint,\n\t\tstate.selection.selectionEnd.clientId,\n\t\tstate.blocks.parents,\n\t\tstate.blocks.order,\n\t]\n);\n\n/**\n * Returns true if we should show the block insertion point.\n *\n * @param {Object} state Global application state.\n *\n * @return {?boolean} Whether the insertion point is visible or not.\n */\nexport function isBlockInsertionPointVisible( state ) {\n\treturn state.insertionPoint !== null;\n}\n\n/**\n * Returns whether the blocks matches the template or not.\n *\n * @param {boolean} state\n * @return {?boolean} Whether the template is valid or not.\n */\nexport function isValidTemplate( state ) {\n\treturn state.template.isValid;\n}\n\n/**\n * Returns the defined block template\n *\n * @param {boolean} state\n *\n * @return {?Array} Block Template.\n */\nexport function getTemplate( state ) {\n\treturn state.settings.template;\n}\n\n/**\n * Returns the defined block template lock. Optionally accepts a root block\n * client ID as context, otherwise defaulting to the global context.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional block root client ID.\n *\n * @return {string|false} Block Template Lock\n */\nexport function getTemplateLock( state, rootClientId ) {\n\tif ( ! rootClientId ) {\n\t\treturn state.settings.templateLock ?? false;\n\t}\n\n\treturn getBlockListSettings( state, rootClientId )?.templateLock ?? false;\n}\n\nconst checkAllowList = ( list, item, defaultResult = null ) => {\n\tif ( typeof list === 'boolean' ) {\n\t\treturn list;\n\t}\n\tif ( Array.isArray( list ) ) {\n\t\t// TODO: when there is a canonical way to detect that we are editing a post\n\t\t// the following check should be changed to something like:\n\t\t// if ( list.includes( 'core/post-content' ) && getEditorMode() === 'post-content' && item === null )\n\t\tif ( list.includes( 'core/post-content' ) && item === null ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn list.includes( item );\n\t}\n\treturn defaultResult;\n};\n\n/**\n * Determines if the given block type is allowed to be inserted into the block list.\n * This function is not exported and not memoized because using a memoized selector\n * inside another memoized selector is just a waste of time.\n *\n * @param {Object}        state        Editor state.\n * @param {string|Object} blockName    The block type object, e.g., the response\n *                                     from the block directory; or a string name of\n *                                     an installed block type, e.g.' core/paragraph'.\n * @param {?string}       rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block type is allowed to be inserted.\n */\nconst canInsertBlockTypeUnmemoized = (\n\tstate,\n\tblockName,\n\trootClientId = null\n) => {\n\tlet blockType;\n\tif ( blockName && 'object' === typeof blockName ) {\n\t\tblockType = blockName;\n\t\tblockName = blockType.name;\n\t} else {\n\t\tblockType = getBlockType( blockName );\n\t}\n\tif ( ! blockType ) {\n\t\treturn false;\n\t}\n\n\tconst { allowedBlockTypes } = getSettings( state );\n\n\tconst isBlockAllowedInEditor = checkAllowList(\n\t\tallowedBlockTypes,\n\t\tblockName,\n\t\ttrue\n\t);\n\tif ( ! isBlockAllowedInEditor ) {\n\t\treturn false;\n\t}\n\n\tconst isLocked = !! getTemplateLock( state, rootClientId );\n\tif ( isLocked ) {\n\t\treturn false;\n\t}\n\n\tif ( getBlockEditingMode( state, rootClientId ?? '' ) === 'disabled' ) {\n\t\treturn false;\n\t}\n\n\tconst parentBlockListSettings = getBlockListSettings( state, rootClientId );\n\n\t// The parent block doesn't have settings indicating it doesn't support\n\t// inner blocks, return false.\n\tif ( rootClientId && parentBlockListSettings === undefined ) {\n\t\treturn false;\n\t}\n\n\tconst parentAllowedBlocks = parentBlockListSettings?.allowedBlocks;\n\tconst hasParentAllowedBlock = checkAllowList(\n\t\tparentAllowedBlocks,\n\t\tblockName\n\t);\n\n\tconst blockAllowedParentBlocks = blockType.parent;\n\tconst parentName = getBlockName( state, rootClientId );\n\tconst hasBlockAllowedParent = checkAllowList(\n\t\tblockAllowedParentBlocks,\n\t\tparentName\n\t);\n\n\tlet hasBlockAllowedAncestor = true;\n\tconst blockAllowedAncestorBlocks = blockType.ancestor;\n\tif ( blockAllowedAncestorBlocks ) {\n\t\tconst ancestors = [\n\t\t\trootClientId,\n\t\t\t...getBlockParents( state, rootClientId ),\n\t\t];\n\n\t\thasBlockAllowedAncestor = ancestors.some( ( ancestorClientId ) =>\n\t\t\tcheckAllowList(\n\t\t\t\tblockAllowedAncestorBlocks,\n\t\t\t\tgetBlockName( state, ancestorClientId )\n\t\t\t)\n\t\t);\n\t}\n\n\tconst canInsert =\n\t\thasBlockAllowedAncestor &&\n\t\t( ( hasParentAllowedBlock === null &&\n\t\t\thasBlockAllowedParent === null ) ||\n\t\t\thasParentAllowedBlock === true ||\n\t\t\thasBlockAllowedParent === true );\n\n\tif ( ! canInsert ) {\n\t\treturn canInsert;\n\t}\n\n\t/**\n\t * This filter is an ad-hoc solution to prevent adding template parts inside post content.\n\t * Conceptually, having a filter inside a selector is bad pattern so this code will be\n\t * replaced by a declarative API that doesn't the following drawbacks:\n\t *\n\t * Filters are not reactive: Upon switching between \"template mode\" and non \"template mode\",\n\t * the filter and selector won't necessarily be executed again. For now, it doesn't matter much\n\t * because you can't switch between the two modes while the inserter stays open.\n\t *\n\t * Filters are global: Once they're defined, they will affect all editor instances and all registries.\n\t * An ideal API would only affect specific editor instances.\n\t */\n\treturn applyFilters(\n\t\t'blockEditor.__unstableCanInsertBlockType',\n\t\tcanInsert,\n\t\tblockType,\n\t\trootClientId,\n\t\t{\n\t\t\t// Pass bound selectors of the current registry. If we're in a nested\n\t\t\t// context, the data will differ from the one selected from the root\n\t\t\t// registry.\n\t\t\tgetBlock: getBlock.bind( null, state ),\n\t\t\tgetBlockParentsByBlockName: getBlockParentsByBlockName.bind(\n\t\t\t\tnull,\n\t\t\t\tstate\n\t\t\t),\n\t\t}\n\t);\n};\n\n/**\n * Determines if the given block type is allowed to be inserted into the block list.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  blockName    The name of the block type, e.g.' core/paragraph'.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block type is allowed to be inserted.\n */\nexport const canInsertBlockType = createSelector(\n\tcanInsertBlockTypeUnmemoized,\n\t( state, blockName, rootClientId ) => [\n\t\tstate.blockListSettings[ rootClientId ],\n\t\tstate.blocks.byClientId.get( rootClientId ),\n\t\tstate.settings.allowedBlockTypes,\n\t\tstate.settings.templateLock,\n\t\tstate.blockEditingModes,\n\t]\n);\n\n/**\n * Determines if the given blocks are allowed to be inserted into the block\n * list.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientIds    The block client IDs to be inserted.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given blocks are allowed to be inserted.\n */\nexport function canInsertBlocks( state, clientIds, rootClientId = null ) {\n\treturn clientIds.every( ( id ) =>\n\t\tcanInsertBlockType( state, getBlockName( state, id ), rootClientId )\n\t);\n}\n\n/**\n * Determines if the given block is allowed to be deleted.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientId     The block client Id.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block is allowed to be removed.\n */\nexport function canRemoveBlock( state, clientId, rootClientId = null ) {\n\tconst attributes = getBlockAttributes( state, clientId );\n\tif ( attributes === null ) {\n\t\treturn true;\n\t}\n\tif ( attributes.lock?.remove ) {\n\t\treturn false;\n\t}\n\tif ( getTemplateLock( state, rootClientId ) ) {\n\t\treturn false;\n\t}\n\tif ( getBlockEditingMode( state, rootClientId ) === 'disabled' ) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n/**\n * Determines if the given blocks are allowed to be removed.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientIds    The block client IDs to be removed.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given blocks are allowed to be removed.\n */\nexport function canRemoveBlocks( state, clientIds, rootClientId = null ) {\n\treturn clientIds.every( ( clientId ) =>\n\t\tcanRemoveBlock( state, clientId, rootClientId )\n\t);\n}\n\n/**\n * Determines if the given block is allowed to be moved.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientId     The block client Id.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean | undefined} Whether the given block is allowed to be moved.\n */\nexport function canMoveBlock( state, clientId, rootClientId = null ) {\n\tconst attributes = getBlockAttributes( state, clientId );\n\tif ( attributes === null ) {\n\t\treturn;\n\t}\n\tif ( attributes.lock?.move ) {\n\t\treturn false;\n\t}\n\tif ( getTemplateLock( state, rootClientId ) === 'all' ) {\n\t\treturn false;\n\t}\n\tif ( getBlockEditingMode( state, rootClientId ) === 'disabled' ) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n/**\n * Determines if the given blocks are allowed to be moved.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientIds    The block client IDs to be moved.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given blocks are allowed to be moved.\n */\nexport function canMoveBlocks( state, clientIds, rootClientId = null ) {\n\treturn clientIds.every( ( clientId ) =>\n\t\tcanMoveBlock( state, clientId, rootClientId )\n\t);\n}\n\n/**\n * Determines if the given block is allowed to be edited.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId The block client Id.\n *\n * @return {boolean} Whether the given block is allowed to be edited.\n */\nexport function canEditBlock( state, clientId ) {\n\tconst attributes = getBlockAttributes( state, clientId );\n\tif ( attributes === null ) {\n\t\treturn true;\n\t}\n\n\tconst { lock } = attributes;\n\n\t// When the edit is true, we cannot edit the block.\n\treturn ! lock?.edit;\n}\n\n/**\n * Determines if the given block type can be locked/unlocked by a user.\n *\n * @param {Object}          state      Editor state.\n * @param {(string|Object)} nameOrType Block name or type object.\n *\n * @return {boolean} Whether a given block type can be locked/unlocked.\n */\nexport function canLockBlockType( state, nameOrType ) {\n\tif ( ! hasBlockSupport( nameOrType, 'lock', true ) ) {\n\t\treturn false;\n\t}\n\n\t// Use block editor settings as the default value.\n\treturn !! state.settings?.canLockBlocks;\n}\n\n/**\n * Returns information about how recently and frequently a block has been inserted.\n *\n * @param {Object} state Global application state.\n * @param {string} id    A string which identifies the insert, e.g. 'core/block/12'\n *\n * @return {?{ time: number, count: number }} An object containing `time` which is when the last\n *                                            insert occurred as a UNIX epoch, and `count` which is\n *                                            the number of inserts that have occurred.\n */\nfunction getInsertUsage( state, id ) {\n\treturn state.preferences.insertUsage?.[ id ] ?? null;\n}\n\n/**\n * Returns whether we can show a block type in the inserter\n *\n * @param {Object}  state        Global State\n * @param {Object}  blockType    BlockType\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block type is allowed to be shown in the inserter.\n */\nconst canIncludeBlockTypeInInserter = ( state, blockType, rootClientId ) => {\n\tif ( ! hasBlockSupport( blockType, 'inserter', true ) ) {\n\t\treturn false;\n\t}\n\n\treturn canInsertBlockTypeUnmemoized( state, blockType.name, rootClientId );\n};\n\n/**\n * Return a function to be used to tranform a block variation to an inserter item\n *\n * @param {Object} state Global State\n * @param {Object} item  Denormalized inserter item\n * @return {Function} Function to transform a block variation to inserter item\n */\nconst getItemFromVariation = ( state, item ) => ( variation ) => {\n\tconst variationId = `${ item.id }/${ variation.name }`;\n\tconst { time, count = 0 } = getInsertUsage( state, variationId ) || {};\n\treturn {\n\t\t...item,\n\t\tid: variationId,\n\t\ticon: variation.icon || item.icon,\n\t\ttitle: variation.title || item.title,\n\t\tdescription: variation.description || item.description,\n\t\tcategory: variation.category || item.category,\n\t\t// If `example` is explicitly undefined for the variation, the preview will not be shown.\n\t\texample: variation.hasOwnProperty( 'example' )\n\t\t\t? variation.example\n\t\t\t: item.example,\n\t\tinitialAttributes: {\n\t\t\t...item.initialAttributes,\n\t\t\t...variation.attributes,\n\t\t},\n\t\tinnerBlocks: variation.innerBlocks,\n\t\tkeywords: variation.keywords || item.keywords,\n\t\tfrecency: calculateFrecency( time, count ),\n\t};\n};\n\n/**\n * Returns the calculated frecency.\n *\n * 'frecency' is a heuristic (https://en.wikipedia.org/wiki/Frecency)\n * that combines block usage frequenty and recency.\n *\n * @param {number} time  When the last insert occurred as a UNIX epoch\n * @param {number} count The number of inserts that have occurred.\n *\n * @return {number} The calculated frecency.\n */\nconst calculateFrecency = ( time, count ) => {\n\tif ( ! time ) {\n\t\treturn count;\n\t}\n\t// The selector is cached, which means Date.now() is the last time that the\n\t// relevant state changed. This suits our needs.\n\tconst duration = Date.now() - time;\n\tswitch ( true ) {\n\t\tcase duration < MILLISECONDS_PER_HOUR:\n\t\t\treturn count * 4;\n\t\tcase duration < MILLISECONDS_PER_DAY:\n\t\t\treturn count * 2;\n\t\tcase duration < MILLISECONDS_PER_WEEK:\n\t\t\treturn count / 2;\n\t\tdefault:\n\t\t\treturn count / 4;\n\t}\n};\n\n/**\n * Returns a function that accepts a block type and builds an item to be shown\n * in a specific context. It's used for building items for Inserter and available\n * block Transfroms list.\n *\n * @param {Object} state              Editor state.\n * @param {Object} options            Options object for handling the building of a block type.\n * @param {string} options.buildScope The scope for which the item is going to be used.\n * @return {Function} Function returns an item to be shown in a specific context (Inserter|Transforms list).\n */\nconst buildBlockTypeItem =\n\t( state, { buildScope = 'inserter' } ) =>\n\t( blockType ) => {\n\t\tconst id = blockType.name;\n\n\t\tlet isDisabled = false;\n\t\tif ( ! hasBlockSupport( blockType.name, 'multiple', true ) ) {\n\t\t\tisDisabled = getBlocksByClientId(\n\t\t\t\tstate,\n\t\t\t\tgetClientIdsWithDescendants( state )\n\t\t\t).some( ( { name } ) => name === blockType.name );\n\t\t}\n\n\t\tconst { time, count = 0 } = getInsertUsage( state, id ) || {};\n\t\tconst blockItemBase = {\n\t\t\tid,\n\t\t\tname: blockType.name,\n\t\t\ttitle: blockType.title,\n\t\t\ticon: blockType.icon,\n\t\t\tisDisabled,\n\t\t\tfrecency: calculateFrecency( time, count ),\n\t\t};\n\t\tif ( buildScope === 'transform' ) return blockItemBase;\n\n\t\tconst inserterVariations = getBlockVariations(\n\t\t\tblockType.name,\n\t\t\t'inserter'\n\t\t);\n\t\treturn {\n\t\t\t...blockItemBase,\n\t\t\tinitialAttributes: {},\n\t\t\tdescription: blockType.description,\n\t\t\tcategory: blockType.category,\n\t\t\tkeywords: blockType.keywords,\n\t\t\tvariations: inserterVariations,\n\t\t\texample: blockType.example,\n\t\t\tutility: 1, // Deprecated.\n\t\t};\n\t};\n\n/**\n * Determines the items that appear in the inserter. Includes both static\n * items (e.g. a regular block type) and dynamic items (e.g. a reusable block).\n *\n * Each item object contains what's necessary to display a button in the\n * inserter and handle its selection.\n *\n * The 'frecency' property is a heuristic (https://en.wikipedia.org/wiki/Frecency)\n * that combines block usage frequenty and recency.\n *\n * Items are returned ordered descendingly by their 'utility' and 'frecency'.\n *\n * @param    {Object}   state             Editor state.\n * @param    {?string}  rootClientId      Optional root client ID of block list.\n *\n * @return {WPEditorInserterItem[]} Items that appear in inserter.\n *\n * @typedef {Object} WPEditorInserterItem\n * @property {string}   id                Unique identifier for the item.\n * @property {string}   name              The type of block to create.\n * @property {Object}   initialAttributes Attributes to pass to the newly created block.\n * @property {string}   title             Title of the item, as it appears in the inserter.\n * @property {string}   icon              Dashicon for the item, as it appears in the inserter.\n * @property {string}   category          Block category that the item is associated with.\n * @property {string[]} keywords          Keywords that can be searched to find this item.\n * @property {boolean}  isDisabled        Whether or not the user should be prevented from inserting\n *                                        this item.\n * @property {number}   frecency          Heuristic that combines frequency and recency.\n */\nexport const getInserterItems = createSelector(\n\t( state, rootClientId = null ) => {\n\t\tconst buildBlockTypeInserterItem = buildBlockTypeItem( state, {\n\t\t\tbuildScope: 'inserter',\n\t\t} );\n\n\t\t/*\n\t\t * Matches block comment delimiters amid serialized content.\n\t\t *\n\t\t * @see `tokenizer` in `@wordpress/block-serialization-default-parser`\n\t\t * package\n\t\t *\n\t\t * blockParserTokenizer differs from the original tokenizer in the\n\t\t * following ways:\n\t\t *\n\t\t * - removed global flag (/g)\n\t\t * - prepended ^\\s*\n\t\t *\n\t\t */\n\t\tconst blockParserTokenizer =\n\t\t\t/^\\s*<!--\\s+(\\/)?wp:([a-z][a-z0-9_-]*\\/)?([a-z][a-z0-9_-]*)\\s+({(?:(?=([^}]+|}+(?=})|(?!}\\s+\\/?-->)[^])*)\\5|[^]*?)}\\s+)?(\\/)?-->/;\n\n\t\tconst buildReusableBlockInserterItem = ( reusableBlock ) => {\n\t\t\tlet icon = symbol;\n\n\t\t\t/*\n\t\t\t * Instead of always displaying a generic \"symbol\" icon for every\n\t\t\t * reusable block, try to use an icon that represents the first\n\t\t\t * outermost block contained in the reusable block. This requires\n\t\t\t * scanning the serialized form of the reusable block to find its\n\t\t\t * first block delimiter, then looking up the corresponding block\n\t\t\t * type, if available.\n\t\t\t */\n\t\t\tif ( Platform.OS === 'web' ) {\n\t\t\t\tconst content =\n\t\t\t\t\ttypeof reusableBlock.content.raw === 'string'\n\t\t\t\t\t\t? reusableBlock.content.raw\n\t\t\t\t\t\t: reusableBlock.content;\n\t\t\t\tconst rawBlockMatch = content.match( blockParserTokenizer );\n\t\t\t\tif ( rawBlockMatch ) {\n\t\t\t\t\tconst [ , , namespace = 'core/', blockName ] =\n\t\t\t\t\t\trawBlockMatch;\n\t\t\t\t\tconst referencedBlockType = getBlockType(\n\t\t\t\t\t\tnamespace + blockName\n\t\t\t\t\t);\n\t\t\t\t\tif ( referencedBlockType ) {\n\t\t\t\t\t\ticon = referencedBlockType.icon;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst id = `core/block/${ reusableBlock.id }`;\n\t\t\tconst { time, count = 0 } = getInsertUsage( state, id ) || {};\n\t\t\tconst frecency = calculateFrecency( time, count );\n\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tname: 'core/block',\n\t\t\t\tinitialAttributes: { ref: reusableBlock.id },\n\t\t\t\ttitle: reusableBlock.title.raw,\n\t\t\t\ticon,\n\t\t\t\tcategory: 'reusable',\n\t\t\t\tkeywords: [],\n\t\t\t\tisDisabled: false,\n\t\t\t\tutility: 1, // Deprecated.\n\t\t\t\tfrecency,\n\t\t\t};\n\t\t};\n\n\t\tconst blockTypeInserterItems = getBlockTypes()\n\t\t\t.filter( ( blockType ) =>\n\t\t\t\tcanIncludeBlockTypeInInserter( state, blockType, rootClientId )\n\t\t\t)\n\t\t\t.map( buildBlockTypeInserterItem );\n\n\t\tconst reusableBlockInserterItems = canInsertBlockTypeUnmemoized(\n\t\t\tstate,\n\t\t\t'core/block',\n\t\t\trootClientId\n\t\t)\n\t\t\t? getReusableBlocks( state ).map( buildReusableBlockInserterItem )\n\t\t\t: [];\n\n\t\tconst items = blockTypeInserterItems.reduce( ( accumulator, item ) => {\n\t\t\tconst { variations = [] } = item;\n\t\t\t// Exclude any block type item that is to be replaced by a default variation.\n\t\t\tif ( ! variations.some( ( { isDefault } ) => isDefault ) ) {\n\t\t\t\taccumulator.push( item );\n\t\t\t}\n\t\t\tif ( variations.length ) {\n\t\t\t\tconst variationMapper = getItemFromVariation( state, item );\n\t\t\t\taccumulator.push( ...variations.map( variationMapper ) );\n\t\t\t}\n\t\t\treturn accumulator;\n\t\t}, [] );\n\n\t\t// Ensure core blocks are prioritized in the returned results,\n\t\t// because third party blocks can be registered earlier than\n\t\t// the core blocks (usually by using the `init` action),\n\t\t// thus affecting the display order.\n\t\t// We don't sort reusable blocks as they are handled differently.\n\t\tconst groupByType = ( blocks, block ) => {\n\t\t\tconst { core, noncore } = blocks;\n\t\t\tconst type = block.name.startsWith( 'core/' ) ? core : noncore;\n\n\t\t\ttype.push( block );\n\t\t\treturn blocks;\n\t\t};\n\t\tconst { core: coreItems, noncore: nonCoreItems } = items.reduce(\n\t\t\tgroupByType,\n\t\t\t{ core: [], noncore: [] }\n\t\t);\n\t\tconst sortedBlockTypes = [ ...coreItems, ...nonCoreItems ];\n\t\treturn [ ...sortedBlockTypes, ...reusableBlockInserterItems ];\n\t},\n\t( state, rootClientId ) => [\n\t\tstate.blockListSettings[ rootClientId ],\n\t\tstate.blocks.byClientId,\n\t\tstate.blocks.order,\n\t\tstate.preferences.insertUsage,\n\t\tstate.settings.allowedBlockTypes,\n\t\tstate.settings.templateLock,\n\t\tgetReusableBlocks( state ),\n\t\tgetBlockTypes(),\n\t]\n);\n\n/**\n * Determines the items that appear in the available block transforms list.\n *\n * Each item object contains what's necessary to display a menu item in the\n * transform list and handle its selection.\n *\n * The 'frecency' property is a heuristic (https://en.wikipedia.org/wiki/Frecency)\n * that combines block usage frequenty and recency.\n *\n * Items are returned ordered descendingly by their 'frecency'.\n *\n * @param    {Object}          state        Editor state.\n * @param    {Object|Object[]} blocks       Block object or array objects.\n * @param    {?string}         rootClientId Optional root client ID of block list.\n *\n * @return {WPEditorTransformItem[]} Items that appear in inserter.\n *\n * @typedef {Object} WPEditorTransformItem\n * @property {string}          id           Unique identifier for the item.\n * @property {string}          name         The type of block to create.\n * @property {string}          title        Title of the item, as it appears in the inserter.\n * @property {string}          icon         Dashicon for the item, as it appears in the inserter.\n * @property {boolean}         isDisabled   Whether or not the user should be prevented from inserting\n *                                          this item.\n * @property {number}          frecency     Heuristic that combines frequency and recency.\n */\nexport const getBlockTransformItems = createSelector(\n\t( state, blocks, rootClientId = null ) => {\n\t\tconst normalizedBlocks = Array.isArray( blocks ) ? blocks : [ blocks ];\n\t\tconst buildBlockTypeTransformItem = buildBlockTypeItem( state, {\n\t\t\tbuildScope: 'transform',\n\t\t} );\n\t\tconst blockTypeTransformItems = getBlockTypes()\n\t\t\t.filter( ( blockType ) =>\n\t\t\t\tcanIncludeBlockTypeInInserter( state, blockType, rootClientId )\n\t\t\t)\n\t\t\t.map( buildBlockTypeTransformItem );\n\n\t\tconst itemsByName = Object.fromEntries(\n\t\t\tObject.entries( blockTypeTransformItems ).map( ( [ , value ] ) => [\n\t\t\t\tvalue.name,\n\t\t\t\tvalue,\n\t\t\t] )\n\t\t);\n\n\t\tconst possibleTransforms = getPossibleBlockTransformations(\n\t\t\tnormalizedBlocks\n\t\t).reduce( ( accumulator, block ) => {\n\t\t\tif ( itemsByName[ block?.name ] ) {\n\t\t\t\taccumulator.push( itemsByName[ block.name ] );\n\t\t\t}\n\t\t\treturn accumulator;\n\t\t}, [] );\n\t\treturn orderBy(\n\t\t\tpossibleTransforms,\n\t\t\t( block ) => itemsByName[ block.name ].frecency,\n\t\t\t'desc'\n\t\t);\n\t},\n\t( state, blocks, rootClientId ) => [\n\t\tstate.blockListSettings[ rootClientId ],\n\t\tstate.blocks.byClientId,\n\t\tstate.preferences.insertUsage,\n\t\tstate.settings.allowedBlockTypes,\n\t\tstate.settings.templateLock,\n\t\tgetBlockTypes(),\n\t]\n);\n\n/**\n * Determines whether there are items to show in the inserter.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Items that appear in inserter.\n */\nexport const hasInserterItems = createSelector(\n\t( state, rootClientId = null ) => {\n\t\tconst hasBlockType = getBlockTypes().some( ( blockType ) =>\n\t\t\tcanIncludeBlockTypeInInserter( state, blockType, rootClientId )\n\t\t);\n\t\tif ( hasBlockType ) {\n\t\t\treturn true;\n\t\t}\n\t\tconst hasReusableBlock =\n\t\t\tcanInsertBlockTypeUnmemoized( state, 'core/block', rootClientId ) &&\n\t\t\tgetReusableBlocks( state ).length > 0;\n\n\t\treturn hasReusableBlock;\n\t},\n\t( state, rootClientId ) => [\n\t\tstate.blockListSettings[ rootClientId ],\n\t\tstate.blocks.byClientId,\n\t\tstate.settings.allowedBlockTypes,\n\t\tstate.settings.templateLock,\n\t\tgetReusableBlocks( state ),\n\t\tgetBlockTypes(),\n\t]\n);\n\n/**\n * Returns the list of allowed inserter blocks for inner blocks children.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Array?} The list of allowed block types.\n */\nexport const getAllowedBlocks = createSelector(\n\t( state, rootClientId = null ) => {\n\t\tif ( ! rootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn getBlockTypes().filter( ( blockType ) =>\n\t\t\tcanIncludeBlockTypeInInserter( state, blockType, rootClientId )\n\t\t);\n\t},\n\t( state, rootClientId ) => [\n\t\tstate.blockListSettings[ rootClientId ],\n\t\tstate.blocks.byClientId,\n\t\tstate.settings.allowedBlockTypes,\n\t\tstate.settings.templateLock,\n\t\tgetBlockTypes(),\n\t]\n);\n\nexport const __experimentalGetAllowedBlocks = createSelector(\n\t( state, rootClientId = null ) => {\n\t\tdeprecated(\n\t\t\t'wp.data.select( \"core/block-editor\" ).__experimentalGetAllowedBlocks',\n\t\t\t{\n\t\t\t\talternative:\n\t\t\t\t\t'wp.data.select( \"core/block-editor\" ).getAllowedBlocks',\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.4',\n\t\t\t}\n\t\t);\n\t\treturn getAllowedBlocks( state, rootClientId );\n\t},\n\t( state, rootClientId ) => [\n\t\t...getAllowedBlocks.getDependants( state, rootClientId ),\n\t]\n);\n\n/**\n * Returns the block to be directly inserted by the block appender.\n *\n * @param    {Object}         state            Editor state.\n * @param    {?string}        rootClientId     Optional root client ID of block list.\n *\n * @return {?WPDirectInsertBlock}              The block type to be directly inserted.\n *\n * @typedef {Object} WPDirectInsertBlock\n * @property {string}         name             The type of block.\n * @property {?Object}        attributes       Attributes to pass to the newly created block.\n * @property {?Array<string>} attributesToCopy Attributes to be copied from adjecent blocks when inserted.\n */\nexport const __experimentalGetDirectInsertBlock = createSelector(\n\t( state, rootClientId = null ) => {\n\t\tif ( ! rootClientId ) {\n\t\t\treturn;\n\t\t}\n\t\tconst defaultBlock =\n\t\t\tstate.blockListSettings[ rootClientId ]?.__experimentalDefaultBlock;\n\t\tconst directInsert =\n\t\t\tstate.blockListSettings[ rootClientId ]?.__experimentalDirectInsert;\n\t\tif ( ! defaultBlock || ! directInsert ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( typeof directInsert === 'function' ) {\n\t\t\treturn directInsert( getBlock( state, rootClientId ) )\n\t\t\t\t? defaultBlock\n\t\t\t\t: null;\n\t\t}\n\t\treturn defaultBlock;\n\t},\n\t( state, rootClientId ) => [\n\t\tstate.blockListSettings[ rootClientId ],\n\t\tstate.blocks.tree.get( rootClientId ),\n\t]\n);\n\nconst checkAllowListRecursive = ( blocks, allowedBlockTypes ) => {\n\tif ( typeof allowedBlockTypes === 'boolean' ) {\n\t\treturn allowedBlockTypes;\n\t}\n\n\tconst blocksQueue = [ ...blocks ];\n\twhile ( blocksQueue.length > 0 ) {\n\t\tconst block = blocksQueue.shift();\n\n\t\tconst isAllowed = checkAllowList(\n\t\t\tallowedBlockTypes,\n\t\t\tblock.name || block.blockName,\n\t\t\ttrue\n\t\t);\n\t\tif ( ! isAllowed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tblock.innerBlocks?.forEach( ( innerBlock ) => {\n\t\t\tblocksQueue.push( innerBlock );\n\t\t} );\n\t}\n\n\treturn true;\n};\n\nexport const __experimentalGetParsedPattern = createSelector(\n\t( state, patternName ) => {\n\t\tconst patterns = state.settings.__experimentalBlockPatterns;\n\t\tconst pattern = patterns.find( ( { name } ) => name === patternName );\n\t\tif ( ! pattern ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\t...pattern,\n\t\t\tblocks: parse( pattern.content, {\n\t\t\t\t__unstableSkipMigrationLogs: true,\n\t\t\t} ),\n\t\t};\n\t},\n\t( state ) => [ state.settings.__experimentalBlockPatterns ]\n);\n\nconst getAllAllowedPatterns = createSelector(\n\t( state ) => {\n\t\tconst patterns = state.settings.__experimentalBlockPatterns;\n\t\tconst { allowedBlockTypes } = getSettings( state );\n\t\tconst parsedPatterns = patterns\n\t\t\t.filter( ( { inserter = true } ) => !! inserter )\n\t\t\t.map( ( { name } ) =>\n\t\t\t\t__experimentalGetParsedPattern( state, name )\n\t\t\t);\n\t\tconst allowedPatterns = parsedPatterns.filter( ( { blocks } ) =>\n\t\t\tcheckAllowListRecursive( blocks, allowedBlockTypes )\n\t\t);\n\t\treturn allowedPatterns;\n\t},\n\t( state ) => [\n\t\tstate.settings.__experimentalBlockPatterns,\n\t\tstate.settings.allowedBlockTypes,\n\t]\n);\n\n/**\n * Returns the list of allowed patterns for inner blocks children.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional target root client ID.\n *\n * @return {Array?} The list of allowed patterns.\n */\nexport const __experimentalGetAllowedPatterns = createSelector(\n\t( state, rootClientId = null ) => {\n\t\tconst availableParsedPatterns = getAllAllowedPatterns( state );\n\t\tconst patternsAllowed = availableParsedPatterns.filter(\n\t\t\t( { blocks } ) =>\n\t\t\t\tblocks.every( ( { name } ) =>\n\t\t\t\t\tcanInsertBlockType( state, name, rootClientId )\n\t\t\t\t)\n\t\t);\n\n\t\treturn patternsAllowed;\n\t},\n\t( state, rootClientId ) => [\n\t\tstate.settings.__experimentalBlockPatterns,\n\t\tstate.settings.allowedBlockTypes,\n\t\tstate.settings.templateLock,\n\t\tstate.blockListSettings[ rootClientId ],\n\t\tstate.blocks.byClientId.get( rootClientId ),\n\t]\n);\n\n/**\n * Returns the list of patterns based on their declared `blockTypes`\n * and a block's name.\n * Patterns can use `blockTypes` to integrate in work flows like\n * suggesting appropriate patterns in a Placeholder state(during insertion)\n * or blocks transformations.\n *\n * @param {Object}          state        Editor state.\n * @param {string|string[]} blockNames   Block's name or array of block names to find matching pattens.\n * @param {?string}         rootClientId Optional target root client ID.\n *\n * @return {Array} The list of matched block patterns based on declared `blockTypes` and block name.\n */\nexport const getPatternsByBlockTypes = createSelector(\n\t( state, blockNames, rootClientId = null ) => {\n\t\tif ( ! blockNames ) return EMPTY_ARRAY;\n\t\tconst patterns = __experimentalGetAllowedPatterns(\n\t\t\tstate,\n\t\t\trootClientId\n\t\t);\n\t\tconst normalizedBlockNames = Array.isArray( blockNames )\n\t\t\t? blockNames\n\t\t\t: [ blockNames ];\n\t\tconst filteredPatterns = patterns.filter( ( pattern ) =>\n\t\t\tpattern?.blockTypes?.some?.( ( blockName ) =>\n\t\t\t\tnormalizedBlockNames.includes( blockName )\n\t\t\t)\n\t\t);\n\t\tif ( filteredPatterns.length === 0 ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\t\treturn filteredPatterns;\n\t},\n\t( state, blockNames, rootClientId ) => [\n\t\t...__experimentalGetAllowedPatterns.getDependants(\n\t\t\tstate,\n\t\t\trootClientId\n\t\t),\n\t]\n);\n\nexport const __experimentalGetPatternsByBlockTypes = createSelector(\n\t( state, blockNames, rootClientId = null ) => {\n\t\tdeprecated(\n\t\t\t'wp.data.select( \"core/block-editor\" ).__experimentalGetPatternsByBlockTypes',\n\t\t\t{\n\t\t\t\talternative:\n\t\t\t\t\t'wp.data.select( \"core/block-editor\" ).getPatternsByBlockTypes',\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.4',\n\t\t\t}\n\t\t);\n\t\treturn getPatternsByBlockTypes( state, blockNames, rootClientId );\n\t},\n\t( state, blockNames, rootClientId ) => [\n\t\t...__experimentalGetAllowedPatterns.getDependants(\n\t\t\tstate,\n\t\t\trootClientId\n\t\t),\n\t]\n);\n\n/**\n * Determines the items that appear in the available pattern transforms list.\n *\n * For now we only handle blocks without InnerBlocks and take into account\n * the `__experimentalRole` property of blocks' attributes for the transformation.\n *\n * We return the first set of possible eligible block patterns,\n * by checking the `blockTypes` property. We still have to recurse through\n * block pattern's blocks and try to find matches from the selected blocks.\n * Now this happens in the consumer to avoid heavy operations in the selector.\n *\n * @param {Object}   state        Editor state.\n * @param {Object[]} blocks       The selected blocks.\n * @param {?string}  rootClientId Optional root client ID of block list.\n *\n * @return {WPBlockPattern[]} Items that are eligible for a pattern transformation.\n */\nexport const __experimentalGetPatternTransformItems = createSelector(\n\t( state, blocks, rootClientId = null ) => {\n\t\tif ( ! blocks ) return EMPTY_ARRAY;\n\t\t/**\n\t\t * For now we only handle blocks without InnerBlocks and take into account\n\t\t * the `__experimentalRole` property of blocks' attributes for the transformation.\n\t\t * Note that the blocks have been retrieved through `getBlock`, which doesn't\n\t\t * return the inner blocks of an inner block controller, so we still need\n\t\t * to check for this case too.\n\t\t */\n\t\tif (\n\t\t\tblocks.some(\n\t\t\t\t( { clientId, innerBlocks } ) =>\n\t\t\t\t\tinnerBlocks.length ||\n\t\t\t\t\tareInnerBlocksControlled( state, clientId )\n\t\t\t)\n\t\t) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\t// Create a Set of the selected block names that is used in patterns filtering.\n\t\tconst selectedBlockNames = Array.from(\n\t\t\tnew Set( blocks.map( ( { name } ) => name ) )\n\t\t);\n\t\t/**\n\t\t * Here we will return first set of possible eligible block patterns,\n\t\t * by checking the `blockTypes` property. We still have to recurse through\n\t\t * block pattern's blocks and try to find matches from the selected blocks.\n\t\t * Now this happens in the consumer to avoid heavy operations in the selector.\n\t\t */\n\t\treturn getPatternsByBlockTypes(\n\t\t\tstate,\n\t\t\tselectedBlockNames,\n\t\t\trootClientId\n\t\t);\n\t},\n\t( state, blocks, rootClientId ) => [\n\t\t...getPatternsByBlockTypes.getDependants( state, rootClientId ),\n\t]\n);\n\n/**\n * Returns the Block List settings of a block, if any exist.\n *\n * @param {Object}  state    Editor state.\n * @param {?string} clientId Block client ID.\n *\n * @return {?Object} Block settings of the block if set.\n */\nexport function getBlockListSettings( state, clientId ) {\n\treturn state.blockListSettings[ clientId ];\n}\n\n/**\n * Returns the editor settings.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} The editor settings object.\n */\nexport function getSettings( state ) {\n\treturn state.settings;\n}\n\n/**\n * Returns the behaviors registered with the editor.\n *\n * Behaviors are named, reusable pieces of functionality that can be\n * attached to blocks. They are registered with the editor using the\n * `theme.json` file.\n *\n * @example\n *\n * ```js\n * const behaviors = select( blockEditorStore ).getBehaviors();\n * if ( behaviors?.lightbox ) {\n * \t // Do something with the lightbox.\n * }\n *```\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} The editor behaviors object.\n */\nexport function getBehaviors( state ) {\n\treturn state.settings.behaviors;\n}\n\n/**\n * Returns true if the most recent block change is be considered persistent, or\n * false otherwise. A persistent change is one committed by BlockEditorProvider\n * via its `onChange` callback, in addition to `onInput`.\n *\n * @param {Object} state Block editor state.\n *\n * @return {boolean} Whether the most recent block change was persistent.\n */\nexport function isLastBlockChangePersistent( state ) {\n\treturn state.blocks.isPersistentChange;\n}\n\n/**\n * Returns the block list settings for an array of blocks, if any exist.\n *\n * @param {Object} state     Editor state.\n * @param {Array}  clientIds Block client IDs.\n *\n * @return {Object} An object where the keys are client ids and the values are\n *                  a block list setting object.\n */\nexport const __experimentalGetBlockListSettingsForBlocks = createSelector(\n\t( state, clientIds = [] ) => {\n\t\treturn clientIds.reduce( ( blockListSettingsForBlocks, clientId ) => {\n\t\t\tif ( ! state.blockListSettings[ clientId ] ) {\n\t\t\t\treturn blockListSettingsForBlocks;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...blockListSettingsForBlocks,\n\t\t\t\t[ clientId ]: state.blockListSettings[ clientId ],\n\t\t\t};\n\t\t}, {} );\n\t},\n\t( state ) => [ state.blockListSettings ]\n);\n\n/**\n * Returns the title of a given reusable block\n *\n * @param {Object}        state Global application state.\n * @param {number|string} ref   The shared block's ID.\n *\n * @return {string} The reusable block saved title.\n */\nexport const __experimentalGetReusableBlockTitle = createSelector(\n\t( state, ref ) => {\n\t\tconst reusableBlock = getReusableBlocks( state ).find(\n\t\t\t( block ) => block.id === ref\n\t\t);\n\t\tif ( ! reusableBlock ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn reusableBlock.title?.raw;\n\t},\n\t( state ) => [ getReusableBlocks( state ) ]\n);\n\n/**\n * Returns true if the most recent block change is be considered ignored, or\n * false otherwise. An ignored change is one not to be committed by\n * BlockEditorProvider, neither via `onChange` nor `onInput`.\n *\n * @param {Object} state Block editor state.\n *\n * @return {boolean} Whether the most recent block change was ignored.\n */\nexport function __unstableIsLastBlockChangeIgnored( state ) {\n\t// TODO: Removal Plan: Changes incurred by RECEIVE_BLOCKS should not be\n\t// ignored if in-fact they result in a change in blocks state. The current\n\t// need to ignore changes not a result of user interaction should be\n\t// accounted for in the refactoring of reusable blocks as occurring within\n\t// their own separate block editor / state (#7119).\n\treturn state.blocks.isIgnoredChange;\n}\n\n/**\n * Returns the block attributes changed as a result of the last dispatched\n * action.\n *\n * @param {Object} state Block editor state.\n *\n * @return {Object<string,Object>} Subsets of block attributes changed, keyed\n *                                 by block client ID.\n */\nexport function __experimentalGetLastBlockAttributeChanges( state ) {\n\treturn state.lastBlockAttributesChange;\n}\n\n/**\n * Returns the available reusable blocks\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} Reusable blocks\n */\nfunction getReusableBlocks( state ) {\n\treturn state?.settings?.__experimentalReusableBlocks ?? EMPTY_ARRAY;\n}\n\n/**\n * Returns whether the navigation mode is enabled.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Is navigation mode enabled.\n */\nexport function isNavigationMode( state ) {\n\treturn state.editorMode === 'navigation';\n}\n\n/**\n * Returns the current editor mode.\n *\n * @param {Object} state Editor state.\n *\n * @return {string} the editor mode.\n */\nexport function __unstableGetEditorMode( state ) {\n\treturn state.editorMode;\n}\n\n/**\n * Returns whether block moving mode is enabled.\n *\n * @param {Object} state Editor state.\n *\n * @return {string} Client Id of moving block.\n */\nexport function hasBlockMovingClientId( state ) {\n\treturn state.hasBlockMovingClientId;\n}\n\n/**\n * Returns true if the last change was an automatic change, false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the last change was automatic.\n */\nexport function didAutomaticChange( state ) {\n\treturn !! state.automaticChangeStatus;\n}\n\n/**\n * Returns true if the current highlighted block matches the block clientId.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block to check.\n *\n * @return {boolean} Whether the block is currently highlighted.\n */\nexport function isBlockHighlighted( state, clientId ) {\n\treturn state.highlightedBlock === clientId;\n}\n\n/**\n * Checks if a given block has controlled inner blocks.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block to check.\n *\n * @return {boolean} True if the block has controlled inner blocks.\n */\nexport function areInnerBlocksControlled( state, clientId ) {\n\treturn !! state.blocks.controlledInnerBlocks[ clientId ];\n}\n\n/**\n * Returns the clientId for the first 'active' block of a given array of block names.\n * A block is 'active' if it (or a child) is the selected block.\n * Returns the first match moving up the DOM from the selected block.\n *\n * @param {Object}   state            Global application state.\n * @param {string[]} validBlocksNames The names of block types to check for.\n *\n * @return {string} The matching block's clientId.\n */\nexport const __experimentalGetActiveBlockIdByBlockNames = createSelector(\n\t( state, validBlockNames ) => {\n\t\tif ( ! validBlockNames.length ) {\n\t\t\treturn null;\n\t\t}\n\t\t// Check if selected block is a valid entity area.\n\t\tconst selectedBlockClientId = getSelectedBlockClientId( state );\n\t\tif (\n\t\t\tvalidBlockNames.includes(\n\t\t\t\tgetBlockName( state, selectedBlockClientId )\n\t\t\t)\n\t\t) {\n\t\t\treturn selectedBlockClientId;\n\t\t}\n\t\t// Check if first selected block is a child of a valid entity area.\n\t\tconst multiSelectedBlockClientIds =\n\t\t\tgetMultiSelectedBlockClientIds( state );\n\t\tconst entityAreaParents = getBlockParentsByBlockName(\n\t\t\tstate,\n\t\t\tselectedBlockClientId || multiSelectedBlockClientIds[ 0 ],\n\t\t\tvalidBlockNames\n\t\t);\n\t\tif ( entityAreaParents ) {\n\t\t\t// Last parent closest/most interior.\n\t\t\treturn entityAreaParents[ entityAreaParents.length - 1 ];\n\t\t}\n\t\treturn null;\n\t},\n\t( state, validBlockNames ) => [\n\t\tstate.selection.selectionStart.clientId,\n\t\tstate.selection.selectionEnd.clientId,\n\t\tvalidBlockNames,\n\t]\n);\n\n/**\n * Tells if the block with the passed clientId was just inserted.\n *\n * @param {Object}  state    Global application state.\n * @param {Object}  clientId Client Id of the block.\n * @param {?string} source   Optional insertion source of the block.\n * @return {boolean} True if the block matches the last block inserted from the specified source.\n */\nexport function wasBlockJustInserted( state, clientId, source ) {\n\tconst { lastBlockInserted } = state;\n\treturn (\n\t\tlastBlockInserted.clientIds?.includes( clientId ) &&\n\t\tlastBlockInserted.source === source\n\t);\n}\n\n/**\n * Tells if the block is visible on the canvas or not.\n *\n * @param {Object} state    Global application state.\n * @param {Object} clientId Client Id of the block.\n * @return {boolean} True if the block is visible.\n */\nexport function isBlockVisible( state, clientId ) {\n\treturn state.blockVisibility?.[ clientId ] ?? true;\n}\n\n/**\n * Returns the list of all hidden blocks.\n *\n * @param {Object} state Global application state.\n * @return {[string]} List of hidden blocks.\n */\nexport const __unstableGetVisibleBlocks = createSelector(\n\t( state ) => {\n\t\tconst visibleBlocks = new Set(\n\t\t\tObject.keys( state.blockVisibility ).filter(\n\t\t\t\t( key ) => state.blockVisibility[ key ]\n\t\t\t)\n\t\t);\n\t\tif ( visibleBlocks.size === 0 ) {\n\t\t\treturn EMPTY_SET;\n\t\t}\n\t\treturn visibleBlocks;\n\t},\n\t( state ) => [ state.blockVisibility ]\n);\n\n/**\n * DO-NOT-USE in production.\n * This selector is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n */\nexport const __unstableGetContentLockingParent = createSelector(\n\t( state, clientId ) => {\n\t\tlet current = clientId;\n\t\tlet result;\n\t\twhile ( state.blocks.parents.has( current ) ) {\n\t\t\tcurrent = state.blocks.parents.get( current );\n\t\t\tif (\n\t\t\t\tcurrent &&\n\t\t\t\tgetTemplateLock( state, current ) === 'contentOnly'\n\t\t\t) {\n\t\t\t\tresult = current;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t},\n\t( state ) => [ state.blocks.parents, state.blockListSettings ]\n);\n\n/**\n * DO-NOT-USE in production.\n * This selector is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n *\n * @param {Object} state Global application state.\n */\nexport function __unstableGetTemporarilyEditingAsBlocks( state ) {\n\treturn state.temporarilyEditingAsBlocks;\n}\n\nexport function __unstableHasActiveBlockOverlayActive( state, clientId ) {\n\t// Prevent overlay on disabled blocks. It's redundant since disabled blocks\n\t// can't be selected, and prevents non-disabled nested blocks from being\n\t// selected.\n\tif ( getBlockEditingMode( state, clientId ) === 'disabled' ) {\n\t\treturn false;\n\t}\n\n\t// If the block editing is locked, the block overlay is always active.\n\tif ( ! canEditBlock( state, clientId ) ) {\n\t\treturn true;\n\t}\n\n\tconst editorMode = __unstableGetEditorMode( state );\n\n\t// In zoom-out mode, the block overlay is always active for top level blocks.\n\tif (\n\t\teditorMode === 'zoom-out' &&\n\t\tclientId &&\n\t\t! getBlockRootClientId( state, clientId )\n\t) {\n\t\treturn true;\n\t}\n\n\t// In navigation mode, the block overlay is active when the block is not\n\t// selected (and doesn't contain a selected child). The same behavior is\n\t// also enabled in all modes for blocks that have controlled children\n\t// (reusable block, template part, navigation), unless explicitly disabled\n\t// with `supports.__experimentalDisableBlockOverlay`.\n\tconst blockSupportDisable = hasBlockSupport(\n\t\tgetBlockName( state, clientId ),\n\t\t'__experimentalDisableBlockOverlay',\n\t\tfalse\n\t);\n\tconst shouldEnableIfUnselected =\n\t\teditorMode === 'navigation' ||\n\t\t( blockSupportDisable\n\t\t\t? false\n\t\t\t: areInnerBlocksControlled( state, clientId ) );\n\n\treturn (\n\t\tshouldEnableIfUnselected &&\n\t\t! isBlockSelected( state, clientId ) &&\n\t\t! hasSelectedInnerBlock( state, clientId, true )\n\t);\n}\n\nexport function __unstableIsWithinBlockOverlay( state, clientId ) {\n\tlet parent = state.blocks.parents.get( clientId );\n\twhile ( !! parent ) {\n\t\tif ( __unstableHasActiveBlockOverlayActive( state, parent ) ) {\n\t\t\treturn true;\n\t\t}\n\t\tparent = state.blocks.parents.get( parent );\n\t}\n\treturn false;\n}\n","/**\n * WordPress dependencies\n */\nimport { Platform } from '@wordpress/element';\n\n/**\n * A list of private/experimental block editor settings that\n * should not become a part of the WordPress public API.\n * BlockEditorProvider will remove these settings from the\n * settings object it receives.\n *\n * @see https://github.com/WordPress/gutenberg/pull/46131\n */\nconst privateSettings = [\n\t'inserterMediaCategories',\n\t'blockInspectorAnimation',\n];\n\n/**\n * Action that updates the block editor settings and\n * conditionally preserves the experimental ones.\n *\n * @param {Object}  settings                  Updated settings\n * @param {boolean} stripExperimentalSettings Whether to strip experimental settings.\n * @return {Object} Action object\n */\nexport function __experimentalUpdateSettings(\n\tsettings,\n\tstripExperimentalSettings = false\n) {\n\tlet cleanSettings = settings;\n\t// There are no plugins in the mobile apps, so there is no\n\t// need to strip the experimental settings:\n\tif ( stripExperimentalSettings && Platform.OS === 'web' ) {\n\t\tcleanSettings = {};\n\t\tfor ( const key in settings ) {\n\t\t\tif ( ! privateSettings.includes( key ) ) {\n\t\t\t\tcleanSettings[ key ] = settings[ key ];\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\ttype: 'UPDATE_SETTINGS',\n\t\tsettings: cleanSettings,\n\t};\n}\n\n/**\n * Hides the block interface (eg. toolbar, outline, etc.)\n *\n * @return {Object} Action object.\n */\nexport function hideBlockInterface() {\n\treturn {\n\t\ttype: 'HIDE_BLOCK_INTERFACE',\n\t};\n}\n\n/**\n * Shows the block interface (eg. toolbar, outline, etc.)\n *\n * @return {Object} Action object.\n */\nexport function showBlockInterface() {\n\treturn {\n\t\ttype: 'SHOW_BLOCK_INTERFACE',\n\t};\n}\n\n/**\n * @typedef {import('../components/block-editing-mode').BlockEditingMode} BlockEditingMode\n */\n\n/**\n * Sets the block editing mode for a given block.\n *\n * @see useBlockEditingMode\n *\n * @param {string}           clientId The block client ID, or `''` for the root container.\n * @param {BlockEditingMode} mode     The block editing mode. One of `'disabled'`,\n *                                    `'contentOnly'`, or `'default'`.\n *\n * @return {Object} Action object.\n */\nexport function setBlockEditingMode( clientId = '', mode ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_EDITING_MODE',\n\t\tclientId,\n\t\tmode,\n\t};\n}\n\n/**\n * Clears the block editing mode for a given block.\n *\n * @see useBlockEditingMode\n *\n * @param {string} clientId The block client ID, or `''` for the root container.\n *\n * @return {Object} Action object.\n */\nexport function unsetBlockEditingMode( clientId = '' ) {\n\treturn {\n\t\ttype: 'UNSET_BLOCK_EDITING_MODE',\n\t\tclientId,\n\t};\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"a11y\"];","/**\n * A robust way to retain selection position through various\n * transforms is to insert a special character at the position and\n * then recover it.\n */\nexport const START_OF_SELECTED_AREA = '\\u0086';\n\n/**\n * Retrieve the block attribute that contains the selection position.\n *\n * @param {Object} blockAttributes Block attributes.\n * @return {string|void} The name of the block attribute that was previously selected.\n */\nexport function retrieveSelectedAttribute( blockAttributes ) {\n\tif ( ! blockAttributes ) {\n\t\treturn;\n\t}\n\n\treturn Object.keys( blockAttributes ).find( ( name ) => {\n\t\tconst value = blockAttributes[ name ];\n\t\treturn (\n\t\t\ttypeof value === 'string' &&\n\t\t\tvalue.indexOf( START_OF_SELECTED_AREA ) !== -1\n\t\t);\n\t} );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tcloneBlock,\n\t__experimentalCloneSanitizedBlock,\n\tcreateBlock,\n\tdoBlocksMatchTemplate,\n\tgetBlockType,\n\tgetDefaultBlockName,\n\thasBlockSupport,\n\tswitchToBlockType,\n\tsynchronizeBlocksWithTemplate,\n} from '@wordpress/blocks';\nimport { speak } from '@wordpress/a11y';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { create, insert, remove, toHTMLString } from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { mapRichTextSettings } from './utils';\nimport {\n\tretrieveSelectedAttribute,\n\tSTART_OF_SELECTED_AREA,\n} from '../utils/selection';\nimport { __experimentalUpdateSettings } from './private-actions';\n\n/** @typedef {import('../components/use-on-block-drop/types').WPDropOperation} WPDropOperation */\n\nconst castArray = ( maybeArray ) =>\n\tArray.isArray( maybeArray ) ? maybeArray : [ maybeArray ];\n\n/**\n * Action which will insert a default block insert action if there\n * are no other blocks at the root of the editor. This action should be used\n * in actions which may result in no blocks remaining in the editor (removal,\n * replacement, etc).\n */\nconst ensureDefaultBlock =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\t// To avoid a focus loss when removing the last block, assure there is\n\t\t// always a default block if the last of the blocks have been removed.\n\t\tconst count = select.getBlockCount();\n\t\tif ( count > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there's an custom appender, don't insert default block.\n\t\t// We have to remember to manually move the focus elsewhere to\n\t\t// prevent it from being lost though.\n\t\tconst { __unstableHasCustomAppender } = select.getSettings();\n\t\tif ( __unstableHasCustomAppender ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch.insertDefaultBlock();\n\t};\n\n/**\n * Action that resets blocks state to the specified array of blocks, taking precedence\n * over any other content reflected as an edit in state.\n *\n * @param {Array} blocks Array of blocks.\n */\nexport const resetBlocks =\n\t( blocks ) =>\n\t( { dispatch } ) => {\n\t\tdispatch( { type: 'RESET_BLOCKS', blocks } );\n\t\tdispatch( validateBlocksToTemplate( blocks ) );\n\t};\n\n/**\n * Block validity is a function of blocks state (at the point of a\n * reset) and the template setting. As a compromise to its placement\n * across distinct parts of state, it is implemented here as a side\n * effect of the block reset action.\n *\n * @param {Array} blocks Array of blocks.\n */\nexport const validateBlocksToTemplate =\n\t( blocks ) =>\n\t( { select, dispatch } ) => {\n\t\tconst template = select.getTemplate();\n\t\tconst templateLock = select.getTemplateLock();\n\n\t\t// Unlocked templates are considered always valid because they act\n\t\t// as default values only.\n\t\tconst isBlocksValidToTemplate =\n\t\t\t! template ||\n\t\t\ttemplateLock !== 'all' ||\n\t\t\tdoBlocksMatchTemplate( blocks, template );\n\n\t\t// Update if validity has changed.\n\t\tconst isValidTemplate = select.isValidTemplate();\n\n\t\tif ( isBlocksValidToTemplate !== isValidTemplate ) {\n\t\t\tdispatch.setTemplateValidity( isBlocksValidToTemplate );\n\t\t\treturn isBlocksValidToTemplate;\n\t\t}\n\t};\n\n/**\n * A block selection object.\n *\n * @typedef {Object} WPBlockSelection\n *\n * @property {string} clientId     A block client ID.\n * @property {string} attributeKey A block attribute key.\n * @property {number} offset       An attribute value offset, based on the rich\n *                                 text value. See `wp.richText.create`.\n */\n\n/**\n * A selection object.\n *\n * @typedef {Object} WPSelection\n *\n * @property {WPBlockSelection} start The selection start.\n * @property {WPBlockSelection} end   The selection end.\n */\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that selection state should be\n * reset to the specified selection.\n *\n * @param {WPBlockSelection} selectionStart  The selection start.\n * @param {WPBlockSelection} selectionEnd    The selection end.\n * @param {0|-1|null}        initialPosition Initial block position.\n *\n * @return {Object} Action object.\n */\nexport function resetSelection(\n\tselectionStart,\n\tselectionEnd,\n\tinitialPosition\n) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'RESET_SELECTION',\n\t\tselectionStart,\n\t\tselectionEnd,\n\t\tinitialPosition,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that blocks have been received.\n * Unlike resetBlocks, these should be appended to the existing known set, not\n * replacing.\n *\n * @deprecated\n *\n * @param {Object[]} blocks Array of block objects.\n *\n * @return {Object} Action object.\n */\nexport function receiveBlocks( blocks ) {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).receiveBlocks', {\n\t\tsince: '5.9',\n\t\talternative: 'resetBlocks or insertBlocks',\n\t} );\n\n\treturn {\n\t\ttype: 'RECEIVE_BLOCKS',\n\t\tblocks,\n\t};\n}\n\n/**\n * Action that updates attributes of multiple blocks with the specified client IDs.\n *\n * @param {string|string[]} clientIds     Block client IDs.\n * @param {Object}          attributes    Block attributes to be merged. Should be keyed by clientIds if\n *                                        uniqueByBlock is true.\n * @param {boolean}         uniqueByBlock true if each block in clientIds array has a unique set of attributes\n * @return {Object} Action object.\n */\nexport function updateBlockAttributes(\n\tclientIds,\n\tattributes,\n\tuniqueByBlock = false\n) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK_ATTRIBUTES',\n\t\tclientIds: castArray( clientIds ),\n\t\tattributes,\n\t\tuniqueByBlock,\n\t};\n}\n\n/**\n * Action that updates the block with the specified client ID.\n *\n * @param {string} clientId Block client ID.\n * @param {Object} updates  Block attributes to be merged.\n *\n * @return {Object} Action object.\n */\nexport function updateBlock( clientId, updates ) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK',\n\t\tclientId,\n\t\tupdates,\n\t};\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID has been selected, optionally accepting a position\n * value reflecting its selection directionality. An initialPosition of -1\n * reflects a reverse selection.\n *\n * @param {string}    clientId        Block client ID.\n * @param {0|-1|null} initialPosition Optional initial position. Pass as -1 to\n *                                    reflect reverse selection.\n *\n * @return {Object} Action object.\n */\nexport function selectBlock( clientId, initialPosition = 0 ) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'SELECT_BLOCK',\n\t\tinitialPosition,\n\t\tclientId,\n\t};\n}\n\n/**\n * Yields action objects used in signalling that the block preceding the given\n * clientId (or optionally, its first parent from bottom to top)\n * should be selected.\n *\n * @param {string}  clientId         Block client ID.\n * @param {boolean} fallbackToParent If true, select the first parent if there is no previous block.\n */\nexport const selectPreviousBlock =\n\t( clientId, fallbackToParent = false ) =>\n\t( { select, dispatch } ) => {\n\t\tconst previousBlockClientId =\n\t\t\tselect.getPreviousBlockClientId( clientId );\n\t\tif ( previousBlockClientId ) {\n\t\t\tdispatch.selectBlock( previousBlockClientId, -1 );\n\t\t} else if ( fallbackToParent ) {\n\t\t\tconst firstParentClientId = select.getBlockRootClientId( clientId );\n\t\t\tif ( firstParentClientId ) {\n\t\t\t\tdispatch.selectBlock( firstParentClientId, -1 );\n\t\t\t}\n\t\t}\n\t};\n\n/**\n * Yields action objects used in signalling that the block following the given\n * clientId should be selected.\n *\n * @param {string} clientId Block client ID.\n */\nexport const selectNextBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tconst nextBlockClientId = select.getNextBlockClientId( clientId );\n\t\tif ( nextBlockClientId ) {\n\t\t\tdispatch.selectBlock( nextBlockClientId );\n\t\t}\n\t};\n\n/**\n * Action that starts block multi-selection.\n *\n * @return {Object} Action object.\n */\nexport function startMultiSelect() {\n\treturn {\n\t\ttype: 'START_MULTI_SELECT',\n\t};\n}\n\n/**\n * Action that stops block multi-selection.\n *\n * @return {Object} Action object.\n */\nexport function stopMultiSelect() {\n\treturn {\n\t\ttype: 'STOP_MULTI_SELECT',\n\t};\n}\n\n/**\n * Action that changes block multi-selection.\n *\n * @param {string}      start                         First block of the multi selection.\n * @param {string}      end                           Last block of the multiselection.\n * @param {number|null} __experimentalInitialPosition Optional initial position. Pass as null to skip focus within editor canvas.\n */\nexport const multiSelect =\n\t( start, end, __experimentalInitialPosition = 0 ) =>\n\t( { select, dispatch } ) => {\n\t\tconst startBlockRootClientId = select.getBlockRootClientId( start );\n\t\tconst endBlockRootClientId = select.getBlockRootClientId( end );\n\n\t\t// Only allow block multi-selections at the same level.\n\t\tif ( startBlockRootClientId !== endBlockRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: 'MULTI_SELECT',\n\t\t\tstart,\n\t\t\tend,\n\t\t\tinitialPosition: __experimentalInitialPosition,\n\t\t} );\n\n\t\tconst blockCount = select.getSelectedBlockCount();\n\n\t\tspeak(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: number of selected blocks */\n\t\t\t\t_n( '%s block selected.', '%s blocks selected.', blockCount ),\n\t\t\t\tblockCount\n\t\t\t),\n\t\t\t'assertive'\n\t\t);\n\t};\n\n/**\n * Action that clears the block selection.\n *\n * @return {Object} Action object.\n */\nexport function clearSelectedBlock() {\n\treturn {\n\t\ttype: 'CLEAR_SELECTED_BLOCK',\n\t};\n}\n\n/**\n * Action that enables or disables block selection.\n *\n * @param {boolean} [isSelectionEnabled=true] Whether block selection should\n *                                            be enabled.\n *\n * @return {Object} Action object.\n */\nexport function toggleSelection( isSelectionEnabled = true ) {\n\treturn {\n\t\ttype: 'TOGGLE_SELECTION',\n\t\tisSelectionEnabled,\n\t};\n}\n\nfunction getBlocksWithDefaultStylesApplied( blocks, blockEditorSettings ) {\n\tconst preferredStyleVariations =\n\t\tblockEditorSettings?.__experimentalPreferredStyleVariations?.value ??\n\t\t{};\n\treturn blocks.map( ( block ) => {\n\t\tconst blockName = block.name;\n\t\tif ( ! hasBlockSupport( blockName, 'defaultStylePicker', true ) ) {\n\t\t\treturn block;\n\t\t}\n\t\tif ( ! preferredStyleVariations[ blockName ] ) {\n\t\t\treturn block;\n\t\t}\n\t\tconst className = block.attributes?.className;\n\t\tif ( className?.includes( 'is-style-' ) ) {\n\t\t\treturn block;\n\t\t}\n\t\tconst { attributes = {} } = block;\n\t\tconst blockStyle = preferredStyleVariations[ blockName ];\n\t\treturn {\n\t\t\t...block,\n\t\t\tattributes: {\n\t\t\t\t...attributes,\n\t\t\t\tclassName: `${\n\t\t\t\t\tclassName || ''\n\t\t\t\t} is-style-${ blockStyle }`.trim(),\n\t\t\t},\n\t\t};\n\t} );\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Action that replaces given blocks with one or more replacement blocks.\n *\n * @param {(string|string[])} clientIds       Block client ID(s) to replace.\n * @param {(Object|Object[])} blocks          Replacement block(s).\n * @param {number}            indexToSelect   Index of replacement block to select.\n * @param {0|-1|null}         initialPosition Index of caret after in the selected block after the operation.\n * @param {?Object}           meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport const replaceBlocks =\n\t( clientIds, blocks, indexToSelect, initialPosition = 0, meta ) =>\n\t( { select, dispatch } ) => {\n\t\t/* eslint-enable jsdoc/valid-types */\n\t\tclientIds = castArray( clientIds );\n\t\tblocks = getBlocksWithDefaultStylesApplied(\n\t\t\tcastArray( blocks ),\n\t\t\tselect.getSettings()\n\t\t);\n\t\tconst rootClientId = select.getBlockRootClientId( clientIds[ 0 ] );\n\t\t// Replace is valid if the new blocks can be inserted in the root block.\n\t\tfor ( let index = 0; index < blocks.length; index++ ) {\n\t\t\tconst block = blocks[ index ];\n\t\t\tconst canInsertBlock = select.canInsertBlockType(\n\t\t\t\tblock.name,\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tif ( ! canInsertBlock ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdispatch( {\n\t\t\ttype: 'REPLACE_BLOCKS',\n\t\t\tclientIds,\n\t\t\tblocks,\n\t\t\ttime: Date.now(),\n\t\t\tindexToSelect,\n\t\t\tinitialPosition,\n\t\t\tmeta,\n\t\t} );\n\t\tdispatch( ensureDefaultBlock() );\n\t};\n\n/**\n * Action that replaces a single block with one or more replacement blocks.\n *\n * @param {(string|string[])} clientId Block client ID to replace.\n * @param {(Object|Object[])} block    Replacement block(s).\n *\n * @return {Object} Action object.\n */\nexport function replaceBlock( clientId, block ) {\n\treturn replaceBlocks( clientId, block );\n}\n\n/**\n * Higher-order action creator which, given the action type to dispatch creates\n * an action creator for managing block movement.\n *\n * @param {string} type Action type to dispatch.\n *\n * @return {Function} Action creator.\n */\nconst createOnMove =\n\t( type ) =>\n\t( clientIds, rootClientId ) =>\n\t( { select, dispatch } ) => {\n\t\t// If one of the blocks is locked or the parent is locked, we cannot move any block.\n\t\tconst canMoveBlocks = select.canMoveBlocks( clientIds, rootClientId );\n\t\tif ( ! canMoveBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch( { type, clientIds: castArray( clientIds ), rootClientId } );\n\t};\n\nexport const moveBlocksDown = createOnMove( 'MOVE_BLOCKS_DOWN' );\nexport const moveBlocksUp = createOnMove( 'MOVE_BLOCKS_UP' );\n\n/**\n * Action that moves given blocks to a new position.\n *\n * @param {?string} clientIds        The client IDs of the blocks.\n * @param {?string} fromRootClientId Root client ID source.\n * @param {?string} toRootClientId   Root client ID destination.\n * @param {number}  index            The index to move the blocks to.\n */\nexport const moveBlocksToPosition =\n\t( clientIds, fromRootClientId = '', toRootClientId = '', index ) =>\n\t( { select, dispatch } ) => {\n\t\tconst canMoveBlocks = select.canMoveBlocks(\n\t\t\tclientIds,\n\t\t\tfromRootClientId\n\t\t);\n\n\t\t// If one of the blocks is locked or the parent is locked, we cannot move any block.\n\t\tif ( ! canMoveBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If moving inside the same root block the move is always possible.\n\t\tif ( fromRootClientId !== toRootClientId ) {\n\t\t\tconst canRemoveBlocks = select.canRemoveBlocks(\n\t\t\t\tclientIds,\n\t\t\t\tfromRootClientId\n\t\t\t);\n\n\t\t\t// If we're moving to another block, it means we're deleting blocks from\n\t\t\t// the original block, so we need to check if removing is possible.\n\t\t\tif ( ! canRemoveBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst canInsertBlocks = select.canInsertBlocks(\n\t\t\t\tclientIds,\n\t\t\t\ttoRootClientId\n\t\t\t);\n\n\t\t\t// If moving to other parent block, the move is possible if we can insert a block of the same type inside the new parent block.\n\t\t\tif ( ! canInsertBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: 'MOVE_BLOCKS_TO_POSITION',\n\t\t\tfromRootClientId,\n\t\t\ttoRootClientId,\n\t\t\tclientIds,\n\t\t\tindex,\n\t\t} );\n\t};\n\n/**\n * Action that moves given block to a new position.\n *\n * @param {?string} clientId         The client ID of the block.\n * @param {?string} fromRootClientId Root client ID source.\n * @param {?string} toRootClientId   Root client ID destination.\n * @param {number}  index            The index to move the block to.\n */\nexport function moveBlockToPosition(\n\tclientId,\n\tfromRootClientId = '',\n\ttoRootClientId = '',\n\tindex\n) {\n\treturn moveBlocksToPosition(\n\t\t[ clientId ],\n\t\tfromRootClientId,\n\t\ttoRootClientId,\n\t\tindex\n\t);\n}\n\n/**\n * Action that inserts a single block, optionally at a specific index respective a root block list.\n *\n * Only allowed blocks are inserted. The action may fail silently for blocks that are not allowed or if\n * a templateLock is active on the block list.\n *\n * @param {Object}   block           Block object to insert.\n * @param {?number}  index           Index at which block should be inserted.\n * @param {?string}  rootClientId    Optional root client ID of block list on which to insert.\n * @param {?boolean} updateSelection If true block selection will be updated. If false, block selection will not change. Defaults to true.\n * @param {?Object}  meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport function insertBlock(\n\tblock,\n\tindex,\n\trootClientId,\n\tupdateSelection,\n\tmeta\n) {\n\treturn insertBlocks(\n\t\t[ block ],\n\t\tindex,\n\t\trootClientId,\n\t\tupdateSelection,\n\t\t0,\n\t\tmeta\n\t);\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Action that inserts an array of blocks, optionally at a specific index respective a root block list.\n *\n * Only allowed blocks are inserted. The action may fail silently for blocks that are not allowed or if\n * a templateLock is active on the block list.\n *\n * @param {Object[]}  blocks          Block objects to insert.\n * @param {?number}   index           Index at which block should be inserted.\n * @param {?string}   rootClientId    Optional root client ID of block list on which to insert.\n * @param {?boolean}  updateSelection If true block selection will be updated.  If false, block selection will not change. Defaults to true.\n * @param {0|-1|null} initialPosition Initial focus position. Setting it to null prevent focusing the inserted block.\n * @param {?Object}   meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport const insertBlocks =\n\t(\n\t\tblocks,\n\t\tindex,\n\t\trootClientId,\n\t\tupdateSelection = true,\n\t\tinitialPosition = 0,\n\t\tmeta\n\t) =>\n\t( { select, dispatch } ) => {\n\t\t/* eslint-enable jsdoc/valid-types */\n\t\tif ( initialPosition !== null && typeof initialPosition === 'object' ) {\n\t\t\tmeta = initialPosition;\n\t\t\tinitialPosition = 0;\n\t\t\tdeprecated(\n\t\t\t\t\"meta argument in wp.data.dispatch('core/block-editor')\",\n\t\t\t\t{\n\t\t\t\t\tsince: '5.8',\n\t\t\t\t\thint: 'The meta argument is now the 6th argument of the function',\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tblocks = getBlocksWithDefaultStylesApplied(\n\t\t\tcastArray( blocks ),\n\t\t\tselect.getSettings()\n\t\t);\n\t\tconst allowedBlocks = [];\n\t\tfor ( const block of blocks ) {\n\t\t\tconst isValid = select.canInsertBlockType(\n\t\t\t\tblock.name,\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tif ( isValid ) {\n\t\t\t\tallowedBlocks.push( block );\n\t\t\t}\n\t\t}\n\t\tif ( allowedBlocks.length ) {\n\t\t\tdispatch( {\n\t\t\t\ttype: 'INSERT_BLOCKS',\n\t\t\t\tblocks: allowedBlocks,\n\t\t\t\tindex,\n\t\t\t\trootClientId,\n\t\t\t\ttime: Date.now(),\n\t\t\t\tupdateSelection,\n\t\t\t\tinitialPosition: updateSelection ? initialPosition : null,\n\t\t\t\tmeta,\n\t\t\t} );\n\t\t}\n\t};\n\n/**\n * Action that shows the insertion point.\n *\n * @param    {?string}         rootClientId           Optional root client ID of block list on\n *                                                    which to insert.\n * @param    {?number}         index                  Index at which block should be inserted.\n * @param    {?Object}         __unstableOptions      Additional options.\n * @property {boolean}         __unstableWithInserter Whether or not to show an inserter button.\n * @property {WPDropOperation} operation              The operation to perform when applied,\n *                                                    either 'insert' or 'replace' for now.\n *\n * @return {Object} Action object.\n */\nexport function showInsertionPoint(\n\trootClientId,\n\tindex,\n\t__unstableOptions = {}\n) {\n\tconst { __unstableWithInserter, operation } = __unstableOptions;\n\treturn {\n\t\ttype: 'SHOW_INSERTION_POINT',\n\t\trootClientId,\n\t\tindex,\n\t\t__unstableWithInserter,\n\t\toperation,\n\t};\n}\n/**\n * Action that hides the insertion point.\n */\nexport const hideInsertionPoint =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! select.isBlockInsertionPointVisible() ) {\n\t\t\treturn;\n\t\t}\n\t\tdispatch( {\n\t\t\ttype: 'HIDE_INSERTION_POINT',\n\t\t} );\n\t};\n\n/**\n * Action that resets the template validity.\n *\n * @param {boolean} isValid template validity flag.\n *\n * @return {Object} Action object.\n */\nexport function setTemplateValidity( isValid ) {\n\treturn {\n\t\ttype: 'SET_TEMPLATE_VALIDITY',\n\t\tisValid,\n\t};\n}\n\n/**\n * Action that synchronizes the template with the list of blocks.\n *\n * @return {Object} Action object.\n */\nexport const synchronizeTemplate =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tdispatch( { type: 'SYNCHRONIZE_TEMPLATE' } );\n\t\tconst blocks = select.getBlocks();\n\t\tconst template = select.getTemplate();\n\t\tconst updatedBlockList = synchronizeBlocksWithTemplate(\n\t\t\tblocks,\n\t\t\ttemplate\n\t\t);\n\n\t\tdispatch.resetBlocks( updatedBlockList );\n\t};\n\n/**\n * Delete the current selection.\n *\n * @param {boolean} isForward\n */\nexport const __unstableDeleteSelection =\n\t( isForward ) =>\n\t( { registry, select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\n\t\tif ( selectionAnchor.clientId === selectionFocus.clientId ) return;\n\n\t\t// It's not mergeable if there's no rich text selection.\n\t\tif (\n\t\t\t! selectionAnchor.attributeKey ||\n\t\t\t! selectionFocus.attributeKey ||\n\t\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\t\ttypeof selectionFocus.offset === 'undefined'\n\t\t)\n\t\t\treturn false;\n\n\t\tconst anchorRootClientId = select.getBlockRootClientId(\n\t\t\tselectionAnchor.clientId\n\t\t);\n\t\tconst focusRootClientId = select.getBlockRootClientId(\n\t\t\tselectionFocus.clientId\n\t\t);\n\n\t\t// It's not mergeable if the selection doesn't start and end in the same\n\t\t// block list. Maybe in the future it should be allowed.\n\t\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockOrder = select.getBlockOrder( anchorRootClientId );\n\t\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\t\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t\t// Reassign selection start and end based on order.\n\t\tlet selectionStart, selectionEnd;\n\n\t\tif ( anchorIndex > focusIndex ) {\n\t\t\tselectionStart = selectionFocus;\n\t\t\tselectionEnd = selectionAnchor;\n\t\t} else {\n\t\t\tselectionStart = selectionAnchor;\n\t\t\tselectionEnd = selectionFocus;\n\t\t}\n\n\t\tconst targetSelection = isForward ? selectionEnd : selectionStart;\n\t\tconst targetBlock = select.getBlock( targetSelection.clientId );\n\t\tconst targetBlockType = getBlockType( targetBlock.name );\n\n\t\tif ( ! targetBlockType.merge ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectionA = selectionStart;\n\t\tconst selectionB = selectionEnd;\n\n\t\tconst blockA = select.getBlock( selectionA.clientId );\n\t\tconst blockAType = getBlockType( blockA.name );\n\n\t\tconst blockB = select.getBlock( selectionB.clientId );\n\t\tconst blockBType = getBlockType( blockB.name );\n\n\t\tconst htmlA = blockA.attributes[ selectionA.attributeKey ];\n\t\tconst htmlB = blockB.attributes[ selectionB.attributeKey ];\n\n\t\tconst attributeDefinitionA =\n\t\t\tblockAType.attributes[ selectionA.attributeKey ];\n\t\tconst attributeDefinitionB =\n\t\t\tblockBType.attributes[ selectionB.attributeKey ];\n\n\t\tlet valueA = create( {\n\t\t\thtml: htmlA,\n\t\t\t...mapRichTextSettings( attributeDefinitionA ),\n\t\t} );\n\t\tlet valueB = create( {\n\t\t\thtml: htmlB,\n\t\t\t...mapRichTextSettings( attributeDefinitionB ),\n\t\t} );\n\n\t\tvalueA = remove( valueA, selectionA.offset, valueA.text.length );\n\t\tvalueB = insert( valueB, START_OF_SELECTED_AREA, 0, selectionB.offset );\n\n\t\t// Clone the blocks so we don't manipulate the original.\n\t\tconst cloneA = cloneBlock( blockA, {\n\t\t\t[ selectionA.attributeKey ]: toHTMLString( {\n\t\t\t\tvalue: valueA,\n\t\t\t\t...mapRichTextSettings( attributeDefinitionA ),\n\t\t\t} ),\n\t\t} );\n\t\tconst cloneB = cloneBlock( blockB, {\n\t\t\t[ selectionB.attributeKey ]: toHTMLString( {\n\t\t\t\tvalue: valueB,\n\t\t\t\t...mapRichTextSettings( attributeDefinitionB ),\n\t\t\t} ),\n\t\t} );\n\n\t\tconst followingBlock = isForward ? cloneA : cloneB;\n\n\t\t// We can only merge blocks with similar types\n\t\t// thus, we transform the block to merge first\n\t\tconst blocksWithTheSameType =\n\t\t\tblockA.name === blockB.name\n\t\t\t\t? [ followingBlock ]\n\t\t\t\t: switchToBlockType( followingBlock, targetBlockType.name );\n\n\t\t// If the block types can not match, do nothing\n\t\tif ( ! blocksWithTheSameType || ! blocksWithTheSameType.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet updatedAttributes;\n\n\t\tif ( isForward ) {\n\t\t\tconst blockToMerge = blocksWithTheSameType.pop();\n\t\t\tupdatedAttributes = targetBlockType.merge(\n\t\t\t\tblockToMerge.attributes,\n\t\t\t\tcloneB.attributes\n\t\t\t);\n\t\t} else {\n\t\t\tconst blockToMerge = blocksWithTheSameType.shift();\n\t\t\tupdatedAttributes = targetBlockType.merge(\n\t\t\t\tcloneA.attributes,\n\t\t\t\tblockToMerge.attributes\n\t\t\t);\n\t\t}\n\n\t\tconst newAttributeKey = retrieveSelectedAttribute( updatedAttributes );\n\n\t\tconst convertedHtml = updatedAttributes[ newAttributeKey ];\n\t\tconst convertedValue = create( {\n\t\t\thtml: convertedHtml,\n\t\t\t...mapRichTextSettings(\n\t\t\t\ttargetBlockType.attributes[ newAttributeKey ]\n\t\t\t),\n\t\t} );\n\t\tconst newOffset = convertedValue.text.indexOf( START_OF_SELECTED_AREA );\n\t\tconst newValue = remove( convertedValue, newOffset, newOffset + 1 );\n\t\tconst newHtml = toHTMLString( {\n\t\t\tvalue: newValue,\n\t\t\t...mapRichTextSettings(\n\t\t\t\ttargetBlockType.attributes[ newAttributeKey ]\n\t\t\t),\n\t\t} );\n\n\t\tupdatedAttributes[ newAttributeKey ] = newHtml;\n\n\t\tconst selectedBlockClientIds = select.getSelectedBlockClientIds();\n\t\tconst replacement = [\n\t\t\t...( isForward ? blocksWithTheSameType : [] ),\n\t\t\t{\n\t\t\t\t// Preserve the original client ID.\n\t\t\t\t...targetBlock,\n\t\t\t\tattributes: {\n\t\t\t\t\t...targetBlock.attributes,\n\t\t\t\t\t...updatedAttributes,\n\t\t\t\t},\n\t\t\t},\n\t\t\t...( isForward ? [] : blocksWithTheSameType ),\n\t\t];\n\n\t\tregistry.batch( () => {\n\t\t\tdispatch.selectionChange(\n\t\t\t\ttargetBlock.clientId,\n\t\t\t\tnewAttributeKey,\n\t\t\t\tnewOffset,\n\t\t\t\tnewOffset\n\t\t\t);\n\n\t\t\tdispatch.replaceBlocks(\n\t\t\t\tselectedBlockClientIds,\n\t\t\t\treplacement,\n\t\t\t\t0, // If we don't pass the `indexToSelect` it will default to the last block.\n\t\t\t\tselect.getSelectedBlocksInitialCaretPosition()\n\t\t\t);\n\t\t} );\n\t};\n\n/**\n * Split the current selection.\n */\nexport const __unstableSplitSelection =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\n\t\tif ( selectionAnchor.clientId === selectionFocus.clientId ) return;\n\n\t\t// Can't split if the selection is not set.\n\t\tif (\n\t\t\t! selectionAnchor.attributeKey ||\n\t\t\t! selectionFocus.attributeKey ||\n\t\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\t\ttypeof selectionFocus.offset === 'undefined'\n\t\t)\n\t\t\treturn;\n\n\t\tconst anchorRootClientId = select.getBlockRootClientId(\n\t\t\tselectionAnchor.clientId\n\t\t);\n\t\tconst focusRootClientId = select.getBlockRootClientId(\n\t\t\tselectionFocus.clientId\n\t\t);\n\n\t\t// It's not splittable if the selection doesn't start and end in the same\n\t\t// block list. Maybe in the future it should be allowed.\n\t\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockOrder = select.getBlockOrder( anchorRootClientId );\n\t\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\t\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t\t// Reassign selection start and end based on order.\n\t\tlet selectionStart, selectionEnd;\n\n\t\tif ( anchorIndex > focusIndex ) {\n\t\t\tselectionStart = selectionFocus;\n\t\t\tselectionEnd = selectionAnchor;\n\t\t} else {\n\t\t\tselectionStart = selectionAnchor;\n\t\t\tselectionEnd = selectionFocus;\n\t\t}\n\n\t\tconst selectionA = selectionStart;\n\t\tconst selectionB = selectionEnd;\n\n\t\tconst blockA = select.getBlock( selectionA.clientId );\n\t\tconst blockAType = getBlockType( blockA.name );\n\n\t\tconst blockB = select.getBlock( selectionB.clientId );\n\t\tconst blockBType = getBlockType( blockB.name );\n\n\t\tconst htmlA = blockA.attributes[ selectionA.attributeKey ];\n\t\tconst htmlB = blockB.attributes[ selectionB.attributeKey ];\n\n\t\tconst attributeDefinitionA =\n\t\t\tblockAType.attributes[ selectionA.attributeKey ];\n\t\tconst attributeDefinitionB =\n\t\t\tblockBType.attributes[ selectionB.attributeKey ];\n\n\t\tlet valueA = create( {\n\t\t\thtml: htmlA,\n\t\t\t...mapRichTextSettings( attributeDefinitionA ),\n\t\t} );\n\t\tlet valueB = create( {\n\t\t\thtml: htmlB,\n\t\t\t...mapRichTextSettings( attributeDefinitionB ),\n\t\t} );\n\n\t\tvalueA = remove( valueA, selectionA.offset, valueA.text.length );\n\t\tvalueB = remove( valueB, 0, selectionB.offset );\n\n\t\tdispatch.replaceBlocks(\n\t\t\tselect.getSelectedBlockClientIds(),\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\t// Preserve the original client ID.\n\t\t\t\t\t...blockA,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\t...blockA.attributes,\n\t\t\t\t\t\t[ selectionA.attributeKey ]: toHTMLString( {\n\t\t\t\t\t\t\tvalue: valueA,\n\t\t\t\t\t\t\t...mapRichTextSettings( attributeDefinitionA ),\n\t\t\t\t\t\t} ),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcreateBlock( getDefaultBlockName() ),\n\t\t\t\t{\n\t\t\t\t\t// Preserve the original client ID.\n\t\t\t\t\t...blockB,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\t...blockB.attributes,\n\t\t\t\t\t\t[ selectionB.attributeKey ]: toHTMLString( {\n\t\t\t\t\t\t\tvalue: valueB,\n\t\t\t\t\t\t\t...mapRichTextSettings( attributeDefinitionB ),\n\t\t\t\t\t\t} ),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\t1, // If we don't pass the `indexToSelect` it will default to the last block.\n\t\t\tselect.getSelectedBlocksInitialCaretPosition()\n\t\t);\n\t};\n\n/**\n * Expand the selection to cover the entire blocks, removing partial selection.\n */\nexport const __unstableExpandSelection =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\t\tdispatch.selectionChange( {\n\t\t\tstart: { clientId: selectionAnchor.clientId },\n\t\t\tend: { clientId: selectionFocus.clientId },\n\t\t} );\n\t};\n\n/**\n * Action that merges two blocks.\n *\n * @param {string} firstBlockClientId  Client ID of the first block to merge.\n * @param {string} secondBlockClientId Client ID of the second block to merge.\n */\nexport const mergeBlocks =\n\t( firstBlockClientId, secondBlockClientId ) =>\n\t( { registry, select, dispatch } ) => {\n\t\tconst blocks = [ firstBlockClientId, secondBlockClientId ];\n\t\tdispatch( { type: 'MERGE_BLOCKS', blocks } );\n\n\t\tconst [ clientIdA, clientIdB ] = blocks;\n\t\tconst blockA = select.getBlock( clientIdA );\n\t\tconst blockAType = getBlockType( blockA.name );\n\n\t\tif ( ! blockAType ) return;\n\n\t\tconst blockB = select.getBlock( clientIdB );\n\n\t\tif ( blockAType && ! blockAType.merge ) {\n\t\t\t// If there's no merge function defined, attempt merging inner\n\t\t\t// blocks.\n\t\t\tconst blocksWithTheSameType = switchToBlockType(\n\t\t\t\tblockB,\n\t\t\t\tblockAType.name\n\t\t\t);\n\t\t\t// Only focus the previous block if it's not mergeable.\n\t\t\tif ( blocksWithTheSameType?.length !== 1 ) {\n\t\t\t\tdispatch.selectBlock( blockA.clientId );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst [ blockWithSameType ] = blocksWithTheSameType;\n\t\t\tif ( blockWithSameType.innerBlocks.length < 1 ) {\n\t\t\t\tdispatch.selectBlock( blockA.clientId );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tregistry.batch( () => {\n\t\t\t\tdispatch.insertBlocks(\n\t\t\t\t\tblockWithSameType.innerBlocks,\n\t\t\t\t\tundefined,\n\t\t\t\t\tclientIdA\n\t\t\t\t);\n\t\t\t\tdispatch.removeBlock( clientIdB );\n\t\t\t\tdispatch.selectBlock(\n\t\t\t\t\tblockWithSameType.innerBlocks[ 0 ].clientId\n\t\t\t\t);\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockBType = getBlockType( blockB.name );\n\t\tconst { clientId, attributeKey, offset } = select.getSelectionStart();\n\t\tconst selectedBlockType =\n\t\t\tclientId === clientIdA ? blockAType : blockBType;\n\t\tconst attributeDefinition =\n\t\t\tselectedBlockType.attributes[ attributeKey ];\n\t\tconst canRestoreTextSelection =\n\t\t\t( clientId === clientIdA || clientId === clientIdB ) &&\n\t\t\tattributeKey !== undefined &&\n\t\t\toffset !== undefined &&\n\t\t\t// We cannot restore text selection if the RichText identifier\n\t\t\t// is not a defined block attribute key. This can be the case if the\n\t\t\t// fallback intance ID is used to store selection (and no RichText\n\t\t\t// identifier is set), or when the identifier is wrong.\n\t\t\t!! attributeDefinition;\n\n\t\tif ( ! attributeDefinition ) {\n\t\t\tif ( typeof attributeKey === 'number' ) {\n\t\t\t\twindow.console.error(\n\t\t\t\t\t`RichText needs an identifier prop that is the block attribute key of the attribute it controls. Its type is expected to be a string, but was ${ typeof attributeKey }`\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\twindow.console.error(\n\t\t\t\t\t'The RichText identifier prop does not match any attributes defined by the block.'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Clone the blocks so we don't insert the character in a \"live\" block.\n\t\tconst cloneA = cloneBlock( blockA );\n\t\tconst cloneB = cloneBlock( blockB );\n\n\t\tif ( canRestoreTextSelection ) {\n\t\t\tconst selectedBlock = clientId === clientIdA ? cloneA : cloneB;\n\t\t\tconst html = selectedBlock.attributes[ attributeKey ];\n\t\t\tconst value = insert(\n\t\t\t\tcreate( {\n\t\t\t\t\thtml,\n\t\t\t\t\t...mapRichTextSettings( attributeDefinition ),\n\t\t\t\t} ),\n\t\t\t\tSTART_OF_SELECTED_AREA,\n\t\t\t\toffset,\n\t\t\t\toffset\n\t\t\t);\n\n\t\t\tselectedBlock.attributes[ attributeKey ] = toHTMLString( {\n\t\t\t\tvalue,\n\t\t\t\t...mapRichTextSettings( attributeDefinition ),\n\t\t\t} );\n\t\t}\n\n\t\t// We can only merge blocks with similar types\n\t\t// thus, we transform the block to merge first.\n\t\tconst blocksWithTheSameType =\n\t\t\tblockA.name === blockB.name\n\t\t\t\t? [ cloneB ]\n\t\t\t\t: switchToBlockType( cloneB, blockA.name );\n\n\t\t// If the block types can not match, do nothing.\n\t\tif ( ! blocksWithTheSameType || ! blocksWithTheSameType.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Calling the merge to update the attributes and remove the block to be merged.\n\t\tconst updatedAttributes = blockAType.merge(\n\t\t\tcloneA.attributes,\n\t\t\tblocksWithTheSameType[ 0 ].attributes\n\t\t);\n\n\t\tif ( canRestoreTextSelection ) {\n\t\t\tconst newAttributeKey =\n\t\t\t\tretrieveSelectedAttribute( updatedAttributes );\n\t\t\tconst convertedHtml = updatedAttributes[ newAttributeKey ];\n\t\t\tconst convertedValue = create( {\n\t\t\t\thtml: convertedHtml,\n\t\t\t\t...mapRichTextSettings(\n\t\t\t\t\tblockAType.attributes[ newAttributeKey ]\n\t\t\t\t),\n\t\t\t} );\n\t\t\tconst newOffset = convertedValue.text.indexOf(\n\t\t\t\tSTART_OF_SELECTED_AREA\n\t\t\t);\n\t\t\tconst newValue = remove( convertedValue, newOffset, newOffset + 1 );\n\t\t\tconst newHtml = toHTMLString( {\n\t\t\t\tvalue: newValue,\n\t\t\t\t...mapRichTextSettings(\n\t\t\t\t\tblockAType.attributes[ newAttributeKey ]\n\t\t\t\t),\n\t\t\t} );\n\n\t\t\tupdatedAttributes[ newAttributeKey ] = newHtml;\n\n\t\t\tdispatch.selectionChange(\n\t\t\t\tblockA.clientId,\n\t\t\t\tnewAttributeKey,\n\t\t\t\tnewOffset,\n\t\t\t\tnewOffset\n\t\t\t);\n\t\t}\n\n\t\tdispatch.replaceBlocks(\n\t\t\t[ blockA.clientId, blockB.clientId ],\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\t...blockA,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\t...blockA.attributes,\n\t\t\t\t\t\t...updatedAttributes,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t...blocksWithTheSameType.slice( 1 ),\n\t\t\t],\n\t\t\t0 // If we don't pass the `indexToSelect` it will default to the last block.\n\t\t);\n\t};\n\n/**\n * Yields action objects used in signalling that the blocks corresponding to\n * the set of specified client IDs are to be removed.\n *\n * @param {string|string[]} clientIds      Client IDs of blocks to remove.\n * @param {boolean}         selectPrevious True if the previous block\n *                                         or the immediate parent\n *                                         (if no previous block exists)\n *                                         should be selected\n *                                         when a block is removed.\n */\nexport const removeBlocks =\n\t( clientIds, selectPrevious = true ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientIds || ! clientIds.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tclientIds = castArray( clientIds );\n\t\tconst rootClientId = select.getBlockRootClientId( clientIds[ 0 ] );\n\t\tconst canRemoveBlocks = select.canRemoveBlocks(\n\t\t\tclientIds,\n\t\t\trootClientId\n\t\t);\n\n\t\tif ( ! canRemoveBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( selectPrevious ) {\n\t\t\tdispatch.selectPreviousBlock( clientIds[ 0 ], selectPrevious );\n\t\t}\n\n\t\tdispatch( { type: 'REMOVE_BLOCKS', clientIds } );\n\n\t\t// To avoid a focus loss when removing the last block, assure there is\n\t\t// always a default block if the last of the blocks have been removed.\n\t\tdispatch( ensureDefaultBlock() );\n\t};\n\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID is to be removed.\n *\n * @param {string}  clientId       Client ID of block to remove.\n * @param {boolean} selectPrevious True if the previous block should be\n *                                 selected when a block is removed.\n *\n * @return {Object} Action object.\n */\nexport function removeBlock( clientId, selectPrevious ) {\n\treturn removeBlocks( [ clientId ], selectPrevious );\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that the inner blocks with the\n * specified client ID should be replaced.\n *\n * @param {string}    rootClientId    Client ID of the block whose InnerBlocks will re replaced.\n * @param {Object[]}  blocks          Block objects to insert as new InnerBlocks\n * @param {?boolean}  updateSelection If true block selection will be updated. If false, block selection will not change. Defaults to false.\n * @param {0|-1|null} initialPosition Initial block position.\n * @return {Object} Action object.\n */\nexport function replaceInnerBlocks(\n\trootClientId,\n\tblocks,\n\tupdateSelection = false,\n\tinitialPosition = 0\n) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'REPLACE_INNER_BLOCKS',\n\t\trootClientId,\n\t\tblocks,\n\t\tupdateSelection,\n\t\tinitialPosition: updateSelection ? initialPosition : null,\n\t\ttime: Date.now(),\n\t};\n}\n\n/**\n * Returns an action object used to toggle the block editing mode between\n * visual and HTML modes.\n *\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Action object.\n */\nexport function toggleBlockMode( clientId ) {\n\treturn {\n\t\ttype: 'TOGGLE_BLOCK_MODE',\n\t\tclientId,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has begun to type.\n *\n * @return {Object} Action object.\n */\nexport function startTyping() {\n\treturn {\n\t\ttype: 'START_TYPING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has stopped typing.\n *\n * @return {Object} Action object.\n */\nexport function stopTyping() {\n\treturn {\n\t\ttype: 'STOP_TYPING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has begun to drag blocks.\n *\n * @param {string[]} clientIds An array of client ids being dragged\n *\n * @return {Object} Action object.\n */\nexport function startDraggingBlocks( clientIds = [] ) {\n\treturn {\n\t\ttype: 'START_DRAGGING_BLOCKS',\n\t\tclientIds,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has stopped dragging blocks.\n *\n * @return {Object} Action object.\n */\nexport function stopDraggingBlocks() {\n\treturn {\n\t\ttype: 'STOP_DRAGGING_BLOCKS',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the caret has entered formatted text.\n *\n * @deprecated\n *\n * @return {Object} Action object.\n */\nexport function enterFormattedText() {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).enterFormattedText', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t} );\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user caret has exited formatted text.\n *\n * @deprecated\n *\n * @return {Object} Action object.\n */\nexport function exitFormattedText() {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).exitFormattedText', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t} );\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Action that changes the position of the user caret.\n *\n * @param {string|WPSelection} clientId     The selected block client ID.\n * @param {string}             attributeKey The selected block attribute key.\n * @param {number}             startOffset  The start offset.\n * @param {number}             endOffset    The end offset.\n *\n * @return {Object} Action object.\n */\nexport function selectionChange(\n\tclientId,\n\tattributeKey,\n\tstartOffset,\n\tendOffset\n) {\n\tif ( typeof clientId === 'string' ) {\n\t\treturn {\n\t\t\ttype: 'SELECTION_CHANGE',\n\t\t\tclientId,\n\t\t\tattributeKey,\n\t\t\tstartOffset,\n\t\t\tendOffset,\n\t\t};\n\t}\n\n\treturn { type: 'SELECTION_CHANGE', ...clientId };\n}\n\n/**\n * Action that adds a new block of the default type to the block list.\n *\n * @param {?Object} attributes   Optional attributes of the block to assign.\n * @param {?string} rootClientId Optional root client ID of block list on which\n *                               to append.\n * @param {?number} index        Optional index where to insert the default block.\n */\nexport const insertDefaultBlock =\n\t( attributes, rootClientId, index ) =>\n\t( { dispatch } ) => {\n\t\t// Abort if there is no default block type (if it has been unregistered).\n\t\tconst defaultBlockName = getDefaultBlockName();\n\t\tif ( ! defaultBlockName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst block = createBlock( defaultBlockName, attributes );\n\n\t\treturn dispatch.insertBlock( block, index, rootClientId );\n\t};\n\n/**\n * Action that changes the nested settings of a given block.\n *\n * @param {string} clientId Client ID of the block whose nested setting are\n *                          being received.\n * @param {Object} settings Object with the new settings for the nested block.\n *\n * @return {Object} Action object\n */\nexport function updateBlockListSettings( clientId, settings ) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK_LIST_SETTINGS',\n\t\tclientId,\n\t\tsettings,\n\t};\n}\n\n/**\n * Action that updates the block editor settings.\n *\n * @param {Object} settings Updated settings\n *\n * @return {Object} Action object\n */\nexport function updateSettings( settings ) {\n\treturn __experimentalUpdateSettings( settings, true );\n}\n\n/**\n * Action that signals that a temporary reusable block has been saved\n * in order to switch its temporary id with the real id.\n *\n * @param {string} id        Reusable block's id.\n * @param {string} updatedId Updated block's id.\n *\n * @return {Object} Action object.\n */\nexport function __unstableSaveReusableBlock( id, updatedId ) {\n\treturn {\n\t\ttype: 'SAVE_REUSABLE_BLOCK_SUCCESS',\n\t\tid,\n\t\tupdatedId,\n\t};\n}\n\n/**\n * Action that marks the last block change explicitly as persistent.\n *\n * @return {Object} Action object.\n */\nexport function __unstableMarkLastChangeAsPersistent() {\n\treturn { type: 'MARK_LAST_CHANGE_AS_PERSISTENT' };\n}\n\n/**\n * Action that signals that the next block change should be marked explicitly as not persistent.\n *\n * @return {Object} Action object.\n */\nexport function __unstableMarkNextChangeAsNotPersistent() {\n\treturn { type: 'MARK_NEXT_CHANGE_AS_NOT_PERSISTENT' };\n}\n\n/**\n * Action that marks the last block change as an automatic change, meaning it was not\n * performed by the user, and can be undone using the `Escape` and `Backspace` keys.\n * This action must be called after the change was made, and any actions that are a\n * consequence of it, so it is recommended to be called at the next idle period to ensure all\n * selection changes have been recorded.\n */\nexport const __unstableMarkAutomaticChange =\n\t() =>\n\t( { dispatch } ) => {\n\t\tdispatch( { type: 'MARK_AUTOMATIC_CHANGE' } );\n\t\tconst { requestIdleCallback = ( cb ) => setTimeout( cb, 100 ) } =\n\t\t\twindow;\n\t\trequestIdleCallback( () => {\n\t\t\tdispatch( { type: 'MARK_AUTOMATIC_CHANGE_FINAL' } );\n\t\t} );\n\t};\n\n/**\n * Action that enables or disables the navigation mode.\n *\n * @param {boolean} isNavigationMode Enable/Disable navigation mode.\n */\nexport const setNavigationMode =\n\t( isNavigationMode = true ) =>\n\t( { dispatch } ) => {\n\t\tdispatch.__unstableSetEditorMode(\n\t\t\tisNavigationMode ? 'navigation' : 'edit'\n\t\t);\n\t};\n\n/**\n * Action that sets the editor mode\n *\n * @param {string} mode Editor mode\n */\nexport const __unstableSetEditorMode =\n\t( mode ) =>\n\t( { dispatch, select } ) => {\n\t\t// When switching to zoom-out mode, we need to select the root block\n\t\tif ( mode === 'zoom-out' ) {\n\t\t\tconst firstSelectedClientId = select.getBlockSelectionStart();\n\t\t\tif ( firstSelectedClientId ) {\n\t\t\t\tdispatch.selectBlock(\n\t\t\t\t\tselect.getBlockHierarchyRootClientId(\n\t\t\t\t\t\tfirstSelectedClientId\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tdispatch( { type: 'SET_EDITOR_MODE', mode } );\n\n\t\tif ( mode === 'navigation' ) {\n\t\t\tspeak(\n\t\t\t\t__(\n\t\t\t\t\t'You are currently in navigation mode. Navigate blocks using the Tab key and Arrow keys. Use Left and Right Arrow keys to move between nesting levels. To exit navigation mode and edit the selected block, press Enter.'\n\t\t\t\t)\n\t\t\t);\n\t\t} else if ( mode === 'edit' ) {\n\t\t\tspeak(\n\t\t\t\t__(\n\t\t\t\t\t'You are currently in edit mode. To return to the navigation mode, press Escape.'\n\t\t\t\t)\n\t\t\t);\n\t\t} else if ( mode === 'zoom-out' ) {\n\t\t\tspeak( __( 'You are currently in zoom-out mode.' ) );\n\t\t}\n\t};\n\n/**\n * Action that enables or disables the block moving mode.\n *\n * @param {string|null} hasBlockMovingClientId Enable/Disable block moving mode.\n */\nexport const setBlockMovingClientId =\n\t( hasBlockMovingClientId = null ) =>\n\t( { dispatch } ) => {\n\t\tdispatch( { type: 'SET_BLOCK_MOVING_MODE', hasBlockMovingClientId } );\n\n\t\tif ( hasBlockMovingClientId ) {\n\t\t\tspeak(\n\t\t\t\t__(\n\t\t\t\t\t'Use the Tab key and Arrow keys to choose new block location. Use Left and Right Arrow keys to move between nesting levels. Once location is selected press Enter or Space to move the block.'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t};\n\n/**\n * Action that duplicates a list of blocks.\n *\n * @param {string[]} clientIds\n * @param {boolean}  updateSelection\n */\nexport const duplicateBlocks =\n\t( clientIds, updateSelection = true ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientIds || ! clientIds.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return early if blocks don't exist.\n\t\tconst blocks = select.getBlocksByClientId( clientIds );\n\t\tif ( blocks.some( ( block ) => ! block ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return early if blocks don't support multiple usage.\n\t\tconst blockNames = blocks.map( ( block ) => block.name );\n\t\tif (\n\t\t\tblockNames.some(\n\t\t\t\t( blockName ) =>\n\t\t\t\t\t! hasBlockSupport( blockName, 'multiple', true )\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rootClientId = select.getBlockRootClientId( clientIds[ 0 ] );\n\t\tconst clientIdsArray = castArray( clientIds );\n\t\tconst lastSelectedIndex = select.getBlockIndex(\n\t\t\tclientIdsArray[ clientIdsArray.length - 1 ]\n\t\t);\n\t\tconst clonedBlocks = blocks.map( ( block ) =>\n\t\t\t__experimentalCloneSanitizedBlock( block )\n\t\t);\n\t\tdispatch.insertBlocks(\n\t\t\tclonedBlocks,\n\t\t\tlastSelectedIndex + 1,\n\t\t\trootClientId,\n\t\t\tupdateSelection\n\t\t);\n\t\tif ( clonedBlocks.length > 1 && updateSelection ) {\n\t\t\tdispatch.multiSelect(\n\t\t\t\tclonedBlocks[ 0 ].clientId,\n\t\t\t\tclonedBlocks[ clonedBlocks.length - 1 ].clientId\n\t\t\t);\n\t\t}\n\t\treturn clonedBlocks.map( ( block ) => block.clientId );\n\t};\n\n/**\n * Action that inserts an empty block before a given block.\n *\n * @param {string} clientId\n */\nexport const insertBeforeBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientId ) {\n\t\t\treturn;\n\t\t}\n\t\tconst rootClientId = select.getBlockRootClientId( clientId );\n\t\tconst isLocked = select.getTemplateLock( rootClientId );\n\t\tif ( isLocked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstSelectedIndex = select.getBlockIndex( clientId );\n\t\treturn dispatch.insertDefaultBlock(\n\t\t\t{},\n\t\t\trootClientId,\n\t\t\tfirstSelectedIndex\n\t\t);\n\t};\n\n/**\n * Action that inserts an empty block after a given block.\n *\n * @param {string} clientId\n */\nexport const insertAfterBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientId ) {\n\t\t\treturn;\n\t\t}\n\t\tconst rootClientId = select.getBlockRootClientId( clientId );\n\t\tconst isLocked = select.getTemplateLock( rootClientId );\n\t\tif ( isLocked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstSelectedIndex = select.getBlockIndex( clientId );\n\t\treturn dispatch.insertDefaultBlock(\n\t\t\t{},\n\t\t\trootClientId,\n\t\t\tfirstSelectedIndex + 1\n\t\t);\n\t};\n\n/**\n * Action that toggles the highlighted block state.\n *\n * @param {string}  clientId      The block's clientId.\n * @param {boolean} isHighlighted The highlight state.\n */\nexport function toggleBlockHighlight( clientId, isHighlighted ) {\n\treturn {\n\t\ttype: 'TOGGLE_BLOCK_HIGHLIGHT',\n\t\tclientId,\n\t\tisHighlighted,\n\t};\n}\n\n/**\n * Action that \"flashes\" the block with a given `clientId` by rhythmically highlighting it.\n *\n * @param {string} clientId Target block client ID.\n */\nexport const flashBlock =\n\t( clientId ) =>\n\tasync ( { dispatch } ) => {\n\t\tdispatch( toggleBlockHighlight( clientId, true ) );\n\t\tawait new Promise( ( resolve ) => setTimeout( resolve, 150 ) );\n\t\tdispatch( toggleBlockHighlight( clientId, false ) );\n\t};\n\n/**\n * Action that sets whether a block has controlled inner blocks.\n *\n * @param {string}  clientId                 The block's clientId.\n * @param {boolean} hasControlledInnerBlocks True if the block's inner blocks are controlled.\n */\nexport function setHasControlledInnerBlocks(\n\tclientId,\n\thasControlledInnerBlocks\n) {\n\treturn {\n\t\ttype: 'SET_HAS_CONTROLLED_INNER_BLOCKS',\n\t\thasControlledInnerBlocks,\n\t\tclientId,\n\t};\n}\n\n/**\n * Action that sets whether given blocks are visible on the canvas.\n *\n * @param {Record<string,boolean>} updates For each block's clientId, its new visibility setting.\n */\nexport function setBlockVisibility( updates ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_VISIBILITY',\n\t\tupdates,\n\t};\n}\n\n/**\n * Action that sets whether a block is being temporaritly edited as blocks.\n *\n * DO-NOT-USE in production.\n * This action is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n *\n * @param {?string} temporarilyEditingAsBlocks The block's clientId being temporaritly edited as blocks.\n */\nexport function __unstableSetTemporarilyEditingAsBlocks(\n\ttemporarilyEditingAsBlocks\n) {\n\treturn {\n\t\ttype: 'SET_TEMPORARILY_EDITING_AS_BLOCKS',\n\t\ttemporarilyEditingAsBlocks,\n\t};\n}\n","export const STORE_NAME = 'core/block-editor';\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"privateApis\"];","/**\n * WordPress dependencies\n */\nimport { __dangerousOptInToUnstableAPIsOnlyForCoreModules } from '@wordpress/private-apis';\n\nexport const { lock, unlock } =\n\t__dangerousOptInToUnstableAPIsOnlyForCoreModules(\n\t\t'I know using unstable features means my plugin or theme will inevitably break on the next WordPress release.',\n\t\t'@wordpress/block-editor'\n\t);\n","/**\n * WordPress dependencies\n */\nimport { createReduxStore, registerStore } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as privateActions from './private-actions';\nimport * as privateSelectors from './private-selectors';\nimport * as actions from './actions';\nimport { STORE_NAME } from './constants';\nimport { unlock } from '../lock-unlock';\n\n/**\n * Block editor data store configuration.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#registerStore\n */\nexport const storeConfig = {\n\treducer,\n\tselectors,\n\tactions,\n};\n\n/**\n * Store definition for the block editor namespace.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\n */\nexport const store = createReduxStore( STORE_NAME, {\n\t...storeConfig,\n\tpersist: [ 'preferences' ],\n} );\n\n// We will be able to use the `register` function once we switch\n// the \"preferences\" persistence to use the new preferences package.\nconst registeredStore = registerStore( STORE_NAME, {\n\t...storeConfig,\n\tpersist: [ 'preferences' ],\n} );\nunlock( registeredStore ).registerPrivateActions( privateActions );\nunlock( registeredStore ).registerPrivateSelectors( privateSelectors );\n","/**\n * WordPress dependencies\n */\nimport { createContext, useContext } from '@wordpress/element';\n\nexport const DEFAULT_BLOCK_EDIT_CONTEXT = {\n\tname: '',\n\tisSelected: false,\n};\n\nconst Context = createContext( DEFAULT_BLOCK_EDIT_CONTEXT );\nconst { Provider } = Context;\n\nexport { Provider as BlockEditContextProvider };\n\n/**\n * A hook that returns the block edit context.\n *\n * @return {Object} Block edit context\n */\nexport function useBlockEditContext() {\n\treturn useContext( Context );\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit/context';\nimport { store as blockEditorStore } from '../../store';\n\nexport default function useDisplayBlockControls() {\n\tconst { isSelected, clientId, name } = useBlockEditContext();\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tif ( isSelected ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tisFirstMultiSelectedBlock,\n\t\t\t\tgetMultiSelectedBlockClientIds,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tif ( isFirstMultiSelectedBlock( clientId ) ) {\n\t\t\t\treturn getMultiSelectedBlockClientIds().every(\n\t\t\t\t\t( id ) => getBlockName( id ) === name\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\t[ clientId, isSelected, name ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalStyleProvider as StyleProvider,\n\tToolbarGroup,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport useBlockControlsFill from './hook';\n\nexport default function BlockControlsFill( {\n\tgroup = 'default',\n\tcontrols,\n\tchildren,\n\t__experimentalShareWithChildBlocks = false,\n} ) {\n\tconst Fill = useBlockControlsFill(\n\t\tgroup,\n\t\t__experimentalShareWithChildBlocks\n\t);\n\tif ( ! Fill ) {\n\t\treturn null;\n\t}\n\n\tconst innerMarkup = (\n\t\t<>\n\t\t\t{ group === 'default' && <ToolbarGroup controls={ controls } /> }\n\t\t\t{ children }\n\t\t</>\n\t);\n\n\treturn (\n\t\t<StyleProvider document={ document }>\n\t\t\t<Fill>\n\t\t\t\t{ ( fillProps ) => {\n\t\t\t\t\t// `fillProps.forwardedContext` is an array of context provider entries, provided by slot,\n\t\t\t\t\t// that should wrap the fill markup.\n\t\t\t\t\tconst { forwardedContext = [] } = fillProps;\n\t\t\t\t\treturn forwardedContext.reduce(\n\t\t\t\t\t\t( inner, [ Provider, props ] ) => (\n\t\t\t\t\t\t\t<Provider { ...props }>{ inner }</Provider>\n\t\t\t\t\t\t),\n\t\t\t\t\t\tinnerMarkup\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Fill>\n\t\t</StyleProvider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport groups from './groups';\nimport { store as blockEditorStore } from '../../store';\nimport { useBlockEditContext } from '../block-edit/context';\nimport useDisplayBlockControls from '../use-display-block-controls';\n\nexport default function useBlockControlsFill( group, shareWithChildBlocks ) {\n\tconst isDisplayed = useDisplayBlockControls();\n\tconst { clientId } = useBlockEditContext();\n\tconst isParentDisplayed = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockName, hasSelectedInnerBlock } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst { hasBlockSupport } = select( blocksStore );\n\t\t\treturn (\n\t\t\t\tshareWithChildBlocks &&\n\t\t\t\thasBlockSupport(\n\t\t\t\t\tgetBlockName( clientId ),\n\t\t\t\t\t'__experimentalExposeControlsToChildren',\n\t\t\t\t\tfalse\n\t\t\t\t) &&\n\t\t\t\thasSelectedInnerBlock( clientId )\n\t\t\t);\n\t\t},\n\t\t[ shareWithChildBlocks, clientId ]\n\t);\n\n\tif ( isDisplayed ) {\n\t\treturn groups[ group ]?.Fill;\n\t}\n\tif ( isParentDisplayed ) {\n\t\treturn groups.parent.Fill;\n\t}\n\treturn null;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"warning\"];","/**\n * WordPress dependencies\n */\nimport { useContext, useMemo } from '@wordpress/element';\nimport {\n\tprivateApis,\n\t__experimentalToolbarContext as ToolbarContext,\n\tToolbarGroup,\n\t__experimentalUseSlotFills as useSlotFills,\n} from '@wordpress/components';\nimport warning from '@wordpress/warning';\n\n/**\n * Internal dependencies\n */\nimport groups from './groups';\nimport { unlock } from '../../lock-unlock';\n\nconst { ComponentsContext } = unlock( privateApis );\n\nexport default function BlockControlsSlot( { group = 'default', ...props } ) {\n\tconst toolbarState = useContext( ToolbarContext );\n\tconst contextState = useContext( ComponentsContext );\n\tconst fillProps = useMemo(\n\t\t() => ( {\n\t\t\tforwardedContext: [\n\t\t\t\t[ ToolbarContext.Provider, { value: toolbarState } ],\n\t\t\t\t[ ComponentsContext.Provider, { value: contextState } ],\n\t\t\t],\n\t\t} ),\n\t\t[ toolbarState, contextState ]\n\t);\n\n\tconst Slot = groups[ group ]?.Slot;\n\tconst fills = useSlotFills( Slot?.__unstableName );\n\tif ( ! Slot ) {\n\t\twarning( `Unknown BlockControls group \"${ group }\" provided.` );\n\t\treturn null;\n\t}\n\n\tif ( ! fills?.length ) {\n\t\treturn null;\n\t}\n\n\tconst slot = <Slot { ...props } bubblesVirtually fillProps={ fillProps } />;\n\n\tif ( group === 'default' ) {\n\t\treturn slot;\n\t}\n\n\treturn <ToolbarGroup>{ slot }</ToolbarGroup>;\n}\n","/**\n * Internal dependencies\n */\nimport BlockControlsFill from './fill';\nimport BlockControlsSlot from './slot';\n\nconst BlockControls = BlockControlsFill;\n\nBlockControls.Slot = BlockControlsSlot;\n\n// This is just here for backward compatibility.\nexport const BlockFormatControls = ( props ) => {\n\treturn <BlockControlsFill group=\"inline\" { ...props } />;\n};\nBlockFormatControls.Slot = ( props ) => {\n\treturn <BlockControlsSlot group=\"inline\" { ...props } />;\n};\n\nexport default BlockControls;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9 9v6h11V9H9zM4 20h1.5V4H4v16z\" />\n\t</SVG>\n);\n\nexport default justifyLeft;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyCenter = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M20 9h-7.2V4h-1.6v5H4v6h7.2v5h1.6v-5H20z\" />\n\t</SVG>\n);\n\nexport default justifyCenter;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4 15h11V9H4v6zM18.5 4v16H20V4h-1.5z\" />\n\t</SVG>\n);\n\nexport default justifyRight;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifySpaceBetween = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9 15h6V9H9v6zm-5 5h1.5V4H4v16zM18.5 4v16H20V4h-1.5z\" />\n\t</SVG>\n);\n\nexport default justifySpaceBetween;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst justifyStretch = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4 4H5.5V20H4V4ZM7 10L17 10V14L7 14V10ZM20 4H18.5V20H20V4Z\" />\n\t</SVG>\n);\n\nexport default justifyStretch;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst arrowRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z\" />\n\t</SVG>\n);\n\nexport default arrowRight;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst arrowDown = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z\" />\n\t</SVG>\n);\n\nexport default arrowDown;\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Utility to generate the proper CSS selector for layout styles.\n *\n * @param {string} selectors CSS selector, also supports multiple comma-separated selectors.\n * @param {string} append    The string to append.\n *\n * @return {string} - CSS selector.\n */\nexport function appendSelectors( selectors, append = '' ) {\n\t// Ideally we shouldn't need the `.editor-styles-wrapper` increased specificity here\n\t// The problem though is that we have a `.editor-styles-wrapper p { margin: reset; }` style\n\t// it's used to reset the default margin added by wp-admin to paragraphs\n\t// so we need this to be higher speficity otherwise, it won't be applied to paragraphs inside containers\n\t// When the post editor is fully iframed, this extra classname could be removed.\n\n\treturn selectors\n\t\t.split( ',' )\n\t\t.map(\n\t\t\t( subselector ) =>\n\t\t\t\t`.editor-styles-wrapper ${ subselector }${\n\t\t\t\t\tappend ? ` ${ append }` : ''\n\t\t\t\t}`\n\t\t)\n\t\t.join( ',' );\n}\n\n/**\n * Get generated blockGap CSS rules based on layout definitions provided in theme.json\n * Falsy values in the layout definition's spacingStyles rules will be swapped out\n * with the provided `blockGapValue`.\n *\n * @param {string} selector          The CSS selector to target for the generated rules.\n * @param {Object} layoutDefinitions Layout definitions object from theme.json.\n * @param {string} layoutType        The layout type (e.g. `default` or `flex`).\n * @param {string} blockGapValue     The current blockGap value to be applied.\n * @return {string} The generated CSS rules.\n */\nexport function getBlockGapCSS(\n\tselector,\n\tlayoutDefinitions,\n\tlayoutType,\n\tblockGapValue\n) {\n\tlet output = '';\n\tif (\n\t\tlayoutDefinitions?.[ layoutType ]?.spacingStyles?.length &&\n\t\tblockGapValue\n\t) {\n\t\tlayoutDefinitions[ layoutType ].spacingStyles.forEach( ( gapStyle ) => {\n\t\t\toutput += `${ appendSelectors(\n\t\t\t\tselector,\n\t\t\t\tgapStyle.selector.trim()\n\t\t\t) } { `;\n\t\t\toutput += Object.entries( gapStyle.rules )\n\t\t\t\t.map(\n\t\t\t\t\t( [ cssProperty, value ] ) =>\n\t\t\t\t\t\t`${ cssProperty }: ${ value ? value : blockGapValue }`\n\t\t\t\t)\n\t\t\t\t.join( '; ' );\n\t\t\toutput += '; }';\n\t\t} );\n\t}\n\treturn output;\n}\n\n/**\n * Helper method to assign contextual info to clarify\n * alignment settings.\n *\n * Besides checking if `contentSize` and `wideSize` have a\n * value, we now show this information only if their values\n * are not a `css var`. This needs to change when parsing\n * css variables land.\n *\n * @see https://github.com/WordPress/gutenberg/pull/34710#issuecomment-918000752\n *\n * @param {Object} layout The layout object.\n * @return {Object} An object with contextual info per alignment.\n */\nexport function getAlignmentsInfo( layout ) {\n\tconst { contentSize, wideSize, type = 'default' } = layout;\n\tconst alignmentInfo = {};\n\tconst sizeRegex = /^(?!0)\\d+(px|em|rem|vw|vh|%)?$/i;\n\tif ( sizeRegex.test( contentSize ) && type === 'constrained' ) {\n\t\t// translators: %s: container size (i.e. 600px etc)\n\t\talignmentInfo.none = sprintf( __( 'Max %s wide' ), contentSize );\n\t}\n\tif ( sizeRegex.test( wideSize ) ) {\n\t\t// translators: %s: container size (i.e. 600px etc)\n\t\talignmentInfo.wide = sprintf( __( 'Max %s wide' ), wideSize );\n\t}\n\treturn alignmentInfo;\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesAll = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"M3.5 17H5V7H3.5v10zM7 20.5h10V19H7v1.5zM19 7v10h1.5V7H19zM7 5h10V3.5H7V5z\"\n\t\t\tstyle={ { fill: '#1e1e1e' } }\n\t\t/>\n\t</SVG>\n);\n\nexport default sidesAll;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesAxial = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"M8.2 5.3h8V3.8h-8v1.5zm0 14.5h8v-1.5h-8v1.5zm3.5-6.5h1v-1h-1v1zm1-6.5h-1v.5h1v-.5zm-1 4.5h1v-1h-1v1zm0-2h1v-1h-1v1zm0 7.5h1v-.5h-1v.5zm1-2.5h-1v1h1v-1zm-8.5 1.5h1.5v-8H4.2v8zm14.5-8v8h1.5v-8h-1.5zm-5 4.5v-1h-1v1h1zm-6.5 0h.5v-1h-.5v1zm3.5-1v1h1v-1h-1zm6 1h.5v-1h-.5v1zm-8-1v1h1v-1h-1zm6 0v1h1v-1h-1z\"\n\t\t\tstyle={ {\n\t\t\t\tfill: '#1e1e1e',\n\t\t\t\tfillRule: 'evenodd',\n\t\t\t\tclipRule: 'evenodd',\n\t\t\t} }\n\t\t/>\n\t</SVG>\n);\n\nexport default sidesAxial;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesHorizontal = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"M3.5 17H5V7H3.5v10zM19 7v10h1.5V7H19z\"\n\t\t\tstyle={ { fill: '#1e1e1e' } }\n\t\t/>\n\t\t<Path\n\t\t\td=\"M7 20.5h10V19H7v1.5zm0-17V5h10V3.5H7z\"\n\t\t\tstyle={ { fill: '#1e1e1e', opacity: 0.1 } }\n\t\t/>\n\t</SVG>\n);\n\nexport default sidesHorizontal;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesVertical = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"M3.5 17H5V7H3.5v10zM19 7v10h1.5V7H19z\"\n\t\t\tstyle={ { fill: '#1e1e1e', opacity: 0.1 } }\n\t\t/>\n\t\t<Path\n\t\t\td=\"M7 20.5h10V19H7v1.5zm0-17V5h10V3.5H7z\"\n\t\t\tstyle={ { fill: '#1e1e1e' } }\n\t\t/>\n\t</SVG>\n);\n\nexport default sidesVertical;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesTop = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"M3.5 17H5V7H3.5v10zM7 20.5h10V19H7v1.5zM19 7v10h1.5V7H19z\"\n\t\t\tstyle={ { fill: '#1e1e1e', opacity: 0.1 } }\n\t\t/>\n\t\t<Path d=\"M7 5h10V3.5H7V5z\" style={ { fill: '#1e1e1e' } } />\n\t</SVG>\n);\n\nexport default sidesTop;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M20.5 7H19v10h1.5V7z\" style={ { fill: '#1e1e1e' } } />\n\t\t<Path\n\t\t\td=\"M3.5 17H5V7H3.5v10zM7 20.5h10V19H7v1.5zm0-17V5h10V3.5H7z\"\n\t\t\tstyle={ { fill: '#1e1e1e', opacity: 0.1 } }\n\t\t/>\n\t</SVG>\n);\n\nexport default sidesRight;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesBottom = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7 20.5h10V19H7v1.5z\" style={ { fill: '#1e1e1e' } } />\n\t\t<Path\n\t\t\td=\"M3.5 17H5V7H3.5v10zM19 7v10h1.5V7H19zM7 5h10V3.5H7V5z\"\n\t\t\tstyle={ { fill: '#1e1e1e', opacity: 0.1 } }\n\t\t/>\n\t</SVG>\n);\n\nexport default sidesBottom;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst sidesLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M5 17H3.5V7H5v10z\" style={ { fill: '#1e1e1e' } } />\n\t\t<Path\n\t\t\td=\"M7 20.5h10V19H7v1.5zM19 7v10h1.5V7H19zM7 5h10V3.5H7V5z\"\n\t\t\tstyle={ { fill: '#1e1e1e', opacity: 0.1 } }\n\t\t/>\n\t</SVG>\n);\n\nexport default sidesLeft;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tsidesAll,\n\tsidesAxial,\n\tsidesBottom,\n\tsidesHorizontal,\n\tsidesLeft,\n\tsidesRight,\n\tsidesTop,\n\tsidesVertical,\n} from '@wordpress/icons';\n\nexport const ALL_SIDES = [ 'top', 'right', 'bottom', 'left' ];\n\nexport const DEFAULT_VALUES = {\n\ttop: undefined,\n\tright: undefined,\n\tbottom: undefined,\n\tleft: undefined,\n};\n\nexport const ICONS = {\n\tcustom: sidesAll,\n\taxial: sidesAxial,\n\thorizontal: sidesHorizontal,\n\tvertical: sidesVertical,\n\ttop: sidesTop,\n\tright: sidesRight,\n\tbottom: sidesBottom,\n\tleft: sidesLeft,\n};\n\nexport const LABELS = {\n\tdefault: __( 'Spacing control' ),\n\ttop: __( 'Top' ),\n\tbottom: __( 'Bottom' ),\n\tleft: __( 'Left' ),\n\tright: __( 'Right' ),\n\tmixed: __( 'Mixed' ),\n\tvertical: __( 'Vertical' ),\n\thorizontal: __( 'Horizontal' ),\n\taxial: __( 'Horizontal & vertical' ),\n\tcustom: __( 'Custom' ),\n};\n\nexport const VIEWS = {\n\taxial: 'axial',\n\ttop: 'top',\n\tright: 'right',\n\tbottom: 'bottom',\n\tleft: 'left',\n\tcustom: 'custom',\n};\n\n/**\n * Checks is given value is a spacing preset.\n *\n * @param {string} value Value to check\n *\n * @return {boolean} Return true if value is string in format var:preset|spacing|.\n */\nexport function isValueSpacingPreset( value ) {\n\tif ( ! value?.includes ) {\n\t\treturn false;\n\t}\n\treturn value === '0' || value.includes( 'var:preset|spacing|' );\n}\n\n/**\n * Converts a spacing preset into a custom value.\n *\n * @param {string} value        Value to convert\n * @param {Array}  spacingSizes Array of the current spacing preset objects\n *\n * @return {string} Mapping of the spacing preset to its equivalent custom value.\n */\nexport function getCustomValueFromPreset( value, spacingSizes ) {\n\tif ( ! isValueSpacingPreset( value ) ) {\n\t\treturn value;\n\t}\n\n\tconst slug = getSpacingPresetSlug( value );\n\tconst spacingSize = spacingSizes.find(\n\t\t( size ) => String( size.slug ) === slug\n\t);\n\n\treturn spacingSize?.size;\n}\n\n/**\n * Converts a custom value to preset value if one can be found.\n *\n * Returns value as-is if no match is found.\n *\n * @param {string} value        Value to convert\n * @param {Array}  spacingSizes Array of the current spacing preset objects\n *\n * @return {string} The preset value if it can be found.\n */\nexport function getPresetValueFromCustomValue( value, spacingSizes ) {\n\t// Return value as-is if it is already a preset;\n\tif ( isValueSpacingPreset( value ) ) {\n\t\treturn value;\n\t}\n\n\tconst spacingMatch = spacingSizes.find(\n\t\t( size ) => String( size.size ) === String( value )\n\t);\n\n\tif ( spacingMatch?.slug ) {\n\t\treturn `var:preset|spacing|${ spacingMatch.slug }`;\n\t}\n\n\treturn value;\n}\n\n/**\n * Converts a spacing preset into a custom value.\n *\n * @param {string} value Value to convert.\n *\n * @return {string | undefined} CSS var string for given spacing preset value.\n */\nexport function getSpacingPresetCssVar( value ) {\n\tif ( ! value ) {\n\t\treturn;\n\t}\n\n\tconst slug = value.match( /var:preset\\|spacing\\|(.+)/ );\n\n\tif ( ! slug ) {\n\t\treturn value;\n\t}\n\n\treturn `var(--wp--preset--spacing--${ slug[ 1 ] })`;\n}\n\n/**\n * Returns the slug section of the given spacing preset string.\n *\n * @param {string} value Value to extract slug from.\n *\n * @return {string|undefined} The int value of the slug from given spacing preset.\n */\nexport function getSpacingPresetSlug( value ) {\n\tif ( ! value ) {\n\t\treturn;\n\t}\n\n\tif ( value === '0' || value === 'default' ) {\n\t\treturn value;\n\t}\n\n\tconst slug = value.match( /var:preset\\|spacing\\|(.+)/ );\n\n\treturn slug ? slug[ 1 ] : undefined;\n}\n\n/**\n * Converts spacing preset value into a Range component value .\n *\n * @param {string} presetValue  Value to convert to Range value.\n * @param {Array}  spacingSizes Array of current spacing preset value objects.\n *\n * @return {number} The int value for use in Range control.\n */\nexport function getSliderValueFromPreset( presetValue, spacingSizes ) {\n\tif ( presetValue === undefined ) {\n\t\treturn 0;\n\t}\n\tconst slug =\n\t\tparseFloat( presetValue, 10 ) === 0\n\t\t\t? '0'\n\t\t\t: getSpacingPresetSlug( presetValue );\n\tconst sliderValue = spacingSizes.findIndex( ( spacingSize ) => {\n\t\treturn String( spacingSize.slug ) === slug;\n\t} );\n\n\t// Returning NaN rather than undefined as undefined makes range control thumb sit in center\n\treturn sliderValue !== -1 ? sliderValue : NaN;\n}\n\n/**\n * Gets an items with the most occurrence within an array\n * https://stackoverflow.com/a/20762713\n *\n * @param {Array<any>} arr Array of items to check.\n * @return {any} The item with the most occurrences.\n */\nfunction mode( arr ) {\n\treturn arr\n\t\t.sort(\n\t\t\t( a, b ) =>\n\t\t\t\tarr.filter( ( v ) => v === a ).length -\n\t\t\t\tarr.filter( ( v ) => v === b ).length\n\t\t)\n\t\t.pop();\n}\n\n/**\n * Gets the 'all' input value from values data.\n *\n * @param {Object} values Box spacing values\n *\n * @return {string} The most common value from all sides of box.\n */\nexport function getAllRawValue( values = {} ) {\n\treturn mode( Object.values( values ) );\n}\n\n/**\n * Checks to determine if values are mixed.\n *\n * @param {Object} values Box values.\n * @param {Array}  sides  Sides that values relate to.\n *\n * @return {boolean} Whether values are mixed.\n */\nexport function isValuesMixed( values = {}, sides = ALL_SIDES ) {\n\treturn (\n\t\t( Object.values( values ).length >= 1 &&\n\t\t\tObject.values( values ).length < sides.length ) ||\n\t\tnew Set( Object.values( values ) ).size > 1\n\t);\n}\n\n/**\n * Checks to determine if values are defined.\n *\n * @param {Object} values Box values.\n *\n * @return {boolean} Whether values are defined.\n */\nexport function isValuesDefined( values ) {\n\tif ( values === undefined || values === null ) {\n\t\treturn false;\n\t}\n\treturn Object.values( values ).filter( ( value ) => !! value ).length > 0;\n}\n\n/**\n * Determines whether a particular axis has support. If no axis is\n * specified, this function checks if either axis is supported.\n *\n * @param {Array}  sides Supported sides.\n * @param {string} axis  Which axis to check.\n *\n * @return {boolean} Whether there is support for the specified axis or both axes.\n */\nexport function hasAxisSupport( sides, axis ) {\n\tif ( ! sides || ! sides.length ) {\n\t\treturn false;\n\t}\n\n\tconst hasHorizontalSupport =\n\t\tsides.includes( 'horizontal' ) ||\n\t\t( sides.includes( 'left' ) && sides.includes( 'right' ) );\n\n\tconst hasVerticalSupport =\n\t\tsides.includes( 'vertical' ) ||\n\t\t( sides.includes( 'top' ) && sides.includes( 'bottom' ) );\n\n\tif ( axis === 'horizontal' ) {\n\t\treturn hasHorizontalSupport;\n\t}\n\n\tif ( axis === 'vertical' ) {\n\t\treturn hasVerticalSupport;\n\t}\n\n\treturn hasHorizontalSupport || hasVerticalSupport;\n}\n\n/**\n * Determines which menu options should be included in the SidePicker.\n *\n * @param {Array} sides Supported sides.\n *\n * @return {Object} Menu options with each option containing label & icon.\n */\nexport function getSupportedMenuItems( sides ) {\n\tif ( ! sides || ! sides.length ) {\n\t\treturn {};\n\t}\n\n\tconst menuItems = {};\n\n\t// Determine the primary \"side\" menu options.\n\tconst hasHorizontalSupport = hasAxisSupport( sides, 'horizontal' );\n\tconst hasVerticalSupport = hasAxisSupport( sides, 'vertical' );\n\n\tif ( hasHorizontalSupport && hasVerticalSupport ) {\n\t\tmenuItems.axial = { label: LABELS.axial, icon: ICONS.axial };\n\t} else if ( hasHorizontalSupport ) {\n\t\tmenuItems.axial = { label: LABELS.horizontal, icon: ICONS.horizontal };\n\t} else if ( hasVerticalSupport ) {\n\t\tmenuItems.axial = { label: LABELS.vertical, icon: ICONS.vertical };\n\t}\n\n\t// Track whether we have any individual sides so we can omit the custom\n\t// option if required.\n\tlet numberOfIndividualSides = 0;\n\n\tALL_SIDES.forEach( ( side ) => {\n\t\tif ( sides.includes( side ) ) {\n\t\t\tnumberOfIndividualSides += 1;\n\t\t\tmenuItems[ side ] = {\n\t\t\t\tlabel: LABELS[ side ],\n\t\t\t\ticon: ICONS[ side ],\n\t\t\t};\n\t\t}\n\t} );\n\n\t// Add custom item if there are enough sides to warrant a separated view.\n\tif ( numberOfIndividualSides > 1 ) {\n\t\tmenuItems.custom = { label: LABELS.custom, icon: ICONS.custom };\n\t}\n\n\treturn menuItems;\n}\n\n/**\n * Checks if the supported sides are balanced for each axis.\n * - Horizontal - both left and right sides are supported.\n * - Vertical - both top and bottom are supported.\n *\n * @param {Array} sides The supported sides which may be axes as well.\n *\n * @return {boolean} Whether or not the supported sides are balanced.\n */\nexport function hasBalancedSidesSupport( sides = [] ) {\n\tconst counts = { top: 0, right: 0, bottom: 0, left: 0 };\n\tsides.forEach( ( side ) => ( counts[ side ] += 1 ) );\n\n\treturn (\n\t\t( counts.top + counts.bottom ) % 2 === 0 &&\n\t\t( counts.left + counts.right ) % 2 === 0\n\t);\n}\n\n/**\n * Determines which view the SpacingSizesControl should default to on its\n * first render; Axial, Custom, or Single side.\n *\n * @param {Object} values Current side values.\n * @param {Array}  sides  Supported sides.\n *\n * @return {string} View to display.\n */\nexport function getInitialView( values = {}, sides ) {\n\tconst { top, right, bottom, left } = values;\n\tconst sideValues = [ top, right, bottom, left ].filter( Boolean );\n\n\t// Axial ( Horizontal & vertical ).\n\t// - Has axial side support\n\t// - Has axial side values which match\n\t// - Has no values and the supported sides are balanced\n\tconst hasMatchingAxialValues =\n\t\ttop === bottom && left === right && ( !! top || !! left );\n\tconst hasNoValuesAndBalancedSides =\n\t\t! sideValues.length && hasBalancedSidesSupport( sides );\n\n\tif (\n\t\thasAxisSupport( sides ) &&\n\t\t( hasMatchingAxialValues || hasNoValuesAndBalancedSides )\n\t) {\n\t\treturn VIEWS.axial;\n\t}\n\n\t// Single side.\n\t// - Ensure the side returned is the first side that has a value.\n\tif ( sideValues.length === 1 ) {\n\t\tlet side;\n\n\t\tObject.entries( values ).some( ( [ key, value ] ) => {\n\t\t\tside = key;\n\t\t\treturn value !== undefined;\n\t\t} );\n\n\t\treturn side;\n\t}\n\n\t// Only single side supported and no value defined.\n\tif ( sides?.length === 1 && ! sideValues.length ) {\n\t\treturn sides[ 0 ];\n\t}\n\n\t// Default to the Custom (separated sides) view.\n\treturn VIEWS.custom;\n}\n","/**\n * Internal dependencies\n */\nimport { getSpacingPresetCssVar } from '../components/spacing-sizes-control/utils';\n\n/**\n * Returns a BoxControl object value from a given blockGap style value.\n * The string check is for backwards compatibility before Gutenberg supported\n * split gap values (row and column) and the value was a string n + unit.\n *\n * @param {string? | Object?} blockGapValue A block gap string or axial object value, e.g., '10px' or { top: '10px', left: '10px'}.\n * @return {Object|null}                    A value to pass to the BoxControl component.\n */\nexport function getGapBoxControlValueFromStyle( blockGapValue ) {\n\tif ( ! blockGapValue ) {\n\t\treturn null;\n\t}\n\n\tconst isValueString = typeof blockGapValue === 'string';\n\treturn {\n\t\ttop: isValueString ? blockGapValue : blockGapValue?.top,\n\t\tleft: isValueString ? blockGapValue : blockGapValue?.left,\n\t};\n}\n\n/**\n * Returns a CSS value for the `gap` property from a given blockGap style.\n *\n * @param {string? | Object?} blockGapValue A block gap string or axial object value, e.g., '10px' or { top: '10px', left: '10px'}.\n * @param {string?}           defaultValue  A default gap value.\n * @return {string|null}                    The concatenated gap value (row and column).\n */\nexport function getGapCSSValue( blockGapValue, defaultValue = '0' ) {\n\tconst blockGapBoxControlValue =\n\t\tgetGapBoxControlValueFromStyle( blockGapValue );\n\tif ( ! blockGapBoxControlValue ) {\n\t\treturn null;\n\t}\n\n\tconst row =\n\t\tgetSpacingPresetCssVar( blockGapBoxControlValue?.top ) || defaultValue;\n\tconst column =\n\t\tgetSpacingPresetCssVar( blockGapBoxControlValue?.left ) || defaultValue;\n\n\treturn row === column ? row : `${ row } ${ column }`;\n}\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/components';\n\nexport const alignBottom = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M15 4H9v11h6V4zM4 18.5V20h16v-1.5H4z\" />\n\t</SVG>\n);\n\nexport const alignCenter = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M20 11h-5V4H9v7H4v1.5h5V20h6v-7.5h5z\" />\n\t</SVG>\n);\n\nexport const alignTop = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9 20h6V9H9v11zM4 4v1.5h16V4H4z\" />\n\t</SVG>\n);\n\nexport const alignStretch = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4 4L20 4L20 5.5L4 5.5L4 4ZM10 7L14 7L14 17L10 17L10 7ZM20 18.5L4 18.5L4 20L20 20L20 18.5Z\" />\n\t</SVG>\n);\n\nexport const spaceBetween = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7 4H17V8L7 8V4ZM7 16L17 16V20L7 20V16ZM20 11.25H4V12.75H20V11.25Z\" />\n\t</SVG>\n);\n","/**\n * WordPress dependencies\n */\nimport { _x } from '@wordpress/i18n';\nimport { ToolbarGroup, ToolbarDropdownMenu } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport {\n\talignTop,\n\talignCenter,\n\talignBottom,\n\talignStretch,\n\tspaceBetween,\n} from './icons';\n\nconst BLOCK_ALIGNMENTS_CONTROLS = {\n\ttop: {\n\t\ticon: alignTop,\n\t\ttitle: _x( 'Align top', 'Block vertical alignment setting' ),\n\t},\n\tcenter: {\n\t\ticon: alignCenter,\n\t\ttitle: _x( 'Align middle', 'Block vertical alignment setting' ),\n\t},\n\tbottom: {\n\t\ticon: alignBottom,\n\t\ttitle: _x( 'Align bottom', 'Block vertical alignment setting' ),\n\t},\n\tstretch: {\n\t\ticon: alignStretch,\n\t\ttitle: _x( 'Stretch to fill', 'Block vertical alignment setting' ),\n\t},\n\t'space-between': {\n\t\ticon: spaceBetween,\n\t\ttitle: _x( 'Space between', 'Block vertical alignment setting' ),\n\t},\n};\n\nconst DEFAULT_CONTROLS = [ 'top', 'center', 'bottom' ];\nconst DEFAULT_CONTROL = 'top';\n\nfunction BlockVerticalAlignmentUI( {\n\tvalue,\n\tonChange,\n\tcontrols = DEFAULT_CONTROLS,\n\tisCollapsed = true,\n\tisToolbar,\n} ) {\n\tfunction applyOrUnset( align ) {\n\t\treturn () => onChange( value === align ? undefined : align );\n\t}\n\n\tconst activeAlignment = BLOCK_ALIGNMENTS_CONTROLS[ value ];\n\tconst defaultAlignmentControl =\n\t\tBLOCK_ALIGNMENTS_CONTROLS[ DEFAULT_CONTROL ];\n\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\n\tconst extraProps = isToolbar\n\t\t? { isCollapsed }\n\t\t: { popoverProps: { variant: 'toolbar' } };\n\n\treturn (\n\t\t<UIComponent\n\t\t\ticon={\n\t\t\t\tactiveAlignment\n\t\t\t\t\t? activeAlignment.icon\n\t\t\t\t\t: defaultAlignmentControl.icon\n\t\t\t}\n\t\t\tlabel={ _x(\n\t\t\t\t'Change vertical alignment',\n\t\t\t\t'Block vertical alignment setting label'\n\t\t\t) }\n\t\t\tcontrols={ controls.map( ( control ) => {\n\t\t\t\treturn {\n\t\t\t\t\t...BLOCK_ALIGNMENTS_CONTROLS[ control ],\n\t\t\t\t\tisActive: value === control,\n\t\t\t\t\trole: isCollapsed ? 'menuitemradio' : undefined,\n\t\t\t\t\tonClick: applyOrUnset( control ),\n\t\t\t\t};\n\t\t\t} ) }\n\t\t\t{ ...extraProps }\n\t\t/>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-vertical-alignment-toolbar/README.md\n */\nexport default BlockVerticalAlignmentUI;\n","/**\n * Internal dependencies\n */\nimport BlockVerticalAlignmentUI from './ui';\n\nconst BlockVerticalAlignmentControl = ( props ) => {\n\treturn <BlockVerticalAlignmentUI { ...props } isToolbar={ false } />;\n};\n\nconst BlockVerticalAlignmentToolbar = ( props ) => {\n\treturn <BlockVerticalAlignmentUI { ...props } isToolbar />;\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-vertical-alignment-control/README.md\n */\nexport { BlockVerticalAlignmentControl, BlockVerticalAlignmentToolbar };\n","/**\n * WordPress dependencies\n */\nimport { ToolbarDropdownMenu, ToolbarGroup } from '@wordpress/components';\nimport {\n\tjustifyLeft,\n\tjustifyCenter,\n\tjustifyRight,\n\tjustifySpaceBetween,\n\tjustifyStretch,\n} from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\n\nconst icons = {\n\tleft: justifyLeft,\n\tcenter: justifyCenter,\n\tright: justifyRight,\n\t'space-between': justifySpaceBetween,\n\tstretch: justifyStretch,\n};\n\nfunction JustifyContentUI( {\n\tallowedControls = [ 'left', 'center', 'right', 'space-between' ],\n\tisCollapsed = true,\n\tonChange,\n\tvalue,\n\tpopoverProps,\n\tisToolbar,\n} ) {\n\t// If the control is already selected we want a click\n\t// again on the control to deselect the item, so we\n\t// call onChange( undefined )\n\tconst handleClick = ( next ) => {\n\t\tif ( next === value ) {\n\t\t\tonChange( undefined );\n\t\t} else {\n\t\t\tonChange( next );\n\t\t}\n\t};\n\n\tconst icon = value ? icons[ value ] : icons.left;\n\tconst allControls = [\n\t\t{\n\t\t\tname: 'left',\n\t\t\ticon: justifyLeft,\n\t\t\ttitle: __( 'Justify items left' ),\n\t\t\tisActive: 'left' === value,\n\t\t\tonClick: () => handleClick( 'left' ),\n\t\t},\n\t\t{\n\t\t\tname: 'center',\n\t\t\ticon: justifyCenter,\n\t\t\ttitle: __( 'Justify items center' ),\n\t\t\tisActive: 'center' === value,\n\t\t\tonClick: () => handleClick( 'center' ),\n\t\t},\n\t\t{\n\t\t\tname: 'right',\n\t\t\ticon: justifyRight,\n\t\t\ttitle: __( 'Justify items right' ),\n\t\t\tisActive: 'right' === value,\n\t\t\tonClick: () => handleClick( 'right' ),\n\t\t},\n\t\t{\n\t\t\tname: 'space-between',\n\t\t\ticon: justifySpaceBetween,\n\t\t\ttitle: __( 'Space between items' ),\n\t\t\tisActive: 'space-between' === value,\n\t\t\tonClick: () => handleClick( 'space-between' ),\n\t\t},\n\t\t{\n\t\t\tname: 'stretch',\n\t\t\ticon: justifyStretch,\n\t\t\ttitle: __( 'Stretch items' ),\n\t\t\tisActive: 'stretch' === value,\n\t\t\tonClick: () => handleClick( 'stretch' ),\n\t\t},\n\t];\n\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\n\tconst extraProps = isToolbar ? { isCollapsed } : {};\n\n\treturn (\n\t\t<UIComponent\n\t\t\ticon={ icon }\n\t\t\tpopoverProps={ popoverProps }\n\t\t\tlabel={ __( 'Change items justification' ) }\n\t\t\tcontrols={ allControls.filter( ( elem ) =>\n\t\t\t\tallowedControls.includes( elem.name )\n\t\t\t) }\n\t\t\t{ ...extraProps }\n\t\t/>\n\t);\n}\n\nexport default JustifyContentUI;\n","/**\n * Internal dependencies\n */\nimport JustifyContentUI from './ui';\n\nconst JustifyContentControl = ( props ) => {\n\treturn <JustifyContentUI { ...props } isToolbar={ false } />;\n};\n\nconst JustifyToolbar = ( props ) => {\n\treturn <JustifyContentUI { ...props } isToolbar />;\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/justify-content-control/README.md\n */\nexport { JustifyContentControl, JustifyToolbar };\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"lodash\"];","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\t__EXPERIMENTAL_PATHS_WITH_MERGE as PATHS_WITH_MERGE,\n\thasBlockSupport,\n} from '@wordpress/blocks';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit';\nimport { store as blockEditorStore } from '../../store';\n\nconst blockedPaths = [\n\t'color',\n\t'border',\n\t'dimensions',\n\t'typography',\n\t'spacing',\n];\n\nconst deprecatedFlags = {\n\t'color.palette': ( settings ) => settings.colors,\n\t'color.gradients': ( settings ) => settings.gradients,\n\t'color.custom': ( settings ) =>\n\t\tsettings.disableCustomColors === undefined\n\t\t\t? undefined\n\t\t\t: ! settings.disableCustomColors,\n\t'color.customGradient': ( settings ) =>\n\t\tsettings.disableCustomGradients === undefined\n\t\t\t? undefined\n\t\t\t: ! settings.disableCustomGradients,\n\t'typography.fontSizes': ( settings ) => settings.fontSizes,\n\t'typography.customFontSize': ( settings ) =>\n\t\tsettings.disableCustomFontSizes === undefined\n\t\t\t? undefined\n\t\t\t: ! settings.disableCustomFontSizes,\n\t'typography.lineHeight': ( settings ) => settings.enableCustomLineHeight,\n\t'spacing.units': ( settings ) => {\n\t\tif ( settings.enableCustomUnits === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( settings.enableCustomUnits === true ) {\n\t\t\treturn [ 'px', 'em', 'rem', 'vh', 'vw', '%' ];\n\t\t}\n\n\t\treturn settings.enableCustomUnits;\n\t},\n\t'spacing.padding': ( settings ) => settings.enableCustomSpacing,\n};\n\nconst prefixedFlags = {\n\t/*\n\t * These were only available in the plugin\n\t * and can be removed when the minimum WordPress version\n\t * for the plugin is 5.9.\n\t */\n\t'border.customColor': 'border.color',\n\t'border.customStyle': 'border.style',\n\t'border.customWidth': 'border.width',\n\t'typography.customFontStyle': 'typography.fontStyle',\n\t'typography.customFontWeight': 'typography.fontWeight',\n\t'typography.customLetterSpacing': 'typography.letterSpacing',\n\t'typography.customTextDecorations': 'typography.textDecoration',\n\t'typography.customTextTransforms': 'typography.textTransform',\n\t/*\n\t * These were part of WordPress 5.8 and we need to keep them.\n\t */\n\t'border.customRadius': 'border.radius',\n\t'spacing.customMargin': 'spacing.margin',\n\t'spacing.customPadding': 'spacing.padding',\n\t'typography.customLineHeight': 'typography.lineHeight',\n};\n\n/**\n * Remove `custom` prefixes for flags that did not land in 5.8.\n *\n * This provides continued support for `custom` prefixed properties. It will\n * be removed once third party devs have had sufficient time to update themes,\n * plugins, etc.\n *\n * @see https://github.com/WordPress/gutenberg/pull/34485\n *\n * @param {string} path Path to desired value in settings.\n * @return {string}     The value for defined setting.\n */\nconst removeCustomPrefixes = ( path ) => {\n\treturn prefixedFlags[ path ] || path;\n};\n\n/**\n * Hook that retrieves the given setting for the block instance in use.\n *\n * It looks up the settings first in the block instance hierarchy.\n * If none is found, it'll look it up in the block editor store.\n *\n * @param {string} path The path to the setting.\n * @return {any} Returns the value defined for the setting.\n * @example\n * ```js\n * const isEnabled = useSetting( 'typography.dropCap' );\n * ```\n */\nexport default function useSetting( path ) {\n\tconst { name: blockName, clientId } = useBlockEditContext();\n\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tif ( blockedPaths.includes( path ) ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.warn(\n\t\t\t\t\t'Top level useSetting paths are disabled. Please use a subpath to query the information needed.'\n\t\t\t\t);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// 0. Allow third parties to filter the block's settings at runtime.\n\t\t\tlet result = applyFilters(\n\t\t\t\t'blockEditor.useSetting.before',\n\t\t\t\tundefined,\n\t\t\t\tpath,\n\t\t\t\tclientId,\n\t\t\t\tblockName\n\t\t\t);\n\n\t\t\tif ( undefined !== result ) {\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tconst normalizedPath = removeCustomPrefixes( path );\n\n\t\t\t// 1. Take settings from the block instance or its ancestors.\n\t\t\t// Start from the current block and work our way up the ancestors.\n\t\t\tconst candidates = [\n\t\t\t\tclientId,\n\t\t\t\t...select( blockEditorStore ).getBlockParents(\n\t\t\t\t\tclientId,\n\t\t\t\t\t/* ascending */ true\n\t\t\t\t),\n\t\t\t];\n\n\t\t\tfor ( const candidateClientId of candidates ) {\n\t\t\t\tconst candidateBlockName =\n\t\t\t\t\tselect( blockEditorStore ).getBlockName(\n\t\t\t\t\t\tcandidateClientId\n\t\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\thasBlockSupport(\n\t\t\t\t\t\tcandidateBlockName,\n\t\t\t\t\t\t'__experimentalSettings',\n\t\t\t\t\t\tfalse\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tconst candidateAtts =\n\t\t\t\t\t\tselect( blockEditorStore ).getBlockAttributes(\n\t\t\t\t\t\t\tcandidateClientId\n\t\t\t\t\t\t);\n\t\t\t\t\tresult =\n\t\t\t\t\t\tget(\n\t\t\t\t\t\t\tcandidateAtts,\n\t\t\t\t\t\t\t`settings.blocks.${ blockName }.${ normalizedPath }`\n\t\t\t\t\t\t) ??\n\t\t\t\t\t\tget( candidateAtts, `settings.${ normalizedPath }` );\n\t\t\t\t\tif ( result !== undefined ) {\n\t\t\t\t\t\t// Stop the search for more distant ancestors and move on.\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 2. Fall back to the settings from the block editor store (__experimentalFeatures).\n\t\t\tconst settings = select( blockEditorStore ).getSettings();\n\t\t\tif ( result === undefined ) {\n\t\t\t\tconst defaultsPath = `__experimentalFeatures.${ normalizedPath }`;\n\t\t\t\tconst blockPath = `__experimentalFeatures.blocks.${ blockName }.${ normalizedPath }`;\n\t\t\t\tresult =\n\t\t\t\t\tget( settings, blockPath ) ?? get( settings, defaultsPath );\n\t\t\t}\n\n\t\t\t// Return if the setting was found in either the block instance or the store.\n\t\t\tif ( result !== undefined ) {\n\t\t\t\tif ( PATHS_WITH_MERGE[ normalizedPath ] ) {\n\t\t\t\t\treturn result.custom ?? result.theme ?? result.default;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\t// 3. Otherwise, use deprecated settings.\n\t\t\tconst deprecatedSettingsValue = deprecatedFlags[ normalizedPath ]\n\t\t\t\t? deprecatedFlags[ normalizedPath ]( settings )\n\t\t\t\t: undefined;\n\t\t\tif ( deprecatedSettingsValue !== undefined ) {\n\t\t\t\treturn deprecatedSettingsValue;\n\t\t\t}\n\n\t\t\t// 4. Fallback for typography.dropCap:\n\t\t\t// This is only necessary to support typography.dropCap.\n\t\t\t// when __experimentalFeatures are not present (core without plugin).\n\t\t\t// To remove when __experimentalFeatures are ported to core.\n\t\t\treturn normalizedPath === 'typography.dropCap' ? true : undefined;\n\t\t},\n\t\t[ blockName, clientId, path ]\n\t);\n}\n","/**\n * The fluid utilities must match the backend equivalent.\n * See: gutenberg_get_typography_font_size_value() in lib/block-supports/typography.php\n * ---------------------------------------------------------------\n */\n\n// Defaults.\nconst DEFAULT_MAXIMUM_VIEWPORT_WIDTH = '1600px';\nconst DEFAULT_MINIMUM_VIEWPORT_WIDTH = '320px';\nconst DEFAULT_SCALE_FACTOR = 1;\nconst DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MIN = 0.25;\nconst DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MAX = 0.75;\nconst DEFAULT_MINIMUM_FONT_SIZE_LIMIT = '14px';\n\n/**\n * Computes a fluid font-size value that uses clamp(). A minimum and maximum\n * font size OR a single font size can be specified.\n *\n * If a single font size is specified, it is scaled up and down using a logarithmic scale.\n *\n * @example\n * ```js\n * // Calculate fluid font-size value from a minimum and maximum value.\n * const fontSize = getComputedFluidTypographyValue( {\n *     minimumFontSize: '20px',\n *     maximumFontSize: '45px'\n * } );\n * // Calculate fluid font-size value from a single font size.\n * const fontSize = getComputedFluidTypographyValue( {\n *     fontSize: '30px',\n * } );\n * ```\n *\n * @param {Object}        args\n * @param {?string}       args.minimumViewPortWidth Minimum viewport size from which type will have fluidity. Optional if fontSize is specified.\n * @param {?string}       args.maximumViewPortWidth Maximum size up to which type will have fluidity. Optional if fontSize is specified.\n * @param {string|number} [args.fontSize]           Size to derive maximumFontSize and minimumFontSize from, if necessary. Optional if minimumFontSize and maximumFontSize are specified.\n * @param {?string}       args.maximumFontSize      Maximum font size for any clamp() calculation. Optional.\n * @param {?string}       args.minimumFontSize      Minimum font size for any clamp() calculation. Optional.\n * @param {?number}       args.scaleFactor          A scale factor to determine how fast a font scales within boundaries. Optional.\n * @param {?string}       args.minimumFontSizeLimit The smallest a calculated font size may be. Optional.\n *\n * @return {string|null} A font-size value using clamp().\n */\nexport function getComputedFluidTypographyValue( {\n\tminimumFontSize,\n\tmaximumFontSize,\n\tfontSize,\n\tminimumViewPortWidth = DEFAULT_MINIMUM_VIEWPORT_WIDTH,\n\tmaximumViewPortWidth = DEFAULT_MAXIMUM_VIEWPORT_WIDTH,\n\tscaleFactor = DEFAULT_SCALE_FACTOR,\n\tminimumFontSizeLimit,\n} ) {\n\t// Validate incoming settings and set defaults.\n\tminimumFontSizeLimit = !! getTypographyValueAndUnit( minimumFontSizeLimit )\n\t\t? minimumFontSizeLimit\n\t\t: DEFAULT_MINIMUM_FONT_SIZE_LIMIT;\n\n\t/*\n\t * Calculates missing minimumFontSize and maximumFontSize from\n\t * defaultFontSize if provided.\n\t */\n\tif ( fontSize ) {\n\t\t// Parses default font size.\n\t\tconst fontSizeParsed = getTypographyValueAndUnit( fontSize );\n\n\t\t// Protect against invalid units.\n\t\tif ( ! fontSizeParsed?.unit ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Parses the minimum font size limit, so we can perform checks using it.\n\t\tconst minimumFontSizeLimitParsed = getTypographyValueAndUnit(\n\t\t\tminimumFontSizeLimit,\n\t\t\t{\n\t\t\t\tcoerceTo: fontSizeParsed.unit,\n\t\t\t}\n\t\t);\n\n\t\t// Don't enforce minimum font size if a font size has explicitly set a min and max value.\n\t\tif (\n\t\t\t!! minimumFontSizeLimitParsed?.value &&\n\t\t\t! minimumFontSize &&\n\t\t\t! maximumFontSize\n\t\t) {\n\t\t\t/*\n\t\t\t * If a minimum size was not passed to this function\n\t\t\t * and the user-defined font size is lower than $minimum_font_size_limit,\n\t\t\t * do not calculate a fluid value.\n\t\t\t */\n\t\t\tif ( fontSizeParsed?.value <= minimumFontSizeLimitParsed?.value ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\t// If no fluid max font size is available use the incoming value.\n\t\tif ( ! maximumFontSize ) {\n\t\t\tmaximumFontSize = `${ fontSizeParsed.value }${ fontSizeParsed.unit }`;\n\t\t}\n\n\t\t/*\n\t\t * If no minimumFontSize is provided, create one using\n\t\t * the given font size multiplied by the min font size scale factor.\n\t\t */\n\t\tif ( ! minimumFontSize ) {\n\t\t\tconst fontSizeValueInPx =\n\t\t\t\tfontSizeParsed.unit === 'px'\n\t\t\t\t\t? fontSizeParsed.value\n\t\t\t\t\t: fontSizeParsed.value * 16;\n\n\t\t\t/*\n\t\t\t * The scale factor is a multiplier that affects how quickly the curve will move towards the minimum,\n\t\t\t * that is, how quickly the size factor reaches 0 given increasing font size values.\n\t\t\t * For a - b * log2(), lower values of b will make the curve move towards the minimum faster.\n\t\t\t * The scale factor is constrained between min and max values.\n\t\t\t */\n\t\t\tconst minimumFontSizeFactor = Math.min(\n\t\t\t\tMath.max(\n\t\t\t\t\t1 - 0.075 * Math.log2( fontSizeValueInPx ),\n\t\t\t\t\tDEFAULT_MINIMUM_FONT_SIZE_FACTOR_MIN\n\t\t\t\t),\n\t\t\t\tDEFAULT_MINIMUM_FONT_SIZE_FACTOR_MAX\n\t\t\t);\n\n\t\t\t// Calculates the minimum font size.\n\t\t\tconst calculatedMinimumFontSize = roundToPrecision(\n\t\t\t\tfontSizeParsed.value * minimumFontSizeFactor,\n\t\t\t\t3\n\t\t\t);\n\n\t\t\t// Only use calculated min font size if it's > $minimum_font_size_limit value.\n\t\t\tif (\n\t\t\t\t!! minimumFontSizeLimitParsed?.value &&\n\t\t\t\tcalculatedMinimumFontSize < minimumFontSizeLimitParsed?.value\n\t\t\t) {\n\t\t\t\tminimumFontSize = `${ minimumFontSizeLimitParsed.value }${ minimumFontSizeLimitParsed.unit }`;\n\t\t\t} else {\n\t\t\t\tminimumFontSize = `${ calculatedMinimumFontSize }${ fontSizeParsed.unit }`;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Grab the minimum font size and normalize it in order to use the value for calculations.\n\tconst minimumFontSizeParsed = getTypographyValueAndUnit( minimumFontSize );\n\n\t// We get a 'preferred' unit to keep units consistent when calculating,\n\t// otherwise the result will not be accurate.\n\tconst fontSizeUnit = minimumFontSizeParsed?.unit || 'rem';\n\n\t// Grabs the maximum font size and normalize it in order to use the value for calculations.\n\tconst maximumFontSizeParsed = getTypographyValueAndUnit( maximumFontSize, {\n\t\tcoerceTo: fontSizeUnit,\n\t} );\n\n\t// Checks for mandatory min and max sizes, and protects against unsupported units.\n\tif ( ! minimumFontSizeParsed || ! maximumFontSizeParsed ) {\n\t\treturn null;\n\t}\n\n\t// Uses rem for accessible fluid target font scaling.\n\tconst minimumFontSizeRem = getTypographyValueAndUnit( minimumFontSize, {\n\t\tcoerceTo: 'rem',\n\t} );\n\n\t// Viewport widths defined for fluid typography. Normalize units\n\tconst maximumViewPortWidthParsed = getTypographyValueAndUnit(\n\t\tmaximumViewPortWidth,\n\t\t{ coerceTo: fontSizeUnit }\n\t);\n\tconst minumumViewPortWidthParsed = getTypographyValueAndUnit(\n\t\tminimumViewPortWidth,\n\t\t{ coerceTo: fontSizeUnit }\n\t);\n\n\t// Protect against unsupported units.\n\tif (\n\t\t! maximumViewPortWidthParsed ||\n\t\t! minumumViewPortWidthParsed ||\n\t\t! minimumFontSizeRem\n\t) {\n\t\treturn null;\n\t}\n\n\t// Build CSS rule.\n\t// Borrowed from https://websemantics.uk/tools/responsive-font-calculator/.\n\tconst minViewPortWidthOffsetValue = roundToPrecision(\n\t\tminumumViewPortWidthParsed.value / 100,\n\t\t3\n\t);\n\n\tconst viewPortWidthOffset =\n\t\troundToPrecision( minViewPortWidthOffsetValue, 3 ) + fontSizeUnit;\n\tconst linearFactor =\n\t\t100 *\n\t\t( ( maximumFontSizeParsed.value - minimumFontSizeParsed.value ) /\n\t\t\t( maximumViewPortWidthParsed.value -\n\t\t\t\tminumumViewPortWidthParsed.value ) );\n\tconst linearFactorScaled = roundToPrecision(\n\t\t( linearFactor || 1 ) * scaleFactor,\n\t\t3\n\t);\n\tconst fluidTargetFontSize = `${ minimumFontSizeRem.value }${ minimumFontSizeRem.unit } + ((1vw - ${ viewPortWidthOffset }) * ${ linearFactorScaled })`;\n\n\treturn `clamp(${ minimumFontSize }, ${ fluidTargetFontSize }, ${ maximumFontSize })`;\n}\n\n/**\n * Internal method that checks a string for a unit and value and returns an array consisting of `'value'` and `'unit'`, e.g., [ '42', 'rem' ].\n * A raw font size of `value + unit` is expected. If the value is an integer, it will convert to `value + 'px'`.\n *\n * @param {string|number}    rawValue Raw size value from theme.json.\n * @param {Object|undefined} options  Calculation options.\n *\n * @return {{ unit: string, value: number }|null} An object consisting of `'value'` and `'unit'` properties.\n */\nexport function getTypographyValueAndUnit( rawValue, options = {} ) {\n\tif ( typeof rawValue !== 'string' && typeof rawValue !== 'number' ) {\n\t\treturn null;\n\t}\n\n\t// Converts numeric values to pixel values by default.\n\tif ( isFinite( rawValue ) ) {\n\t\trawValue = `${ rawValue }px`;\n\t}\n\n\tconst { coerceTo, rootSizeValue, acceptableUnits } = {\n\t\tcoerceTo: '',\n\t\t// Default browser font size. Later we could inject some JS to compute this `getComputedStyle( document.querySelector( \"html\" ) ).fontSize`.\n\t\trootSizeValue: 16,\n\t\tacceptableUnits: [ 'rem', 'px', 'em' ],\n\t\t...options,\n\t};\n\n\tconst acceptableUnitsGroup = acceptableUnits?.join( '|' );\n\tconst regexUnits = new RegExp(\n\t\t`^(\\\\d*\\\\.?\\\\d+)(${ acceptableUnitsGroup }){1,1}$`\n\t);\n\n\tconst matches = rawValue.match( regexUnits );\n\n\t// We need a number value and a unit.\n\tif ( ! matches || matches.length < 3 ) {\n\t\treturn null;\n\t}\n\n\tlet [ , value, unit ] = matches;\n\n\tlet returnValue = parseFloat( value );\n\n\tif ( 'px' === coerceTo && ( 'em' === unit || 'rem' === unit ) ) {\n\t\treturnValue = returnValue * rootSizeValue;\n\t\tunit = coerceTo;\n\t}\n\n\tif ( 'px' === unit && ( 'em' === coerceTo || 'rem' === coerceTo ) ) {\n\t\treturnValue = returnValue / rootSizeValue;\n\t\tunit = coerceTo;\n\t}\n\n\t/*\n\t * No calculation is required if swapping between em and rem yet,\n\t * since we assume a root size value. Later we might like to differentiate between\n\t * :root font size (rem) and parent element font size (em) relativity.\n\t */\n\tif (\n\t\t( 'em' === coerceTo || 'rem' === coerceTo ) &&\n\t\t( 'em' === unit || 'rem' === unit )\n\t) {\n\t\tunit = coerceTo;\n\t}\n\n\treturn {\n\t\tvalue: roundToPrecision( returnValue, 3 ),\n\t\tunit,\n\t};\n}\n\n/**\n * Returns a value rounded to defined precision.\n * Returns `undefined` if the value is not a valid finite number.\n *\n * @param {number} value  Raw value.\n * @param {number} digits The number of digits to appear after the decimal point\n *\n * @return {number|undefined} Value rounded to standard precision.\n */\nexport function roundToPrecision( value, digits = 3 ) {\n\tconst base = Math.pow( 10, digits );\n\treturn Number.isFinite( value )\n\t\t? parseFloat( Math.round( value * base ) / base )\n\t\t: undefined;\n}\n","/**\n * The fluid utilities must match the backend equivalent.\n * See: gutenberg_get_typography_font_size_value() in lib/block-supports/typography.php\n * ---------------------------------------------------------------\n */\n\n/**\n * Internal dependencies\n */\nimport { getComputedFluidTypographyValue } from '../font-sizes/fluid-utils';\n\n/**\n * @typedef {Object} FluidPreset\n * @property {string|undefined}  max A maximum font size value.\n * @property {?string|undefined} min A minimum font size value.\n */\n\n/**\n * @typedef {Object} Preset\n * @property {?string|?number}               size  A default font size.\n * @property {string}                        name  A font size name, displayed in the UI.\n * @property {string}                        slug  A font size slug\n * @property {boolean|FluidPreset|undefined} fluid Specifies the minimum and maximum font size value of a fluid font size.\n */\n\n/**\n * @typedef {Object} TypographySettings\n * @property {?string} minViewPortWidth  Minimum viewport size from which type will have fluidity. Optional if size is specified.\n * @property {?string} maxViewPortWidth  Maximum size up to which type will have fluidity. Optional if size is specified.\n * @property {?number} scaleFactor       A scale factor to determine how fast a font scales within boundaries. Optional.\n * @property {?number} minFontSizeFactor How much to scale defaultFontSize by to derive minimumFontSize. Optional.\n * @property {?string} minFontSize       The smallest a calculated font size may be. Optional.\n */\n\n/**\n * Returns a font-size value based on a given font-size preset.\n * Takes into account fluid typography parameters and attempts to return a css formula depending on available, valid values.\n *\n * @param {Preset}                     preset\n * @param {Object}                     typographyOptions\n * @param {boolean|TypographySettings} typographyOptions.fluid Whether fluid typography is enabled, and, optionally, fluid font size options.\n *\n * @return {string|*} A font-size value or the value of preset.size.\n */\nexport function getTypographyFontSizeValue( preset, typographyOptions ) {\n\tconst { size: defaultSize } = preset;\n\n\tif ( ! isFluidTypographyEnabled( typographyOptions ) ) {\n\t\treturn defaultSize;\n\t}\n\t/*\n\t * Checks whether a font size has explicitly bypassed fluid calculations.\n\t * Also catches falsy values and 0/'0'.\n\t * Fluid calculations cannot be performed on `0`.\n\t */\n\tif ( ! defaultSize || '0' === defaultSize || false === preset?.fluid ) {\n\t\treturn defaultSize;\n\t}\n\n\tconst fluidTypographySettings =\n\t\ttypeof typographyOptions?.fluid === 'object'\n\t\t\t? typographyOptions?.fluid\n\t\t\t: {};\n\n\tconst fluidFontSizeValue = getComputedFluidTypographyValue( {\n\t\tminimumFontSize: preset?.fluid?.min,\n\t\tmaximumFontSize: preset?.fluid?.max,\n\t\tfontSize: defaultSize,\n\t\tminimumFontSizeLimit: fluidTypographySettings?.minFontSize,\n\t\tmaximumViewPortWidth: fluidTypographySettings?.maxViewPortWidth,\n\t} );\n\n\tif ( !! fluidFontSizeValue ) {\n\t\treturn fluidFontSizeValue;\n\t}\n\n\treturn defaultSize;\n}\n\nfunction isFluidTypographyEnabled( typographySettings ) {\n\tconst fluidSettings = typographySettings?.fluid;\n\treturn (\n\t\ttrue === fluidSettings ||\n\t\t( fluidSettings &&\n\t\t\ttypeof fluidSettings === 'object' &&\n\t\t\tObject.keys( fluidSettings ).length > 0 )\n\t);\n}\n\n/**\n * Returns fluid typography settings from theme.json setting object.\n *\n * @param {Object} settings            Theme.json settings\n * @param {Object} settings.typography Theme.json typography settings\n * @param {Object} settings.layout     Theme.json layout settings\n * @return {TypographySettings} Fluid typography settings\n */\nexport function getFluidTypographyOptionsFromSettings( settings ) {\n\tconst typographySettings = settings?.typography;\n\tconst layoutSettings = settings?.layout;\n\treturn isFluidTypographyEnabled( typographySettings ) &&\n\t\tlayoutSettings?.wideSize\n\t\t? {\n\t\t\t\tfluid: {\n\t\t\t\t\tmaxViewPortWidth: layoutSettings.wideSize,\n\t\t\t\t\t...typographySettings.fluid,\n\t\t\t\t},\n\t\t  }\n\t\t: {\n\t\t\t\tfluid: typographySettings?.fluid,\n\t\t  };\n}\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetTypographyFontSizeValue,\n\tgetFluidTypographyOptionsFromSettings,\n} from './typography-utils';\n\n/* Supporting data. */\nexport const ROOT_BLOCK_NAME = 'root';\nexport const ROOT_BLOCK_SELECTOR = 'body';\nexport const ROOT_BLOCK_SUPPORTS = [\n\t'background',\n\t'backgroundColor',\n\t'color',\n\t'linkColor',\n\t'captionColor',\n\t'buttonColor',\n\t'headingColor',\n\t'fontFamily',\n\t'fontSize',\n\t'fontStyle',\n\t'fontWeight',\n\t'lineHeight',\n\t'textDecoration',\n\t'textTransform',\n\t'padding',\n];\n\nexport const PRESET_METADATA = [\n\t{\n\t\tpath: [ 'color', 'palette' ],\n\t\tvalueKey: 'color',\n\t\tcssVarInfix: 'color',\n\t\tclasses: [\n\t\t\t{ classSuffix: 'color', propertyName: 'color' },\n\t\t\t{\n\t\t\t\tclassSuffix: 'background-color',\n\t\t\t\tpropertyName: 'background-color',\n\t\t\t},\n\t\t\t{\n\t\t\t\tclassSuffix: 'border-color',\n\t\t\t\tpropertyName: 'border-color',\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tpath: [ 'color', 'gradients' ],\n\t\tvalueKey: 'gradient',\n\t\tcssVarInfix: 'gradient',\n\t\tclasses: [\n\t\t\t{\n\t\t\t\tclassSuffix: 'gradient-background',\n\t\t\t\tpropertyName: 'background',\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tpath: [ 'color', 'duotone' ],\n\t\tvalueKey: 'colors',\n\t\tcssVarInfix: 'duotone',\n\t\tvalueFunc: ( { slug } ) => `url( '#wp-duotone-${ slug }' )`,\n\t\tclasses: [],\n\t},\n\t{\n\t\tpath: [ 'shadow', 'presets' ],\n\t\tvalueKey: 'shadow',\n\t\tcssVarInfix: 'shadow',\n\t\tclasses: [],\n\t},\n\t{\n\t\tpath: [ 'typography', 'fontSizes' ],\n\t\tvalueFunc: ( preset, settings ) =>\n\t\t\tgetTypographyFontSizeValue(\n\t\t\t\tpreset,\n\t\t\t\tgetFluidTypographyOptionsFromSettings( settings )\n\t\t\t),\n\t\tvalueKey: 'size',\n\t\tcssVarInfix: 'font-size',\n\t\tclasses: [ { classSuffix: 'font-size', propertyName: 'font-size' } ],\n\t},\n\t{\n\t\tpath: [ 'typography', 'fontFamilies' ],\n\t\tvalueKey: 'fontFamily',\n\t\tcssVarInfix: 'font-family',\n\t\tclasses: [\n\t\t\t{ classSuffix: 'font-family', propertyName: 'font-family' },\n\t\t],\n\t},\n\t{\n\t\tpath: [ 'spacing', 'spacingSizes' ],\n\t\tvalueKey: 'size',\n\t\tcssVarInfix: 'spacing',\n\t\tvalueFunc: ( { size } ) => size,\n\t\tclasses: [],\n\t},\n];\n\nexport const STYLE_PATH_TO_CSS_VAR_INFIX = {\n\t'color.background': 'color',\n\t'color.text': 'color',\n\t'filter.duotone': 'duotone',\n\t'elements.link.color.text': 'color',\n\t'elements.link.:hover.color.text': 'color',\n\t'elements.link.typography.fontFamily': 'font-family',\n\t'elements.link.typography.fontSize': 'font-size',\n\t'elements.button.color.text': 'color',\n\t'elements.button.color.background': 'color',\n\t'elements.caption.color.text': 'color',\n\t'elements.button.typography.fontFamily': 'font-family',\n\t'elements.button.typography.fontSize': 'font-size',\n\t'elements.heading.color': 'color',\n\t'elements.heading.color.background': 'color',\n\t'elements.heading.typography.fontFamily': 'font-family',\n\t'elements.heading.gradient': 'gradient',\n\t'elements.heading.color.gradient': 'gradient',\n\t'elements.h1.color': 'color',\n\t'elements.h1.color.background': 'color',\n\t'elements.h1.typography.fontFamily': 'font-family',\n\t'elements.h1.color.gradient': 'gradient',\n\t'elements.h2.color': 'color',\n\t'elements.h2.color.background': 'color',\n\t'elements.h2.typography.fontFamily': 'font-family',\n\t'elements.h2.color.gradient': 'gradient',\n\t'elements.h3.color': 'color',\n\t'elements.h3.color.background': 'color',\n\t'elements.h3.typography.fontFamily': 'font-family',\n\t'elements.h3.color.gradient': 'gradient',\n\t'elements.h4.color': 'color',\n\t'elements.h4.color.background': 'color',\n\t'elements.h4.typography.fontFamily': 'font-family',\n\t'elements.h4.color.gradient': 'gradient',\n\t'elements.h5.color': 'color',\n\t'elements.h5.color.background': 'color',\n\t'elements.h5.typography.fontFamily': 'font-family',\n\t'elements.h5.color.gradient': 'gradient',\n\t'elements.h6.color': 'color',\n\t'elements.h6.color.background': 'color',\n\t'elements.h6.typography.fontFamily': 'font-family',\n\t'elements.h6.color.gradient': 'gradient',\n\t'color.gradient': 'gradient',\n\tshadow: 'shadow',\n\t'typography.fontSize': 'font-size',\n\t'typography.fontFamily': 'font-family',\n};\n\n// A static list of block attributes that store global style preset slugs.\nexport const STYLE_PATH_TO_PRESET_BLOCK_ATTRIBUTE = {\n\t'color.background': 'backgroundColor',\n\t'color.text': 'textColor',\n\t'color.gradient': 'gradient',\n\t'typography.fontSize': 'fontSize',\n\t'typography.fontFamily': 'fontFamily',\n};\n\nfunction findInPresetsBy(\n\tfeatures,\n\tblockName,\n\tpresetPath,\n\tpresetProperty,\n\tpresetValueValue\n) {\n\t// Block presets take priority above root level presets.\n\tconst orderedPresetsByOrigin = [\n\t\tget( features, [ 'blocks', blockName, ...presetPath ] ),\n\t\tget( features, presetPath ),\n\t];\n\n\tfor ( const presetByOrigin of orderedPresetsByOrigin ) {\n\t\tif ( presetByOrigin ) {\n\t\t\t// Preset origins ordered by priority.\n\t\t\tconst origins = [ 'custom', 'theme', 'default' ];\n\t\t\tfor ( const origin of origins ) {\n\t\t\t\tconst presets = presetByOrigin[ origin ];\n\t\t\t\tif ( presets ) {\n\t\t\t\t\tconst presetObject = presets.find(\n\t\t\t\t\t\t( preset ) =>\n\t\t\t\t\t\t\tpreset[ presetProperty ] === presetValueValue\n\t\t\t\t\t);\n\t\t\t\t\tif ( presetObject ) {\n\t\t\t\t\t\tif ( presetProperty === 'slug' ) {\n\t\t\t\t\t\t\treturn presetObject;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// If there is a highest priority preset with the same slug but different value the preset we found was overwritten and should be ignored.\n\t\t\t\t\t\tconst highestPresetObjectWithSameSlug = findInPresetsBy(\n\t\t\t\t\t\t\tfeatures,\n\t\t\t\t\t\t\tblockName,\n\t\t\t\t\t\t\tpresetPath,\n\t\t\t\t\t\t\t'slug',\n\t\t\t\t\t\t\tpresetObject.slug\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\thighestPresetObjectWithSameSlug[\n\t\t\t\t\t\t\t\tpresetProperty\n\t\t\t\t\t\t\t] === presetObject[ presetProperty ]\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn presetObject;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function getPresetVariableFromValue(\n\tfeatures,\n\tblockName,\n\tvariableStylePath,\n\tpresetPropertyValue\n) {\n\tif ( ! presetPropertyValue ) {\n\t\treturn presetPropertyValue;\n\t}\n\n\tconst cssVarInfix = STYLE_PATH_TO_CSS_VAR_INFIX[ variableStylePath ];\n\n\tconst metadata = PRESET_METADATA.find(\n\t\t( data ) => data.cssVarInfix === cssVarInfix\n\t);\n\n\tif ( ! metadata ) {\n\t\t// The property doesn't have preset data\n\t\t// so the value should be returned as it is.\n\t\treturn presetPropertyValue;\n\t}\n\tconst { valueKey, path } = metadata;\n\n\tconst presetObject = findInPresetsBy(\n\t\tfeatures,\n\t\tblockName,\n\t\tpath,\n\t\tvalueKey,\n\t\tpresetPropertyValue\n\t);\n\n\tif ( ! presetObject ) {\n\t\t// Value wasn't found in the presets,\n\t\t// so it must be a custom value.\n\t\treturn presetPropertyValue;\n\t}\n\n\treturn `var:preset|${ cssVarInfix }|${ presetObject.slug }`;\n}\n\nfunction getValueFromPresetVariable(\n\tfeatures,\n\tblockName,\n\tvariable,\n\t[ presetType, slug ]\n) {\n\tconst metadata = PRESET_METADATA.find(\n\t\t( data ) => data.cssVarInfix === presetType\n\t);\n\tif ( ! metadata ) {\n\t\treturn variable;\n\t}\n\n\tconst presetObject = findInPresetsBy(\n\t\tfeatures.settings,\n\t\tblockName,\n\t\tmetadata.path,\n\t\t'slug',\n\t\tslug\n\t);\n\n\tif ( presetObject ) {\n\t\tconst { valueKey } = metadata;\n\t\tconst result = presetObject[ valueKey ];\n\t\treturn getValueFromVariable( features, blockName, result );\n\t}\n\n\treturn variable;\n}\n\nfunction getValueFromCustomVariable( features, blockName, variable, path ) {\n\tconst result =\n\t\tget( features.settings, [ 'blocks', blockName, 'custom', ...path ] ) ??\n\t\tget( features.settings, [ 'custom', ...path ] );\n\tif ( ! result ) {\n\t\treturn variable;\n\t}\n\t// A variable may reference another variable so we need recursion until we find the value.\n\treturn getValueFromVariable( features, blockName, result );\n}\n\n/**\n * Attempts to fetch the value of a theme.json CSS variable.\n *\n * @param {Object}   features  GlobalStylesContext config, e.g., user, base or merged. Represents the theme.json tree.\n * @param {string}   blockName The name of a block as represented in the styles property. E.g., 'root' for root-level, and 'core/${blockName}' for blocks.\n * @param {string|*} variable  An incoming style value. A CSS var value is expected, but it could be any value.\n * @return {string|*|{ref}} The value of the CSS var, if found. If not found, the passed variable argument.\n */\nexport function getValueFromVariable( features, blockName, variable ) {\n\tif ( ! variable || typeof variable !== 'string' ) {\n\t\tif ( variable?.ref && typeof variable?.ref === 'string' ) {\n\t\t\tconst refPath = variable.ref.split( '.' );\n\t\t\tvariable = get( features, refPath );\n\t\t\t// Presence of another ref indicates a reference to another dynamic value.\n\t\t\t// Pointing to another dynamic value is not supported.\n\t\t\tif ( ! variable || !! variable?.ref ) {\n\t\t\t\treturn variable;\n\t\t\t}\n\t\t} else {\n\t\t\treturn variable;\n\t\t}\n\t}\n\tconst USER_VALUE_PREFIX = 'var:';\n\tconst THEME_VALUE_PREFIX = 'var(--wp--';\n\tconst THEME_VALUE_SUFFIX = ')';\n\n\tlet parsedVar;\n\n\tif ( variable.startsWith( USER_VALUE_PREFIX ) ) {\n\t\tparsedVar = variable.slice( USER_VALUE_PREFIX.length ).split( '|' );\n\t} else if (\n\t\tvariable.startsWith( THEME_VALUE_PREFIX ) &&\n\t\tvariable.endsWith( THEME_VALUE_SUFFIX )\n\t) {\n\t\tparsedVar = variable\n\t\t\t.slice( THEME_VALUE_PREFIX.length, -THEME_VALUE_SUFFIX.length )\n\t\t\t.split( '--' );\n\t} else {\n\t\t// We don't know how to parse the value: either is raw of uses complex CSS such as `calc(1px * var(--wp--variable) )`\n\t\treturn variable;\n\t}\n\n\tconst [ type, ...path ] = parsedVar;\n\tif ( type === 'preset' ) {\n\t\treturn getValueFromPresetVariable(\n\t\t\tfeatures,\n\t\t\tblockName,\n\t\t\tvariable,\n\t\t\tpath\n\t\t);\n\t}\n\tif ( type === 'custom' ) {\n\t\treturn getValueFromCustomVariable(\n\t\t\tfeatures,\n\t\t\tblockName,\n\t\t\tvariable,\n\t\t\tpath\n\t\t);\n\t}\n\treturn variable;\n}\n\n/**\n * Function that scopes a selector with another one. This works a bit like\n * SCSS nesting except the `&` operator isn't supported.\n *\n * @example\n * ```js\n * const scope = '.a, .b .c';\n * const selector = '> .x, .y';\n * const merged = scopeSelector( scope, selector );\n * // merged is '.a > .x, .a .y, .b .c > .x, .b .c .y'\n * ```\n *\n * @param {string} scope    Selector to scope to.\n * @param {string} selector Original selector.\n *\n * @return {string} Scoped selector.\n */\nexport function scopeSelector( scope, selector ) {\n\tconst scopes = scope.split( ',' );\n\tconst selectors = selector.split( ',' );\n\n\tconst selectorsScoped = [];\n\tscopes.forEach( ( outer ) => {\n\t\tselectors.forEach( ( inner ) => {\n\t\t\tselectorsScoped.push( `${ outer.trim() } ${ inner.trim() }` );\n\t\t} );\n\t} );\n\n\treturn selectorsScoped.join( ', ' );\n}\n\n/**\n * Compares global style variations according to their styles and settings properties.\n *\n * @example\n * ```js\n * const globalStyles = { styles: { typography: { fontSize: '10px' } }, settings: {} };\n * const variation = { styles: { typography: { fontSize: '10000px' } }, settings: {} };\n * const isEqual = areGlobalStyleConfigsEqual( globalStyles, variation );\n * // false\n * ```\n *\n * @param {Object} original  A global styles object.\n * @param {Object} variation A global styles object.\n *\n * @return {boolean} Whether `original` and `variation` match.\n */\nexport function areGlobalStyleConfigsEqual( original, variation ) {\n\tif ( typeof original !== 'object' || typeof variation !== 'object' ) {\n\t\treturn original === variation;\n\t}\n\treturn (\n\t\tfastDeepEqual( original?.styles, variation?.styles ) &&\n\t\tfastDeepEqual( original?.settings, variation?.settings )\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { createContext } from '@wordpress/element';\n\nexport const DEFAULT_GLOBAL_STYLES_CONTEXT = {\n\tuser: {},\n\tbase: {},\n\tmerged: {},\n\tsetUserConfig: () => {},\n};\n\nexport const GlobalStylesContext = createContext(\n\tDEFAULT_GLOBAL_STYLES_CONTEXT\n);\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\nimport { get, set } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useContext, useCallback, useMemo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromVariable, getPresetVariableFromValue } from './utils';\nimport { GlobalStylesContext } from './context';\nimport { unlock } from '../../lock-unlock';\n\nconst EMPTY_CONFIG = { settings: {}, styles: {} };\n\nconst VALID_SETTINGS = [\n\t'appearanceTools',\n\t'useRootPaddingAwareAlignments',\n\t'border.color',\n\t'border.radius',\n\t'border.style',\n\t'border.width',\n\t'shadow.presets',\n\t'shadow.defaultPresets',\n\t'color.background',\n\t'color.button',\n\t'color.caption',\n\t'color.custom',\n\t'color.customDuotone',\n\t'color.customGradient',\n\t'color.defaultDuotone',\n\t'color.defaultGradients',\n\t'color.defaultPalette',\n\t'color.duotone',\n\t'color.gradients',\n\t'color.heading',\n\t'color.link',\n\t'color.palette',\n\t'color.text',\n\t'custom',\n\t'dimensions.minHeight',\n\t'layout.contentSize',\n\t'layout.definitions',\n\t'layout.wideSize',\n\t'position.fixed',\n\t'position.sticky',\n\t'spacing.customSpacingSize',\n\t'spacing.spacingSizes',\n\t'spacing.spacingScale',\n\t'spacing.blockGap',\n\t'spacing.margin',\n\t'spacing.padding',\n\t'spacing.units',\n\t'typography.fluid',\n\t'typography.customFontSize',\n\t'typography.dropCap',\n\t'typography.fontFamilies',\n\t'typography.fontSizes',\n\t'typography.fontStyle',\n\t'typography.fontWeight',\n\t'typography.letterSpacing',\n\t'typography.lineHeight',\n\t'typography.textColumns',\n\t'typography.textDecoration',\n\t'typography.textTransform',\n];\n\nexport const useGlobalStylesReset = () => {\n\tconst { user: config, setUserConfig } = useContext( GlobalStylesContext );\n\tconst canReset = !! config && ! fastDeepEqual( config, EMPTY_CONFIG );\n\treturn [\n\t\tcanReset,\n\t\tuseCallback(\n\t\t\t() => setUserConfig( () => EMPTY_CONFIG ),\n\t\t\t[ setUserConfig ]\n\t\t),\n\t];\n};\n\nexport function useGlobalSetting( propertyPath, blockName, source = 'all' ) {\n\tconst { setUserConfig, ...configs } = useContext( GlobalStylesContext );\n\n\tconst appendedBlockPath = blockName ? '.blocks.' + blockName : '';\n\tconst appendedPropertyPath = propertyPath ? '.' + propertyPath : '';\n\tconst contextualPath = `settings${ appendedBlockPath }${ appendedPropertyPath }`;\n\tconst globalPath = `settings${ appendedPropertyPath }`;\n\tconst sourceKey = source === 'all' ? 'merged' : source;\n\n\tconst settingValue = useMemo( () => {\n\t\tconst configToUse = configs[ sourceKey ];\n\t\tif ( ! configToUse ) {\n\t\t\tthrow 'Unsupported source';\n\t\t}\n\n\t\tif ( propertyPath ) {\n\t\t\treturn (\n\t\t\t\tget( configToUse, contextualPath ) ??\n\t\t\t\tget( configToUse, globalPath )\n\t\t\t);\n\t\t}\n\n\t\tconst result = {};\n\t\tVALID_SETTINGS.forEach( ( setting ) => {\n\t\t\tconst value =\n\t\t\t\tget(\n\t\t\t\t\tconfigToUse,\n\t\t\t\t\t`settings${ appendedBlockPath }.${ setting }`\n\t\t\t\t) ?? get( configToUse, `settings.${ setting }` );\n\t\t\tif ( value ) {\n\t\t\t\tset( result, setting, value );\n\t\t\t}\n\t\t} );\n\t\treturn result;\n\t}, [\n\t\tconfigs,\n\t\tsourceKey,\n\t\tpropertyPath,\n\t\tcontextualPath,\n\t\tglobalPath,\n\t\tappendedBlockPath,\n\t] );\n\n\tconst setSetting = ( newValue ) => {\n\t\tsetUserConfig( ( currentConfig ) => {\n\t\t\t// Deep clone `currentConfig` to avoid mutating it later.\n\t\t\tconst newUserConfig = JSON.parse( JSON.stringify( currentConfig ) );\n\t\t\tset( newUserConfig, contextualPath, newValue );\n\n\t\t\treturn newUserConfig;\n\t\t} );\n\t};\n\n\treturn [ settingValue, setSetting ];\n}\n\nexport function useGlobalStyle(\n\tpath,\n\tblockName,\n\tsource = 'all',\n\t{ shouldDecodeEncode = true } = {}\n) {\n\tconst {\n\t\tmerged: mergedConfig,\n\t\tbase: baseConfig,\n\t\tuser: userConfig,\n\t\tsetUserConfig,\n\t} = useContext( GlobalStylesContext );\n\tconst appendedPath = path ? '.' + path : '';\n\tconst finalPath = ! blockName\n\t\t? `styles${ appendedPath }`\n\t\t: `styles.blocks.${ blockName }${ appendedPath }`;\n\n\tconst setStyle = ( newValue ) => {\n\t\tsetUserConfig( ( currentConfig ) => {\n\t\t\t// Deep clone `currentConfig` to avoid mutating it later.\n\t\t\tconst newUserConfig = JSON.parse( JSON.stringify( currentConfig ) );\n\t\t\tset(\n\t\t\t\tnewUserConfig,\n\t\t\t\tfinalPath,\n\t\t\t\tshouldDecodeEncode\n\t\t\t\t\t? getPresetVariableFromValue(\n\t\t\t\t\t\t\tmergedConfig.settings,\n\t\t\t\t\t\t\tblockName,\n\t\t\t\t\t\t\tpath,\n\t\t\t\t\t\t\tnewValue\n\t\t\t\t\t  )\n\t\t\t\t\t: newValue\n\t\t\t);\n\t\t\treturn newUserConfig;\n\t\t} );\n\t};\n\n\tlet rawResult, result;\n\tswitch ( source ) {\n\t\tcase 'all':\n\t\t\trawResult = get( mergedConfig, finalPath );\n\t\t\tresult = shouldDecodeEncode\n\t\t\t\t? getValueFromVariable( mergedConfig, blockName, rawResult )\n\t\t\t\t: rawResult;\n\t\t\tbreak;\n\t\tcase 'user':\n\t\t\trawResult = get( userConfig, finalPath );\n\t\t\tresult = shouldDecodeEncode\n\t\t\t\t? getValueFromVariable( mergedConfig, blockName, rawResult )\n\t\t\t\t: rawResult;\n\t\t\tbreak;\n\t\tcase 'base':\n\t\t\trawResult = get( baseConfig, finalPath );\n\t\t\tresult = shouldDecodeEncode\n\t\t\t\t? getValueFromVariable( baseConfig, blockName, rawResult )\n\t\t\t\t: rawResult;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow 'Unsupported source';\n\t}\n\n\treturn [ result, setStyle ];\n}\n\n/**\n * React hook that overrides a global settings object with block and element specific settings.\n *\n * @param {Object}     parentSettings Settings object.\n * @param {blockName?} blockName      Block name.\n * @param {element?}   element        Element name.\n *\n * @return {Object} Merge of settings and supports.\n */\nexport function useSettingsForBlockElement(\n\tparentSettings,\n\tblockName,\n\telement\n) {\n\tconst { supportedStyles, supports } = useSelect(\n\t\t( select ) => {\n\t\t\treturn {\n\t\t\t\tsupportedStyles: unlock(\n\t\t\t\t\tselect( blocksStore )\n\t\t\t\t).getSupportedStyles( blockName, element ),\n\t\t\t\tsupports:\n\t\t\t\t\tselect( blocksStore ).getBlockType( blockName )?.supports,\n\t\t\t};\n\t\t},\n\t\t[ blockName, element ]\n\t);\n\n\treturn useMemo( () => {\n\t\tconst updatedSettings = { ...parentSettings };\n\n\t\tif ( ! supportedStyles.includes( 'fontSize' ) ) {\n\t\t\tupdatedSettings.typography = {\n\t\t\t\t...updatedSettings.typography,\n\t\t\t\tfontSizes: {},\n\t\t\t\tcustomFontSize: false,\n\t\t\t};\n\t\t}\n\n\t\tif ( ! supportedStyles.includes( 'fontFamily' ) ) {\n\t\t\tupdatedSettings.typography = {\n\t\t\t\t...updatedSettings.typography,\n\t\t\t\tfontFamilies: {},\n\t\t\t};\n\t\t}\n\n\t\tupdatedSettings.color = {\n\t\t\t...updatedSettings.color,\n\t\t\ttext:\n\t\t\t\tupdatedSettings.color?.text &&\n\t\t\t\tsupportedStyles.includes( 'color' ),\n\t\t\tbackground:\n\t\t\t\tupdatedSettings.color?.background &&\n\t\t\t\t( supportedStyles.includes( 'background' ) ||\n\t\t\t\t\tsupportedStyles.includes( 'backgroundColor' ) ),\n\t\t\tbutton:\n\t\t\t\tupdatedSettings.color?.button &&\n\t\t\t\tsupportedStyles.includes( 'buttonColor' ),\n\t\t\theading:\n\t\t\t\tupdatedSettings.color?.heading &&\n\t\t\t\tsupportedStyles.includes( 'headingColor' ),\n\t\t\tlink:\n\t\t\t\tupdatedSettings.color?.link &&\n\t\t\t\tsupportedStyles.includes( 'linkColor' ),\n\t\t\tcaption:\n\t\t\t\tupdatedSettings.color?.caption &&\n\t\t\t\tsupportedStyles.includes( 'captionColor' ),\n\t\t};\n\n\t\t// Some blocks can enable background colors but disable gradients.\n\t\tif ( ! supportedStyles.includes( 'background' ) ) {\n\t\t\tupdatedSettings.color.gradients = [];\n\t\t\tupdatedSettings.color.customGradient = false;\n\t\t}\n\n\t\t// If filters are not supported by the block/element, disable duotone.\n\t\tif ( ! supportedStyles.includes( 'filter' ) ) {\n\t\t\tupdatedSettings.color.defaultDuotone = false;\n\t\t\tupdatedSettings.color.customDuotone = false;\n\t\t}\n\n\t\t[\n\t\t\t'lineHeight',\n\t\t\t'fontStyle',\n\t\t\t'fontWeight',\n\t\t\t'letterSpacing',\n\t\t\t'textTransform',\n\t\t\t'textDecoration',\n\t\t].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.typography = {\n\t\t\t\t\t...updatedSettings.typography,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\t// The column-count style is named text column to reduce confusion with\n\t\t// the columns block and manage expectations from the support.\n\t\t// See: https://github.com/WordPress/gutenberg/pull/33587\n\t\tif ( ! supportedStyles.includes( 'columnCount' ) ) {\n\t\t\tupdatedSettings.typography = {\n\t\t\t\t...updatedSettings.typography,\n\t\t\t\ttextColumns: false,\n\t\t\t};\n\t\t}\n\n\t\t[ 'contentSize', 'wideSize' ].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.layout = {\n\t\t\t\t\t...updatedSettings.layout,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\t[ 'padding', 'margin', 'blockGap' ].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.spacing = {\n\t\t\t\t\t...updatedSettings.spacing,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst sides = Array.isArray( supports?.spacing?.[ key ] )\n\t\t\t\t? supports?.spacing?.[ key ]\n\t\t\t\t: supports?.spacing?.[ key ]?.sides;\n\t\t\tif ( sides?.length ) {\n\t\t\t\tupdatedSettings.spacing = {\n\t\t\t\t\t...updatedSettings.spacing,\n\t\t\t\t\t[ key ]: {\n\t\t\t\t\t\t...updatedSettings.spacing?.[ key ],\n\t\t\t\t\t\tsides,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\tif ( ! supportedStyles.includes( 'minHeight' ) ) {\n\t\t\tupdatedSettings.dimensions = {\n\t\t\t\t...updatedSettings.dimensions,\n\t\t\t\tminHeight: false,\n\t\t\t};\n\t\t}\n\n\t\t[ 'radius', 'color', 'style', 'width' ].forEach( ( key ) => {\n\t\t\tif (\n\t\t\t\t! supportedStyles.includes(\n\t\t\t\t\t'border' + key.charAt( 0 ).toUpperCase() + key.slice( 1 )\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tupdatedSettings.border = {\n\t\t\t\t\t...updatedSettings.border,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\tupdatedSettings.shadow = supportedStyles.includes( 'shadow' )\n\t\t\t? updatedSettings.shadow\n\t\t\t: false;\n\n\t\treturn updatedSettings;\n\t}, [ parentSettings, supportedStyles, supports ] );\n}\n\nexport function useColorsPerOrigin( settings ) {\n\tconst customColors = settings?.color?.palette?.custom;\n\tconst themeColors = settings?.color?.palette?.theme;\n\tconst defaultColors = settings?.color?.palette?.default;\n\tconst shouldDisplayDefaultColors = settings?.color?.defaultPalette;\n\n\treturn useMemo( () => {\n\t\tconst result = [];\n\t\tif ( themeColors && themeColors.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Theme',\n\t\t\t\t\t'Indicates this palette comes from the theme.'\n\t\t\t\t),\n\t\t\t\tcolors: themeColors,\n\t\t\t} );\n\t\t}\n\t\tif (\n\t\t\tshouldDisplayDefaultColors &&\n\t\t\tdefaultColors &&\n\t\t\tdefaultColors.length\n\t\t) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Default',\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\n\t\t\t\t),\n\t\t\t\tcolors: defaultColors,\n\t\t\t} );\n\t\t}\n\t\tif ( customColors && customColors.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Custom',\n\t\t\t\t\t'Indicates this palette is created by the user.'\n\t\t\t\t),\n\t\t\t\tcolors: customColors,\n\t\t\t} );\n\t\t}\n\t\treturn result;\n\t}, [\n\t\tcustomColors,\n\t\tthemeColors,\n\t\tdefaultColors,\n\t\tshouldDisplayDefaultColors,\n\t] );\n}\n\nexport function useGradientsPerOrigin( settings ) {\n\tconst customGradients = settings?.color?.gradients?.custom;\n\tconst themeGradients = settings?.color?.gradients?.theme;\n\tconst defaultGradients = settings?.color?.gradients?.default;\n\tconst shouldDisplayDefaultGradients = settings?.color?.defaultGradients;\n\n\treturn useMemo( () => {\n\t\tconst result = [];\n\t\tif ( themeGradients && themeGradients.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Theme',\n\t\t\t\t\t'Indicates this palette comes from the theme.'\n\t\t\t\t),\n\t\t\t\tgradients: themeGradients,\n\t\t\t} );\n\t\t}\n\t\tif (\n\t\t\tshouldDisplayDefaultGradients &&\n\t\t\tdefaultGradients &&\n\t\t\tdefaultGradients.length\n\t\t) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Default',\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\n\t\t\t\t),\n\t\t\t\tgradients: defaultGradients,\n\t\t\t} );\n\t\t}\n\t\tif ( customGradients && customGradients.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Custom',\n\t\t\t\t\t'Indicates this palette is created by the user.'\n\t\t\t\t),\n\t\t\t\tgradients: customGradients,\n\t\t\t} );\n\t\t}\n\t\treturn result;\n\t}, [\n\t\tcustomGradients,\n\t\tthemeGradients,\n\t\tdefaultGradients,\n\t\tshouldDisplayDefaultGradients,\n\t] );\n}\n","/**\n * Converts a path to an array of its fragments.\n * Supports strings, numbers and arrays:\n *\n * 'foo' => [ 'foo' ]\n * 2 => [ '2' ]\n * [ 'foo', 'bar' ] => [ 'foo', 'bar' ]\n *\n * @param {string|number|Array} path Path\n * @return {Array} Normalized path.\n */\nfunction normalizePath( path ) {\n\tif ( Array.isArray( path ) ) {\n\t\treturn path;\n\t} else if ( typeof path === 'number' ) {\n\t\treturn [ path.toString() ];\n\t}\n\n\treturn [ path ];\n}\n\n/**\n * Clones an object.\n * Non-object values are returned unchanged.\n *\n * @param {*} object Object to clone.\n * @return {*} Cloned object, or original literal non-object value.\n */\nfunction cloneObject( object ) {\n\tif ( object && typeof object === 'object' ) {\n\t\treturn {\n\t\t\t...Object.fromEntries(\n\t\t\t\tObject.entries( object ).map( ( [ key, value ] ) => [\n\t\t\t\t\tkey,\n\t\t\t\t\tcloneObject( value ),\n\t\t\t\t] )\n\t\t\t),\n\t\t};\n\t}\n\n\treturn object;\n}\n\n/**\n * Immutably sets a value inside an object. Like `lodash#set`, but returning a\n * new object. Treats nullish initial values as empty objects. Clones any\n * nested objects.\n *\n * @param {Object}              object Object to set a value in.\n * @param {number|string|Array} path   Path in the object to modify.\n * @param {*}                   value  New value to set.\n * @return {Object} Cloned object with the new value set.\n */\nexport function setImmutably( object, path, value ) {\n\tconst normalizedPath = normalizePath( path );\n\tconst newObject = object ? cloneObject( object ) : {};\n\n\tnormalizedPath.reduce( ( acc, key, i ) => {\n\t\tif ( acc[ key ] === undefined ) {\n\t\t\tacc[ key ] = {};\n\t\t}\n\t\tif ( i === normalizedPath.length - 1 ) {\n\t\t\tacc[ key ] = value;\n\t\t}\n\t\treturn acc[ key ];\n\t}, newObject );\n\n\treturn newObject;\n}\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { getBlockSupport } from '@wordpress/blocks';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useSetting } from '../components';\nimport { useSettingsForBlockElement } from '../components/global-styles/hooks';\nimport { setImmutably } from '../utils/object';\n\n/**\n * Removed falsy values from nested object.\n *\n * @param {*} object\n * @return {*} Object cleaned from falsy values\n */\nexport const cleanEmptyObject = ( object ) => {\n\tif (\n\t\tobject === null ||\n\t\ttypeof object !== 'object' ||\n\t\tArray.isArray( object )\n\t) {\n\t\treturn object;\n\t}\n\n\tconst cleanedNestedObjects = Object.entries( object )\n\t\t.map( ( [ key, value ] ) => [ key, cleanEmptyObject( value ) ] )\n\t\t.filter( ( [ , value ] ) => value !== undefined );\n\treturn ! cleanedNestedObjects.length\n\t\t? undefined\n\t\t: Object.fromEntries( cleanedNestedObjects );\n};\n\nexport function transformStyles(\n\tactiveSupports,\n\tmigrationPaths,\n\tresult,\n\tsource,\n\tindex,\n\tresults\n) {\n\t// If there are no active supports return early.\n\tif (\n\t\tObject.values( activeSupports ?? {} ).every(\n\t\t\t( isActive ) => ! isActive\n\t\t)\n\t) {\n\t\treturn result;\n\t}\n\t// If the condition verifies we are probably in the presence of a wrapping transform\n\t// e.g: nesting paragraphs in a group or columns and in that case the styles should not be transformed.\n\tif ( results.length === 1 && result.innerBlocks.length === source.length ) {\n\t\treturn result;\n\t}\n\t// For cases where we have a transform from one block to multiple blocks\n\t// or multiple blocks to one block we apply the styles of the first source block\n\t// to the result(s).\n\tlet referenceBlockAttributes = source[ 0 ]?.attributes;\n\t// If we are in presence of transform between more than one block in the source\n\t// that has more than one block in the result\n\t// we apply the styles on source N to the result N,\n\t// if source N does not exists we do nothing.\n\tif ( results.length > 1 && source.length > 1 ) {\n\t\tif ( source[ index ] ) {\n\t\t\treferenceBlockAttributes = source[ index ]?.attributes;\n\t\t} else {\n\t\t\treturn result;\n\t\t}\n\t}\n\tlet returnBlock = result;\n\tObject.entries( activeSupports ).forEach( ( [ support, isActive ] ) => {\n\t\tif ( isActive ) {\n\t\t\tmigrationPaths[ support ].forEach( ( path ) => {\n\t\t\t\tconst styleValue = get( referenceBlockAttributes, path );\n\t\t\t\tif ( styleValue ) {\n\t\t\t\t\treturnBlock = {\n\t\t\t\t\t\t...returnBlock,\n\t\t\t\t\t\tattributes: setImmutably(\n\t\t\t\t\t\t\treturnBlock.attributes,\n\t\t\t\t\t\t\tpath,\n\t\t\t\t\t\t\tstyleValue\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n\treturn returnBlock;\n}\n\n/**\n * Check whether serialization of specific block support feature or set should\n * be skipped.\n *\n * @param {string|Object} blockType  Block name or block type object.\n * @param {string}        featureSet Name of block support feature set.\n * @param {string}        feature    Name of the individual feature to check.\n *\n * @return {boolean} Whether serialization should occur.\n */\nexport function shouldSkipSerialization( blockType, featureSet, feature ) {\n\tconst support = getBlockSupport( blockType, featureSet );\n\tconst skipSerialization = support?.__experimentalSkipSerialization;\n\n\tif ( Array.isArray( skipSerialization ) ) {\n\t\treturn skipSerialization.includes( feature );\n\t}\n\n\treturn skipSerialization;\n}\n\n/**\n * Based on the block and its context, returns an object of all the block settings.\n * This object can be passed as a prop to all the Styles UI components\n * (TypographyPanel, DimensionsPanel...).\n *\n * @param {string} name         Block name.\n * @param {*}      parentLayout Parent layout.\n *\n * @return {Object} Settings object.\n */\nexport function useBlockSettings( name, parentLayout ) {\n\tconst fontFamilies = useSetting( 'typography.fontFamilies' );\n\tconst fontSizes = useSetting( 'typography.fontSizes' );\n\tconst customFontSize = useSetting( 'typography.customFontSize' );\n\tconst fontStyle = useSetting( 'typography.fontStyle' );\n\tconst fontWeight = useSetting( 'typography.fontWeight' );\n\tconst lineHeight = useSetting( 'typography.lineHeight' );\n\tconst textColumns = useSetting( 'typography.textColumns' );\n\tconst textDecoration = useSetting( 'typography.textDecoration' );\n\tconst textTransform = useSetting( 'typography.textTransform' );\n\tconst letterSpacing = useSetting( 'typography.letterSpacing' );\n\tconst padding = useSetting( 'spacing.padding' );\n\tconst margin = useSetting( 'spacing.margin' );\n\tconst blockGap = useSetting( 'spacing.blockGap' );\n\tconst spacingSizes = useSetting( 'spacing.spacingSizes' );\n\tconst units = useSetting( 'spacing.units' );\n\tconst minHeight = useSetting( 'dimensions.minHeight' );\n\tconst layout = useSetting( 'layout' );\n\tconst borderColor = useSetting( 'border.color' );\n\tconst borderRadius = useSetting( 'border.radius' );\n\tconst borderStyle = useSetting( 'border.style' );\n\tconst borderWidth = useSetting( 'border.width' );\n\tconst customColorsEnabled = useSetting( 'color.custom' );\n\tconst customColors = useSetting( 'color.palette.custom' );\n\tconst customDuotone = useSetting( 'color.customDuotone' );\n\tconst themeColors = useSetting( 'color.palette.theme' );\n\tconst defaultColors = useSetting( 'color.palette.default' );\n\tconst defaultPalette = useSetting( 'color.defaultPalette' );\n\tconst defaultDuotone = useSetting( 'color.defaultDuotone' );\n\tconst userDuotonePalette = useSetting( 'color.duotone.custom' );\n\tconst themeDuotonePalette = useSetting( 'color.duotone.theme' );\n\tconst defaultDuotonePalette = useSetting( 'color.duotone.default' );\n\tconst userGradientPalette = useSetting( 'color.gradients.custom' );\n\tconst themeGradientPalette = useSetting( 'color.gradients.theme' );\n\tconst defaultGradientPalette = useSetting( 'color.gradients.default' );\n\tconst defaultGradients = useSetting( 'color.defaultGradients' );\n\tconst areCustomGradientsEnabled = useSetting( 'color.customGradient' );\n\tconst isBackgroundEnabled = useSetting( 'color.background' );\n\tconst isLinkEnabled = useSetting( 'color.link' );\n\tconst isTextEnabled = useSetting( 'color.text' );\n\n\tconst rawSettings = useMemo( () => {\n\t\treturn {\n\t\t\tcolor: {\n\t\t\t\tpalette: {\n\t\t\t\t\tcustom: customColors,\n\t\t\t\t\ttheme: themeColors,\n\t\t\t\t\tdefault: defaultColors,\n\t\t\t\t},\n\t\t\t\tgradients: {\n\t\t\t\t\tcustom: userGradientPalette,\n\t\t\t\t\ttheme: themeGradientPalette,\n\t\t\t\t\tdefault: defaultGradientPalette,\n\t\t\t\t},\n\t\t\t\tduotone: {\n\t\t\t\t\tcustom: userDuotonePalette,\n\t\t\t\t\ttheme: themeDuotonePalette,\n\t\t\t\t\tdefault: defaultDuotonePalette,\n\t\t\t\t},\n\t\t\t\tdefaultGradients,\n\t\t\t\tdefaultPalette,\n\t\t\t\tdefaultDuotone,\n\t\t\t\tcustom: customColorsEnabled,\n\t\t\t\tcustomGradient: areCustomGradientsEnabled,\n\t\t\t\tcustomDuotone,\n\t\t\t\tbackground: isBackgroundEnabled,\n\t\t\t\tlink: isLinkEnabled,\n\t\t\t\ttext: isTextEnabled,\n\t\t\t},\n\t\t\ttypography: {\n\t\t\t\tfontFamilies: {\n\t\t\t\t\tcustom: fontFamilies,\n\t\t\t\t},\n\t\t\t\tfontSizes: {\n\t\t\t\t\tcustom: fontSizes,\n\t\t\t\t},\n\t\t\t\tcustomFontSize,\n\t\t\t\tfontStyle,\n\t\t\t\tfontWeight,\n\t\t\t\tlineHeight,\n\t\t\t\ttextColumns,\n\t\t\t\ttextDecoration,\n\t\t\t\ttextTransform,\n\t\t\t\tletterSpacing,\n\t\t\t},\n\t\t\tspacing: {\n\t\t\t\tspacingSizes: {\n\t\t\t\t\tcustom: spacingSizes,\n\t\t\t\t},\n\t\t\t\tpadding,\n\t\t\t\tmargin,\n\t\t\t\tblockGap,\n\t\t\t\tunits,\n\t\t\t},\n\t\t\tborder: {\n\t\t\t\tcolor: borderColor,\n\t\t\t\tradius: borderRadius,\n\t\t\t\tstyle: borderStyle,\n\t\t\t\twidth: borderWidth,\n\t\t\t},\n\t\t\tdimensions: {\n\t\t\t\tminHeight,\n\t\t\t},\n\t\t\tlayout,\n\t\t\tparentLayout,\n\t\t};\n\t}, [\n\t\tfontFamilies,\n\t\tfontSizes,\n\t\tcustomFontSize,\n\t\tfontStyle,\n\t\tfontWeight,\n\t\tlineHeight,\n\t\ttextColumns,\n\t\ttextDecoration,\n\t\ttextTransform,\n\t\tletterSpacing,\n\t\tpadding,\n\t\tmargin,\n\t\tblockGap,\n\t\tspacingSizes,\n\t\tunits,\n\t\tminHeight,\n\t\tlayout,\n\t\tparentLayout,\n\t\tborderColor,\n\t\tborderRadius,\n\t\tborderStyle,\n\t\tborderWidth,\n\t\tcustomColorsEnabled,\n\t\tcustomColors,\n\t\tcustomDuotone,\n\t\tthemeColors,\n\t\tdefaultColors,\n\t\tdefaultPalette,\n\t\tdefaultDuotone,\n\t\tuserDuotonePalette,\n\t\tthemeDuotonePalette,\n\t\tdefaultDuotonePalette,\n\t\tuserGradientPalette,\n\t\tthemeGradientPalette,\n\t\tdefaultGradientPalette,\n\t\tdefaultGradients,\n\t\tareCustomGradientsEnabled,\n\t\tisBackgroundEnabled,\n\t\tisLinkEnabled,\n\t\tisTextEnabled,\n\t] );\n\n\treturn useSettingsForBlockElement( rawSettings, name );\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tjustifyLeft,\n\tjustifyCenter,\n\tjustifyRight,\n\tjustifySpaceBetween,\n\tjustifyStretch,\n\tarrowRight,\n\tarrowDown,\n} from '@wordpress/icons';\nimport {\n\tButton,\n\tToggleControl,\n\tFlex,\n\tFlexItem,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { appendSelectors, getBlockGapCSS } from './utils';\nimport { getGapCSSValue } from '../hooks/gap';\nimport {\n\tBlockControls,\n\tJustifyContentControl,\n\tBlockVerticalAlignmentControl,\n} from '../components';\nimport { shouldSkipSerialization } from '../hooks/utils';\n\n// Used with the default, horizontal flex orientation.\nconst justifyContentMap = {\n\tleft: 'flex-start',\n\tright: 'flex-end',\n\tcenter: 'center',\n\t'space-between': 'space-between',\n};\n\n// Used with the vertical (column) flex orientation.\nconst alignItemsMap = {\n\tleft: 'flex-start',\n\tright: 'flex-end',\n\tcenter: 'center',\n\tstretch: 'stretch',\n};\n\nconst verticalAlignmentMap = {\n\ttop: 'flex-start',\n\tcenter: 'center',\n\tbottom: 'flex-end',\n\tstretch: 'stretch',\n\t'space-between': 'space-between',\n};\n\nconst flexWrapOptions = [ 'wrap', 'nowrap' ];\n\nexport default {\n\tname: 'flex',\n\tlabel: __( 'Flex' ),\n\tinspectorControls: function FlexLayoutInspectorControls( {\n\t\tlayout = {},\n\t\tonChange,\n\t\tlayoutBlockSupport = {},\n\t} ) {\n\t\tconst { allowOrientation = true } = layoutBlockSupport;\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Flex>\n\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t<FlexLayoutJustifyContentControl\n\t\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FlexItem>\n\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t{ allowOrientation && (\n\t\t\t\t\t\t\t<OrientationControl\n\t\t\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</FlexItem>\n\t\t\t\t</Flex>\n\t\t\t\t<FlexWrapControl layout={ layout } onChange={ onChange } />\n\t\t\t</>\n\t\t);\n\t},\n\ttoolBarControls: function FlexLayoutToolbarControls( {\n\t\tlayout = {},\n\t\tonChange,\n\t\tlayoutBlockSupport,\n\t} ) {\n\t\tif ( layoutBlockSupport?.allowSwitching ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst { allowVerticalAlignment = true } = layoutBlockSupport;\n\t\treturn (\n\t\t\t<BlockControls group=\"block\" __experimentalShareWithChildBlocks>\n\t\t\t\t<FlexLayoutJustifyContentControl\n\t\t\t\t\tlayout={ layout }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tisToolbar\n\t\t\t\t/>\n\t\t\t\t{ allowVerticalAlignment && (\n\t\t\t\t\t<FlexLayoutVerticalAlignmentControl\n\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\tisToolbar\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</BlockControls>\n\t\t);\n\t},\n\tgetLayoutStyle: function getLayoutStyle( {\n\t\tselector,\n\t\tlayout,\n\t\tstyle,\n\t\tblockName,\n\t\thasBlockGapSupport,\n\t\tlayoutDefinitions,\n\t} ) {\n\t\tconst { orientation = 'horizontal' } = layout;\n\n\t\t// If a block's block.json skips serialization for spacing or spacing.blockGap,\n\t\t// don't apply the user-defined value to the styles.\n\t\tconst blockGapValue =\n\t\t\tstyle?.spacing?.blockGap &&\n\t\t\t! shouldSkipSerialization( blockName, 'spacing', 'blockGap' )\n\t\t\t\t? getGapCSSValue( style?.spacing?.blockGap, '0.5em' )\n\t\t\t\t: undefined;\n\t\tconst justifyContent = justifyContentMap[ layout.justifyContent ];\n\t\tconst flexWrap = flexWrapOptions.includes( layout.flexWrap )\n\t\t\t? layout.flexWrap\n\t\t\t: 'wrap';\n\t\tconst verticalAlignment =\n\t\t\tverticalAlignmentMap[ layout.verticalAlignment ];\n\t\tconst alignItems =\n\t\t\talignItemsMap[ layout.justifyContent ] || alignItemsMap.left;\n\n\t\tlet output = '';\n\t\tconst rules = [];\n\n\t\tif ( flexWrap && flexWrap !== 'wrap' ) {\n\t\t\trules.push( `flex-wrap: ${ flexWrap }` );\n\t\t}\n\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\tif ( verticalAlignment ) {\n\t\t\t\trules.push( `align-items: ${ verticalAlignment }` );\n\t\t\t}\n\t\t\tif ( justifyContent ) {\n\t\t\t\trules.push( `justify-content: ${ justifyContent }` );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( verticalAlignment ) {\n\t\t\t\trules.push( `justify-content: ${ verticalAlignment }` );\n\t\t\t}\n\t\t\trules.push( 'flex-direction: column' );\n\t\t\trules.push( `align-items: ${ alignItems }` );\n\t\t}\n\n\t\tif ( rules.length ) {\n\t\t\toutput = `${ appendSelectors( selector ) } {\n\t\t\t\t${ rules.join( '; ' ) };\n\t\t\t}`;\n\t\t}\n\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\n\t\t\toutput += getBlockGapCSS(\n\t\t\t\tselector,\n\t\t\t\tlayoutDefinitions,\n\t\t\t\t'flex',\n\t\t\t\tblockGapValue\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t},\n\tgetOrientation( layout ) {\n\t\tconst { orientation = 'horizontal' } = layout;\n\t\treturn orientation;\n\t},\n\tgetAlignments() {\n\t\treturn [];\n\t},\n};\n\nfunction FlexLayoutVerticalAlignmentControl( {\n\tlayout,\n\tonChange,\n\tisToolbar = false,\n} ) {\n\tconst { orientation = 'horizontal' } = layout;\n\n\tconst defaultVerticalAlignment =\n\t\torientation === 'horizontal'\n\t\t\t? verticalAlignmentMap.center\n\t\t\t: verticalAlignmentMap.top;\n\n\tconst { verticalAlignment = defaultVerticalAlignment } = layout;\n\n\tconst onVerticalAlignmentChange = ( value ) => {\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tverticalAlignment: value,\n\t\t} );\n\t};\n\tif ( isToolbar ) {\n\t\treturn (\n\t\t\t<BlockVerticalAlignmentControl\n\t\t\t\tonChange={ onVerticalAlignmentChange }\n\t\t\t\tvalue={ verticalAlignment }\n\t\t\t\tcontrols={\n\t\t\t\t\torientation === 'horizontal'\n\t\t\t\t\t\t? [ 'top', 'center', 'bottom', 'stretch' ]\n\t\t\t\t\t\t: [ 'top', 'center', 'bottom', 'space-between' ]\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t}\n\n\tconst verticalAlignmentOptions = [\n\t\t{\n\t\t\tvalue: 'flex-start',\n\t\t\tlabel: __( 'Align items top' ),\n\t\t},\n\t\t{\n\t\t\tvalue: 'center',\n\t\t\tlabel: __( 'Align items center' ),\n\t\t},\n\t\t{\n\t\t\tvalue: 'flex-end',\n\t\t\tlabel: __( 'Align items bottom' ),\n\t\t},\n\t];\n\n\treturn (\n\t\t<fieldset className=\"block-editor-hooks__flex-layout-vertical-alignment-control\">\n\t\t\t<legend>{ __( 'Vertical alignment' ) }</legend>\n\t\t\t<div>\n\t\t\t\t{ verticalAlignmentOptions.map( ( value, icon, label ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tkey={ value }\n\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\tisPressed={ verticalAlignment === value }\n\t\t\t\t\t\t\tonClick={ () => onVerticalAlignmentChange( value ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t</fieldset>\n\t);\n}\n\nfunction FlexLayoutJustifyContentControl( {\n\tlayout,\n\tonChange,\n\tisToolbar = false,\n} ) {\n\tconst { justifyContent = 'left', orientation = 'horizontal' } = layout;\n\tconst onJustificationChange = ( value ) => {\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tjustifyContent: value,\n\t\t} );\n\t};\n\tconst allowedControls = [ 'left', 'center', 'right' ];\n\tif ( orientation === 'horizontal' ) {\n\t\tallowedControls.push( 'space-between' );\n\t} else {\n\t\tallowedControls.push( 'stretch' );\n\t}\n\tif ( isToolbar ) {\n\t\treturn (\n\t\t\t<JustifyContentControl\n\t\t\t\tallowedControls={ allowedControls }\n\t\t\t\tvalue={ justifyContent }\n\t\t\t\tonChange={ onJustificationChange }\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tposition: 'bottom right',\n\t\t\t\t\tvariant: 'toolbar',\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n\n\tconst justificationOptions = [\n\t\t{\n\t\t\tvalue: 'left',\n\t\t\ticon: justifyLeft,\n\t\t\tlabel: __( 'Justify items left' ),\n\t\t},\n\t\t{\n\t\t\tvalue: 'center',\n\t\t\ticon: justifyCenter,\n\t\t\tlabel: __( 'Justify items center' ),\n\t\t},\n\t\t{\n\t\t\tvalue: 'right',\n\t\t\ticon: justifyRight,\n\t\t\tlabel: __( 'Justify items right' ),\n\t\t},\n\t];\n\tif ( orientation === 'horizontal' ) {\n\t\tjustificationOptions.push( {\n\t\t\tvalue: 'space-between',\n\t\t\ticon: justifySpaceBetween,\n\t\t\tlabel: __( 'Space between items' ),\n\t\t} );\n\t} else {\n\t\tjustificationOptions.push( {\n\t\t\tvalue: 'stretch',\n\t\t\ticon: justifyStretch,\n\t\t\tlabel: __( 'Stretch items' ),\n\t\t} );\n\t}\n\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tlabel={ __( 'Justification' ) }\n\t\t\tvalue={ justifyContent }\n\t\t\tonChange={ onJustificationChange }\n\t\t\tclassName=\"block-editor-hooks__flex-layout-justification-controls\"\n\t\t>\n\t\t\t{ justificationOptions.map( ( { value, icon, label } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\t\t\tkey={ value }\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ToggleGroupControl>\n\t);\n}\n\nfunction FlexWrapControl( { layout, onChange } ) {\n\tconst { flexWrap = 'wrap' } = layout;\n\treturn (\n\t\t<ToggleControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tlabel={ __( 'Allow to wrap to multiple lines' ) }\n\t\t\tonChange={ ( value ) => {\n\t\t\t\tonChange( {\n\t\t\t\t\t...layout,\n\t\t\t\t\tflexWrap: value ? 'wrap' : 'nowrap',\n\t\t\t\t} );\n\t\t\t} }\n\t\t\tchecked={ flexWrap === 'wrap' }\n\t\t/>\n\t);\n}\n\nfunction OrientationControl( { layout, onChange } ) {\n\tconst {\n\t\torientation = 'horizontal',\n\t\tverticalAlignment,\n\t\tjustifyContent,\n\t} = layout;\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tclassName=\"block-editor-hooks__flex-layout-orientation-controls\"\n\t\t\tlabel={ __( 'Orientation' ) }\n\t\t\tvalue={ orientation }\n\t\t\tonChange={ ( value ) => {\n\t\t\t\t// Make sure the vertical alignment and justification are compatible with the new orientation.\n\t\t\t\tlet newVerticalAlignment = verticalAlignment;\n\t\t\t\tlet newJustification = justifyContent;\n\t\t\t\tif ( value === 'horizontal' ) {\n\t\t\t\t\tif ( verticalAlignment === 'space-between' ) {\n\t\t\t\t\t\tnewVerticalAlignment = 'center';\n\t\t\t\t\t}\n\t\t\t\t\tif ( justifyContent === 'stretch' ) {\n\t\t\t\t\t\tnewJustification = 'left';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( verticalAlignment === 'stretch' ) {\n\t\t\t\t\t\tnewVerticalAlignment = 'top';\n\t\t\t\t\t}\n\t\t\t\t\tif ( justifyContent === 'space-between' ) {\n\t\t\t\t\t\tnewJustification = 'left';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn onChange( {\n\t\t\t\t\t...layout,\n\t\t\t\t\torientation: value,\n\t\t\t\t\tverticalAlignment: newVerticalAlignment,\n\t\t\t\t\tjustifyContent: newJustification,\n\t\t\t\t} );\n\t\t\t} }\n\t\t>\n\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\ticon={ arrowRight }\n\t\t\t\tvalue={ 'horizontal' }\n\t\t\t\tlabel={ __( 'Horizontal' ) }\n\t\t\t/>\n\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\ticon={ arrowDown }\n\t\t\t\tvalue={ 'vertical' }\n\t\t\t\tlabel={ __( 'Vertical' ) }\n\t\t\t/>\n\t\t</ToggleGroupControl>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { getBlockGapCSS, getAlignmentsInfo } from './utils';\nimport { getGapCSSValue } from '../hooks/gap';\nimport { shouldSkipSerialization } from '../hooks/utils';\n\nexport default {\n\tname: 'default',\n\tlabel: __( 'Flow' ),\n\tinspectorControls: function DefaultLayoutInspectorControls() {\n\t\treturn null;\n\t},\n\ttoolBarControls: function DefaultLayoutToolbarControls() {\n\t\treturn null;\n\t},\n\tgetLayoutStyle: function getLayoutStyle( {\n\t\tselector,\n\t\tstyle,\n\t\tblockName,\n\t\thasBlockGapSupport,\n\t\tlayoutDefinitions,\n\t} ) {\n\t\tconst blockGapStyleValue = getGapCSSValue( style?.spacing?.blockGap );\n\n\t\t// If a block's block.json skips serialization for spacing or\n\t\t// spacing.blockGap, don't apply the user-defined value to the styles.\n\t\tlet blockGapValue = '';\n\t\tif ( ! shouldSkipSerialization( blockName, 'spacing', 'blockGap' ) ) {\n\t\t\t// If an object is provided only use the 'top' value for this kind of gap.\n\t\t\tif ( blockGapStyleValue?.top ) {\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue?.top );\n\t\t\t} else if ( typeof blockGapStyleValue === 'string' ) {\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue );\n\t\t\t}\n\t\t}\n\n\t\tlet output = '';\n\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\n\t\t\toutput += getBlockGapCSS(\n\t\t\t\tselector,\n\t\t\t\tlayoutDefinitions,\n\t\t\t\t'default',\n\t\t\t\tblockGapValue\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t},\n\tgetOrientation() {\n\t\treturn 'vertical';\n\t},\n\tgetAlignments( layout, isBlockBasedTheme ) {\n\t\tconst alignmentInfo = getAlignmentsInfo( layout );\n\t\tif ( layout.alignments !== undefined ) {\n\t\t\tif ( ! layout.alignments.includes( 'none' ) ) {\n\t\t\t\tlayout.alignments.unshift( 'none' );\n\t\t\t}\n\t\t\treturn layout.alignments.map( ( alignment ) => ( {\n\t\t\t\tname: alignment,\n\t\t\t\tinfo: alignmentInfo[ alignment ],\n\t\t\t} ) );\n\t\t}\n\n\t\tconst alignments = [\n\t\t\t{ name: 'left' },\n\t\t\t{ name: 'center' },\n\t\t\t{ name: 'right' },\n\t\t];\n\n\t\t// This is for backwards compatibility with hybrid themes.\n\t\tif ( ! isBlockBasedTheme ) {\n\t\t\tconst { contentSize, wideSize } = layout;\n\t\t\tif ( contentSize ) {\n\t\t\t\talignments.unshift( { name: 'full' } );\n\t\t\t}\n\n\t\t\tif ( wideSize ) {\n\t\t\t\talignments.unshift( {\n\t\t\t\t\tname: 'wide',\n\t\t\t\t\tinfo: alignmentInfo.wide,\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\talignments.unshift( { name: 'none', info: alignmentInfo.none } );\n\n\t\treturn alignments;\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { cloneElement } from '@wordpress/element';\n\n/** @typedef {{icon: JSX.Element, size?: number} & import('@wordpress/primitives').SVGProps} IconProps */\n\n/**\n * Return an SVG icon.\n *\n * @param {IconProps} props icon is the SVG component to render\n *                          size is a number specifiying the icon size in pixels\n *                          Other props will be passed to wrapped SVG component\n *\n * @return {JSX.Element}  Icon component\n */\nfunction Icon( { icon, size = 24, ...props } ) {\n\treturn cloneElement( icon, {\n\t\twidth: size,\n\t\theight: size,\n\t\t...props,\n\t} );\n}\n\nexport default Icon;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst positionCenter = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7 9v6h10V9H7zM5 19.8h14v-1.5H5v1.5zM5 4.3v1.5h14V4.3H5z\" />\n\t</SVG>\n);\n\nexport default positionCenter;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst stretchWide = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M5 9v6h14V9H5zm11-4.8H8v1.5h8V4.2zM8 19.8h8v-1.5H8v1.5z\" />\n\t</SVG>\n);\n\nexport default stretchWide;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"styleEngine\"];","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tIcon,\n\tpositionCenter,\n\tstretchWide,\n\tjustifyLeft,\n\tjustifyCenter,\n\tjustifyRight,\n} from '@wordpress/icons';\nimport { getCSSRules } from '@wordpress/style-engine';\n\n/**\n * Internal dependencies\n */\nimport useSetting from '../components/use-setting';\nimport { appendSelectors, getBlockGapCSS, getAlignmentsInfo } from './utils';\nimport { getGapCSSValue } from '../hooks/gap';\nimport { shouldSkipSerialization } from '../hooks/utils';\n\nexport default {\n\tname: 'constrained',\n\tlabel: __( 'Constrained' ),\n\tinspectorControls: function DefaultLayoutInspectorControls( {\n\t\tlayout,\n\t\tonChange,\n\t\tlayoutBlockSupport = {},\n\t} ) {\n\t\tconst { wideSize, contentSize, justifyContent = 'center' } = layout;\n\t\tconst { allowJustification = true } = layoutBlockSupport;\n\t\tconst onJustificationChange = ( value ) => {\n\t\t\tonChange( {\n\t\t\t\t...layout,\n\t\t\t\tjustifyContent: value,\n\t\t\t} );\n\t\t};\n\t\tconst justificationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'left',\n\t\t\t\ticon: justifyLeft,\n\t\t\t\tlabel: __( 'Justify items left' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'center',\n\t\t\t\ticon: justifyCenter,\n\t\t\t\tlabel: __( 'Justify items center' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'right',\n\t\t\t\ticon: justifyRight,\n\t\t\t\tlabel: __( 'Justify items right' ),\n\t\t\t},\n\t\t];\n\t\tconst units = useCustomUnits( {\n\t\t\tavailableUnits: useSetting( 'spacing.units' ) || [\n\t\t\t\t'%',\n\t\t\t\t'px',\n\t\t\t\t'em',\n\t\t\t\t'rem',\n\t\t\t\t'vw',\n\t\t\t],\n\t\t} );\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"block-editor-hooks__layout-controls\">\n\t\t\t\t\t<div className=\"block-editor-hooks__layout-controls-unit\">\n\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\tclassName=\"block-editor-hooks__layout-controls-unit-input\"\n\t\t\t\t\t\t\tlabel={ __( 'Content' ) }\n\t\t\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\t\t\t__unstableInputWidth=\"80px\"\n\t\t\t\t\t\t\tvalue={ contentSize || wideSize || '' }\n\t\t\t\t\t\t\tonChange={ ( nextWidth ) => {\n\t\t\t\t\t\t\t\tnextWidth =\n\t\t\t\t\t\t\t\t\t0 > parseFloat( nextWidth )\n\t\t\t\t\t\t\t\t\t\t? '0'\n\t\t\t\t\t\t\t\t\t\t: nextWidth;\n\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\t\tcontentSize: nextWidth,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Icon icon={ positionCenter } />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"block-editor-hooks__layout-controls-unit\">\n\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\tclassName=\"block-editor-hooks__layout-controls-unit-input\"\n\t\t\t\t\t\t\tlabel={ __( 'Wide' ) }\n\t\t\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\t\t\t__unstableInputWidth=\"80px\"\n\t\t\t\t\t\t\tvalue={ wideSize || contentSize || '' }\n\t\t\t\t\t\t\tonChange={ ( nextWidth ) => {\n\t\t\t\t\t\t\t\tnextWidth =\n\t\t\t\t\t\t\t\t\t0 > parseFloat( nextWidth )\n\t\t\t\t\t\t\t\t\t\t? '0'\n\t\t\t\t\t\t\t\t\t\t: nextWidth;\n\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\t\twideSize: nextWidth,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Icon icon={ stretchWide } />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<p className=\"block-editor-hooks__layout-controls-helptext\">\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Customize the width for all elements that are assigned to the center or wide columns.'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t\t{ allowJustification && (\n\t\t\t\t\t<ToggleGroupControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Justification' ) }\n\t\t\t\t\t\tvalue={ justifyContent }\n\t\t\t\t\t\tonChange={ onJustificationChange }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ justificationOptions.map(\n\t\t\t\t\t\t\t( { value, icon, label } ) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\t\t\t\t\t\t\tkey={ value }\n\t\t\t\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ToggleGroupControl>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t},\n\ttoolBarControls: function DefaultLayoutToolbarControls() {\n\t\treturn null;\n\t},\n\tgetLayoutStyle: function getLayoutStyle( {\n\t\tselector,\n\t\tlayout = {},\n\t\tstyle,\n\t\tblockName,\n\t\thasBlockGapSupport,\n\t\tlayoutDefinitions,\n\t} ) {\n\t\tconst { contentSize, wideSize, justifyContent } = layout;\n\t\tconst blockGapStyleValue = getGapCSSValue( style?.spacing?.blockGap );\n\n\t\t// If a block's block.json skips serialization for spacing or\n\t\t// spacing.blockGap, don't apply the user-defined value to the styles.\n\t\tlet blockGapValue = '';\n\t\tif ( ! shouldSkipSerialization( blockName, 'spacing', 'blockGap' ) ) {\n\t\t\t// If an object is provided only use the 'top' value for this kind of gap.\n\t\t\tif ( blockGapStyleValue?.top ) {\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue?.top );\n\t\t\t} else if ( typeof blockGapStyleValue === 'string' ) {\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue );\n\t\t\t}\n\t\t}\n\n\t\tconst marginLeft =\n\t\t\tjustifyContent === 'left' ? '0 !important' : 'auto !important';\n\t\tconst marginRight =\n\t\t\tjustifyContent === 'right' ? '0 !important' : 'auto !important';\n\n\t\tlet output =\n\t\t\t!! contentSize || !! wideSize\n\t\t\t\t? `\n\t\t\t\t\t${ appendSelectors(\n\t\t\t\t\t\tselector,\n\t\t\t\t\t\t'> :where(:not(.alignleft):not(.alignright):not(.alignfull))'\n\t\t\t\t\t) } {\n\t\t\t\t\t\tmax-width: ${ contentSize ?? wideSize };\n\t\t\t\t\t\tmargin-left: ${ marginLeft };\n\t\t\t\t\t\tmargin-right: ${ marginRight };\n\t\t\t\t\t}\n\t\t\t\t\t${ appendSelectors( selector, '> .alignwide' ) }  {\n\t\t\t\t\t\tmax-width: ${ wideSize ?? contentSize };\n\t\t\t\t\t}\n\t\t\t\t\t${ appendSelectors( selector, '> .alignfull' ) } {\n\t\t\t\t\t\tmax-width: none;\n\t\t\t\t\t}\n\t\t\t\t`\n\t\t\t\t: '';\n\n\t\tif ( justifyContent === 'left' ) {\n\t\t\toutput += `${ appendSelectors(\n\t\t\t\tselector,\n\t\t\t\t'> :where(:not(.alignleft):not(.alignright):not(.alignfull))'\n\t\t\t) }\n\t\t\t{ margin-left: ${ marginLeft }; }`;\n\t\t} else if ( justifyContent === 'right' ) {\n\t\t\toutput += `${ appendSelectors(\n\t\t\t\tselector,\n\t\t\t\t'> :where(:not(.alignleft):not(.alignright):not(.alignfull))'\n\t\t\t) }\n\t\t\t{ margin-right: ${ marginRight }; }`;\n\t\t}\n\n\t\t// If there is custom padding, add negative margins for alignfull blocks.\n\t\tif ( style?.spacing?.padding ) {\n\t\t\t// The style object might be storing a preset so we need to make sure we get a usable value.\n\t\t\tconst paddingValues = getCSSRules( style );\n\t\t\tpaddingValues.forEach( ( rule ) => {\n\t\t\t\tif ( rule.key === 'paddingRight' ) {\n\t\t\t\t\toutput += `\n\t\t\t\t\t${ appendSelectors( selector, '> .alignfull' ) } {\n\t\t\t\t\t\tmargin-right: calc(${ rule.value } * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\t} else if ( rule.key === 'paddingLeft' ) {\n\t\t\t\t\toutput += `\n\t\t\t\t\t${ appendSelectors( selector, '> .alignfull' ) } {\n\t\t\t\t\t\tmargin-left: calc(${ rule.value } * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\n\t\t\toutput += getBlockGapCSS(\n\t\t\t\tselector,\n\t\t\t\tlayoutDefinitions,\n\t\t\t\t'constrained',\n\t\t\t\tblockGapValue\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t},\n\tgetOrientation() {\n\t\treturn 'vertical';\n\t},\n\tgetAlignments( layout ) {\n\t\tconst alignmentInfo = getAlignmentsInfo( layout );\n\t\tif ( layout.alignments !== undefined ) {\n\t\t\tif ( ! layout.alignments.includes( 'none' ) ) {\n\t\t\t\tlayout.alignments.unshift( 'none' );\n\t\t\t}\n\t\t\treturn layout.alignments.map( ( alignment ) => ( {\n\t\t\t\tname: alignment,\n\t\t\t\tinfo: alignmentInfo[ alignment ],\n\t\t\t} ) );\n\t\t}\n\t\tconst { contentSize, wideSize } = layout;\n\n\t\tconst alignments = [\n\t\t\t{ name: 'left' },\n\t\t\t{ name: 'center' },\n\t\t\t{ name: 'right' },\n\t\t];\n\n\t\tif ( contentSize ) {\n\t\t\talignments.unshift( { name: 'full' } );\n\t\t}\n\n\t\tif ( wideSize ) {\n\t\t\talignments.unshift( { name: 'wide', info: alignmentInfo.wide } );\n\t\t}\n\n\t\talignments.unshift( { name: 'none', info: alignmentInfo.none } );\n\n\t\treturn alignments;\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nimport {\n\tBaseControl,\n\tFlex,\n\tFlexItem,\n\tRangeControl,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { appendSelectors, getBlockGapCSS } from './utils';\nimport { getGapCSSValue } from '../hooks/gap';\nimport { shouldSkipSerialization } from '../hooks/utils';\n\nconst RANGE_CONTROL_MAX_VALUES = {\n\tpx: 600,\n\t'%': 100,\n\tvw: 100,\n\tvh: 100,\n\tem: 38,\n\trem: 38,\n};\n\nexport default {\n\tname: 'grid',\n\tlabel: __( 'Grid' ),\n\tinspectorControls: function GridLayoutInspectorControls( {\n\t\tlayout = {},\n\t\tonChange,\n\t} ) {\n\t\treturn layout?.columnCount ? (\n\t\t\t<GridLayoutColumnsControl layout={ layout } onChange={ onChange } />\n\t\t) : (\n\t\t\t<GridLayoutMinimumWidthControl\n\t\t\t\tlayout={ layout }\n\t\t\t\tonChange={ onChange }\n\t\t\t/>\n\t\t);\n\t},\n\ttoolBarControls: function DefaultLayoutToolbarControls() {\n\t\treturn null;\n\t},\n\tgetLayoutStyle: function getLayoutStyle( {\n\t\tselector,\n\t\tlayout,\n\t\tstyle,\n\t\tblockName,\n\t\thasBlockGapSupport,\n\t\tlayoutDefinitions,\n\t} ) {\n\t\tconst { minimumColumnWidth = '12rem', columnCount = null } = layout;\n\n\t\t// If a block's block.json skips serialization for spacing or spacing.blockGap,\n\t\t// don't apply the user-defined value to the styles.\n\t\tconst blockGapValue =\n\t\t\tstyle?.spacing?.blockGap &&\n\t\t\t! shouldSkipSerialization( blockName, 'spacing', 'blockGap' )\n\t\t\t\t? getGapCSSValue( style?.spacing?.blockGap, '0.5em' )\n\t\t\t\t: undefined;\n\n\t\tlet output = '';\n\t\tconst rules = [];\n\n\t\tif ( columnCount ) {\n\t\t\trules.push(\n\t\t\t\t`grid-template-columns: repeat(${ columnCount }, minmax(0, 1fr))`\n\t\t\t);\n\t\t} else if ( minimumColumnWidth ) {\n\t\t\trules.push(\n\t\t\t\t`grid-template-columns: repeat(auto-fill, minmax(min(${ minimumColumnWidth }, 100%), 1fr))`\n\t\t\t);\n\t\t}\n\n\t\tif ( rules.length ) {\n\t\t\t// Reason to disable: the extra line breaks added by prettier mess with the unit tests.\n\t\t\t// eslint-disable-next-line prettier/prettier\n\t\t\toutput = `${ appendSelectors( selector ) } { ${ rules.join(\n\t\t\t\t'; '\n\t\t\t) }; }`;\n\t\t}\n\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\n\t\t\toutput += getBlockGapCSS(\n\t\t\t\tselector,\n\t\t\t\tlayoutDefinitions,\n\t\t\t\t'grid',\n\t\t\t\tblockGapValue\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t},\n\tgetOrientation() {\n\t\treturn 'horizontal';\n\t},\n\tgetAlignments() {\n\t\treturn [];\n\t},\n};\n\n// Enables setting minimum width of grid items.\nfunction GridLayoutMinimumWidthControl( { layout, onChange } ) {\n\tconst { minimumColumnWidth: value = '12rem' } = layout;\n\tconst [ quantity, unit ] = parseQuantityAndUnitFromRawValue( value );\n\n\tconst handleSliderChange = ( next ) => {\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tminimumColumnWidth: [ next, unit ].join( '' ),\n\t\t} );\n\t};\n\n\t// Mostly copied from HeightControl.\n\tconst handleUnitChange = ( newUnit ) => {\n\t\t// Attempt to smooth over differences between currentUnit and newUnit.\n\t\t// This should slightly improve the experience of switching between unit types.\n\t\tlet newValue;\n\n\t\tif ( [ 'em', 'rem' ].includes( newUnit ) && unit === 'px' ) {\n\t\t\t// Convert pixel value to an approximate of the new unit, assuming a root size of 16px.\n\t\t\tnewValue = ( quantity / 16 ).toFixed( 2 ) + newUnit;\n\t\t} else if ( [ 'em', 'rem' ].includes( unit ) && newUnit === 'px' ) {\n\t\t\t// Convert to pixel value assuming a root size of 16px.\n\t\t\tnewValue = Math.round( quantity * 16 ) + newUnit;\n\t\t} else if (\n\t\t\t[ 'vh', 'vw', '%' ].includes( newUnit ) &&\n\t\t\tquantity > 100\n\t\t) {\n\t\t\t// When converting to `vh`, `vw`, or `%` units, cap the new value at 100.\n\t\t\tnewValue = 100 + newUnit;\n\t\t}\n\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tminimumColumnWidth: newValue,\n\t\t} );\n\t};\n\n\treturn (\n\t\t<fieldset>\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t{ __( 'Minimum column width' ) }\n\t\t\t</BaseControl.VisualLabel>\n\t\t\t<Flex gap={ 4 }>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<UnitControl\n\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\tonChange={ ( newValue ) => {\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\tminimumColumnWidth: newValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonUnitChange={ handleUnitChange }\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tonChange={ handleSliderChange }\n\t\t\t\t\t\tvalue={ quantity }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tmax={ RANGE_CONTROL_MAX_VALUES[ unit ] || 600 }\n\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</fieldset>\n\t);\n}\n\n// Enables setting number of grid columns\nfunction GridLayoutColumnsControl( { layout, onChange } ) {\n\tconst { columnCount = 3 } = layout;\n\n\treturn (\n\t\t<RangeControl\n\t\t\tlabel={ __( 'Columns' ) }\n\t\t\tvalue={ columnCount }\n\t\t\tonChange={ ( value ) =>\n\t\t\t\tonChange( {\n\t\t\t\t\t...layout,\n\t\t\t\t\tcolumnCount: value,\n\t\t\t\t} )\n\t\t\t}\n\t\t\tmin={ 1 }\n\t\t\tmax={ 6 }\n\t\t/>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport flex from './flex';\nimport flow from './flow';\nimport constrained from './constrained';\nimport grid from './grid';\n\nconst layoutTypes = [ flow, flex, constrained, grid ];\n\n/**\n * Retrieves a layout type by name.\n *\n * @param {string} name - The name of the layout type.\n * @return {Object} Layout type.\n */\nexport function getLayoutType( name = 'default' ) {\n\treturn layoutTypes.find( ( layoutType ) => layoutType.name === name );\n}\n\n/**\n * Retrieves the available layout types.\n *\n * @return {Array} Layout types.\n */\nexport function getLayoutTypes() {\n\treturn layoutTypes;\n}\n","/**\n * WordPress dependencies\n */\nimport { createContext, useContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getLayoutType } from '../../layouts';\nimport useSetting from '../use-setting';\n\nexport const defaultLayout = { type: 'default' };\n\nconst Layout = createContext( defaultLayout );\n\n/**\n * Allows to define the layout.\n */\nexport const LayoutProvider = Layout.Provider;\n\n/**\n * React hook used to retrieve the layout config.\n */\nexport function useLayout() {\n\treturn useContext( Layout );\n}\n\nexport function LayoutStyle( { layout = {}, css, ...props } ) {\n\tconst layoutType = getLayoutType( layout.type );\n\tconst blockGapSupport = useSetting( 'spacing.blockGap' );\n\tconst hasBlockGapSupport = blockGapSupport !== null;\n\n\tif ( layoutType ) {\n\t\tif ( css ) {\n\t\t\treturn <style>{ css }</style>;\n\t\t}\n\t\tconst layoutStyle = layoutType.getLayoutStyle?.( {\n\t\t\thasBlockGapSupport,\n\t\t\tlayout,\n\t\t\t...props,\n\t\t} );\n\t\tif ( layoutStyle ) {\n\t\t\treturn <style>{ layoutStyle }</style>;\n\t\t}\n\t}\n\treturn null;\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useLayout } from '../block-list/layout';\nimport { store as blockEditorStore } from '../../store';\nimport { getLayoutType } from '../../layouts';\n\nconst EMPTY_ARRAY = [];\nconst DEFAULT_CONTROLS = [ 'none', 'left', 'center', 'right', 'wide', 'full' ];\nconst WIDE_CONTROLS = [ 'wide', 'full' ];\n\nexport default function useAvailableAlignments( controls = DEFAULT_CONTROLS ) {\n\t// Always add the `none` option if not exists.\n\tif ( ! controls.includes( 'none' ) ) {\n\t\tcontrols = [ 'none', ...controls ];\n\t}\n\tconst {\n\t\twideControlsEnabled = false,\n\t\tthemeSupportsLayout,\n\t\tisBlockBasedTheme,\n\t} = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\tconst settings = getSettings();\n\t\treturn {\n\t\t\twideControlsEnabled: settings.alignWide,\n\t\t\tthemeSupportsLayout: settings.supportsLayout,\n\t\t\tisBlockBasedTheme: settings.__unstableIsBlockBasedTheme,\n\t\t};\n\t}, [] );\n\tconst layout = useLayout();\n\tconst layoutType = getLayoutType( layout?.type );\n\tconst layoutAlignments = layoutType.getAlignments(\n\t\tlayout,\n\t\tisBlockBasedTheme\n\t);\n\n\tif ( themeSupportsLayout ) {\n\t\tconst alignments = layoutAlignments.filter(\n\t\t\t( { name: alignmentName } ) => controls.includes( alignmentName )\n\t\t);\n\t\t// While we treat `none` as an alignment, we shouldn't return it if no\n\t\t// other alignments exist.\n\t\tif ( alignments.length === 1 && alignments[ 0 ].name === 'none' ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\t\treturn alignments;\n\t}\n\n\t// Starting here, it's the fallback for themes not supporting the layout config.\n\tif ( layoutType.name !== 'default' && layoutType.name !== 'constrained' ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\tconst { alignments: availableAlignments = DEFAULT_CONTROLS } = layout;\n\tconst enabledControls = controls\n\t\t.filter(\n\t\t\t( control ) =>\n\t\t\t\t( layout.alignments || // Ignore the global wideAlignment check if the layout explicitely defines alignments.\n\t\t\t\t\twideControlsEnabled ||\n\t\t\t\t\t! WIDE_CONTROLS.includes( control ) ) &&\n\t\t\t\tavailableAlignments.includes( control )\n\t\t)\n\t\t.map( ( enabledControl ) => ( { name: enabledControl } ) );\n\n\t// While we treat `none` as an alignment, we shouldn't return it if no\n\t// other alignments exist.\n\tif (\n\t\tenabledControls.length === 1 &&\n\t\tenabledControls[ 0 ].name === 'none'\n\t) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\treturn enabledControls;\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst alignNone = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M5 15h14V9H5v6zm0 4.8h14v-1.5H5v1.5zM5 4.2v1.5h14V4.2H5z\" />\n\t</SVG>\n);\n\nexport default alignNone;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst positionLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4 9v6h14V9H4zm8-4.8H4v1.5h8V4.2zM4 19.8h8v-1.5H4v1.5z\" />\n\t</SVG>\n);\n\nexport default positionLeft;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst positionRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M6 15h14V9H6v6zm6-10.8v1.5h8V4.2h-8zm0 15.6h8v-1.5h-8v1.5z\" />\n\t</SVG>\n);\n\nexport default positionRight;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst stretchFullWidth = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M5 4v11h14V4H5zm3 15.8h8v-1.5H8v1.5z\" />\n\t</SVG>\n);\n\nexport default stretchFullWidth;\n","/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport {\n\talignNone,\n\tpositionCenter,\n\tpositionLeft,\n\tpositionRight,\n\tstretchFullWidth,\n\tstretchWide,\n} from '@wordpress/icons';\n\nexport const BLOCK_ALIGNMENTS_CONTROLS = {\n\tnone: {\n\t\ticon: alignNone,\n\t\ttitle: _x( 'None', 'Alignment option' ),\n\t},\n\tleft: {\n\t\ticon: positionLeft,\n\t\ttitle: __( 'Align left' ),\n\t},\n\tcenter: {\n\t\ticon: positionCenter,\n\t\ttitle: __( 'Align center' ),\n\t},\n\tright: {\n\t\ticon: positionRight,\n\t\ttitle: __( 'Align right' ),\n\t},\n\twide: {\n\t\ticon: stretchWide,\n\t\ttitle: __( 'Wide width' ),\n\t},\n\tfull: {\n\t\ticon: stretchFullWidth,\n\t\ttitle: __( 'Full width' ),\n\t},\n};\n\nexport const DEFAULT_CONTROL = 'none';\n\nexport const POPOVER_PROPS = {\n\tvariant: 'toolbar',\n};\n","/**\n * External dependencies\n */\nimport classNames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tToolbarDropdownMenu,\n\tToolbarGroup,\n\tMenuGroup,\n\tMenuItem,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport useAvailableAlignments from './use-available-alignments';\nimport {\n\tBLOCK_ALIGNMENTS_CONTROLS,\n\tDEFAULT_CONTROL,\n\tPOPOVER_PROPS,\n} from './constants';\n\nfunction BlockAlignmentUI( {\n\tvalue,\n\tonChange,\n\tcontrols,\n\tisToolbar,\n\tisCollapsed = true,\n} ) {\n\tconst enabledControls = useAvailableAlignments( controls );\n\tconst hasEnabledControls = !! enabledControls.length;\n\n\tif ( ! hasEnabledControls ) {\n\t\treturn null;\n\t}\n\n\tfunction onChangeAlignment( align ) {\n\t\tonChange( [ value, 'none' ].includes( align ) ? undefined : align );\n\t}\n\n\tconst activeAlignmentControl = BLOCK_ALIGNMENTS_CONTROLS[ value ];\n\tconst defaultAlignmentControl =\n\t\tBLOCK_ALIGNMENTS_CONTROLS[ DEFAULT_CONTROL ];\n\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\n\tconst commonProps = {\n\t\ticon: activeAlignmentControl\n\t\t\t? activeAlignmentControl.icon\n\t\t\t: defaultAlignmentControl.icon,\n\t\tlabel: __( 'Align' ),\n\t};\n\tconst extraProps = isToolbar\n\t\t? {\n\t\t\t\tisCollapsed,\n\t\t\t\tcontrols: enabledControls.map( ( { name: controlName } ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...BLOCK_ALIGNMENTS_CONTROLS[ controlName ],\n\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\tvalue === controlName ||\n\t\t\t\t\t\t\t( ! value && controlName === 'none' ),\n\t\t\t\t\t\trole: isCollapsed ? 'menuitemradio' : undefined,\n\t\t\t\t\t\tonClick: () => onChangeAlignment( controlName ),\n\t\t\t\t\t};\n\t\t\t\t} ),\n\t\t  }\n\t\t: {\n\t\t\t\ttoggleProps: { describedBy: __( 'Change alignment' ) },\n\t\t\t\tpopoverProps: POPOVER_PROPS,\n\t\t\t\tchildren: ( { onClose } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<MenuGroup className=\"block-editor-block-alignment-control__menu-group\">\n\t\t\t\t\t\t\t\t{ enabledControls.map(\n\t\t\t\t\t\t\t\t\t( { name: controlName, info } ) => {\n\t\t\t\t\t\t\t\t\t\tconst { icon, title } =\n\t\t\t\t\t\t\t\t\t\t\tBLOCK_ALIGNMENTS_CONTROLS[\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolName\n\t\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\t// If no value is provided, mark as selected the `none` option.\n\t\t\t\t\t\t\t\t\t\tconst isSelected =\n\t\t\t\t\t\t\t\t\t\t\tcontrolName === value ||\n\t\t\t\t\t\t\t\t\t\t\t( ! value &&\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolName === 'none' );\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\tkey={ controlName }\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={ classNames(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'components-dropdown-menu__menu-item',\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'is-active': isSelected,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChangeAlignment(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolName\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\trole=\"menuitemradio\"\n\t\t\t\t\t\t\t\t\t\t\t\tinfo={ info }\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t  };\n\n\treturn <UIComponent { ...commonProps } { ...extraProps } />;\n}\n\nexport default BlockAlignmentUI;\n","/**\n * Internal dependencies\n */\nimport BlockAlignmentUI from './ui';\n\nconst BlockAlignmentControl = ( props ) => {\n\treturn <BlockAlignmentUI { ...props } isToolbar={ false } />;\n};\n\nconst BlockAlignmentToolbar = ( props ) => {\n\treturn <BlockAlignmentUI { ...props } isToolbar />;\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-alignment-control/README.md\n */\nexport { BlockAlignmentControl, BlockAlignmentToolbar };\n","/**\n * WordPress dependencies\n */\nimport { createContext } from '@wordpress/element';\n\nexport const BlockListBlockContext = createContext( null );\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useContext, useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\nimport { BlockListBlockContext } from '../block-list/block-list-block-context';\n\n/**\n * @typedef {'disabled'|'contentOnly'|'default'} BlockEditingMode\n */\n\n/**\n * Allows a block to restrict the user interface that is displayed for editing\n * that block and its inner blocks.\n *\n * @example\n * ```js\n * function MyBlock( { attributes, setAttributes } ) {\n *     useBlockEditingMode( 'disabled' );\n *     return <div { ...useBlockProps() }></div>;\n * }\n * ```\n *\n * `mode` can be one of three options:\n *\n * - `'disabled'`: Prevents editing the block entirely, i.e. it cannot be\n *   selected.\n * - `'contentOnly'`: Hides all non-content UI, e.g. auxiliary controls in the\n *   toolbar, the block movers, block settings.\n * - `'default'`: Allows editing the block as normal.\n *\n * The mode is inherited by all of the block's inner blocks, unless they have\n * their own mode.\n *\n * If called outside of a block context, the mode is applied to all blocks.\n *\n * @param {?BlockEditingMode} mode The editing mode to apply. If undefined, the\n *                                 current editing mode is not changed.\n *\n * @return {BlockEditingMode} The current editing mode.\n */\nexport function useBlockEditingMode( mode ) {\n\tconst { clientId = '' } = useContext( BlockListBlockContext ) ?? {};\n\tconst blockEditingMode = useSelect(\n\t\t( select ) =>\n\t\t\tunlock( select( blockEditorStore ) ).getBlockEditingMode(\n\t\t\t\tclientId\n\t\t\t),\n\t\t[ clientId ]\n\t);\n\tconst { setBlockEditingMode, unsetBlockEditingMode } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\tuseEffect( () => {\n\t\tif ( mode ) {\n\t\t\tsetBlockEditingMode( clientId, mode );\n\t\t}\n\t\treturn () => {\n\t\t\tif ( mode ) {\n\t\t\t\tunsetBlockEditingMode( clientId );\n\t\t\t}\n\t\t};\n\t}, [ clientId, mode ] );\n\treturn blockEditingMode;\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport {\n\tgetBlockSupport,\n\tgetBlockType,\n\thasBlockSupport,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { BlockControls, BlockAlignmentControl } from '../components';\nimport useAvailableAlignments from '../components/block-alignment-control/use-available-alignments';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\n/**\n * An array which includes all possible valid alignments,\n * used to validate if an alignment is valid or not.\n *\n * @constant\n * @type {string[]}\n */\nconst ALL_ALIGNMENTS = [ 'left', 'center', 'right', 'wide', 'full' ];\n\n/**\n * An array which includes all wide alignments.\n * In order for this alignments to be valid they need to be supported by the block,\n * and by the theme.\n *\n * @constant\n * @type {string[]}\n */\nconst WIDE_ALIGNMENTS = [ 'wide', 'full' ];\n\n/**\n * Returns the valid alignments.\n * Takes into consideration the aligns supported by a block, if the block supports wide controls or not and if theme supports wide controls or not.\n * Exported just for testing purposes, not exported outside the module.\n *\n * @param {?boolean|string[]} blockAlign          Aligns supported by the block.\n * @param {?boolean}          hasWideBlockSupport True if block supports wide alignments. And False otherwise.\n * @param {?boolean}          hasWideEnabled      True if theme supports wide alignments. And False otherwise.\n *\n * @return {string[]} Valid alignments.\n */\nexport function getValidAlignments(\n\tblockAlign,\n\thasWideBlockSupport = true,\n\thasWideEnabled = true\n) {\n\tlet validAlignments;\n\tif ( Array.isArray( blockAlign ) ) {\n\t\tvalidAlignments = ALL_ALIGNMENTS.filter( ( value ) =>\n\t\t\tblockAlign.includes( value )\n\t\t);\n\t} else if ( blockAlign === true ) {\n\t\t// `true` includes all alignments...\n\t\tvalidAlignments = [ ...ALL_ALIGNMENTS ];\n\t} else {\n\t\tvalidAlignments = [];\n\t}\n\n\tif (\n\t\t! hasWideEnabled ||\n\t\t( blockAlign === true && ! hasWideBlockSupport )\n\t) {\n\t\treturn validAlignments.filter(\n\t\t\t( alignment ) => ! WIDE_ALIGNMENTS.includes( alignment )\n\t\t);\n\t}\n\n\treturn validAlignments;\n}\n\n/**\n * Filters registered block settings, extending attributes to include `align`.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( 'type' in ( settings.attributes?.align ?? {} ) ) {\n\t\treturn settings;\n\t}\n\tif ( hasBlockSupport( settings, 'align' ) ) {\n\t\t// Gracefully handle if settings.attributes is undefined.\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\talign: {\n\t\t\t\ttype: 'string',\n\t\t\t\t// Allow for '' since it is used by updateAlignment function\n\t\t\t\t// in withToolbarControls for special cases with defined default values.\n\t\t\t\tenum: [ ...ALL_ALIGNMENTS, '' ],\n\t\t\t},\n\t\t};\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override the default edit UI to include new toolbar controls for block\n * alignment, if block defines support.\n *\n * @param {Function} BlockEdit Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withToolbarControls = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\tconst blockEdit = <BlockEdit key=\"edit\" { ...props } />;\n\t\tconst { name: blockName } = props;\n\t\t// Compute the block valid alignments by taking into account,\n\t\t// if the theme supports wide alignments or not and the layout's\n\t\t// availble alignments. We do that for conditionally rendering\n\t\t// Slot.\n\t\tconst blockAllowedAlignments = getValidAlignments(\n\t\t\tgetBlockSupport( blockName, 'align' ),\n\t\t\thasBlockSupport( blockName, 'alignWide', true )\n\t\t);\n\n\t\tconst validAlignments = useAvailableAlignments(\n\t\t\tblockAllowedAlignments\n\t\t).map( ( { name } ) => name );\n\t\tconst blockEditingMode = useBlockEditingMode();\n\t\tif ( ! validAlignments.length || blockEditingMode !== 'default' ) {\n\t\t\treturn blockEdit;\n\t\t}\n\n\t\tconst updateAlignment = ( nextAlign ) => {\n\t\t\tif ( ! nextAlign ) {\n\t\t\t\tconst blockType = getBlockType( props.name );\n\t\t\t\tconst blockDefaultAlign = blockType?.attributes?.align?.default;\n\t\t\t\tif ( blockDefaultAlign ) {\n\t\t\t\t\tnextAlign = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tprops.setAttributes( { align: nextAlign } );\n\t\t};\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<BlockControls group=\"block\" __experimentalShareWithChildBlocks>\n\t\t\t\t\t<BlockAlignmentControl\n\t\t\t\t\t\tvalue={ props.attributes.align }\n\t\t\t\t\t\tonChange={ updateAlignment }\n\t\t\t\t\t\tcontrols={ validAlignments }\n\t\t\t\t\t/>\n\t\t\t\t</BlockControls>\n\t\t\t\t{ blockEdit }\n\t\t\t</>\n\t\t);\n\t},\n\t'withToolbarControls'\n);\n\n/**\n * Override the default block element to add alignment wrapper props.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withDataAlign = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst { name, attributes } = props;\n\t\tconst { align } = attributes;\n\t\tconst blockAllowedAlignments = getValidAlignments(\n\t\t\tgetBlockSupport( name, 'align' ),\n\t\t\thasBlockSupport( name, 'alignWide', true )\n\t\t);\n\t\tconst validAlignments = useAvailableAlignments(\n\t\t\tblockAllowedAlignments\n\t\t);\n\n\t\t// If an alignment is not assigned, there's no need to go through the\n\t\t// effort to validate or assign its value.\n\t\tif ( align === undefined ) {\n\t\t\treturn <BlockListBlock { ...props } />;\n\t\t}\n\n\t\tlet wrapperProps = props.wrapperProps;\n\t\tif (\n\t\t\tvalidAlignments.some( ( alignment ) => alignment.name === align )\n\t\t) {\n\t\t\twrapperProps = { ...wrapperProps, 'data-align': align };\n\t\t}\n\n\t\treturn <BlockListBlock { ...props } wrapperProps={ wrapperProps } />;\n\t},\n\t'withDataAlign'\n);\n\n/**\n * Override props assigned to save component to inject alignment class name if\n * block supports it.\n *\n * @param {Object} props      Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addAssignedAlign( props, blockType, attributes ) {\n\tconst { align } = attributes;\n\tconst blockAlign = getBlockSupport( blockType, 'align' );\n\tconst hasWideBlockSupport = hasBlockSupport( blockType, 'alignWide', true );\n\n\t// Compute valid alignments without taking into account if\n\t// the theme supports wide alignments or not.\n\t// This way changing themes does not impact the block save.\n\tconst isAlignValid = getValidAlignments(\n\t\tblockAlign,\n\t\thasWideBlockSupport\n\t).includes( align );\n\tif ( isAlignValid ) {\n\t\tprops.className = classnames( `align${ align }`, props.className );\n\t}\n\n\treturn props;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/align/addAttribute',\n\taddAttribute\n);\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/editor/align/with-data-align',\n\twithDataAlign\n);\naddFilter(\n\t'editor.BlockEdit',\n\t'core/editor/align/with-toolbar-controls',\n\twithToolbarControls\n);\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/align/addAssignedAlign',\n\taddAssignedAlign\n);\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Filters registered block settings, extending attributes to include `lock`.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( 'type' in ( settings.attributes?.lock ?? {} ) ) {\n\t\treturn settings;\n\t}\n\t// Gracefully handle if settings.attributes is undefined.\n\tsettings.attributes = {\n\t\t...settings.attributes,\n\t\tlock: {\n\t\t\ttype: 'object',\n\t\t},\n\t};\n\n\treturn settings;\n}\n\naddFilter( 'blocks.registerBlockType', 'core/lock/addAttribute', addAttribute );\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst InspectorControlsDefault = createSlotFill( 'InspectorControls' );\nconst InspectorControlsAdvanced = createSlotFill( 'InspectorAdvancedControls' );\nconst InspectorControlsBorder = createSlotFill( 'InspectorControlsBorder' );\nconst InspectorControlsColor = createSlotFill( 'InspectorControlsColor' );\nconst InspectorControlsFilter = createSlotFill( 'InspectorControlsFilter' );\nconst InspectorControlsDimensions = createSlotFill(\n\t'InspectorControlsDimensions'\n);\nconst InspectorControlsPosition = createSlotFill( 'InspectorControlsPosition' );\nconst InspectorControlsTypography = createSlotFill(\n\t'InspectorControlsTypography'\n);\nconst InspectorControlsListView = createSlotFill( 'InspectorControlsListView' );\nconst InspectorControlsStyles = createSlotFill( 'InspectorControlsStyles' );\n\nconst groups = {\n\tdefault: InspectorControlsDefault,\n\tadvanced: InspectorControlsAdvanced,\n\tborder: InspectorControlsBorder,\n\tcolor: InspectorControlsColor,\n\tfilter: InspectorControlsFilter,\n\tdimensions: InspectorControlsDimensions,\n\tlist: InspectorControlsListView,\n\tsettings: InspectorControlsDefault, // Alias for default.\n\tstyles: InspectorControlsStyles,\n\ttypography: InspectorControlsTypography,\n\tposition: InspectorControlsPosition,\n};\n\nexport default groups;\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalStyleProvider as StyleProvider,\n\t__experimentalToolsPanelContext as ToolsPanelContext,\n} from '@wordpress/components';\nimport warning from '@wordpress/warning';\nimport deprecated from '@wordpress/deprecated';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useDisplayBlockControls from '../use-display-block-controls';\nimport groups from './groups';\n\nexport default function InspectorControlsFill( {\n\tchildren,\n\tgroup = 'default',\n\t__experimentalGroup,\n\tresetAllFilter,\n} ) {\n\tif ( __experimentalGroup ) {\n\t\tdeprecated(\n\t\t\t'`__experimentalGroup` property in `InspectorControlsFill`',\n\t\t\t{\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.4',\n\t\t\t\talternative: '`group`',\n\t\t\t}\n\t\t);\n\t\tgroup = __experimentalGroup;\n\t}\n\n\tconst isDisplayed = useDisplayBlockControls();\n\tconst Fill = groups[ group ]?.Fill;\n\tif ( ! Fill ) {\n\t\twarning( `Unknown InspectorControls group \"${ group }\" provided.` );\n\t\treturn null;\n\t}\n\tif ( ! isDisplayed ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<StyleProvider document={ document }>\n\t\t\t<Fill>\n\t\t\t\t{ ( fillProps ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ToolsPanelInspectorControl\n\t\t\t\t\t\t\tfillProps={ fillProps }\n\t\t\t\t\t\t\tchildren={ children }\n\t\t\t\t\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Fill>\n\t\t</StyleProvider>\n\t);\n}\n\nfunction ToolsPanelInspectorControl( { children, resetAllFilter, fillProps } ) {\n\tconst { registerResetAllFilter, deregisterResetAllFilter } = fillProps;\n\tuseEffect( () => {\n\t\tif ( resetAllFilter && registerResetAllFilter ) {\n\t\t\tregisterResetAllFilter( resetAllFilter );\n\t\t}\n\t\treturn () => {\n\t\t\tif ( resetAllFilter && deregisterResetAllFilter ) {\n\t\t\t\tderegisterResetAllFilter( resetAllFilter );\n\t\t\t}\n\t\t};\n\t}, [ resetAllFilter, registerResetAllFilter, deregisterResetAllFilter ] );\n\n\t// Children passed to InspectorControlsFill will not have\n\t// access to any React Context whose Provider is part of\n\t// the InspectorControlsSlot tree. So we re-create the\n\t// Provider in this subtree.\n\tconst value =\n\t\tfillProps && Object.keys( fillProps ).length > 0 ? fillProps : null;\n\treturn (\n\t\t<ToolsPanelContext.Provider value={ value }>\n\t\t\t{ children }\n\t\t</ToolsPanelContext.Provider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalToolsPanel as ToolsPanel } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { cleanEmptyObject } from '../../hooks/utils';\n\nexport default function BlockSupportToolsPanel( { children, group, label } ) {\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst {\n\t\tgetBlockAttributes,\n\t\tgetMultiSelectedBlockClientIds,\n\t\tgetSelectedBlockClientId,\n\t\thasMultiSelection,\n\t} = useSelect( blockEditorStore );\n\n\tconst panelId = getSelectedBlockClientId();\n\tconst resetAll = useCallback(\n\t\t( resetFilters = [] ) => {\n\t\t\tconst newAttributes = {};\n\n\t\t\tconst clientIds = hasMultiSelection()\n\t\t\t\t? getMultiSelectedBlockClientIds()\n\t\t\t\t: [ panelId ];\n\n\t\t\tclientIds.forEach( ( clientId ) => {\n\t\t\t\tconst { style } = getBlockAttributes( clientId );\n\t\t\t\tlet newBlockAttributes = { style };\n\n\t\t\t\tresetFilters.forEach( ( resetFilter ) => {\n\t\t\t\t\tnewBlockAttributes = {\n\t\t\t\t\t\t...newBlockAttributes,\n\t\t\t\t\t\t...resetFilter( newBlockAttributes ),\n\t\t\t\t\t};\n\t\t\t\t} );\n\n\t\t\t\t// Enforce a cleaned style object.\n\t\t\t\tnewBlockAttributes = {\n\t\t\t\t\t...newBlockAttributes,\n\t\t\t\t\tstyle: cleanEmptyObject( newBlockAttributes.style ),\n\t\t\t\t};\n\n\t\t\t\tnewAttributes[ clientId ] = newBlockAttributes;\n\t\t\t} );\n\n\t\t\tupdateBlockAttributes( clientIds, newAttributes, true );\n\t\t},\n\t\t[\n\t\t\tgetBlockAttributes,\n\t\t\tgetMultiSelectedBlockClientIds,\n\t\t\thasMultiSelection,\n\t\t\tpanelId,\n\t\t\tupdateBlockAttributes,\n\t\t]\n\t);\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tclassName={ `${ group }-block-support-panel` }\n\t\t\tlabel={ label }\n\t\t\tresetAll={ resetAll }\n\t\t\tkey={ panelId }\n\t\t\tpanelId={ panelId }\n\t\t\thasInnerWrapper={ true }\n\t\t\tshouldRenderPlaceholderItems={ true } // Required to maintain fills ordering.\n\t\t\t__experimentalFirstVisibleItemClass=\"first\"\n\t\t\t__experimentalLastVisibleItemClass=\"last\"\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalToolsPanelContext as ToolsPanelContext } from '@wordpress/components';\nimport { useContext } from '@wordpress/element';\n\nexport default function BlockSupportSlotContainer( { Slot, ...props } ) {\n\tconst toolsPanelContext = useContext( ToolsPanelContext );\n\treturn (\n\t\t<Slot { ...props } fillProps={ toolsPanelContext } bubblesVirtually />\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalUseSlotFills as useSlotFills } from '@wordpress/components';\nimport warning from '@wordpress/warning';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport BlockSupportToolsPanel from './block-support-tools-panel';\nimport BlockSupportSlotContainer from './block-support-slot-container';\nimport groups from './groups';\n\nexport default function InspectorControlsSlot( {\n\t__experimentalGroup,\n\tgroup = 'default',\n\tlabel,\n\t...props\n} ) {\n\tif ( __experimentalGroup ) {\n\t\tdeprecated(\n\t\t\t'`__experimentalGroup` property in `InspectorControlsSlot`',\n\t\t\t{\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.4',\n\t\t\t\talternative: '`group`',\n\t\t\t}\n\t\t);\n\t\tgroup = __experimentalGroup;\n\t}\n\tconst Slot = groups[ group ]?.Slot;\n\tconst fills = useSlotFills( Slot?.__unstableName );\n\tif ( ! Slot ) {\n\t\twarning( `Unknown InspectorControls group \"${ group }\" provided.` );\n\t\treturn null;\n\t}\n\n\tif ( ! fills?.length ) {\n\t\treturn null;\n\t}\n\n\tif ( label ) {\n\t\treturn (\n\t\t\t<BlockSupportToolsPanel group={ group } label={ label }>\n\t\t\t\t<BlockSupportSlotContainer { ...props } Slot={ Slot } />\n\t\t\t</BlockSupportToolsPanel>\n\t\t);\n\t}\n\n\treturn <Slot { ...props } bubblesVirtually />;\n}\n","/**\n * Internal dependencies\n */\nimport InspectorControlsFill from './fill';\nimport InspectorControlsSlot from './slot';\n\nconst InspectorControls = InspectorControlsFill;\n\nInspectorControls.Slot = InspectorControlsSlot;\n\n// This is just here for backward compatibility.\nexport const InspectorAdvancedControls = ( props ) => {\n\treturn <InspectorControlsFill { ...props } group=\"advanced\" />;\n};\nInspectorAdvancedControls.Slot = ( props ) => {\n\treturn <InspectorControlsSlot { ...props } group=\"advanced\" />;\n};\nInspectorAdvancedControls.slotName = 'InspectorAdvancedControls';\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/inspector-controls/README.md\n */\nexport default InspectorControls;\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { PanelBody, TextControl, ExternalLink } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { Platform } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { InspectorControls } from '../components';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\n/**\n * Regular expression matching invalid anchor characters for replacement.\n *\n * @type {RegExp}\n */\nconst ANCHOR_REGEX = /[\\s#]/g;\n\nconst ANCHOR_SCHEMA = {\n\ttype: 'string',\n\tsource: 'attribute',\n\tattribute: 'id',\n\tselector: '*',\n};\n\n/**\n * Filters registered block settings, extending attributes with anchor using ID\n * of the first node.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( 'type' in ( settings.attributes?.anchor ?? {} ) ) {\n\t\treturn settings;\n\t}\n\tif ( hasBlockSupport( settings, 'anchor' ) ) {\n\t\t// Gracefully handle if settings.attributes is undefined.\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tanchor: ANCHOR_SCHEMA,\n\t\t};\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override the default edit UI to include a new block inspector control for\n * assigning the anchor ID, if block supports anchor.\n *\n * @param {WPComponent} BlockEdit Original component.\n *\n * @return {WPComponent} Wrapped component.\n */\nexport const withInspectorControl = createHigherOrderComponent(\n\t( BlockEdit ) => {\n\t\treturn ( props ) => {\n\t\t\tconst hasAnchor = hasBlockSupport( props.name, 'anchor' );\n\t\t\tconst blockEditingMode = useBlockEditingMode();\n\n\t\t\tif ( hasAnchor && props.isSelected ) {\n\t\t\t\tconst isWeb = Platform.OS === 'web';\n\t\t\t\tconst textControl = (\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tclassName=\"html-anchor-control\"\n\t\t\t\t\t\tlabel={ __( 'HTML anchor' ) }\n\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Enter a word or two — without spaces — to make a unique web address just for this block, called an “anchor.” Then, you’ll be able to link directly to this section of your page.'\n\t\t\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t\t\t{ isWeb && (\n\t\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t\t\t\t\t'https://wordpress.org/documentation/article/page-jumps/'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Learn more about anchors' ) }\n\t\t\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue={ props.attributes.anchor || '' }\n\t\t\t\t\t\tplaceholder={ ! isWeb ? __( 'Add an anchor' ) : null }\n\t\t\t\t\t\tonChange={ ( nextValue ) => {\n\t\t\t\t\t\t\tnextValue = nextValue.replace( ANCHOR_REGEX, '-' );\n\t\t\t\t\t\t\tprops.setAttributes( {\n\t\t\t\t\t\t\t\tanchor: nextValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t/>\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<BlockEdit { ...props } />\n\t\t\t\t\t\t{ isWeb && blockEditingMode === 'default' && (\n\t\t\t\t\t\t\t<InspectorControls group=\"advanced\">\n\t\t\t\t\t\t\t\t{ textControl }\n\t\t\t\t\t\t\t</InspectorControls>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ /*\n\t\t\t\t\t\t * We plan to remove scoping anchors to 'core/heading' to support\n\t\t\t\t\t\t * anchors for all eligble blocks. Additionally we plan to explore\n\t\t\t\t\t\t * leveraging InspectorAdvancedControls instead of a custom\n\t\t\t\t\t\t * PanelBody title. https://github.com/WordPress/gutenberg/issues/28363\n\t\t\t\t\t\t */ }\n\t\t\t\t\t\t{ ! isWeb && props.name === 'core/heading' && (\n\t\t\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t\t\t<PanelBody title={ __( 'Heading settings' ) }>\n\t\t\t\t\t\t\t\t\t{ textControl }\n\t\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t\t</InspectorControls>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn <BlockEdit { ...props } />;\n\t\t};\n\t},\n\t'withInspectorControl'\n);\n\n/**\n * Override props assigned to save component to inject anchor ID, if block\n * supports anchor. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Current block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( extraProps, blockType, attributes ) {\n\tif ( hasBlockSupport( blockType, 'anchor' ) ) {\n\t\textraProps.id = attributes.anchor === '' ? null : attributes.anchor;\n\t}\n\n\treturn extraProps;\n}\n\naddFilter( 'blocks.registerBlockType', 'core/anchor/attribute', addAttribute );\naddFilter(\n\t'editor.BlockEdit',\n\t'core/editor/anchor/with-inspector-control',\n\twithInspectorControl\n);\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/anchor/save-props',\n\taddSaveProps\n);\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport } from '@wordpress/blocks';\n\nconst ARIA_LABEL_SCHEMA = {\n\ttype: 'string',\n\tsource: 'attribute',\n\tattribute: 'aria-label',\n\tselector: '*',\n};\n\n/**\n * Filters registered block settings, extending attributes with ariaLabel using aria-label\n * of the first node.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( settings?.attributes?.ariaLabel?.type ) {\n\t\treturn settings;\n\t}\n\tif ( hasBlockSupport( settings, 'ariaLabel' ) ) {\n\t\t// Gracefully handle if settings.attributes is undefined.\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tariaLabel: ARIA_LABEL_SCHEMA,\n\t\t};\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override props assigned to save component to inject aria-label, if block\n * supports ariaLabel. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Current block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( extraProps, blockType, attributes ) {\n\tif ( hasBlockSupport( blockType, 'ariaLabel' ) ) {\n\t\textraProps[ 'aria-label' ] =\n\t\t\tattributes.ariaLabel === '' ? null : attributes.ariaLabel;\n\t}\n\n\treturn extraProps;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/ariaLabel/attribute',\n\taddAttribute\n);\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/ariaLabel/save-props',\n\taddSaveProps\n);\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { TextControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { InspectorControls } from '../components';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\n/**\n * Filters registered block settings, extending attributes to include `className`.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\tif ( hasBlockSupport( settings, 'customClassName', true ) ) {\n\t\t// Gracefully handle if settings.attributes is undefined.\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tclassName: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t};\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override the default edit UI to include a new block inspector control for\n * assigning the custom class name, if block supports custom class name.\n * The control is displayed within the Advanced panel in the block inspector.\n *\n * @param {WPComponent} BlockEdit Original component.\n *\n * @return {WPComponent} Wrapped component.\n */\nexport const withInspectorControl = createHigherOrderComponent(\n\t( BlockEdit ) => {\n\t\treturn ( props ) => {\n\t\t\tconst blockEditingMode = useBlockEditingMode();\n\t\t\tconst hasCustomClassName = hasBlockSupport(\n\t\t\t\tprops.name,\n\t\t\t\t'customClassName',\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tif ( hasCustomClassName && props.isSelected ) {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<BlockEdit { ...props } />\n\t\t\t\t\t\t{ blockEditingMode === 'default' && (\n\t\t\t\t\t\t\t<InspectorControls group=\"advanced\">\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Additional CSS class(es)' ) }\n\t\t\t\t\t\t\t\t\tvalue={ props.attributes.className || '' }\n\t\t\t\t\t\t\t\t\tonChange={ ( nextValue ) => {\n\t\t\t\t\t\t\t\t\t\tprops.setAttributes( {\n\t\t\t\t\t\t\t\t\t\t\tclassName:\n\t\t\t\t\t\t\t\t\t\t\t\tnextValue !== ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t? nextValue\n\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t\t\t\t\t'Separate multiple classes with spaces.'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</InspectorControls>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn <BlockEdit { ...props } />;\n\t\t};\n\t},\n\t'withInspectorControl'\n);\n\n/**\n * Override props assigned to save component to inject the className, if block\n * supports customClassName. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Current block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( extraProps, blockType, attributes ) {\n\tif (\n\t\thasBlockSupport( blockType, 'customClassName', true ) &&\n\t\tattributes.className\n\t) {\n\t\textraProps.className = classnames(\n\t\t\textraProps.className,\n\t\t\tattributes.className\n\t\t);\n\t}\n\n\treturn extraProps;\n}\n\nexport function addTransforms( result, source, index, results ) {\n\tif ( ! hasBlockSupport( result.name, 'customClassName', true ) ) {\n\t\treturn result;\n\t}\n\n\t// If the condition verifies we are probably in the presence of a wrapping transform\n\t// e.g: nesting paragraphs in a group or columns and in that case the class should not be kept.\n\tif ( results.length === 1 && result.innerBlocks.length === source.length ) {\n\t\treturn result;\n\t}\n\n\t// If we are transforming one block to multiple blocks or multiple blocks to one block,\n\t// we ignore the class during the transform.\n\tif (\n\t\t( results.length === 1 && source.length > 1 ) ||\n\t\t( results.length > 1 && source.length === 1 )\n\t) {\n\t\treturn result;\n\t}\n\n\t// If we are in presence of transform between one or more block in the source\n\t// that have one or more blocks in the result\n\t// we apply the class on source N to the result N,\n\t// if source N does not exists we do nothing.\n\tif ( source[ index ] ) {\n\t\tconst originClassName = source[ index ]?.attributes.className;\n\t\tif ( originClassName ) {\n\t\t\treturn {\n\t\t\t\t...result,\n\t\t\t\tattributes: {\n\t\t\t\t\t...result.attributes,\n\t\t\t\t\tclassName: originClassName,\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\treturn result;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/custom-class-name/attribute',\n\taddAttribute\n);\naddFilter(\n\t'editor.BlockEdit',\n\t'core/editor/custom-class-name/with-inspector-control',\n\twithInspectorControl\n);\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/custom-class-name/save-props',\n\taddSaveProps\n);\n\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/color/addTransforms',\n\taddTransforms\n);\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport, getBlockDefaultClassName } from '@wordpress/blocks';\n\n/**\n * Override props assigned to save component to inject generated className if\n * block supports it. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addGeneratedClassName( extraProps, blockType ) {\n\t// Adding the generated className.\n\tif ( hasBlockSupport( blockType, 'className', true ) ) {\n\t\tif ( typeof extraProps.className === 'string' ) {\n\t\t\t// We have some extra classes and want to add the default classname\n\t\t\t// We use uniq to prevent duplicate classnames.\n\n\t\t\textraProps.className = [\n\t\t\t\t...new Set( [\n\t\t\t\t\tgetBlockDefaultClassName( blockType.name ),\n\t\t\t\t\t...extraProps.className.split( ' ' ),\n\t\t\t\t] ),\n\t\t\t]\n\t\t\t\t.join( ' ' )\n\t\t\t\t.trim();\n\t\t} else {\n\t\t\t// There is no string in the className variable,\n\t\t\t// so we just dump the default name in there.\n\t\t\textraProps.className = getBlockDefaultClassName( blockType.name );\n\t\t}\n\t}\n\treturn extraProps;\n}\n\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/generated-class-name/save-props',\n\taddGeneratedClassName\n);\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"dom\"];","/**\n * WordPress dependencies\n */\nimport { createContext, useContext, useMemo } from '@wordpress/element';\n\n/** @typedef {import('react').ReactNode} ReactNode */\n\n/**\n * @typedef BlockContextProviderProps\n *\n * @property {Record<string,*>} value    Context value to merge with current\n *                                       value.\n * @property {ReactNode}        children Component children.\n */\n\n/** @type {import('react').Context<Record<string,*>>} */\nconst Context = createContext( {} );\n\n/**\n * Component which merges passed value with current consumed block context.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-context/README.md\n *\n * @param {BlockContextProviderProps} props\n */\nexport function BlockContextProvider( { value, children } ) {\n\tconst context = useContext( Context );\n\tconst nextValue = useMemo(\n\t\t() => ( { ...context, ...value } ),\n\t\t[ context, value ]\n\t);\n\n\treturn <Context.Provider value={ nextValue } children={ children } />;\n}\n\nexport default Context;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { withFilters } from '@wordpress/components';\nimport {\n\tgetBlockDefaultClassName,\n\thasBlockSupport,\n\tgetBlockType,\n} from '@wordpress/blocks';\nimport { useContext, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockContext from '../block-context';\n\n/**\n * Default value used for blocks which do not define their own context needs,\n * used to guarantee that a block's `context` prop will always be an object. It\n * is assigned as a constant since it is always expected to be an empty object,\n * and in order to avoid unnecessary React reconciliations of a changing object.\n *\n * @type {{}}\n */\nconst DEFAULT_BLOCK_CONTEXT = {};\n\nexport const Edit = ( props ) => {\n\tconst { attributes = {}, name } = props;\n\tconst blockType = getBlockType( name );\n\tconst blockContext = useContext( BlockContext );\n\n\t// Assign context values using the block type's declared context needs.\n\tconst context = useMemo( () => {\n\t\treturn blockType && blockType.usesContext\n\t\t\t? Object.fromEntries(\n\t\t\t\t\tObject.entries( blockContext ).filter( ( [ key ] ) =>\n\t\t\t\t\t\tblockType.usesContext.includes( key )\n\t\t\t\t\t)\n\t\t\t  )\n\t\t\t: DEFAULT_BLOCK_CONTEXT;\n\t}, [ blockType, blockContext ] );\n\n\tif ( ! blockType ) {\n\t\treturn null;\n\t}\n\n\t// `edit` and `save` are functions or components describing the markup\n\t// with which a block is displayed. If `blockType` is valid, assign\n\t// them preferentially as the render value for the block.\n\tconst Component = blockType.edit || blockType.save;\n\n\tif ( blockType.apiVersion > 1 ) {\n\t\treturn <Component { ...props } context={ context } />;\n\t}\n\n\t// Generate a class name for the block's editable form.\n\tconst generatedClassName = hasBlockSupport( blockType, 'className', true )\n\t\t? getBlockDefaultClassName( name )\n\t\t: null;\n\tconst className = classnames(\n\t\tgeneratedClassName,\n\t\tattributes.className,\n\t\tprops.className\n\t);\n\n\treturn (\n\t\t<Component { ...props } context={ context } className={ className } />\n\t);\n};\n\nexport default withFilters( 'editor.BlockEdit' )( Edit );\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\n\nimport { hasBlockSupport } from '@wordpress/blocks';\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport { BlockEditContextProvider, useBlockEditContext } from './context';\n\n/**\n * The `useBlockEditContext` hook provides information about the block this hook is being used in.\n * It returns an object with the `name`, `isSelected` state, and the `clientId` of the block.\n * It is useful if you want to create custom hooks that need access to the current blocks clientId\n * but don't want to rely on the data getting passed in as a parameter.\n *\n * @return {Object} Block edit context\n */\nexport { useBlockEditContext };\n\nexport default function BlockEdit( props ) {\n\tconst {\n\t\tname,\n\t\tisSelected,\n\t\tclientId,\n\t\tattributes = {},\n\t\t__unstableLayoutClassNames,\n\t} = props;\n\tconst { layout = null } = attributes;\n\tconst layoutSupport = hasBlockSupport(\n\t\tname,\n\t\t'__experimentalLayout',\n\t\tfalse\n\t);\n\tconst context = {\n\t\tname,\n\t\tisSelected,\n\t\tclientId,\n\t\tlayout: layoutSupport ? layout : null,\n\t\t__unstableLayoutClassNames,\n\t};\n\treturn (\n\t\t<BlockEditContextProvider\n\t\t\t// It is important to return the same object if props haven't\n\t\t\t// changed to avoid  unnecessary rerenders.\n\t\t\t// See https://reactjs.org/docs/context.html#caveats.\n\t\t\tvalue={ useMemo( () => context, Object.values( context ) ) }\n\t\t>\n\t\t\t<Edit { ...props } />\n\t\t</BlockEditContextProvider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst moreHorizontal = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M11 13h2v-2h-2v2zm-6 0h2v-2H5v2zm12-2v2h2v-2h-2z\" />\n\t</SVG>\n);\n\nexport default moreHorizontal;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Children } from '@wordpress/element';\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { moreHorizontal } from '@wordpress/icons';\n\nfunction Warning( { className, actions, children, secondaryActions } ) {\n\treturn (\n\t\t<div style={ { display: 'contents', all: 'initial' } }>\n\t\t\t<div className={ classnames( className, 'block-editor-warning' ) }>\n\t\t\t\t<div className=\"block-editor-warning__contents\">\n\t\t\t\t\t<p className=\"block-editor-warning__message\">\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</p>\n\n\t\t\t\t\t{ ( Children.count( actions ) > 0 || secondaryActions ) && (\n\t\t\t\t\t\t<div className=\"block-editor-warning__actions\">\n\t\t\t\t\t\t\t{ Children.count( actions ) > 0 &&\n\t\t\t\t\t\t\t\tChildren.map( actions, ( action, i ) => (\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-warning__action\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ action }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t{ secondaryActions && (\n\t\t\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-warning__secondary\"\n\t\t\t\t\t\t\t\t\ticon={ moreHorizontal }\n\t\t\t\t\t\t\t\t\tlabel={ __( 'More options' ) }\n\t\t\t\t\t\t\t\t\tpopoverProps={ {\n\t\t\t\t\t\t\t\t\t\tposition: 'bottom left',\n\t\t\t\t\t\t\t\t\t\tclassName:\n\t\t\t\t\t\t\t\t\t\t\t'block-editor-warning__dropdown',\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tnoIcons\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ () => (\n\t\t\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t\t\t{ secondaryActions.map(\n\t\t\t\t\t\t\t\t\t\t\t\t( item, pos ) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ item.onClick }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={ pos }\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ item.title }\n\t\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/warning/README.md\n */\nexport default Warning;\n","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { RawHTML } from '@wordpress/element';\nimport { safeHTML } from '@wordpress/dom';\n\nexport default function BlockView( {\n\ttitle,\n\trawContent,\n\trenderedContent,\n\taction,\n\tactionText,\n\tclassName,\n} ) {\n\treturn (\n\t\t<div className={ className }>\n\t\t\t<div className=\"block-editor-block-compare__content\">\n\t\t\t\t<h2 className=\"block-editor-block-compare__heading\">\n\t\t\t\t\t{ title }\n\t\t\t\t</h2>\n\n\t\t\t\t<div className=\"block-editor-block-compare__html\">\n\t\t\t\t\t{ rawContent }\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"block-editor-block-compare__preview edit-post-visual-editor\">\n\t\t\t\t\t<RawHTML>{ safeHTML( renderedContent ) }</RawHTML>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"block-editor-block-compare__action\">\n\t\t\t\t<Button variant=\"secondary\" tabIndex=\"0\" onClick={ action }>\n\t\t\t\t\t{ actionText }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n// diff doesn't tree-shake correctly, so we import from the individual\n// module here, to avoid including too much of the library\nimport { diffChars } from 'diff/lib/diff/character';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { getSaveContent } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport BlockView from './block-view';\n\nfunction BlockCompare( {\n\tblock,\n\tonKeep,\n\tonConvert,\n\tconvertor,\n\tconvertButtonText,\n} ) {\n\tfunction getDifference( originalContent, newContent ) {\n\t\tconst difference = diffChars( originalContent, newContent );\n\n\t\treturn difference.map( ( item, pos ) => {\n\t\t\tconst classes = classnames( {\n\t\t\t\t'block-editor-block-compare__added': item.added,\n\t\t\t\t'block-editor-block-compare__removed': item.removed,\n\t\t\t} );\n\n\t\t\treturn (\n\t\t\t\t<span key={ pos } className={ classes }>\n\t\t\t\t\t{ item.value }\n\t\t\t\t</span>\n\t\t\t);\n\t\t} );\n\t}\n\n\tfunction getConvertedContent( convertedBlock ) {\n\t\t// The convertor may return an array of items or a single item.\n\t\tconst newBlocks = Array.isArray( convertedBlock )\n\t\t\t? convertedBlock\n\t\t\t: [ convertedBlock ];\n\n\t\t// Get converted block details.\n\t\tconst newContent = newBlocks.map( ( item ) =>\n\t\t\tgetSaveContent( item.name, item.attributes, item.innerBlocks )\n\t\t);\n\n\t\treturn newContent.join( '' );\n\t}\n\n\tconst converted = getConvertedContent( convertor( block ) );\n\tconst difference = getDifference( block.originalContent, converted );\n\n\treturn (\n\t\t<div className=\"block-editor-block-compare__wrapper\">\n\t\t\t<BlockView\n\t\t\t\ttitle={ __( 'Current' ) }\n\t\t\t\tclassName=\"block-editor-block-compare__current\"\n\t\t\t\taction={ onKeep }\n\t\t\t\tactionText={ __( 'Convert to HTML' ) }\n\t\t\t\trawContent={ block.originalContent }\n\t\t\t\trenderedContent={ block.originalContent }\n\t\t\t/>\n\n\t\t\t<BlockView\n\t\t\t\ttitle={ __( 'After Conversion' ) }\n\t\t\t\tclassName=\"block-editor-block-compare__converted\"\n\t\t\t\taction={ onConvert }\n\t\t\t\tactionText={ convertButtonText }\n\t\t\t\trawContent={ difference }\n\t\t\t\trenderedContent={ converted }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default BlockCompare;\n","/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport { Button, Modal } from '@wordpress/components';\nimport { useState, useCallback, useMemo } from '@wordpress/element';\nimport { createBlock, rawHandler } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport Warning from '../warning';\nimport BlockCompare from '../block-compare';\nimport { store as blockEditorStore } from '../../store';\n\nconst blockToBlocks = ( block ) =>\n\trawHandler( {\n\t\tHTML: block.originalContent,\n\t} );\n\nexport default function BlockInvalidWarning( { clientId } ) {\n\tconst { block, canInsertHTMLBlock, canInsertClassicBlock } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { canInsertBlockType, getBlock, getBlockRootClientId } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\n\t\t\treturn {\n\t\t\t\tblock: getBlock( clientId ),\n\t\t\t\tcanInsertHTMLBlock: canInsertBlockType(\n\t\t\t\t\t'core/html',\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t\tcanInsertClassicBlock: canInsertBlockType(\n\t\t\t\t\t'core/freeform',\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { replaceBlock } = useDispatch( blockEditorStore );\n\n\tconst [ compare, setCompare ] = useState( false );\n\tconst onCompareClose = useCallback( () => setCompare( false ), [] );\n\n\tconst convert = useMemo(\n\t\t() => ( {\n\t\t\ttoClassic() {\n\t\t\t\tconst classicBlock = createBlock( 'core/freeform', {\n\t\t\t\t\tcontent: block.originalContent,\n\t\t\t\t} );\n\t\t\t\treturn replaceBlock( block.clientId, classicBlock );\n\t\t\t},\n\t\t\ttoHTML() {\n\t\t\t\tconst htmlBlock = createBlock( 'core/html', {\n\t\t\t\t\tcontent: block.originalContent,\n\t\t\t\t} );\n\t\t\t\treturn replaceBlock( block.clientId, htmlBlock );\n\t\t\t},\n\t\t\ttoBlocks() {\n\t\t\t\tconst newBlocks = blockToBlocks( block );\n\t\t\t\treturn replaceBlock( block.clientId, newBlocks );\n\t\t\t},\n\t\t\ttoRecoveredBlock() {\n\t\t\t\tconst recoveredBlock = createBlock(\n\t\t\t\t\tblock.name,\n\t\t\t\t\tblock.attributes,\n\t\t\t\t\tblock.innerBlocks\n\t\t\t\t);\n\t\t\t\treturn replaceBlock( block.clientId, recoveredBlock );\n\t\t\t},\n\t\t} ),\n\t\t[ block, replaceBlock ]\n\t);\n\n\tconst secondaryActions = useMemo(\n\t\t() =>\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\t// translators: Button to fix block content\n\t\t\t\t\ttitle: _x( 'Resolve', 'imperative verb' ),\n\t\t\t\t\tonClick: () => setCompare( true ),\n\t\t\t\t},\n\t\t\t\tcanInsertHTMLBlock && {\n\t\t\t\t\ttitle: __( 'Convert to HTML' ),\n\t\t\t\t\tonClick: convert.toHTML,\n\t\t\t\t},\n\t\t\t\tcanInsertClassicBlock && {\n\t\t\t\t\ttitle: __( 'Convert to Classic Block' ),\n\t\t\t\t\tonClick: convert.toClassic,\n\t\t\t\t},\n\t\t\t].filter( Boolean ),\n\t\t[ canInsertHTMLBlock, canInsertClassicBlock, convert ]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Warning\n\t\t\t\tactions={ [\n\t\t\t\t\t<Button\n\t\t\t\t\t\tkey=\"recover\"\n\t\t\t\t\t\tonClick={ convert.toRecoveredBlock }\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Attempt Block Recovery' ) }\n\t\t\t\t\t</Button>,\n\t\t\t\t] }\n\t\t\t\tsecondaryActions={ secondaryActions }\n\t\t\t>\n\t\t\t\t{ __( 'This block contains unexpected or invalid content.' ) }\n\t\t\t</Warning>\n\t\t\t{ compare && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={\n\t\t\t\t\t\t// translators: Dialog title to fix block content\n\t\t\t\t\t\t__( 'Resolve Block' )\n\t\t\t\t\t}\n\t\t\t\t\tonRequestClose={ onCompareClose }\n\t\t\t\t\tclassName=\"block-editor-block-compare\"\n\t\t\t\t>\n\t\t\t\t\t<BlockCompare\n\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\tonKeep={ convert.toHTML }\n\t\t\t\t\t\tonConvert={ convert.toBlocks }\n\t\t\t\t\t\tconvertor={ blockToBlocks }\n\t\t\t\t\t\tconvertButtonText={ __( 'Convert to Blocks' ) }\n\t\t\t\t\t/>\n\t\t\t\t</Modal>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport Warning from '../warning';\n\nconst warning = (\n\t<Warning className=\"block-editor-block-list__block-crash-warning\">\n\t\t{ __( 'This block has encountered an error and cannot be previewed.' ) }\n\t</Warning>\n);\n\nexport default () => warning;\n","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\nclass BlockCrashBoundary extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\thasError: false,\n\t\t};\n\t}\n\n\tcomponentDidCatch() {\n\t\tthis.setState( {\n\t\t\thasError: true,\n\t\t} );\n\t}\n\n\trender() {\n\t\tif ( this.state.hasError ) {\n\t\t\treturn this.props.fallback;\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}\n\nexport default BlockCrashBoundary;\n","/**\n * External dependencies\n */\nimport TextareaAutosize from 'react-autosize-textarea';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport {\n\tgetBlockAttributes,\n\tgetBlockContent,\n\tgetBlockType,\n\tgetSaveContent,\n\tvalidateBlock,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nfunction BlockHTML( { clientId } ) {\n\tconst [ html, setHtml ] = useState( '' );\n\tconst block = useSelect(\n\t\t( select ) => select( blockEditorStore ).getBlock( clientId ),\n\t\t[ clientId ]\n\t);\n\tconst { updateBlock } = useDispatch( blockEditorStore );\n\tconst onChange = () => {\n\t\tconst blockType = getBlockType( block.name );\n\n\t\tif ( ! blockType ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst attributes = getBlockAttributes(\n\t\t\tblockType,\n\t\t\thtml,\n\t\t\tblock.attributes\n\t\t);\n\n\t\t// If html is empty  we reset the block to the default HTML and mark it as valid to avoid triggering an error\n\t\tconst content = html ? html : getSaveContent( blockType, attributes );\n\t\tconst [ isValid ] = html\n\t\t\t? validateBlock( {\n\t\t\t\t\t...block,\n\t\t\t\t\tattributes,\n\t\t\t\t\toriginalContent: content,\n\t\t\t  } )\n\t\t\t: [ true ];\n\n\t\tupdateBlock( clientId, {\n\t\t\tattributes,\n\t\t\toriginalContent: content,\n\t\t\tisValid,\n\t\t} );\n\n\t\t// Ensure the state is updated if we reset so it displays the default content.\n\t\tif ( ! html ) {\n\t\t\tsetHtml( content );\n\t\t}\n\t};\n\n\tuseEffect( () => {\n\t\tsetHtml( getBlockContent( block ) );\n\t}, [ block ] );\n\n\treturn (\n\t\t<TextareaAutosize\n\t\t\tclassName=\"block-editor-block-list__block-html-textarea\"\n\t\t\tvalue={ html }\n\t\t\tonBlur={ onChange }\n\t\t\tonChange={ ( event ) => setHtml( event.target.value ) }\n\t\t/>\n\t);\n}\n\nexport default BlockHTML;\n","let updateQueue = makeQueue();\nconst raf = fn => schedule(fn, updateQueue);\nlet writeQueue = makeQueue();\n\nraf.write = fn => schedule(fn, writeQueue);\n\nlet onStartQueue = makeQueue();\n\nraf.onStart = fn => schedule(fn, onStartQueue);\n\nlet onFrameQueue = makeQueue();\n\nraf.onFrame = fn => schedule(fn, onFrameQueue);\n\nlet onFinishQueue = makeQueue();\n\nraf.onFinish = fn => schedule(fn, onFinishQueue);\n\nlet timeouts = [];\n\nraf.setTimeout = (handler, ms) => {\n  let time = raf.now() + ms;\n\n  let cancel = () => {\n    let i = timeouts.findIndex(t => t.cancel == cancel);\n    if (~i) timeouts.splice(i, 1);\n    pendingCount -= ~i ? 1 : 0;\n  };\n\n  let timeout = {\n    time,\n    handler,\n    cancel\n  };\n  timeouts.splice(findTimeout(time), 0, timeout);\n  pendingCount += 1;\n  start();\n  return timeout;\n};\n\nlet findTimeout = time => ~(~timeouts.findIndex(t => t.time > time) || ~timeouts.length);\n\nraf.cancel = fn => {\n  onStartQueue.delete(fn);\n  onFrameQueue.delete(fn);\n  onFinishQueue.delete(fn);\n  updateQueue.delete(fn);\n  writeQueue.delete(fn);\n};\n\nraf.sync = fn => {\n  sync = true;\n  raf.batchedUpdates(fn);\n  sync = false;\n};\n\nraf.throttle = fn => {\n  let lastArgs;\n\n  function queuedFn() {\n    try {\n      fn(...lastArgs);\n    } finally {\n      lastArgs = null;\n    }\n  }\n\n  function throttled(...args) {\n    lastArgs = args;\n    raf.onStart(queuedFn);\n  }\n\n  throttled.handler = fn;\n\n  throttled.cancel = () => {\n    onStartQueue.delete(queuedFn);\n    lastArgs = null;\n  };\n\n  return throttled;\n};\n\nlet nativeRaf = typeof window != 'undefined' ? window.requestAnimationFrame : () => {};\n\nraf.use = impl => nativeRaf = impl;\n\nraf.now = typeof performance != 'undefined' ? () => performance.now() : Date.now;\n\nraf.batchedUpdates = fn => fn();\n\nraf.catch = console.error;\nraf.frameLoop = 'always';\n\nraf.advance = () => {\n  if (raf.frameLoop !== 'demand') {\n    console.warn('Cannot call the manual advancement of rafz whilst frameLoop is not set as demand');\n  } else {\n    update();\n  }\n};\n\nlet ts = -1;\nlet pendingCount = 0;\nlet sync = false;\n\nfunction schedule(fn, queue) {\n  if (sync) {\n    queue.delete(fn);\n    fn(0);\n  } else {\n    queue.add(fn);\n    start();\n  }\n}\n\nfunction start() {\n  if (ts < 0) {\n    ts = 0;\n\n    if (raf.frameLoop !== 'demand') {\n      nativeRaf(loop);\n    }\n  }\n}\n\nfunction stop() {\n  ts = -1;\n}\n\nfunction loop() {\n  if (~ts) {\n    nativeRaf(loop);\n    raf.batchedUpdates(update);\n  }\n}\n\nfunction update() {\n  let prevTs = ts;\n  ts = raf.now();\n  let count = findTimeout(ts);\n\n  if (count) {\n    eachSafely(timeouts.splice(0, count), t => t.handler());\n    pendingCount -= count;\n  }\n\n  if (!pendingCount) {\n    stop();\n    return;\n  }\n\n  onStartQueue.flush();\n  updateQueue.flush(prevTs ? Math.min(64, ts - prevTs) : 16.667);\n  onFrameQueue.flush();\n  writeQueue.flush();\n  onFinishQueue.flush();\n}\n\nfunction makeQueue() {\n  let next = new Set();\n  let current = next;\n  return {\n    add(fn) {\n      pendingCount += current == next && !next.has(fn) ? 1 : 0;\n      next.add(fn);\n    },\n\n    delete(fn) {\n      pendingCount -= current == next && next.has(fn) ? 1 : 0;\n      return next.delete(fn);\n    },\n\n    flush(arg) {\n      if (current.size) {\n        next = new Set();\n        pendingCount -= current.size;\n        eachSafely(current, fn => fn(arg) && next.add(fn));\n        pendingCount += next.size;\n        current = next;\n      }\n    }\n\n  };\n}\n\nfunction eachSafely(values, each) {\n  values.forEach(value => {\n    try {\n      each(value);\n    } catch (e) {\n      raf.catch(e);\n    }\n  });\n}\n\nconst __raf = {\n  count() {\n    return pendingCount;\n  },\n\n  isRunning() {\n    return ts >= 0;\n  },\n\n  clear() {\n    ts = -1;\n    timeouts = [];\n    onStartQueue = makeQueue();\n    updateQueue = makeQueue();\n    onFrameQueue = makeQueue();\n    writeQueue = makeQueue();\n    onFinishQueue = makeQueue();\n    pendingCount = 0;\n  }\n\n};\n\nexport { __raf, raf };\n","import { raf } from '@react-spring/rafz';\nexport { raf } from '@react-spring/rafz';\nimport { useEffect, useLayoutEffect, useRef, useState } from 'react';\n\nfunction noop() {}\nconst defineHidden = (obj, key, value) => Object.defineProperty(obj, key, {\n  value,\n  writable: true,\n  configurable: true\n});\nconst is = {\n  arr: Array.isArray,\n  obj: a => !!a && a.constructor.name === 'Object',\n  fun: a => typeof a === 'function',\n  str: a => typeof a === 'string',\n  num: a => typeof a === 'number',\n  und: a => a === undefined\n};\nfunction isEqual(a, b) {\n  if (is.arr(a)) {\n    if (!is.arr(b) || a.length !== b.length) return false;\n\n    for (let i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n\n    return true;\n  }\n\n  return a === b;\n}\nconst each = (obj, fn) => obj.forEach(fn);\nfunction eachProp(obj, fn, ctx) {\n  if (is.arr(obj)) {\n    for (let i = 0; i < obj.length; i++) {\n      fn.call(ctx, obj[i], `${i}`);\n    }\n\n    return;\n  }\n\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      fn.call(ctx, obj[key], key);\n    }\n  }\n}\nconst toArray = a => is.und(a) ? [] : is.arr(a) ? a : [a];\nfunction flush(queue, iterator) {\n  if (queue.size) {\n    const items = Array.from(queue);\n    queue.clear();\n    each(items, iterator);\n  }\n}\nconst flushCalls = (queue, ...args) => flush(queue, fn => fn(...args));\nconst isSSR = () => typeof window === 'undefined' || !window.navigator || /ServerSideRendering|^Deno\\//.test(window.navigator.userAgent);\n\nlet createStringInterpolator$1;\nlet to;\nlet colors$1 = null;\nlet skipAnimation = false;\nlet willAdvance = noop;\nconst assign = globals => {\n  if (globals.to) to = globals.to;\n  if (globals.now) raf.now = globals.now;\n  if (globals.colors !== undefined) colors$1 = globals.colors;\n  if (globals.skipAnimation != null) skipAnimation = globals.skipAnimation;\n  if (globals.createStringInterpolator) createStringInterpolator$1 = globals.createStringInterpolator;\n  if (globals.requestAnimationFrame) raf.use(globals.requestAnimationFrame);\n  if (globals.batchedUpdates) raf.batchedUpdates = globals.batchedUpdates;\n  if (globals.willAdvance) willAdvance = globals.willAdvance;\n  if (globals.frameLoop) raf.frameLoop = globals.frameLoop;\n};\n\nvar globals = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  get createStringInterpolator () { return createStringInterpolator$1; },\n  get to () { return to; },\n  get colors () { return colors$1; },\n  get skipAnimation () { return skipAnimation; },\n  get willAdvance () { return willAdvance; },\n  assign: assign\n});\n\nconst startQueue = new Set();\nlet currentFrame = [];\nlet prevFrame = [];\nlet priority = 0;\nconst frameLoop = {\n  get idle() {\n    return !startQueue.size && !currentFrame.length;\n  },\n\n  start(animation) {\n    if (priority > animation.priority) {\n      startQueue.add(animation);\n      raf.onStart(flushStartQueue);\n    } else {\n      startSafely(animation);\n      raf(advance);\n    }\n  },\n\n  advance,\n\n  sort(animation) {\n    if (priority) {\n      raf.onFrame(() => frameLoop.sort(animation));\n    } else {\n      const prevIndex = currentFrame.indexOf(animation);\n\n      if (~prevIndex) {\n        currentFrame.splice(prevIndex, 1);\n        startUnsafely(animation);\n      }\n    }\n  },\n\n  clear() {\n    currentFrame = [];\n    startQueue.clear();\n  }\n\n};\n\nfunction flushStartQueue() {\n  startQueue.forEach(startSafely);\n  startQueue.clear();\n  raf(advance);\n}\n\nfunction startSafely(animation) {\n  if (!currentFrame.includes(animation)) startUnsafely(animation);\n}\n\nfunction startUnsafely(animation) {\n  currentFrame.splice(findIndex(currentFrame, other => other.priority > animation.priority), 0, animation);\n}\n\nfunction advance(dt) {\n  const nextFrame = prevFrame;\n\n  for (let i = 0; i < currentFrame.length; i++) {\n    const animation = currentFrame[i];\n    priority = animation.priority;\n\n    if (!animation.idle) {\n      willAdvance(animation);\n      animation.advance(dt);\n\n      if (!animation.idle) {\n        nextFrame.push(animation);\n      }\n    }\n  }\n\n  priority = 0;\n  prevFrame = currentFrame;\n  prevFrame.length = 0;\n  currentFrame = nextFrame;\n  return currentFrame.length > 0;\n}\n\nfunction findIndex(arr, test) {\n  const index = arr.findIndex(test);\n  return index < 0 ? arr.length : index;\n}\n\nconst colors = {\n  transparent: 0x00000000,\n  aliceblue: 0xf0f8ffff,\n  antiquewhite: 0xfaebd7ff,\n  aqua: 0x00ffffff,\n  aquamarine: 0x7fffd4ff,\n  azure: 0xf0ffffff,\n  beige: 0xf5f5dcff,\n  bisque: 0xffe4c4ff,\n  black: 0x000000ff,\n  blanchedalmond: 0xffebcdff,\n  blue: 0x0000ffff,\n  blueviolet: 0x8a2be2ff,\n  brown: 0xa52a2aff,\n  burlywood: 0xdeb887ff,\n  burntsienna: 0xea7e5dff,\n  cadetblue: 0x5f9ea0ff,\n  chartreuse: 0x7fff00ff,\n  chocolate: 0xd2691eff,\n  coral: 0xff7f50ff,\n  cornflowerblue: 0x6495edff,\n  cornsilk: 0xfff8dcff,\n  crimson: 0xdc143cff,\n  cyan: 0x00ffffff,\n  darkblue: 0x00008bff,\n  darkcyan: 0x008b8bff,\n  darkgoldenrod: 0xb8860bff,\n  darkgray: 0xa9a9a9ff,\n  darkgreen: 0x006400ff,\n  darkgrey: 0xa9a9a9ff,\n  darkkhaki: 0xbdb76bff,\n  darkmagenta: 0x8b008bff,\n  darkolivegreen: 0x556b2fff,\n  darkorange: 0xff8c00ff,\n  darkorchid: 0x9932ccff,\n  darkred: 0x8b0000ff,\n  darksalmon: 0xe9967aff,\n  darkseagreen: 0x8fbc8fff,\n  darkslateblue: 0x483d8bff,\n  darkslategray: 0x2f4f4fff,\n  darkslategrey: 0x2f4f4fff,\n  darkturquoise: 0x00ced1ff,\n  darkviolet: 0x9400d3ff,\n  deeppink: 0xff1493ff,\n  deepskyblue: 0x00bfffff,\n  dimgray: 0x696969ff,\n  dimgrey: 0x696969ff,\n  dodgerblue: 0x1e90ffff,\n  firebrick: 0xb22222ff,\n  floralwhite: 0xfffaf0ff,\n  forestgreen: 0x228b22ff,\n  fuchsia: 0xff00ffff,\n  gainsboro: 0xdcdcdcff,\n  ghostwhite: 0xf8f8ffff,\n  gold: 0xffd700ff,\n  goldenrod: 0xdaa520ff,\n  gray: 0x808080ff,\n  green: 0x008000ff,\n  greenyellow: 0xadff2fff,\n  grey: 0x808080ff,\n  honeydew: 0xf0fff0ff,\n  hotpink: 0xff69b4ff,\n  indianred: 0xcd5c5cff,\n  indigo: 0x4b0082ff,\n  ivory: 0xfffff0ff,\n  khaki: 0xf0e68cff,\n  lavender: 0xe6e6faff,\n  lavenderblush: 0xfff0f5ff,\n  lawngreen: 0x7cfc00ff,\n  lemonchiffon: 0xfffacdff,\n  lightblue: 0xadd8e6ff,\n  lightcoral: 0xf08080ff,\n  lightcyan: 0xe0ffffff,\n  lightgoldenrodyellow: 0xfafad2ff,\n  lightgray: 0xd3d3d3ff,\n  lightgreen: 0x90ee90ff,\n  lightgrey: 0xd3d3d3ff,\n  lightpink: 0xffb6c1ff,\n  lightsalmon: 0xffa07aff,\n  lightseagreen: 0x20b2aaff,\n  lightskyblue: 0x87cefaff,\n  lightslategray: 0x778899ff,\n  lightslategrey: 0x778899ff,\n  lightsteelblue: 0xb0c4deff,\n  lightyellow: 0xffffe0ff,\n  lime: 0x00ff00ff,\n  limegreen: 0x32cd32ff,\n  linen: 0xfaf0e6ff,\n  magenta: 0xff00ffff,\n  maroon: 0x800000ff,\n  mediumaquamarine: 0x66cdaaff,\n  mediumblue: 0x0000cdff,\n  mediumorchid: 0xba55d3ff,\n  mediumpurple: 0x9370dbff,\n  mediumseagreen: 0x3cb371ff,\n  mediumslateblue: 0x7b68eeff,\n  mediumspringgreen: 0x00fa9aff,\n  mediumturquoise: 0x48d1ccff,\n  mediumvioletred: 0xc71585ff,\n  midnightblue: 0x191970ff,\n  mintcream: 0xf5fffaff,\n  mistyrose: 0xffe4e1ff,\n  moccasin: 0xffe4b5ff,\n  navajowhite: 0xffdeadff,\n  navy: 0x000080ff,\n  oldlace: 0xfdf5e6ff,\n  olive: 0x808000ff,\n  olivedrab: 0x6b8e23ff,\n  orange: 0xffa500ff,\n  orangered: 0xff4500ff,\n  orchid: 0xda70d6ff,\n  palegoldenrod: 0xeee8aaff,\n  palegreen: 0x98fb98ff,\n  paleturquoise: 0xafeeeeff,\n  palevioletred: 0xdb7093ff,\n  papayawhip: 0xffefd5ff,\n  peachpuff: 0xffdab9ff,\n  peru: 0xcd853fff,\n  pink: 0xffc0cbff,\n  plum: 0xdda0ddff,\n  powderblue: 0xb0e0e6ff,\n  purple: 0x800080ff,\n  rebeccapurple: 0x663399ff,\n  red: 0xff0000ff,\n  rosybrown: 0xbc8f8fff,\n  royalblue: 0x4169e1ff,\n  saddlebrown: 0x8b4513ff,\n  salmon: 0xfa8072ff,\n  sandybrown: 0xf4a460ff,\n  seagreen: 0x2e8b57ff,\n  seashell: 0xfff5eeff,\n  sienna: 0xa0522dff,\n  silver: 0xc0c0c0ff,\n  skyblue: 0x87ceebff,\n  slateblue: 0x6a5acdff,\n  slategray: 0x708090ff,\n  slategrey: 0x708090ff,\n  snow: 0xfffafaff,\n  springgreen: 0x00ff7fff,\n  steelblue: 0x4682b4ff,\n  tan: 0xd2b48cff,\n  teal: 0x008080ff,\n  thistle: 0xd8bfd8ff,\n  tomato: 0xff6347ff,\n  turquoise: 0x40e0d0ff,\n  violet: 0xee82eeff,\n  wheat: 0xf5deb3ff,\n  white: 0xffffffff,\n  whitesmoke: 0xf5f5f5ff,\n  yellow: 0xffff00ff,\n  yellowgreen: 0x9acd32ff\n};\n\nconst NUMBER = '[-+]?\\\\d*\\\\.?\\\\d+';\nconst PERCENTAGE = NUMBER + '%';\n\nfunction call(...parts) {\n  return '\\\\(\\\\s*(' + parts.join(')\\\\s*,\\\\s*(') + ')\\\\s*\\\\)';\n}\n\nconst rgb = new RegExp('rgb' + call(NUMBER, NUMBER, NUMBER));\nconst rgba = new RegExp('rgba' + call(NUMBER, NUMBER, NUMBER, NUMBER));\nconst hsl = new RegExp('hsl' + call(NUMBER, PERCENTAGE, PERCENTAGE));\nconst hsla = new RegExp('hsla' + call(NUMBER, PERCENTAGE, PERCENTAGE, NUMBER));\nconst hex3 = /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;\nconst hex4 = /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;\nconst hex6 = /^#([0-9a-fA-F]{6})$/;\nconst hex8 = /^#([0-9a-fA-F]{8})$/;\n\nfunction normalizeColor(color) {\n  let match;\n\n  if (typeof color === 'number') {\n    return color >>> 0 === color && color >= 0 && color <= 0xffffffff ? color : null;\n  }\n\n  if (match = hex6.exec(color)) return parseInt(match[1] + 'ff', 16) >>> 0;\n\n  if (colors$1 && colors$1[color] !== undefined) {\n    return colors$1[color];\n  }\n\n  if (match = rgb.exec(color)) {\n    return (parse255(match[1]) << 24 | parse255(match[2]) << 16 | parse255(match[3]) << 8 | 0x000000ff) >>> 0;\n  }\n\n  if (match = rgba.exec(color)) {\n    return (parse255(match[1]) << 24 | parse255(match[2]) << 16 | parse255(match[3]) << 8 | parse1(match[4])) >>> 0;\n  }\n\n  if (match = hex3.exec(color)) {\n    return parseInt(match[1] + match[1] + match[2] + match[2] + match[3] + match[3] + 'ff', 16) >>> 0;\n  }\n\n  if (match = hex8.exec(color)) return parseInt(match[1], 16) >>> 0;\n\n  if (match = hex4.exec(color)) {\n    return parseInt(match[1] + match[1] + match[2] + match[2] + match[3] + match[3] + match[4] + match[4], 16) >>> 0;\n  }\n\n  if (match = hsl.exec(color)) {\n    return (hslToRgb(parse360(match[1]), parsePercentage(match[2]), parsePercentage(match[3])) | 0x000000ff) >>> 0;\n  }\n\n  if (match = hsla.exec(color)) {\n    return (hslToRgb(parse360(match[1]), parsePercentage(match[2]), parsePercentage(match[3])) | parse1(match[4])) >>> 0;\n  }\n\n  return null;\n}\n\nfunction hue2rgb(p, q, t) {\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  if (t < 1 / 6) return p + (q - p) * 6 * t;\n  if (t < 1 / 2) return q;\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n  return p;\n}\n\nfunction hslToRgb(h, s, l) {\n  const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n  const p = 2 * l - q;\n  const r = hue2rgb(p, q, h + 1 / 3);\n  const g = hue2rgb(p, q, h);\n  const b = hue2rgb(p, q, h - 1 / 3);\n  return Math.round(r * 255) << 24 | Math.round(g * 255) << 16 | Math.round(b * 255) << 8;\n}\n\nfunction parse255(str) {\n  const int = parseInt(str, 10);\n  if (int < 0) return 0;\n  if (int > 255) return 255;\n  return int;\n}\n\nfunction parse360(str) {\n  const int = parseFloat(str);\n  return (int % 360 + 360) % 360 / 360;\n}\n\nfunction parse1(str) {\n  const num = parseFloat(str);\n  if (num < 0) return 0;\n  if (num > 1) return 255;\n  return Math.round(num * 255);\n}\n\nfunction parsePercentage(str) {\n  const int = parseFloat(str);\n  if (int < 0) return 0;\n  if (int > 100) return 1;\n  return int / 100;\n}\n\nfunction colorToRgba(input) {\n  let int32Color = normalizeColor(input);\n  if (int32Color === null) return input;\n  int32Color = int32Color || 0;\n  let r = (int32Color & 0xff000000) >>> 24;\n  let g = (int32Color & 0x00ff0000) >>> 16;\n  let b = (int32Color & 0x0000ff00) >>> 8;\n  let a = (int32Color & 0x000000ff) / 255;\n  return `rgba(${r}, ${g}, ${b}, ${a})`;\n}\n\nconst createInterpolator = (range, output, extrapolate) => {\n  if (is.fun(range)) {\n    return range;\n  }\n\n  if (is.arr(range)) {\n    return createInterpolator({\n      range,\n      output: output,\n      extrapolate\n    });\n  }\n\n  if (is.str(range.output[0])) {\n    return createStringInterpolator$1(range);\n  }\n\n  const config = range;\n  const outputRange = config.output;\n  const inputRange = config.range || [0, 1];\n  const extrapolateLeft = config.extrapolateLeft || config.extrapolate || 'extend';\n  const extrapolateRight = config.extrapolateRight || config.extrapolate || 'extend';\n\n  const easing = config.easing || (t => t);\n\n  return input => {\n    const range = findRange(input, inputRange);\n    return interpolate(input, inputRange[range], inputRange[range + 1], outputRange[range], outputRange[range + 1], easing, extrapolateLeft, extrapolateRight, config.map);\n  };\n};\n\nfunction interpolate(input, inputMin, inputMax, outputMin, outputMax, easing, extrapolateLeft, extrapolateRight, map) {\n  let result = map ? map(input) : input;\n\n  if (result < inputMin) {\n    if (extrapolateLeft === 'identity') return result;else if (extrapolateLeft === 'clamp') result = inputMin;\n  }\n\n  if (result > inputMax) {\n    if (extrapolateRight === 'identity') return result;else if (extrapolateRight === 'clamp') result = inputMax;\n  }\n\n  if (outputMin === outputMax) return outputMin;\n  if (inputMin === inputMax) return input <= inputMin ? outputMin : outputMax;\n  if (inputMin === -Infinity) result = -result;else if (inputMax === Infinity) result = result - inputMin;else result = (result - inputMin) / (inputMax - inputMin);\n  result = easing(result);\n  if (outputMin === -Infinity) result = -result;else if (outputMax === Infinity) result = result + outputMin;else result = result * (outputMax - outputMin) + outputMin;\n  return result;\n}\n\nfunction findRange(input, inputRange) {\n  for (var i = 1; i < inputRange.length - 1; ++i) if (inputRange[i] >= input) break;\n\n  return i - 1;\n}\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nconst $get = Symbol.for('FluidValue.get');\nconst $observers = Symbol.for('FluidValue.observers');\n\nconst hasFluidValue = arg => Boolean(arg && arg[$get]);\n\nconst getFluidValue = arg => arg && arg[$get] ? arg[$get]() : arg;\n\nconst getFluidObservers = target => target[$observers] || null;\n\nfunction callFluidObserver(observer, event) {\n  if (observer.eventObserved) {\n    observer.eventObserved(event);\n  } else {\n    observer(event);\n  }\n}\n\nfunction callFluidObservers(target, event) {\n  let observers = target[$observers];\n\n  if (observers) {\n    observers.forEach(observer => {\n      callFluidObserver(observer, event);\n    });\n  }\n}\n\nclass FluidValue {\n  constructor(get) {\n    this[$get] = void 0;\n    this[$observers] = void 0;\n\n    if (!get && !(get = this.get)) {\n      throw Error('Unknown getter');\n    }\n\n    setFluidGetter(this, get);\n  }\n\n}\n\nconst setFluidGetter = (target, get) => setHidden(target, $get, get);\n\nfunction addFluidObserver(target, observer) {\n  if (target[$get]) {\n    let observers = target[$observers];\n\n    if (!observers) {\n      setHidden(target, $observers, observers = new Set());\n    }\n\n    if (!observers.has(observer)) {\n      observers.add(observer);\n\n      if (target.observerAdded) {\n        target.observerAdded(observers.size, observer);\n      }\n    }\n  }\n\n  return observer;\n}\n\nfunction removeFluidObserver(target, observer) {\n  let observers = target[$observers];\n\n  if (observers && observers.has(observer)) {\n    const count = observers.size - 1;\n\n    if (count) {\n      observers.delete(observer);\n    } else {\n      target[$observers] = null;\n    }\n\n    if (target.observerRemoved) {\n      target.observerRemoved(count, observer);\n    }\n  }\n}\n\nconst setHidden = (target, key, value) => Object.defineProperty(target, key, {\n  value,\n  writable: true,\n  configurable: true\n});\n\nconst numberRegex = /[+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nconst colorRegex = /(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))/gi;\nconst unitRegex = new RegExp(`(${numberRegex.source})(%|[a-z]+)`, 'i');\nconst rgbaRegex = /rgba\\(([0-9\\.-]+), ([0-9\\.-]+), ([0-9\\.-]+), ([0-9\\.-]+)\\)/gi;\nconst cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\n\nconst variableToRgba = input => {\n  const [token, fallback] = parseCSSVariable(input);\n\n  if (!token || isSSR()) {\n    return input;\n  }\n\n  const value = window.getComputedStyle(document.documentElement).getPropertyValue(token);\n\n  if (value) {\n    return value.trim();\n  } else if (fallback && fallback.startsWith('--')) {\n    const _value = window.getComputedStyle(document.documentElement).getPropertyValue(fallback);\n\n    if (_value) {\n      return _value;\n    } else {\n      return input;\n    }\n  } else if (fallback && cssVariableRegex.test(fallback)) {\n    return variableToRgba(fallback);\n  } else if (fallback) {\n    return fallback;\n  }\n\n  return input;\n};\n\nconst parseCSSVariable = current => {\n  const match = cssVariableRegex.exec(current);\n  if (!match) return [,];\n  const [, token, fallback] = match;\n  return [token, fallback];\n};\n\nlet namedColorRegex;\n\nconst rgbaRound = (_, p1, p2, p3, p4) => `rgba(${Math.round(p1)}, ${Math.round(p2)}, ${Math.round(p3)}, ${p4})`;\n\nconst createStringInterpolator = config => {\n  if (!namedColorRegex) namedColorRegex = colors$1 ? new RegExp(`(${Object.keys(colors$1).join('|')})(?!\\\\w)`, 'g') : /^\\b$/;\n  const output = config.output.map(value => {\n    return getFluidValue(value).replace(cssVariableRegex, variableToRgba).replace(colorRegex, colorToRgba).replace(namedColorRegex, colorToRgba);\n  });\n  const keyframes = output.map(value => value.match(numberRegex).map(Number));\n  const outputRanges = keyframes[0].map((_, i) => keyframes.map(values => {\n    if (!(i in values)) {\n      throw Error('The arity of each \"output\" value must be equal');\n    }\n\n    return values[i];\n  }));\n  const interpolators = outputRanges.map(output => createInterpolator(_extends({}, config, {\n    output\n  })));\n  return input => {\n    var _output$find;\n\n    const missingUnit = !unitRegex.test(output[0]) && ((_output$find = output.find(value => unitRegex.test(value))) == null ? void 0 : _output$find.replace(numberRegex, ''));\n    let i = 0;\n    return output[0].replace(numberRegex, () => `${interpolators[i++](input)}${missingUnit || ''}`).replace(rgbaRegex, rgbaRound);\n  };\n};\n\nconst prefix = 'react-spring: ';\n\nconst once = fn => {\n  const func = fn;\n  let called = false;\n\n  if (typeof func != 'function') {\n    throw new TypeError(`${prefix}once requires a function parameter`);\n  }\n\n  return (...args) => {\n    if (!called) {\n      func(...args);\n      called = true;\n    }\n  };\n};\n\nconst warnInterpolate = once(console.warn);\nfunction deprecateInterpolate() {\n  warnInterpolate(`${prefix}The \"interpolate\" function is deprecated in v9 (use \"to\" instead)`);\n}\nconst warnDirectCall = once(console.warn);\nfunction deprecateDirectCall() {\n  warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use \".start\" instead), this will be removed in later 0.X.0 versions`);\n}\n\nfunction isAnimatedString(value) {\n  return is.str(value) && (value[0] == '#' || /\\d/.test(value) || !isSSR() && cssVariableRegex.test(value) || value in (colors$1 || {}));\n}\n\nconst useIsomorphicLayoutEffect = isSSR() ? useEffect : useLayoutEffect;\n\nconst useIsMounted = () => {\n  const isMounted = useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted;\n};\n\nfunction useForceUpdate() {\n  const update = useState()[1];\n  const isMounted = useIsMounted();\n  return () => {\n    if (isMounted.current) {\n      update(Math.random());\n    }\n  };\n}\n\nfunction useMemoOne(getResult, inputs) {\n  const [initial] = useState(() => ({\n    inputs,\n    result: getResult()\n  }));\n  const committed = useRef();\n  const prevCache = committed.current;\n  let cache = prevCache;\n\n  if (cache) {\n    const useCache = Boolean(inputs && cache.inputs && areInputsEqual(inputs, cache.inputs));\n\n    if (!useCache) {\n      cache = {\n        inputs,\n        result: getResult()\n      };\n    }\n  } else {\n    cache = initial;\n  }\n\n  useEffect(() => {\n    committed.current = cache;\n\n    if (prevCache == initial) {\n      initial.inputs = initial.result = undefined;\n    }\n  }, [cache]);\n  return cache.result;\n}\n\nfunction areInputsEqual(next, prev) {\n  if (next.length !== prev.length) {\n    return false;\n  }\n\n  for (let i = 0; i < next.length; i++) {\n    if (next[i] !== prev[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nconst useOnce = effect => useEffect(effect, emptyDeps);\nconst emptyDeps = [];\n\nfunction usePrev(value) {\n  const prevRef = useRef();\n  useEffect(() => {\n    prevRef.current = value;\n  });\n  return prevRef.current;\n}\n\nconst useReducedMotion = () => {\n  const [reducedMotion, setReducedMotion] = useState(null);\n  useIsomorphicLayoutEffect(() => {\n    const mql = window.matchMedia('(prefers-reduced-motion)');\n\n    const handleMediaChange = e => {\n      setReducedMotion(e.matches);\n      assign({\n        skipAnimation: e.matches\n      });\n    };\n\n    handleMediaChange(mql);\n    mql.addEventListener('change', handleMediaChange);\n    return () => {\n      mql.removeEventListener('change', handleMediaChange);\n    };\n  }, []);\n  return reducedMotion;\n};\n\nexport { FluidValue, globals as Globals, addFluidObserver, callFluidObserver, callFluidObservers, colorToRgba, colors, createInterpolator, createStringInterpolator, defineHidden, deprecateDirectCall, deprecateInterpolate, each, eachProp, flush, flushCalls, frameLoop, getFluidObservers, getFluidValue, hasFluidValue, hex3, hex4, hex6, hex8, hsl, hsla, is, isAnimatedString, isEqual, isSSR, noop, removeFluidObserver, rgb, rgba, setFluidGetter, toArray, useForceUpdate, useIsomorphicLayoutEffect, useMemoOne, useOnce, usePrev, useReducedMotion };\n","import { defineHidden, is, createInterpolator, eachProp, hasFluidValue, getFluidValue, each, isAnimatedString, useForceUpdate, useIsomorphicLayoutEffect, addFluidObserver, removeFluidObserver, raf, useOnce } from '@react-spring/shared';\nimport * as React from 'react';\nimport { forwardRef, useRef, useCallback, useEffect } from 'react';\n\nconst $node = Symbol.for('Animated:node');\nconst isAnimated = value => !!value && value[$node] === value;\nconst getAnimated = owner => owner && owner[$node];\nconst setAnimated = (owner, node) => defineHidden(owner, $node, node);\nconst getPayload = owner => owner && owner[$node] && owner[$node].getPayload();\nclass Animated {\n  constructor() {\n    this.payload = void 0;\n    setAnimated(this, this);\n  }\n\n  getPayload() {\n    return this.payload || [];\n  }\n\n}\n\nclass AnimatedValue extends Animated {\n  constructor(_value) {\n    super();\n    this.done = true;\n    this.elapsedTime = void 0;\n    this.lastPosition = void 0;\n    this.lastVelocity = void 0;\n    this.v0 = void 0;\n    this.durationProgress = 0;\n    this._value = _value;\n\n    if (is.num(this._value)) {\n      this.lastPosition = this._value;\n    }\n  }\n\n  static create(value) {\n    return new AnimatedValue(value);\n  }\n\n  getPayload() {\n    return [this];\n  }\n\n  getValue() {\n    return this._value;\n  }\n\n  setValue(value, step) {\n    if (is.num(value)) {\n      this.lastPosition = value;\n\n      if (step) {\n        value = Math.round(value / step) * step;\n\n        if (this.done) {\n          this.lastPosition = value;\n        }\n      }\n    }\n\n    if (this._value === value) {\n      return false;\n    }\n\n    this._value = value;\n    return true;\n  }\n\n  reset() {\n    const {\n      done\n    } = this;\n    this.done = false;\n\n    if (is.num(this._value)) {\n      this.elapsedTime = 0;\n      this.durationProgress = 0;\n      this.lastPosition = this._value;\n      if (done) this.lastVelocity = null;\n      this.v0 = null;\n    }\n  }\n\n}\n\nclass AnimatedString extends AnimatedValue {\n  constructor(value) {\n    super(0);\n    this._string = null;\n    this._toString = void 0;\n    this._toString = createInterpolator({\n      output: [value, value]\n    });\n  }\n\n  static create(value) {\n    return new AnimatedString(value);\n  }\n\n  getValue() {\n    let value = this._string;\n    return value == null ? this._string = this._toString(this._value) : value;\n  }\n\n  setValue(value) {\n    if (is.str(value)) {\n      if (value == this._string) {\n        return false;\n      }\n\n      this._string = value;\n      this._value = 1;\n    } else if (super.setValue(value)) {\n      this._string = null;\n    } else {\n      return false;\n    }\n\n    return true;\n  }\n\n  reset(goal) {\n    if (goal) {\n      this._toString = createInterpolator({\n        output: [this.getValue(), goal]\n      });\n    }\n\n    this._value = 0;\n    super.reset();\n  }\n\n}\n\nconst TreeContext = {\n  dependencies: null\n};\n\nclass AnimatedObject extends Animated {\n  constructor(source) {\n    super();\n    this.source = source;\n    this.setValue(source);\n  }\n\n  getValue(animated) {\n    const values = {};\n    eachProp(this.source, (source, key) => {\n      if (isAnimated(source)) {\n        values[key] = source.getValue(animated);\n      } else if (hasFluidValue(source)) {\n        values[key] = getFluidValue(source);\n      } else if (!animated) {\n        values[key] = source;\n      }\n    });\n    return values;\n  }\n\n  setValue(source) {\n    this.source = source;\n    this.payload = this._makePayload(source);\n  }\n\n  reset() {\n    if (this.payload) {\n      each(this.payload, node => node.reset());\n    }\n  }\n\n  _makePayload(source) {\n    if (source) {\n      const payload = new Set();\n      eachProp(source, this._addToPayload, payload);\n      return Array.from(payload);\n    }\n  }\n\n  _addToPayload(source) {\n    if (TreeContext.dependencies && hasFluidValue(source)) {\n      TreeContext.dependencies.add(source);\n    }\n\n    const payload = getPayload(source);\n\n    if (payload) {\n      each(payload, node => this.add(node));\n    }\n  }\n\n}\n\nclass AnimatedArray extends AnimatedObject {\n  constructor(source) {\n    super(source);\n  }\n\n  static create(source) {\n    return new AnimatedArray(source);\n  }\n\n  getValue() {\n    return this.source.map(node => node.getValue());\n  }\n\n  setValue(source) {\n    const payload = this.getPayload();\n\n    if (source.length == payload.length) {\n      return payload.map((node, i) => node.setValue(source[i])).some(Boolean);\n    }\n\n    super.setValue(source.map(makeAnimated));\n    return true;\n  }\n\n}\n\nfunction makeAnimated(value) {\n  const nodeType = isAnimatedString(value) ? AnimatedString : AnimatedValue;\n  return nodeType.create(value);\n}\n\nfunction getAnimatedType(value) {\n  const parentNode = getAnimated(value);\n  return parentNode ? parentNode.constructor : is.arr(value) ? AnimatedArray : isAnimatedString(value) ? AnimatedString : AnimatedValue;\n}\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nconst withAnimated = (Component, host) => {\n  const hasInstance = !is.fun(Component) || Component.prototype && Component.prototype.isReactComponent;\n  return forwardRef((givenProps, givenRef) => {\n    const instanceRef = useRef(null);\n    const ref = hasInstance && useCallback(value => {\n      instanceRef.current = updateRef(givenRef, value);\n    }, [givenRef]);\n    const [props, deps] = getAnimatedState(givenProps, host);\n    const forceUpdate = useForceUpdate();\n\n    const callback = () => {\n      const instance = instanceRef.current;\n\n      if (hasInstance && !instance) {\n        return;\n      }\n\n      const didUpdate = instance ? host.applyAnimatedValues(instance, props.getValue(true)) : false;\n\n      if (didUpdate === false) {\n        forceUpdate();\n      }\n    };\n\n    const observer = new PropsObserver(callback, deps);\n    const observerRef = useRef();\n    useIsomorphicLayoutEffect(() => {\n      observerRef.current = observer;\n      each(deps, dep => addFluidObserver(dep, observer));\n      return () => {\n        if (observerRef.current) {\n          each(observerRef.current.deps, dep => removeFluidObserver(dep, observerRef.current));\n          raf.cancel(observerRef.current.update);\n        }\n      };\n    });\n    useEffect(callback, []);\n    useOnce(() => () => {\n      const observer = observerRef.current;\n      each(observer.deps, dep => removeFluidObserver(dep, observer));\n    });\n    const usedProps = host.getComponentProps(props.getValue());\n    return React.createElement(Component, _extends({}, usedProps, {\n      ref: ref\n    }));\n  });\n};\n\nclass PropsObserver {\n  constructor(update, deps) {\n    this.update = update;\n    this.deps = deps;\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      raf.write(this.update);\n    }\n  }\n\n}\n\nfunction getAnimatedState(props, host) {\n  const dependencies = new Set();\n  TreeContext.dependencies = dependencies;\n  if (props.style) props = _extends({}, props, {\n    style: host.createAnimatedStyle(props.style)\n  });\n  props = new AnimatedObject(props);\n  TreeContext.dependencies = null;\n  return [props, dependencies];\n}\n\nfunction updateRef(ref, value) {\n  if (ref) {\n    if (is.fun(ref)) ref(value);else ref.current = value;\n  }\n\n  return value;\n}\n\nconst cacheKey = Symbol.for('AnimatedComponent');\nconst createHost = (components, {\n  applyAnimatedValues: _applyAnimatedValues = () => false,\n  createAnimatedStyle: _createAnimatedStyle = style => new AnimatedObject(style),\n  getComponentProps: _getComponentProps = props => props\n} = {}) => {\n  const hostConfig = {\n    applyAnimatedValues: _applyAnimatedValues,\n    createAnimatedStyle: _createAnimatedStyle,\n    getComponentProps: _getComponentProps\n  };\n\n  const animated = Component => {\n    const displayName = getDisplayName(Component) || 'Anonymous';\n\n    if (is.str(Component)) {\n      Component = animated[Component] || (animated[Component] = withAnimated(Component, hostConfig));\n    } else {\n      Component = Component[cacheKey] || (Component[cacheKey] = withAnimated(Component, hostConfig));\n    }\n\n    Component.displayName = `Animated(${displayName})`;\n    return Component;\n  };\n\n  eachProp(components, (Component, key) => {\n    if (is.arr(components)) {\n      key = getDisplayName(Component);\n    }\n\n    animated[key] = animated(Component);\n  });\n  return {\n    animated\n  };\n};\n\nconst getDisplayName = arg => is.str(arg) ? arg : arg && is.str(arg.displayName) ? arg.displayName : is.fun(arg) && arg.name || null;\n\nexport { Animated, AnimatedArray, AnimatedObject, AnimatedString, AnimatedValue, createHost, getAnimated, getAnimatedType, getPayload, isAnimated, setAnimated };\n","import { eachProp, is, toArray, getFluidValue, isAnimatedString, Globals, useIsomorphicLayoutEffect, each, raf, flush, FluidValue, deprecateInterpolate, callFluidObservers, frameLoop, hasFluidValue, flushCalls, isEqual, getFluidObservers, addFluidObserver, removeFluidObserver, noop, useMemoOne, deprecateDirectCall, useForceUpdate, usePrev, useOnce, createInterpolator, createStringInterpolator } from '@react-spring/shared';\nexport { Globals, createInterpolator, useIsomorphicLayoutEffect, useReducedMotion } from '@react-spring/shared';\nimport * as React from 'react';\nimport { useContext, useMemo, useRef, useState } from 'react';\nimport { getAnimated, AnimatedValue, getPayload, AnimatedString, getAnimatedType, setAnimated } from '@react-spring/animated';\nexport * from '@react-spring/types/animated';\nexport * from '@react-spring/types/interpolation';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction callProp(value, ...args) {\n  return is.fun(value) ? value(...args) : value;\n}\nconst matchProp = (value, key) => value === true || !!(key && value && (is.fun(value) ? value(key) : toArray(value).includes(key)));\nconst resolveProp = (prop, key) => is.obj(prop) ? key && prop[key] : prop;\nconst getDefaultProp = (props, key) => props.default === true ? props[key] : props.default ? props.default[key] : undefined;\n\nconst noopTransform = value => value;\n\nconst getDefaultProps = (props, transform = noopTransform) => {\n  let keys = DEFAULT_PROPS;\n\n  if (props.default && props.default !== true) {\n    props = props.default;\n    keys = Object.keys(props);\n  }\n\n  const defaults = {};\n\n  for (const key of keys) {\n    const value = transform(props[key], key);\n\n    if (!is.und(value)) {\n      defaults[key] = value;\n    }\n  }\n\n  return defaults;\n};\nconst DEFAULT_PROPS = ['config', 'onProps', 'onStart', 'onChange', 'onPause', 'onResume', 'onRest'];\nconst RESERVED_PROPS = {\n  config: 1,\n  from: 1,\n  to: 1,\n  ref: 1,\n  loop: 1,\n  reset: 1,\n  pause: 1,\n  cancel: 1,\n  reverse: 1,\n  immediate: 1,\n  default: 1,\n  delay: 1,\n  onProps: 1,\n  onStart: 1,\n  onChange: 1,\n  onPause: 1,\n  onResume: 1,\n  onRest: 1,\n  onResolve: 1,\n  items: 1,\n  trail: 1,\n  sort: 1,\n  expires: 1,\n  initial: 1,\n  enter: 1,\n  update: 1,\n  leave: 1,\n  children: 1,\n  onDestroyed: 1,\n  keys: 1,\n  callId: 1,\n  parentId: 1\n};\n\nfunction getForwardProps(props) {\n  const forward = {};\n  let count = 0;\n  eachProp(props, (value, prop) => {\n    if (!RESERVED_PROPS[prop]) {\n      forward[prop] = value;\n      count++;\n    }\n  });\n\n  if (count) {\n    return forward;\n  }\n}\n\nfunction inferTo(props) {\n  const to = getForwardProps(props);\n\n  if (to) {\n    const out = {\n      to\n    };\n    eachProp(props, (val, key) => key in to || (out[key] = val));\n    return out;\n  }\n\n  return _extends({}, props);\n}\nfunction computeGoal(value) {\n  value = getFluidValue(value);\n  return is.arr(value) ? value.map(computeGoal) : isAnimatedString(value) ? Globals.createStringInterpolator({\n    range: [0, 1],\n    output: [value, value]\n  })(1) : value;\n}\nfunction hasProps(props) {\n  for (const _ in props) return true;\n\n  return false;\n}\nfunction isAsyncTo(to) {\n  return is.fun(to) || is.arr(to) && is.obj(to[0]);\n}\nfunction detachRefs(ctrl, ref) {\n  var _ctrl$ref;\n\n  (_ctrl$ref = ctrl.ref) == null ? void 0 : _ctrl$ref.delete(ctrl);\n  ref == null ? void 0 : ref.delete(ctrl);\n}\nfunction replaceRef(ctrl, ref) {\n  if (ref && ctrl.ref !== ref) {\n    var _ctrl$ref2;\n\n    (_ctrl$ref2 = ctrl.ref) == null ? void 0 : _ctrl$ref2.delete(ctrl);\n    ref.add(ctrl);\n    ctrl.ref = ref;\n  }\n}\n\nfunction useChain(refs, timeSteps, timeFrame = 1000) {\n  useIsomorphicLayoutEffect(() => {\n    if (timeSteps) {\n      let prevDelay = 0;\n      each(refs, (ref, i) => {\n        const controllers = ref.current;\n\n        if (controllers.length) {\n          let delay = timeFrame * timeSteps[i];\n          if (isNaN(delay)) delay = prevDelay;else prevDelay = delay;\n          each(controllers, ctrl => {\n            each(ctrl.queue, props => {\n              const memoizedDelayProp = props.delay;\n\n              props.delay = key => delay + callProp(memoizedDelayProp || 0, key);\n            });\n          });\n          ref.start();\n        }\n      });\n    } else {\n      let p = Promise.resolve();\n      each(refs, ref => {\n        const controllers = ref.current;\n\n        if (controllers.length) {\n          const queues = controllers.map(ctrl => {\n            const q = ctrl.queue;\n            ctrl.queue = [];\n            return q;\n          });\n          p = p.then(() => {\n            each(controllers, (ctrl, i) => each(queues[i] || [], update => ctrl.queue.push(update)));\n            return Promise.all(ref.start());\n          });\n        }\n      });\n    }\n  });\n}\n\nconst config = {\n  default: {\n    tension: 170,\n    friction: 26\n  },\n  gentle: {\n    tension: 120,\n    friction: 14\n  },\n  wobbly: {\n    tension: 180,\n    friction: 12\n  },\n  stiff: {\n    tension: 210,\n    friction: 20\n  },\n  slow: {\n    tension: 280,\n    friction: 60\n  },\n  molasses: {\n    tension: 280,\n    friction: 120\n  }\n};\nconst c1 = 1.70158;\nconst c2 = c1 * 1.525;\nconst c3 = c1 + 1;\nconst c4 = 2 * Math.PI / 3;\nconst c5 = 2 * Math.PI / 4.5;\n\nconst bounceOut = x => {\n  const n1 = 7.5625;\n  const d1 = 2.75;\n\n  if (x < 1 / d1) {\n    return n1 * x * x;\n  } else if (x < 2 / d1) {\n    return n1 * (x -= 1.5 / d1) * x + 0.75;\n  } else if (x < 2.5 / d1) {\n    return n1 * (x -= 2.25 / d1) * x + 0.9375;\n  } else {\n    return n1 * (x -= 2.625 / d1) * x + 0.984375;\n  }\n};\n\nconst easings = {\n  linear: x => x,\n  easeInQuad: x => x * x,\n  easeOutQuad: x => 1 - (1 - x) * (1 - x),\n  easeInOutQuad: x => x < 0.5 ? 2 * x * x : 1 - Math.pow(-2 * x + 2, 2) / 2,\n  easeInCubic: x => x * x * x,\n  easeOutCubic: x => 1 - Math.pow(1 - x, 3),\n  easeInOutCubic: x => x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2,\n  easeInQuart: x => x * x * x * x,\n  easeOutQuart: x => 1 - Math.pow(1 - x, 4),\n  easeInOutQuart: x => x < 0.5 ? 8 * x * x * x * x : 1 - Math.pow(-2 * x + 2, 4) / 2,\n  easeInQuint: x => x * x * x * x * x,\n  easeOutQuint: x => 1 - Math.pow(1 - x, 5),\n  easeInOutQuint: x => x < 0.5 ? 16 * x * x * x * x * x : 1 - Math.pow(-2 * x + 2, 5) / 2,\n  easeInSine: x => 1 - Math.cos(x * Math.PI / 2),\n  easeOutSine: x => Math.sin(x * Math.PI / 2),\n  easeInOutSine: x => -(Math.cos(Math.PI * x) - 1) / 2,\n  easeInExpo: x => x === 0 ? 0 : Math.pow(2, 10 * x - 10),\n  easeOutExpo: x => x === 1 ? 1 : 1 - Math.pow(2, -10 * x),\n  easeInOutExpo: x => x === 0 ? 0 : x === 1 ? 1 : x < 0.5 ? Math.pow(2, 20 * x - 10) / 2 : (2 - Math.pow(2, -20 * x + 10)) / 2,\n  easeInCirc: x => 1 - Math.sqrt(1 - Math.pow(x, 2)),\n  easeOutCirc: x => Math.sqrt(1 - Math.pow(x - 1, 2)),\n  easeInOutCirc: x => x < 0.5 ? (1 - Math.sqrt(1 - Math.pow(2 * x, 2))) / 2 : (Math.sqrt(1 - Math.pow(-2 * x + 2, 2)) + 1) / 2,\n  easeInBack: x => c3 * x * x * x - c1 * x * x,\n  easeOutBack: x => 1 + c3 * Math.pow(x - 1, 3) + c1 * Math.pow(x - 1, 2),\n  easeInOutBack: x => x < 0.5 ? Math.pow(2 * x, 2) * ((c2 + 1) * 2 * x - c2) / 2 : (Math.pow(2 * x - 2, 2) * ((c2 + 1) * (x * 2 - 2) + c2) + 2) / 2,\n  easeInElastic: x => x === 0 ? 0 : x === 1 ? 1 : -Math.pow(2, 10 * x - 10) * Math.sin((x * 10 - 10.75) * c4),\n  easeOutElastic: x => x === 0 ? 0 : x === 1 ? 1 : Math.pow(2, -10 * x) * Math.sin((x * 10 - 0.75) * c4) + 1,\n  easeInOutElastic: x => x === 0 ? 0 : x === 1 ? 1 : x < 0.5 ? -(Math.pow(2, 20 * x - 10) * Math.sin((20 * x - 11.125) * c5)) / 2 : Math.pow(2, -20 * x + 10) * Math.sin((20 * x - 11.125) * c5) / 2 + 1,\n  easeInBounce: x => 1 - bounceOut(1 - x),\n  easeOutBounce: bounceOut,\n  easeInOutBounce: x => x < 0.5 ? (1 - bounceOut(1 - 2 * x)) / 2 : (1 + bounceOut(2 * x - 1)) / 2\n};\n\nconst defaults = _extends({}, config.default, {\n  mass: 1,\n  damping: 1,\n  easing: easings.linear,\n  clamp: false\n});\n\nclass AnimationConfig {\n  constructor() {\n    this.tension = void 0;\n    this.friction = void 0;\n    this.frequency = void 0;\n    this.damping = void 0;\n    this.mass = void 0;\n    this.velocity = 0;\n    this.restVelocity = void 0;\n    this.precision = void 0;\n    this.progress = void 0;\n    this.duration = void 0;\n    this.easing = void 0;\n    this.clamp = void 0;\n    this.bounce = void 0;\n    this.decay = void 0;\n    this.round = void 0;\n    Object.assign(this, defaults);\n  }\n\n}\nfunction mergeConfig(config, newConfig, defaultConfig) {\n  if (defaultConfig) {\n    defaultConfig = _extends({}, defaultConfig);\n    sanitizeConfig(defaultConfig, newConfig);\n    newConfig = _extends({}, defaultConfig, newConfig);\n  }\n\n  sanitizeConfig(config, newConfig);\n  Object.assign(config, newConfig);\n\n  for (const key in defaults) {\n    if (config[key] == null) {\n      config[key] = defaults[key];\n    }\n  }\n\n  let {\n    mass,\n    frequency,\n    damping\n  } = config;\n\n  if (!is.und(frequency)) {\n    if (frequency < 0.01) frequency = 0.01;\n    if (damping < 0) damping = 0;\n    config.tension = Math.pow(2 * Math.PI / frequency, 2) * mass;\n    config.friction = 4 * Math.PI * damping * mass / frequency;\n  }\n\n  return config;\n}\n\nfunction sanitizeConfig(config, props) {\n  if (!is.und(props.decay)) {\n    config.duration = undefined;\n  } else {\n    const isTensionConfig = !is.und(props.tension) || !is.und(props.friction);\n\n    if (isTensionConfig || !is.und(props.frequency) || !is.und(props.damping) || !is.und(props.mass)) {\n      config.duration = undefined;\n      config.decay = undefined;\n    }\n\n    if (isTensionConfig) {\n      config.frequency = undefined;\n    }\n  }\n}\n\nconst emptyArray = [];\nclass Animation {\n  constructor() {\n    this.changed = false;\n    this.values = emptyArray;\n    this.toValues = null;\n    this.fromValues = emptyArray;\n    this.to = void 0;\n    this.from = void 0;\n    this.config = new AnimationConfig();\n    this.immediate = false;\n  }\n\n}\n\nfunction scheduleProps(callId, {\n  key,\n  props,\n  defaultProps,\n  state,\n  actions\n}) {\n  return new Promise((resolve, reject) => {\n    var _props$cancel;\n\n    let delay;\n    let timeout;\n    let cancel = matchProp((_props$cancel = props.cancel) != null ? _props$cancel : defaultProps == null ? void 0 : defaultProps.cancel, key);\n\n    if (cancel) {\n      onStart();\n    } else {\n      if (!is.und(props.pause)) {\n        state.paused = matchProp(props.pause, key);\n      }\n\n      let pause = defaultProps == null ? void 0 : defaultProps.pause;\n\n      if (pause !== true) {\n        pause = state.paused || matchProp(pause, key);\n      }\n\n      delay = callProp(props.delay || 0, key);\n\n      if (pause) {\n        state.resumeQueue.add(onResume);\n        actions.pause();\n      } else {\n        actions.resume();\n        onResume();\n      }\n    }\n\n    function onPause() {\n      state.resumeQueue.add(onResume);\n      state.timeouts.delete(timeout);\n      timeout.cancel();\n      delay = timeout.time - raf.now();\n    }\n\n    function onResume() {\n      if (delay > 0 && !Globals.skipAnimation) {\n        state.delayed = true;\n        timeout = raf.setTimeout(onStart, delay);\n        state.pauseQueue.add(onPause);\n        state.timeouts.add(timeout);\n      } else {\n        onStart();\n      }\n    }\n\n    function onStart() {\n      if (state.delayed) {\n        state.delayed = false;\n      }\n\n      state.pauseQueue.delete(onPause);\n      state.timeouts.delete(timeout);\n\n      if (callId <= (state.cancelId || 0)) {\n        cancel = true;\n      }\n\n      try {\n        actions.start(_extends({}, props, {\n          callId,\n          cancel\n        }), resolve);\n      } catch (err) {\n        reject(err);\n      }\n    }\n  });\n}\n\nconst getCombinedResult = (target, results) => results.length == 1 ? results[0] : results.some(result => result.cancelled) ? getCancelledResult(target.get()) : results.every(result => result.noop) ? getNoopResult(target.get()) : getFinishedResult(target.get(), results.every(result => result.finished));\nconst getNoopResult = value => ({\n  value,\n  noop: true,\n  finished: true,\n  cancelled: false\n});\nconst getFinishedResult = (value, finished, cancelled = false) => ({\n  value,\n  finished,\n  cancelled\n});\nconst getCancelledResult = value => ({\n  value,\n  cancelled: true,\n  finished: false\n});\n\nfunction runAsync(to, props, state, target) {\n  const {\n    callId,\n    parentId,\n    onRest\n  } = props;\n  const {\n    asyncTo: prevTo,\n    promise: prevPromise\n  } = state;\n\n  if (!parentId && to === prevTo && !props.reset) {\n    return prevPromise;\n  }\n\n  return state.promise = (async () => {\n    state.asyncId = callId;\n    state.asyncTo = to;\n    const defaultProps = getDefaultProps(props, (value, key) => key === 'onRest' ? undefined : value);\n    let preventBail;\n    let bail;\n    const bailPromise = new Promise((resolve, reject) => (preventBail = resolve, bail = reject));\n\n    const bailIfEnded = bailSignal => {\n      const bailResult = callId <= (state.cancelId || 0) && getCancelledResult(target) || callId !== state.asyncId && getFinishedResult(target, false);\n\n      if (bailResult) {\n        bailSignal.result = bailResult;\n        bail(bailSignal);\n        throw bailSignal;\n      }\n    };\n\n    const animate = (arg1, arg2) => {\n      const bailSignal = new BailSignal();\n      const skipAnimationSignal = new SkipAniamtionSignal();\n      return (async () => {\n        if (Globals.skipAnimation) {\n          stopAsync(state);\n          skipAnimationSignal.result = getFinishedResult(target, false);\n          bail(skipAnimationSignal);\n          throw skipAnimationSignal;\n        }\n\n        bailIfEnded(bailSignal);\n        const props = is.obj(arg1) ? _extends({}, arg1) : _extends({}, arg2, {\n          to: arg1\n        });\n        props.parentId = callId;\n        eachProp(defaultProps, (value, key) => {\n          if (is.und(props[key])) {\n            props[key] = value;\n          }\n        });\n        const result = await target.start(props);\n        bailIfEnded(bailSignal);\n\n        if (state.paused) {\n          await new Promise(resume => {\n            state.resumeQueue.add(resume);\n          });\n        }\n\n        return result;\n      })();\n    };\n\n    let result;\n\n    if (Globals.skipAnimation) {\n      stopAsync(state);\n      return getFinishedResult(target, false);\n    }\n\n    try {\n      let animating;\n\n      if (is.arr(to)) {\n        animating = (async queue => {\n          for (const props of queue) {\n            await animate(props);\n          }\n        })(to);\n      } else {\n        animating = Promise.resolve(to(animate, target.stop.bind(target)));\n      }\n\n      await Promise.all([animating.then(preventBail), bailPromise]);\n      result = getFinishedResult(target.get(), true, false);\n    } catch (err) {\n      if (err instanceof BailSignal) {\n        result = err.result;\n      } else if (err instanceof SkipAniamtionSignal) {\n        result = err.result;\n      } else {\n        throw err;\n      }\n    } finally {\n      if (callId == state.asyncId) {\n        state.asyncId = parentId;\n        state.asyncTo = parentId ? prevTo : undefined;\n        state.promise = parentId ? prevPromise : undefined;\n      }\n    }\n\n    if (is.fun(onRest)) {\n      raf.batchedUpdates(() => {\n        onRest(result, target, target.item);\n      });\n    }\n\n    return result;\n  })();\n}\nfunction stopAsync(state, cancelId) {\n  flush(state.timeouts, t => t.cancel());\n  state.pauseQueue.clear();\n  state.resumeQueue.clear();\n  state.asyncId = state.asyncTo = state.promise = undefined;\n  if (cancelId) state.cancelId = cancelId;\n}\nclass BailSignal extends Error {\n  constructor() {\n    super('An async animation has been interrupted. You see this error because you ' + 'forgot to use `await` or `.catch(...)` on its returned promise.');\n    this.result = void 0;\n  }\n\n}\nclass SkipAniamtionSignal extends Error {\n  constructor() {\n    super('SkipAnimationSignal');\n    this.result = void 0;\n  }\n\n}\n\nconst isFrameValue = value => value instanceof FrameValue;\nlet nextId$1 = 1;\nclass FrameValue extends FluidValue {\n  constructor(...args) {\n    super(...args);\n    this.id = nextId$1++;\n    this.key = void 0;\n    this._priority = 0;\n  }\n\n  get priority() {\n    return this._priority;\n  }\n\n  set priority(priority) {\n    if (this._priority != priority) {\n      this._priority = priority;\n\n      this._onPriorityChange(priority);\n    }\n  }\n\n  get() {\n    const node = getAnimated(this);\n    return node && node.getValue();\n  }\n\n  to(...args) {\n    return Globals.to(this, args);\n  }\n\n  interpolate(...args) {\n    deprecateInterpolate();\n    return Globals.to(this, args);\n  }\n\n  toJSON() {\n    return this.get();\n  }\n\n  observerAdded(count) {\n    if (count == 1) this._attach();\n  }\n\n  observerRemoved(count) {\n    if (count == 0) this._detach();\n  }\n\n  _attach() {}\n\n  _detach() {}\n\n  _onChange(value, idle = false) {\n    callFluidObservers(this, {\n      type: 'change',\n      parent: this,\n      value,\n      idle\n    });\n  }\n\n  _onPriorityChange(priority) {\n    if (!this.idle) {\n      frameLoop.sort(this);\n    }\n\n    callFluidObservers(this, {\n      type: 'priority',\n      parent: this,\n      priority\n    });\n  }\n\n}\n\nconst $P = Symbol.for('SpringPhase');\nconst HAS_ANIMATED = 1;\nconst IS_ANIMATING = 2;\nconst IS_PAUSED = 4;\nconst hasAnimated = target => (target[$P] & HAS_ANIMATED) > 0;\nconst isAnimating = target => (target[$P] & IS_ANIMATING) > 0;\nconst isPaused = target => (target[$P] & IS_PAUSED) > 0;\nconst setActiveBit = (target, active) => active ? target[$P] |= IS_ANIMATING | HAS_ANIMATED : target[$P] &= ~IS_ANIMATING;\nconst setPausedBit = (target, paused) => paused ? target[$P] |= IS_PAUSED : target[$P] &= ~IS_PAUSED;\n\nclass SpringValue extends FrameValue {\n  constructor(arg1, arg2) {\n    super();\n    this.key = void 0;\n    this.animation = new Animation();\n    this.queue = void 0;\n    this.defaultProps = {};\n    this._state = {\n      paused: false,\n      delayed: false,\n      pauseQueue: new Set(),\n      resumeQueue: new Set(),\n      timeouts: new Set()\n    };\n    this._pendingCalls = new Set();\n    this._lastCallId = 0;\n    this._lastToId = 0;\n    this._memoizedDuration = 0;\n\n    if (!is.und(arg1) || !is.und(arg2)) {\n      const props = is.obj(arg1) ? _extends({}, arg1) : _extends({}, arg2, {\n        from: arg1\n      });\n\n      if (is.und(props.default)) {\n        props.default = true;\n      }\n\n      this.start(props);\n    }\n  }\n\n  get idle() {\n    return !(isAnimating(this) || this._state.asyncTo) || isPaused(this);\n  }\n\n  get goal() {\n    return getFluidValue(this.animation.to);\n  }\n\n  get velocity() {\n    const node = getAnimated(this);\n    return node instanceof AnimatedValue ? node.lastVelocity || 0 : node.getPayload().map(node => node.lastVelocity || 0);\n  }\n\n  get hasAnimated() {\n    return hasAnimated(this);\n  }\n\n  get isAnimating() {\n    return isAnimating(this);\n  }\n\n  get isPaused() {\n    return isPaused(this);\n  }\n\n  get isDelayed() {\n    return this._state.delayed;\n  }\n\n  advance(dt) {\n    let idle = true;\n    let changed = false;\n    const anim = this.animation;\n    let {\n      config,\n      toValues\n    } = anim;\n    const payload = getPayload(anim.to);\n\n    if (!payload && hasFluidValue(anim.to)) {\n      toValues = toArray(getFluidValue(anim.to));\n    }\n\n    anim.values.forEach((node, i) => {\n      if (node.done) return;\n      const to = node.constructor == AnimatedString ? 1 : payload ? payload[i].lastPosition : toValues[i];\n      let finished = anim.immediate;\n      let position = to;\n\n      if (!finished) {\n        position = node.lastPosition;\n\n        if (config.tension <= 0) {\n          node.done = true;\n          return;\n        }\n\n        let elapsed = node.elapsedTime += dt;\n        const from = anim.fromValues[i];\n        const v0 = node.v0 != null ? node.v0 : node.v0 = is.arr(config.velocity) ? config.velocity[i] : config.velocity;\n        let velocity;\n        const precision = config.precision || (from == to ? 0.005 : Math.min(1, Math.abs(to - from) * 0.001));\n\n        if (!is.und(config.duration)) {\n          let p = 1;\n\n          if (config.duration > 0) {\n            if (this._memoizedDuration !== config.duration) {\n              this._memoizedDuration = config.duration;\n\n              if (node.durationProgress > 0) {\n                node.elapsedTime = config.duration * node.durationProgress;\n                elapsed = node.elapsedTime += dt;\n              }\n            }\n\n            p = (config.progress || 0) + elapsed / this._memoizedDuration;\n            p = p > 1 ? 1 : p < 0 ? 0 : p;\n            node.durationProgress = p;\n          }\n\n          position = from + config.easing(p) * (to - from);\n          velocity = (position - node.lastPosition) / dt;\n          finished = p == 1;\n        } else if (config.decay) {\n          const decay = config.decay === true ? 0.998 : config.decay;\n          const e = Math.exp(-(1 - decay) * elapsed);\n          position = from + v0 / (1 - decay) * (1 - e);\n          finished = Math.abs(node.lastPosition - position) <= precision;\n          velocity = v0 * e;\n        } else {\n          velocity = node.lastVelocity == null ? v0 : node.lastVelocity;\n          const restVelocity = config.restVelocity || precision / 10;\n          const bounceFactor = config.clamp ? 0 : config.bounce;\n          const canBounce = !is.und(bounceFactor);\n          const isGrowing = from == to ? node.v0 > 0 : from < to;\n          let isMoving;\n          let isBouncing = false;\n          const step = 1;\n          const numSteps = Math.ceil(dt / step);\n\n          for (let n = 0; n < numSteps; ++n) {\n            isMoving = Math.abs(velocity) > restVelocity;\n\n            if (!isMoving) {\n              finished = Math.abs(to - position) <= precision;\n\n              if (finished) {\n                break;\n              }\n            }\n\n            if (canBounce) {\n              isBouncing = position == to || position > to == isGrowing;\n\n              if (isBouncing) {\n                velocity = -velocity * bounceFactor;\n                position = to;\n              }\n            }\n\n            const springForce = -config.tension * 0.000001 * (position - to);\n            const dampingForce = -config.friction * 0.001 * velocity;\n            const acceleration = (springForce + dampingForce) / config.mass;\n            velocity = velocity + acceleration * step;\n            position = position + velocity * step;\n          }\n        }\n\n        node.lastVelocity = velocity;\n\n        if (Number.isNaN(position)) {\n          console.warn(`Got NaN while animating:`, this);\n          finished = true;\n        }\n      }\n\n      if (payload && !payload[i].done) {\n        finished = false;\n      }\n\n      if (finished) {\n        node.done = true;\n      } else {\n        idle = false;\n      }\n\n      if (node.setValue(position, config.round)) {\n        changed = true;\n      }\n    });\n    const node = getAnimated(this);\n    const currVal = node.getValue();\n\n    if (idle) {\n      const finalVal = getFluidValue(anim.to);\n\n      if ((currVal !== finalVal || changed) && !config.decay) {\n        node.setValue(finalVal);\n\n        this._onChange(finalVal);\n      } else if (changed && config.decay) {\n        this._onChange(currVal);\n      }\n\n      this._stop();\n    } else if (changed) {\n      this._onChange(currVal);\n    }\n  }\n\n  set(value) {\n    raf.batchedUpdates(() => {\n      this._stop();\n\n      this._focus(value);\n\n      this._set(value);\n    });\n    return this;\n  }\n\n  pause() {\n    this._update({\n      pause: true\n    });\n  }\n\n  resume() {\n    this._update({\n      pause: false\n    });\n  }\n\n  finish() {\n    if (isAnimating(this)) {\n      const {\n        to,\n        config\n      } = this.animation;\n      raf.batchedUpdates(() => {\n        this._onStart();\n\n        if (!config.decay) {\n          this._set(to, false);\n        }\n\n        this._stop();\n      });\n    }\n\n    return this;\n  }\n\n  update(props) {\n    const queue = this.queue || (this.queue = []);\n    queue.push(props);\n    return this;\n  }\n\n  start(to, arg2) {\n    let queue;\n\n    if (!is.und(to)) {\n      queue = [is.obj(to) ? to : _extends({}, arg2, {\n        to\n      })];\n    } else {\n      queue = this.queue || [];\n      this.queue = [];\n    }\n\n    return Promise.all(queue.map(props => {\n      const up = this._update(props);\n\n      return up;\n    })).then(results => getCombinedResult(this, results));\n  }\n\n  stop(cancel) {\n    const {\n      to\n    } = this.animation;\n\n    this._focus(this.get());\n\n    stopAsync(this._state, cancel && this._lastCallId);\n    raf.batchedUpdates(() => this._stop(to, cancel));\n    return this;\n  }\n\n  reset() {\n    this._update({\n      reset: true\n    });\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      this._start();\n    } else if (event.type == 'priority') {\n      this.priority = event.priority + 1;\n    }\n  }\n\n  _prepareNode(props) {\n    const key = this.key || '';\n    let {\n      to,\n      from\n    } = props;\n    to = is.obj(to) ? to[key] : to;\n\n    if (to == null || isAsyncTo(to)) {\n      to = undefined;\n    }\n\n    from = is.obj(from) ? from[key] : from;\n\n    if (from == null) {\n      from = undefined;\n    }\n\n    const range = {\n      to,\n      from\n    };\n\n    if (!hasAnimated(this)) {\n      if (props.reverse) [to, from] = [from, to];\n      from = getFluidValue(from);\n\n      if (!is.und(from)) {\n        this._set(from);\n      } else if (!getAnimated(this)) {\n        this._set(to);\n      }\n    }\n\n    return range;\n  }\n\n  _update(_ref, isLoop) {\n    let props = _extends({}, _ref);\n\n    const {\n      key,\n      defaultProps\n    } = this;\n    if (props.default) Object.assign(defaultProps, getDefaultProps(props, (value, prop) => /^on/.test(prop) ? resolveProp(value, key) : value));\n    mergeActiveFn(this, props, 'onProps');\n    sendEvent(this, 'onProps', props, this);\n\n    const range = this._prepareNode(props);\n\n    if (Object.isFrozen(this)) {\n      throw Error('Cannot animate a `SpringValue` object that is frozen. ' + 'Did you forget to pass your component to `animated(...)` before animating its props?');\n    }\n\n    const state = this._state;\n    return scheduleProps(++this._lastCallId, {\n      key,\n      props,\n      defaultProps,\n      state,\n      actions: {\n        pause: () => {\n          if (!isPaused(this)) {\n            setPausedBit(this, true);\n            flushCalls(state.pauseQueue);\n            sendEvent(this, 'onPause', getFinishedResult(this, checkFinished(this, this.animation.to)), this);\n          }\n        },\n        resume: () => {\n          if (isPaused(this)) {\n            setPausedBit(this, false);\n\n            if (isAnimating(this)) {\n              this._resume();\n            }\n\n            flushCalls(state.resumeQueue);\n            sendEvent(this, 'onResume', getFinishedResult(this, checkFinished(this, this.animation.to)), this);\n          }\n        },\n        start: this._merge.bind(this, range)\n      }\n    }).then(result => {\n      if (props.loop && result.finished && !(isLoop && result.noop)) {\n        const nextProps = createLoopUpdate(props);\n\n        if (nextProps) {\n          return this._update(nextProps, true);\n        }\n      }\n\n      return result;\n    });\n  }\n\n  _merge(range, props, resolve) {\n    if (props.cancel) {\n      this.stop(true);\n      return resolve(getCancelledResult(this));\n    }\n\n    const hasToProp = !is.und(range.to);\n    const hasFromProp = !is.und(range.from);\n\n    if (hasToProp || hasFromProp) {\n      if (props.callId > this._lastToId) {\n        this._lastToId = props.callId;\n      } else {\n        return resolve(getCancelledResult(this));\n      }\n    }\n\n    const {\n      key,\n      defaultProps,\n      animation: anim\n    } = this;\n    const {\n      to: prevTo,\n      from: prevFrom\n    } = anim;\n    let {\n      to = prevTo,\n      from = prevFrom\n    } = range;\n\n    if (hasFromProp && !hasToProp && (!props.default || is.und(to))) {\n      to = from;\n    }\n\n    if (props.reverse) [to, from] = [from, to];\n    const hasFromChanged = !isEqual(from, prevFrom);\n\n    if (hasFromChanged) {\n      anim.from = from;\n    }\n\n    from = getFluidValue(from);\n    const hasToChanged = !isEqual(to, prevTo);\n\n    if (hasToChanged) {\n      this._focus(to);\n    }\n\n    const hasAsyncTo = isAsyncTo(props.to);\n    const {\n      config\n    } = anim;\n    const {\n      decay,\n      velocity\n    } = config;\n\n    if (hasToProp || hasFromProp) {\n      config.velocity = 0;\n    }\n\n    if (props.config && !hasAsyncTo) {\n      mergeConfig(config, callProp(props.config, key), props.config !== defaultProps.config ? callProp(defaultProps.config, key) : void 0);\n    }\n\n    let node = getAnimated(this);\n\n    if (!node || is.und(to)) {\n      return resolve(getFinishedResult(this, true));\n    }\n\n    const reset = is.und(props.reset) ? hasFromProp && !props.default : !is.und(from) && matchProp(props.reset, key);\n    const value = reset ? from : this.get();\n    const goal = computeGoal(to);\n    const isAnimatable = is.num(goal) || is.arr(goal) || isAnimatedString(goal);\n    const immediate = !hasAsyncTo && (!isAnimatable || matchProp(defaultProps.immediate || props.immediate, key));\n\n    if (hasToChanged) {\n      const nodeType = getAnimatedType(to);\n\n      if (nodeType !== node.constructor) {\n        if (immediate) {\n          node = this._set(goal);\n        } else throw Error(`Cannot animate between ${node.constructor.name} and ${nodeType.name}, as the \"to\" prop suggests`);\n      }\n    }\n\n    const goalType = node.constructor;\n    let started = hasFluidValue(to);\n    let finished = false;\n\n    if (!started) {\n      const hasValueChanged = reset || !hasAnimated(this) && hasFromChanged;\n\n      if (hasToChanged || hasValueChanged) {\n        finished = isEqual(computeGoal(value), goal);\n        started = !finished;\n      }\n\n      if (!isEqual(anim.immediate, immediate) && !immediate || !isEqual(config.decay, decay) || !isEqual(config.velocity, velocity)) {\n        started = true;\n      }\n    }\n\n    if (finished && isAnimating(this)) {\n      if (anim.changed && !reset) {\n        started = true;\n      } else if (!started) {\n        this._stop(prevTo);\n      }\n    }\n\n    if (!hasAsyncTo) {\n      if (started || hasFluidValue(prevTo)) {\n        anim.values = node.getPayload();\n        anim.toValues = hasFluidValue(to) ? null : goalType == AnimatedString ? [1] : toArray(goal);\n      }\n\n      if (anim.immediate != immediate) {\n        anim.immediate = immediate;\n\n        if (!immediate && !reset) {\n          this._set(prevTo);\n        }\n      }\n\n      if (started) {\n        const {\n          onRest\n        } = anim;\n        each(ACTIVE_EVENTS, type => mergeActiveFn(this, props, type));\n        const result = getFinishedResult(this, checkFinished(this, prevTo));\n        flushCalls(this._pendingCalls, result);\n\n        this._pendingCalls.add(resolve);\n\n        if (anim.changed) raf.batchedUpdates(() => {\n          anim.changed = !reset;\n          onRest == null ? void 0 : onRest(result, this);\n\n          if (reset) {\n            callProp(defaultProps.onRest, result);\n          } else {\n            anim.onStart == null ? void 0 : anim.onStart(result, this);\n          }\n        });\n      }\n    }\n\n    if (reset) {\n      this._set(value);\n    }\n\n    if (hasAsyncTo) {\n      resolve(runAsync(props.to, props, this._state, this));\n    } else if (started) {\n      this._start();\n    } else if (isAnimating(this) && !hasToChanged) {\n      this._pendingCalls.add(resolve);\n    } else {\n      resolve(getNoopResult(value));\n    }\n  }\n\n  _focus(value) {\n    const anim = this.animation;\n\n    if (value !== anim.to) {\n      if (getFluidObservers(this)) {\n        this._detach();\n      }\n\n      anim.to = value;\n\n      if (getFluidObservers(this)) {\n        this._attach();\n      }\n    }\n  }\n\n  _attach() {\n    let priority = 0;\n    const {\n      to\n    } = this.animation;\n\n    if (hasFluidValue(to)) {\n      addFluidObserver(to, this);\n\n      if (isFrameValue(to)) {\n        priority = to.priority + 1;\n      }\n    }\n\n    this.priority = priority;\n  }\n\n  _detach() {\n    const {\n      to\n    } = this.animation;\n\n    if (hasFluidValue(to)) {\n      removeFluidObserver(to, this);\n    }\n  }\n\n  _set(arg, idle = true) {\n    const value = getFluidValue(arg);\n\n    if (!is.und(value)) {\n      const oldNode = getAnimated(this);\n\n      if (!oldNode || !isEqual(value, oldNode.getValue())) {\n        const nodeType = getAnimatedType(value);\n\n        if (!oldNode || oldNode.constructor != nodeType) {\n          setAnimated(this, nodeType.create(value));\n        } else {\n          oldNode.setValue(value);\n        }\n\n        if (oldNode) {\n          raf.batchedUpdates(() => {\n            this._onChange(value, idle);\n          });\n        }\n      }\n    }\n\n    return getAnimated(this);\n  }\n\n  _onStart() {\n    const anim = this.animation;\n\n    if (!anim.changed) {\n      anim.changed = true;\n      sendEvent(this, 'onStart', getFinishedResult(this, checkFinished(this, anim.to)), this);\n    }\n  }\n\n  _onChange(value, idle) {\n    if (!idle) {\n      this._onStart();\n\n      callProp(this.animation.onChange, value, this);\n    }\n\n    callProp(this.defaultProps.onChange, value, this);\n\n    super._onChange(value, idle);\n  }\n\n  _start() {\n    const anim = this.animation;\n    getAnimated(this).reset(getFluidValue(anim.to));\n\n    if (!anim.immediate) {\n      anim.fromValues = anim.values.map(node => node.lastPosition);\n    }\n\n    if (!isAnimating(this)) {\n      setActiveBit(this, true);\n\n      if (!isPaused(this)) {\n        this._resume();\n      }\n    }\n  }\n\n  _resume() {\n    if (Globals.skipAnimation) {\n      this.finish();\n    } else {\n      frameLoop.start(this);\n    }\n  }\n\n  _stop(goal, cancel) {\n    if (isAnimating(this)) {\n      setActiveBit(this, false);\n      const anim = this.animation;\n      each(anim.values, node => {\n        node.done = true;\n      });\n\n      if (anim.toValues) {\n        anim.onChange = anim.onPause = anim.onResume = undefined;\n      }\n\n      callFluidObservers(this, {\n        type: 'idle',\n        parent: this\n      });\n      const result = cancel ? getCancelledResult(this.get()) : getFinishedResult(this.get(), checkFinished(this, goal != null ? goal : anim.to));\n      flushCalls(this._pendingCalls, result);\n\n      if (anim.changed) {\n        anim.changed = false;\n        sendEvent(this, 'onRest', result, this);\n      }\n    }\n  }\n\n}\n\nfunction checkFinished(target, to) {\n  const goal = computeGoal(to);\n  const value = computeGoal(target.get());\n  return isEqual(value, goal);\n}\n\nfunction createLoopUpdate(props, loop = props.loop, to = props.to) {\n  let loopRet = callProp(loop);\n\n  if (loopRet) {\n    const overrides = loopRet !== true && inferTo(loopRet);\n    const reverse = (overrides || props).reverse;\n    const reset = !overrides || overrides.reset;\n    return createUpdate(_extends({}, props, {\n      loop,\n      default: false,\n      pause: undefined,\n      to: !reverse || isAsyncTo(to) ? to : undefined,\n      from: reset ? props.from : undefined,\n      reset\n    }, overrides));\n  }\n}\nfunction createUpdate(props) {\n  const {\n    to,\n    from\n  } = props = inferTo(props);\n  const keys = new Set();\n  if (is.obj(to)) findDefined(to, keys);\n  if (is.obj(from)) findDefined(from, keys);\n  props.keys = keys.size ? Array.from(keys) : null;\n  return props;\n}\nfunction declareUpdate(props) {\n  const update = createUpdate(props);\n\n  if (is.und(update.default)) {\n    update.default = getDefaultProps(update);\n  }\n\n  return update;\n}\n\nfunction findDefined(values, keys) {\n  eachProp(values, (value, key) => value != null && keys.add(key));\n}\n\nconst ACTIVE_EVENTS = ['onStart', 'onRest', 'onChange', 'onPause', 'onResume'];\n\nfunction mergeActiveFn(target, props, type) {\n  target.animation[type] = props[type] !== getDefaultProp(props, type) ? resolveProp(props[type], target.key) : undefined;\n}\n\nfunction sendEvent(target, type, ...args) {\n  var _target$animation$typ, _target$animation, _target$defaultProps$, _target$defaultProps;\n\n  (_target$animation$typ = (_target$animation = target.animation)[type]) == null ? void 0 : _target$animation$typ.call(_target$animation, ...args);\n  (_target$defaultProps$ = (_target$defaultProps = target.defaultProps)[type]) == null ? void 0 : _target$defaultProps$.call(_target$defaultProps, ...args);\n}\n\nconst BATCHED_EVENTS = ['onStart', 'onChange', 'onRest'];\nlet nextId = 1;\nclass Controller {\n  constructor(props, flush) {\n    this.id = nextId++;\n    this.springs = {};\n    this.queue = [];\n    this.ref = void 0;\n    this._flush = void 0;\n    this._initialProps = void 0;\n    this._lastAsyncId = 0;\n    this._active = new Set();\n    this._changed = new Set();\n    this._started = false;\n    this._item = void 0;\n    this._state = {\n      paused: false,\n      pauseQueue: new Set(),\n      resumeQueue: new Set(),\n      timeouts: new Set()\n    };\n    this._events = {\n      onStart: new Map(),\n      onChange: new Map(),\n      onRest: new Map()\n    };\n    this._onFrame = this._onFrame.bind(this);\n\n    if (flush) {\n      this._flush = flush;\n    }\n\n    if (props) {\n      this.start(_extends({\n        default: true\n      }, props));\n    }\n  }\n\n  get idle() {\n    return !this._state.asyncTo && Object.values(this.springs).every(spring => {\n      return spring.idle && !spring.isDelayed && !spring.isPaused;\n    });\n  }\n\n  get item() {\n    return this._item;\n  }\n\n  set item(item) {\n    this._item = item;\n  }\n\n  get() {\n    const values = {};\n    this.each((spring, key) => values[key] = spring.get());\n    return values;\n  }\n\n  set(values) {\n    for (const key in values) {\n      const value = values[key];\n\n      if (!is.und(value)) {\n        this.springs[key].set(value);\n      }\n    }\n  }\n\n  update(props) {\n    if (props) {\n      this.queue.push(createUpdate(props));\n    }\n\n    return this;\n  }\n\n  start(props) {\n    let {\n      queue\n    } = this;\n\n    if (props) {\n      queue = toArray(props).map(createUpdate);\n    } else {\n      this.queue = [];\n    }\n\n    if (this._flush) {\n      return this._flush(this, queue);\n    }\n\n    prepareKeys(this, queue);\n    return flushUpdateQueue(this, queue);\n  }\n\n  stop(arg, keys) {\n    if (arg !== !!arg) {\n      keys = arg;\n    }\n\n    if (keys) {\n      const springs = this.springs;\n      each(toArray(keys), key => springs[key].stop(!!arg));\n    } else {\n      stopAsync(this._state, this._lastAsyncId);\n      this.each(spring => spring.stop(!!arg));\n    }\n\n    return this;\n  }\n\n  pause(keys) {\n    if (is.und(keys)) {\n      this.start({\n        pause: true\n      });\n    } else {\n      const springs = this.springs;\n      each(toArray(keys), key => springs[key].pause());\n    }\n\n    return this;\n  }\n\n  resume(keys) {\n    if (is.und(keys)) {\n      this.start({\n        pause: false\n      });\n    } else {\n      const springs = this.springs;\n      each(toArray(keys), key => springs[key].resume());\n    }\n\n    return this;\n  }\n\n  each(iterator) {\n    eachProp(this.springs, iterator);\n  }\n\n  _onFrame() {\n    const {\n      onStart,\n      onChange,\n      onRest\n    } = this._events;\n    const active = this._active.size > 0;\n    const changed = this._changed.size > 0;\n\n    if (active && !this._started || changed && !this._started) {\n      this._started = true;\n      flush(onStart, ([onStart, result]) => {\n        result.value = this.get();\n        onStart(result, this, this._item);\n      });\n    }\n\n    const idle = !active && this._started;\n    const values = changed || idle && onRest.size ? this.get() : null;\n\n    if (changed && onChange.size) {\n      flush(onChange, ([onChange, result]) => {\n        result.value = values;\n        onChange(result, this, this._item);\n      });\n    }\n\n    if (idle) {\n      this._started = false;\n      flush(onRest, ([onRest, result]) => {\n        result.value = values;\n        onRest(result, this, this._item);\n      });\n    }\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      this._changed.add(event.parent);\n\n      if (!event.idle) {\n        this._active.add(event.parent);\n      }\n    } else if (event.type == 'idle') {\n      this._active.delete(event.parent);\n    } else return;\n\n    raf.onFrame(this._onFrame);\n  }\n\n}\nfunction flushUpdateQueue(ctrl, queue) {\n  return Promise.all(queue.map(props => flushUpdate(ctrl, props))).then(results => getCombinedResult(ctrl, results));\n}\nasync function flushUpdate(ctrl, props, isLoop) {\n  const {\n    keys,\n    to,\n    from,\n    loop,\n    onRest,\n    onResolve\n  } = props;\n  const defaults = is.obj(props.default) && props.default;\n\n  if (loop) {\n    props.loop = false;\n  }\n\n  if (to === false) props.to = null;\n  if (from === false) props.from = null;\n  const asyncTo = is.arr(to) || is.fun(to) ? to : undefined;\n\n  if (asyncTo) {\n    props.to = undefined;\n    props.onRest = undefined;\n\n    if (defaults) {\n      defaults.onRest = undefined;\n    }\n  } else {\n    each(BATCHED_EVENTS, key => {\n      const handler = props[key];\n\n      if (is.fun(handler)) {\n        const queue = ctrl['_events'][key];\n\n        props[key] = ({\n          finished,\n          cancelled\n        }) => {\n          const result = queue.get(handler);\n\n          if (result) {\n            if (!finished) result.finished = false;\n            if (cancelled) result.cancelled = true;\n          } else {\n            queue.set(handler, {\n              value: null,\n              finished: finished || false,\n              cancelled: cancelled || false\n            });\n          }\n        };\n\n        if (defaults) {\n          defaults[key] = props[key];\n        }\n      }\n    });\n  }\n\n  const state = ctrl['_state'];\n\n  if (props.pause === !state.paused) {\n    state.paused = props.pause;\n    flushCalls(props.pause ? state.pauseQueue : state.resumeQueue);\n  } else if (state.paused) {\n    props.pause = true;\n  }\n\n  const promises = (keys || Object.keys(ctrl.springs)).map(key => ctrl.springs[key].start(props));\n  const cancel = props.cancel === true || getDefaultProp(props, 'cancel') === true;\n\n  if (asyncTo || cancel && state.asyncId) {\n    promises.push(scheduleProps(++ctrl['_lastAsyncId'], {\n      props,\n      state,\n      actions: {\n        pause: noop,\n        resume: noop,\n\n        start(props, resolve) {\n          if (cancel) {\n            stopAsync(state, ctrl['_lastAsyncId']);\n            resolve(getCancelledResult(ctrl));\n          } else {\n            props.onRest = onRest;\n            resolve(runAsync(asyncTo, props, state, ctrl));\n          }\n        }\n\n      }\n    }));\n  }\n\n  if (state.paused) {\n    await new Promise(resume => {\n      state.resumeQueue.add(resume);\n    });\n  }\n\n  const result = getCombinedResult(ctrl, await Promise.all(promises));\n\n  if (loop && result.finished && !(isLoop && result.noop)) {\n    const nextProps = createLoopUpdate(props, loop, to);\n\n    if (nextProps) {\n      prepareKeys(ctrl, [nextProps]);\n      return flushUpdate(ctrl, nextProps, true);\n    }\n  }\n\n  if (onResolve) {\n    raf.batchedUpdates(() => onResolve(result, ctrl, ctrl.item));\n  }\n\n  return result;\n}\nfunction getSprings(ctrl, props) {\n  const springs = _extends({}, ctrl.springs);\n\n  if (props) {\n    each(toArray(props), props => {\n      if (is.und(props.keys)) {\n        props = createUpdate(props);\n      }\n\n      if (!is.obj(props.to)) {\n        props = _extends({}, props, {\n          to: undefined\n        });\n      }\n\n      prepareSprings(springs, props, key => {\n        return createSpring(key);\n      });\n    });\n  }\n\n  setSprings(ctrl, springs);\n  return springs;\n}\nfunction setSprings(ctrl, springs) {\n  eachProp(springs, (spring, key) => {\n    if (!ctrl.springs[key]) {\n      ctrl.springs[key] = spring;\n      addFluidObserver(spring, ctrl);\n    }\n  });\n}\n\nfunction createSpring(key, observer) {\n  const spring = new SpringValue();\n  spring.key = key;\n\n  if (observer) {\n    addFluidObserver(spring, observer);\n  }\n\n  return spring;\n}\n\nfunction prepareSprings(springs, props, create) {\n  if (props.keys) {\n    each(props.keys, key => {\n      const spring = springs[key] || (springs[key] = create(key));\n      spring['_prepareNode'](props);\n    });\n  }\n}\n\nfunction prepareKeys(ctrl, queue) {\n  each(queue, props => {\n    prepareSprings(ctrl.springs, props, key => {\n      return createSpring(key, ctrl);\n    });\n  });\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst _excluded$3 = [\"children\"];\nconst SpringContext = _ref => {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded$3);\n\n  const inherited = useContext(ctx);\n  const pause = props.pause || !!inherited.pause,\n        immediate = props.immediate || !!inherited.immediate;\n  props = useMemoOne(() => ({\n    pause,\n    immediate\n  }), [pause, immediate]);\n  const {\n    Provider\n  } = ctx;\n  return React.createElement(Provider, {\n    value: props\n  }, children);\n};\nconst ctx = makeContext(SpringContext, {});\nSpringContext.Provider = ctx.Provider;\nSpringContext.Consumer = ctx.Consumer;\n\nfunction makeContext(target, init) {\n  Object.assign(target, React.createContext(init));\n  target.Provider._context = target;\n  target.Consumer._context = target;\n  return target;\n}\n\nconst SpringRef = () => {\n  const current = [];\n\n  const SpringRef = function SpringRef(props) {\n    deprecateDirectCall();\n    const results = [];\n    each(current, (ctrl, i) => {\n      if (is.und(props)) {\n        results.push(ctrl.start());\n      } else {\n        const update = _getProps(props, ctrl, i);\n\n        if (update) {\n          results.push(ctrl.start(update));\n        }\n      }\n    });\n    return results;\n  };\n\n  SpringRef.current = current;\n\n  SpringRef.add = function (ctrl) {\n    if (!current.includes(ctrl)) {\n      current.push(ctrl);\n    }\n  };\n\n  SpringRef.delete = function (ctrl) {\n    const i = current.indexOf(ctrl);\n    if (~i) current.splice(i, 1);\n  };\n\n  SpringRef.pause = function () {\n    each(current, ctrl => ctrl.pause(...arguments));\n    return this;\n  };\n\n  SpringRef.resume = function () {\n    each(current, ctrl => ctrl.resume(...arguments));\n    return this;\n  };\n\n  SpringRef.set = function (values) {\n    each(current, ctrl => ctrl.set(values));\n  };\n\n  SpringRef.start = function (props) {\n    const results = [];\n    each(current, (ctrl, i) => {\n      if (is.und(props)) {\n        results.push(ctrl.start());\n      } else {\n        const update = this._getProps(props, ctrl, i);\n\n        if (update) {\n          results.push(ctrl.start(update));\n        }\n      }\n    });\n    return results;\n  };\n\n  SpringRef.stop = function () {\n    each(current, ctrl => ctrl.stop(...arguments));\n    return this;\n  };\n\n  SpringRef.update = function (props) {\n    each(current, (ctrl, i) => ctrl.update(this._getProps(props, ctrl, i)));\n    return this;\n  };\n\n  const _getProps = function _getProps(arg, ctrl, index) {\n    return is.fun(arg) ? arg(index, ctrl) : arg;\n  };\n\n  SpringRef._getProps = _getProps;\n  return SpringRef;\n};\n\nfunction useSprings(length, props, deps) {\n  const propsFn = is.fun(props) && props;\n  if (propsFn && !deps) deps = [];\n  const ref = useMemo(() => propsFn || arguments.length == 3 ? SpringRef() : void 0, []);\n  const layoutId = useRef(0);\n  const forceUpdate = useForceUpdate();\n  const state = useMemo(() => ({\n    ctrls: [],\n    queue: [],\n\n    flush(ctrl, updates) {\n      const springs = getSprings(ctrl, updates);\n      const canFlushSync = layoutId.current > 0 && !state.queue.length && !Object.keys(springs).some(key => !ctrl.springs[key]);\n      return canFlushSync ? flushUpdateQueue(ctrl, updates) : new Promise(resolve => {\n        setSprings(ctrl, springs);\n        state.queue.push(() => {\n          resolve(flushUpdateQueue(ctrl, updates));\n        });\n        forceUpdate();\n      });\n    }\n\n  }), []);\n  const ctrls = useRef([...state.ctrls]);\n  const updates = [];\n  const prevLength = usePrev(length) || 0;\n  useMemo(() => {\n    each(ctrls.current.slice(length, prevLength), ctrl => {\n      detachRefs(ctrl, ref);\n      ctrl.stop(true);\n    });\n    ctrls.current.length = length;\n    declareUpdates(prevLength, length);\n  }, [length]);\n  useMemo(() => {\n    declareUpdates(0, Math.min(prevLength, length));\n  }, deps);\n\n  function declareUpdates(startIndex, endIndex) {\n    for (let i = startIndex; i < endIndex; i++) {\n      const ctrl = ctrls.current[i] || (ctrls.current[i] = new Controller(null, state.flush));\n      const update = propsFn ? propsFn(i, ctrl) : props[i];\n\n      if (update) {\n        updates[i] = declareUpdate(update);\n      }\n    }\n  }\n\n  const springs = ctrls.current.map((ctrl, i) => getSprings(ctrl, updates[i]));\n  const context = useContext(SpringContext);\n  const prevContext = usePrev(context);\n  const hasContext = context !== prevContext && hasProps(context);\n  useIsomorphicLayoutEffect(() => {\n    layoutId.current++;\n    state.ctrls = ctrls.current;\n    const {\n      queue\n    } = state;\n\n    if (queue.length) {\n      state.queue = [];\n      each(queue, cb => cb());\n    }\n\n    each(ctrls.current, (ctrl, i) => {\n      ref == null ? void 0 : ref.add(ctrl);\n\n      if (hasContext) {\n        ctrl.start({\n          default: context\n        });\n      }\n\n      const update = updates[i];\n\n      if (update) {\n        replaceRef(ctrl, update.ref);\n\n        if (ctrl.ref) {\n          ctrl.queue.push(update);\n        } else {\n          ctrl.start(update);\n        }\n      }\n    });\n  });\n  useOnce(() => () => {\n    each(state.ctrls, ctrl => ctrl.stop(true));\n  });\n  const values = springs.map(x => _extends({}, x));\n  return ref ? [values, ref] : values;\n}\n\nfunction useSpring(props, deps) {\n  const isFn = is.fun(props);\n  const [[values], ref] = useSprings(1, isFn ? props : [props], isFn ? deps || [] : deps);\n  return isFn || arguments.length == 2 ? [values, ref] : values;\n}\n\nconst initSpringRef = () => SpringRef();\n\nconst useSpringRef = () => useState(initSpringRef)[0];\n\nfunction useTrail(length, propsArg, deps) {\n  var _passedRef;\n\n  const propsFn = is.fun(propsArg) && propsArg;\n  if (propsFn && !deps) deps = [];\n  let reverse = true;\n  let passedRef = undefined;\n  const result = useSprings(length, (i, ctrl) => {\n    const props = propsFn ? propsFn(i, ctrl) : propsArg;\n    passedRef = props.ref;\n    reverse = reverse && props.reverse;\n    return props;\n  }, deps || [{}]);\n  const ref = (_passedRef = passedRef) != null ? _passedRef : result[1];\n  useIsomorphicLayoutEffect(() => {\n    each(ref.current, (ctrl, i) => {\n      const parent = ref.current[i + (reverse ? 1 : -1)];\n\n      if (parent) {\n        ctrl.start({\n          to: parent.springs\n        });\n      } else {\n        ctrl.start();\n      }\n    });\n  }, deps);\n\n  if (propsFn || arguments.length == 3) {\n    ref['_getProps'] = (propsArg, ctrl, i) => {\n      const props = is.fun(propsArg) ? propsArg(i, ctrl) : propsArg;\n\n      if (props) {\n        const parent = ref.current[i + (props.reverse ? 1 : -1)];\n        if (parent) props.to = parent.springs;\n        return props;\n      }\n    };\n\n    return result;\n  }\n\n  ref['start'] = propsArg => {\n    const results = [];\n    each(ref.current, (ctrl, i) => {\n      const props = is.fun(propsArg) ? propsArg(i, ctrl) : propsArg;\n      const parent = ref.current[i + (reverse ? 1 : -1)];\n\n      if (parent) {\n        results.push(ctrl.start(_extends({}, props, {\n          to: parent.springs\n        })));\n      } else {\n        results.push(ctrl.start(_extends({}, props)));\n      }\n    });\n    return results;\n  };\n\n  return result[0];\n}\n\nlet TransitionPhase;\n\n(function (TransitionPhase) {\n  TransitionPhase[\"MOUNT\"] = \"mount\";\n  TransitionPhase[\"ENTER\"] = \"enter\";\n  TransitionPhase[\"UPDATE\"] = \"update\";\n  TransitionPhase[\"LEAVE\"] = \"leave\";\n})(TransitionPhase || (TransitionPhase = {}));\n\nfunction useTransition(data, props, deps) {\n  const propsFn = is.fun(props) && props;\n  const {\n    reset,\n    sort,\n    trail = 0,\n    expires = true,\n    exitBeforeEnter = false,\n    onDestroyed,\n    ref: propsRef,\n    config: propsConfig\n  } = propsFn ? propsFn() : props;\n  const ref = useMemo(() => propsFn || arguments.length == 3 ? SpringRef() : void 0, []);\n  const items = toArray(data);\n  const transitions = [];\n  const usedTransitions = useRef(null);\n  const prevTransitions = reset ? null : usedTransitions.current;\n  useIsomorphicLayoutEffect(() => {\n    usedTransitions.current = transitions;\n  });\n  useOnce(() => {\n    each(transitions, t => {\n      ref == null ? void 0 : ref.add(t.ctrl);\n      t.ctrl.ref = ref;\n    });\n    return () => {\n      each(usedTransitions.current, t => {\n        if (t.expired) {\n          clearTimeout(t.expirationId);\n        }\n\n        detachRefs(t.ctrl, ref);\n        t.ctrl.stop(true);\n      });\n    };\n  });\n  const keys = getKeys(items, propsFn ? propsFn() : props, prevTransitions);\n  const expired = reset && usedTransitions.current || [];\n  useIsomorphicLayoutEffect(() => each(expired, ({\n    ctrl,\n    item,\n    key\n  }) => {\n    detachRefs(ctrl, ref);\n    callProp(onDestroyed, item, key);\n  }));\n  const reused = [];\n  if (prevTransitions) each(prevTransitions, (t, i) => {\n    if (t.expired) {\n      clearTimeout(t.expirationId);\n      expired.push(t);\n    } else {\n      i = reused[i] = keys.indexOf(t.key);\n      if (~i) transitions[i] = t;\n    }\n  });\n  each(items, (item, i) => {\n    if (!transitions[i]) {\n      transitions[i] = {\n        key: keys[i],\n        item,\n        phase: TransitionPhase.MOUNT,\n        ctrl: new Controller()\n      };\n      transitions[i].ctrl.item = item;\n    }\n  });\n\n  if (reused.length) {\n    let i = -1;\n    const {\n      leave\n    } = propsFn ? propsFn() : props;\n    each(reused, (keyIndex, prevIndex) => {\n      const t = prevTransitions[prevIndex];\n\n      if (~keyIndex) {\n        i = transitions.indexOf(t);\n        transitions[i] = _extends({}, t, {\n          item: items[keyIndex]\n        });\n      } else if (leave) {\n        transitions.splice(++i, 0, t);\n      }\n    });\n  }\n\n  if (is.fun(sort)) {\n    transitions.sort((a, b) => sort(a.item, b.item));\n  }\n\n  let delay = -trail;\n  const forceUpdate = useForceUpdate();\n  const defaultProps = getDefaultProps(props);\n  const changes = new Map();\n  const exitingTransitions = useRef(new Map());\n  const forceChange = useRef(false);\n  each(transitions, (t, i) => {\n    const key = t.key;\n    const prevPhase = t.phase;\n    const p = propsFn ? propsFn() : props;\n    let to;\n    let phase;\n    let propsDelay = callProp(p.delay || 0, key);\n\n    if (prevPhase == TransitionPhase.MOUNT) {\n      to = p.enter;\n      phase = TransitionPhase.ENTER;\n    } else {\n      const isLeave = keys.indexOf(key) < 0;\n\n      if (prevPhase != TransitionPhase.LEAVE) {\n        if (isLeave) {\n          to = p.leave;\n          phase = TransitionPhase.LEAVE;\n        } else if (to = p.update) {\n          phase = TransitionPhase.UPDATE;\n        } else return;\n      } else if (!isLeave) {\n        to = p.enter;\n        phase = TransitionPhase.ENTER;\n      } else return;\n    }\n\n    to = callProp(to, t.item, i);\n    to = is.obj(to) ? inferTo(to) : {\n      to\n    };\n\n    if (!to.config) {\n      const config = propsConfig || defaultProps.config;\n      to.config = callProp(config, t.item, i, phase);\n    }\n\n    delay += trail;\n\n    const payload = _extends({}, defaultProps, {\n      delay: propsDelay + delay,\n      ref: propsRef,\n      immediate: p.immediate,\n      reset: false\n    }, to);\n\n    if (phase == TransitionPhase.ENTER && is.und(payload.from)) {\n      const _p = propsFn ? propsFn() : props;\n\n      const from = is.und(_p.initial) || prevTransitions ? _p.from : _p.initial;\n      payload.from = callProp(from, t.item, i);\n    }\n\n    const {\n      onResolve\n    } = payload;\n\n    payload.onResolve = result => {\n      callProp(onResolve, result);\n      const transitions = usedTransitions.current;\n      const t = transitions.find(t => t.key === key);\n      if (!t) return;\n\n      if (result.cancelled && t.phase != TransitionPhase.UPDATE) {\n        return;\n      }\n\n      if (t.ctrl.idle) {\n        const idle = transitions.every(t => t.ctrl.idle);\n\n        if (t.phase == TransitionPhase.LEAVE) {\n          const expiry = callProp(expires, t.item);\n\n          if (expiry !== false) {\n            const expiryMs = expiry === true ? 0 : expiry;\n            t.expired = true;\n\n            if (!idle && expiryMs > 0) {\n              if (expiryMs <= 0x7fffffff) t.expirationId = setTimeout(forceUpdate, expiryMs);\n              return;\n            }\n          }\n        }\n\n        if (idle && transitions.some(t => t.expired)) {\n          exitingTransitions.current.delete(t);\n\n          if (exitBeforeEnter) {\n            forceChange.current = true;\n          }\n\n          forceUpdate();\n        }\n      }\n    };\n\n    const springs = getSprings(t.ctrl, payload);\n\n    if (phase === TransitionPhase.LEAVE && exitBeforeEnter) {\n      exitingTransitions.current.set(t, {\n        phase,\n        springs,\n        payload\n      });\n    } else {\n      changes.set(t, {\n        phase,\n        springs,\n        payload\n      });\n    }\n  });\n  const context = useContext(SpringContext);\n  const prevContext = usePrev(context);\n  const hasContext = context !== prevContext && hasProps(context);\n  useIsomorphicLayoutEffect(() => {\n    if (hasContext) {\n      each(transitions, t => {\n        t.ctrl.start({\n          default: context\n        });\n      });\n    }\n  }, [context]);\n  each(changes, (_, t) => {\n    if (exitingTransitions.current.size) {\n      const ind = transitions.findIndex(state => state.key === t.key);\n      transitions.splice(ind, 1);\n    }\n  });\n  useIsomorphicLayoutEffect(() => {\n    each(exitingTransitions.current.size ? exitingTransitions.current : changes, ({\n      phase,\n      payload\n    }, t) => {\n      const {\n        ctrl\n      } = t;\n      t.phase = phase;\n      ref == null ? void 0 : ref.add(ctrl);\n\n      if (hasContext && phase == TransitionPhase.ENTER) {\n        ctrl.start({\n          default: context\n        });\n      }\n\n      if (payload) {\n        replaceRef(ctrl, payload.ref);\n\n        if ((ctrl.ref || ref) && !forceChange.current) {\n          ctrl.update(payload);\n        } else {\n          ctrl.start(payload);\n\n          if (forceChange.current) {\n            forceChange.current = false;\n          }\n        }\n      }\n    });\n  }, reset ? void 0 : deps);\n\n  const renderTransitions = render => React.createElement(React.Fragment, null, transitions.map((t, i) => {\n    const {\n      springs\n    } = changes.get(t) || t.ctrl;\n    const elem = render(_extends({}, springs), t.item, t, i);\n    return elem && elem.type ? React.createElement(elem.type, _extends({}, elem.props, {\n      key: is.str(t.key) || is.num(t.key) ? t.key : t.ctrl.id,\n      ref: elem.ref\n    })) : elem;\n  }));\n\n  return ref ? [renderTransitions, ref] : renderTransitions;\n}\nlet nextKey = 1;\n\nfunction getKeys(items, {\n  key,\n  keys = key\n}, prevTransitions) {\n  if (keys === null) {\n    const reused = new Set();\n    return items.map(item => {\n      const t = prevTransitions && prevTransitions.find(t => t.item === item && t.phase !== TransitionPhase.LEAVE && !reused.has(t));\n\n      if (t) {\n        reused.add(t);\n        return t.key;\n      }\n\n      return nextKey++;\n    });\n  }\n\n  return is.und(keys) ? items : is.fun(keys) ? items.map(keys) : toArray(keys);\n}\n\nconst _excluded$2 = [\"children\"];\nfunction Spring(_ref) {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n\n  return children(useSpring(props));\n}\n\nconst _excluded$1 = [\"items\", \"children\"];\nfunction Trail(_ref) {\n  let {\n    items,\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n\n  const trails = useTrail(items.length, props);\n  return items.map((item, index) => {\n    const result = children(item, index);\n    return is.fun(result) ? result(trails[index]) : result;\n  });\n}\n\nconst _excluded = [\"items\", \"children\"];\nfunction Transition(_ref) {\n  let {\n    items,\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  return useTransition(items, props)(children);\n}\n\nclass Interpolation extends FrameValue {\n  constructor(source, args) {\n    super();\n    this.key = void 0;\n    this.idle = true;\n    this.calc = void 0;\n    this._active = new Set();\n    this.source = source;\n    this.calc = createInterpolator(...args);\n\n    const value = this._get();\n\n    const nodeType = getAnimatedType(value);\n    setAnimated(this, nodeType.create(value));\n  }\n\n  advance(_dt) {\n    const value = this._get();\n\n    const oldValue = this.get();\n\n    if (!isEqual(value, oldValue)) {\n      getAnimated(this).setValue(value);\n\n      this._onChange(value, this.idle);\n    }\n\n    if (!this.idle && checkIdle(this._active)) {\n      becomeIdle(this);\n    }\n  }\n\n  _get() {\n    const inputs = is.arr(this.source) ? this.source.map(getFluidValue) : toArray(getFluidValue(this.source));\n    return this.calc(...inputs);\n  }\n\n  _start() {\n    if (this.idle && !checkIdle(this._active)) {\n      this.idle = false;\n      each(getPayload(this), node => {\n        node.done = false;\n      });\n\n      if (Globals.skipAnimation) {\n        raf.batchedUpdates(() => this.advance());\n        becomeIdle(this);\n      } else {\n        frameLoop.start(this);\n      }\n    }\n  }\n\n  _attach() {\n    let priority = 1;\n    each(toArray(this.source), source => {\n      if (hasFluidValue(source)) {\n        addFluidObserver(source, this);\n      }\n\n      if (isFrameValue(source)) {\n        if (!source.idle) {\n          this._active.add(source);\n        }\n\n        priority = Math.max(priority, source.priority + 1);\n      }\n    });\n    this.priority = priority;\n\n    this._start();\n  }\n\n  _detach() {\n    each(toArray(this.source), source => {\n      if (hasFluidValue(source)) {\n        removeFluidObserver(source, this);\n      }\n    });\n\n    this._active.clear();\n\n    becomeIdle(this);\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      if (event.idle) {\n        this.advance();\n      } else {\n        this._active.add(event.parent);\n\n        this._start();\n      }\n    } else if (event.type == 'idle') {\n      this._active.delete(event.parent);\n    } else if (event.type == 'priority') {\n      this.priority = toArray(this.source).reduce((highest, parent) => Math.max(highest, (isFrameValue(parent) ? parent.priority : 0) + 1), 0);\n    }\n  }\n\n}\n\nfunction isIdle(source) {\n  return source.idle !== false;\n}\n\nfunction checkIdle(active) {\n  return !active.size || Array.from(active).every(isIdle);\n}\n\nfunction becomeIdle(self) {\n  if (!self.idle) {\n    self.idle = true;\n    each(getPayload(self), node => {\n      node.done = true;\n    });\n    callFluidObservers(self, {\n      type: 'idle',\n      parent: self\n    });\n  }\n}\n\nconst to = (source, ...args) => new Interpolation(source, args);\nconst interpolate = (source, ...args) => (deprecateInterpolate(), new Interpolation(source, args));\n\nGlobals.assign({\n  createStringInterpolator,\n  to: (source, args) => new Interpolation(source, args)\n});\nconst update = frameLoop.advance;\n\nexport { BailSignal, Controller, FrameValue, Interpolation, Spring, SpringContext, SpringRef, SpringValue, Trail, Transition, config, easings, inferTo, interpolate, to, update, useChain, useSpring, useSpringRef, useSprings, useTrail, useTransition };\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactDOM\"];","import { Globals } from '@react-spring/core';\nexport * from '@react-spring/core';\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { eachProp, is, toArray, FluidValue, each, getFluidValue, hasFluidValue, addFluidObserver, removeFluidObserver, callFluidObservers, createStringInterpolator, colors } from '@react-spring/shared';\nimport { AnimatedObject, createHost } from '@react-spring/animated';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst _excluded$2 = [\"style\", \"children\", \"scrollTop\", \"scrollLeft\"];\nconst isCustomPropRE = /^--/;\n\nfunction dangerousStyleValue(name, value) {\n  if (value == null || typeof value === 'boolean' || value === '') return '';\n  if (typeof value === 'number' && value !== 0 && !isCustomPropRE.test(name) && !(isUnitlessNumber.hasOwnProperty(name) && isUnitlessNumber[name])) return value + 'px';\n  return ('' + value).trim();\n}\n\nconst attributeCache = {};\nfunction applyAnimatedValues(instance, props) {\n  if (!instance.nodeType || !instance.setAttribute) {\n    return false;\n  }\n\n  const isFilterElement = instance.nodeName === 'filter' || instance.parentNode && instance.parentNode.nodeName === 'filter';\n\n  const _ref = props,\n        {\n    style,\n    children,\n    scrollTop,\n    scrollLeft\n  } = _ref,\n        attributes = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n\n  const values = Object.values(attributes);\n  const names = Object.keys(attributes).map(name => isFilterElement || instance.hasAttribute(name) ? name : attributeCache[name] || (attributeCache[name] = name.replace(/([A-Z])/g, n => '-' + n.toLowerCase())));\n\n  if (children !== void 0) {\n    instance.textContent = children;\n  }\n\n  for (let name in style) {\n    if (style.hasOwnProperty(name)) {\n      const value = dangerousStyleValue(name, style[name]);\n\n      if (isCustomPropRE.test(name)) {\n        instance.style.setProperty(name, value);\n      } else {\n        instance.style[name] = value;\n      }\n    }\n  }\n\n  names.forEach((name, i) => {\n    instance.setAttribute(name, values[i]);\n  });\n\n  if (scrollTop !== void 0) {\n    instance.scrollTop = scrollTop;\n  }\n\n  if (scrollLeft !== void 0) {\n    instance.scrollLeft = scrollLeft;\n  }\n}\nlet isUnitlessNumber = {\n  animationIterationCount: true,\n  borderImageOutset: true,\n  borderImageSlice: true,\n  borderImageWidth: true,\n  boxFlex: true,\n  boxFlexGroup: true,\n  boxOrdinalGroup: true,\n  columnCount: true,\n  columns: true,\n  flex: true,\n  flexGrow: true,\n  flexPositive: true,\n  flexShrink: true,\n  flexNegative: true,\n  flexOrder: true,\n  gridRow: true,\n  gridRowEnd: true,\n  gridRowSpan: true,\n  gridRowStart: true,\n  gridColumn: true,\n  gridColumnEnd: true,\n  gridColumnSpan: true,\n  gridColumnStart: true,\n  fontWeight: true,\n  lineClamp: true,\n  lineHeight: true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  tabSize: true,\n  widows: true,\n  zIndex: true,\n  zoom: true,\n  fillOpacity: true,\n  floodOpacity: true,\n  stopOpacity: true,\n  strokeDasharray: true,\n  strokeDashoffset: true,\n  strokeMiterlimit: true,\n  strokeOpacity: true,\n  strokeWidth: true\n};\n\nconst prefixKey = (prefix, key) => prefix + key.charAt(0).toUpperCase() + key.substring(1);\n\nconst prefixes = ['Webkit', 'Ms', 'Moz', 'O'];\nisUnitlessNumber = Object.keys(isUnitlessNumber).reduce((acc, prop) => {\n  prefixes.forEach(prefix => acc[prefixKey(prefix, prop)] = acc[prop]);\n  return acc;\n}, isUnitlessNumber);\n\nconst _excluded$1 = [\"x\", \"y\", \"z\"];\nconst domTransforms = /^(matrix|translate|scale|rotate|skew)/;\nconst pxTransforms = /^(translate)/;\nconst degTransforms = /^(rotate|skew)/;\n\nconst addUnit = (value, unit) => is.num(value) && value !== 0 ? value + unit : value;\n\nconst isValueIdentity = (value, id) => is.arr(value) ? value.every(v => isValueIdentity(v, id)) : is.num(value) ? value === id : parseFloat(value) === id;\n\nclass AnimatedStyle extends AnimatedObject {\n  constructor(_ref) {\n    let {\n      x,\n      y,\n      z\n    } = _ref,\n        style = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n\n    const inputs = [];\n    const transforms = [];\n\n    if (x || y || z) {\n      inputs.push([x || 0, y || 0, z || 0]);\n      transforms.push(xyz => [`translate3d(${xyz.map(v => addUnit(v, 'px')).join(',')})`, isValueIdentity(xyz, 0)]);\n    }\n\n    eachProp(style, (value, key) => {\n      if (key === 'transform') {\n        inputs.push([value || '']);\n        transforms.push(transform => [transform, transform === '']);\n      } else if (domTransforms.test(key)) {\n        delete style[key];\n        if (is.und(value)) return;\n        const unit = pxTransforms.test(key) ? 'px' : degTransforms.test(key) ? 'deg' : '';\n        inputs.push(toArray(value));\n        transforms.push(key === 'rotate3d' ? ([x, y, z, deg]) => [`rotate3d(${x},${y},${z},${addUnit(deg, unit)})`, isValueIdentity(deg, 0)] : input => [`${key}(${input.map(v => addUnit(v, unit)).join(',')})`, isValueIdentity(input, key.startsWith('scale') ? 1 : 0)]);\n      }\n    });\n\n    if (inputs.length) {\n      style.transform = new FluidTransform(inputs, transforms);\n    }\n\n    super(style);\n  }\n\n}\n\nclass FluidTransform extends FluidValue {\n  constructor(inputs, transforms) {\n    super();\n    this._value = null;\n    this.inputs = inputs;\n    this.transforms = transforms;\n  }\n\n  get() {\n    return this._value || (this._value = this._get());\n  }\n\n  _get() {\n    let transform = '';\n    let identity = true;\n    each(this.inputs, (input, i) => {\n      const arg1 = getFluidValue(input[0]);\n      const [t, id] = this.transforms[i](is.arr(arg1) ? arg1 : input.map(getFluidValue));\n      transform += ' ' + t;\n      identity = identity && id;\n    });\n    return identity ? 'none' : transform;\n  }\n\n  observerAdded(count) {\n    if (count == 1) each(this.inputs, input => each(input, value => hasFluidValue(value) && addFluidObserver(value, this)));\n  }\n\n  observerRemoved(count) {\n    if (count == 0) each(this.inputs, input => each(input, value => hasFluidValue(value) && removeFluidObserver(value, this)));\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      this._value = null;\n    }\n\n    callFluidObservers(this, event);\n  }\n\n}\n\nconst primitives = ['a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base', 'bdi', 'bdo', 'big', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'cite', 'code', 'col', 'colgroup', 'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li', 'link', 'main', 'map', 'mark', 'menu', 'menuitem', 'meta', 'meter', 'nav', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'script', 'section', 'select', 'small', 'source', 'span', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr', 'circle', 'clipPath', 'defs', 'ellipse', 'foreignObject', 'g', 'image', 'line', 'linearGradient', 'mask', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'stop', 'svg', 'text', 'tspan'];\n\nconst _excluded = [\"scrollTop\", \"scrollLeft\"];\nGlobals.assign({\n  batchedUpdates: unstable_batchedUpdates,\n  createStringInterpolator,\n  colors\n});\nconst host = createHost(primitives, {\n  applyAnimatedValues,\n  createAnimatedStyle: style => new AnimatedStyle(style),\n  getComponentProps: _ref => {\n    let props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n    return props;\n  }\n});\nconst animated = host.animated;\n\nexport { animated as a, animated };\n","/**\n * External dependencies\n */\nimport { useSpring } from '@react-spring/web';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tuseLayoutEffect,\n\tuseReducer,\n\tuseMemo,\n\tuseRef,\n} from '@wordpress/element';\nimport { useReducedMotion } from '@wordpress/compose';\nimport { getScrollContainer } from '@wordpress/dom';\n\n/**\n * Simple reducer used to increment a counter.\n *\n * @param {number} state Previous counter value.\n * @return {number} New state value.\n */\nconst counterReducer = ( state ) => state + 1;\n\nconst getAbsolutePosition = ( element ) => {\n\treturn {\n\t\ttop: element.offsetTop,\n\t\tleft: element.offsetLeft,\n\t};\n};\n\n/**\n * Hook used to compute the styles required to move a div into a new position.\n *\n * The way this animation works is the following:\n *  - It first renders the element as if there was no animation.\n *  - It takes a snapshot of the position of the block to use it\n *    as a destination point for the animation.\n *  - It restores the element to the previous position using a CSS transform\n *  - It uses the \"resetAnimation\" flag to reset the animation\n *    from the beginning in order to animate to the new destination point.\n *\n * @param {Object}  $1                          Options\n * @param {boolean} $1.isSelected               Whether it's the current block or not.\n * @param {boolean} $1.adjustScrolling          Adjust the scroll position to the current block.\n * @param {boolean} $1.enableAnimation          Enable/Disable animation.\n * @param {*}       $1.triggerAnimationOnChange Variable used to trigger the animation if it changes.\n */\nfunction useMovingAnimation( {\n\tisSelected,\n\tadjustScrolling,\n\tenableAnimation,\n\ttriggerAnimationOnChange,\n} ) {\n\tconst ref = useRef();\n\tconst prefersReducedMotion = useReducedMotion() || ! enableAnimation;\n\tconst [ triggeredAnimation, triggerAnimation ] = useReducer(\n\t\tcounterReducer,\n\t\t0\n\t);\n\tconst [ finishedAnimation, endAnimation ] = useReducer( counterReducer, 0 );\n\tconst [ transform, setTransform ] = useState( { x: 0, y: 0 } );\n\tconst previous = useMemo(\n\t\t() => ( ref.current ? getAbsolutePosition( ref.current ) : null ),\n\t\t[ triggerAnimationOnChange ]\n\t);\n\n\t// Calculate the previous position of the block relative to the viewport and\n\t// return a function to maintain that position by scrolling.\n\tconst preserveScrollPosition = useMemo( () => {\n\t\tif ( ! adjustScrolling || ! ref.current ) {\n\t\t\treturn () => {};\n\t\t}\n\n\t\tconst scrollContainer = getScrollContainer( ref.current );\n\n\t\tif ( ! scrollContainer ) {\n\t\t\treturn () => {};\n\t\t}\n\n\t\tconst prevRect = ref.current.getBoundingClientRect();\n\t\treturn () => {\n\t\t\tconst blockRect = ref.current.getBoundingClientRect();\n\t\t\tconst diff = blockRect.top - prevRect.top;\n\n\t\t\tif ( diff ) {\n\t\t\t\tscrollContainer.scrollTop += diff;\n\t\t\t}\n\t\t};\n\t}, [ triggerAnimationOnChange, adjustScrolling ] );\n\n\tuseLayoutEffect( () => {\n\t\tif ( triggeredAnimation ) {\n\t\t\tendAnimation();\n\t\t}\n\t}, [ triggeredAnimation ] );\n\tuseLayoutEffect( () => {\n\t\tif ( ! previous ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( prefersReducedMotion ) {\n\t\t\t// If the animation is disabled and the scroll needs to be adjusted,\n\t\t\t// just move directly to the final scroll position.\n\t\t\tpreserveScrollPosition();\n\n\t\t\treturn;\n\t\t}\n\n\t\tref.current.style.transform = undefined;\n\t\tconst destination = getAbsolutePosition( ref.current );\n\n\t\ttriggerAnimation();\n\t\tsetTransform( {\n\t\t\tx: Math.round( previous.left - destination.left ),\n\t\t\ty: Math.round( previous.top - destination.top ),\n\t\t} );\n\t}, [ triggerAnimationOnChange ] );\n\n\tfunction onChange( { value } ) {\n\t\tif ( ! ref.current ) {\n\t\t\treturn;\n\t\t}\n\t\tlet { x, y } = value;\n\t\tx = Math.round( x );\n\t\ty = Math.round( y );\n\t\tconst finishedMoving = x === 0 && y === 0;\n\t\tref.current.style.transformOrigin = 'center center';\n\t\tref.current.style.transform = finishedMoving\n\t\t\t? undefined\n\t\t\t: `translate3d(${ x }px,${ y }px,0)`;\n\t\tref.current.style.zIndex = isSelected ? '1' : '';\n\n\t\tpreserveScrollPosition();\n\t}\n\n\tuseSpring( {\n\t\tfrom: {\n\t\t\tx: transform.x,\n\t\t\ty: transform.y,\n\t\t},\n\t\tto: {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t},\n\t\treset: triggeredAnimation !== finishedAnimation,\n\t\tconfig: { mass: 5, tension: 2000, friction: 200 },\n\t\timmediate: prefersReducedMotion,\n\t\tonChange,\n\t} );\n\n\treturn ref;\n}\n\nexport default useMovingAnimation;\n","const BLOCK_SELECTOR = '.block-editor-block-list__block';\nconst APPENDER_SELECTOR = '.block-list-appender';\nconst BLOCK_APPENDER_CLASS = '.block-editor-button-block-appender';\n\n/**\n * Returns true if two elements are contained within the same block.\n *\n * @param {Element} a First element.\n * @param {Element} b Second element.\n *\n * @return {boolean} Whether elements are in the same block.\n */\nexport function isInSameBlock( a, b ) {\n\treturn a.closest( BLOCK_SELECTOR ) === b.closest( BLOCK_SELECTOR );\n}\n\n/**\n * Returns true if an element is considered part of the block and not its inner\n * blocks or appender.\n *\n * @param {Element} blockElement Block container element.\n * @param {Element} element      Element.\n *\n * @return {boolean} Whether an element is considered part of the block and not\n *                   its inner blocks or appender.\n */\nexport function isInsideRootBlock( blockElement, element ) {\n\tconst parentBlock = element.closest(\n\t\t[ BLOCK_SELECTOR, APPENDER_SELECTOR, BLOCK_APPENDER_CLASS ].join( ',' )\n\t);\n\treturn parentBlock === blockElement;\n}\n\n/**\n * Finds the block client ID given any DOM node inside the block.\n *\n * @param {Node?} node DOM node.\n *\n * @return {string|undefined} Client ID or undefined if the node is not part of\n *                            a block.\n */\nexport function getBlockClientId( node ) {\n\twhile ( node && node.nodeType !== node.ELEMENT_NODE ) {\n\t\tnode = node.parentNode;\n\t}\n\n\tif ( ! node ) {\n\t\treturn;\n\t}\n\n\tconst elementNode = /** @type {Element} */ ( node );\n\tconst blockNode = elementNode.closest( BLOCK_SELECTOR );\n\n\tif ( ! blockNode ) {\n\t\treturn;\n\t}\n\n\treturn blockNode.id.slice( 'block-'.length );\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\nimport {\n\tfocus,\n\tisFormElement,\n\tisTextField,\n\tplaceCaretAtHorizontalEdge,\n} from '@wordpress/dom';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { isInsideRootBlock } from '../../../utils/dom';\nimport { store as blockEditorStore } from '../../../store';\n\n/** @typedef {import('@wordpress/element').RefObject} RefObject */\n\n/**\n * Returns the initial position if the block needs to be focussed, `undefined`\n * otherwise. The initial position is either 0 (start) or -1 (end).\n *\n * @param {string} clientId Block client ID.\n *\n * @return {number} The initial position, either 0 (start) or -1 (end).\n */\nfunction useInitialPosition( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t\tisBlockSelected,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tif ( ! isBlockSelected( clientId ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( __unstableGetEditorMode() !== 'edit' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If there's no initial position, return 0 to focus the start.\n\t\t\treturn getSelectedBlocksInitialCaretPosition();\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n\n/**\n * Transitions focus to the block or inner tabbable when the block becomes\n * selected and an initial position is set.\n *\n * @param {string} clientId Block client ID.\n *\n * @return {RefObject} React ref with the block element.\n */\nexport function useFocusFirstElement( clientId ) {\n\tconst ref = useRef();\n\tconst initialPosition = useInitialPosition( clientId );\n\tconst { isBlockSelected, isMultiSelecting } = useSelect( blockEditorStore );\n\n\tuseEffect( () => {\n\t\t// Check if the block is still selected at the time this effect runs.\n\t\tif ( ! isBlockSelected( clientId ) || isMultiSelecting() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( initialPosition === undefined || initialPosition === null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! ref.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { ownerDocument } = ref.current;\n\n\t\t// Do not focus the block if it already contains the active element.\n\t\tif ( isInsideRootBlock( ref.current, ownerDocument.activeElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find all tabbables within node.\n\t\tconst textInputs = focus.tabbable\n\t\t\t.find( ref.current )\n\t\t\t.filter( ( node ) => isTextField( node ) );\n\n\t\t// If reversed (e.g. merge via backspace), use the last in the set of\n\t\t// tabbables.\n\t\tconst isReverse = -1 === initialPosition;\n\t\tconst target =\n\t\t\ttextInputs[ isReverse ? textInputs.length - 1 : 0 ] || ref.current;\n\n\t\tif ( ! isInsideRootBlock( ref.current, target ) ) {\n\t\t\tref.current.focus();\n\t\t\treturn;\n\t\t}\n\n\t\t// Check to see if element is focussable before a generic caret insert.\n\t\tif ( ! ref.current.getAttribute( 'contenteditable' ) ) {\n\t\t\tconst focusElement = focus.tabbable.findNext( ref.current );\n\t\t\t// Make sure focusElement is valid, contained in the same block, and a form field.\n\t\t\tif (\n\t\t\t\tfocusElement &&\n\t\t\t\tisInsideRootBlock( ref.current, focusElement ) &&\n\t\t\t\tisFormElement( focusElement )\n\t\t\t) {\n\t\t\t\tfocusElement.focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tplaceCaretAtHorizontalEdge( target, isReverse );\n\t}, [ initialPosition, clientId ] );\n\n\treturn ref;\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\nfunction listener( event ) {\n\tif ( event.defaultPrevented ) {\n\t\treturn;\n\t}\n\n\tconst action = event.type === 'mouseover' ? 'add' : 'remove';\n\n\tevent.preventDefault();\n\tevent.currentTarget.classList[ action ]( 'is-hovered' );\n}\n\n/**\n * Adds `is-hovered` class when the block is hovered and in navigation or\n * outline mode.\n */\nexport function useIsHovered() {\n\tconst isEnabled = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn getSettings().outlineMode;\n\t}, [] );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( isEnabled ) {\n\t\t\t\tnode.addEventListener( 'mouseout', listener );\n\t\t\t\tnode.addEventListener( 'mouseover', listener );\n\n\t\t\t\treturn () => {\n\t\t\t\t\tnode.removeEventListener( 'mouseout', listener );\n\t\t\t\t\tnode.removeEventListener( 'mouseover', listener );\n\n\t\t\t\t\t// Remove class in case it lingers.\n\t\t\t\t\tnode.classList.remove( 'is-hovered' );\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\t[ isEnabled ]\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { isReusableBlock, getBlockType } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Returns the class names used for the different states of the block.\n *\n * @param {string} clientId The block client ID.\n *\n * @return {string} The class names.\n */\nexport function useBlockClassNames( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tisBlockBeingDragged,\n\t\t\t\tisBlockHighlighted,\n\t\t\t\tisBlockSelected,\n\t\t\t\tisBlockMultiSelected,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetSettings,\n\t\t\t\thasSelectedInnerBlock,\n\t\t\t\tisTyping,\n\t\t\t\t__unstableIsFullySelected,\n\t\t\t\t__unstableSelectionHasUnmergeableBlock,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { outlineMode } = getSettings();\n\t\t\tconst isDragging = isBlockBeingDragged( clientId );\n\t\t\tconst isSelected = isBlockSelected( clientId );\n\t\t\tconst name = getBlockName( clientId );\n\t\t\tconst checkDeep = true;\n\t\t\t// \"ancestor\" is the more appropriate label due to \"deep\" check.\n\t\t\tconst isAncestorOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\t\tclientId,\n\t\t\t\tcheckDeep\n\t\t\t);\n\t\t\tconst isMultiSelected = isBlockMultiSelected( clientId );\n\t\t\treturn classnames( {\n\t\t\t\t'is-selected': isSelected,\n\t\t\t\t'is-highlighted': isBlockHighlighted( clientId ),\n\t\t\t\t'is-multi-selected': isMultiSelected,\n\t\t\t\t'is-partially-selected':\n\t\t\t\t\tisMultiSelected &&\n\t\t\t\t\t! __unstableIsFullySelected() &&\n\t\t\t\t\t! __unstableSelectionHasUnmergeableBlock(),\n\t\t\t\t'is-reusable': isReusableBlock( getBlockType( name ) ),\n\t\t\t\t'is-dragging': isDragging,\n\t\t\t\t'has-child-selected': isAncestorOfSelectedBlock,\n\t\t\t\t'remove-outline': isSelected && outlineMode && isTyping(),\n\t\t\t} );\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { getBlockType, getBlockDefaultClassName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Returns the default class name if the block is a light block and it supports\n * `className`.\n *\n * @param {string} clientId The block client ID.\n *\n * @return {string} The class name, e.g. `wp-block-paragraph`.\n */\nexport function useBlockDefaultClassName( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst name = select( blockEditorStore ).getBlockName( clientId );\n\t\t\tconst blockType = getBlockType( name );\n\t\t\tconst hasLightBlockWrapper = blockType?.apiVersion > 1;\n\n\t\t\tif ( ! hasLightBlockWrapper ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn getBlockDefaultClassName( name );\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { getBlockType } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Returns the custom class name if the block is a light block.\n *\n * @param {string} clientId The block client ID.\n *\n * @return {string} The custom class name.\n */\nexport function useBlockCustomClassName( clientId ) {\n\t// It's good for this to be a separate selector because it will be executed\n\t// on every attribute change, while the other selectors are not re-evaluated\n\t// as much.\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockName, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\n\t\t\tif ( ! attributes?.className ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst blockType = getBlockType( getBlockName( clientId ) );\n\t\t\tconst hasLightBlockWrapper = blockType?.apiVersion > 1;\n\n\t\t\tif ( ! hasLightBlockWrapper ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn attributes.className;\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Returns the class names used for block moving mode.\n *\n * @param {string} clientId The block client ID to insert above.\n *\n * @return {string} The class names.\n */\nexport function useBlockMovingModeClassNames( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\thasBlockMovingClientId,\n\t\t\t\tcanInsertBlockType,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tisBlockSelected,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\t// The classes are only relevant for the selected block. Avoid\n\t\t\t// re-rendering all blocks!\n\t\t\tif ( ! isBlockSelected( clientId ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst movingClientId = hasBlockMovingClientId();\n\n\t\t\tif ( ! movingClientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn classnames( 'is-block-moving-mode', {\n\t\t\t\t'can-insert-moving-block': canInsertBlockType(\n\t\t\t\t\tgetBlockName( movingClientId ),\n\t\t\t\t\tgetBlockRootClientId( clientId )\n\t\t\t\t),\n\t\t\t} );\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { isInsideRootBlock } from '../../../utils/dom';\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Selects the block if it receives focus.\n *\n * @param {string} clientId Block client ID.\n */\nexport function useFocusHandler( clientId ) {\n\tconst { isBlockSelected } = useSelect( blockEditorStore );\n\tconst { selectBlock, selectionChange } = useDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\t/**\n\t\t\t * Marks the block as selected when focused and not already\n\t\t\t * selected. This specifically handles the case where block does not\n\t\t\t * set focus on its own (via `setFocus`), typically if there is no\n\t\t\t * focusable input in the block.\n\t\t\t *\n\t\t\t * @param {FocusEvent} event Focus event.\n\t\t\t */\n\t\t\tfunction onFocus( event ) {\n\t\t\t\t// When the whole editor is editable, let writing flow handle\n\t\t\t\t// selection.\n\t\t\t\tif (\n\t\t\t\t\tnode.parentElement.closest( '[contenteditable=\"true\"]' )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Check synchronously because a non-selected block might be\n\t\t\t\t// getting data through `useSelect` asynchronously.\n\t\t\t\tif ( isBlockSelected( clientId ) ) {\n\t\t\t\t\t// Potentially change selection away from rich text.\n\t\t\t\t\tif ( ! event.target.isContentEditable ) {\n\t\t\t\t\t\tselectionChange( clientId );\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// If an inner block is focussed, that block is resposible for\n\t\t\t\t// setting the selected block.\n\t\t\t\tif ( ! isInsideRootBlock( node, event.target ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tselectBlock( clientId );\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'focusin', onFocus );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'focusin', onFocus );\n\t\t\t};\n\t\t},\n\t\t[ isBlockSelected, selectBlock ]\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"keycodes\"];","/**\n * WordPress dependencies\n */\nimport { isTextField } from '@wordpress/dom';\nimport { ENTER, BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Adds block behaviour:\n *   - Removes the block on BACKSPACE.\n *   - Inserts a default block on ENTER.\n *   - Disables dragging of block contents.\n *\n * @param {string} clientId Block client ID.\n */\nexport function useEventHandlers( clientId ) {\n\tconst isSelected = useSelect(\n\t\t( select ) => select( blockEditorStore ).isBlockSelected( clientId ),\n\t\t[ clientId ]\n\t);\n\tconst { getBlockRootClientId, getBlockIndex } =\n\t\tuseSelect( blockEditorStore );\n\tconst { insertDefaultBlock, removeBlock } = useDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! isSelected ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Interprets keydown event intent to remove or insert after block if\n\t\t\t * key event occurs on wrapper node. This can occur when the block has\n\t\t\t * no text fields of its own, particularly after initial insertion, to\n\t\t\t * allow for easy deletion and continuous writing flow to add additional\n\t\t\t * content.\n\t\t\t *\n\t\t\t * @param {KeyboardEvent} event Keydown event.\n\t\t\t */\n\t\t\tfunction onKeyDown( event ) {\n\t\t\t\tconst { keyCode, target } = event;\n\n\t\t\t\tif (\n\t\t\t\t\tkeyCode !== ENTER &&\n\t\t\t\t\tkeyCode !== BACKSPACE &&\n\t\t\t\t\tkeyCode !== DELETE\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( target !== node || isTextField( target ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif ( keyCode === ENTER ) {\n\t\t\t\t\tinsertDefaultBlock(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tgetBlockRootClientId( clientId ),\n\t\t\t\t\t\tgetBlockIndex( clientId ) + 1\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tremoveBlock( clientId );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Prevents default dragging behavior within a block. To do: we must\n\t\t\t * handle this in the future and clean up the drag target.\n\t\t\t *\n\t\t\t * @param {DragEvent} event Drag event.\n\t\t\t */\n\t\t\tfunction onDragStart( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\t\tnode.addEventListener( 'dragstart', onDragStart );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t\t\tnode.removeEventListener( 'dragstart', onDragStart );\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tclientId,\n\t\t\tisSelected,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockIndex,\n\t\t\tinsertDefaultBlock,\n\t\t\tremoveBlock,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Allows navigation mode to be exited by clicking in the selected block.\n *\n * @param {string} clientId Block client ID.\n */\nexport function useNavModeExit( clientId ) {\n\tconst { isNavigationMode, isBlockSelected } = useSelect( blockEditorStore );\n\tconst { setNavigationMode, selectBlock } = useDispatch( blockEditorStore );\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tfunction onMouseDown( event ) {\n\t\t\t\t// Don't select a block if it's already handled by a child\n\t\t\t\t// block.\n\t\t\t\tif ( isNavigationMode() && ! event.defaultPrevented ) {\n\t\t\t\t\t// Prevent focus from moving to the block.\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t// When clicking on a selected block, exit navigation mode.\n\t\t\t\t\tif ( isBlockSelected( clientId ) ) {\n\t\t\t\t\t\tsetNavigationMode( false );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselectBlock( clientId );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\n\t\t\treturn () => {\n\t\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\t\t\t};\n\t\t},\n\t\t[ clientId, isNavigationMode, isBlockSelected, setNavigationMode ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { createContext, useMemo } from '@wordpress/element';\n\nexport const BlockRefs = createContext( {\n\trefs: new Map(),\n\tcallbacks: new Map(),\n} );\n\nexport function BlockRefsProvider( { children } ) {\n\tconst value = useMemo(\n\t\t() => ( { refs: new Map(), callbacks: new Map() } ),\n\t\t[]\n\t);\n\treturn (\n\t\t<BlockRefs.Provider value={ value }>{ children }</BlockRefs.Provider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tuseContext,\n\tuseLayoutEffect,\n\tuseMemo,\n\tuseRef,\n\tuseState,\n} from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { BlockRefs } from '../../provider/block-refs-provider';\n\n/** @typedef {import('@wordpress/element').RefCallback} RefCallback */\n/** @typedef {import('@wordpress/element').RefObject} RefObject */\n\n/**\n * Provides a ref to the BlockRefs context.\n *\n * @param {string} clientId The client ID of the element ref.\n *\n * @return {RefCallback} Ref callback.\n */\nexport function useBlockRefProvider( clientId ) {\n\tconst { refs, callbacks } = useContext( BlockRefs );\n\tconst ref = useRef();\n\tuseLayoutEffect( () => {\n\t\trefs.set( ref, clientId );\n\t\treturn () => {\n\t\t\trefs.delete( ref );\n\t\t};\n\t}, [ clientId ] );\n\treturn useRefEffect(\n\t\t( element ) => {\n\t\t\t// Update the ref in the provider.\n\t\t\tref.current = element;\n\t\t\t// Call any update functions.\n\t\t\tcallbacks.forEach( ( id, setElement ) => {\n\t\t\t\tif ( clientId === id ) {\n\t\t\t\t\tsetElement( element );\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n\n/**\n * Gets a ref pointing to the current block element. Continues to return a\n * stable ref even if the block client ID changes.\n *\n * @param {string} clientId The client ID to get a ref for.\n *\n * @return {RefObject} A ref containing the element.\n */\nfunction useBlockRef( clientId ) {\n\tconst { refs } = useContext( BlockRefs );\n\tconst freshClientId = useRef();\n\tfreshClientId.current = clientId;\n\t// Always return an object, even if no ref exists for a given client ID, so\n\t// that `current` works at a later point.\n\treturn useMemo(\n\t\t() => ( {\n\t\t\tget current() {\n\t\t\t\tlet element = null;\n\n\t\t\t\t// Multiple refs may be created for a single block. Find the\n\t\t\t\t// first that has an element set.\n\t\t\t\tfor ( const [ ref, id ] of refs.entries() ) {\n\t\t\t\t\tif ( id === freshClientId.current && ref.current ) {\n\t\t\t\t\t\telement = ref.current;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn element;\n\t\t\t},\n\t\t} ),\n\t\t[]\n\t);\n}\n\n/**\n * Return the element for a given client ID. Updates whenever the element\n * changes, becomes available, or disappears.\n *\n * @param {string} clientId The client ID to an element for.\n *\n * @return {Element|null} The block's wrapper element.\n */\nfunction useBlockElement( clientId ) {\n\tconst { callbacks } = useContext( BlockRefs );\n\tconst ref = useBlockRef( clientId );\n\tconst [ element, setElement ] = useState( null );\n\n\tuseLayoutEffect( () => {\n\t\tif ( ! clientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcallbacks.set( setElement, clientId );\n\t\treturn () => {\n\t\t\tcallbacks.delete( setElement );\n\t\t};\n\t}, [ clientId ] );\n\n\treturn ref.current || element;\n}\n\nexport { useBlockRef as __unstableUseBlockRef };\nexport { useBlockElement as __unstableUseBlockElement };\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { IntersectionObserver } from '../';\n\nexport function useIntersectionObserver() {\n\tconst observer = useContext( IntersectionObserver );\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( observer ) {\n\t\t\t\tobserver.observe( node );\n\t\t\t\treturn () => {\n\t\t\t\t\tobserver.unobserve( node );\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\t[ observer ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function useBlockOverlayActive( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst { __unstableHasActiveBlockOverlayActive } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\treturn __unstableHasActiveBlockOverlayActive( clientId );\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useContext } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\t__unstableGetBlockProps as getBlockProps,\n\tgetBlockType,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useMergeRefs, useDisabled } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport warning from '@wordpress/warning';\n\n/**\n * Internal dependencies\n */\nimport useMovingAnimation from '../../use-moving-animation';\nimport { BlockListBlockContext } from '../block-list-block-context';\nimport { useFocusFirstElement } from './use-focus-first-element';\nimport { useIsHovered } from './use-is-hovered';\nimport { useBlockEditContext } from '../../block-edit/context';\nimport { useBlockClassNames } from './use-block-class-names';\nimport { useBlockDefaultClassName } from './use-block-default-class-name';\nimport { useBlockCustomClassName } from './use-block-custom-class-name';\nimport { useBlockMovingModeClassNames } from './use-block-moving-mode-class-names';\nimport { useFocusHandler } from './use-focus-handler';\nimport { useEventHandlers } from './use-selected-block-event-handlers';\nimport { useNavModeExit } from './use-nav-mode-exit';\nimport { useBlockRefProvider } from './use-block-refs';\nimport { useIntersectionObserver } from './use-intersection-observer';\nimport { store as blockEditorStore } from '../../../store';\nimport useBlockOverlayActive from '../../block-content-overlay';\nimport { unlock } from '../../../lock-unlock';\n\n/**\n * If the block count exceeds the threshold, we disable the reordering animation\n * to avoid laginess.\n */\nconst BLOCK_ANIMATION_THRESHOLD = 200;\n\n/**\n * This hook is used to lightly mark an element as a block element. The element\n * should be the outermost element of a block. Call this hook and pass the\n * returned props to the element to mark as a block. If you define a ref for the\n * element, it is important to pass the ref to this hook, which the hook in turn\n * will pass to the component through the props it returns. Optionally, you can\n * also pass any other props through this hook, and they will be merged and\n * returned.\n *\n * @param {Object}  props                    Optional. Props to pass to the element. Must contain\n *                                           the ref if one is defined.\n * @param {Object}  options                  Options for internal use only.\n * @param {boolean} options.__unstableIsHtml\n *\n * @return {Object} Props to pass to the element to mark as a block.\n */\nexport function useBlockProps( props = {}, { __unstableIsHtml } = {} ) {\n\tconst {\n\t\tclientId,\n\t\tclassName,\n\t\twrapperProps = {},\n\t\tisAligned,\n\t} = useContext( BlockListBlockContext );\n\tconst {\n\t\tindex,\n\t\tmode,\n\t\tname,\n\t\tblockApiVersion,\n\t\tblockTitle,\n\t\tisPartOfSelection,\n\t\tadjustScrolling,\n\t\tenableAnimation,\n\t\tisSubtreeDisabled,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockMode,\n\t\t\t\tgetBlockName,\n\t\t\t\tisTyping,\n\t\t\t\tgetGlobalBlockCount,\n\t\t\t\tisBlockSelected,\n\t\t\t\tisBlockMultiSelected,\n\t\t\t\tisAncestorMultiSelected,\n\t\t\t\tisFirstMultiSelectedBlock,\n\t\t\t\tisBlockSubtreeDisabled,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\t\t\tconst { getActiveBlockVariation } = select( blocksStore );\n\t\t\tconst isSelected = isBlockSelected( clientId );\n\t\t\tconst isPartOfMultiSelection =\n\t\t\t\tisBlockMultiSelected( clientId ) ||\n\t\t\t\tisAncestorMultiSelected( clientId );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst blockType = getBlockType( blockName );\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\n\n\t\t\treturn {\n\t\t\t\tindex: getBlockIndex( clientId ),\n\t\t\t\tmode: getBlockMode( clientId ),\n\t\t\t\tname: blockName,\n\t\t\t\tblockApiVersion: blockType?.apiVersion || 1,\n\t\t\t\tblockTitle: match?.title || blockType?.title,\n\t\t\t\tisPartOfSelection: isSelected || isPartOfMultiSelection,\n\t\t\t\tadjustScrolling:\n\t\t\t\t\tisSelected || isFirstMultiSelectedBlock( clientId ),\n\t\t\t\tenableAnimation:\n\t\t\t\t\t! isTyping() &&\n\t\t\t\t\tgetGlobalBlockCount() <= BLOCK_ANIMATION_THRESHOLD,\n\t\t\t\tisSubtreeDisabled: isBlockSubtreeDisabled( clientId ),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst hasOverlay = useBlockOverlayActive( clientId );\n\n\t// translators: %s: Type of block (i.e. Text, Image etc)\n\tconst blockLabel = sprintf( __( 'Block: %s' ), blockTitle );\n\tconst htmlSuffix = mode === 'html' && ! __unstableIsHtml ? '-visual' : '';\n\tconst mergedRefs = useMergeRefs( [\n\t\tprops.ref,\n\t\tuseFocusFirstElement( clientId ),\n\t\tuseBlockRefProvider( clientId ),\n\t\tuseFocusHandler( clientId ),\n\t\tuseEventHandlers( clientId ),\n\t\tuseNavModeExit( clientId ),\n\t\tuseIsHovered(),\n\t\tuseIntersectionObserver(),\n\t\tuseMovingAnimation( {\n\t\t\tisSelected: isPartOfSelection,\n\t\t\tadjustScrolling,\n\t\t\tenableAnimation,\n\t\t\ttriggerAnimationOnChange: index,\n\t\t} ),\n\t\tuseDisabled( { isDisabled: ! hasOverlay } ),\n\t] );\n\n\tconst blockEditContext = useBlockEditContext();\n\t// Ensures it warns only inside the `edit` implementation for the block.\n\tif ( blockApiVersion < 2 && clientId === blockEditContext.clientId ) {\n\t\twarning(\n\t\t\t`Block type \"${ name }\" must support API version 2 or higher to work correctly with \"useBlockProps\" method.`\n\t\t);\n\t}\n\n\treturn {\n\t\ttabIndex: 0,\n\t\t...wrapperProps,\n\t\t...props,\n\t\tref: mergedRefs,\n\t\tid: `block-${ clientId }${ htmlSuffix }`,\n\t\trole: 'document',\n\t\t'aria-label': blockLabel,\n\t\t'data-block': clientId,\n\t\t'data-type': name,\n\t\t'data-title': blockTitle,\n\t\tinert: isSubtreeDisabled ? 'true' : undefined,\n\t\tclassName: classnames(\n\t\t\t// The wp-block className is important for editor styles.\n\t\t\tclassnames( 'block-editor-block-list__block', {\n\t\t\t\t'wp-block': ! isAligned,\n\t\t\t\t'has-block-overlay': hasOverlay,\n\t\t\t} ),\n\t\t\tclassName,\n\t\t\tprops.className,\n\t\t\twrapperProps.className,\n\t\t\tuseBlockClassNames( clientId ),\n\t\t\tuseBlockDefaultClassName( clientId ),\n\t\t\tuseBlockCustomClassName( clientId ),\n\t\t\tuseBlockMovingModeClassNames( clientId )\n\t\t),\n\t\tstyle: { ...wrapperProps.style, ...props.style },\n\t};\n}\n\n/**\n * Call within a save function to get the props for the block wrapper.\n *\n * @param {Object} props Optional. Props to pass to the element.\n */\nuseBlockProps.save = getBlockProps;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo, useCallback, RawHTML } from '@wordpress/element';\nimport {\n\tgetBlockType,\n\tgetSaveContent,\n\tisUnmodifiedDefaultBlock,\n\tserializeRawBlock,\n\tswitchToBlockType,\n\tgetDefaultBlockName,\n\tisUnmodifiedBlock,\n} from '@wordpress/blocks';\nimport { withFilters } from '@wordpress/components';\nimport {\n\twithDispatch,\n\twithSelect,\n\tuseDispatch,\n\tuseSelect,\n} from '@wordpress/data';\nimport { compose, pure, ifCondition } from '@wordpress/compose';\nimport { safeHTML } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport BlockEdit from '../block-edit';\nimport BlockInvalidWarning from './block-invalid-warning';\nimport BlockCrashWarning from './block-crash-warning';\nimport BlockCrashBoundary from './block-crash-boundary';\nimport BlockHtml from './block-html';\nimport { useBlockProps } from './use-block-props';\nimport { store as blockEditorStore } from '../../store';\nimport { useLayout } from './layout';\nimport { unlock } from '../../lock-unlock';\nimport { BlockListBlockContext } from './block-list-block-context';\n\n/**\n * Merges wrapper props with special handling for classNames and styles.\n *\n * @param {Object} propsA\n * @param {Object} propsB\n *\n * @return {Object} Merged props.\n */\nfunction mergeWrapperProps( propsA, propsB ) {\n\tconst newProps = {\n\t\t...propsA,\n\t\t...propsB,\n\t};\n\n\tif ( propsA?.className && propsB?.className ) {\n\t\tnewProps.className = classnames( propsA.className, propsB.className );\n\t}\n\tif ( propsA?.style && propsB?.style ) {\n\t\tnewProps.style = { ...propsA.style, ...propsB.style };\n\t}\n\n\treturn newProps;\n}\n\nfunction Block( { children, isHtml, ...props } ) {\n\treturn (\n\t\t<div { ...useBlockProps( props, { __unstableIsHtml: isHtml } ) }>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n\nfunction BlockListBlock( {\n\tblock: { __unstableBlockSource },\n\tmode,\n\tisLocked,\n\tcanRemove,\n\tclientId,\n\tisSelected,\n\tisSelectionEnabled,\n\tclassName,\n\t__unstableLayoutClassNames: layoutClassNames,\n\tname,\n\tisValid,\n\tattributes,\n\twrapperProps,\n\tsetAttributes,\n\tonReplace,\n\tonInsertBlocksAfter,\n\tonMerge,\n\ttoggleSelection,\n} ) {\n\tconst {\n\t\tthemeSupportsLayout,\n\t\tisTemporarilyEditingAsBlocks,\n\t\tblockEditingMode,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetSettings,\n\t\t\t\t__unstableGetTemporarilyEditingAsBlocks,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\t\t\treturn {\n\t\t\t\tthemeSupportsLayout: getSettings().supportsLayout,\n\t\t\t\tisTemporarilyEditingAsBlocks:\n\t\t\t\t\t__unstableGetTemporarilyEditingAsBlocks() === clientId,\n\t\t\t\tblockEditingMode: getBlockEditingMode( clientId ),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { removeBlock } = useDispatch( blockEditorStore );\n\tconst onRemove = useCallback( () => removeBlock( clientId ), [ clientId ] );\n\n\tconst parentLayout = useLayout() || {};\n\n\t// We wrap the BlockEdit component in a div that hides it when editing in\n\t// HTML mode. This allows us to render all of the ancillary pieces\n\t// (InspectorControls, etc.) which are inside `BlockEdit` but not\n\t// `BlockHTML`, even in HTML mode.\n\tlet blockEdit = (\n\t\t<BlockEdit\n\t\t\tname={ name }\n\t\t\tisSelected={ isSelected }\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tinsertBlocksAfter={ isLocked ? undefined : onInsertBlocksAfter }\n\t\t\tonReplace={ canRemove ? onReplace : undefined }\n\t\t\tonRemove={ canRemove ? onRemove : undefined }\n\t\t\tmergeBlocks={ canRemove ? onMerge : undefined }\n\t\t\tclientId={ clientId }\n\t\t\tisSelectionEnabled={ isSelectionEnabled }\n\t\t\ttoggleSelection={ toggleSelection }\n\t\t\t__unstableLayoutClassNames={ layoutClassNames }\n\t\t\t__unstableParentLayout={\n\t\t\t\tObject.keys( parentLayout ).length ? parentLayout : undefined\n\t\t\t}\n\t\t/>\n\t);\n\n\tconst blockType = getBlockType( name );\n\n\tif ( blockEditingMode === 'disabled' ) {\n\t\twrapperProps = {\n\t\t\t...wrapperProps,\n\t\t\ttabIndex: -1,\n\t\t};\n\t}\n\t// Determine whether the block has props to apply to the wrapper.\n\tif ( blockType?.getEditWrapperProps ) {\n\t\twrapperProps = mergeWrapperProps(\n\t\t\twrapperProps,\n\t\t\tblockType.getEditWrapperProps( attributes )\n\t\t);\n\t}\n\n\tconst isAligned =\n\t\twrapperProps &&\n\t\t!! wrapperProps[ 'data-align' ] &&\n\t\t! themeSupportsLayout;\n\n\t// For aligned blocks, provide a wrapper element so the block can be\n\t// positioned relative to the block column.\n\t// This is only kept for classic themes that don't support layout\n\t// Historically we used to rely on extra divs and data-align to\n\t// provide the alignments styles in the editor.\n\t// Due to the differences between frontend and backend, we migrated\n\t// to the layout feature, and we're now aligning the markup of frontend\n\t// and backend.\n\tif ( isAligned ) {\n\t\tblockEdit = (\n\t\t\t<div\n\t\t\t\tclassName=\"wp-block\"\n\t\t\t\tdata-align={ wrapperProps[ 'data-align' ] }\n\t\t\t>\n\t\t\t\t{ blockEdit }\n\t\t\t</div>\n\t\t);\n\t}\n\n\tlet block;\n\n\tif ( ! isValid ) {\n\t\tconst saveContent = __unstableBlockSource\n\t\t\t? serializeRawBlock( __unstableBlockSource )\n\t\t\t: getSaveContent( blockType, attributes );\n\n\t\tblock = (\n\t\t\t<Block className=\"has-warning\">\n\t\t\t\t<BlockInvalidWarning clientId={ clientId } />\n\t\t\t\t<RawHTML>{ safeHTML( saveContent ) }</RawHTML>\n\t\t\t</Block>\n\t\t);\n\t} else if ( mode === 'html' ) {\n\t\t// Render blockEdit so the inspector controls don't disappear.\n\t\t// See #8969.\n\t\tblock = (\n\t\t\t<>\n\t\t\t\t<div style={ { display: 'none' } }>{ blockEdit }</div>\n\t\t\t\t<Block isHtml>\n\t\t\t\t\t<BlockHtml clientId={ clientId } />\n\t\t\t\t</Block>\n\t\t\t</>\n\t\t);\n\t} else if ( blockType?.apiVersion > 1 ) {\n\t\tblock = blockEdit;\n\t} else {\n\t\tblock = <Block { ...wrapperProps }>{ blockEdit }</Block>;\n\t}\n\n\tconst { 'data-align': dataAlign, ...restWrapperProps } = wrapperProps ?? {};\n\n\tconst value = {\n\t\tclientId,\n\t\tclassName: classnames(\n\t\t\t{\n\t\t\t\t'is-editing-disabled': blockEditingMode === 'disabled',\n\t\t\t\t'is-content-locked-temporarily-editing-as-blocks':\n\t\t\t\t\tisTemporarilyEditingAsBlocks,\n\t\t\t},\n\t\t\tdataAlign && themeSupportsLayout && `align${ dataAlign }`,\n\t\t\tclassName\n\t\t),\n\t\twrapperProps: restWrapperProps,\n\t\tisAligned,\n\t};\n\n\tconst memoizedValue = useMemo( () => value, Object.values( value ) );\n\n\treturn (\n\t\t<BlockListBlockContext.Provider value={ memoizedValue }>\n\t\t\t<BlockCrashBoundary\n\t\t\t\tfallback={\n\t\t\t\t\t<Block className=\"has-warning\">\n\t\t\t\t\t\t<BlockCrashWarning />\n\t\t\t\t\t</Block>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ block }\n\t\t\t</BlockCrashBoundary>\n\t\t</BlockListBlockContext.Provider>\n\t);\n}\n\nconst applyWithSelect = withSelect( ( select, { clientId, rootClientId } ) => {\n\tconst {\n\t\tisBlockSelected,\n\t\tgetBlockMode,\n\t\tisSelectionEnabled,\n\t\tgetTemplateLock,\n\t\t__unstableGetBlockWithoutInnerBlocks,\n\t\tcanRemoveBlock,\n\t\tcanMoveBlock,\n\t} = select( blockEditorStore );\n\tconst block = __unstableGetBlockWithoutInnerBlocks( clientId );\n\tconst isSelected = isBlockSelected( clientId );\n\tconst templateLock = getTemplateLock( rootClientId );\n\tconst canRemove = canRemoveBlock( clientId, rootClientId );\n\tconst canMove = canMoveBlock( clientId, rootClientId );\n\n\t// The fallback to `{}` is a temporary fix.\n\t// This function should never be called when a block is not present in\n\t// the state. It happens now because the order in withSelect rendering\n\t// is not correct.\n\tconst { name, attributes, isValid } = block || {};\n\n\t// Do not add new properties here, use `useSelect` instead to avoid\n\t// leaking new props to the public API (editor.BlockListBlock filter).\n\treturn {\n\t\tmode: getBlockMode( clientId ),\n\t\tisSelectionEnabled: isSelectionEnabled(),\n\t\tisLocked: !! templateLock,\n\t\tcanRemove,\n\t\tcanMove,\n\t\t// Users of the editor.BlockListBlock filter used to be able to\n\t\t// access the block prop.\n\t\t// Ideally these blocks would rely on the clientId prop only.\n\t\t// This is kept for backward compatibility reasons.\n\t\tblock,\n\t\tname,\n\t\tattributes,\n\t\tisValid,\n\t\tisSelected,\n\t};\n} );\n\nconst applyWithDispatch = withDispatch( ( dispatch, ownProps, registry ) => {\n\tconst {\n\t\tupdateBlockAttributes,\n\t\tinsertBlocks,\n\t\tmergeBlocks,\n\t\treplaceBlocks,\n\t\ttoggleSelection,\n\t\t__unstableMarkLastChangeAsPersistent,\n\t\tmoveBlocksToPosition,\n\t\tremoveBlock,\n\t} = dispatch( blockEditorStore );\n\n\t// Do not add new properties here, use `useDispatch` instead to avoid\n\t// leaking new props to the public API (editor.BlockListBlock filter).\n\treturn {\n\t\tsetAttributes( newAttributes ) {\n\t\t\tconst { getMultiSelectedBlockClientIds } =\n\t\t\t\tregistry.select( blockEditorStore );\n\t\t\tconst multiSelectedBlockClientIds =\n\t\t\t\tgetMultiSelectedBlockClientIds();\n\t\t\tconst { clientId } = ownProps;\n\t\t\tconst clientIds = multiSelectedBlockClientIds.length\n\t\t\t\t? multiSelectedBlockClientIds\n\t\t\t\t: [ clientId ];\n\n\t\t\tupdateBlockAttributes( clientIds, newAttributes );\n\t\t},\n\t\tonInsertBlocks( blocks, index ) {\n\t\t\tconst { rootClientId } = ownProps;\n\t\t\tinsertBlocks( blocks, index, rootClientId );\n\t\t},\n\t\tonInsertBlocksAfter( blocks ) {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst { getBlockIndex } = registry.select( blockEditorStore );\n\t\t\tconst index = getBlockIndex( clientId );\n\t\t\tinsertBlocks( blocks, index + 1, rootClientId );\n\t\t},\n\t\tonMerge( forward ) {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst {\n\t\t\t\tgetPreviousBlockClientId,\n\t\t\t\tgetNextBlockClientId,\n\t\t\t\tgetBlock,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tcanInsertBlockType,\n\t\t\t} = registry.select( blockEditorStore );\n\n\t\t\t/**\n\t\t\t * Moves the block with clientId up one level. If the block type\n\t\t\t * cannot be inserted at the new location, it will be attempted to\n\t\t\t * convert to the default block type.\n\t\t\t *\n\t\t\t * @param {string}  _clientId       The block to move.\n\t\t\t * @param {boolean} changeSelection Whether to change the selection\n\t\t\t *                                  to the moved block.\n\t\t\t */\n\t\t\tfunction moveFirstItemUp( _clientId, changeSelection = true ) {\n\t\t\t\tconst targetRootClientId = getBlockRootClientId( _clientId );\n\t\t\t\tconst blockOrder = getBlockOrder( _clientId );\n\t\t\t\tconst [ firstClientId ] = blockOrder;\n\n\t\t\t\tif (\n\t\t\t\t\tblockOrder.length === 1 &&\n\t\t\t\t\tisUnmodifiedBlock( getBlock( firstClientId ) )\n\t\t\t\t) {\n\t\t\t\t\tremoveBlock( _clientId );\n\t\t\t\t} else {\n\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tcanInsertBlockType(\n\t\t\t\t\t\t\t\tgetBlockName( firstClientId ),\n\t\t\t\t\t\t\t\ttargetRootClientId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t[ firstClientId ],\n\t\t\t\t\t\t\t\t_clientId,\n\t\t\t\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\t\t\t\tgetBlockIndex( _clientId )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst replacement = switchToBlockType(\n\t\t\t\t\t\t\t\tgetBlock( firstClientId ),\n\t\t\t\t\t\t\t\tgetDefaultBlockName()\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif ( replacement && replacement.length ) {\n\t\t\t\t\t\t\t\tinsertBlocks(\n\t\t\t\t\t\t\t\t\treplacement,\n\t\t\t\t\t\t\t\t\tgetBlockIndex( _clientId ),\n\t\t\t\t\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\t\t\t\t\tchangeSelection\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tremoveBlock( firstClientId, false );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t! getBlockOrder( _clientId ).length &&\n\t\t\t\t\t\t\tisUnmodifiedBlock( getBlock( _clientId ) )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tremoveBlock( _clientId, false );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// For `Delete` or forward merge, we should do the exact same thing\n\t\t\t// as `Backspace`, but from the other block.\n\t\t\tif ( forward ) {\n\t\t\t\tif ( rootClientId ) {\n\t\t\t\t\tconst nextRootClientId =\n\t\t\t\t\t\tgetNextBlockClientId( rootClientId );\n\n\t\t\t\t\tif ( nextRootClientId ) {\n\t\t\t\t\t\t// If there is a block that follows with the same parent\n\t\t\t\t\t\t// block name and the same attributes, merge the inner\n\t\t\t\t\t\t// blocks.\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tgetBlockName( rootClientId ) ===\n\t\t\t\t\t\t\tgetBlockName( nextRootClientId )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst rootAttributes =\n\t\t\t\t\t\t\t\tgetBlockAttributes( rootClientId );\n\t\t\t\t\t\t\tconst previousRootAttributes =\n\t\t\t\t\t\t\t\tgetBlockAttributes( nextRootClientId );\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tObject.keys( rootAttributes ).every(\n\t\t\t\t\t\t\t\t\t( key ) =>\n\t\t\t\t\t\t\t\t\t\trootAttributes[ key ] ===\n\t\t\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t\t\tgetBlockOrder( nextRootClientId ),\n\t\t\t\t\t\t\t\t\t\tnextRootClientId,\n\t\t\t\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tremoveBlock( nextRootClientId, false );\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmergeBlocks( rootClientId, nextRootClientId );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\n\n\t\t\t\tif ( ! nextBlockClientId ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( getBlockOrder( nextBlockClientId ).length ) {\n\t\t\t\t\tmoveFirstItemUp( nextBlockClientId, false );\n\t\t\t\t} else {\n\t\t\t\t\tmergeBlocks( clientId, nextBlockClientId );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst previousBlockClientId =\n\t\t\t\t\tgetPreviousBlockClientId( clientId );\n\n\t\t\t\tif ( previousBlockClientId ) {\n\t\t\t\t\tmergeBlocks( previousBlockClientId, clientId );\n\t\t\t\t} else if ( rootClientId ) {\n\t\t\t\t\tconst previousRootClientId =\n\t\t\t\t\t\tgetPreviousBlockClientId( rootClientId );\n\n\t\t\t\t\t// If there is a preceding block with the same parent block\n\t\t\t\t\t// name and the same attributes, merge the inner blocks.\n\t\t\t\t\tif (\n\t\t\t\t\t\tpreviousRootClientId &&\n\t\t\t\t\t\tgetBlockName( rootClientId ) ===\n\t\t\t\t\t\t\tgetBlockName( previousRootClientId )\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst rootAttributes =\n\t\t\t\t\t\t\tgetBlockAttributes( rootClientId );\n\t\t\t\t\t\tconst previousRootAttributes =\n\t\t\t\t\t\t\tgetBlockAttributes( previousRootClientId );\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tObject.keys( rootAttributes ).every(\n\t\t\t\t\t\t\t\t( key ) =>\n\t\t\t\t\t\t\t\t\trootAttributes[ key ] ===\n\t\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t\tgetBlockOrder( rootClientId ),\n\t\t\t\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\t\t\t\tpreviousRootClientId\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tremoveBlock( rootClientId, false );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tmoveFirstItemUp( rootClientId );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonReplace( blocks, indexToSelect, initialPosition ) {\n\t\t\tif (\n\t\t\t\tblocks.length &&\n\t\t\t\t! isUnmodifiedDefaultBlock( blocks[ blocks.length - 1 ] )\n\t\t\t) {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t}\n\t\t\treplaceBlocks(\n\t\t\t\t[ ownProps.clientId ],\n\t\t\t\tblocks,\n\t\t\t\tindexToSelect,\n\t\t\t\tinitialPosition\n\t\t\t);\n\t\t},\n\t\ttoggleSelection( selectionEnabled ) {\n\t\t\ttoggleSelection( selectionEnabled );\n\t\t},\n\t};\n} );\n\nexport default compose(\n\tpure,\n\tapplyWithSelect,\n\tapplyWithDispatch,\n\t// Block is sometimes not mounted at the right time, causing it be undefined\n\t// see issue for more info\n\t// https://github.com/WordPress/gutenberg/issues/17013\n\tifCondition( ( { block } ) => !! block ),\n\twithFilters( 'editor.BlockListBlock' )\n)( BlockListBlock );\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"htmlEntities\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst plus = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z\" />\n\t</SVG>\n);\n\nexport default plus;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { createInterpolateElement, useState } from '@wordpress/element';\nimport { Tip } from '@wordpress/components';\n\nconst globalTips = [\n\tcreateInterpolateElement(\n\t\t__(\n\t\t\t'While writing, you can press <kbd>/</kbd> to quickly insert new blocks.'\n\t\t),\n\t\t{ kbd: <kbd /> }\n\t),\n\tcreateInterpolateElement(\n\t\t__(\n\t\t\t'Indent a list by pressing <kbd>space</kbd> at the beginning of a line.'\n\t\t),\n\t\t{ kbd: <kbd /> }\n\t),\n\tcreateInterpolateElement(\n\t\t__(\n\t\t\t'Outdent a list by pressing <kbd>backspace</kbd> at the beginning of a line.'\n\t\t),\n\t\t{ kbd: <kbd /> }\n\t),\n\t__( 'Drag files into the editor to automatically insert media blocks.' ),\n\t__( \"Change a block's type by pressing the block icon on the toolbar.\" ),\n];\n\nfunction Tips() {\n\tconst [ randomIndex ] = useState(\n\t\t// Disable Reason: I'm not generating an HTML id.\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tMath.floor( Math.random() * globalTips.length )\n\t);\n\n\treturn <Tip>{ globalTips[ randomIndex ] }</Tip>;\n}\n\nexport default Tips;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z\" />\n\t</SVG>\n);\n\nexport default chevronRight;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z\" />\n\t</SVG>\n);\n\nexport default chevronLeft;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst blockDefault = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z\" />\n\t</SVG>\n);\n\nexport default blockDefault;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Icon } from '@wordpress/components';\nimport { blockDefault } from '@wordpress/icons';\nimport { memo } from '@wordpress/element';\n\nfunction BlockIcon( { icon, showColors = false, className, context } ) {\n\tif ( icon?.src === 'block-default' ) {\n\t\ticon = {\n\t\t\tsrc: blockDefault,\n\t\t};\n\t}\n\n\tconst renderedIcon = (\n\t\t<Icon icon={ icon && icon.src ? icon.src : icon } context={ context } />\n\t);\n\tconst style = showColors\n\t\t? {\n\t\t\t\tbackgroundColor: icon && icon.background,\n\t\t\t\tcolor: icon && icon.foreground,\n\t\t  }\n\t\t: {};\n\n\treturn (\n\t\t<span\n\t\t\tstyle={ style }\n\t\t\tclassName={ classnames( 'block-editor-block-icon', className, {\n\t\t\t\t'has-colors': showColors,\n\t\t\t} ) }\n\t\t>\n\t\t\t{ renderedIcon }\n\t\t</span>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-icon/README.md\n */\nexport default memo( BlockIcon );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\nimport { Button } from '@wordpress/components';\nimport { chevronLeft, chevronRight } from '@wordpress/icons';\nimport { __, isRTL } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { store as blockEditorStore } from '../../store';\n\nfunction BlockCard( { title, icon, description, blockType, className } ) {\n\tif ( blockType ) {\n\t\tdeprecated( '`blockType` property in `BlockCard component`', {\n\t\t\tsince: '5.7',\n\t\t\talternative: '`title, icon and description` properties',\n\t\t} );\n\t\t( { title, icon, description } = blockType );\n\t}\n\n\tconst { parentNavBlockClientId } = useSelect( ( select ) => {\n\t\tconst { getSelectedBlockClientId, getBlockParentsByBlockName } =\n\t\t\tselect( blockEditorStore );\n\n\t\tconst _selectedBlockClientId = getSelectedBlockClientId();\n\n\t\treturn {\n\t\t\tparentNavBlockClientId: getBlockParentsByBlockName(\n\t\t\t\t_selectedBlockClientId,\n\t\t\t\t'core/navigation',\n\t\t\t\ttrue\n\t\t\t)[ 0 ],\n\t\t};\n\t}, [] );\n\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\n\treturn (\n\t\t<div className={ classnames( 'block-editor-block-card', className ) }>\n\t\t\t{ parentNavBlockClientId && ( // This is only used by the Navigation block for now. It's not ideal having Navigation block specific code here.\n\t\t\t\t<Button\n\t\t\t\t\tonClick={ () => selectBlock( parentNavBlockClientId ) }\n\t\t\t\t\tlabel={ __( 'Go to parent Navigation block' ) }\n\t\t\t\t\tstyle={\n\t\t\t\t\t\t// TODO: This style override is also used in ToolsPanelHeader.\n\t\t\t\t\t\t// It should be supported out-of-the-box by Button.\n\t\t\t\t\t\t{ minWidth: 24, padding: 0 }\n\t\t\t\t\t}\n\t\t\t\t\ticon={ isRTL() ? chevronRight : chevronLeft }\n\t\t\t\t\tisSmall\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<BlockIcon icon={ icon } showColors />\n\t\t\t<div className=\"block-editor-block-card__content\">\n\t\t\t\t<h2 className=\"block-editor-block-card__title\">{ title }</h2>\n\t\t\t\t<span className=\"block-editor-block-card__description\">\n\t\t\t\t\t{ description }\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default BlockCard;\n","/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport {\n\twithRegistry,\n\tcreateRegistry,\n\tRegistryProvider,\n} from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { storeConfig } from '../../store';\nimport { STORE_NAME as blockEditorStoreName } from '../../store/constants';\n\nconst withRegistryProvider = createHigherOrderComponent(\n\t( WrappedComponent ) => {\n\t\treturn withRegistry(\n\t\t\t( { useSubRegistry = true, registry, ...props } ) => {\n\t\t\t\tif ( ! useSubRegistry ) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<WrappedComponent registry={ registry } { ...props } />\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst [ subRegistry, setSubRegistry ] = useState( null );\n\t\t\t\tuseEffect( () => {\n\t\t\t\t\tconst newRegistry = createRegistry( {}, registry );\n\t\t\t\t\tnewRegistry.registerStore(\n\t\t\t\t\t\tblockEditorStoreName,\n\t\t\t\t\t\tstoreConfig\n\t\t\t\t\t);\n\t\t\t\t\tsetSubRegistry( newRegistry );\n\t\t\t\t}, [ registry ] );\n\n\t\t\t\tif ( ! subRegistry ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<RegistryProvider value={ subRegistry }>\n\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\tregistry={ subRegistry }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</RegistryProvider>\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t},\n\t'withRegistryProvider'\n);\n\nexport default withRegistryProvider;\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\nimport { useRegistry, useSelect } from '@wordpress/data';\nimport { cloneBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst noop = () => {};\n\n/**\n * A function to call when the block value has been updated in the block-editor\n * store.\n *\n * @callback onBlockUpdate\n * @param {Object[]} blocks  The updated blocks.\n * @param {Object}   options The updated block options, such as selectionStart\n *                           and selectionEnd.\n */\n\n/**\n * useBlockSync is a side effect which handles bidirectional sync between the\n * block-editor store and a controlling data source which provides blocks. This\n * is most commonly used by the BlockEditorProvider to synchronize the contents\n * of the block-editor store with the root entity, like a post.\n *\n * Another example would be the template part block, which provides blocks from\n * a separate entity data source than a root entity. This hook syncs edits to\n * the template part in the block editor back to the entity and vice-versa.\n *\n * Here are some of its basic functions:\n * - Initalizes the block-editor store for the given clientID to the blocks\n *   given via props.\n * - Adds incoming changes (like undo) to the block-editor store.\n * - Adds outgoing changes (like editing content) to the controlling entity,\n *   determining if a change should be considered persistent or not.\n * - Handles edge cases and race conditions which occur in those operations.\n * - Ignores changes which happen to other entities (like nested inner block\n *   controllers.\n * - Passes selection state from the block-editor store to the controlling entity.\n *\n * @param {Object}        props           Props for the block sync hook\n * @param {string}        props.clientId  The client ID of the inner block controller.\n *                                        If none is passed, then it is assumed to be a\n *                                        root controller rather than an inner block\n *                                        controller.\n * @param {Object[]}      props.value     The control value for the blocks. This value\n *                                        is used to initalize the block-editor store\n *                                        and for resetting the blocks to incoming\n *                                        changes like undo.\n * @param {Object}        props.selection The selection state responsible to restore the selection on undo/redo.\n * @param {onBlockUpdate} props.onChange  Function to call when a persistent\n *                                        change has been made in the block-editor blocks\n *                                        for the given clientId. For example, after\n *                                        this function is called, an entity is marked\n *                                        dirty because it has changes to save.\n * @param {onBlockUpdate} props.onInput   Function to call when a non-persistent\n *                                        change has been made in the block-editor blocks\n *                                        for the given clientId. When this is called,\n *                                        controlling sources do not become dirty.\n */\nexport default function useBlockSync( {\n\tclientId = null,\n\tvalue: controlledBlocks,\n\tselection: controlledSelection,\n\tonChange = noop,\n\tonInput = noop,\n} ) {\n\tconst registry = useRegistry();\n\n\tconst {\n\t\tresetBlocks,\n\t\tresetSelection,\n\t\treplaceInnerBlocks,\n\t\tselectBlock,\n\t\tsetHasControlledInnerBlocks,\n\t\t__unstableMarkNextChangeAsNotPersistent,\n\t} = registry.dispatch( blockEditorStore );\n\tconst {\n\t\thasSelectedBlock,\n\t\tgetBlockName,\n\t\tgetBlocks,\n\t\tgetSelectionStart,\n\t\tgetSelectionEnd,\n\t\tgetBlock,\n\t} = registry.select( blockEditorStore );\n\tconst isControlled = useSelect(\n\t\t( select ) => {\n\t\t\treturn (\n\t\t\t\t! clientId ||\n\t\t\t\tselect( blockEditorStore ).areInnerBlocksControlled( clientId )\n\t\t\t);\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst pendingChanges = useRef( { incoming: null, outgoing: [] } );\n\tconst subscribed = useRef( false );\n\n\tconst setControlledBlocks = () => {\n\t\tif ( ! controlledBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't need to persist this change because we only replace\n\t\t// controlled inner blocks when the change was caused by an entity,\n\t\t// and so it would already be persisted.\n\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\tif ( clientId ) {\n\t\t\t// It is important to batch here because otherwise,\n\t\t\t// as soon as `setHasControlledInnerBlocks` is called\n\t\t\t// the effect to restore might be triggered\n\t\t\t// before the actual blocks get set properly in state.\n\t\t\tregistry.batch( () => {\n\t\t\t\tsetHasControlledInnerBlocks( clientId, true );\n\t\t\t\tconst storeBlocks = controlledBlocks.map( ( block ) =>\n\t\t\t\t\tcloneBlock( block )\n\t\t\t\t);\n\t\t\t\tif ( subscribed.current ) {\n\t\t\t\t\tpendingChanges.current.incoming = storeBlocks;\n\t\t\t\t}\n\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\treplaceInnerBlocks( clientId, storeBlocks );\n\t\t\t} );\n\t\t} else {\n\t\t\tif ( subscribed.current ) {\n\t\t\t\tpendingChanges.current.incoming = controlledBlocks;\n\t\t\t}\n\t\t\tresetBlocks( controlledBlocks );\n\t\t}\n\t};\n\n\t// Add a subscription to the block-editor registry to detect when changes\n\t// have been made. This lets us inform the data source of changes. This\n\t// is an effect so that the subscriber can run synchronously without\n\t// waiting for React renders for changes.\n\tconst onInputRef = useRef( onInput );\n\tconst onChangeRef = useRef( onChange );\n\tuseEffect( () => {\n\t\tonInputRef.current = onInput;\n\t\tonChangeRef.current = onChange;\n\t}, [ onInput, onChange ] );\n\n\t// Determine if blocks need to be reset when they change.\n\tuseEffect( () => {\n\t\tif ( pendingChanges.current.outgoing.includes( controlledBlocks ) ) {\n\t\t\t// Skip block reset if the value matches expected outbound sync\n\t\t\t// triggered by this component by a preceding change detection.\n\t\t\t// Only skip if the value matches expectation, since a reset should\n\t\t\t// still occur if the value is modified (not equal by reference),\n\t\t\t// to allow that the consumer may apply modifications to reflect\n\t\t\t// back on the editor.\n\t\t\tif (\n\t\t\t\tpendingChanges.current.outgoing[\n\t\t\t\t\tpendingChanges.current.outgoing.length - 1\n\t\t\t\t] === controlledBlocks\n\t\t\t) {\n\t\t\t\tpendingChanges.current.outgoing = [];\n\t\t\t}\n\t\t} else if ( getBlocks( clientId ) !== controlledBlocks ) {\n\t\t\t// Reset changing value in all other cases than the sync described\n\t\t\t// above. Since this can be reached in an update following an out-\n\t\t\t// bound sync, unset the outbound value to avoid considering it in\n\t\t\t// subsequent renders.\n\t\t\tpendingChanges.current.outgoing = [];\n\t\t\tconst hadSelecton = hasSelectedBlock();\n\t\t\tconst selectionAnchor = getSelectionStart();\n\t\t\tconst selectionFocus = getSelectionEnd();\n\t\t\tsetControlledBlocks();\n\n\t\t\tif ( controlledSelection ) {\n\t\t\t\tresetSelection(\n\t\t\t\t\tcontrolledSelection.selectionStart,\n\t\t\t\t\tcontrolledSelection.selectionEnd,\n\t\t\t\t\tcontrolledSelection.initialPosition\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst selectionStillExists = getBlock(\n\t\t\t\t\tselectionAnchor.clientId\n\t\t\t\t);\n\t\t\t\tif ( hadSelecton && ! selectionStillExists ) {\n\t\t\t\t\tselectBlock( clientId );\n\t\t\t\t} else {\n\t\t\t\t\tresetSelection( selectionAnchor, selectionFocus );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [ controlledBlocks, clientId ] );\n\n\tuseEffect( () => {\n\t\t// When the block becomes uncontrolled, it means its inner state has been reset\n\t\t// we need to take the blocks again from the external value property.\n\t\tif ( ! isControlled ) {\n\t\t\tpendingChanges.current.outgoing = [];\n\t\t\tsetControlledBlocks();\n\t\t}\n\t}, [ isControlled ] );\n\n\tuseEffect( () => {\n\t\tconst {\n\t\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t\tisLastBlockChangePersistent,\n\t\t\t__unstableIsLastBlockChangeIgnored,\n\t\t\tareInnerBlocksControlled,\n\t\t} = registry.select( blockEditorStore );\n\n\t\tlet blocks = getBlocks( clientId );\n\t\tlet isPersistent = isLastBlockChangePersistent();\n\t\tlet previousAreBlocksDifferent = false;\n\n\t\tsubscribed.current = true;\n\t\tconst unsubscribe = registry.subscribe( () => {\n\t\t\t// Sometimes, when changing block lists, lingering subscriptions\n\t\t\t// might trigger before they are cleaned up. If the block for which\n\t\t\t// the subscription runs is no longer in the store, this would clear\n\t\t\t// its parent entity's block list. To avoid this, we bail out if\n\t\t\t// the subscription is triggering for a block (`clientId !== null`)\n\t\t\t// and its block name can't be found because it's not on the list.\n\t\t\t// (`getBlockName( clientId ) === null`).\n\t\t\tif ( clientId !== null && getBlockName( clientId ) === null )\n\t\t\t\treturn;\n\n\t\t\t// When RESET_BLOCKS on parent blocks get called, the controlled blocks\n\t\t\t// can reset to uncontrolled, in these situations, it means we need to populate\n\t\t\t// the blocks again from the external blocks (the value property here)\n\t\t\t// and we should stop triggering onChange\n\t\t\tconst isStillControlled =\n\t\t\t\t! clientId || areInnerBlocksControlled( clientId );\n\t\t\tif ( ! isStillControlled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst newIsPersistent = isLastBlockChangePersistent();\n\t\t\tconst newBlocks = getBlocks( clientId );\n\t\t\tconst areBlocksDifferent = newBlocks !== blocks;\n\t\t\tblocks = newBlocks;\n\t\t\tif (\n\t\t\t\tareBlocksDifferent &&\n\t\t\t\t( pendingChanges.current.incoming ||\n\t\t\t\t\t__unstableIsLastBlockChangeIgnored() )\n\t\t\t) {\n\t\t\t\tpendingChanges.current.incoming = null;\n\t\t\t\tisPersistent = newIsPersistent;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Since we often dispatch an action to mark the previous action as\n\t\t\t// persistent, we need to make sure that the blocks changed on the\n\t\t\t// previous action before committing the change.\n\t\t\tconst didPersistenceChange =\n\t\t\t\tpreviousAreBlocksDifferent &&\n\t\t\t\t! areBlocksDifferent &&\n\t\t\t\tnewIsPersistent &&\n\t\t\t\t! isPersistent;\n\n\t\t\tif ( areBlocksDifferent || didPersistenceChange ) {\n\t\t\t\tisPersistent = newIsPersistent;\n\t\t\t\t// We know that onChange/onInput will update controlledBlocks.\n\t\t\t\t// We need to be aware that it was caused by an outgoing change\n\t\t\t\t// so that we do not treat it as an incoming change later on,\n\t\t\t\t// which would cause a block reset.\n\t\t\t\tpendingChanges.current.outgoing.push( blocks );\n\n\t\t\t\t// Inform the controlling entity that changes have been made to\n\t\t\t\t// the block-editor store they should be aware about.\n\t\t\t\tconst updateParent = isPersistent\n\t\t\t\t\t? onChangeRef.current\n\t\t\t\t\t: onInputRef.current;\n\t\t\t\tupdateParent( blocks, {\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tselectionStart: getSelectionStart(),\n\t\t\t\t\t\tselectionEnd: getSelectionEnd(),\n\t\t\t\t\t\tinitialPosition:\n\t\t\t\t\t\t\tgetSelectedBlocksInitialCaretPosition(),\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}\n\t\t\tpreviousAreBlocksDifferent = areBlocksDifferent;\n\t\t} );\n\n\t\treturn () => {\n\t\t\tsubscribed.current = false;\n\t\t\tunsubscribe();\n\t\t};\n\t}, [ registry, clientId ] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useDispatch } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport withRegistryProvider from './with-registry-provider';\nimport useBlockSync from './use-block-sync';\nimport { store as blockEditorStore } from '../../store';\nimport { BlockRefsProvider } from './block-refs-provider';\nimport { unlock } from '../../lock-unlock';\n\n/** @typedef {import('@wordpress/data').WPDataRegistry} WPDataRegistry */\n\nexport const ExperimentalBlockEditorProvider = withRegistryProvider(\n\t( props ) => {\n\t\tconst { children, settings, stripExperimentalSettings = false } = props;\n\n\t\tconst { __experimentalUpdateSettings } = unlock(\n\t\t\tuseDispatch( blockEditorStore )\n\t\t);\n\t\tuseEffect( () => {\n\t\t\t__experimentalUpdateSettings(\n\t\t\t\t{\n\t\t\t\t\t...settings,\n\t\t\t\t\t__internalIsInitialized: true,\n\t\t\t\t},\n\t\t\t\tstripExperimentalSettings\n\t\t\t);\n\t\t}, [ settings ] );\n\n\t\t// Syncs the entity provider with changes in the block-editor store.\n\t\tuseBlockSync( props );\n\n\t\treturn <BlockRefsProvider>{ children }</BlockRefsProvider>;\n\t}\n);\n\nexport const BlockEditorProvider = ( props ) => {\n\treturn (\n\t\t<ExperimentalBlockEditorProvider\n\t\t\t{ ...props }\n\t\t\tstripExperimentalSettings={ true }\n\t\t>\n\t\t\t{ props.children }\n\t\t</ExperimentalBlockEditorProvider>\n\t);\n};\n\nexport default BlockEditorProvider;\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Pass the returned ref callback to an element that should clear block\n * selection. Selection will only be cleared if the element is clicked directly,\n * not if a child element is clicked.\n *\n * @return {import('react').RefCallback} Ref callback.\n */\nexport function useBlockSelectionClearer() {\n\tconst { getSettings, hasSelectedBlock, hasMultiSelection } =\n\t\tuseSelect( blockEditorStore );\n\tconst { clearSelectedBlock } = useDispatch( blockEditorStore );\n\tconst { clearBlockSelection: isEnabled } = getSettings();\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! isEnabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction onMouseDown( event ) {\n\t\t\t\tif ( ! hasSelectedBlock() && ! hasMultiSelection() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Only handle clicks on the element, not the children.\n\t\t\t\tif ( event.target !== node ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tclearSelectedBlock();\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'mousedown', onMouseDown );\n\t\t\t};\n\t\t},\n\t\t[ hasSelectedBlock, hasMultiSelection, clearSelectedBlock, isEnabled ]\n\t);\n}\n\nexport default function BlockSelectionClearer( props ) {\n\treturn <div ref={ useBlockSelectionClearer() } { ...props } />;\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nfunction selector( select ) {\n\tconst {\n\t\tisMultiSelecting,\n\t\tgetMultiSelectedBlockClientIds,\n\t\thasMultiSelection,\n\t\tgetSelectedBlockClientId,\n\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t__unstableIsFullySelected,\n\t} = select( blockEditorStore );\n\n\treturn {\n\t\tisMultiSelecting: isMultiSelecting(),\n\t\tmultiSelectedBlockClientIds: getMultiSelectedBlockClientIds(),\n\t\thasMultiSelection: hasMultiSelection(),\n\t\tselectedBlockClientId: getSelectedBlockClientId(),\n\t\tinitialPosition: getSelectedBlocksInitialCaretPosition(),\n\t\tisFullSelection: __unstableIsFullySelected(),\n\t};\n}\n\nexport default function useMultiSelection() {\n\tconst {\n\t\tinitialPosition,\n\t\tisMultiSelecting,\n\t\tmultiSelectedBlockClientIds,\n\t\thasMultiSelection,\n\t\tselectedBlockClientId,\n\t\tisFullSelection,\n\t} = useSelect( selector, [] );\n\n\t/**\n\t * When the component updates, and there is multi selection, we need to\n\t * select the entire block contents.\n\t */\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\t// Allow initialPosition to bypass focus behavior. This is useful\n\t\t\t// for the list view or other areas where we don't want to transfer\n\t\t\t// focus to the editor canvas.\n\t\t\tif ( initialPosition === undefined || initialPosition === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! hasMultiSelection || isMultiSelecting ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { length } = multiSelectedBlockClientIds;\n\n\t\t\tif ( length < 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! isFullSelection ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Allow cross contentEditable selection by temporarily making\n\t\t\t// all content editable. We can't rely on using the store and\n\t\t\t// React because re-rending happens too slowly. We need to be\n\t\t\t// able to select across instances immediately.\n\t\t\tnode.contentEditable = true;\n\n\t\t\t// For some browsers, like Safari, it is important that focus\n\t\t\t// happens BEFORE selection removal.\n\t\t\tnode.focus();\n\n\t\t\tdefaultView.getSelection().removeAllRanges();\n\t\t},\n\t\t[\n\t\t\thasMultiSelection,\n\t\t\tisMultiSelecting,\n\t\t\tmultiSelectedBlockClientIds,\n\t\t\tselectedBlockClientId,\n\t\t\tinitialPosition,\n\t\t\tisFullSelection,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tcomputeCaretRect,\n\tfocus,\n\tisHorizontalEdge,\n\tisVerticalEdge,\n\tplaceCaretAtHorizontalEdge,\n\tplaceCaretAtVerticalEdge,\n\tisRTL,\n} from '@wordpress/dom';\nimport { UP, DOWN, LEFT, RIGHT } from '@wordpress/keycodes';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { getBlockClientId, isInSameBlock } from '../../utils/dom';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Returns true if the element should consider edge navigation upon a keyboard\n * event of the given directional key code, or false otherwise.\n *\n * @param {Element} element     HTML element to test.\n * @param {number}  keyCode     KeyboardEvent keyCode to test.\n * @param {boolean} hasModifier Whether a modifier is pressed.\n *\n * @return {boolean} Whether element should consider edge navigation.\n */\nexport function isNavigationCandidate( element, keyCode, hasModifier ) {\n\tconst isVertical = keyCode === UP || keyCode === DOWN;\n\tconst { tagName } = element;\n\tconst elementType = element.getAttribute( 'type' );\n\n\t// Native inputs should not navigate vertically, unless they are simple types that don't need up/down arrow keys.\n\tif ( isVertical && ! hasModifier ) {\n\t\tif ( tagName === 'INPUT' ) {\n\t\t\tconst verticalInputTypes = [\n\t\t\t\t'date',\n\t\t\t\t'datetime-local',\n\t\t\t\t'month',\n\t\t\t\t'number',\n\t\t\t\t'range',\n\t\t\t\t'time',\n\t\t\t\t'week',\n\t\t\t];\n\t\t\treturn ! verticalInputTypes.includes( elementType );\n\t\t}\n\t\treturn true;\n\t}\n\n\t// Native inputs should not navigate horizontally, unless they are simple types that don't need left/right arrow keys.\n\tif ( tagName === 'INPUT' ) {\n\t\tconst simpleInputTypes = [\n\t\t\t'button',\n\t\t\t'checkbox',\n\t\t\t'number',\n\t\t\t'color',\n\t\t\t'file',\n\t\t\t'image',\n\t\t\t'radio',\n\t\t\t'reset',\n\t\t\t'submit',\n\t\t];\n\t\treturn simpleInputTypes.includes( elementType );\n\t}\n\n\t// Native textareas should not navigate horizontally.\n\treturn tagName !== 'TEXTAREA';\n}\n\n/**\n * Returns the optimal tab target from the given focused element in the desired\n * direction. A preference is made toward text fields, falling back to the block\n * focus stop if no other candidates exist for the block.\n *\n * @param {Element} target           Currently focused text field.\n * @param {boolean} isReverse        True if considering as the first field.\n * @param {Element} containerElement Element containing all blocks.\n * @param {boolean} onlyVertical     Whether to only consider tabbable elements\n *                                   that are visually above or under the\n *                                   target.\n *\n * @return {?Element} Optimal tab target, if one exists.\n */\nexport function getClosestTabbable(\n\ttarget,\n\tisReverse,\n\tcontainerElement,\n\tonlyVertical\n) {\n\t// Since the current focus target is not guaranteed to be a text field, find\n\t// all focusables. Tabbability is considered later.\n\tlet focusableNodes = focus.focusable.find( containerElement );\n\n\tif ( isReverse ) {\n\t\tfocusableNodes.reverse();\n\t}\n\n\t// Consider as candidates those focusables after the current target. It's\n\t// assumed this can only be reached if the target is focusable (on its\n\t// keydown event), so no need to verify it exists in the set.\n\tfocusableNodes = focusableNodes.slice(\n\t\tfocusableNodes.indexOf( target ) + 1\n\t);\n\n\tlet targetRect;\n\n\tif ( onlyVertical ) {\n\t\ttargetRect = target.getBoundingClientRect();\n\t}\n\n\tfunction isTabCandidate( node ) {\n\t\t// Skip if there's only one child that is content editable (and thus a\n\t\t// better candidate).\n\t\tif (\n\t\t\tnode.children.length === 1 &&\n\t\t\tisInSameBlock( node, node.firstElementChild ) &&\n\t\t\tnode.firstElementChild.getAttribute( 'contenteditable' ) === 'true'\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Not a candidate if the node is not tabbable.\n\t\tif ( ! focus.tabbable.isTabbableIndex( node ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Skip focusable elements such as links within content editable nodes.\n\t\tif ( node.isContentEditable && node.contentEditable !== 'true' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( onlyVertical ) {\n\t\t\tconst nodeRect = node.getBoundingClientRect();\n\n\t\t\tif (\n\t\t\t\tnodeRect.left >= targetRect.right ||\n\t\t\t\tnodeRect.right <= targetRect.left\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn focusableNodes.find( isTabCandidate );\n}\n\nexport default function useArrowNav() {\n\tconst {\n\t\tgetMultiSelectedBlocksStartClientId,\n\t\tgetMultiSelectedBlocksEndClientId,\n\t\tgetSettings,\n\t\thasMultiSelection,\n\t\t__unstableIsFullySelected,\n\t} = useSelect( blockEditorStore );\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\treturn useRefEffect( ( node ) => {\n\t\t// Here a DOMRect is stored while moving the caret vertically so\n\t\t// vertical position of the start position can be restored. This is to\n\t\t// recreate browser behaviour across blocks.\n\t\tlet verticalRect;\n\n\t\tfunction onMouseDown() {\n\t\t\tverticalRect = null;\n\t\t}\n\n\t\tfunction isClosestTabbableABlock( target, isReverse ) {\n\t\t\tconst closestTabbable = getClosestTabbable(\n\t\t\t\ttarget,\n\t\t\t\tisReverse,\n\t\t\t\tnode\n\t\t\t);\n\t\t\treturn closestTabbable && getBlockClientId( closestTabbable );\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\t\t\t// Abort if navigation has already been handled (e.g. RichText\n\t\t\t// inline boundaries).\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { keyCode, target, shiftKey, ctrlKey, altKey, metaKey } =\n\t\t\t\tevent;\n\t\t\tconst isUp = keyCode === UP;\n\t\t\tconst isDown = keyCode === DOWN;\n\t\t\tconst isLeft = keyCode === LEFT;\n\t\t\tconst isRight = keyCode === RIGHT;\n\t\t\tconst isReverse = isUp || isLeft;\n\t\t\tconst isHorizontal = isLeft || isRight;\n\t\t\tconst isVertical = isUp || isDown;\n\t\t\tconst isNav = isHorizontal || isVertical;\n\t\t\tconst hasModifier = shiftKey || ctrlKey || altKey || metaKey;\n\t\t\tconst isNavEdge = isVertical ? isVerticalEdge : isHorizontalEdge;\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\tif ( ! isNav ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If there is a multi-selection, the arrow keys should collapse the\n\t\t\t// selection to the start or end of the selection.\n\t\t\tif ( hasMultiSelection() ) {\n\t\t\t\tif ( shiftKey ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Only handle if we have a full selection (not a native partial\n\t\t\t\t// selection).\n\t\t\t\tif ( ! __unstableIsFullySelected() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif ( isReverse ) {\n\t\t\t\t\tselectBlock( getMultiSelectedBlocksStartClientId() );\n\t\t\t\t} else {\n\t\t\t\t\tselectBlock( getMultiSelectedBlocksEndClientId(), -1 );\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Abort if our current target is not a candidate for navigation\n\t\t\t// (e.g. preserve native input behaviors).\n\t\t\tif ( ! isNavigationCandidate( target, keyCode, hasModifier ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// When presing any key other than up or down, the initial vertical\n\t\t\t// position must ALWAYS be reset. The vertical position is saved so\n\t\t\t// it can be restored as well as possible on sebsequent vertical\n\t\t\t// arrow key presses. It may not always be possible to restore the\n\t\t\t// exact same position (such as at an empty line), so it wouldn't be\n\t\t\t// good to compute the position right before any vertical arrow key\n\t\t\t// press.\n\t\t\tif ( ! isVertical ) {\n\t\t\t\tverticalRect = null;\n\t\t\t} else if ( ! verticalRect ) {\n\t\t\t\tverticalRect = computeCaretRect( defaultView );\n\t\t\t}\n\n\t\t\t// In the case of RTL scripts, right means previous and left means\n\t\t\t// next, which is the exact reverse of LTR.\n\t\t\tconst isReverseDir = isRTL( target ) ? ! isReverse : isReverse;\n\t\t\tconst { keepCaretInsideBlock } = getSettings();\n\n\t\t\tif ( shiftKey ) {\n\t\t\t\tif (\n\t\t\t\t\tisClosestTabbableABlock( target, isReverse ) &&\n\t\t\t\t\tisNavEdge( target, isReverse )\n\t\t\t\t) {\n\t\t\t\t\tnode.contentEditable = true;\n\t\t\t\t\t// Firefox doesn't automatically move focus.\n\t\t\t\t\tnode.focus();\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tisVertical &&\n\t\t\t\tisVerticalEdge( target, isReverse ) &&\n\t\t\t\t// When Alt is pressed, only intercept if the caret is also at\n\t\t\t\t// the horizontal edge.\n\t\t\t\t( altKey ? isHorizontalEdge( target, isReverseDir ) : true ) &&\n\t\t\t\t! keepCaretInsideBlock\n\t\t\t) {\n\t\t\t\tconst closestTabbable = getClosestTabbable(\n\t\t\t\t\ttarget,\n\t\t\t\t\tisReverse,\n\t\t\t\t\tnode,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\n\t\t\t\tif ( closestTabbable ) {\n\t\t\t\t\tplaceCaretAtVerticalEdge(\n\t\t\t\t\t\tclosestTabbable,\n\t\t\t\t\t\t// When Alt is pressed, place the caret at the furthest\n\t\t\t\t\t\t// horizontal edge and the furthest vertical edge.\n\t\t\t\t\t\taltKey ? ! isReverse : isReverse,\n\t\t\t\t\t\taltKey ? undefined : verticalRect\n\t\t\t\t\t);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tisHorizontal &&\n\t\t\t\tdefaultView.getSelection().isCollapsed &&\n\t\t\t\tisHorizontalEdge( target, isReverseDir ) &&\n\t\t\t\t! keepCaretInsideBlock\n\t\t\t) {\n\t\t\t\tconst closestTabbable = getClosestTabbable(\n\t\t\t\t\ttarget,\n\t\t\t\t\tisReverseDir,\n\t\t\t\t\tnode\n\t\t\t\t);\n\t\t\t\tplaceCaretAtHorizontalEdge( closestTabbable, isReverse );\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\treturn () => {\n\t\t\tnode.removeEventListener( 'mousedown', onMouseDown );\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"keyboardShortcuts\"];","/**\n * WordPress dependencies\n */\nimport { isEntirelySelected } from '@wordpress/dom';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __unstableUseShortcutEventMatch as useShortcutEventMatch } from '@wordpress/keyboard-shortcuts';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function useSelectAll() {\n\tconst { getBlockOrder, getSelectedBlockClientIds, getBlockRootClientId } =\n\t\tuseSelect( blockEditorStore );\n\tconst { multiSelect, selectBlock } = useDispatch( blockEditorStore );\n\tconst isMatch = useShortcutEventMatch();\n\n\treturn useRefEffect( ( node ) => {\n\t\tfunction onKeyDown( event ) {\n\t\t\tif ( ! isMatch( 'core/block-editor/select-all', event ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selectedClientIds = getSelectedBlockClientIds();\n\n\t\t\tif (\n\t\t\t\tselectedClientIds.length < 2 &&\n\t\t\t\t! isEntirelySelected( event.target )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tconst [ firstSelectedClientId ] = selectedClientIds;\n\t\t\tconst rootClientId = getBlockRootClientId( firstSelectedClientId );\n\t\t\tconst blockClientIds = getBlockOrder( rootClientId );\n\n\t\t\t// If we have selected all sibling nested blocks, try selecting up a\n\t\t\t// level. See: https://github.com/WordPress/gutenberg/pull/31859/\n\t\t\tif ( selectedClientIds.length === blockClientIds.length ) {\n\t\t\t\tif ( rootClientId ) {\n\t\t\t\t\tnode.ownerDocument.defaultView\n\t\t\t\t\t\t.getSelection()\n\t\t\t\t\t\t.removeAllRanges();\n\t\t\t\t\tselectBlock( rootClientId );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmultiSelect(\n\t\t\t\tblockClientIds[ 0 ],\n\t\t\t\tblockClientIds[ blockClientIds.length - 1 ]\n\t\t\t);\n\t\t}\n\n\t\tnode.addEventListener( 'keydown', onKeyDown );\n\n\t\treturn () => {\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Sets the `contenteditable` wrapper element to `value`.\n *\n * @param {HTMLElement} node  Block element.\n * @param {boolean}     value `contentEditable` value (true or false)\n */\nfunction setContentEditableWrapper( node, value ) {\n\tnode.contentEditable = value;\n\t// Firefox doesn't automatically move focus.\n\tif ( value ) node.focus();\n}\n\n/**\n * Sets a multi-selection based on the native selection across blocks.\n */\nexport default function useDragSelection() {\n\tconst { startMultiSelect, stopMultiSelect } =\n\t\tuseDispatch( blockEditorStore );\n\tconst { isSelectionEnabled, hasMultiSelection, isDraggingBlocks } =\n\t\tuseSelect( blockEditorStore );\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\tlet anchorElement;\n\t\t\tlet rafId;\n\n\t\t\tfunction onMouseUp() {\n\t\t\t\tstopMultiSelect();\n\t\t\t\t// Equivalent to attaching the listener once.\n\t\t\t\tdefaultView.removeEventListener( 'mouseup', onMouseUp );\n\t\t\t\t// The browser selection won't have updated yet at this point,\n\t\t\t\t// so wait until the next animation frame to get the browser\n\t\t\t\t// selection.\n\t\t\t\trafId = defaultView.requestAnimationFrame( () => {\n\t\t\t\t\tif ( hasMultiSelection() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If the selection is complete (on mouse up), and no\n\t\t\t\t\t// multiple blocks have been selected, set focus back to the\n\t\t\t\t\t// anchor element. if the anchor element contains the\n\t\t\t\t\t// selection. Additionally, the contentEditable wrapper can\n\t\t\t\t\t// now be disabled again.\n\t\t\t\t\tsetContentEditableWrapper( node, false );\n\n\t\t\t\t\tconst selection = defaultView.getSelection();\n\n\t\t\t\t\tif ( selection.rangeCount ) {\n\t\t\t\t\t\tconst { commonAncestorContainer } =\n\t\t\t\t\t\t\tselection.getRangeAt( 0 );\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tanchorElement.contains( commonAncestorContainer )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tanchorElement.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tfunction onMouseLeave( { buttons, target } ) {\n\t\t\t\t// Avoid triggering a multi-selection if the user is already\n\t\t\t\t// dragging blocks.\n\t\t\t\tif ( isDraggingBlocks() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// The primary button must be pressed to initiate selection.\n\t\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\n\t\t\t\tif ( buttons !== 1 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Check the attribute, not the contentEditable attribute. All\n\t\t\t\t// child elements of the content editable wrapper are editable\n\t\t\t\t// and return true for this property. We only want to start\n\t\t\t\t// multi selecting when the mouse leaves the wrapper.\n\t\t\t\tif ( ! target.getAttribute( 'contenteditable' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( ! isSelectionEnabled() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tanchorElement = ownerDocument.activeElement;\n\t\t\t\tstartMultiSelect();\n\n\t\t\t\t// `onSelectionStart` is called after `mousedown` and\n\t\t\t\t// `mouseleave` (from a block). The selection ends when\n\t\t\t\t// `mouseup` happens anywhere in the window.\n\t\t\t\tdefaultView.addEventListener( 'mouseup', onMouseUp );\n\n\t\t\t\t// Allow cross contentEditable selection by temporarily making\n\t\t\t\t// all content editable. We can't rely on using the store and\n\t\t\t\t// React because re-rending happens too slowly. We need to be\n\t\t\t\t// able to select across instances immediately.\n\t\t\t\tsetContentEditableWrapper( node, true );\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mouseout', onMouseLeave );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'mouseout', onMouseLeave );\n\t\t\t\tdefaultView.removeEventListener( 'mouseup', onMouseUp );\n\t\t\t\tdefaultView.cancelAnimationFrame( rafId );\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tstartMultiSelect,\n\t\t\tstopMultiSelect,\n\t\t\tisSelectionEnabled,\n\t\t\thasMultiSelection,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { getBlockClientId } from '../../utils/dom';\n\n/**\n * Extract the selection start node from the selection. When the anchor node is\n * not a text node, the selection offset is the index of a child node.\n *\n * @param {Selection} selection The selection.\n *\n * @return {Element} The selection start node.\n */\nfunction extractSelectionStartNode( selection ) {\n\tconst { anchorNode, anchorOffset } = selection;\n\n\tif ( anchorNode.nodeType === anchorNode.TEXT_NODE ) {\n\t\treturn anchorNode;\n\t}\n\n\tif ( anchorOffset === 0 ) {\n\t\treturn anchorNode;\n\t}\n\n\treturn anchorNode.childNodes[ anchorOffset - 1 ];\n}\n\n/**\n * Extract the selection end node from the selection. When the focus node is not\n * a text node, the selection offset is the index of a child node. The selection\n * reaches up to but excluding that child node.\n *\n * @param {Selection} selection The selection.\n *\n * @return {Element} The selection start node.\n */\nfunction extractSelectionEndNode( selection ) {\n\tconst { focusNode, focusOffset } = selection;\n\n\tif ( focusNode.nodeType === focusNode.TEXT_NODE ) {\n\t\treturn focusNode;\n\t}\n\n\tif ( focusOffset === focusNode.childNodes.length ) {\n\t\treturn focusNode;\n\t}\n\n\treturn focusNode.childNodes[ focusOffset ];\n}\n\nfunction findDepth( a, b ) {\n\tlet depth = 0;\n\n\twhile ( a[ depth ] === b[ depth ] ) {\n\t\tdepth++;\n\t}\n\n\treturn depth;\n}\n\n/**\n * Sets the `contenteditable` wrapper element to `value`.\n *\n * @param {HTMLElement} node  Block element.\n * @param {boolean}     value `contentEditable` value (true or false)\n */\nfunction setContentEditableWrapper( node, value ) {\n\t// Since we are calling this on every selection change, check if the value\n\t// needs to be updated first because it trigger the browser to recalculate\n\t// style.\n\tif ( node.contentEditable !== String( value ) )\n\t\tnode.contentEditable = value;\n\t// Firefox doesn't automatically move focus.\n\tif ( value ) node.focus();\n}\n\n/**\n * Sets a multi-selection based on the native selection across blocks.\n */\nexport default function useSelectionObserver() {\n\tconst { multiSelect, selectBlock, selectionChange } =\n\t\tuseDispatch( blockEditorStore );\n\tconst { getBlockParents, getBlockSelectionStart } =\n\t\tuseSelect( blockEditorStore );\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\tfunction onSelectionChange( event ) {\n\t\t\t\tconst selection = defaultView.getSelection();\n\n\t\t\t\tif ( ! selection.rangeCount ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// If selection is collapsed and we haven't used `shift+click`,\n\t\t\t\t// end multi selection and disable the contentEditable wrapper.\n\t\t\t\t// We have to check about `shift+click` case because elements\n\t\t\t\t// that don't support text selection might be involved, and we might\n\t\t\t\t// update the clientIds to multi-select blocks.\n\t\t\t\t// For now we check if the event is a `mouse` event.\n\t\t\t\tconst isClickShift = event.shiftKey && event.type === 'mouseup';\n\t\t\t\tif ( selection.isCollapsed && ! isClickShift ) {\n\t\t\t\t\tsetContentEditableWrapper( node, false );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet startClientId = getBlockClientId(\n\t\t\t\t\textractSelectionStartNode( selection )\n\t\t\t\t);\n\t\t\t\tlet endClientId = getBlockClientId(\n\t\t\t\t\textractSelectionEndNode( selection )\n\t\t\t\t);\n\t\t\t\t// If the selection has changed and we had pressed `shift+click`,\n\t\t\t\t// we need to check if in an element that doesn't support\n\t\t\t\t// text selection has been clicked.\n\t\t\t\tif ( isClickShift ) {\n\t\t\t\t\tconst selectedClientId = getBlockSelectionStart();\n\t\t\t\t\tconst clickedClientId = getBlockClientId( event.target );\n\t\t\t\t\t// `endClientId` is not defined if we end the selection by clicking a non-selectable block.\n\t\t\t\t\t// We need to check if there was already a selection with a non-selectable focusNode.\n\t\t\t\t\tconst focusNodeIsNonSelectable =\n\t\t\t\t\t\tclickedClientId !== endClientId;\n\t\t\t\t\tif (\n\t\t\t\t\t\t( startClientId === endClientId &&\n\t\t\t\t\t\t\tselection.isCollapsed ) ||\n\t\t\t\t\t\t! endClientId ||\n\t\t\t\t\t\tfocusNodeIsNonSelectable\n\t\t\t\t\t) {\n\t\t\t\t\t\tendClientId = clickedClientId;\n\t\t\t\t\t}\n\t\t\t\t\t// Handle the case when we have a non-selectable block\n\t\t\t\t\t// selected and click another one.\n\t\t\t\t\tif ( startClientId !== selectedClientId ) {\n\t\t\t\t\t\tstartClientId = selectedClientId;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If the selection did not involve a block, return.\n\t\t\t\tif (\n\t\t\t\t\tstartClientId === undefined &&\n\t\t\t\t\tendClientId === undefined\n\t\t\t\t) {\n\t\t\t\t\tsetContentEditableWrapper( node, false );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst isSingularSelection = startClientId === endClientId;\n\t\t\t\tif ( isSingularSelection ) {\n\t\t\t\t\tselectBlock( startClientId );\n\t\t\t\t} else {\n\t\t\t\t\tconst startPath = [\n\t\t\t\t\t\t...getBlockParents( startClientId ),\n\t\t\t\t\t\tstartClientId,\n\t\t\t\t\t];\n\t\t\t\t\tconst endPath = [\n\t\t\t\t\t\t...getBlockParents( endClientId ),\n\t\t\t\t\t\tendClientId,\n\t\t\t\t\t];\n\t\t\t\t\tconst depth = findDepth( startPath, endPath );\n\n\t\t\t\t\tmultiSelect( startPath[ depth ], endPath[ depth ] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction addListeners() {\n\t\t\t\townerDocument.addEventListener(\n\t\t\t\t\t'selectionchange',\n\t\t\t\t\tonSelectionChange\n\t\t\t\t);\n\t\t\t\tdefaultView.addEventListener( 'mouseup', onSelectionChange );\n\t\t\t}\n\n\t\t\tfunction removeListeners() {\n\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t'selectionchange',\n\t\t\t\t\tonSelectionChange\n\t\t\t\t);\n\t\t\t\tdefaultView.removeEventListener( 'mouseup', onSelectionChange );\n\t\t\t}\n\n\t\t\tfunction resetListeners() {\n\t\t\t\tremoveListeners();\n\t\t\t\taddListeners();\n\t\t\t}\n\n\t\t\taddListeners();\n\t\t\t// We must allow rich text to set selection first. This ensures that\n\t\t\t// our `selectionchange` listener is always reset to be called after\n\t\t\t// the rich text one.\n\t\t\tnode.addEventListener( 'focusin', resetListeners );\n\t\t\treturn () => {\n\t\t\t\tremoveListeners();\n\t\t\t\tnode.removeEventListener( 'focusin', resetListeners );\n\t\t\t};\n\t\t},\n\t\t[ multiSelect, selectBlock, selectionChange, getBlockParents ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { getBlockClientId } from '../../utils/dom';\n\nexport default function useClickSelection() {\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\tconst { isSelectionEnabled, getBlockSelectionStart, hasMultiSelection } =\n\t\tuseSelect( blockEditorStore );\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tfunction onMouseDown( event ) {\n\t\t\t\t// The main button.\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n\t\t\t\tif ( ! isSelectionEnabled() || event.button !== 0 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst startClientId = getBlockSelectionStart();\n\t\t\t\tconst clickedClientId = getBlockClientId( event.target );\n\n\t\t\t\tif ( event.shiftKey ) {\n\t\t\t\t\tif ( startClientId !== clickedClientId ) {\n\t\t\t\t\t\tnode.contentEditable = true;\n\t\t\t\t\t\t// Firefox doesn't automatically move focus.\n\t\t\t\t\t\tnode.focus();\n\t\t\t\t\t}\n\t\t\t\t} else if ( hasMultiSelection() ) {\n\t\t\t\t\t// Allow user to escape out of a multi-selection to a\n\t\t\t\t\t// singular selection of a block via click. This is handled\n\t\t\t\t\t// here since focus handling excludes blocks when there is\n\t\t\t\t\t// multiselection, as focus can be incurred by starting a\n\t\t\t\t\t// multiselection (focus moved to first block's multi-\n\t\t\t\t\t// controls).\n\t\t\t\t\tselectBlock( clickedClientId );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'mousedown', onMouseDown );\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tselectBlock,\n\t\t\tisSelectionEnabled,\n\t\t\tgetBlockSelectionStart,\n\t\t\thasMultiSelection,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\nimport { ENTER, BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport { createBlock, getDefaultBlockName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Handles input for selections across blocks.\n */\nexport default function useInput() {\n\tconst {\n\t\t__unstableIsFullySelected,\n\t\tgetSelectedBlockClientIds,\n\t\t__unstableIsSelectionMergeable,\n\t\thasMultiSelection,\n\t} = useSelect( blockEditorStore );\n\tconst {\n\t\treplaceBlocks,\n\t\t__unstableSplitSelection,\n\t\tremoveBlocks,\n\t\t__unstableDeleteSelection,\n\t\t__unstableExpandSelection,\n\t} = useDispatch( blockEditorStore );\n\n\treturn useRefEffect( ( node ) => {\n\t\tfunction onBeforeInput( event ) {\n\t\t\t// If writing flow is editable, NEVER allow the browser to alter the\n\t\t\t// DOM. This will cause React errors (and the DOM should only be\n\t\t\t// altered in a controlled fashion).\n\t\t\tif ( node.contentEditable === 'true' ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! hasMultiSelection() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( event.keyCode === ENTER ) {\n\t\t\t\tnode.contentEditable = false;\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( __unstableIsFullySelected() ) {\n\t\t\t\t\treplaceBlocks(\n\t\t\t\t\t\tgetSelectedBlockClientIds(),\n\t\t\t\t\t\tcreateBlock( getDefaultBlockName() )\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t__unstableSplitSelection();\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tevent.keyCode === BACKSPACE ||\n\t\t\t\tevent.keyCode === DELETE\n\t\t\t) {\n\t\t\t\tnode.contentEditable = false;\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( __unstableIsFullySelected() ) {\n\t\t\t\t\tremoveBlocks( getSelectedBlockClientIds() );\n\t\t\t\t} else if ( __unstableIsSelectionMergeable() ) {\n\t\t\t\t\t__unstableDeleteSelection( event.keyCode === DELETE );\n\t\t\t\t} else {\n\t\t\t\t\t__unstableExpandSelection();\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\t// If key.length is longer than 1, it's a control key that doesn't\n\t\t\t\t// input anything.\n\t\t\t\tevent.key.length === 1 &&\n\t\t\t\t! ( event.metaKey || event.ctrlKey )\n\t\t\t) {\n\t\t\t\tnode.contentEditable = false;\n\t\t\t\tif ( __unstableIsSelectionMergeable() ) {\n\t\t\t\t\t__unstableDeleteSelection( event.keyCode === DELETE );\n\t\t\t\t} else {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// Safari does not stop default behaviour with either\n\t\t\t\t\t// event.preventDefault() or node.contentEditable = false, so\n\t\t\t\t\t// remove the selection to stop browser manipulation.\n\t\t\t\t\tnode.ownerDocument.defaultView\n\t\t\t\t\t\t.getSelection()\n\t\t\t\t\t\t.removeAllRanges();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction onCompositionStart( event ) {\n\t\t\tif ( ! hasMultiSelection() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnode.contentEditable = false;\n\n\t\t\tif ( __unstableIsSelectionMergeable() ) {\n\t\t\t\t__unstableDeleteSelection();\n\t\t\t} else {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t// Safari does not stop default behaviour with either\n\t\t\t\t// event.preventDefault() or node.contentEditable = false, so\n\t\t\t\t// remove the selection to stop browser manipulation.\n\t\t\t\tnode.ownerDocument.defaultView.getSelection().removeAllRanges();\n\t\t\t}\n\t\t}\n\n\t\tnode.addEventListener( 'beforeinput', onBeforeInput );\n\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\tnode.addEventListener( 'compositionstart', onCompositionStart );\n\t\treturn () => {\n\t\t\tnode.removeEventListener( 'beforeinput', onBeforeInput );\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t\tnode.removeEventListener( 'compositionstart', onCompositionStart );\n\t\t};\n\t}, [] );\n}\n","/**\n * External dependencies\n */\nimport classNames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { useMergeRefs, useRefEffect } from '@wordpress/compose';\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useMultiSelection from './use-multi-selection';\nimport useTabNav from './use-tab-nav';\nimport useArrowNav from './use-arrow-nav';\nimport useSelectAll from './use-select-all';\nimport useDragSelection from './use-drag-selection';\nimport useSelectionObserver from './use-selection-observer';\nimport useClickSelection from './use-click-selection';\nimport useInput from './use-input';\nimport { store as blockEditorStore } from '../../store';\n\nexport function useWritingFlow() {\n\tconst [ before, ref, after ] = useTabNav();\n\tconst hasMultiSelection = useSelect(\n\t\t( select ) => select( blockEditorStore ).hasMultiSelection(),\n\t\t[]\n\t);\n\n\treturn [\n\t\tbefore,\n\t\tuseMergeRefs( [\n\t\t\tref,\n\t\t\tuseInput(),\n\t\t\tuseDragSelection(),\n\t\t\tuseSelectionObserver(),\n\t\t\tuseClickSelection(),\n\t\t\tuseMultiSelection(),\n\t\t\tuseSelectAll(),\n\t\t\tuseArrowNav(),\n\t\t\tuseRefEffect(\n\t\t\t\t( node ) => {\n\t\t\t\t\tnode.tabIndex = 0;\n\t\t\t\t\tnode.contentEditable = hasMultiSelection;\n\n\t\t\t\t\tif ( ! hasMultiSelection ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tnode.classList.add( 'has-multi-selection' );\n\t\t\t\t\tnode.setAttribute(\n\t\t\t\t\t\t'aria-label',\n\t\t\t\t\t\t__( 'Multiple selected blocks' )\n\t\t\t\t\t);\n\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tnode.classList.remove( 'has-multi-selection' );\n\t\t\t\t\t\tnode.removeAttribute( 'aria-label' );\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\t[ hasMultiSelection ]\n\t\t\t),\n\t\t] ),\n\t\tafter,\n\t];\n}\n\nfunction WritingFlow( { children, ...props }, forwardedRef ) {\n\tconst [ before, ref, after ] = useWritingFlow();\n\treturn (\n\t\t<>\n\t\t\t{ before }\n\t\t\t<div\n\t\t\t\t{ ...props }\n\t\t\t\tref={ useMergeRefs( [ ref, forwardedRef ] ) }\n\t\t\t\tclassName={ classNames(\n\t\t\t\t\tprops.className,\n\t\t\t\t\t'block-editor-writing-flow'\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t\t{ after }\n\t\t</>\n\t);\n}\n\n/**\n * Handles selection and navigation across blocks. This component should be\n * wrapped around BlockList.\n *\n * @param {Object}    props          Component properties.\n * @param {WPElement} props.children Children to be rendered.\n */\nexport default forwardRef( WritingFlow );\n","/**\n * WordPress dependencies\n */\nimport { focus, isFormElement } from '@wordpress/dom';\nimport { TAB, ESCAPE } from '@wordpress/keycodes';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect, useMergeRefs } from '@wordpress/compose';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function useTabNav() {\n\tconst container = useRef();\n\tconst focusCaptureBeforeRef = useRef();\n\tconst focusCaptureAfterRef = useRef();\n\tconst lastFocus = useRef();\n\tconst { hasMultiSelection, getSelectedBlockClientId, getBlockCount } =\n\t\tuseSelect( blockEditorStore );\n\tconst { setNavigationMode } = useDispatch( blockEditorStore );\n\tconst isNavigationMode = useSelect(\n\t\t( select ) => select( blockEditorStore ).isNavigationMode(),\n\t\t[]\n\t);\n\n\t// Don't allow tabbing to this element in Navigation mode.\n\tconst focusCaptureTabIndex = ! isNavigationMode ? '0' : undefined;\n\n\t// Reference that holds the a flag for enabling or disabling\n\t// capturing on the focus capture elements.\n\tconst noCapture = useRef();\n\n\tfunction onFocusCapture( event ) {\n\t\t// Do not capture incoming focus if set by us in WritingFlow.\n\t\tif ( noCapture.current ) {\n\t\t\tnoCapture.current = null;\n\t\t} else if ( hasMultiSelection() ) {\n\t\t\tcontainer.current.focus();\n\t\t} else if ( getSelectedBlockClientId() ) {\n\t\t\tlastFocus.current.focus();\n\t\t} else {\n\t\t\tsetNavigationMode( true );\n\n\t\t\tconst canvasElement =\n\t\t\t\tcontainer.current.ownerDocument === event.target.ownerDocument\n\t\t\t\t\t? container.current\n\t\t\t\t\t: container.current.ownerDocument.defaultView.frameElement;\n\n\t\t\tconst isBefore =\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tevent.target.compareDocumentPosition( canvasElement ) &\n\t\t\t\tevent.target.DOCUMENT_POSITION_FOLLOWING;\n\t\t\tconst tabbables = focus.tabbable.find( container.current );\n\n\t\t\tif ( tabbables.length ) {\n\t\t\t\tconst next = isBefore\n\t\t\t\t\t? tabbables[ 0 ]\n\t\t\t\t\t: tabbables[ tabbables.length - 1 ];\n\n\t\t\t\tnext.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tconst before = (\n\t\t<div\n\t\t\tref={ focusCaptureBeforeRef }\n\t\t\ttabIndex={ focusCaptureTabIndex }\n\t\t\tonFocus={ onFocusCapture }\n\t\t/>\n\t);\n\n\tconst after = (\n\t\t<div\n\t\t\tref={ focusCaptureAfterRef }\n\t\t\ttabIndex={ focusCaptureTabIndex }\n\t\t\tonFocus={ onFocusCapture }\n\t\t/>\n\t);\n\n\tconst ref = useRefEffect( ( node ) => {\n\t\tfunction onKeyDown( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( event.keyCode === ESCAPE ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tsetNavigationMode( true );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// In Edit mode, Tab should focus the first tabbable element after\n\t\t\t// the content, which is normally the sidebar (with block controls)\n\t\t\t// and Shift+Tab should focus the first tabbable element before the\n\t\t\t// content, which is normally the block toolbar.\n\t\t\t// Arrow keys can be used, and Tab and arrow keys can be used in\n\t\t\t// Navigation mode (press Esc), to navigate through blocks.\n\t\t\tif ( event.keyCode !== TAB ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst isShift = event.shiftKey;\n\t\t\tconst direction = isShift ? 'findPrevious' : 'findNext';\n\n\t\t\tif ( ! hasMultiSelection() && ! getSelectedBlockClientId() ) {\n\t\t\t\t// Preserve the behaviour of entering navigation mode when\n\t\t\t\t// tabbing into the content without a block selection.\n\t\t\t\t// `onFocusCapture` already did this previously, but we need to\n\t\t\t\t// do it again here because after clearing block selection,\n\t\t\t\t// focus land on the writing flow container and pressing Tab\n\t\t\t\t// will no longer send focus through the focus capture element.\n\t\t\t\tif ( event.target === node ) setNavigationMode( true );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Allow tabbing from the block wrapper to a form element,\n\t\t\t// and between form elements rendered in a block,\n\t\t\t// such as inside a placeholder. Form elements are generally\n\t\t\t// meant to be UI rather than part of the content. Ideally\n\t\t\t// these are not rendered in the content and perhaps in the\n\t\t\t// future they can be rendered in an iframe or shadow DOM.\n\t\t\tif (\n\t\t\t\t( isFormElement( event.target ) ||\n\t\t\t\t\tevent.target.getAttribute( 'data-block' ) ===\n\t\t\t\t\t\tgetSelectedBlockClientId() ) &&\n\t\t\t\tisFormElement( focus.tabbable[ direction ]( event.target ) )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst next = isShift ? focusCaptureBeforeRef : focusCaptureAfterRef;\n\n\t\t\t// Disable focus capturing on the focus capture element, so it\n\t\t\t// doesn't refocus this block and so it allows default behaviour\n\t\t\t// (moving focus to the next tabbable element).\n\t\t\tnoCapture.current = true;\n\n\t\t\t// Focusing the focus capture element, which is located above and\n\t\t\t// below the editor, should not scroll the page all the way up or\n\t\t\t// down.\n\t\t\tnext.current.focus( { preventScroll: true } );\n\t\t}\n\n\t\tfunction onFocusOut( event ) {\n\t\t\tlastFocus.current = event.target;\n\n\t\t\tconst { ownerDocument } = node;\n\n\t\t\t// If focus disappears due to there being no blocks, move focus to\n\t\t\t// the writing flow wrapper.\n\t\t\tif (\n\t\t\t\t! event.relatedTarget &&\n\t\t\t\townerDocument.activeElement === ownerDocument.body &&\n\t\t\t\tgetBlockCount() === 0\n\t\t\t) {\n\t\t\t\tnode.focus();\n\t\t\t}\n\t\t}\n\n\t\t// When tabbing back to an element in block list, this event handler prevents scrolling if the\n\t\t// focus capture divs (before/after) are outside of the viewport. (For example shift+tab back to a paragraph\n\t\t// when focus is on a sidebar element. This prevents the scrollable writing area from jumping either to the\n\t\t// top or bottom of the document.\n\t\t//\n\t\t// Note that it isn't possible to disable scrolling in the onFocus event. We need to intercept this\n\t\t// earlier in the keypress handler, and call focus( { preventScroll: true } ) instead.\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/HTMLOrForeignElement/focus#parameters\n\t\tfunction preventScrollOnTab( event ) {\n\t\t\tif ( event.keyCode !== TAB ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( event.target?.getAttribute( 'role' ) === 'region' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( container.current === event.target ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst isShift = event.shiftKey;\n\t\t\tconst direction = isShift ? 'findPrevious' : 'findNext';\n\t\t\tconst target = focus.tabbable[ direction ]( event.target );\n\t\t\t// Only do something when the next tabbable is a focus capture div (before/after)\n\t\t\tif (\n\t\t\t\ttarget === focusCaptureBeforeRef.current ||\n\t\t\t\ttarget === focusCaptureAfterRef.current\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\ttarget.focus( { preventScroll: true } );\n\t\t\t}\n\t\t}\n\n\t\tconst { ownerDocument } = node;\n\t\tconst { defaultView } = ownerDocument;\n\t\tdefaultView.addEventListener( 'keydown', preventScrollOnTab );\n\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\tnode.addEventListener( 'focusout', onFocusOut );\n\t\treturn () => {\n\t\t\tdefaultView.removeEventListener( 'keydown', preventScrollOnTab );\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t\tnode.removeEventListener( 'focusout', onFocusOut );\n\t\t};\n\t}, [] );\n\n\tconst mergedRefs = useMergeRefs( [ container, ref ] );\n\n\treturn [ before, mergedRefs, after ];\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tcreatePortal,\n\tforwardRef,\n\tuseMemo,\n\tuseReducer,\n\tuseEffect,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tuseResizeObserver,\n\tuseMergeRefs,\n\tuseRefEffect,\n\tuseDisabled,\n} from '@wordpress/compose';\nimport { __experimentalStyleProvider as StyleProvider } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useBlockSelectionClearer } from '../block-selection-clearer';\nimport { useWritingFlow } from '../writing-flow';\nimport { useCompatibilityStyles } from './use-compatibility-styles';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Bubbles some event types (keydown, keypress, and dragover) to parent document\n * document to ensure that the keyboard shortcuts and drag and drop work.\n *\n * Ideally, we should remove event bubbling in the future. Keyboard shortcuts\n * should be context dependent, e.g. actions on blocks like Cmd+A should not\n * work globally outside the block editor.\n *\n * @param {Document} doc Document to attach listeners to.\n */\nfunction bubbleEvents( doc ) {\n\tconst { defaultView } = doc;\n\tconst { frameElement } = defaultView;\n\n\tfunction bubbleEvent( event ) {\n\t\tconst prototype = Object.getPrototypeOf( event );\n\t\tconst constructorName = prototype.constructor.name;\n\t\tconst Constructor = window[ constructorName ];\n\n\t\tconst init = {};\n\n\t\tfor ( const key in event ) {\n\t\t\tinit[ key ] = event[ key ];\n\t\t}\n\n\t\tif ( event instanceof defaultView.MouseEvent ) {\n\t\t\tconst rect = frameElement.getBoundingClientRect();\n\t\t\tinit.clientX += rect.left;\n\t\t\tinit.clientY += rect.top;\n\t\t}\n\n\t\tconst newEvent = new Constructor( event.type, init );\n\t\tconst cancelled = ! frameElement.dispatchEvent( newEvent );\n\n\t\tif ( cancelled ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tconst eventTypes = [ 'dragover', 'mousemove' ];\n\n\tfor ( const name of eventTypes ) {\n\t\tdoc.addEventListener( name, bubbleEvent );\n\t}\n}\n\nfunction useParsedAssets( html ) {\n\treturn useMemo( () => {\n\t\tconst doc = document.implementation.createHTMLDocument( '' );\n\t\tdoc.body.innerHTML = html;\n\t\treturn Array.from( doc.body.children );\n\t}, [ html ] );\n}\n\nasync function loadScript( head, { id, src } ) {\n\treturn new Promise( ( resolve, reject ) => {\n\t\tconst script = head.ownerDocument.createElement( 'script' );\n\t\tscript.id = id;\n\t\tif ( src ) {\n\t\t\tscript.src = src;\n\t\t\tscript.onload = () => resolve();\n\t\t\tscript.onerror = () => reject();\n\t\t} else {\n\t\t\tresolve();\n\t\t}\n\t\thead.appendChild( script );\n\t} );\n}\n\nfunction Iframe( {\n\tcontentRef,\n\tchildren,\n\ttabIndex = 0,\n\tscale = 1,\n\tframeSize = 0,\n\texpand = false,\n\treadonly,\n\tforwardedRef: ref,\n\t...props\n} ) {\n\tconst assets = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getSettings().__unstableResolvedAssets,\n\t\t[]\n\t);\n\tconst [ , forceRender ] = useReducer( () => ( {} ) );\n\tconst [ iframeDocument, setIframeDocument ] = useState();\n\tconst [ bodyClasses, setBodyClasses ] = useState( [] );\n\tconst compatStyles = useCompatibilityStyles();\n\tconst scripts = useParsedAssets( assets?.scripts );\n\tconst clearerRef = useBlockSelectionClearer();\n\tconst [ before, writingFlowRef, after ] = useWritingFlow();\n\tconst [ contentResizeListener, { height: contentHeight } ] =\n\t\tuseResizeObserver();\n\tconst setRef = useRefEffect( ( node ) => {\n\t\tlet iFrameDocument;\n\t\t// Prevent the default browser action for files dropped outside of dropzones.\n\t\tfunction preventFileDropDefault( event ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t\tfunction onLoad() {\n\t\t\tconst { contentDocument, ownerDocument } = node;\n\t\t\tconst { documentElement } = contentDocument;\n\t\t\tiFrameDocument = contentDocument;\n\n\t\t\tbubbleEvents( contentDocument );\n\t\t\tsetIframeDocument( contentDocument );\n\t\t\tclearerRef( documentElement );\n\n\t\t\t// Ideally ALL classes that are added through get_body_class should\n\t\t\t// be added in the editor too, which we'll somehow have to get from\n\t\t\t// the server in the future (which will run the PHP filters).\n\t\t\tsetBodyClasses(\n\t\t\t\tArray.from( ownerDocument.body.classList ).filter(\n\t\t\t\t\t( name ) =>\n\t\t\t\t\t\tname.startsWith( 'admin-color-' ) ||\n\t\t\t\t\t\tname.startsWith( 'post-type-' ) ||\n\t\t\t\t\t\tname === 'wp-embed-responsive'\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tcontentDocument.dir = ownerDocument.dir;\n\t\t\tdocumentElement.removeChild( contentDocument.body );\n\n\t\t\tfor ( const compatStyle of compatStyles ) {\n\t\t\t\tif ( contentDocument.getElementById( compatStyle.id ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcontentDocument.head.appendChild(\n\t\t\t\t\tcompatStyle.cloneNode( true )\n\t\t\t\t);\n\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`${ compatStyle.id } was added to the iframe incorrectly. Please use block.json or enqueue_block_assets to add styles to the iframe.`,\n\t\t\t\t\tcompatStyle\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tiFrameDocument.addEventListener(\n\t\t\t\t'dragover',\n\t\t\t\tpreventFileDropDefault,\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tiFrameDocument.addEventListener(\n\t\t\t\t'drop',\n\t\t\t\tpreventFileDropDefault,\n\t\t\t\tfalse\n\t\t\t);\n\t\t}\n\n\t\tnode.addEventListener( 'load', onLoad );\n\n\t\treturn () => {\n\t\t\tnode.removeEventListener( 'load', onLoad );\n\t\t\tiFrameDocument?.removeEventListener(\n\t\t\t\t'dragover',\n\t\t\t\tpreventFileDropDefault\n\t\t\t);\n\t\t\tiFrameDocument?.removeEventListener(\n\t\t\t\t'drop',\n\t\t\t\tpreventFileDropDefault\n\t\t\t);\n\t\t};\n\t}, [] );\n\n\tconst headRef = useRefEffect( ( element ) => {\n\t\tscripts\n\t\t\t.reduce(\n\t\t\t\t( promise, script ) =>\n\t\t\t\t\tpromise.then( () => loadScript( element, script ) ),\n\t\t\t\tPromise.resolve()\n\t\t\t)\n\t\t\t.finally( () => {\n\t\t\t\t// When script are loaded, re-render blocks to allow them\n\t\t\t\t// to initialise.\n\t\t\t\tforceRender();\n\t\t\t} );\n\t}, [] );\n\tconst disabledRef = useDisabled( { isDisabled: ! readonly } );\n\tconst bodyRef = useMergeRefs( [\n\t\tcontentRef,\n\t\tclearerRef,\n\t\twritingFlowRef,\n\t\tdisabledRef,\n\t\theadRef,\n\t] );\n\n\t// Correct doctype is required to enable rendering in standards\n\t// mode. Also preload the styles to avoid a flash of unstyled\n\t// content.\n\tconst html =\n\t\t'<!doctype html>' +\n\t\t'<style>html{height:auto!important;}body{margin:0}</style>' +\n\t\t( assets?.styles ?? '' );\n\n\tconst [ src, cleanup ] = useMemo( () => {\n\t\tconst _src = URL.createObjectURL(\n\t\t\tnew window.Blob( [ html ], { type: 'text/html' } )\n\t\t);\n\t\treturn [ _src, () => URL.revokeObjectURL( _src ) ];\n\t}, [ html ] );\n\n\tuseEffect( () => cleanup, [ cleanup ] );\n\n\t// We need to counter the margin created by scaling the iframe. If the scale\n\t// is e.g. 0.45, then the top + bottom margin is 0.55 (1 - scale). Just the\n\t// top or bottom margin is 0.55 / 2 ((1 - scale) / 2).\n\tconst marginFromScaling = ( contentHeight * ( 1 - scale ) ) / 2;\n\n\treturn (\n\t\t<>\n\t\t\t{ tabIndex >= 0 && before }\n\t\t\t<iframe\n\t\t\t\t{ ...props }\n\t\t\t\tstyle={ {\n\t\t\t\t\t...props.style,\n\t\t\t\t\theight: expand ? contentHeight : props.style?.height,\n\t\t\t\t\tmarginTop:\n\t\t\t\t\t\tscale !== 1\n\t\t\t\t\t\t\t? -marginFromScaling + frameSize\n\t\t\t\t\t\t\t: props.style?.marginTop,\n\t\t\t\t\tmarginBottom:\n\t\t\t\t\t\tscale !== 1\n\t\t\t\t\t\t\t? -marginFromScaling + frameSize\n\t\t\t\t\t\t\t: props.style?.marginBottom,\n\t\t\t\t\ttransform:\n\t\t\t\t\t\tscale !== 1\n\t\t\t\t\t\t\t? `scale( ${ scale } )`\n\t\t\t\t\t\t\t: props.style?.transform,\n\t\t\t\t\ttransition: 'all .3s',\n\t\t\t\t} }\n\t\t\t\tref={ useMergeRefs( [ ref, setRef ] ) }\n\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\t// Correct doctype is required to enable rendering in standards\n\t\t\t\t// mode. Also preload the styles to avoid a flash of unstyled\n\t\t\t\t// content.\n\t\t\t\tsrc={ src }\n\t\t\t\ttitle={ __( 'Editor canvas' ) }\n\t\t\t>\n\t\t\t\t{ iframeDocument &&\n\t\t\t\t\tcreatePortal(\n\t\t\t\t\t\t<body\n\t\t\t\t\t\t\tref={ bodyRef }\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'block-editor-iframe__body',\n\t\t\t\t\t\t\t\t'editor-styles-wrapper',\n\t\t\t\t\t\t\t\t...bodyClasses\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ contentResizeListener }\n\t\t\t\t\t\t\t<StyleProvider document={ iframeDocument }>\n\t\t\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t\t</StyleProvider>\n\t\t\t\t\t\t</body>,\n\t\t\t\t\t\tiframeDocument.documentElement\n\t\t\t\t\t) }\n\t\t\t</iframe>\n\t\t\t{ tabIndex >= 0 && after }\n\t\t</>\n\t);\n}\n\nfunction IframeIfReady( props, ref ) {\n\tconst isInitialised = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getSettings().__internalIsInitialized,\n\t\t[]\n\t);\n\n\t// We shouldn't render the iframe until the editor settings are initialised.\n\t// The initial settings are needed to get the styles for the srcDoc, which\n\t// cannot be changed after the iframe is mounted. srcDoc is used to to set\n\t// the initial iframe HTML, which is required to avoid a flash of unstyled\n\t// content.\n\tif ( ! isInitialised ) {\n\t\treturn null;\n\t}\n\n\treturn <Iframe { ...props } forwardedRef={ ref } />;\n}\n\nexport default forwardRef( IframeIfReady );\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Returns a list of stylesheets that target the editor canvas. A stylesheet is\n * considered targetting the editor a canvas if it contains the\n * `editor-styles-wrapper`, `wp-block`, or `wp-block-*` class selectors.\n *\n * Ideally, this hook should be removed in the future and styles should be added\n * explicitly as editor styles.\n */\nexport function useCompatibilityStyles() {\n\t// Only memoize the result once on load, since these stylesheets should not\n\t// change.\n\treturn useMemo( () => {\n\t\t// Search the document for stylesheets targetting the editor canvas.\n\t\treturn Array.from( document.styleSheets ).reduce(\n\t\t\t( accumulator, styleSheet ) => {\n\t\t\t\ttry {\n\t\t\t\t\t// May fail for external styles.\n\t\t\t\t\t// eslint-disable-next-line no-unused-expressions\n\t\t\t\t\tstyleSheet.cssRules;\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\treturn accumulator;\n\t\t\t\t}\n\n\t\t\t\tconst { ownerNode, cssRules } = styleSheet;\n\n\t\t\t\t// Stylesheet is added by another stylesheet. See\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/StyleSheet/ownerNode#notes.\n\t\t\t\tif ( ownerNode === null ) {\n\t\t\t\t\treturn accumulator;\n\t\t\t\t}\n\n\t\t\t\tif ( ! cssRules ) {\n\t\t\t\t\treturn accumulator;\n\t\t\t\t}\n\n\t\t\t\t// Don't try to add the reset styles, which were removed as a dependency\n\t\t\t\t// from `edit-blocks` for the iframe since we don't need to reset admin\n\t\t\t\t// styles.\n\t\t\t\tif ( ownerNode.id === 'wp-reset-editor-styles-css' ) {\n\t\t\t\t\treturn accumulator;\n\t\t\t\t}\n\n\t\t\t\tfunction matchFromRules( _cssRules ) {\n\t\t\t\t\treturn Array.from( _cssRules ).find(\n\t\t\t\t\t\t( {\n\t\t\t\t\t\t\tselectorText,\n\t\t\t\t\t\t\tconditionText,\n\t\t\t\t\t\t\tcssRules: __cssRules,\n\t\t\t\t\t\t} ) => {\n\t\t\t\t\t\t\t// If the rule is conditional then it will not have selector text.\n\t\t\t\t\t\t\t// Recurse into child CSS ruleset to determine selector eligibility.\n\t\t\t\t\t\t\tif ( conditionText ) {\n\t\t\t\t\t\t\t\treturn matchFromRules( __cssRules );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\tselectorText &&\n\t\t\t\t\t\t\t\t( selectorText.includes(\n\t\t\t\t\t\t\t\t\t'.editor-styles-wrapper'\n\t\t\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t\t\tselectorText.includes( '.wp-block' ) )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif ( matchFromRules( cssRules ) ) {\n\t\t\t\t\tconst isInline = ownerNode.tagName === 'STYLE';\n\n\t\t\t\t\tif ( isInline ) {\n\t\t\t\t\t\t// If the current target is inline,\n\t\t\t\t\t\t// it could be a dependency of an existing stylesheet.\n\t\t\t\t\t\t// Look for that dependency and add it BEFORE the current target.\n\t\t\t\t\t\tconst mainStylesCssId = ownerNode.id.replace(\n\t\t\t\t\t\t\t'-inline-css',\n\t\t\t\t\t\t\t'-css'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst mainStylesElement =\n\t\t\t\t\t\t\tdocument.getElementById( mainStylesCssId );\n\t\t\t\t\t\tif ( mainStylesElement ) {\n\t\t\t\t\t\t\taccumulator.push(\n\t\t\t\t\t\t\t\tmainStylesElement.cloneNode( true )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\taccumulator.push( ownerNode.cloneNode( true ) );\n\n\t\t\t\t\tif ( ! isInline ) {\n\t\t\t\t\t\t// If the current target is not inline,\n\t\t\t\t\t\t// we still look for inline styles that could be relevant for the current target.\n\t\t\t\t\t\t// If they exist, add them AFTER the current target.\n\t\t\t\t\t\tconst inlineStylesCssId = ownerNode.id.replace(\n\t\t\t\t\t\t\t'-css',\n\t\t\t\t\t\t\t'-inline-css'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst inlineStylesElement =\n\t\t\t\t\t\t\tdocument.getElementById( inlineStylesCssId );\n\t\t\t\t\t\tif ( inlineStylesElement ) {\n\t\t\t\t\t\t\taccumulator.push(\n\t\t\t\t\t\t\t\tinlineStylesElement.cloneNode( true )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn accumulator;\n\t\t\t},\n\t\t\t[]\n\t\t);\n\t}, [] );\n}\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n","var o=function(o){var t=o/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},t=function(t){return.2126*o(t.r)+.7152*o(t.g)+.0722*o(t.b)};export default function(o){o.prototype.luminance=function(){return o=t(this.rgba),void 0===(r=2)&&(r=0),void 0===n&&(n=Math.pow(10,r)),Math.round(n*o)/n+0;var o,r,n},o.prototype.contrast=function(r){void 0===r&&(r=\"#FFF\");var n,a,i,e,v,u,d,c=r instanceof o?r:new o(r);return e=this.rgba,v=c.toRgb(),u=t(e),d=t(v),n=u>d?(u+.05)/(d+.05):(d+.05)/(u+.05),void 0===(a=2)&&(a=0),void 0===i&&(i=Math.pow(10,a)),Math.floor(i*n)/i+0},o.prototype.isReadable=function(o,t){return void 0===o&&(o=\"#FFF\"),void 0===t&&(t={}),this.contrast(o)>=(e=void 0===(i=(r=t).size)?\"normal\":i,\"AAA\"===(a=void 0===(n=r.level)?\"AA\":n)&&\"normal\"===e?7:\"AA\"===a&&\"large\"===e?3:4.5);var r,n,a,i,e}}\n","/* eslint-disable @wordpress/no-unused-vars-before-return */\n\n// Adapted from https://github.com/reworkcss/css\n// because we needed to remove source map support.\n\n// http://www.w3.org/TR/CSS21/grammar.htm\n// https://github.com/visionmedia/css-parse/pull/49#issuecomment-30088027\nconst commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\n\nexport default function ( css, options ) {\n\toptions = options || {};\n\n\t/**\n\t * Positional.\n\t */\n\n\tlet lineno = 1;\n\tlet column = 1;\n\n\t/**\n\t * Update lineno and column based on `str`.\n\t */\n\n\tfunction updatePosition( str ) {\n\t\tconst lines = str.match( /\\n/g );\n\t\tif ( lines ) {\n\t\t\tlineno += lines.length;\n\t\t}\n\t\tconst i = str.lastIndexOf( '\\n' );\n\t\t// eslint-disable-next-line no-bitwise\n\t\tcolumn = ~i ? str.length - i : column + str.length;\n\t}\n\n\t/**\n\t * Mark position and patch `node.position`.\n\t */\n\n\tfunction position() {\n\t\tconst start = { line: lineno, column };\n\t\treturn function ( node ) {\n\t\t\tnode.position = new Position( start );\n\t\t\twhitespace();\n\t\t\treturn node;\n\t\t};\n\t}\n\n\t/**\n\t * Store position information for a node\n\t */\n\n\tfunction Position( start ) {\n\t\tthis.start = start;\n\t\tthis.end = { line: lineno, column };\n\t\tthis.source = options.source;\n\t}\n\n\t/**\n\t * Non-enumerable source string\n\t */\n\n\tPosition.prototype.content = css;\n\n\t/**\n\t * Error `msg`.\n\t */\n\n\tconst errorsList = [];\n\n\tfunction error( msg ) {\n\t\tconst err = new Error(\n\t\t\toptions.source + ':' + lineno + ':' + column + ': ' + msg\n\t\t);\n\t\terr.reason = msg;\n\t\terr.filename = options.source;\n\t\terr.line = lineno;\n\t\terr.column = column;\n\t\terr.source = css;\n\n\t\tif ( options.silent ) {\n\t\t\terrorsList.push( err );\n\t\t} else {\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\t/**\n\t * Parse stylesheet.\n\t */\n\n\tfunction stylesheet() {\n\t\tconst rulesList = rules();\n\n\t\treturn {\n\t\t\ttype: 'stylesheet',\n\t\t\tstylesheet: {\n\t\t\t\tsource: options.source,\n\t\t\t\trules: rulesList,\n\t\t\t\tparsingErrors: errorsList,\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * Opening brace.\n\t */\n\n\tfunction open() {\n\t\treturn match( /^{\\s*/ );\n\t}\n\n\t/**\n\t * Closing brace.\n\t */\n\n\tfunction close() {\n\t\treturn match( /^}/ );\n\t}\n\n\t/**\n\t * Parse ruleset.\n\t */\n\n\tfunction rules() {\n\t\tlet node;\n\t\tconst accumulator = [];\n\t\twhitespace();\n\t\tcomments( accumulator );\n\t\twhile (\n\t\t\tcss.length &&\n\t\t\tcss.charAt( 0 ) !== '}' &&\n\t\t\t( node = atrule() || rule() )\n\t\t) {\n\t\t\tif ( node !== false ) {\n\t\t\t\taccumulator.push( node );\n\t\t\t\tcomments( accumulator );\n\t\t\t}\n\t\t}\n\t\treturn accumulator;\n\t}\n\n\t/**\n\t * Match `re` and return captures.\n\t */\n\n\tfunction match( re ) {\n\t\tconst m = re.exec( css );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\t\tconst str = m[ 0 ];\n\t\tupdatePosition( str );\n\t\tcss = css.slice( str.length );\n\t\treturn m;\n\t}\n\n\t/**\n\t * Parse whitespace.\n\t */\n\n\tfunction whitespace() {\n\t\tmatch( /^\\s*/ );\n\t}\n\n\t/**\n\t * Parse comments;\n\t */\n\n\tfunction comments( accumulator ) {\n\t\tlet c;\n\t\taccumulator = accumulator || [];\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( ( c = comment() ) ) {\n\t\t\tif ( c !== false ) {\n\t\t\t\taccumulator.push( c );\n\t\t\t}\n\t\t}\n\t\treturn accumulator;\n\t}\n\n\t/**\n\t * Parse comment.\n\t */\n\n\tfunction comment() {\n\t\tconst pos = position();\n\t\tif ( '/' !== css.charAt( 0 ) || '*' !== css.charAt( 1 ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet i = 2;\n\t\twhile (\n\t\t\t'' !== css.charAt( i ) &&\n\t\t\t( '*' !== css.charAt( i ) || '/' !== css.charAt( i + 1 ) )\n\t\t) {\n\t\t\t++i;\n\t\t}\n\t\ti += 2;\n\n\t\tif ( '' === css.charAt( i - 1 ) ) {\n\t\t\treturn error( 'End of comment missing' );\n\t\t}\n\n\t\tconst str = css.slice( 2, i - 2 );\n\t\tcolumn += 2;\n\t\tupdatePosition( str );\n\t\tcss = css.slice( i );\n\t\tcolumn += 2;\n\n\t\treturn pos( {\n\t\t\ttype: 'comment',\n\t\t\tcomment: str,\n\t\t} );\n\t}\n\n\t/**\n\t * Parse selector.\n\t */\n\n\tfunction selector() {\n\t\tconst m = match( /^([^{]+)/ );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\t\t// FIXME: Remove all comments from selectors http://ostermiller.org/findcomment.html\n\t\treturn trim( m[ 0 ] )\n\t\t\t.replace( /\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '' )\n\t\t\t.replace( /\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function ( matched ) {\n\t\t\t\treturn matched.replace( /,/g, '\\u200C' );\n\t\t\t} )\n\t\t\t.split( /\\s*(?![^(]*\\)),\\s*/ )\n\t\t\t.map( function ( s ) {\n\t\t\t\treturn s.replace( /\\u200C/g, ',' );\n\t\t\t} );\n\t}\n\n\t/**\n\t * Parse declaration.\n\t */\n\n\tfunction declaration() {\n\t\tconst pos = position();\n\n\t\t// prop.\n\t\tlet prop = match( /^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/ );\n\t\tif ( ! prop ) {\n\t\t\treturn;\n\t\t}\n\t\tprop = trim( prop[ 0 ] );\n\n\t\t// :\n\t\tif ( ! match( /^:\\s*/ ) ) {\n\t\t\treturn error( \"property missing ':'\" );\n\t\t}\n\n\t\t// val.\n\t\tconst val = match(\n\t\t\t/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/\n\t\t);\n\n\t\tconst ret = pos( {\n\t\t\ttype: 'declaration',\n\t\t\tproperty: prop.replace( commentre, '' ),\n\t\t\tvalue: val ? trim( val[ 0 ] ).replace( commentre, '' ) : '',\n\t\t} );\n\n\t\t// ;\n\t\tmatch( /^[;\\s]*/ );\n\n\t\treturn ret;\n\t}\n\n\t/**\n\t * Parse declarations.\n\t */\n\n\tfunction declarations() {\n\t\tconst decls = [];\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"missing '{'\" );\n\t\t}\n\t\tcomments( decls );\n\n\t\t// declarations.\n\t\tlet decl;\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( ( decl = declaration() ) ) {\n\t\t\tif ( decl !== false ) {\n\t\t\t\tdecls.push( decl );\n\t\t\t\tcomments( decls );\n\t\t\t}\n\t\t}\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"missing '}'\" );\n\t\t}\n\t\treturn decls;\n\t}\n\n\t/**\n\t * Parse keyframe.\n\t */\n\n\tfunction keyframe() {\n\t\tlet m;\n\t\tconst vals = [];\n\t\tconst pos = position();\n\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( ( m = match( /^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/ ) ) ) {\n\t\t\tvals.push( m[ 1 ] );\n\t\t\tmatch( /^,\\s*/ );\n\t\t}\n\n\t\tif ( ! vals.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'keyframe',\n\t\t\tvalues: vals,\n\t\t\tdeclarations: declarations(),\n\t\t} );\n\t}\n\n\t/**\n\t * Parse keyframes.\n\t */\n\n\tfunction atkeyframes() {\n\t\tconst pos = position();\n\t\tlet m = match( /^@([-\\w]+)?keyframes\\s*/ );\n\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\t\tconst vendor = m[ 1 ];\n\n\t\t// identifier\n\t\tm = match( /^([-\\w]+)\\s*/ );\n\t\tif ( ! m ) {\n\t\t\treturn error( '@keyframes missing name' );\n\t\t}\n\t\tconst name = m[ 1 ];\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@keyframes missing '{'\" );\n\t\t}\n\n\t\tlet frame;\n\t\tlet frames = comments();\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( ( frame = keyframe() ) ) {\n\t\t\tframes.push( frame );\n\t\t\tframes = frames.concat( comments() );\n\t\t}\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@keyframes missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'keyframes',\n\t\t\tname,\n\t\t\tvendor,\n\t\t\tkeyframes: frames,\n\t\t} );\n\t}\n\n\t/**\n\t * Parse supports.\n\t */\n\n\tfunction atsupports() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@supports *([^{]+)/ );\n\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\t\tconst supports = trim( m[ 1 ] );\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@supports missing '{'\" );\n\t\t}\n\n\t\tconst style = comments().concat( rules() );\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@supports missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'supports',\n\t\t\tsupports,\n\t\t\trules: style,\n\t\t} );\n\t}\n\n\t/**\n\t * Parse host.\n\t */\n\n\tfunction athost() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@host\\s*/ );\n\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@host missing '{'\" );\n\t\t}\n\n\t\tconst style = comments().concat( rules() );\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@host missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'host',\n\t\t\trules: style,\n\t\t} );\n\t}\n\n\t/**\n\t * Parse media.\n\t */\n\n\tfunction atmedia() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@media *([^{]+)/ );\n\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\t\tconst media = trim( m[ 1 ] );\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@media missing '{'\" );\n\t\t}\n\n\t\tconst style = comments().concat( rules() );\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@media missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'media',\n\t\t\tmedia,\n\t\t\trules: style,\n\t\t} );\n\t}\n\n\t/**\n\t * Parse custom-media.\n\t */\n\n\tfunction atcustommedia() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/ );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'custom-media',\n\t\t\tname: trim( m[ 1 ] ),\n\t\t\tmedia: trim( m[ 2 ] ),\n\t\t} );\n\t}\n\n\t/**\n\t * Parse paged media.\n\t */\n\n\tfunction atpage() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@page */ );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst sel = selector() || [];\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@page missing '{'\" );\n\t\t}\n\t\tlet decls = comments();\n\n\t\t// declarations.\n\t\tlet decl;\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( ( decl = declaration() ) ) {\n\t\t\tdecls.push( decl );\n\t\t\tdecls = decls.concat( comments() );\n\t\t}\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@page missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'page',\n\t\t\tselectors: sel,\n\t\t\tdeclarations: decls,\n\t\t} );\n\t}\n\n\t/**\n\t * Parse document.\n\t */\n\n\tfunction atdocument() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@([-\\w]+)?document *([^{]+)/ );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst vendor = trim( m[ 1 ] );\n\t\tconst doc = trim( m[ 2 ] );\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@document missing '{'\" );\n\t\t}\n\n\t\tconst style = comments().concat( rules() );\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@document missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'document',\n\t\t\tdocument: doc,\n\t\t\tvendor,\n\t\t\trules: style,\n\t\t} );\n\t}\n\n\t/**\n\t * Parse font-face.\n\t */\n\n\tfunction atfontface() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@font-face\\s*/ );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@font-face missing '{'\" );\n\t\t}\n\t\tlet decls = comments();\n\n\t\t// declarations.\n\t\tlet decl;\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( ( decl = declaration() ) ) {\n\t\t\tdecls.push( decl );\n\t\t\tdecls = decls.concat( comments() );\n\t\t}\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@font-face missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'font-face',\n\t\t\tdeclarations: decls,\n\t\t} );\n\t}\n\n\t/**\n\t * Parse import\n\t */\n\n\tconst atimport = _compileAtrule( 'import' );\n\n\t/**\n\t * Parse charset\n\t */\n\n\tconst atcharset = _compileAtrule( 'charset' );\n\n\t/**\n\t * Parse namespace\n\t */\n\n\tconst atnamespace = _compileAtrule( 'namespace' );\n\n\t/**\n\t * Parse non-block at-rules\n\t */\n\n\tfunction _compileAtrule( name ) {\n\t\tconst re = new RegExp( '^@' + name + '\\\\s*([^;]+);' );\n\t\treturn function () {\n\t\t\tconst pos = position();\n\t\t\tconst m = match( re );\n\t\t\tif ( ! m ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst ret = { type: name };\n\t\t\tret[ name ] = m[ 1 ].trim();\n\t\t\treturn pos( ret );\n\t\t};\n\t}\n\n\t/**\n\t * Parse at rule.\n\t */\n\n\tfunction atrule() {\n\t\tif ( css[ 0 ] !== '@' ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn (\n\t\t\tatkeyframes() ||\n\t\t\tatmedia() ||\n\t\t\tatcustommedia() ||\n\t\t\tatsupports() ||\n\t\t\tatimport() ||\n\t\t\tatcharset() ||\n\t\t\tatnamespace() ||\n\t\t\tatdocument() ||\n\t\t\tatpage() ||\n\t\t\tathost() ||\n\t\t\tatfontface()\n\t\t);\n\t}\n\n\t/**\n\t * Parse rule.\n\t */\n\n\tfunction rule() {\n\t\tconst pos = position();\n\t\tconst sel = selector();\n\n\t\tif ( ! sel ) {\n\t\t\treturn error( 'selector missing' );\n\t\t}\n\t\tcomments();\n\n\t\treturn pos( {\n\t\t\ttype: 'rule',\n\t\t\tselectors: sel,\n\t\t\tdeclarations: declarations(),\n\t\t} );\n\t}\n\n\treturn addParent( stylesheet() );\n}\n\n/**\n * Trim `str`.\n */\n\nfunction trim( str ) {\n\treturn str ? str.replace( /^\\s+|\\s+$/g, '' ) : '';\n}\n\n/**\n * Adds non-enumerable parent node reference to each node.\n */\n\nfunction addParent( obj, parent ) {\n\tconst isNode = obj && typeof obj.type === 'string';\n\tconst childParent = isNode ? obj : parent;\n\n\tfor ( const k in obj ) {\n\t\tconst value = obj[ k ];\n\t\tif ( Array.isArray( value ) ) {\n\t\t\tvalue.forEach( function ( v ) {\n\t\t\t\taddParent( v, childParent );\n\t\t\t} );\n\t\t} else if ( value && typeof value === 'object' ) {\n\t\t\taddParent( value, childParent );\n\t\t}\n\t}\n\n\tif ( isNode ) {\n\t\tObject.defineProperty( obj, 'parent', {\n\t\t\tconfigurable: true,\n\t\t\twritable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: parent || null,\n\t\t} );\n\t}\n\n\treturn obj;\n}\n\n/* eslint-enable @wordpress/no-unused-vars-before-return */\n","// Adapted from https://github.com/reworkcss/css\n// because we needed to remove source map support.\n\n/**\n * Expose `Compiler`.\n */\n\nexport default Compiler;\n\n/**\n * Initialize a compiler.\n */\n\nfunction Compiler( opts ) {\n\tthis.options = opts || {};\n}\n\n/**\n * Emit `str`\n */\n\nCompiler.prototype.emit = function ( str ) {\n\treturn str;\n};\n\n/**\n * Visit `node`.\n */\n\nCompiler.prototype.visit = function ( node ) {\n\treturn this[ node.type ]( node );\n};\n\n/**\n * Map visit over array of `nodes`, optionally using a `delim`\n */\n\nCompiler.prototype.mapVisit = function ( nodes, delim ) {\n\tlet buf = '';\n\tdelim = delim || '';\n\n\tfor ( let i = 0, length = nodes.length; i < length; i++ ) {\n\t\tbuf += this.visit( nodes[ i ] );\n\t\tif ( delim && i < length - 1 ) {\n\t\t\tbuf += this.emit( delim );\n\t\t}\n\t}\n\n\treturn buf;\n};\n","// Adapted from https://github.com/reworkcss/css\n// because we needed to remove source map support.\n\n/**\n * External dependencies\n */\nimport inherits from 'inherits';\n\n/**\n * Internal dependencies\n */\nimport Base from './compiler';\n\n/**\n * Expose compiler.\n */\n\nexport default Compiler;\n\n/**\n * Initialize a new `Compiler`.\n */\n\nfunction Compiler( options ) {\n\tBase.call( this, options );\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\ninherits( Compiler, Base );\n\n/**\n * Compile `node`.\n */\n\nCompiler.prototype.compile = function ( node ) {\n\treturn node.stylesheet.rules.map( this.visit, this ).join( '' );\n};\n\n/**\n * Visit comment node.\n */\n\nCompiler.prototype.comment = function ( node ) {\n\treturn this.emit( '', node.position );\n};\n\n/**\n * Visit import node.\n */\n\nCompiler.prototype.import = function ( node ) {\n\treturn this.emit( '@import ' + node.import + ';', node.position );\n};\n\n/**\n * Visit media node.\n */\n\nCompiler.prototype.media = function ( node ) {\n\treturn (\n\t\tthis.emit( '@media ' + node.media, node.position ) +\n\t\tthis.emit( '{' ) +\n\t\tthis.mapVisit( node.rules ) +\n\t\tthis.emit( '}' )\n\t);\n};\n\n/**\n * Visit document node.\n */\n\nCompiler.prototype.document = function ( node ) {\n\tconst doc = '@' + ( node.vendor || '' ) + 'document ' + node.document;\n\n\treturn (\n\t\tthis.emit( doc, node.position ) +\n\t\tthis.emit( '{' ) +\n\t\tthis.mapVisit( node.rules ) +\n\t\tthis.emit( '}' )\n\t);\n};\n\n/**\n * Visit charset node.\n */\n\nCompiler.prototype.charset = function ( node ) {\n\treturn this.emit( '@charset ' + node.charset + ';', node.position );\n};\n\n/**\n * Visit namespace node.\n */\n\nCompiler.prototype.namespace = function ( node ) {\n\treturn this.emit( '@namespace ' + node.namespace + ';', node.position );\n};\n\n/**\n * Visit supports node.\n */\n\nCompiler.prototype.supports = function ( node ) {\n\treturn (\n\t\tthis.emit( '@supports ' + node.supports, node.position ) +\n\t\tthis.emit( '{' ) +\n\t\tthis.mapVisit( node.rules ) +\n\t\tthis.emit( '}' )\n\t);\n};\n\n/**\n * Visit keyframes node.\n */\n\nCompiler.prototype.keyframes = function ( node ) {\n\treturn (\n\t\tthis.emit(\n\t\t\t'@' + ( node.vendor || '' ) + 'keyframes ' + node.name,\n\t\t\tnode.position\n\t\t) +\n\t\tthis.emit( '{' ) +\n\t\tthis.mapVisit( node.keyframes ) +\n\t\tthis.emit( '}' )\n\t);\n};\n\n/**\n * Visit keyframe node.\n */\n\nCompiler.prototype.keyframe = function ( node ) {\n\tconst decls = node.declarations;\n\n\treturn (\n\t\tthis.emit( node.values.join( ',' ), node.position ) +\n\t\tthis.emit( '{' ) +\n\t\tthis.mapVisit( decls ) +\n\t\tthis.emit( '}' )\n\t);\n};\n\n/**\n * Visit page node.\n */\n\nCompiler.prototype.page = function ( node ) {\n\tconst sel = node.selectors.length ? node.selectors.join( ', ' ) : '';\n\n\treturn (\n\t\tthis.emit( '@page ' + sel, node.position ) +\n\t\tthis.emit( '{' ) +\n\t\tthis.mapVisit( node.declarations ) +\n\t\tthis.emit( '}' )\n\t);\n};\n\n/**\n * Visit font-face node.\n */\n\nCompiler.prototype[ 'font-face' ] = function ( node ) {\n\treturn (\n\t\tthis.emit( '@font-face', node.position ) +\n\t\tthis.emit( '{' ) +\n\t\tthis.mapVisit( node.declarations ) +\n\t\tthis.emit( '}' )\n\t);\n};\n\n/**\n * Visit host node.\n */\n\nCompiler.prototype.host = function ( node ) {\n\treturn (\n\t\tthis.emit( '@host', node.position ) +\n\t\tthis.emit( '{' ) +\n\t\tthis.mapVisit( node.rules ) +\n\t\tthis.emit( '}' )\n\t);\n};\n\n/**\n * Visit custom-media node.\n */\n\nCompiler.prototype[ 'custom-media' ] = function ( node ) {\n\treturn this.emit(\n\t\t'@custom-media ' + node.name + ' ' + node.media + ';',\n\t\tnode.position\n\t);\n};\n\n/**\n * Visit rule node.\n */\n\nCompiler.prototype.rule = function ( node ) {\n\tconst decls = node.declarations;\n\tif ( ! decls.length ) {\n\t\treturn '';\n\t}\n\n\treturn (\n\t\tthis.emit( node.selectors.join( ',' ), node.position ) +\n\t\tthis.emit( '{' ) +\n\t\tthis.mapVisit( decls ) +\n\t\tthis.emit( '}' )\n\t);\n};\n\n/**\n * Visit declaration node.\n */\n\nCompiler.prototype.declaration = function ( node ) {\n\treturn (\n\t\tthis.emit( node.property + ':' + node.value, node.position ) +\n\t\tthis.emit( ';' )\n\t);\n};\n","/* eslint-disable @wordpress/no-unused-vars-before-return */\n\n// Adapted from https://github.com/reworkcss/css\n// because we needed to remove source map support.\n\n/**\n * External dependencies\n */\nimport inherits from 'inherits';\n\n/**\n * Internal dependencies\n */\nimport Base from './compiler';\n\n/**\n * Expose compiler.\n */\n\nexport default Compiler;\n\n/**\n * Initialize a new `Compiler`.\n */\n\nfunction Compiler( options ) {\n\toptions = options || {};\n\tBase.call( this, options );\n\tthis.indentation = options.indent;\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\ninherits( Compiler, Base );\n\n/**\n * Compile `node`.\n */\n\nCompiler.prototype.compile = function ( node ) {\n\treturn this.stylesheet( node );\n};\n\n/**\n * Visit stylesheet node.\n */\n\nCompiler.prototype.stylesheet = function ( node ) {\n\treturn this.mapVisit( node.stylesheet.rules, '\\n\\n' );\n};\n\n/**\n * Visit comment node.\n */\n\nCompiler.prototype.comment = function ( node ) {\n\treturn this.emit(\n\t\tthis.indent() + '/*' + node.comment + '*/',\n\t\tnode.position\n\t);\n};\n\n/**\n * Visit import node.\n */\n\nCompiler.prototype.import = function ( node ) {\n\treturn this.emit( '@import ' + node.import + ';', node.position );\n};\n\n/**\n * Visit media node.\n */\n\nCompiler.prototype.media = function ( node ) {\n\treturn (\n\t\tthis.emit( '@media ' + node.media, node.position ) +\n\t\tthis.emit( ' {\\n' + this.indent( 1 ) ) +\n\t\tthis.mapVisit( node.rules, '\\n\\n' ) +\n\t\tthis.emit( this.indent( -1 ) + '\\n}' )\n\t);\n};\n\n/**\n * Visit document node.\n */\n\nCompiler.prototype.document = function ( node ) {\n\tconst doc = '@' + ( node.vendor || '' ) + 'document ' + node.document;\n\n\treturn (\n\t\tthis.emit( doc, node.position ) +\n\t\tthis.emit( ' ' + ' {\\n' + this.indent( 1 ) ) +\n\t\tthis.mapVisit( node.rules, '\\n\\n' ) +\n\t\tthis.emit( this.indent( -1 ) + '\\n}' )\n\t);\n};\n\n/**\n * Visit charset node.\n */\n\nCompiler.prototype.charset = function ( node ) {\n\treturn this.emit( '@charset ' + node.charset + ';', node.position );\n};\n\n/**\n * Visit namespace node.\n */\n\nCompiler.prototype.namespace = function ( node ) {\n\treturn this.emit( '@namespace ' + node.namespace + ';', node.position );\n};\n\n/**\n * Visit supports node.\n */\n\nCompiler.prototype.supports = function ( node ) {\n\treturn (\n\t\tthis.emit( '@supports ' + node.supports, node.position ) +\n\t\tthis.emit( ' {\\n' + this.indent( 1 ) ) +\n\t\tthis.mapVisit( node.rules, '\\n\\n' ) +\n\t\tthis.emit( this.indent( -1 ) + '\\n}' )\n\t);\n};\n\n/**\n * Visit keyframes node.\n */\n\nCompiler.prototype.keyframes = function ( node ) {\n\treturn (\n\t\tthis.emit(\n\t\t\t'@' + ( node.vendor || '' ) + 'keyframes ' + node.name,\n\t\t\tnode.position\n\t\t) +\n\t\tthis.emit( ' {\\n' + this.indent( 1 ) ) +\n\t\tthis.mapVisit( node.keyframes, '\\n' ) +\n\t\tthis.emit( this.indent( -1 ) + '}' )\n\t);\n};\n\n/**\n * Visit keyframe node.\n */\n\nCompiler.prototype.keyframe = function ( node ) {\n\tconst decls = node.declarations;\n\n\treturn (\n\t\tthis.emit( this.indent() ) +\n\t\tthis.emit( node.values.join( ', ' ), node.position ) +\n\t\tthis.emit( ' {\\n' + this.indent( 1 ) ) +\n\t\tthis.mapVisit( decls, '\\n' ) +\n\t\tthis.emit( this.indent( -1 ) + '\\n' + this.indent() + '}\\n' )\n\t);\n};\n\n/**\n * Visit page node.\n */\n\nCompiler.prototype.page = function ( node ) {\n\tconst sel = node.selectors.length ? node.selectors.join( ', ' ) + ' ' : '';\n\n\treturn (\n\t\tthis.emit( '@page ' + sel, node.position ) +\n\t\tthis.emit( '{\\n' ) +\n\t\tthis.emit( this.indent( 1 ) ) +\n\t\tthis.mapVisit( node.declarations, '\\n' ) +\n\t\tthis.emit( this.indent( -1 ) ) +\n\t\tthis.emit( '\\n}' )\n\t);\n};\n\n/**\n * Visit font-face node.\n */\n\nCompiler.prototype[ 'font-face' ] = function ( node ) {\n\treturn (\n\t\tthis.emit( '@font-face ', node.position ) +\n\t\tthis.emit( '{\\n' ) +\n\t\tthis.emit( this.indent( 1 ) ) +\n\t\tthis.mapVisit( node.declarations, '\\n' ) +\n\t\tthis.emit( this.indent( -1 ) ) +\n\t\tthis.emit( '\\n}' )\n\t);\n};\n\n/**\n * Visit host node.\n */\n\nCompiler.prototype.host = function ( node ) {\n\treturn (\n\t\tthis.emit( '@host', node.position ) +\n\t\tthis.emit( ' {\\n' + this.indent( 1 ) ) +\n\t\tthis.mapVisit( node.rules, '\\n\\n' ) +\n\t\tthis.emit( this.indent( -1 ) + '\\n}' )\n\t);\n};\n\n/**\n * Visit custom-media node.\n */\n\nCompiler.prototype[ 'custom-media' ] = function ( node ) {\n\treturn this.emit(\n\t\t'@custom-media ' + node.name + ' ' + node.media + ';',\n\t\tnode.position\n\t);\n};\n\n/**\n * Visit rule node.\n */\n\nCompiler.prototype.rule = function ( node ) {\n\tconst indent = this.indent();\n\tconst decls = node.declarations;\n\tif ( ! decls.length ) {\n\t\treturn '';\n\t}\n\n\treturn (\n\t\tthis.emit(\n\t\t\tnode.selectors\n\t\t\t\t.map( function ( s ) {\n\t\t\t\t\treturn indent + s;\n\t\t\t\t} )\n\t\t\t\t.join( ',\\n' ),\n\t\t\tnode.position\n\t\t) +\n\t\tthis.emit( ' {\\n' ) +\n\t\tthis.emit( this.indent( 1 ) ) +\n\t\tthis.mapVisit( decls, '\\n' ) +\n\t\tthis.emit( this.indent( -1 ) ) +\n\t\tthis.emit( '\\n' + this.indent() + '}' )\n\t);\n};\n\n/**\n * Visit declaration node.\n */\n\nCompiler.prototype.declaration = function ( node ) {\n\treturn (\n\t\tthis.emit( this.indent() ) +\n\t\tthis.emit( node.property + ': ' + node.value, node.position ) +\n\t\tthis.emit( ';' )\n\t);\n};\n\n/**\n * Increase, decrease or return current indentation.\n */\n\nCompiler.prototype.indent = function ( level ) {\n\tthis.level = this.level || 1;\n\n\tif ( null !== level ) {\n\t\tthis.level += level;\n\t\treturn '';\n\t}\n\n\treturn Array( this.level ).join( this.indentation || '  ' );\n};\n\n/* eslint-enable @wordpress/no-unused-vars-before-return */\n","/**\n * Return `true` if the given path is http/https.\n *\n * @param {string} filePath path\n *\n * @return {boolean} is remote path.\n */\nfunction isRemotePath( filePath ) {\n\treturn /^(?:https?:)?\\/\\//.test( filePath );\n}\n\n/**\n * Return `true` if the given filePath is an absolute url.\n *\n * @param {string} filePath path\n *\n * @return {boolean} is absolute path.\n */\nfunction isAbsolutePath( filePath ) {\n\treturn /^\\/(?!\\/)/.test( filePath );\n}\n\n/**\n * Whether or not the url should be inluded.\n *\n * @param {Object} meta url meta info\n *\n * @return {boolean} is valid.\n */\nfunction isValidURL( meta ) {\n\t// Ignore hashes or data uris.\n\tif (\n\t\tmeta.value.indexOf( 'data:' ) === 0 ||\n\t\tmeta.value.indexOf( '#' ) === 0\n\t) {\n\t\treturn false;\n\t}\n\n\tif ( isAbsolutePath( meta.value ) ) {\n\t\treturn false;\n\t}\n\n\t// Do not handle the http/https urls if `includeRemote` is false.\n\tif ( isRemotePath( meta.value ) ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n/**\n * Get the absolute path of the url, relative to the basePath\n *\n * @param {string} str     the url\n * @param {string} baseURL base URL\n *\n * @return {string} the full path to the file\n */\nfunction getResourcePath( str, baseURL ) {\n\treturn new URL( str, baseURL ).toString();\n}\n\n/**\n * Process the single `url()` pattern\n *\n * @param {string} baseURL the base URL for relative URLs.\n *\n * @return {Promise} the Promise.\n */\nfunction processURL( baseURL ) {\n\treturn ( meta ) => ( {\n\t\t...meta,\n\t\tnewUrl:\n\t\t\t'url(' +\n\t\t\tmeta.before +\n\t\t\tmeta.quote +\n\t\t\tgetResourcePath( meta.value, baseURL ) +\n\t\t\tmeta.quote +\n\t\t\tmeta.after +\n\t\t\t')',\n\t} );\n}\n\n/**\n * Get all `url()`s, and return the meta info\n *\n * @param {string} value decl.value.\n *\n * @return {Array} the urls.\n */\nfunction getURLs( value ) {\n\tconst reg = /url\\((\\s*)(['\"]?)(.+?)\\2(\\s*)\\)/g;\n\tlet match;\n\tconst URLs = [];\n\n\twhile ( ( match = reg.exec( value ) ) !== null ) {\n\t\tconst meta = {\n\t\t\tsource: match[ 0 ],\n\t\t\tbefore: match[ 1 ],\n\t\t\tquote: match[ 2 ],\n\t\t\tvalue: match[ 3 ],\n\t\t\tafter: match[ 4 ],\n\t\t};\n\t\tif ( isValidURL( meta ) ) {\n\t\t\tURLs.push( meta );\n\t\t}\n\t}\n\treturn URLs;\n}\n\n/**\n * Replace the raw value's `url()` segment to the new value\n *\n * @param {string} raw  the raw value.\n * @param {Array}  URLs the URLs to replace.\n *\n * @return {string} the new value.\n */\nfunction replaceURLs( raw, URLs ) {\n\tURLs.forEach( ( item ) => {\n\t\traw = raw.replace( item.source, item.newUrl );\n\t} );\n\n\treturn raw;\n}\n\nconst rewrite = ( rootURL ) => ( node ) => {\n\tif ( node.type === 'declaration' ) {\n\t\tconst updatedURLs = getURLs( node.value ).map( processURL( rootURL ) );\n\t\treturn {\n\t\t\t...node,\n\t\t\tvalue: replaceURLs( node.value, updatedURLs ),\n\t\t};\n\t}\n\n\treturn node;\n};\n\nexport default rewrite;\n","/**\n * @constant string IS_ROOT_TAG Regex to check if the selector is a root tag selector.\n */\nconst IS_ROOT_TAG = /^(body|html|:root).*$/;\n\n/**\n * Creates a callback to modify selectors so they only apply within a certain\n * namespace.\n *\n * @param {string}   namespace Namespace to prefix selectors with.\n * @param {string[]} ignore    Selectors to not prefix.\n *\n * @return {(node: Object) => Object} Callback to wrap selectors.\n */\nconst wrap =\n\t( namespace, ignore = [] ) =>\n\t( node ) => {\n\t\t/**\n\t\t * Updates selector if necessary.\n\t\t *\n\t\t * @param {string} selector Selector to modify.\n\t\t *\n\t\t * @return {string} Updated selector.\n\t\t */\n\t\tconst updateSelector = ( selector ) => {\n\t\t\tif ( ignore.includes( selector.trim() ) ) {\n\t\t\t\treturn selector;\n\t\t\t}\n\n\t\t\t// Anything other than a root tag is always prefixed.\n\t\t\t{\n\t\t\t\tif ( ! selector.match( IS_ROOT_TAG ) ) {\n\t\t\t\t\treturn namespace + ' ' + selector;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// HTML and Body elements cannot be contained within our container so lets extract their styles.\n\t\t\treturn selector.replace( /^(body|html|:root)/, namespace );\n\t\t};\n\n\t\tif ( node.type === 'rule' ) {\n\t\t\treturn {\n\t\t\t\t...node,\n\t\t\t\tselectors: node.selectors.map( updateSelector ),\n\t\t\t};\n\t\t}\n\n\t\treturn node;\n\t};\n\nexport default wrap;\n","/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport traverse from './traverse';\nimport urlRewrite from './transforms/url-rewrite';\nimport wrap from './transforms/wrap';\n\n/**\n * Applies a series of CSS rule transforms to wrap selectors inside a given class and/or rewrite URLs depending on the parameters passed.\n *\n * @param {Object|Array} styles           CSS rules.\n * @param {string}       wrapperClassName Wrapper Class Name.\n * @return {Array} converted rules.\n */\nconst transformStyles = ( styles, wrapperClassName = '' ) => {\n\treturn Object.values( styles ?? [] ).map( ( { css, baseURL } ) => {\n\t\tconst transforms = [];\n\t\tif ( wrapperClassName ) {\n\t\t\ttransforms.push( wrap( wrapperClassName ) );\n\t\t}\n\t\tif ( baseURL ) {\n\t\t\ttransforms.push( urlRewrite( baseURL ) );\n\t\t}\n\t\tif ( transforms.length ) {\n\t\t\treturn traverse( css, compose( transforms ) );\n\t\t}\n\n\t\treturn css;\n\t} );\n};\n\nexport default transformStyles;\n","/**\n * External dependencies\n */\nimport traverse from 'traverse';\n\n/**\n * Internal dependencies\n */\nimport { parse, stringify } from './ast';\n\nfunction traverseCSS( css, callback ) {\n\ttry {\n\t\tconst parsed = parse( css );\n\n\t\tconst updated = traverse.map( parsed, function ( node ) {\n\t\t\tif ( ! node ) {\n\t\t\t\treturn node;\n\t\t\t}\n\t\t\tconst updatedNode = callback( node );\n\t\t\treturn this.update( updatedNode );\n\t\t} );\n\n\t\treturn stringify( updated );\n\t} catch ( err ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.warn( 'Error while traversing the CSS: ' + err );\n\n\t\treturn null;\n\t}\n}\n\nexport default traverseCSS;\n","// Adapted from https://github.com/reworkcss/css\n// because we needed to remove source map support.\n\n/**\n * Internal dependencies\n */\nimport Compressed from './compress';\nimport Identity from './identity';\n\n/**\n * Stringfy the given AST `node`.\n *\n * Options:\n *\n *  - `compress` space-optimized output\n *  - `sourcemap` return an object with `.code` and `.map`\n *\n * @param {Object} node\n * @param {Object} [options]\n * @return {string}\n */\n\nexport default function ( node, options ) {\n\toptions = options || {};\n\n\tconst compiler = options.compress\n\t\t? new Compressed( options )\n\t\t: new Identity( options );\n\n\tconst code = compiler.compile( node );\n\treturn code;\n}\n","/**\n * External dependencies\n */\nimport { colord, extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\nimport a11yPlugin from 'colord/plugins/a11y';\n\n/**\n * WordPress dependencies\n */\nimport { SVG } from '@wordpress/components';\nimport { useCallback, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport transformStyles from '../../utils/transform-styles';\n\nconst EDITOR_STYLES_SELECTOR = '.editor-styles-wrapper';\nextend( [ namesPlugin, a11yPlugin ] );\n\nfunction useDarkThemeBodyClassName( styles ) {\n\treturn useCallback(\n\t\t( node ) => {\n\t\t\tif ( ! node ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView, body } = ownerDocument;\n\t\t\tconst canvas = ownerDocument.querySelector(\n\t\t\t\tEDITOR_STYLES_SELECTOR\n\t\t\t);\n\n\t\t\tlet backgroundColor;\n\n\t\t\tif ( ! canvas ) {\n\t\t\t\t// The real .editor-styles-wrapper element might not exist in the\n\t\t\t\t// DOM, so calculate the background color by creating a fake\n\t\t\t\t// wrapper.\n\t\t\t\tconst tempCanvas = ownerDocument.createElement( 'div' );\n\t\t\t\ttempCanvas.classList.add( 'editor-styles-wrapper' );\n\t\t\t\tbody.appendChild( tempCanvas );\n\n\t\t\t\tbackgroundColor = defaultView\n\t\t\t\t\t.getComputedStyle( tempCanvas, null )\n\t\t\t\t\t.getPropertyValue( 'background-color' );\n\n\t\t\t\tbody.removeChild( tempCanvas );\n\t\t\t} else {\n\t\t\t\tbackgroundColor = defaultView\n\t\t\t\t\t.getComputedStyle( canvas, null )\n\t\t\t\t\t.getPropertyValue( 'background-color' );\n\t\t\t}\n\t\t\tconst colordBackgroundColor = colord( backgroundColor );\n\t\t\t// If background is transparent, it should be treated as light color.\n\t\t\tif (\n\t\t\t\tcolordBackgroundColor.luminance() > 0.5 ||\n\t\t\t\tcolordBackgroundColor.alpha() === 0\n\t\t\t) {\n\t\t\t\tbody.classList.remove( 'is-dark-theme' );\n\t\t\t} else {\n\t\t\t\tbody.classList.add( 'is-dark-theme' );\n\t\t\t}\n\t\t},\n\t\t[ styles ]\n\t);\n}\n\nexport default function EditorStyles( { styles } ) {\n\tconst stylesArray = useMemo(\n\t\t() => Object.values( styles ?? [] ),\n\t\t[ styles ]\n\t);\n\tconst transformedStyles = useMemo(\n\t\t() =>\n\t\t\ttransformStyles(\n\t\t\t\tstylesArray.filter( ( style ) => style?.css ),\n\t\t\t\tEDITOR_STYLES_SELECTOR\n\t\t\t),\n\t\t[ stylesArray ]\n\t);\n\n\tconst transformedSvgs = useMemo(\n\t\t() =>\n\t\t\tstylesArray\n\t\t\t\t.filter( ( style ) => style.__unstableType === 'svgs' )\n\t\t\t\t.map( ( style ) => style.assets )\n\t\t\t\t.join( '' ),\n\t\t[ stylesArray ]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ /* Use an empty style element to have a document reference,\n\t\t\t     but this could be any element. */ }\n\t\t\t<style ref={ useDarkThemeBodyClassName( stylesArray ) } />\n\t\t\t{ transformedStyles.map( ( css, index ) => (\n\t\t\t\t<style key={ index }>{ css }</style>\n\t\t\t) ) }\n\t\t\t<SVG\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 0 0\"\n\t\t\t\twidth=\"0\"\n\t\t\t\theight=\"0\"\n\t\t\t\trole=\"none\"\n\t\t\t\tstyle={ {\n\t\t\t\t\tvisibility: 'hidden',\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tleft: '-9999px',\n\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t} }\n\t\t\t\tdangerouslySetInnerHTML={ { __html: transformedSvgs } }\n\t\t\t/>\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useResizeObserver, pure, useRefEffect } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { useMemo } from '@wordpress/element';\nimport { Disabled } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockList from '../block-list';\nimport Iframe from '../iframe';\nimport EditorStyles from '../editor-styles';\nimport { store } from '../../store';\n\n// This is used to avoid rendering the block list if the sizes change.\nlet MemoizedBlockList;\n\nconst MAX_HEIGHT = 2000;\n\nfunction ScaledBlockPreview( {\n\tviewportWidth,\n\tcontainerWidth,\n\tminHeight,\n\tadditionalStyles = [],\n} ) {\n\tif ( ! viewportWidth ) {\n\t\tviewportWidth = containerWidth;\n\t}\n\n\tconst [ contentResizeListener, { height: contentHeight } ] =\n\t\tuseResizeObserver();\n\tconst { styles } = useSelect( ( select ) => {\n\t\tconst settings = select( store ).getSettings();\n\t\treturn {\n\t\t\tstyles: settings.styles,\n\t\t};\n\t}, [] );\n\n\t// Avoid scrollbars for pattern previews.\n\tconst editorStyles = useMemo( () => {\n\t\tif ( styles ) {\n\t\t\treturn [\n\t\t\t\t...styles,\n\t\t\t\t{\n\t\t\t\t\tcss: 'body{height:auto;overflow:hidden;border:none;padding:0;}',\n\t\t\t\t\t__unstableType: 'presets',\n\t\t\t\t},\n\t\t\t\t...additionalStyles,\n\t\t\t];\n\t\t}\n\n\t\treturn styles;\n\t}, [ styles, additionalStyles ] );\n\n\t// Initialize on render instead of module top level, to avoid circular dependency issues.\n\tMemoizedBlockList = MemoizedBlockList || pure( BlockList );\n\n\tconst scale = containerWidth / viewportWidth;\n\treturn (\n\t\t<Disabled\n\t\t\tclassName=\"block-editor-block-preview__content\"\n\t\t\tstyle={ {\n\t\t\t\ttransform: `scale(${ scale })`,\n\t\t\t\theight: contentHeight * scale,\n\t\t\t\tmaxHeight:\n\t\t\t\t\tcontentHeight > MAX_HEIGHT ? MAX_HEIGHT * scale : undefined,\n\t\t\t\tminHeight,\n\t\t\t} }\n\t\t>\n\t\t\t<Iframe\n\t\t\t\tcontentRef={ useRefEffect( ( bodyElement ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\townerDocument: { documentElement },\n\t\t\t\t\t} = bodyElement;\n\t\t\t\t\tdocumentElement.classList.add(\n\t\t\t\t\t\t'block-editor-block-preview__content-iframe'\n\t\t\t\t\t);\n\t\t\t\t\tdocumentElement.style.position = 'absolute';\n\t\t\t\t\tdocumentElement.style.width = '100%';\n\n\t\t\t\t\t// Necessary for contentResizeListener to work.\n\t\t\t\t\tbodyElement.style.boxSizing = 'border-box';\n\t\t\t\t\tbodyElement.style.position = 'absolute';\n\t\t\t\t\tbodyElement.style.width = '100%';\n\t\t\t\t}, [] ) }\n\t\t\t\taria-hidden\n\t\t\t\ttabIndex={ -1 }\n\t\t\t\tstyle={ {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\twidth: viewportWidth,\n\t\t\t\t\theight: contentHeight,\n\t\t\t\t\tpointerEvents: 'none',\n\t\t\t\t\t// This is a catch-all max-height for patterns.\n\t\t\t\t\t// See: https://github.com/WordPress/gutenberg/pull/38175.\n\t\t\t\t\tmaxHeight: MAX_HEIGHT,\n\t\t\t\t\tminHeight:\n\t\t\t\t\t\tscale !== 0 && scale < 1 && minHeight\n\t\t\t\t\t\t\t? minHeight / scale\n\t\t\t\t\t\t\t: minHeight,\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<EditorStyles styles={ editorStyles } />\n\t\t\t\t{ contentResizeListener }\n\t\t\t\t<MemoizedBlockList renderAppender={ false } />\n\t\t\t</Iframe>\n\t\t</Disabled>\n\t);\n}\n\nexport default function AutoBlockPreview( props ) {\n\tconst [ containerResizeListener, { width: containerWidth } ] =\n\t\tuseResizeObserver();\n\n\treturn (\n\t\t<>\n\t\t\t<div style={ { position: 'relative', width: '100%', height: 0 } }>\n\t\t\t\t{ containerResizeListener }\n\t\t\t</div>\n\t\t\t<div className=\"block-editor-block-preview__container\">\n\t\t\t\t{ !! containerWidth && (\n\t\t\t\t\t<ScaledBlockPreview\n\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\tcontainerWidth={ containerWidth }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useDisabled, useMergeRefs } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { memo, useMemo } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { ExperimentalBlockEditorProvider } from '../provider';\nimport AutoHeightBlockPreview from './auto';\nimport { store as blockEditorStore } from '../../store';\nimport { BlockListItems } from '../block-list';\n\nexport function BlockPreview( {\n\tblocks,\n\tviewportWidth = 1200,\n\tminHeight,\n\tadditionalStyles = [],\n\t// Deprecated props:\n\t__experimentalMinHeight,\n\t__experimentalPadding,\n} ) {\n\tif ( __experimentalMinHeight ) {\n\t\tminHeight = __experimentalMinHeight;\n\t\tdeprecated( 'The __experimentalMinHeight prop', {\n\t\t\tsince: '6.2',\n\t\t\tversion: '6.4',\n\t\t\talternative: 'minHeight',\n\t\t} );\n\t}\n\tif ( __experimentalPadding ) {\n\t\tadditionalStyles = [\n\t\t\t...additionalStyles,\n\t\t\t{ css: `body { padding: ${ __experimentalPadding }px; }` },\n\t\t];\n\t\tdeprecated( 'The __experimentalPadding prop of BlockPreview', {\n\t\t\tsince: '6.2',\n\t\t\tversion: '6.4',\n\t\t\talternative: 'additionalStyles',\n\t\t} );\n\t}\n\n\tconst originalSettings = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings(),\n\t\t[]\n\t);\n\tconst settings = useMemo(\n\t\t() => ( { ...originalSettings, __unstableIsPreviewMode: true } ),\n\t\t[ originalSettings ]\n\t);\n\tconst renderedBlocks = useMemo(\n\t\t() => ( Array.isArray( blocks ) ? blocks : [ blocks ] ),\n\t\t[ blocks ]\n\t);\n\n\tif ( ! blocks || blocks.length === 0 ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ExperimentalBlockEditorProvider\n\t\t\tvalue={ renderedBlocks }\n\t\t\tsettings={ settings }\n\t\t>\n\t\t\t<AutoHeightBlockPreview\n\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\tminHeight={ minHeight }\n\t\t\t\tadditionalStyles={ additionalStyles }\n\t\t\t/>\n\t\t</ExperimentalBlockEditorProvider>\n\t);\n}\n\n/**\n * BlockPreview renders a preview of a block or array of blocks.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-preview/README.md\n *\n * @param {Object}       preview               options for how the preview should be shown\n * @param {Array|Object} preview.blocks        A block instance (object) or an array of blocks to be previewed.\n * @param {number}       preview.viewportWidth Width of the preview container in pixels. Controls at what size the blocks will be rendered inside the preview. Default: 700.\n *\n * @return {WPComponent} The component to be rendered.\n */\nexport default memo( BlockPreview );\n\n/**\n * This hook is used to lightly mark an element as a block preview wrapper\n * element. Call this hook and pass the returned props to the element to mark as\n * a block preview wrapper, automatically rendering inner blocks as children. If\n * you define a ref for the element, it is important to pass the ref to this\n * hook, which the hook in turn will pass to the component through the props it\n * returns. Optionally, you can also pass any other props through this hook, and\n * they will be merged and returned.\n *\n * @param {Object}    options                      Preview options.\n * @param {WPBlock[]} options.blocks               Block objects.\n * @param {Object}    options.props                Optional. Props to pass to the element. Must contain\n *                                                 the ref if one is defined.\n * @param {Object}    options.__experimentalLayout Layout settings to be used in the preview.\n *\n */\nexport function useBlockPreview( {\n\tblocks,\n\tprops = {},\n\t__experimentalLayout,\n} ) {\n\tconst originalSettings = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings(),\n\t\t[]\n\t);\n\tconst settings = useMemo(\n\t\t() => ( { ...originalSettings, __unstableIsPreviewMode: true } ),\n\t\t[ originalSettings ]\n\t);\n\tconst disabledRef = useDisabled();\n\tconst ref = useMergeRefs( [ props.ref, disabledRef ] );\n\tconst renderedBlocks = useMemo(\n\t\t() => ( Array.isArray( blocks ) ? blocks : [ blocks ] ),\n\t\t[ blocks ]\n\t);\n\n\tconst children = (\n\t\t<ExperimentalBlockEditorProvider\n\t\t\tvalue={ renderedBlocks }\n\t\t\tsettings={ settings }\n\t\t>\n\t\t\t<BlockListItems\n\t\t\t\trenderAppender={ false }\n\t\t\t\t__experimentalLayout={ __experimentalLayout }\n\t\t\t/>\n\t\t</ExperimentalBlockEditorProvider>\n\t);\n\n\treturn {\n\t\t...props,\n\t\tref,\n\t\tclassName: classnames(\n\t\t\tprops.className,\n\t\t\t'block-editor-block-preview__live-content',\n\t\t\t'components-disabled'\n\t\t),\n\t\tchildren: blocks?.length ? children : null,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tisReusableBlock,\n\tcreateBlock,\n\tgetBlockFromExample,\n} from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockCard from '../block-card';\nimport BlockPreview from '../block-preview';\n\nfunction InserterPreviewPanel( { item } ) {\n\tconst { name, title, icon, description, initialAttributes, example } = item;\n\tconst isReusable = isReusableBlock( item );\n\treturn (\n\t\t<div className=\"block-editor-inserter__preview-container\">\n\t\t\t<div className=\"block-editor-inserter__preview\">\n\t\t\t\t{ isReusable || example ? (\n\t\t\t\t\t<div className=\"block-editor-inserter__preview-content\">\n\t\t\t\t\t\t<BlockPreview\n\t\t\t\t\t\t\tblocks={\n\t\t\t\t\t\t\t\texample\n\t\t\t\t\t\t\t\t\t? getBlockFromExample( name, {\n\t\t\t\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\t\t\t\t...example.attributes,\n\t\t\t\t\t\t\t\t\t\t\t\t...initialAttributes,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tinnerBlocks: example.innerBlocks,\n\t\t\t\t\t\t\t\t\t  } )\n\t\t\t\t\t\t\t\t\t: createBlock( name, initialAttributes )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tviewportWidth={ example?.viewportWidth ?? 500 }\n\t\t\t\t\t\t\tadditionalStyles={ [\n\t\t\t\t\t\t\t\t{ css: 'body { padding: 16px; }' },\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"block-editor-inserter__preview-content-missing\">\n\t\t\t\t\t\t{ __( 'No Preview Available.' ) }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t\t{ ! isReusable && (\n\t\t\t\t<BlockCard\n\t\t\t\t\ttitle={ title }\n\t\t\t\t\ticon={ icon }\n\t\t\t\t\tdescription={ description }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default InserterPreviewPanel;\n","/**\n * WordPress dependencies\n */\nimport { createContext } from '@wordpress/element';\n\nconst InserterListboxContext = createContext();\n\nexport default InserterListboxContext;\n","/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\t__unstableCompositeItem as CompositeItem,\n} from '@wordpress/components';\nimport { forwardRef, useContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport InserterListboxContext from './context';\n\nfunction InserterListboxItem(\n\t{ isFirst, as: Component, children, ...props },\n\tref\n) {\n\tconst state = useContext( InserterListboxContext );\n\treturn (\n\t\t<CompositeItem\n\t\t\tref={ ref }\n\t\t\tstate={ state }\n\t\t\trole=\"option\"\n\t\t\t// Use the CompositeItem `focusable` prop over Button's\n\t\t\t// isFocusable. The latter was shown to cause an issue\n\t\t\t// with tab order in the inserter list.\n\t\t\tfocusable\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ ( htmlProps ) => {\n\t\t\t\tconst propsWithTabIndex = {\n\t\t\t\t\t...htmlProps,\n\t\t\t\t\ttabIndex: isFirst ? 0 : htmlProps.tabIndex,\n\t\t\t\t};\n\t\t\t\tif ( Component ) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Component { ...propsWithTabIndex }>\n\t\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t</Component>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif ( typeof children === 'function' ) {\n\t\t\t\t\treturn children( propsWithTabIndex );\n\t\t\t\t}\n\t\t\t\treturn <Button { ...propsWithTabIndex }>{ children }</Button>;\n\t\t\t} }\n\t\t</CompositeItem>\n\t);\n}\n\nexport default forwardRef( InserterListboxItem );\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst dragHandle = (\n\t<SVG\n\t\twidth=\"24\"\n\t\theight=\"24\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 24 24\"\n\t>\n\t\t<Path d=\"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z\" />\n\t</SVG>\n);\n\nexport default dragHandle;\n","/**\n * WordPress dependencies\n */\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { Flex, FlexItem } from '@wordpress/components';\nimport { dragHandle } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\n\nexport default function BlockDraggableChip( { count, icon, isPattern } ) {\n\tconst patternLabel = isPattern && __( 'Pattern' );\n\treturn (\n\t\t<div className=\"block-editor-block-draggable-chip-wrapper\">\n\t\t\t<div\n\t\t\t\tclassName=\"block-editor-block-draggable-chip\"\n\t\t\t\tdata-testid=\"block-draggable-chip\"\n\t\t\t>\n\t\t\t\t<Flex\n\t\t\t\t\tjustify=\"center\"\n\t\t\t\t\tclassName=\"block-editor-block-draggable-chip__content\"\n\t\t\t\t>\n\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t{ icon ? (\n\t\t\t\t\t\t\t<BlockIcon icon={ icon } />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tpatternLabel ||\n\t\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t\t/* translators: %d: Number of blocks. */\n\t\t\t\t\t\t\t\t_n( '%d block', '%d blocks', count ),\n\t\t\t\t\t\t\t\tcount\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) }\n\t\t\t\t\t</FlexItem>\n\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t<BlockIcon icon={ dragHandle } />\n\t\t\t\t\t</FlexItem>\n\t\t\t\t</Flex>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { Draggable } from '@wordpress/components';\nimport { serialize } from '@wordpress/blocks';\n/**\n * Internal dependencies\n */\nimport BlockDraggableChip from '../block-draggable/draggable-chip';\n\nconst InserterDraggableBlocks = ( {\n\tisEnabled,\n\tblocks,\n\ticon,\n\tchildren,\n\tisPattern,\n} ) => {\n\tconst transferData = {\n\t\ttype: 'inserter',\n\t\tblocks,\n\t};\n\n\treturn (\n\t\t<Draggable\n\t\t\t__experimentalTransferDataType=\"wp-blocks\"\n\t\t\ttransferData={ transferData }\n\t\t\tonDragStart={ ( event ) => {\n\t\t\t\tevent.dataTransfer.setData( 'text/html', serialize( blocks ) );\n\t\t\t} }\n\t\t\t__experimentalDragComponent={\n\t\t\t\t<BlockDraggableChip\n\t\t\t\t\tcount={ blocks.length }\n\t\t\t\t\ticon={ icon }\n\t\t\t\t\tisPattern={ isPattern }\n\t\t\t\t/>\n\t\t\t}\n\t\t>\n\t\t\t{ ( { onDraggableStart, onDraggableEnd } ) => {\n\t\t\t\treturn children( {\n\t\t\t\t\tdraggable: isEnabled,\n\t\t\t\t\tonDragStart: isEnabled ? onDraggableStart : undefined,\n\t\t\t\t\tonDragEnd: isEnabled ? onDraggableEnd : undefined,\n\t\t\t\t} );\n\t\t\t} }\n\t\t</Draggable>\n\t);\n};\n\nexport default InserterDraggableBlocks;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo, useRef, memo } from '@wordpress/element';\nimport {\n\tcreateBlock,\n\tcreateBlocksFromInnerBlocksTemplate,\n\tisReusableBlock,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { __experimentalTruncate as Truncate } from '@wordpress/components';\nimport { ENTER, isAppleOS } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { InserterListboxItem } from '../inserter-listbox';\nimport InserterDraggableBlocks from '../inserter-draggable-blocks';\n\nfunction InserterListItem( {\n\tclassName,\n\tisFirst,\n\titem,\n\tonSelect,\n\tonHover,\n\tisDraggable,\n\t...props\n} ) {\n\tconst isDragging = useRef( false );\n\tconst itemIconStyle = item.icon\n\t\t? {\n\t\t\t\tbackgroundColor: item.icon.background,\n\t\t\t\tcolor: item.icon.foreground,\n\t\t  }\n\t\t: {};\n\tconst blocks = useMemo( () => {\n\t\treturn [\n\t\t\tcreateBlock(\n\t\t\t\titem.name,\n\t\t\t\titem.initialAttributes,\n\t\t\t\tcreateBlocksFromInnerBlocksTemplate( item.innerBlocks )\n\t\t\t),\n\t\t];\n\t}, [ item.name, item.initialAttributes, item.initialAttributes ] );\n\n\tconst isSynced = isReusableBlock( item ) || isTemplatePart( item );\n\n\treturn (\n\t\t<InserterDraggableBlocks\n\t\t\tisEnabled={ isDraggable && ! item.disabled }\n\t\t\tblocks={ blocks }\n\t\t\ticon={ item.icon }\n\t\t>\n\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\n\t\t\t\t<div\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'block-editor-block-types-list__list-item',\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'is-synced': isSynced,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\tdraggable={ draggable }\n\t\t\t\t\tonDragStart={ ( event ) => {\n\t\t\t\t\t\tisDragging.current = true;\n\t\t\t\t\t\tif ( onDragStart ) {\n\t\t\t\t\t\t\tonHover( null );\n\t\t\t\t\t\t\tonDragStart( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tonDragEnd={ ( event ) => {\n\t\t\t\t\t\tisDragging.current = false;\n\t\t\t\t\t\tif ( onDragEnd ) {\n\t\t\t\t\t\t\tonDragEnd( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<InserterListboxItem\n\t\t\t\t\t\tisFirst={ isFirst }\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'block-editor-block-types-list__item',\n\t\t\t\t\t\t\tclassName\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tdisabled={ item.isDisabled }\n\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tonSelect(\n\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\tisAppleOS() ? event.metaKey : event.ctrlKey\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tonHover( null );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\t\t\tconst { keyCode } = event;\n\t\t\t\t\t\t\tif ( keyCode === ENTER ) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tonSelect(\n\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\tisAppleOS() ? event.metaKey : event.ctrlKey\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tonHover( null );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonMouseEnter={ () => {\n\t\t\t\t\t\t\tif ( isDragging.current ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonHover( item );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonMouseLeave={ () => onHover( null ) }\n\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName=\"block-editor-block-types-list__item-icon\"\n\t\t\t\t\t\t\tstyle={ itemIconStyle }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockIcon icon={ item.icon } showColors />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span className=\"block-editor-block-types-list__item-title\">\n\t\t\t\t\t\t\t<Truncate numberOfLines={ 3 }>\n\t\t\t\t\t\t\t\t{ item.title }\n\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</InserterListboxItem>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</InserterDraggableBlocks>\n\t);\n}\n\nexport default memo( InserterListItem );\n","/**\n * WordPress dependencies\n */\nimport { forwardRef, useEffect, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { speak } from '@wordpress/a11y';\n\nfunction InserterListboxGroup( props, ref ) {\n\tconst [ shouldSpeak, setShouldSpeak ] = useState( false );\n\n\tuseEffect( () => {\n\t\tif ( shouldSpeak ) {\n\t\t\tspeak(\n\t\t\t\t__( 'Use left and right arrow keys to move through blocks' )\n\t\t\t);\n\t\t}\n\t}, [ shouldSpeak ] );\n\n\treturn (\n\t\t<div\n\t\t\tref={ ref }\n\t\t\trole=\"listbox\"\n\t\t\taria-orientation=\"horizontal\"\n\t\t\tonFocus={ () => {\n\t\t\t\tsetShouldSpeak( true );\n\t\t\t} }\n\t\t\tonBlur={ ( event ) => {\n\t\t\t\tconst focusingOutsideGroup = ! event.currentTarget.contains(\n\t\t\t\t\tevent.relatedTarget\n\t\t\t\t);\n\t\t\t\tif ( focusingOutsideGroup ) {\n\t\t\t\t\tsetShouldSpeak( false );\n\t\t\t\t}\n\t\t\t} }\n\t\t\t{ ...props }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( InserterListboxGroup );\n","/**\n * WordPress dependencies\n */\nimport { forwardRef, useContext } from '@wordpress/element';\nimport { __unstableCompositeGroup as CompositeGroup } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport InserterListboxContext from './context';\n\nfunction InserterListboxRow( props, ref ) {\n\tconst state = useContext( InserterListboxContext );\n\treturn (\n\t\t<CompositeGroup\n\t\t\tstate={ state }\n\t\t\trole=\"presentation\"\n\t\t\tref={ ref }\n\t\t\t{ ...props }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( InserterListboxRow );\n","/**\n * WordPress dependencies\n */\nimport { getBlockMenuDefaultClassName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport InserterListItem from '../inserter-list-item';\nimport { InserterListboxGroup, InserterListboxRow } from '../inserter-listbox';\n\nfunction chunk( array, size ) {\n\tconst chunks = [];\n\tfor ( let i = 0, j = array.length; i < j; i += size ) {\n\t\tchunks.push( array.slice( i, i + size ) );\n\t}\n\treturn chunks;\n}\n\nfunction BlockTypesList( {\n\titems = [],\n\tonSelect,\n\tonHover = () => {},\n\tchildren,\n\tlabel,\n\tisDraggable = true,\n} ) {\n\treturn (\n\t\t<InserterListboxGroup\n\t\t\tclassName=\"block-editor-block-types-list\"\n\t\t\taria-label={ label }\n\t\t>\n\t\t\t{ chunk( items, 3 ).map( ( row, i ) => (\n\t\t\t\t<InserterListboxRow key={ i }>\n\t\t\t\t\t{ row.map( ( item, j ) => (\n\t\t\t\t\t\t<InserterListItem\n\t\t\t\t\t\t\tkey={ item.id }\n\t\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\t\tclassName={ getBlockMenuDefaultClassName(\n\t\t\t\t\t\t\t\titem.id\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\tisDraggable={ isDraggable && ! item.isDisabled }\n\t\t\t\t\t\t\tisFirst={ i === 0 && j === 0 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) ) }\n\t\t\t\t</InserterListboxRow>\n\t\t\t) ) }\n\t\t\t{ children }\n\t\t</InserterListboxGroup>\n\t);\n}\n\nexport default BlockTypesList;\n","/**\n * WordPress dependencies\n */\nimport { Icon } from '@wordpress/components';\n\nfunction InserterPanel( { title, icon, children } ) {\n\treturn (\n\t\t<>\n\t\t\t<div className=\"block-editor-inserter__panel-header\">\n\t\t\t\t<h2 className=\"block-editor-inserter__panel-title\">\n\t\t\t\t\t{ title }\n\t\t\t\t</h2>\n\t\t\t\t<Icon icon={ icon } />\n\t\t\t</div>\n\t\t\t<div className=\"block-editor-inserter__panel-content\">\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default InserterPanel;\n","/**\n * WordPress dependencies\n */\nimport {\n\tcreateBlock,\n\tcreateBlocksFromInnerBlocksTemplate,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Retrieves the block types inserter state.\n *\n * @param {string=}  rootClientId Insertion's root client ID.\n * @param {Function} onInsert     function called when inserter a list of blocks.\n * @return {Array} Returns the block types state. (block types, categories, collections, onSelect handler)\n */\nconst useBlockTypesState = ( rootClientId, onInsert ) => {\n\tconst { categories, collections, items } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getInserterItems } = select( blockEditorStore );\n\t\t\tconst { getCategories, getCollections } = select( blocksStore );\n\n\t\t\treturn {\n\t\t\t\tcategories: getCategories(),\n\t\t\t\tcollections: getCollections(),\n\t\t\t\titems: getInserterItems( rootClientId ),\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\n\tconst onSelectItem = useCallback(\n\t\t( { name, initialAttributes, innerBlocks }, shouldFocusBlock ) => {\n\t\t\tconst insertedBlock = createBlock(\n\t\t\t\tname,\n\t\t\t\tinitialAttributes,\n\t\t\t\tcreateBlocksFromInnerBlocksTemplate( innerBlocks )\n\t\t\t);\n\n\t\t\tonInsert( insertedBlock, undefined, shouldFocusBlock );\n\t\t},\n\t\t[ onInsert ]\n\t);\n\n\treturn [ items, categories, collections, onSelectItem ];\n};\n\nexport default useBlockTypesState;\n","/**\n * WordPress dependencies\n */\nimport { __unstableUseCompositeState as useCompositeState } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport InserterListboxContext from './context';\n\nexport { default as InserterListboxGroup } from './group';\nexport { default as InserterListboxRow } from './row';\nexport { default as InserterListboxItem } from './item';\n\nfunction InserterListbox( { children } ) {\n\tconst compositeState = useCompositeState( {\n\t\tshift: true,\n\t\twrap: 'horizontal',\n\t} );\n\treturn (\n\t\t<InserterListboxContext.Provider value={ compositeState }>\n\t\t\t{ children }\n\t\t</InserterListboxContext.Provider>\n\t);\n}\n\nexport default InserterListbox;\n","/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport { useMemo, useEffect } from '@wordpress/element';\nimport { pipe, useAsyncList } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesList from '../block-types-list';\nimport InserterPanel from './panel';\nimport useBlockTypesState from './hooks/use-block-types-state';\nimport InserterListbox from '../inserter-listbox';\nimport { orderBy } from '../../utils/sorting';\n\nconst getBlockNamespace = ( item ) => item.name.split( '/' )[ 0 ];\n\nconst MAX_SUGGESTED_ITEMS = 6;\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation and rerendering the component.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\nexport function BlockTypesTab( {\n\trootClientId,\n\tonInsert,\n\tonHover,\n\tshowMostUsedBlocks,\n} ) {\n\tconst [ items, categories, collections, onSelectItem ] = useBlockTypesState(\n\t\trootClientId,\n\t\tonInsert\n\t);\n\n\tconst suggestedItems = useMemo( () => {\n\t\treturn orderBy( items, 'frecency', 'desc' ).slice(\n\t\t\t0,\n\t\t\tMAX_SUGGESTED_ITEMS\n\t\t);\n\t}, [ items ] );\n\n\tconst uncategorizedItems = useMemo( () => {\n\t\treturn items.filter( ( item ) => ! item.category );\n\t}, [ items ] );\n\n\tconst itemsPerCategory = useMemo( () => {\n\t\treturn pipe(\n\t\t\t( itemList ) =>\n\t\t\t\titemList.filter(\n\t\t\t\t\t( item ) => item.category && item.category !== 'reusable'\n\t\t\t\t),\n\t\t\t( itemList ) =>\n\t\t\t\titemList.reduce( ( acc, item ) => {\n\t\t\t\t\tconst { category } = item;\n\t\t\t\t\tif ( ! acc[ category ] ) {\n\t\t\t\t\t\tacc[ category ] = [];\n\t\t\t\t\t}\n\t\t\t\t\tacc[ category ].push( item );\n\t\t\t\t\treturn acc;\n\t\t\t\t}, {} )\n\t\t)( items );\n\t}, [ items ] );\n\n\tconst itemsPerCollection = useMemo( () => {\n\t\t// Create a new Object to avoid mutating collection.\n\t\tconst result = { ...collections };\n\t\tObject.keys( collections ).forEach( ( namespace ) => {\n\t\t\tresult[ namespace ] = items.filter(\n\t\t\t\t( item ) => getBlockNamespace( item ) === namespace\n\t\t\t);\n\t\t\tif ( result[ namespace ].length === 0 ) {\n\t\t\t\tdelete result[ namespace ];\n\t\t\t}\n\t\t} );\n\n\t\treturn result;\n\t}, [ items, collections ] );\n\n\t// Hide block preview on unmount.\n\tuseEffect( () => () => onHover( null ), [] );\n\n\t/**\n\t * The inserter contains a big number of blocks and opening it is a costful operation.\n\t * The rendering is the most costful part of it, in order to improve the responsiveness\n\t * of the \"opening\" action, these lazy lists allow us to render the inserter category per category,\n\t * once all the categories are rendered, we start rendering the collections and the uncategorized block types.\n\t */\n\tconst currentlyRenderedCategories = useAsyncList( categories );\n\tconst didRenderAllCategories =\n\t\tcategories.length === currentlyRenderedCategories.length;\n\n\t// Async List requires an array.\n\tconst collectionEntries = useMemo( () => {\n\t\treturn Object.entries( collections );\n\t}, [ collections ] );\n\tconst currentlyRenderedCollections = useAsyncList(\n\t\tdidRenderAllCategories ? collectionEntries : EMPTY_ARRAY\n\t);\n\n\treturn (\n\t\t<InserterListbox>\n\t\t\t<div>\n\t\t\t\t{ showMostUsedBlocks && !! suggestedItems.length && (\n\t\t\t\t\t<InserterPanel title={ _x( 'Most used', 'blocks' ) }>\n\t\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\t\titems={ suggestedItems }\n\t\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\tlabel={ _x( 'Most used', 'blocks' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</InserterPanel>\n\t\t\t\t) }\n\n\t\t\t\t{ currentlyRenderedCategories.map( ( category ) => {\n\t\t\t\t\tconst categoryItems = itemsPerCategory[ category.slug ];\n\t\t\t\t\tif ( ! categoryItems || ! categoryItems.length ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<InserterPanel\n\t\t\t\t\t\t\tkey={ category.slug }\n\t\t\t\t\t\t\ttitle={ category.title }\n\t\t\t\t\t\t\ticon={ category.icon }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\t\t\titems={ categoryItems }\n\t\t\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\t\tlabel={ category.title }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</InserterPanel>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\n\t\t\t\t{ didRenderAllCategories && uncategorizedItems.length > 0 && (\n\t\t\t\t\t<InserterPanel\n\t\t\t\t\t\tclassName=\"block-editor-inserter__uncategorized-blocks-panel\"\n\t\t\t\t\t\ttitle={ __( 'Uncategorized' ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\t\titems={ uncategorizedItems }\n\t\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\tlabel={ __( 'Uncategorized' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</InserterPanel>\n\t\t\t\t) }\n\n\t\t\t\t{ currentlyRenderedCollections.map(\n\t\t\t\t\t( [ namespace, collection ] ) => {\n\t\t\t\t\t\tconst collectionItems = itemsPerCollection[ namespace ];\n\t\t\t\t\t\tif ( ! collectionItems || ! collectionItems.length ) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<InserterPanel\n\t\t\t\t\t\t\t\tkey={ namespace }\n\t\t\t\t\t\t\t\ttitle={ collection.title }\n\t\t\t\t\t\t\t\ticon={ collection.icon }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\t\t\t\titems={ collectionItems }\n\t\t\t\t\t\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\t\t\tlabel={ collection.title }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</InserterPanel>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</InserterListbox>\n\t);\n}\n\nexport default BlockTypesTab;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"notices\"];","/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport { cloneBlock } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Retrieves the block patterns inserter state.\n *\n * @param {Function} onInsert     function called when inserter a list of blocks.\n * @param {string=}  rootClientId Insertion's root client ID.\n *\n * @return {Array} Returns the patterns state. (patterns, categories, onSelect handler)\n */\nconst usePatternsState = ( onInsert, rootClientId ) => {\n\tconst { patternCategories, patterns } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { __experimentalGetAllowedPatterns, getSettings } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\treturn {\n\t\t\t\tpatterns: __experimentalGetAllowedPatterns( rootClientId ),\n\t\t\t\tpatternCategories:\n\t\t\t\t\tgetSettings().__experimentalBlockPatternCategories,\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\n\tconst onClickPattern = useCallback( ( pattern, blocks ) => {\n\t\tonInsert(\n\t\t\t( blocks ?? [] ).map( ( block ) => cloneBlock( block ) ),\n\t\t\tpattern.name\n\t\t);\n\t\tcreateSuccessNotice(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: block pattern title. */\n\t\t\t\t__( 'Block pattern \"%s\" inserted.' ),\n\t\t\t\tpattern.title\n\t\t\t),\n\t\t\t{\n\t\t\t\ttype: 'snackbar',\n\t\t\t}\n\t\t);\n\t}, [] );\n\n\treturn [ patterns, patternCategories, onClickPattern ];\n};\n\nexport default usePatternsState;\n","/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport {\n\tVisuallyHidden,\n\t__unstableComposite as Composite,\n\t__unstableUseCompositeState as useCompositeState,\n\t__unstableCompositeItem as CompositeItem,\n\tTooltip,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\nimport InserterDraggableBlocks from '../inserter-draggable-blocks';\n\nconst WithToolTip = ( { showTooltip, title, children } ) => {\n\tif ( showTooltip ) {\n\t\treturn <Tooltip text={ title }>{ children }</Tooltip>;\n\t}\n\treturn <>{ children }</>;\n};\n\nfunction BlockPattern( {\n\tisDraggable,\n\tpattern,\n\tonClick,\n\tonHover,\n\tcomposite,\n\tshowTooltip,\n} ) {\n\tconst [ isDragging, setIsDragging ] = useState( false );\n\tconst { blocks, viewportWidth } = pattern;\n\tconst instanceId = useInstanceId( BlockPattern );\n\tconst descriptionId = `block-editor-block-patterns-list__item-description-${ instanceId }`;\n\n\treturn (\n\t\t<InserterDraggableBlocks\n\t\t\tisEnabled={ isDraggable }\n\t\t\tblocks={ blocks }\n\t\t\tisPattern={ !! pattern }\n\t\t>\n\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"block-editor-block-patterns-list__list-item\"\n\t\t\t\t\tdraggable={ draggable }\n\t\t\t\t\tonDragStart={ ( event ) => {\n\t\t\t\t\t\tsetIsDragging( true );\n\t\t\t\t\t\tif ( onDragStart ) {\n\t\t\t\t\t\t\tonHover?.( null );\n\t\t\t\t\t\t\tonDragStart( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tonDragEnd={ ( event ) => {\n\t\t\t\t\t\tsetIsDragging( false );\n\t\t\t\t\t\tif ( onDragEnd ) {\n\t\t\t\t\t\t\tonDragEnd( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<WithToolTip\n\t\t\t\t\t\tshowTooltip={ showTooltip }\n\t\t\t\t\t\ttitle={ pattern.title }\n\t\t\t\t\t>\n\t\t\t\t\t\t<CompositeItem\n\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\tas=\"div\"\n\t\t\t\t\t\t\t{ ...composite }\n\t\t\t\t\t\t\tclassName=\"block-editor-block-patterns-list__item\"\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tonClick( pattern, blocks );\n\t\t\t\t\t\t\t\tonHover?.( null );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonMouseEnter={ () => {\n\t\t\t\t\t\t\t\tif ( isDragging ) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonHover?.( pattern );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonMouseLeave={ () => onHover?.( null ) }\n\t\t\t\t\t\t\taria-label={ pattern.title }\n\t\t\t\t\t\t\taria-describedby={\n\t\t\t\t\t\t\t\tpattern.description ? descriptionId : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockPreview\n\t\t\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ ! showTooltip && (\n\t\t\t\t\t\t\t\t<div className=\"block-editor-block-patterns-list__item-title\">\n\t\t\t\t\t\t\t\t\t{ pattern.title }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ !! pattern.description && (\n\t\t\t\t\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t\t\t\t\t{ pattern.description }\n\t\t\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</CompositeItem>\n\t\t\t\t\t</WithToolTip>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</InserterDraggableBlocks>\n\t);\n}\n\nfunction BlockPatternPlaceholder() {\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-list__item is-placeholder\" />\n\t);\n}\n\nfunction BlockPatternList( {\n\tisDraggable,\n\tblockPatterns,\n\tshownPatterns,\n\tonHover,\n\tonClickPattern,\n\torientation,\n\tlabel = __( 'Block Patterns' ),\n\tshowTitlesAsTooltip,\n} ) {\n\tconst composite = useCompositeState( { orientation } );\n\treturn (\n\t\t<Composite\n\t\t\t{ ...composite }\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-block-patterns-list\"\n\t\t\taria-label={ label }\n\t\t>\n\t\t\t{ blockPatterns.map( ( pattern ) => {\n\t\t\t\tconst isShown = shownPatterns.includes( pattern );\n\t\t\t\treturn isShown ? (\n\t\t\t\t\t<BlockPattern\n\t\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\t\tonClick={ onClickPattern }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\tisDraggable={ isDraggable }\n\t\t\t\t\t\tcomposite={ composite }\n\t\t\t\t\t\tshowTooltip={ showTitlesAsTooltip }\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<BlockPatternPlaceholder key={ pattern.name } />\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</Composite>\n\t);\n}\n\nexport default BlockPatternList;\n","/**\n * WordPress dependencies\n */\nimport { Button, SearchControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\nfunction PatternCategoriesList( {\n\tselectedCategory,\n\tpatternCategories,\n\tonClickCategory,\n} ) {\n\tconst baseClassName = 'block-editor-block-patterns-explorer__sidebar';\n\treturn (\n\t\t<div className={ `${ baseClassName }__categories-list` }>\n\t\t\t{ patternCategories.map( ( { name, label } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tkey={ name }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\tclassName={ `${ baseClassName }__categories-list__item` }\n\t\t\t\t\t\tisPressed={ selectedCategory === name }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonClickCategory( name );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ label }\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</div>\n\t);\n}\n\nfunction PatternsExplorerSearch( { filterValue, setFilterValue } ) {\n\tconst baseClassName = 'block-editor-block-patterns-explorer__search';\n\treturn (\n\t\t<div className={ baseClassName }>\n\t\t\t<SearchControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tonChange={ setFilterValue }\n\t\t\t\tvalue={ filterValue }\n\t\t\t\tlabel={ __( 'Search for patterns' ) }\n\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nfunction PatternExplorerSidebar( {\n\tselectedCategory,\n\tpatternCategories,\n\tonClickCategory,\n\tfilterValue,\n\tsetFilterValue,\n} ) {\n\tconst baseClassName = 'block-editor-block-patterns-explorer__sidebar';\n\treturn (\n\t\t<div className={ baseClassName }>\n\t\t\t<PatternsExplorerSearch\n\t\t\t\tfilterValue={ filterValue }\n\t\t\t\tsetFilterValue={ setFilterValue }\n\t\t\t/>\n\t\t\t{ ! filterValue && (\n\t\t\t\t<PatternCategoriesList\n\t\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t\t\tpatternCategories={ patternCategories }\n\t\t\t\t\tonClickCategory={ onClickCategory }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default PatternExplorerSidebar;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Icon, blockDefault } from '@wordpress/icons';\n\nfunction InserterNoResults() {\n\treturn (\n\t\t<div className=\"block-editor-inserter__no-results\">\n\t\t\t<Icon\n\t\t\t\tclassName=\"block-editor-inserter__no-results-icon\"\n\t\t\t\ticon={ blockDefault }\n\t\t\t/>\n\t\t\t<p>{ __( 'No results found.' ) }</p>\n\t\t</div>\n\t);\n}\n\nexport default InserterNoResults;\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\nimport { _n, sprintf } from '@wordpress/i18n';\nimport { speak } from '@wordpress/a11y';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * @typedef WPInserterConfig\n *\n * @property {string=}   rootClientId   If set, insertion will be into the\n *                                      block with this ID.\n * @property {number=}   insertionIndex If set, insertion will be into this\n *                                      explicit position.\n * @property {string=}   clientId       If set, insertion will be after the\n *                                      block with this ID.\n * @property {boolean=}  isAppender     Whether the inserter is an appender\n *                                      or not.\n * @property {Function=} onSelect       Called after insertion.\n */\n\n/**\n * Returns the insertion point state given the inserter config.\n *\n * @param {WPInserterConfig} config Inserter Config.\n * @return {Array} Insertion Point State (rootClientID, onInsertBlocks and onToggle).\n */\nfunction useInsertionPoint( {\n\trootClientId = '',\n\tinsertionIndex,\n\tclientId,\n\tisAppender,\n\tonSelect,\n\tshouldFocusBlock = true,\n\tselectBlockOnInsert = true,\n} ) {\n\tconst { getSelectedBlock } = useSelect( blockEditorStore );\n\tconst { destinationRootClientId, destinationIndex } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockOrder,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\n\t\t\tlet _destinationRootClientId = rootClientId;\n\t\t\tlet _destinationIndex;\n\n\t\t\tif ( insertionIndex !== undefined ) {\n\t\t\t\t// Insert into a specific index.\n\t\t\t\t_destinationIndex = insertionIndex;\n\t\t\t} else if ( clientId ) {\n\t\t\t\t// Insert after a specific client ID.\n\t\t\t\t_destinationIndex = getBlockIndex( clientId );\n\t\t\t} else if ( ! isAppender && selectedBlockClientId ) {\n\t\t\t\t_destinationRootClientId = getBlockRootClientId(\n\t\t\t\t\tselectedBlockClientId\n\t\t\t\t);\n\t\t\t\t_destinationIndex = getBlockIndex( selectedBlockClientId ) + 1;\n\t\t\t} else {\n\t\t\t\t// Insert at the end of the list.\n\t\t\t\t_destinationIndex = getBlockOrder(\n\t\t\t\t\t_destinationRootClientId\n\t\t\t\t).length;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdestinationRootClientId: _destinationRootClientId,\n\t\t\t\tdestinationIndex: _destinationIndex,\n\t\t\t};\n\t\t},\n\t\t[ rootClientId, insertionIndex, clientId, isAppender ]\n\t);\n\n\tconst {\n\t\treplaceBlocks,\n\t\tinsertBlocks,\n\t\tshowInsertionPoint,\n\t\thideInsertionPoint,\n\t} = useDispatch( blockEditorStore );\n\n\tconst onInsertBlocks = useCallback(\n\t\t( blocks, meta, shouldForceFocusBlock = false ) => {\n\t\t\tconst selectedBlock = getSelectedBlock();\n\n\t\t\tif (\n\t\t\t\t! isAppender &&\n\t\t\t\tselectedBlock &&\n\t\t\t\tisUnmodifiedDefaultBlock( selectedBlock )\n\t\t\t) {\n\t\t\t\treplaceBlocks(\n\t\t\t\t\tselectedBlock.clientId,\n\t\t\t\t\tblocks,\n\t\t\t\t\tnull,\n\t\t\t\t\tshouldFocusBlock || shouldForceFocusBlock ? 0 : null,\n\t\t\t\t\tmeta\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tinsertBlocks(\n\t\t\t\t\tblocks,\n\t\t\t\t\tdestinationIndex,\n\t\t\t\t\tdestinationRootClientId,\n\t\t\t\t\tselectBlockOnInsert,\n\t\t\t\t\tshouldFocusBlock || shouldForceFocusBlock ? 0 : null,\n\t\t\t\t\tmeta\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst blockLength = Array.isArray( blocks ) ? blocks.length : 1;\n\t\t\tconst message = sprintf(\n\t\t\t\t// translators: %d: the name of the block that has been added\n\t\t\t\t_n( '%d block added.', '%d blocks added.', blockLength ),\n\t\t\t\tblockLength\n\t\t\t);\n\t\t\tspeak( message );\n\n\t\t\tif ( onSelect ) {\n\t\t\t\tonSelect( blocks );\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tisAppender,\n\t\t\tgetSelectedBlock,\n\t\t\treplaceBlocks,\n\t\t\tinsertBlocks,\n\t\t\tdestinationRootClientId,\n\t\t\tdestinationIndex,\n\t\t\tonSelect,\n\t\t\tshouldFocusBlock,\n\t\t]\n\t);\n\n\tconst onToggleInsertionPoint = useCallback(\n\t\t( show ) => {\n\t\t\tif ( show ) {\n\t\t\t\tshowInsertionPoint( destinationRootClientId, destinationIndex );\n\t\t\t} else {\n\t\t\t\thideInsertionPoint();\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tshowInsertionPoint,\n\t\t\thideInsertionPoint,\n\t\t\tdestinationRootClientId,\n\t\t\tdestinationIndex,\n\t\t]\n\t);\n\n\treturn [ destinationRootClientId, onInsertBlocks, onToggleInsertionPoint ];\n}\n\nexport default useInsertionPoint;\n","/**\n * Locale character mapping rules.\n */\ninterface Locale {\n  regexp: RegExp;\n  map: Record<string, string>;\n}\n\n/**\n * Source: ftp://ftp.unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt\n */\nconst SUPPORTED_LOCALE: Record<string, Locale> = {\n  tr: {\n    regexp: /\\u0130|\\u0049|\\u0049\\u0307/g,\n    map: {\n      İ: \"\\u0069\",\n      I: \"\\u0131\",\n      İ: \"\\u0069\",\n    },\n  },\n  az: {\n    regexp: /\\u0130/g,\n    map: {\n      İ: \"\\u0069\",\n      I: \"\\u0131\",\n      İ: \"\\u0069\",\n    },\n  },\n  lt: {\n    regexp: /\\u0049|\\u004A|\\u012E|\\u00CC|\\u00CD|\\u0128/g,\n    map: {\n      I: \"\\u0069\\u0307\",\n      J: \"\\u006A\\u0307\",\n      Į: \"\\u012F\\u0307\",\n      Ì: \"\\u0069\\u0307\\u0300\",\n      Í: \"\\u0069\\u0307\\u0301\",\n      Ĩ: \"\\u0069\\u0307\\u0303\",\n    },\n  },\n};\n\n/**\n * Localized lower case.\n */\nexport function localeLowerCase(str: string, locale: string) {\n  const lang = SUPPORTED_LOCALE[locale.toLowerCase()];\n  if (lang) return lowerCase(str.replace(lang.regexp, (m) => lang.map[m]));\n  return lowerCase(str);\n}\n\n/**\n * Lower case as a function.\n */\nexport function lowerCase(str: string) {\n  return str.toLowerCase();\n}\n","import { lowerCase } from \"lower-case\";\n\nexport interface Options {\n  splitRegexp?: RegExp | RegExp[];\n  stripRegexp?: RegExp | RegExp[];\n  delimiter?: string;\n  transform?: (part: string, index: number, parts: string[]) => string;\n}\n\n// Support camel case (\"camelCase\" -> \"camel Case\" and \"CAMELCase\" -> \"CAMEL Case\").\nconst DEFAULT_SPLIT_REGEXP = [/([a-z0-9])([A-Z])/g, /([A-Z])([A-Z][a-z])/g];\n\n// Remove all non-word characters.\nconst DEFAULT_STRIP_REGEXP = /[^A-Z0-9]+/gi;\n\n/**\n * Normalize the string into something other libraries can manipulate easier.\n */\nexport function noCase(input: string, options: Options = {}) {\n  const {\n    splitRegexp = DEFAULT_SPLIT_REGEXP,\n    stripRegexp = DEFAULT_STRIP_REGEXP,\n    transform = lowerCase,\n    delimiter = \" \",\n  } = options;\n\n  let result = replace(\n    replace(input, splitRegexp, \"$1\\0$2\"),\n    stripRegexp,\n    \"\\0\"\n  );\n  let start = 0;\n  let end = result.length;\n\n  // Trim the delimiter from around the output string.\n  while (result.charAt(start) === \"\\0\") start++;\n  while (result.charAt(end - 1) === \"\\0\") end--;\n\n  // Transform each token independently.\n  return result.slice(start, end).split(\"\\0\").map(transform).join(delimiter);\n}\n\n/**\n * Replace `re` in the input string with the replacement value.\n */\nfunction replace(input: string, re: RegExp | RegExp[], value: string) {\n  if (re instanceof RegExp) return input.replace(re, value);\n  return re.reduce((input, re) => input.replace(re, value), input);\n}\n","/**\n * External dependencies\n */\nimport removeAccents from 'remove-accents';\nimport { noCase } from 'change-case';\n\n// Default search helpers.\nconst defaultGetName = ( item ) => item.name || '';\nconst defaultGetTitle = ( item ) => item.title;\nconst defaultGetDescription = ( item ) => item.description || '';\nconst defaultGetKeywords = ( item ) => item.keywords || [];\nconst defaultGetCategory = ( item ) => item.category;\nconst defaultGetCollection = () => null;\n\n/**\n * Extracts words from an input string.\n *\n * @param {string} input The input string.\n *\n * @return {Array} Words, extracted from the input string.\n */\nfunction extractWords( input = '' ) {\n\treturn noCase( input, {\n\t\tsplitRegexp: [\n\t\t\t/([\\p{Ll}\\p{Lo}\\p{N}])([\\p{Lu}\\p{Lt}])/gu, // One lowercase or digit, followed by one uppercase.\n\t\t\t/([\\p{Lu}\\p{Lt}])([\\p{Lu}\\p{Lt}][\\p{Ll}\\p{Lo}])/gu, // One uppercase followed by one uppercase and one lowercase.\n\t\t],\n\t\tstripRegexp: /(\\p{C}|\\p{P}|\\p{S})+/giu, // Anything that's not a punctuation, symbol or control/format character.\n\t} )\n\t\t.split( ' ' )\n\t\t.filter( Boolean );\n}\n\n/**\n * Sanitizes the search input string.\n *\n * @param {string} input The search input to normalize.\n *\n * @return {string} The normalized search input.\n */\nfunction normalizeSearchInput( input = '' ) {\n\t// Disregard diacritics.\n\t//  Input: \"média\"\n\tinput = removeAccents( input );\n\n\t// Accommodate leading slash, matching autocomplete expectations.\n\t//  Input: \"/media\"\n\tinput = input.replace( /^\\//, '' );\n\n\t// Lowercase.\n\t//  Input: \"MEDIA\"\n\tinput = input.toLowerCase();\n\n\treturn input;\n}\n\n/**\n * Converts the search term into a list of normalized terms.\n *\n * @param {string} input The search term to normalize.\n *\n * @return {string[]} The normalized list of search terms.\n */\nexport const getNormalizedSearchTerms = ( input = '' ) => {\n\treturn extractWords( normalizeSearchInput( input ) );\n};\n\nconst removeMatchingTerms = ( unmatchedTerms, unprocessedTerms ) => {\n\treturn unmatchedTerms.filter(\n\t\t( term ) =>\n\t\t\t! getNormalizedSearchTerms( unprocessedTerms ).some(\n\t\t\t\t( unprocessedTerm ) => unprocessedTerm.includes( term )\n\t\t\t)\n\t);\n};\n\nexport const searchBlockItems = (\n\titems,\n\tcategories,\n\tcollections,\n\tsearchInput\n) => {\n\tconst normalizedSearchTerms = getNormalizedSearchTerms( searchInput );\n\tif ( normalizedSearchTerms.length === 0 ) {\n\t\treturn items;\n\t}\n\n\tconst config = {\n\t\tgetCategory: ( item ) =>\n\t\t\tcategories.find( ( { slug } ) => slug === item.category )?.title,\n\t\tgetCollection: ( item ) =>\n\t\t\tcollections[ item.name.split( '/' )[ 0 ] ]?.title,\n\t};\n\n\treturn searchItems( items, searchInput, config );\n};\n\n/**\n * Filters an item list given a search term.\n *\n * @param {Array}  items       Item list\n * @param {string} searchInput Search input.\n * @param {Object} config      Search Config.\n *\n * @return {Array} Filtered item list.\n */\nexport const searchItems = ( items = [], searchInput = '', config = {} ) => {\n\tconst normalizedSearchTerms = getNormalizedSearchTerms( searchInput );\n\tif ( normalizedSearchTerms.length === 0 ) {\n\t\treturn items;\n\t}\n\n\tconst rankedItems = items\n\t\t.map( ( item ) => {\n\t\t\treturn [ item, getItemSearchRank( item, searchInput, config ) ];\n\t\t} )\n\t\t.filter( ( [ , rank ] ) => rank > 0 );\n\n\trankedItems.sort( ( [ , rank1 ], [ , rank2 ] ) => rank2 - rank1 );\n\treturn rankedItems.map( ( [ item ] ) => item );\n};\n\n/**\n * Get the search rank for a given item and a specific search term.\n * The better the match, the higher the rank.\n * If the rank equals 0, it should be excluded from the results.\n *\n * @param {Object} item       Item to filter.\n * @param {string} searchTerm Search term.\n * @param {Object} config     Search Config.\n *\n * @return {number} Search Rank.\n */\nexport function getItemSearchRank( item, searchTerm, config = {} ) {\n\tconst {\n\t\tgetName = defaultGetName,\n\t\tgetTitle = defaultGetTitle,\n\t\tgetDescription = defaultGetDescription,\n\t\tgetKeywords = defaultGetKeywords,\n\t\tgetCategory = defaultGetCategory,\n\t\tgetCollection = defaultGetCollection,\n\t} = config;\n\n\tconst name = getName( item );\n\tconst title = getTitle( item );\n\tconst description = getDescription( item );\n\tconst keywords = getKeywords( item );\n\tconst category = getCategory( item );\n\tconst collection = getCollection( item );\n\n\tconst normalizedSearchInput = normalizeSearchInput( searchTerm );\n\tconst normalizedTitle = normalizeSearchInput( title );\n\n\tlet rank = 0;\n\n\t// Prefers exact matches\n\t// Then prefers if the beginning of the title matches the search term\n\t// name, keywords, categories, collection, variations match come later.\n\tif ( normalizedSearchInput === normalizedTitle ) {\n\t\trank += 30;\n\t} else if ( normalizedTitle.startsWith( normalizedSearchInput ) ) {\n\t\trank += 20;\n\t} else {\n\t\tconst terms = [\n\t\t\tname,\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\t...keywords,\n\t\t\tcategory,\n\t\t\tcollection,\n\t\t].join( ' ' );\n\t\tconst normalizedSearchTerms = extractWords( normalizedSearchInput );\n\t\tconst unmatchedTerms = removeMatchingTerms(\n\t\t\tnormalizedSearchTerms,\n\t\t\tterms\n\t\t);\n\n\t\tif ( unmatchedTerms.length === 0 ) {\n\t\t\trank += 10;\n\t\t}\n\t}\n\n\t// Give a better rank to \"core\" namespaced items.\n\tif ( rank !== 0 && name.startsWith( 'core/' ) ) {\n\t\tconst isCoreBlockVariation = name !== item.id;\n\t\t// Give a bit better rank to \"core\" blocks over \"core\" block variations.\n\t\trank += isCoreBlockVariation ? 1 : 2;\n\t}\n\n\treturn rank;\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo, useEffect } from '@wordpress/element';\nimport { _n, sprintf } from '@wordpress/i18n';\nimport { useDebounce, useAsyncList } from '@wordpress/compose';\nimport { __experimentalHeading as Heading } from '@wordpress/components';\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport BlockPatternsList from '../../block-patterns-list';\nimport InserterNoResults from '../no-results';\nimport useInsertionPoint from '../hooks/use-insertion-point';\nimport usePatternsState from '../hooks/use-patterns-state';\nimport InserterListbox from '../../inserter-listbox';\nimport { searchItems } from '../search-items';\n\nconst INITIAL_INSERTER_RESULTS = 2;\n\nfunction PatternsListHeader( { filterValue, filteredBlockPatternsLength } ) {\n\tif ( ! filterValue ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Heading\n\t\t\tlevel={ 2 }\n\t\t\tlineHeight={ '48px' }\n\t\t\tclassName=\"block-editor-block-patterns-explorer__search-results-count\"\n\t\t>\n\t\t\t{ sprintf(\n\t\t\t\t/* translators: %d: number of patterns. %s: block pattern search query */\n\t\t\t\t_n(\n\t\t\t\t\t'%1$d pattern found for \"%2$s\"',\n\t\t\t\t\t'%1$d patterns found for \"%2$s\"',\n\t\t\t\t\tfilteredBlockPatternsLength\n\t\t\t\t),\n\t\t\t\tfilteredBlockPatternsLength,\n\t\t\t\tfilterValue\n\t\t\t) }\n\t\t</Heading>\n\t);\n}\n\nfunction PatternList( { filterValue, selectedCategory, patternCategories } ) {\n\tconst debouncedSpeak = useDebounce( speak, 500 );\n\tconst [ destinationRootClientId, onInsertBlocks ] = useInsertionPoint( {\n\t\tshouldFocusBlock: true,\n\t} );\n\tconst [ allPatterns, , onSelectBlockPattern ] = usePatternsState(\n\t\tonInsertBlocks,\n\t\tdestinationRootClientId\n\t);\n\tconst registeredPatternCategories = useMemo(\n\t\t() =>\n\t\t\tpatternCategories.map(\n\t\t\t\t( patternCategory ) => patternCategory.name\n\t\t\t),\n\t\t[ patternCategories ]\n\t);\n\n\tconst filteredBlockPatterns = useMemo( () => {\n\t\tif ( ! filterValue ) {\n\t\t\treturn allPatterns.filter( ( pattern ) =>\n\t\t\t\tselectedCategory === 'uncategorized'\n\t\t\t\t\t? ! pattern.categories?.length ||\n\t\t\t\t\t  pattern.categories.every(\n\t\t\t\t\t\t\t( category ) =>\n\t\t\t\t\t\t\t\t! registeredPatternCategories.includes(\n\t\t\t\t\t\t\t\t\tcategory\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t  )\n\t\t\t\t\t: pattern.categories?.includes( selectedCategory )\n\t\t\t);\n\t\t}\n\t\treturn searchItems( allPatterns, filterValue );\n\t}, [ filterValue, selectedCategory, allPatterns ] );\n\n\t// Announce search results on change.\n\tuseEffect( () => {\n\t\tif ( ! filterValue ) {\n\t\t\treturn;\n\t\t}\n\t\tconst count = filteredBlockPatterns.length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [ filterValue, debouncedSpeak ] );\n\n\tconst currentShownPatterns = useAsyncList( filteredBlockPatterns, {\n\t\tstep: INITIAL_INSERTER_RESULTS,\n\t} );\n\n\tconst hasItems = !! filteredBlockPatterns?.length;\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-explorer__list\">\n\t\t\t{ hasItems && (\n\t\t\t\t<PatternsListHeader\n\t\t\t\t\tfilterValue={ filterValue }\n\t\t\t\t\tfilteredBlockPatternsLength={ filteredBlockPatterns.length }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<InserterListbox>\n\t\t\t\t{ ! hasItems && <InserterNoResults /> }\n\t\t\t\t{ hasItems && (\n\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\tshownPatterns={ currentShownPatterns }\n\t\t\t\t\t\tblockPatterns={ filteredBlockPatterns }\n\t\t\t\t\t\tonClickPattern={ onSelectBlockPattern }\n\t\t\t\t\t\tisDraggable={ false }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</InserterListbox>\n\t\t</div>\n\t);\n}\n\nexport default PatternList;\n","/**\n * WordPress dependencies\n */\nimport { Modal } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport PatternExplorerSidebar from './sidebar';\nimport PatternList from './patterns-list';\n\nfunction PatternsExplorer( { initialCategory, patternCategories } ) {\n\tconst [ filterValue, setFilterValue ] = useState( '' );\n\tconst [ selectedCategory, setSelectedCategory ] = useState(\n\t\tinitialCategory?.name\n\t);\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-explorer\">\n\t\t\t<PatternExplorerSidebar\n\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t\tpatternCategories={ patternCategories }\n\t\t\t\tonClickCategory={ setSelectedCategory }\n\t\t\t\tfilterValue={ filterValue }\n\t\t\t\tsetFilterValue={ setFilterValue }\n\t\t\t/>\n\t\t\t<PatternList\n\t\t\t\tfilterValue={ filterValue }\n\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t\tpatternCategories={ patternCategories }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nfunction PatternsExplorerModal( { onModalClose, ...restProps } ) {\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Patterns' ) }\n\t\t\tonRequestClose={ onModalClose }\n\t\t\tisFullScreen\n\t\t>\n\t\t\t<PatternsExplorer { ...restProps } />\n\t\t</Modal>\n\t);\n}\n\nexport default PatternsExplorerModal;\n","/**\n * WordPress dependencies\n */\nimport { __, isRTL } from '@wordpress/i18n';\nimport {\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalItem as Item,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\t__experimentalSpacer as Spacer,\n\t__experimentalHeading as Heading,\n\t__experimentalView as View,\n\t__experimentalNavigatorProvider as NavigatorProvider,\n\t__experimentalNavigatorScreen as NavigatorScreen,\n\t__experimentalNavigatorButton as NavigatorButton,\n\t__experimentalNavigatorBackButton as NavigatorBackButton,\n\tFlexBlock,\n} from '@wordpress/components';\nimport { Icon, chevronRight, chevronLeft } from '@wordpress/icons';\n\nfunction ScreenHeader( { title } ) {\n\treturn (\n\t\t<VStack spacing={ 0 }>\n\t\t\t<View>\n\t\t\t\t<Spacer marginBottom={ 0 } paddingX={ 4 } paddingY={ 3 }>\n\t\t\t\t\t<HStack spacing={ 2 }>\n\t\t\t\t\t\t<NavigatorBackButton\n\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t// TODO: This style override is also used in ToolsPanelHeader.\n\t\t\t\t\t\t\t\t// It should be supported out-of-the-box by Button.\n\t\t\t\t\t\t\t\t{ minWidth: 24, padding: 0 }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ticon={ isRTL() ? chevronRight : chevronLeft }\n\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\taria-label={ __( 'Navigate to the previous view' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Spacer>\n\t\t\t\t\t\t\t<Heading level={ 5 }>{ title }</Heading>\n\t\t\t\t\t\t</Spacer>\n\t\t\t\t\t</HStack>\n\t\t\t\t</Spacer>\n\t\t\t</View>\n\t\t</VStack>\n\t);\n}\n\nexport default function MobileTabNavigation( { categories, children } ) {\n\treturn (\n\t\t<NavigatorProvider\n\t\t\tinitialPath=\"/\"\n\t\t\tclassName=\"block-editor-inserter__mobile-tab-navigation\"\n\t\t>\n\t\t\t<NavigatorScreen path=\"/\">\n\t\t\t\t<ItemGroup>\n\t\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t\t<NavigatorButton\n\t\t\t\t\t\t\tkey={ category.name }\n\t\t\t\t\t\t\tpath={ `/category/${ category.name }` }\n\t\t\t\t\t\t\tas={ Item }\n\t\t\t\t\t\t\tisAction\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<HStack>\n\t\t\t\t\t\t\t\t<FlexBlock>{ category.label }</FlexBlock>\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\tisRTL() ? chevronLeft : chevronRight\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t</NavigatorButton>\n\t\t\t\t\t) ) }\n\t\t\t\t</ItemGroup>\n\t\t\t</NavigatorScreen>\n\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t<NavigatorScreen\n\t\t\t\t\tkey={ category.name }\n\t\t\t\t\tpath={ `/category/${ category.name }` }\n\t\t\t\t>\n\t\t\t\t\t<ScreenHeader title={ __( 'Back' ) } />\n\t\t\t\t\t{ children( category ) }\n\t\t\t\t</NavigatorScreen>\n\t\t\t) ) }\n\t\t</NavigatorProvider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tuseMemo,\n\tuseState,\n\tuseCallback,\n\tuseRef,\n\tuseEffect,\n} from '@wordpress/element';\nimport { _x, __ } from '@wordpress/i18n';\nimport { useAsyncList, useViewportMatch } from '@wordpress/compose';\nimport {\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalItem as Item,\n\t__experimentalHStack as HStack,\n\tFlexBlock,\n\tButton,\n} from '@wordpress/components';\nimport { Icon, chevronRight } from '@wordpress/icons';\nimport { focus } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport usePatternsState from './hooks/use-patterns-state';\nimport BlockPatternList from '../block-patterns-list';\nimport PatternsExplorerModal from './block-patterns-explorer/explorer';\nimport MobileTabNavigation from './mobile-tab-navigation';\n\nconst noop = () => {};\n\n// Preferred order of pattern categories. Any other categories should\n// be at the bottom without any re-ordering.\nconst patternCategoriesOrder = [\n\t'featured',\n\t'posts',\n\t'text',\n\t'gallery',\n\t'call-to-action',\n\t'banner',\n\t'header',\n\t'footer',\n];\n\nfunction usePatternsCategories( rootClientId ) {\n\tconst [ allPatterns, allCategories ] = usePatternsState(\n\t\tundefined,\n\t\trootClientId\n\t);\n\n\tconst hasRegisteredCategory = useCallback(\n\t\t( pattern ) => {\n\t\t\tif ( ! pattern.categories || ! pattern.categories.length ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn pattern.categories.some( ( cat ) =>\n\t\t\t\tallCategories.some( ( category ) => category.name === cat )\n\t\t\t);\n\t\t},\n\t\t[ allCategories ]\n\t);\n\n\t// Remove any empty categories.\n\tconst populatedCategories = useMemo( () => {\n\t\tconst categories = allCategories\n\t\t\t.filter( ( category ) =>\n\t\t\t\tallPatterns.some( ( pattern ) =>\n\t\t\t\t\tpattern.categories?.includes( category.name )\n\t\t\t\t)\n\t\t\t)\n\t\t\t.sort( ( { name: aName }, { name: bName } ) => {\n\t\t\t\t// Sort categories according to `patternCategoriesOrder`.\n\t\t\t\tlet aIndex = patternCategoriesOrder.indexOf( aName );\n\t\t\t\tlet bIndex = patternCategoriesOrder.indexOf( bName );\n\t\t\t\t// All other categories should come after that.\n\t\t\t\tif ( aIndex < 0 ) aIndex = patternCategoriesOrder.length;\n\t\t\t\tif ( bIndex < 0 ) bIndex = patternCategoriesOrder.length;\n\t\t\t\treturn aIndex - bIndex;\n\t\t\t} );\n\n\t\tif (\n\t\t\tallPatterns.some(\n\t\t\t\t( pattern ) => ! hasRegisteredCategory( pattern )\n\t\t\t) &&\n\t\t\t! categories.find(\n\t\t\t\t( category ) => category.name === 'uncategorized'\n\t\t\t)\n\t\t) {\n\t\t\tcategories.push( {\n\t\t\t\tname: 'uncategorized',\n\t\t\t\tlabel: _x( 'Uncategorized' ),\n\t\t\t} );\n\t\t}\n\n\t\treturn categories;\n\t}, [ allPatterns, allCategories ] );\n\n\treturn populatedCategories;\n}\n\nexport function BlockPatternsCategoryDialog( {\n\trootClientId,\n\tonInsert,\n\tonHover,\n\tcategory,\n\tshowTitlesAsTooltip,\n} ) {\n\tconst container = useRef();\n\n\tuseEffect( () => {\n\t\tconst timeout = setTimeout( () => {\n\t\t\tconst [ firstTabbable ] = focus.tabbable.find( container.current );\n\t\t\tfirstTabbable?.focus();\n\t\t} );\n\t\treturn () => clearTimeout( timeout );\n\t}, [ category ] );\n\n\treturn (\n\t\t<div\n\t\t\tref={ container }\n\t\t\tclassName=\"block-editor-inserter__patterns-category-dialog\"\n\t\t>\n\t\t\t<BlockPatternsCategoryPanel\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t\tonHover={ onHover }\n\t\t\t\tcategory={ category }\n\t\t\t\tshowTitlesAsTooltip={ showTitlesAsTooltip }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport function BlockPatternsCategoryPanel( {\n\trootClientId,\n\tonInsert,\n\tonHover = noop,\n\tcategory,\n\tshowTitlesAsTooltip,\n} ) {\n\tconst [ allPatterns, , onClick ] = usePatternsState(\n\t\tonInsert,\n\t\trootClientId\n\t);\n\n\tconst availableCategories = usePatternsCategories( rootClientId );\n\tconst currentCategoryPatterns = useMemo(\n\t\t() =>\n\t\t\tallPatterns.filter( ( pattern ) => {\n\t\t\t\tif ( category.name !== 'uncategorized' ) {\n\t\t\t\t\treturn pattern.categories?.includes( category.name );\n\t\t\t\t}\n\n\t\t\t\t// The uncategorized category should show all the patterns without any category\n\t\t\t\t// or with no available category.\n\t\t\t\tconst availablePatternCategories =\n\t\t\t\t\tpattern.categories?.filter( ( cat ) =>\n\t\t\t\t\t\tavailableCategories.find(\n\t\t\t\t\t\t\t( availableCategory ) =>\n\t\t\t\t\t\t\t\tavailableCategory.name === cat\n\t\t\t\t\t\t)\n\t\t\t\t\t) ?? [];\n\n\t\t\t\treturn availablePatternCategories.length === 0;\n\t\t\t} ),\n\t\t[ allPatterns, category ]\n\t);\n\n\tconst currentShownPatterns = useAsyncList( currentCategoryPatterns );\n\n\t// Hide block pattern preview on unmount.\n\tuseEffect( () => () => onHover( null ), [] );\n\n\tif ( ! currentCategoryPatterns.length ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className=\"block-editor-inserter__patterns-category-panel\">\n\t\t\t<div className=\"block-editor-inserter__patterns-category-panel-title\">\n\t\t\t\t{ category.label }\n\t\t\t</div>\n\t\t\t<p>{ category.description }</p>\n\t\t\t<BlockPatternList\n\t\t\t\tshownPatterns={ currentShownPatterns }\n\t\t\t\tblockPatterns={ currentCategoryPatterns }\n\t\t\t\tonClickPattern={ onClick }\n\t\t\t\tonHover={ onHover }\n\t\t\t\tlabel={ category.label }\n\t\t\t\torientation=\"vertical\"\n\t\t\t\tcategory={ category.label }\n\t\t\t\tisDraggable\n\t\t\t\tshowTitlesAsTooltip={ showTitlesAsTooltip }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nfunction BlockPatternsTabs( {\n\tonSelectCategory,\n\tselectedCategory,\n\tonInsert,\n\trootClientId,\n} ) {\n\tconst [ showPatternsExplorer, setShowPatternsExplorer ] = useState( false );\n\tconst categories = usePatternsCategories( rootClientId );\n\tconst initialCategory = selectedCategory || categories[ 0 ];\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\treturn (\n\t\t<>\n\t\t\t{ ! isMobile && (\n\t\t\t\t<div className=\"block-editor-inserter__block-patterns-tabs-container\">\n\t\t\t\t\t<nav aria-label={ __( 'Block pattern categories' ) }>\n\t\t\t\t\t\t<ItemGroup\n\t\t\t\t\t\t\trole=\"list\"\n\t\t\t\t\t\t\tclassName=\"block-editor-inserter__block-patterns-tabs\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\t\t\trole=\"listitem\"\n\t\t\t\t\t\t\t\t\tkey={ category.name }\n\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\tonSelectCategory( category )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tcategory === selectedCategory\n\t\t\t\t\t\t\t\t\t\t\t? 'block-editor-inserter__patterns-category block-editor-inserter__patterns-selected-category'\n\t\t\t\t\t\t\t\t\t\t\t: 'block-editor-inserter__patterns-category'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\taria-label={ category.label }\n\t\t\t\t\t\t\t\t\taria-current={\n\t\t\t\t\t\t\t\t\t\tcategory === selectedCategory\n\t\t\t\t\t\t\t\t\t\t\t? 'true'\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<HStack>\n\t\t\t\t\t\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t\t\t\t\t\t{ category.label }\n\t\t\t\t\t\t\t\t\t\t</FlexBlock>\n\t\t\t\t\t\t\t\t\t\t<Icon icon={ chevronRight } />\n\t\t\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t<div role=\"listitem\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-inserter__patterns-explore-button\"\n\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\tsetShowPatternsExplorer( true )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Explore all patterns' ) }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ItemGroup>\n\t\t\t\t\t</nav>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ isMobile && (\n\t\t\t\t<MobileTabNavigation categories={ categories }>\n\t\t\t\t\t{ ( category ) => (\n\t\t\t\t\t\t<BlockPatternsCategoryPanel\n\t\t\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t\t\tshowTitlesAsTooltip={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</MobileTabNavigation>\n\t\t\t) }\n\t\t\t{ showPatternsExplorer && (\n\t\t\t\t<PatternsExplorerModal\n\t\t\t\t\tinitialCategory={ initialCategory }\n\t\t\t\t\tpatternCategories={ categories }\n\t\t\t\t\tonModalClose={ () => setShowPatternsExplorer( false ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default BlockPatternsTabs;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"url\"];","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { addQueryArgs } from '@wordpress/url';\nimport { Button } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesList from '../block-types-list';\nimport InserterPanel from './panel';\nimport InserterNoResults from './no-results';\nimport useBlockTypesState from './hooks/use-block-types-state';\n\nfunction ReusableBlocksList( { onHover, onInsert, rootClientId } ) {\n\tconst [ items, , , onSelectItem ] = useBlockTypesState(\n\t\trootClientId,\n\t\tonInsert\n\t);\n\n\tconst filteredItems = useMemo( () => {\n\t\treturn items.filter( ( { category } ) => category === 'reusable' );\n\t}, [ items ] );\n\n\tif ( filteredItems.length === 0 ) {\n\t\treturn <InserterNoResults />;\n\t}\n\n\treturn (\n\t\t<InserterPanel title={ __( 'Reusable blocks' ) }>\n\t\t\t<BlockTypesList\n\t\t\t\titems={ filteredItems }\n\t\t\t\tonSelect={ onSelectItem }\n\t\t\t\tonHover={ onHover }\n\t\t\t\tlabel={ __( 'Reusable blocks' ) }\n\t\t\t/>\n\t\t</InserterPanel>\n\t);\n}\n\n// The unwrapped component is only exported for use by unit tests.\n/**\n * List of reusable blocks shown in the \"Reusable\" tab of the inserter.\n *\n * @param {Object}   props              Component props.\n * @param {?string}  props.rootClientId Client id of block to insert into.\n * @param {Function} props.onInsert     Callback to run when item is inserted.\n * @param {Function} props.onHover      Callback to run when item is hovered.\n *\n * @return {WPComponent} The component.\n */\nexport function ReusableBlocksTab( { rootClientId, onInsert, onHover } ) {\n\treturn (\n\t\t<>\n\t\t\t<ReusableBlocksList\n\t\t\t\tonHover={ onHover }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t/>\n\t\t\t<div className=\"block-editor-inserter__manage-reusable-blocks-container\">\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"block-editor-inserter__manage-reusable-blocks\"\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\thref={ addQueryArgs( 'edit.php', {\n\t\t\t\t\t\tpost_type: 'wp_block',\n\t\t\t\t\t} ) }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Manage Reusable blocks' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default ReusableBlocksTab;\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useState, useRef, useMemo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Interface for inserter media requests.\n *\n * @typedef {Object} InserterMediaRequest\n * @property {number} per_page How many items to fetch per page.\n * @property {string} search   The search term to use for filtering the results.\n */\n\n/**\n * Interface for inserter media responses. Any media resource should\n * map their response to this interface, in order to create the core\n * WordPress media blocks (image, video, audio).\n *\n * @typedef {Object} InserterMediaItem\n * @property {string}        title        The title of the media item.\n * @property {string}        url          The source url of the media item.\n * @property {string}        [previewUrl] The preview source url of the media item to display in the media list.\n * @property {number}        [id]         The WordPress id of the media item.\n * @property {number|string} [sourceId]   The id of the media item from external source.\n * @property {string}        [alt]        The alt text of the media item.\n * @property {string}        [caption]    The caption of the media item.\n */\n\n/**\n * Fetches media items based on the provided category.\n * Each media category is responsible for providing a `fetch` function.\n *\n * @param {Object}               category The media category to fetch results for.\n * @param {InserterMediaRequest} query    The query args to use for the request.\n * @return {InserterMediaItem[]} The media results.\n */\nexport function useMediaResults( category, query = {} ) {\n\tconst [ mediaList, setMediaList ] = useState();\n\tconst [ isLoading, setIsLoading ] = useState( false );\n\t// We need to keep track of the last request made because\n\t// multiple request can be fired without knowing the order\n\t// of resolution, and we need to ensure we are showing\n\t// the results of the last request.\n\t// In the future we could use AbortController to cancel previous\n\t// requests, but we don't for now as it involves adding support\n\t// for this to `core-data` package.\n\tconst lastRequest = useRef();\n\tuseEffect( () => {\n\t\t( async () => {\n\t\t\tconst key = JSON.stringify( {\n\t\t\t\tcategory: category.name,\n\t\t\t\t...query,\n\t\t\t} );\n\t\t\tlastRequest.current = key;\n\t\t\tsetIsLoading( true );\n\t\t\tsetMediaList( [] ); // Empty the previous results.\n\t\t\tconst _media = await category.fetch?.( query );\n\t\t\tif ( key === lastRequest.current ) {\n\t\t\t\tsetMediaList( _media );\n\t\t\t\tsetIsLoading( false );\n\t\t\t}\n\t\t} )();\n\t}, [ category.name, ...Object.values( query ) ] );\n\treturn { mediaList, isLoading };\n}\n\nfunction useInserterMediaCategories() {\n\tconst {\n\t\tinserterMediaCategories,\n\t\tallowedMimeTypes,\n\t\tenableOpenverseMediaCategory,\n\t} = useSelect( ( select ) => {\n\t\tconst settings = select( blockEditorStore ).getSettings();\n\t\treturn {\n\t\t\tinserterMediaCategories: settings.inserterMediaCategories,\n\t\t\tallowedMimeTypes: settings.allowedMimeTypes,\n\t\t\tenableOpenverseMediaCategory: settings.enableOpenverseMediaCategory,\n\t\t};\n\t}, [] );\n\t// The allowed `mime_types` can be altered by `upload_mimes` filter and restrict\n\t// some of them. In this case we shouldn't add the category to the available media\n\t// categories list in the inserter.\n\tconst allowedCategories = useMemo( () => {\n\t\tif ( ! inserterMediaCategories || ! allowedMimeTypes ) {\n\t\t\treturn;\n\t\t}\n\t\treturn inserterMediaCategories.filter( ( category ) => {\n\t\t\t// Check if Openverse category is enabled.\n\t\t\tif (\n\t\t\t\t! enableOpenverseMediaCategory &&\n\t\t\t\tcategory.name === 'openverse'\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn Object.values( allowedMimeTypes ).some( ( mimeType ) =>\n\t\t\t\tmimeType.startsWith( `${ category.mediaType }/` )\n\t\t\t);\n\t\t} );\n\t}, [\n\t\tinserterMediaCategories,\n\t\tallowedMimeTypes,\n\t\tenableOpenverseMediaCategory,\n\t] );\n\treturn allowedCategories;\n}\n\nexport function useMediaCategories( rootClientId ) {\n\tconst [ categories, setCategories ] = useState( [] );\n\tconst { canInsertImage, canInsertVideo, canInsertAudio } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { canInsertBlockType } = select( blockEditorStore );\n\t\t\treturn {\n\t\t\t\tcanInsertImage: canInsertBlockType(\n\t\t\t\t\t'core/image',\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t\tcanInsertVideo: canInsertBlockType(\n\t\t\t\t\t'core/video',\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t\tcanInsertAudio: canInsertBlockType(\n\t\t\t\t\t'core/audio',\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\tconst inserterMediaCategories = useInserterMediaCategories();\n\tuseEffect( () => {\n\t\t( async () => {\n\t\t\tconst _categories = [];\n\t\t\t// If `inserterMediaCategories` is not defined in\n\t\t\t// block editor settings, do not show any media categories.\n\t\t\tif ( ! inserterMediaCategories ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Loop through categories to check if they have at least one media item.\n\t\t\tconst categoriesHaveMedia = new Map(\n\t\t\t\tawait Promise.all(\n\t\t\t\t\tinserterMediaCategories.map( async ( category ) => {\n\t\t\t\t\t\t// Some sources are external and we don't need to make a request.\n\t\t\t\t\t\tif ( category.isExternalResource ) {\n\t\t\t\t\t\t\treturn [ category.name, true ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet results = [];\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresults = await category.fetch( {\n\t\t\t\t\t\t\t\tper_page: 1,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t// If the request fails, we shallow the error and just don't show\n\t\t\t\t\t\t\t// the category, in order to not break the media tab.\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [ category.name, !! results.length ];\n\t\t\t\t\t} )\n\t\t\t\t)\n\t\t\t);\n\t\t\t// We need to filter out categories that don't have any media items or\n\t\t\t// whose corresponding block type is not allowed to be inserted, based\n\t\t\t// on the category's `mediaType`.\n\t\t\tconst canInsertMediaType = {\n\t\t\t\timage: canInsertImage,\n\t\t\t\tvideo: canInsertVideo,\n\t\t\t\taudio: canInsertAudio,\n\t\t\t};\n\t\t\tinserterMediaCategories.forEach( ( category ) => {\n\t\t\t\tif (\n\t\t\t\t\tcanInsertMediaType[ category.mediaType ] &&\n\t\t\t\t\tcategoriesHaveMedia.get( category.name )\n\t\t\t\t) {\n\t\t\t\t\t_categories.push( category );\n\t\t\t\t}\n\t\t\t} );\n\t\t\tif ( !! _categories.length ) {\n\t\t\t\tsetCategories( _categories );\n\t\t\t}\n\t\t} )();\n\t}, [\n\t\tcanInsertImage,\n\t\tcanInsertVideo,\n\t\tcanInsertAudio,\n\t\tinserterMediaCategories,\n\t] );\n\treturn categories;\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst moreVertical = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z\" />\n\t</SVG>\n);\n\nexport default moreVertical;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst external = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z\" />\n\t</SVG>\n);\n\nexport default external;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blob\"];","/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\n\nconst mediaTypeTag = { image: 'img', video: 'video', audio: 'audio' };\n\n/** @typedef {import('./hooks').InserterMediaItem} InserterMediaItem */\n\n/**\n * Creates a block and a preview element from a media object.\n *\n * @param {InserterMediaItem}         media     The media object to create the block from.\n * @param {('image'|'audio'|'video')} mediaType The media type to create the block for.\n * @return {[WPBlock, JSX.Element]} An array containing the block and the preview element.\n */\nexport function getBlockAndPreviewFromMedia( media, mediaType ) {\n\t// Add the common attributes between the different media types.\n\tconst attributes = {\n\t\tid: media.id || undefined,\n\t\tcaption: media.caption || undefined,\n\t};\n\tconst mediaSrc = media.url;\n\tconst alt = media.alt || undefined;\n\tif ( mediaType === 'image' ) {\n\t\tattributes.url = mediaSrc;\n\t\tattributes.alt = alt;\n\t} else if ( [ 'video', 'audio' ].includes( mediaType ) ) {\n\t\tattributes.src = mediaSrc;\n\t}\n\tconst PreviewTag = mediaTypeTag[ mediaType ];\n\tconst preview = (\n\t\t<PreviewTag\n\t\t\tsrc={ media.previewUrl || mediaSrc }\n\t\t\talt={ alt }\n\t\t\tcontrols={ mediaType === 'audio' ? true : undefined }\n\t\t\tinert=\"true\"\n\t\t\tonError={ ( { currentTarget } ) => {\n\t\t\t\t// Fall back to the media source if the preview cannot be loaded.\n\t\t\t\tif ( currentTarget.src === media.previewUrl ) {\n\t\t\t\t\tcurrentTarget.src = mediaSrc;\n\t\t\t\t}\n\t\t\t} }\n\t\t/>\n\t);\n\treturn [ createBlock( `core/${ mediaType }`, attributes ), preview ];\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__unstableCompositeItem as CompositeItem,\n\tTooltip,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItem,\n\tSpinner,\n\tModal,\n\tFlex,\n\tFlexItem,\n\tButton,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useMemo, useCallback, useState } from '@wordpress/element';\nimport { cloneBlock } from '@wordpress/blocks';\nimport { moreVertical, external } from '@wordpress/icons';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { isBlobURL } from '@wordpress/blob';\n\n/**\n * Internal dependencies\n */\nimport InserterDraggableBlocks from '../../inserter-draggable-blocks';\nimport { getBlockAndPreviewFromMedia } from './utils';\nimport { store as blockEditorStore } from '../../../store';\n\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\nconst MAXIMUM_TITLE_LENGTH = 25;\nconst MEDIA_OPTIONS_POPOVER_PROPS = {\n\tposition: 'bottom left',\n\tclassName:\n\t\t'block-editor-inserter__media-list__item-preview-options__popover',\n};\n\nfunction MediaPreviewOptions( { category, media } ) {\n\tif ( ! category.getReportUrl ) {\n\t\treturn null;\n\t}\n\tconst reportUrl = category.getReportUrl( media );\n\treturn (\n\t\t<DropdownMenu\n\t\t\tclassName=\"block-editor-inserter__media-list__item-preview-options\"\n\t\t\tlabel={ __( 'Options' ) }\n\t\t\tpopoverProps={ MEDIA_OPTIONS_POPOVER_PROPS }\n\t\t\ticon={ moreVertical }\n\t\t>\n\t\t\t{ () => (\n\t\t\t\t<MenuGroup>\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\twindow.open( reportUrl, '_blank' ).focus()\n\t\t\t\t\t\t}\n\t\t\t\t\t\ticon={ external }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t/* translators: %s: The media type to report e.g: \"image\", \"video\", \"audio\" */\n\t\t\t\t\t\t\t__( 'Report %s' ),\n\t\t\t\t\t\t\tcategory.mediaType\n\t\t\t\t\t\t) }\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</MenuGroup>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n\nfunction InsertExternalImageModal( { onClose, onSubmit } ) {\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Insert external image' ) }\n\t\t\tonRequestClose={ onClose }\n\t\t\tclassName=\"block-editor-inserter-media-tab-media-preview-inserter-external-image-modal\"\n\t\t>\n\t\t\t<VStack spacing={ 3 }>\n\t\t\t\t<p>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'This image cannot be uploaded to your Media Library, but it can still be inserted as an external image.'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'External images can be removed by the external provider without warning and could even have legal compliance issues related to privacy legislation.'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t</VStack>\n\t\t\t<Flex\n\t\t\t\tclassName=\"block-editor-block-lock-modal__actions\"\n\t\t\t\tjustify=\"flex-end\"\n\t\t\t\texpanded={ false }\n\t\t\t>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button variant=\"tertiary\" onClick={ onClose }>\n\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button variant=\"primary\" onClick={ onSubmit }>\n\t\t\t\t\t\t{ __( 'Insert' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</Modal>\n\t);\n}\n\nexport function MediaPreview( { media, onClick, composite, category } ) {\n\tconst [ showExternalUploadModal, setShowExternalUploadModal ] =\n\t\tuseState( false );\n\tconst [ isHovered, setIsHovered ] = useState( false );\n\tconst [ isInserting, setIsInserting ] = useState( false );\n\tconst [ block, preview ] = useMemo(\n\t\t() => getBlockAndPreviewFromMedia( media, category.mediaType ),\n\t\t[ media, category.mediaType ]\n\t);\n\tconst { createErrorNotice, createSuccessNotice } =\n\t\tuseDispatch( noticesStore );\n\tconst mediaUpload = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings().mediaUpload,\n\t\t[]\n\t);\n\tconst onMediaInsert = useCallback(\n\t\t( previewBlock ) => {\n\t\t\t// Prevent multiple uploads when we're in the process of inserting.\n\t\t\tif ( isInserting ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst clonedBlock = cloneBlock( previewBlock );\n\t\t\tconst { id, url, caption } = clonedBlock.attributes;\n\t\t\t// Media item already exists in library, so just insert it.\n\t\t\tif ( !! id ) {\n\t\t\t\tonClick( clonedBlock );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetIsInserting( true );\n\t\t\t// Media item does not exist in library, so try to upload it.\n\t\t\t// Fist fetch the image data. This may fail if the image host\n\t\t\t// doesn't allow CORS with the domain.\n\t\t\t// If this happens, we insert the image block using the external\n\t\t\t// URL and let the user know about the possible implications.\n\t\t\twindow\n\t\t\t\t.fetch( url )\n\t\t\t\t.then( ( response ) => response.blob() )\n\t\t\t\t.then( ( blob ) => {\n\t\t\t\t\tmediaUpload( {\n\t\t\t\t\t\tfilesList: [ blob ],\n\t\t\t\t\t\tadditionalData: { caption },\n\t\t\t\t\t\tonFileChange( [ img ] ) {\n\t\t\t\t\t\t\tif ( isBlobURL( img.url ) ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick( {\n\t\t\t\t\t\t\t\t...clonedBlock,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\t...clonedBlock.attributes,\n\t\t\t\t\t\t\t\t\tid: img.id,\n\t\t\t\t\t\t\t\t\turl: img.url,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\t\t\t\t__( 'Image uploaded and inserted.' ),\n\t\t\t\t\t\t\t\t{ type: 'snackbar' }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsetIsInserting( false );\n\t\t\t\t\t\t},\n\t\t\t\t\t\tallowedTypes: ALLOWED_MEDIA_TYPES,\n\t\t\t\t\t\tonError( message ) {\n\t\t\t\t\t\t\tcreateErrorNotice( message, { type: 'snackbar' } );\n\t\t\t\t\t\t\tsetIsInserting( false );\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t} )\n\t\t\t\t.catch( () => {\n\t\t\t\t\tsetShowExternalUploadModal( true );\n\t\t\t\t\tsetIsInserting( false );\n\t\t\t\t} );\n\t\t},\n\t\t[\n\t\t\tisInserting,\n\t\t\tonClick,\n\t\t\tmediaUpload,\n\t\t\tcreateErrorNotice,\n\t\t\tcreateSuccessNotice,\n\t\t]\n\t);\n\tconst title = media.title?.rendered || media.title;\n\tlet truncatedTitle;\n\tif ( title.length > MAXIMUM_TITLE_LENGTH ) {\n\t\tconst omission = '...';\n\t\ttruncatedTitle =\n\t\t\ttitle.slice( 0, MAXIMUM_TITLE_LENGTH - omission.length ) + omission;\n\t}\n\tconst onMouseEnter = useCallback( () => setIsHovered( true ), [] );\n\tconst onMouseLeave = useCallback( () => setIsHovered( false ), [] );\n\treturn (\n\t\t<>\n\t\t\t<InserterDraggableBlocks isEnabled={ true } blocks={ [ block ] }>\n\t\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'block-editor-inserter__media-list__list-item',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-hovered': isHovered,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tdraggable={ draggable }\n\t\t\t\t\t\tonDragStart={ onDragStart }\n\t\t\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip text={ truncatedTitle || title }>\n\t\t\t\t\t\t\t{ /* Adding `is-hovered` class to the wrapper element is needed\n\t\t\t\t\t\t\tbecause the options Popover is rendered outside of this node. */ }\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tonMouseEnter={ onMouseEnter }\n\t\t\t\t\t\t\t\tonMouseLeave={ onMouseLeave }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CompositeItem\n\t\t\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\t\t\tas=\"div\"\n\t\t\t\t\t\t\t\t\t{ ...composite }\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-inserter__media-list__item\"\n\t\t\t\t\t\t\t\t\tonClick={ () => onMediaInsert( block ) }\n\t\t\t\t\t\t\t\t\taria-label={ title }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"block-editor-inserter__media-list__item-preview\">\n\t\t\t\t\t\t\t\t\t\t{ preview }\n\t\t\t\t\t\t\t\t\t\t{ isInserting && (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"block-editor-inserter__media-list__item-preview-spinner\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</CompositeItem>\n\t\t\t\t\t\t\t\t{ ! isInserting && (\n\t\t\t\t\t\t\t\t\t<MediaPreviewOptions\n\t\t\t\t\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t\t\t\t\t\tmedia={ media }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</InserterDraggableBlocks>\n\t\t\t{ showExternalUploadModal && (\n\t\t\t\t<InsertExternalImageModal\n\t\t\t\t\tonClose={ () => setShowExternalUploadModal( false ) }\n\t\t\t\t\tonSubmit={ () => {\n\t\t\t\t\t\tonClick( cloneBlock( block ) );\n\t\t\t\t\t\tcreateSuccessNotice( __( 'Image inserted.' ), {\n\t\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tsetShowExternalUploadModal( false );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__unstableComposite as Composite,\n\t__unstableUseCompositeState as useCompositeState,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { MediaPreview } from './media-preview';\n\nfunction MediaList( {\n\tmediaList,\n\tcategory,\n\tonClick,\n\tlabel = __( 'Media List' ),\n} ) {\n\tconst composite = useCompositeState();\n\treturn (\n\t\t<Composite\n\t\t\t{ ...composite }\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-inserter__media-list\"\n\t\t\taria-label={ label }\n\t\t>\n\t\t\t{ mediaList.map( ( media, index ) => (\n\t\t\t\t<MediaPreview\n\t\t\t\t\tkey={ media.id || media.sourceId || index }\n\t\t\t\t\tmedia={ media }\n\t\t\t\t\tcategory={ category }\n\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\tcomposite={ composite }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</Composite>\n\t);\n}\n\nexport default MediaList;\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\nimport { useDebounce } from '@wordpress/compose';\n\nexport default function useDebouncedInput( defaultValue = '' ) {\n\tconst [ input, setInput ] = useState( defaultValue );\n\tconst [ debounced, setter ] = useState( defaultValue );\n\tconst setDebounced = useDebounce( setter, 250 );\n\tuseEffect( () => {\n\t\tif ( debounced !== input ) {\n\t\t\tsetDebounced( input );\n\t\t}\n\t}, [ debounced, input ] );\n\treturn [ input, setInput, debounced ];\n}\n","/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\nimport { Spinner, SearchControl } from '@wordpress/components';\nimport { focus } from '@wordpress/dom';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport MediaList from './media-list';\nimport useDebouncedInput from '../hooks/use-debounced-input';\nimport { useMediaResults } from './hooks';\nimport InserterNoResults from '../no-results';\n\nconst INITIAL_MEDIA_ITEMS_PER_PAGE = 10;\n\nexport function MediaCategoryDialog( { rootClientId, onInsert, category } ) {\n\tconst container = useRef();\n\tuseEffect( () => {\n\t\tconst timeout = setTimeout( () => {\n\t\t\tconst [ firstTabbable ] = focus.tabbable.find( container.current );\n\t\t\tfirstTabbable?.focus();\n\t\t} );\n\t\treturn () => clearTimeout( timeout );\n\t}, [ category ] );\n\treturn (\n\t\t<div ref={ container } className=\"block-editor-inserter__media-dialog\">\n\t\t\t<MediaCategoryPanel\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t\tcategory={ category }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport function MediaCategoryPanel( { rootClientId, onInsert, category } ) {\n\tconst [ search, setSearch, debouncedSearch ] = useDebouncedInput();\n\tconst { mediaList, isLoading } = useMediaResults( category, {\n\t\tper_page: !! debouncedSearch ? 20 : INITIAL_MEDIA_ITEMS_PER_PAGE,\n\t\tsearch: debouncedSearch,\n\t} );\n\tconst baseCssClass = 'block-editor-inserter__media-panel';\n\tconst searchLabel = category.labels.search_items || __( 'Search' );\n\treturn (\n\t\t<div className={ baseCssClass }>\n\t\t\t<SearchControl\n\t\t\t\tclassName={ `${ baseCssClass }-search` }\n\t\t\t\tonChange={ setSearch }\n\t\t\t\tvalue={ search }\n\t\t\t\tlabel={ searchLabel }\n\t\t\t\tplaceholder={ searchLabel }\n\t\t\t/>\n\t\t\t{ isLoading && (\n\t\t\t\t<div className={ `${ baseCssClass }-spinner` }>\n\t\t\t\t\t<Spinner />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ ! isLoading && ! mediaList?.length && <InserterNoResults /> }\n\t\t\t{ ! isLoading && !! mediaList?.length && (\n\t\t\t\t<MediaList\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tonClick={ onInsert }\n\t\t\t\t\tmediaList={ mediaList }\n\t\t\t\t\tcategory={ category }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport function MediaUploadCheck( { fallback = null, children } ) {\n\tconst hasUploadPermissions = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn !! getSettings().mediaUpload;\n\t}, [] );\n\treturn hasUploadPermissions ? children : fallback;\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-upload/README.md\n */\nexport default MediaUploadCheck;\n","/**\n * WordPress dependencies\n */\nimport { withFilters } from '@wordpress/components';\n\n/**\n * This is a placeholder for the media upload component necessary to make it possible to provide\n * an integration with the core blocks that handle media files. By default it renders nothing but\n * it provides a way to have it overridden with the `editor.MediaUpload` filter.\n *\n * @return {WPComponent} The component to be rendered.\n */\nconst MediaUpload = () => null;\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-upload/README.md\n */\nexport default withFilters( 'editor.MediaUpload' )( MediaUpload );\n","/**\n * External dependencies\n */\nimport classNames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useViewportMatch } from '@wordpress/compose';\nimport {\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalItem as Item,\n\t__experimentalHStack as HStack,\n\tFlexBlock,\n\tButton,\n} from '@wordpress/components';\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { Icon, chevronRight } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { MediaCategoryPanel } from './media-panel';\nimport MediaUploadCheck from '../../media-upload/check';\nimport MediaUpload from '../../media-upload';\nimport { useMediaCategories } from './hooks';\nimport { getBlockAndPreviewFromMedia } from './utils';\nimport MobileTabNavigation from '../mobile-tab-navigation';\n\nconst ALLOWED_MEDIA_TYPES = [ 'image', 'video', 'audio' ];\n\nfunction MediaTab( {\n\trootClientId,\n\tselectedCategory,\n\tonSelectCategory,\n\tonInsert,\n} ) {\n\tconst mediaCategories = useMediaCategories( rootClientId );\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\tconst baseCssClass = 'block-editor-inserter__media-tabs';\n\tconst onSelectMedia = useCallback(\n\t\t( media ) => {\n\t\t\tif ( ! media?.url ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst [ block ] = getBlockAndPreviewFromMedia( media, media.type );\n\t\t\tonInsert( block );\n\t\t},\n\t\t[ onInsert ]\n\t);\n\tconst mobileMediaCategories = useMemo(\n\t\t() =>\n\t\t\tmediaCategories.map( ( mediaCategory ) => ( {\n\t\t\t\t...mediaCategory,\n\t\t\t\tlabel: mediaCategory.labels.name,\n\t\t\t} ) ),\n\t\t[ mediaCategories ]\n\t);\n\treturn (\n\t\t<>\n\t\t\t{ ! isMobile && (\n\t\t\t\t<div className={ `${ baseCssClass }-container` }>\n\t\t\t\t\t<nav aria-label={ __( 'Media categories' ) }>\n\t\t\t\t\t\t<ItemGroup role=\"list\" className={ baseCssClass }>\n\t\t\t\t\t\t\t{ mediaCategories.map( ( mediaCategory ) => (\n\t\t\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\t\t\trole=\"listitem\"\n\t\t\t\t\t\t\t\t\tkey={ mediaCategory.name }\n\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\tonSelectCategory( mediaCategory )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={ classNames(\n\t\t\t\t\t\t\t\t\t\t`${ baseCssClass }__media-category`,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'is-selected':\n\t\t\t\t\t\t\t\t\t\t\t\tselectedCategory ===\n\t\t\t\t\t\t\t\t\t\t\t\tmediaCategory,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\taria-label={ mediaCategory.labels.name }\n\t\t\t\t\t\t\t\t\taria-current={\n\t\t\t\t\t\t\t\t\t\tmediaCategory === selectedCategory\n\t\t\t\t\t\t\t\t\t\t\t? 'true'\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<HStack>\n\t\t\t\t\t\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t\t\t\t\t\t{ mediaCategory.labels.name }\n\t\t\t\t\t\t\t\t\t\t</FlexBlock>\n\t\t\t\t\t\t\t\t\t\t<Icon icon={ chevronRight } />\n\t\t\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t<div role=\"listitem\">\n\t\t\t\t\t\t\t\t<MediaUploadCheck>\n\t\t\t\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\t\t\tmultiple={ false }\n\t\t\t\t\t\t\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\t\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\t\t\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Safari doesn't emit a focus event on button elements when\n\t\t\t\t\t\t\t\t\t\t\t\t\t// clicked and we need to manually focus the button here.\n\t\t\t\t\t\t\t\t\t\t\t\t\t// The reason is that core's Media Library modal explicitly triggers a\n\t\t\t\t\t\t\t\t\t\t\t\t\t// focus event and therefore a `blur` event is triggered on a different\n\t\t\t\t\t\t\t\t\t\t\t\t\t// element, which doesn't contain the `data-unstable-ignore-focus-outside-for-relatedtarget`\n\t\t\t\t\t\t\t\t\t\t\t\t\t// attribute making the Inserter dialog to close.\n\t\t\t\t\t\t\t\t\t\t\t\t\tevent.target.focus();\n\t\t\t\t\t\t\t\t\t\t\t\t\topen();\n\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-inserter__media-library-button\"\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-unstable-ignore-focus-outside-for-relatedtarget=\".media-modal\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Open Media Library' ) }\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</MediaUploadCheck>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ItemGroup>\n\t\t\t\t\t</nav>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ isMobile && (\n\t\t\t\t<MobileTabNavigation categories={ mobileMediaCategories }>\n\t\t\t\t\t{ ( category ) => (\n\t\t\t\t\t\t<MediaCategoryPanel\n\t\t\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</MobileTabNavigation>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default MediaTab;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst { Fill: __unstableInserterMenuExtension, Slot } = createSlotFill(\n\t'__unstableInserterMenuExtension'\n);\n\n__unstableInserterMenuExtension.Slot = Slot;\n\nexport default __unstableInserterMenuExtension;\n","/** @typedef {import('../store/selectors').WPEditorInserterItem} WPEditorInserterItem */\n\n/**\n * Helper function to order inserter block items according to a provided array of prioritized blocks.\n *\n * @param {WPEditorInserterItem[]} items    The array of editor inserter block items to be sorted.\n * @param {string[]}               priority The array of block names to be prioritized.\n * @return {WPEditorInserterItem[]} The sorted array of editor inserter block items.\n */\nexport const orderInserterBlockItems = ( items, priority ) => {\n\tif ( ! priority ) {\n\t\treturn items;\n\t}\n\n\titems.sort( ( { id: aName }, { id: bName } ) => {\n\t\t// Sort block items according to `priority`.\n\t\tlet aIndex = priority.indexOf( aName );\n\t\tlet bIndex = priority.indexOf( bName );\n\t\t// All other block items should come after that.\n\t\tif ( aIndex < 0 ) aIndex = priority.length;\n\t\tif ( bIndex < 0 ) bIndex = priority.length;\n\t\treturn aIndex - bIndex;\n\t} );\n\n\treturn items;\n};\n","/**\n * WordPress dependencies\n */\nimport { useMemo, useEffect } from '@wordpress/element';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { VisuallyHidden } from '@wordpress/components';\nimport { useDebounce, useAsyncList } from '@wordpress/compose';\nimport { speak } from '@wordpress/a11y';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesList from '../block-types-list';\nimport BlockPatternsList from '../block-patterns-list';\nimport __unstableInserterMenuExtension from '../inserter-menu-extension';\nimport InserterPanel from './panel';\nimport InserterNoResults from './no-results';\nimport useInsertionPoint from './hooks/use-insertion-point';\nimport usePatternsState from './hooks/use-patterns-state';\nimport useBlockTypesState from './hooks/use-block-types-state';\nimport { searchBlockItems, searchItems } from './search-items';\nimport InserterListbox from '../inserter-listbox';\nimport { orderBy } from '../../utils/sorting';\nimport { orderInserterBlockItems } from '../../utils/order-inserter-block-items';\nimport { store as blockEditorStore } from '../../store';\n\nconst INITIAL_INSERTER_RESULTS = 9;\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation and rerendering the component.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\nfunction InserterSearchResults( {\n\tfilterValue,\n\tonSelect,\n\tonHover,\n\trootClientId,\n\tclientId,\n\tisAppender,\n\t__experimentalInsertionIndex,\n\tmaxBlockPatterns,\n\tmaxBlockTypes,\n\tshowBlockDirectory = false,\n\tisDraggable = true,\n\tshouldFocusBlock = true,\n\tprioritizePatterns,\n\tselectBlockOnInsert,\n} ) {\n\tconst debouncedSpeak = useDebounce( speak, 500 );\n\n\tconst { prioritizedBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst blockListSettings =\n\t\t\t\tselect( blockEditorStore ).getBlockListSettings( rootClientId );\n\n\t\t\treturn {\n\t\t\t\tprioritizedBlocks:\n\t\t\t\t\tblockListSettings?.prioritizedInserterBlocks || EMPTY_ARRAY,\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\n\tconst [ destinationRootClientId, onInsertBlocks ] = useInsertionPoint( {\n\t\tonSelect,\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\tinsertionIndex: __experimentalInsertionIndex,\n\t\tshouldFocusBlock,\n\t\tselectBlockOnInsert,\n\t} );\n\tconst [\n\t\tblockTypes,\n\t\tblockTypeCategories,\n\t\tblockTypeCollections,\n\t\tonSelectBlockType,\n\t] = useBlockTypesState( destinationRootClientId, onInsertBlocks );\n\tconst [ patterns, , onSelectBlockPattern ] = usePatternsState(\n\t\tonInsertBlocks,\n\t\tdestinationRootClientId\n\t);\n\n\tconst filteredBlockPatterns = useMemo( () => {\n\t\tif ( maxBlockPatterns === 0 ) {\n\t\t\treturn [];\n\t\t}\n\t\tconst results = searchItems( patterns, filterValue );\n\t\treturn maxBlockPatterns !== undefined\n\t\t\t? results.slice( 0, maxBlockPatterns )\n\t\t\t: results;\n\t}, [ filterValue, patterns, maxBlockPatterns ] );\n\n\tlet maxBlockTypesToShow = maxBlockTypes;\n\tif ( prioritizePatterns && filteredBlockPatterns.length > 2 ) {\n\t\tmaxBlockTypesToShow = 0;\n\t}\n\n\tconst filteredBlockTypes = useMemo( () => {\n\t\tif ( maxBlockTypesToShow === 0 ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tlet orderedItems = orderBy( blockTypes, 'frecency', 'desc' );\n\n\t\tif ( ! filterValue && prioritizedBlocks.length ) {\n\t\t\torderedItems = orderInserterBlockItems(\n\t\t\t\torderedItems,\n\t\t\t\tprioritizedBlocks\n\t\t\t);\n\t\t}\n\n\t\tconst results = searchBlockItems(\n\t\t\torderedItems,\n\t\t\tblockTypeCategories,\n\t\t\tblockTypeCollections,\n\t\t\tfilterValue\n\t\t);\n\n\t\treturn maxBlockTypesToShow !== undefined\n\t\t\t? results.slice( 0, maxBlockTypesToShow )\n\t\t\t: results;\n\t}, [\n\t\tfilterValue,\n\t\tblockTypes,\n\t\tblockTypeCategories,\n\t\tblockTypeCollections,\n\t\tmaxBlockTypesToShow,\n\t\tprioritizedBlocks,\n\t] );\n\n\t// Announce search results on change.\n\tuseEffect( () => {\n\t\tif ( ! filterValue ) {\n\t\t\treturn;\n\t\t}\n\t\tconst count = filteredBlockTypes.length + filteredBlockPatterns.length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [\n\t\tfilterValue,\n\t\tdebouncedSpeak,\n\t\tfilteredBlockTypes,\n\t\tfilteredBlockPatterns,\n\t] );\n\n\tconst currentShownBlockTypes = useAsyncList( filteredBlockTypes, {\n\t\tstep: INITIAL_INSERTER_RESULTS,\n\t} );\n\tconst currentShownPatterns = useAsyncList(\n\t\tcurrentShownBlockTypes.length === filteredBlockTypes.length\n\t\t\t? filteredBlockPatterns\n\t\t\t: EMPTY_ARRAY\n\t);\n\n\tconst hasItems =\n\t\tfilteredBlockTypes.length > 0 || filteredBlockPatterns.length > 0;\n\n\tconst blocksUI = !! filteredBlockTypes.length && (\n\t\t<InserterPanel\n\t\t\ttitle={ <VisuallyHidden>{ __( 'Blocks' ) }</VisuallyHidden> }\n\t\t>\n\t\t\t<BlockTypesList\n\t\t\t\titems={ currentShownBlockTypes }\n\t\t\t\tonSelect={ onSelectBlockType }\n\t\t\t\tonHover={ onHover }\n\t\t\t\tlabel={ __( 'Blocks' ) }\n\t\t\t\tisDraggable={ isDraggable }\n\t\t\t/>\n\t\t</InserterPanel>\n\t);\n\n\tconst patternsUI = !! filteredBlockPatterns.length && (\n\t\t<InserterPanel\n\t\t\ttitle={\n\t\t\t\t<VisuallyHidden>{ __( 'Block Patterns' ) }</VisuallyHidden>\n\t\t\t}\n\t\t>\n\t\t\t<div className=\"block-editor-inserter__quick-inserter-patterns\">\n\t\t\t\t<BlockPatternsList\n\t\t\t\t\tshownPatterns={ currentShownPatterns }\n\t\t\t\t\tblockPatterns={ filteredBlockPatterns }\n\t\t\t\t\tonClickPattern={ onSelectBlockPattern }\n\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\tisDraggable={ isDraggable }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</InserterPanel>\n\t);\n\n\treturn (\n\t\t<InserterListbox>\n\t\t\t{ ! showBlockDirectory && ! hasItems && <InserterNoResults /> }\n\n\t\t\t{ prioritizePatterns ? patternsUI : blocksUI }\n\n\t\t\t{ !! filteredBlockTypes.length &&\n\t\t\t\t!! filteredBlockPatterns.length && (\n\t\t\t\t\t<div className=\"block-editor-inserter__quick-inserter-separator\" />\n\t\t\t\t) }\n\n\t\t\t{ prioritizePatterns ? blocksUI : patternsUI }\n\n\t\t\t{ showBlockDirectory && (\n\t\t\t\t<__unstableInserterMenuExtension.Slot\n\t\t\t\t\tfillProps={ {\n\t\t\t\t\t\tonSelect: onSelectBlockType,\n\t\t\t\t\t\tonHover,\n\t\t\t\t\t\tfilterValue,\n\t\t\t\t\t\thasItems,\n\t\t\t\t\t\trootClientId: destinationRootClientId,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ ( fills ) => {\n\t\t\t\t\t\tif ( fills.length ) {\n\t\t\t\t\t\t\treturn fills;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( ! hasItems ) {\n\t\t\t\t\t\t\treturn <InserterNoResults />;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} }\n\t\t\t\t</__unstableInserterMenuExtension.Slot>\n\t\t\t) }\n\t\t</InserterListbox>\n\t);\n}\n\nexport default InserterSearchResults;\n","/**\n * WordPress dependencies\n */\nimport { symbol as reusableBlockIcon } from '@wordpress/icons';\nimport { useMemo } from '@wordpress/element';\nimport { TabPanel } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\nconst blocksTab = {\n\tname: 'blocks',\n\t/* translators: Blocks tab title in the block inserter. */\n\ttitle: __( 'Blocks' ),\n};\nconst patternsTab = {\n\tname: 'patterns',\n\t/* translators: Patterns tab title in the block inserter. */\n\ttitle: __( 'Patterns' ),\n};\nconst reusableBlocksTab = {\n\tname: 'reusable',\n\t/* translators: Reusable blocks tab title in the block inserter. */\n\ttitle: __( 'Reusable' ),\n\ticon: reusableBlockIcon,\n};\nconst mediaTab = {\n\tname: 'media',\n\t/* translators: Media tab title in the block inserter. */\n\ttitle: __( 'Media' ),\n};\n\nfunction InserterTabs( {\n\tchildren,\n\tshowPatterns = false,\n\tshowReusableBlocks = false,\n\tshowMedia = false,\n\tonSelect,\n\tprioritizePatterns,\n} ) {\n\tconst tabs = useMemo( () => {\n\t\tconst tempTabs = [];\n\t\tif ( prioritizePatterns && showPatterns ) {\n\t\t\ttempTabs.push( patternsTab );\n\t\t}\n\t\ttempTabs.push( blocksTab );\n\t\tif ( ! prioritizePatterns && showPatterns ) {\n\t\t\ttempTabs.push( patternsTab );\n\t\t}\n\t\tif ( showMedia ) {\n\t\t\ttempTabs.push( mediaTab );\n\t\t}\n\t\tif ( showReusableBlocks ) {\n\t\t\ttempTabs.push( reusableBlocksTab );\n\t\t}\n\t\treturn tempTabs;\n\t}, [ prioritizePatterns, showPatterns, showReusableBlocks, showMedia ] );\n\n\treturn (\n\t\t<TabPanel\n\t\t\tclassName=\"block-editor-inserter__tabs\"\n\t\t\ttabs={ tabs }\n\t\t\tonSelect={ onSelect }\n\t\t>\n\t\t\t{ children }\n\t\t</TabPanel>\n\t);\n}\n\nexport default InserterTabs;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tforwardRef,\n\tuseState,\n\tuseCallback,\n\tuseMemo,\n\tuseImperativeHandle,\n\tuseRef,\n} from '@wordpress/element';\nimport { VisuallyHidden, SearchControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport Tips from './tips';\nimport InserterPreviewPanel from './preview-panel';\nimport BlockTypesTab from './block-types-tab';\nimport BlockPatternsTabs, {\n\tBlockPatternsCategoryDialog,\n} from './block-patterns-tab';\nimport ReusableBlocksTab from './reusable-blocks-tab';\nimport { MediaTab, MediaCategoryDialog, useMediaCategories } from './media-tab';\nimport InserterSearchResults from './search-results';\nimport useDebouncedInput from './hooks/use-debounced-input';\nimport useInsertionPoint from './hooks/use-insertion-point';\nimport InserterTabs from './tabs';\nimport { store as blockEditorStore } from '../../store';\n\nfunction InserterMenu(\n\t{\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\t__experimentalInsertionIndex,\n\t\tonSelect,\n\t\tshowInserterHelpPanel,\n\t\tshowMostUsedBlocks,\n\t\t__experimentalFilterValue = '',\n\t\tshouldFocusBlock = true,\n\t\tprioritizePatterns,\n\t},\n\tref\n) {\n\tconst [ filterValue, setFilterValue, delayedFilterValue ] =\n\t\tuseDebouncedInput( __experimentalFilterValue );\n\tconst [ hoveredItem, setHoveredItem ] = useState( null );\n\tconst [ selectedPatternCategory, setSelectedPatternCategory ] =\n\t\tuseState( null );\n\tconst [ selectedMediaCategory, setSelectedMediaCategory ] =\n\t\tuseState( null );\n\tconst [ selectedTab, setSelectedTab ] = useState( null );\n\n\tconst [ destinationRootClientId, onInsertBlocks, onToggleInsertionPoint ] =\n\t\tuseInsertionPoint( {\n\t\t\trootClientId,\n\t\t\tclientId,\n\t\t\tisAppender,\n\t\t\tinsertionIndex: __experimentalInsertionIndex,\n\t\t\tshouldFocusBlock,\n\t\t} );\n\tconst { showPatterns, inserterItems } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { __experimentalGetAllowedPatterns, getInserterItems } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\treturn {\n\t\t\t\tshowPatterns: !! __experimentalGetAllowedPatterns(\n\t\t\t\t\tdestinationRootClientId\n\t\t\t\t).length,\n\t\t\t\tinserterItems: getInserterItems( destinationRootClientId ),\n\t\t\t};\n\t\t},\n\t\t[ destinationRootClientId ]\n\t);\n\tconst hasReusableBlocks = useMemo( () => {\n\t\treturn inserterItems.some(\n\t\t\t( { category } ) => category === 'reusable'\n\t\t);\n\t}, [ inserterItems ] );\n\n\tconst mediaCategories = useMediaCategories( destinationRootClientId );\n\tconst showMedia = !! mediaCategories.length;\n\n\tconst onInsert = useCallback(\n\t\t( blocks, meta, shouldForceFocusBlock ) => {\n\t\t\tonInsertBlocks( blocks, meta, shouldForceFocusBlock );\n\t\t\tonSelect();\n\t\t},\n\t\t[ onInsertBlocks, onSelect ]\n\t);\n\n\tconst onInsertPattern = useCallback(\n\t\t( blocks, patternName ) => {\n\t\t\tonInsertBlocks( blocks, { patternName } );\n\t\t\tonSelect();\n\t\t},\n\t\t[ onInsertBlocks, onSelect ]\n\t);\n\n\tconst onHover = useCallback(\n\t\t( item ) => {\n\t\t\tonToggleInsertionPoint( !! item );\n\t\t\tsetHoveredItem( item );\n\t\t},\n\t\t[ onToggleInsertionPoint, setHoveredItem ]\n\t);\n\n\tconst onHoverPattern = useCallback(\n\t\t( item ) => {\n\t\t\tonToggleInsertionPoint( !! item );\n\t\t},\n\t\t[ onToggleInsertionPoint ]\n\t);\n\n\tconst onClickPatternCategory = useCallback(\n\t\t( patternCategory ) => {\n\t\t\tsetSelectedPatternCategory( patternCategory );\n\t\t},\n\t\t[ setSelectedPatternCategory ]\n\t);\n\n\tconst blocksTab = useMemo(\n\t\t() => (\n\t\t\t<>\n\t\t\t\t<div className=\"block-editor-inserter__block-list\">\n\t\t\t\t\t<BlockTypesTab\n\t\t\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{ showInserterHelpPanel && (\n\t\t\t\t\t<div className=\"block-editor-inserter__tips\">\n\t\t\t\t\t\t<VisuallyHidden as=\"h2\">\n\t\t\t\t\t\t\t{ __( 'A tip for using the block editor' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t<Tips />\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</>\n\t\t),\n\t\t[\n\t\t\tdestinationRootClientId,\n\t\t\tonInsert,\n\t\t\tonHover,\n\t\t\tshowMostUsedBlocks,\n\t\t\tshowInserterHelpPanel,\n\t\t]\n\t);\n\n\tconst patternsTab = useMemo(\n\t\t() => (\n\t\t\t<BlockPatternsTabs\n\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\tonInsert={ onInsertPattern }\n\t\t\t\tonSelectCategory={ onClickPatternCategory }\n\t\t\t\tselectedCategory={ selectedPatternCategory }\n\t\t\t/>\n\t\t),\n\t\t[\n\t\t\tdestinationRootClientId,\n\t\t\tonInsertPattern,\n\t\t\tonClickPatternCategory,\n\t\t\tselectedPatternCategory,\n\t\t]\n\t);\n\n\tconst reusableBlocksTab = useMemo(\n\t\t() => (\n\t\t\t<ReusableBlocksTab\n\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t\tonHover={ onHover }\n\t\t\t/>\n\t\t),\n\t\t[ destinationRootClientId, onInsert, onHover ]\n\t);\n\n\tconst mediaTab = useMemo(\n\t\t() => (\n\t\t\t<MediaTab\n\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\tselectedCategory={ selectedMediaCategory }\n\t\t\t\tonSelectCategory={ setSelectedMediaCategory }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t/>\n\t\t),\n\t\t[\n\t\t\tdestinationRootClientId,\n\t\t\tonInsert,\n\t\t\tselectedMediaCategory,\n\t\t\tsetSelectedMediaCategory,\n\t\t]\n\t);\n\n\tconst getCurrentTab = useCallback(\n\t\t( tab ) => {\n\t\t\tif ( tab.name === 'blocks' ) {\n\t\t\t\treturn blocksTab;\n\t\t\t} else if ( tab.name === 'patterns' ) {\n\t\t\t\treturn patternsTab;\n\t\t\t} else if ( tab.name === 'reusable' ) {\n\t\t\t\treturn reusableBlocksTab;\n\t\t\t} else if ( tab.name === 'media' ) {\n\t\t\t\treturn mediaTab;\n\t\t\t}\n\t\t},\n\t\t[ blocksTab, patternsTab, reusableBlocksTab, mediaTab ]\n\t);\n\n\tconst searchRef = useRef();\n\tuseImperativeHandle( ref, () => ( {\n\t\tfocusSearch: () => {\n\t\t\tsearchRef.current.focus();\n\t\t},\n\t} ) );\n\n\tconst showPatternPanel =\n\t\tselectedTab === 'patterns' &&\n\t\t! delayedFilterValue &&\n\t\tselectedPatternCategory;\n\tconst showAsTabs =\n\t\t! delayedFilterValue &&\n\t\t( showPatterns || hasReusableBlocks || showMedia );\n\tconst showMediaPanel =\n\t\tselectedTab === 'media' &&\n\t\t! delayedFilterValue &&\n\t\tselectedMediaCategory;\n\treturn (\n\t\t<div className=\"block-editor-inserter__menu\">\n\t\t\t<div\n\t\t\t\tclassName={ classnames( 'block-editor-inserter__main-area', {\n\t\t\t\t\t'show-as-tabs': showAsTabs,\n\t\t\t\t} ) }\n\t\t\t>\n\t\t\t\t<SearchControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tclassName=\"block-editor-inserter__search\"\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tif ( hoveredItem ) setHoveredItem( null );\n\t\t\t\t\t\tsetFilterValue( value );\n\t\t\t\t\t} }\n\t\t\t\t\tvalue={ filterValue }\n\t\t\t\t\tlabel={ __( 'Search for blocks and patterns' ) }\n\t\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t\t\tref={ searchRef }\n\t\t\t\t/>\n\t\t\t\t{ !! delayedFilterValue && (\n\t\t\t\t\t<div className=\"block-editor-inserter__no-tab-container\">\n\t\t\t\t\t\t<InserterSearchResults\n\t\t\t\t\t\t\tfilterValue={ delayedFilterValue }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\tisAppender={ isAppender }\n\t\t\t\t\t\t\t__experimentalInsertionIndex={\n\t\t\t\t\t\t\t\t__experimentalInsertionIndex\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshowBlockDirectory\n\t\t\t\t\t\t\tshouldFocusBlock={ shouldFocusBlock }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ showAsTabs && (\n\t\t\t\t\t<InserterTabs\n\t\t\t\t\t\tshowPatterns={ showPatterns }\n\t\t\t\t\t\tshowReusableBlocks={ hasReusableBlocks }\n\t\t\t\t\t\tshowMedia={ showMedia }\n\t\t\t\t\t\tprioritizePatterns={ prioritizePatterns }\n\t\t\t\t\t\tonSelect={ setSelectedTab }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ getCurrentTab }\n\t\t\t\t\t</InserterTabs>\n\t\t\t\t) }\n\t\t\t\t{ ! delayedFilterValue && ! showAsTabs && (\n\t\t\t\t\t<div className=\"block-editor-inserter__no-tab-container\">\n\t\t\t\t\t\t{ blocksTab }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t\t{ showMediaPanel && (\n\t\t\t\t<MediaCategoryDialog\n\t\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\tcategory={ selectedMediaCategory }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ showInserterHelpPanel && hoveredItem && (\n\t\t\t\t<InserterPreviewPanel item={ hoveredItem } />\n\t\t\t) }\n\t\t\t{ showPatternPanel && (\n\t\t\t\t<BlockPatternsCategoryDialog\n\t\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\t\tonInsert={ onInsertPattern }\n\t\t\t\t\tonHover={ onHoverPattern }\n\t\t\t\t\tcategory={ selectedPatternCategory }\n\t\t\t\t\tshowTitlesAsTooltip\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default forwardRef( InserterMenu );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button, SearchControl } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport InserterSearchResults from './search-results';\nimport useInsertionPoint from './hooks/use-insertion-point';\nimport usePatternsState from './hooks/use-patterns-state';\nimport useBlockTypesState from './hooks/use-block-types-state';\nimport { store as blockEditorStore } from '../../store';\n\nconst SEARCH_THRESHOLD = 6;\nconst SHOWN_BLOCK_TYPES = 6;\nconst SHOWN_BLOCK_PATTERNS = 2;\nconst SHOWN_BLOCK_PATTERNS_WITH_PRIORITIZATION = 4;\n\nexport default function QuickInserter( {\n\tonSelect,\n\trootClientId,\n\tclientId,\n\tisAppender,\n\tprioritizePatterns,\n\tselectBlockOnInsert,\n} ) {\n\tconst [ filterValue, setFilterValue ] = useState( '' );\n\tconst [ destinationRootClientId, onInsertBlocks ] = useInsertionPoint( {\n\t\tonSelect,\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\tselectBlockOnInsert,\n\t} );\n\tconst [ blockTypes ] = useBlockTypesState(\n\t\tdestinationRootClientId,\n\t\tonInsertBlocks\n\t);\n\n\tconst [ patterns ] = usePatternsState(\n\t\tonInsertBlocks,\n\t\tdestinationRootClientId\n\t);\n\n\tconst { setInserterIsOpened, insertionIndex } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getSettings, getBlockIndex, getBlockCount } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst settings = getSettings();\n\t\t\tconst index = getBlockIndex( clientId );\n\t\t\tconst blockCount = getBlockCount();\n\n\t\t\treturn {\n\t\t\t\tsetInserterIsOpened: settings.__experimentalSetIsInserterOpened,\n\t\t\t\tinsertionIndex: index === -1 ? blockCount : index,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst showPatterns =\n\t\tpatterns.length && ( !! filterValue || prioritizePatterns );\n\tconst showSearch =\n\t\t( showPatterns && patterns.length > SEARCH_THRESHOLD ) ||\n\t\tblockTypes.length > SEARCH_THRESHOLD;\n\n\tuseEffect( () => {\n\t\tif ( setInserterIsOpened ) {\n\t\t\tsetInserterIsOpened( false );\n\t\t}\n\t}, [ setInserterIsOpened ] );\n\n\t// When clicking Browse All select the appropriate block so as\n\t// the insertion point can work as expected.\n\tconst onBrowseAll = () => {\n\t\tsetInserterIsOpened( { rootClientId, insertionIndex, filterValue } );\n\t};\n\n\tlet maxBlockPatterns = 0;\n\tif ( showPatterns ) {\n\t\tmaxBlockPatterns = prioritizePatterns\n\t\t\t? SHOWN_BLOCK_PATTERNS_WITH_PRIORITIZATION\n\t\t\t: SHOWN_BLOCK_PATTERNS;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={ classnames( 'block-editor-inserter__quick-inserter', {\n\t\t\t\t'has-search': showSearch,\n\t\t\t\t'has-expand': setInserterIsOpened,\n\t\t\t} ) }\n\t\t>\n\t\t\t{ showSearch && (\n\t\t\t\t<SearchControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tclassName=\"block-editor-inserter__search\"\n\t\t\t\t\tvalue={ filterValue }\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tsetFilterValue( value );\n\t\t\t\t\t} }\n\t\t\t\t\tlabel={ __( 'Search for blocks and patterns' ) }\n\t\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t\t/>\n\t\t\t) }\n\n\t\t\t<div className=\"block-editor-inserter__quick-inserter-results\">\n\t\t\t\t<InserterSearchResults\n\t\t\t\t\tfilterValue={ filterValue }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tisAppender={ isAppender }\n\t\t\t\t\tmaxBlockPatterns={ maxBlockPatterns }\n\t\t\t\t\tmaxBlockTypes={ SHOWN_BLOCK_TYPES }\n\t\t\t\t\tisDraggable={ false }\n\t\t\t\t\tprioritizePatterns={ prioritizePatterns }\n\t\t\t\t\tselectBlockOnInsert={ selectBlockOnInsert }\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{ setInserterIsOpened && (\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"block-editor-inserter__quick-inserter-expand\"\n\t\t\t\t\tonClick={ onBrowseAll }\n\t\t\t\t\taria-label={ __(\n\t\t\t\t\t\t'Browse all. This will open the main inserter panel in the editor toolbar.'\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Browse all' ) }\n\t\t\t\t</Button>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { speak } from '@wordpress/a11y';\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport { Dropdown, Button } from '@wordpress/components';\nimport { forwardRef, Component } from '@wordpress/element';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose, ifCondition } from '@wordpress/compose';\nimport { createBlock, store as blocksStore } from '@wordpress/blocks';\nimport { plus } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport InserterMenu from './menu';\nimport QuickInserter from './quick-inserter';\nimport { store as blockEditorStore } from '../../store';\n\nconst defaultRenderToggle = ( {\n\tonToggle,\n\tdisabled,\n\tisOpen,\n\tblockTitle,\n\thasSingleBlockType,\n\ttoggleProps = {},\n\tprioritizePatterns,\n} ) => {\n\tconst {\n\t\tas: Wrapper = Button,\n\t\tlabel: labelProp,\n\t\tonClick,\n\t\t...rest\n\t} = toggleProps;\n\n\tlet label = labelProp;\n\tif ( ! label && hasSingleBlockType ) {\n\t\tlabel = sprintf(\n\t\t\t// translators: %s: the name of the block when there is only one\n\t\t\t_x( 'Add %s', 'directly add the only allowed block' ),\n\t\t\tblockTitle\n\t\t);\n\t} else if ( ! label && prioritizePatterns ) {\n\t\tlabel = __( 'Add pattern' );\n\t} else if ( ! label ) {\n\t\tlabel = _x( 'Add block', 'Generic label for block inserter button' );\n\t}\n\n\t// Handle both onClick functions from the toggle and the parent component.\n\tfunction handleClick( event ) {\n\t\tif ( onToggle ) {\n\t\t\tonToggle( event );\n\t\t}\n\t\tif ( onClick ) {\n\t\t\tonClick( event );\n\t\t}\n\t}\n\n\treturn (\n\t\t<Wrapper\n\t\t\ticon={ plus }\n\t\t\tlabel={ label }\n\t\t\ttooltipPosition=\"bottom\"\n\t\t\tonClick={ handleClick }\n\t\t\tclassName=\"block-editor-inserter__toggle\"\n\t\t\taria-haspopup={ ! hasSingleBlockType ? 'true' : false }\n\t\t\taria-expanded={ ! hasSingleBlockType ? isOpen : false }\n\t\t\tdisabled={ disabled }\n\t\t\t{ ...rest }\n\t\t/>\n\t);\n};\n\nclass PrivateInserter extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onToggle = this.onToggle.bind( this );\n\t\tthis.renderToggle = this.renderToggle.bind( this );\n\t\tthis.renderContent = this.renderContent.bind( this );\n\t}\n\n\tonToggle( isOpen ) {\n\t\tconst { onToggle } = this.props;\n\n\t\t// Surface toggle callback to parent component.\n\t\tif ( onToggle ) {\n\t\t\tonToggle( isOpen );\n\t\t}\n\t}\n\n\t/**\n\t * Render callback to display Dropdown toggle element.\n\t *\n\t * @param {Object}   options\n\t * @param {Function} options.onToggle Callback to invoke when toggle is\n\t *                                    pressed.\n\t * @param {boolean}  options.isOpen   Whether dropdown is currently open.\n\t *\n\t * @return {WPElement} Dropdown toggle element.\n\t */\n\trenderToggle( { onToggle, isOpen } ) {\n\t\tconst {\n\t\t\tdisabled,\n\t\t\tblockTitle,\n\t\t\thasSingleBlockType,\n\t\t\tdirectInsertBlock,\n\t\t\ttoggleProps,\n\t\t\thasItems,\n\t\t\trenderToggle = defaultRenderToggle,\n\t\t\tprioritizePatterns,\n\t\t} = this.props;\n\n\t\treturn renderToggle( {\n\t\t\tonToggle,\n\t\t\tisOpen,\n\t\t\tdisabled: disabled || ! hasItems,\n\t\t\tblockTitle,\n\t\t\thasSingleBlockType,\n\t\t\tdirectInsertBlock,\n\t\t\ttoggleProps,\n\t\t\tprioritizePatterns,\n\t\t} );\n\t}\n\n\t/**\n\t * Render callback to display Dropdown content element.\n\t *\n\t * @param {Object}   options\n\t * @param {Function} options.onClose Callback to invoke when dropdown is\n\t *                                   closed.\n\t *\n\t * @return {WPElement} Dropdown content element.\n\t */\n\trenderContent( { onClose } ) {\n\t\tconst {\n\t\t\trootClientId,\n\t\t\tclientId,\n\t\t\tisAppender,\n\t\t\tshowInserterHelpPanel,\n\n\t\t\t// This prop is experimental to give some time for the quick inserter to mature\n\t\t\t// Feel free to make them stable after a few releases.\n\t\t\t__experimentalIsQuick: isQuick,\n\t\t\tprioritizePatterns,\n\t\t\tonSelectOrClose,\n\t\t\tselectBlockOnInsert,\n\t\t} = this.props;\n\n\t\tif ( isQuick ) {\n\t\t\treturn (\n\t\t\t\t<QuickInserter\n\t\t\t\t\tonSelect={ ( blocks ) => {\n\t\t\t\t\t\tconst firstBlock =\n\t\t\t\t\t\t\tArray.isArray( blocks ) && blocks?.length\n\t\t\t\t\t\t\t\t? blocks[ 0 ]\n\t\t\t\t\t\t\t\t: blocks;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tonSelectOrClose &&\n\t\t\t\t\t\t\ttypeof onSelectOrClose === 'function'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tonSelectOrClose( firstBlock );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tisAppender={ isAppender }\n\t\t\t\t\tprioritizePatterns={ prioritizePatterns }\n\t\t\t\t\tselectBlockOnInsert={ selectBlockOnInsert }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<InserterMenu\n\t\t\t\tonSelect={ () => {\n\t\t\t\t\tonClose();\n\t\t\t\t} }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tclientId={ clientId }\n\t\t\t\tisAppender={ isAppender }\n\t\t\t\tshowInserterHelpPanel={ showInserterHelpPanel }\n\t\t\t\tprioritizePatterns={ prioritizePatterns }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tposition,\n\t\t\thasSingleBlockType,\n\t\t\tdirectInsertBlock,\n\t\t\tinsertOnlyAllowedBlock,\n\t\t\t__experimentalIsQuick: isQuick,\n\t\t\tonSelectOrClose,\n\t\t} = this.props;\n\n\t\tif ( hasSingleBlockType || directInsertBlock ) {\n\t\t\treturn this.renderToggle( { onToggle: insertOnlyAllowedBlock } );\n\t\t}\n\n\t\treturn (\n\t\t\t<Dropdown\n\t\t\t\tclassName=\"block-editor-inserter\"\n\t\t\t\tcontentClassName={ classnames(\n\t\t\t\t\t'block-editor-inserter__popover',\n\t\t\t\t\t{ 'is-quick': isQuick }\n\t\t\t\t) }\n\t\t\t\tpopoverProps={ { position, shift: true } }\n\t\t\t\tonToggle={ this.onToggle }\n\t\t\t\texpandOnMobile\n\t\t\t\theaderTitle={ __( 'Add a block' ) }\n\t\t\t\trenderToggle={ this.renderToggle }\n\t\t\t\trenderContent={ this.renderContent }\n\t\t\t\tonClose={ onSelectOrClose }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport const ComposedPrivateInserter = compose( [\n\twithSelect(\n\t\t( select, { clientId, rootClientId, shouldDirectInsert = true } ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\thasInserterItems,\n\t\t\t\tgetAllowedBlocks,\n\t\t\t\t__experimentalGetDirectInsertBlock,\n\t\t\t\tgetSettings,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst { getBlockVariations } = select( blocksStore );\n\n\t\t\trootClientId =\n\t\t\t\trootClientId || getBlockRootClientId( clientId ) || undefined;\n\n\t\t\tconst allowedBlocks = getAllowedBlocks( rootClientId );\n\n\t\t\tconst directInsertBlock =\n\t\t\t\tshouldDirectInsert &&\n\t\t\t\t__experimentalGetDirectInsertBlock( rootClientId );\n\n\t\t\tconst settings = getSettings();\n\n\t\t\tconst hasSingleBlockType =\n\t\t\t\tallowedBlocks?.length === 1 &&\n\t\t\t\tgetBlockVariations( allowedBlocks[ 0 ].name, 'inserter' )\n\t\t\t\t\t?.length === 0;\n\n\t\t\tlet allowedBlockType = false;\n\t\t\tif ( hasSingleBlockType ) {\n\t\t\t\tallowedBlockType = allowedBlocks[ 0 ];\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\thasItems: hasInserterItems( rootClientId ),\n\t\t\t\thasSingleBlockType,\n\t\t\t\tblockTitle: allowedBlockType ? allowedBlockType.title : '',\n\t\t\t\tallowedBlockType,\n\t\t\t\tdirectInsertBlock,\n\t\t\t\trootClientId,\n\t\t\t\tprioritizePatterns:\n\t\t\t\t\tsettings.__experimentalPreferPatternsOnRoot &&\n\t\t\t\t\t! rootClientId,\n\t\t\t};\n\t\t}\n\t),\n\twithDispatch( ( dispatch, ownProps, { select } ) => {\n\t\treturn {\n\t\t\tinsertOnlyAllowedBlock() {\n\t\t\t\tconst {\n\t\t\t\t\trootClientId,\n\t\t\t\t\tclientId,\n\t\t\t\t\tisAppender,\n\t\t\t\t\thasSingleBlockType,\n\t\t\t\t\tallowedBlockType,\n\t\t\t\t\tdirectInsertBlock,\n\t\t\t\t\tonSelectOrClose,\n\t\t\t\t\tselectBlockOnInsert,\n\t\t\t\t} = ownProps;\n\n\t\t\t\tif ( ! hasSingleBlockType && ! directInsertBlock ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfunction getAdjacentBlockAttributes( attributesToCopy ) {\n\t\t\t\t\tconst { getBlock, getPreviousBlockClientId } =\n\t\t\t\t\t\tselect( blockEditorStore );\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t! attributesToCopy ||\n\t\t\t\t\t\t( ! clientId && ! rootClientId )\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn {};\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = {};\n\t\t\t\t\tlet adjacentAttributes = {};\n\n\t\t\t\t\t// If there is no clientId, then attempt to get attributes\n\t\t\t\t\t// from the last block within innerBlocks of the root block.\n\t\t\t\t\tif ( ! clientId ) {\n\t\t\t\t\t\tconst parentBlock = getBlock( rootClientId );\n\n\t\t\t\t\t\tif ( parentBlock?.innerBlocks?.length ) {\n\t\t\t\t\t\t\tconst lastInnerBlock =\n\t\t\t\t\t\t\t\tparentBlock.innerBlocks[\n\t\t\t\t\t\t\t\t\tparentBlock.innerBlocks.length - 1\n\t\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tdirectInsertBlock &&\n\t\t\t\t\t\t\t\tdirectInsertBlock?.name === lastInnerBlock.name\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tadjacentAttributes = lastInnerBlock.attributes;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Otherwise, attempt to get attributes from the\n\t\t\t\t\t\t// previous block relative to the current clientId.\n\t\t\t\t\t\tconst currentBlock = getBlock( clientId );\n\t\t\t\t\t\tconst previousBlock = getBlock(\n\t\t\t\t\t\t\tgetPreviousBlockClientId( clientId )\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif ( currentBlock?.name === previousBlock?.name ) {\n\t\t\t\t\t\t\tadjacentAttributes =\n\t\t\t\t\t\t\t\tpreviousBlock?.attributes || {};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Copy over only those attributes flagged to be copied.\n\t\t\t\t\tattributesToCopy.forEach( ( attribute ) => {\n\t\t\t\t\t\tif ( adjacentAttributes.hasOwnProperty( attribute ) ) {\n\t\t\t\t\t\t\tresult[ attribute ] =\n\t\t\t\t\t\t\t\tadjacentAttributes[ attribute ];\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tfunction getInsertionIndex() {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tgetBlockIndex,\n\t\t\t\t\t\tgetBlockSelectionEnd,\n\t\t\t\t\t\tgetBlockOrder,\n\t\t\t\t\t\tgetBlockRootClientId,\n\t\t\t\t\t} = select( blockEditorStore );\n\n\t\t\t\t\t// If the clientId is defined, we insert at the position of the block.\n\t\t\t\t\tif ( clientId ) {\n\t\t\t\t\t\treturn getBlockIndex( clientId );\n\t\t\t\t\t}\n\n\t\t\t\t\t// If there a selected block, we insert after the selected block.\n\t\t\t\t\tconst end = getBlockSelectionEnd();\n\t\t\t\t\tif (\n\t\t\t\t\t\t! isAppender &&\n\t\t\t\t\t\tend &&\n\t\t\t\t\t\tgetBlockRootClientId( end ) === rootClientId\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn getBlockIndex( end ) + 1;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Otherwise, we insert at the end of the current rootClientId.\n\t\t\t\t\treturn getBlockOrder( rootClientId ).length;\n\t\t\t\t}\n\n\t\t\t\tconst { insertBlock } = dispatch( blockEditorStore );\n\n\t\t\t\tlet blockToInsert;\n\n\t\t\t\t// Attempt to augment the directInsertBlock with attributes from an adjacent block.\n\t\t\t\t// This ensures styling from nearby blocks is preserved in the newly inserted block.\n\t\t\t\t// See: https://github.com/WordPress/gutenberg/issues/37904\n\t\t\t\tif ( directInsertBlock ) {\n\t\t\t\t\tconst newAttributes = getAdjacentBlockAttributes(\n\t\t\t\t\t\tdirectInsertBlock.attributesToCopy\n\t\t\t\t\t);\n\n\t\t\t\t\tblockToInsert = createBlock( directInsertBlock.name, {\n\t\t\t\t\t\t...( directInsertBlock.attributes || {} ),\n\t\t\t\t\t\t...newAttributes,\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tblockToInsert = createBlock( allowedBlockType.name );\n\t\t\t\t}\n\n\t\t\t\tinsertBlock(\n\t\t\t\t\tblockToInsert,\n\t\t\t\t\tgetInsertionIndex(),\n\t\t\t\t\trootClientId,\n\t\t\t\t\tselectBlockOnInsert\n\t\t\t\t);\n\n\t\t\t\tif ( onSelectOrClose ) {\n\t\t\t\t\tonSelectOrClose( {\n\t\t\t\t\t\tclientId: blockToInsert?.clientId,\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tconst message = sprintf(\n\t\t\t\t\t// translators: %s: the name of the block that has been added\n\t\t\t\t\t__( '%s block added' ),\n\t\t\t\t\tallowedBlockType.title\n\t\t\t\t);\n\t\t\t\tspeak( message );\n\t\t\t},\n\t\t};\n\t} ),\n\t// The global inserter should always be visible, we are using ( ! isAppender && ! rootClientId && ! clientId ) as\n\t// a way to detect the global Inserter.\n\tifCondition(\n\t\t( { hasItems, isAppender, rootClientId, clientId } ) =>\n\t\t\thasItems || ( ! isAppender && ! rootClientId && ! clientId )\n\t),\n] )( PrivateInserter );\n\nconst Inserter = forwardRef( ( props, ref ) => {\n\treturn <ComposedPrivateInserter ref={ ref } { ...props } />;\n} );\n\nexport default Inserter;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { compose } from '@wordpress/compose';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { ENTER, SPACE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport Inserter from '../inserter';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Zero width non-breaking space, used as padding for the paragraph when it is\n * empty.\n */\nexport const ZWNBSP = '\\ufeff';\n\nexport function DefaultBlockAppender( {\n\tisLocked,\n\tonAppend,\n\tshowPrompt,\n\tplaceholder,\n\trootClientId,\n} ) {\n\tif ( isLocked ) {\n\t\treturn null;\n\t}\n\n\tconst value =\n\t\tdecodeEntities( placeholder ) || __( 'Type / to choose a block' );\n\n\treturn (\n\t\t<div\n\t\t\tdata-root-client-id={ rootClientId || '' }\n\t\t\tclassName={ classnames( 'block-editor-default-block-appender', {\n\t\t\t\t'has-visible-prompt': showPrompt,\n\t\t\t} ) }\n\t\t>\n\t\t\t<p\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\t// We want this element to be styled as a paragraph by themes.\n\t\t\t\t// eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n\t\t\t\trole=\"button\"\n\t\t\t\taria-label={ __( 'Add default block' ) }\n\t\t\t\t// A wrapping container for this one already has the wp-block className.\n\t\t\t\tclassName=\"block-editor-default-block-appender__content\"\n\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\tif ( ENTER === event.keyCode || SPACE === event.keyCode ) {\n\t\t\t\t\t\tonAppend();\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t\tonClick={ () => onAppend() }\n\t\t\t\tonFocus={ () => {\n\t\t\t\t\tif ( showPrompt ) {\n\t\t\t\t\t\tonAppend();\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ showPrompt ? value : ZWNBSP }\n\t\t\t</p>\n\t\t\t<Inserter\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tposition=\"bottom right\"\n\t\t\t\tisAppender\n\t\t\t\t__experimentalIsQuick\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select, ownProps ) => {\n\t\tconst { getBlockCount, getSettings, getTemplateLock } =\n\t\t\tselect( blockEditorStore );\n\n\t\tconst isEmpty = ! getBlockCount( ownProps.rootClientId );\n\t\tconst { bodyPlaceholder } = getSettings();\n\n\t\treturn {\n\t\t\tshowPrompt: isEmpty,\n\t\t\tisLocked: !! getTemplateLock( ownProps.rootClientId ),\n\t\t\tplaceholder: bodyPlaceholder,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps ) => {\n\t\tconst { insertDefaultBlock, startTyping } =\n\t\t\tdispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\tonAppend() {\n\t\t\t\tconst { rootClientId } = ownProps;\n\n\t\t\t\tinsertDefaultBlock( undefined, rootClientId );\n\t\t\t\tstartTyping();\n\t\t\t},\n\t\t};\n\t} )\n)( DefaultBlockAppender );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Button, Tooltip, VisuallyHidden } from '@wordpress/components';\nimport { forwardRef } from '@wordpress/element';\nimport { _x, sprintf } from '@wordpress/i18n';\nimport { Icon, plus } from '@wordpress/icons';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport Inserter from '../inserter';\n\nfunction ButtonBlockAppender(\n\t{ rootClientId, className, onFocus, tabIndex },\n\tref\n) {\n\treturn (\n\t\t<Inserter\n\t\t\tposition=\"bottom center\"\n\t\t\trootClientId={ rootClientId }\n\t\t\t__experimentalIsQuick\n\t\t\trenderToggle={ ( {\n\t\t\t\tonToggle,\n\t\t\t\tdisabled,\n\t\t\t\tisOpen,\n\t\t\t\tblockTitle,\n\t\t\t\thasSingleBlockType,\n\t\t\t} ) => {\n\t\t\t\tlet label;\n\t\t\t\tif ( hasSingleBlockType ) {\n\t\t\t\t\tlabel = sprintf(\n\t\t\t\t\t\t// translators: %s: the name of the block when there is only one\n\t\t\t\t\t\t_x( 'Add %s', 'directly add the only allowed block' ),\n\t\t\t\t\t\tblockTitle\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tlabel = _x(\n\t\t\t\t\t\t'Add block',\n\t\t\t\t\t\t'Generic label for block inserter button'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tconst isToggleButton = ! hasSingleBlockType;\n\n\t\t\t\tlet inserterButton = (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t'block-editor-button-block-appender'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\taria-haspopup={ isToggleButton ? 'true' : undefined }\n\t\t\t\t\t\taria-expanded={ isToggleButton ? isOpen : undefined }\n\t\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ! hasSingleBlockType && (\n\t\t\t\t\t\t\t<VisuallyHidden as=\"span\">{ label }</VisuallyHidden>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<Icon icon={ plus } />\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\n\t\t\t\tif ( isToggleButton || hasSingleBlockType ) {\n\t\t\t\t\tinserterButton = (\n\t\t\t\t\t\t<Tooltip text={ label }>{ inserterButton }</Tooltip>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn inserterButton;\n\t\t\t} }\n\t\t\tisAppender\n\t\t/>\n\t);\n}\n\n/**\n * Use `ButtonBlockAppender` instead.\n *\n * @deprecated\n */\nexport const ButtonBlockerAppender = forwardRef( ( props, ref ) => {\n\tdeprecated( `wp.blockEditor.ButtonBlockerAppender`, {\n\t\talternative: 'wp.blockEditor.ButtonBlockAppender',\n\t\tsince: '5.9',\n\t} );\n\n\treturn ButtonBlockAppender( props, ref );\n} );\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/button-block-appender/README.md\n */\nexport default forwardRef( ButtonBlockAppender );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { getDefaultBlockName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport DefaultBlockAppender from '../default-block-appender';\nimport ButtonBlockAppender from '../button-block-appender';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nfunction DefaultAppender( { rootClientId } ) {\n\tconst canInsertDefaultBlock = useSelect( ( select ) =>\n\t\tselect( blockEditorStore ).canInsertBlockType(\n\t\t\tgetDefaultBlockName(),\n\t\t\trootClientId\n\t\t)\n\t);\n\n\tif ( canInsertDefaultBlock ) {\n\t\t// Render the default block appender if the context supports use\n\t\t// of the default appender.\n\t\treturn <DefaultBlockAppender rootClientId={ rootClientId } />;\n\t}\n\n\t// Fallback in case the default block can't be inserted.\n\treturn (\n\t\t<ButtonBlockAppender\n\t\t\trootClientId={ rootClientId }\n\t\t\tclassName=\"block-list-appender__toggle\"\n\t\t/>\n\t);\n}\n\nfunction useAppender( rootClientId, CustomAppender ) {\n\tconst { hideInserter, isParentSelected } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\n\t\t\treturn {\n\t\t\t\thideInserter:\n\t\t\t\t\t!! getTemplateLock( rootClientId ) ||\n\t\t\t\t\tgetBlockEditingMode( rootClientId ) === 'disabled' ||\n\t\t\t\t\t__unstableGetEditorMode() === 'zoom-out',\n\t\t\t\tisParentSelected:\n\t\t\t\t\trootClientId === selectedBlockClientId ||\n\t\t\t\t\t( ! rootClientId && ! selectedBlockClientId ),\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\n\tif ( hideInserter || CustomAppender === false ) {\n\t\treturn null;\n\t}\n\n\tif ( CustomAppender ) {\n\t\t// Prefer custom render prop if provided.\n\t\treturn <CustomAppender />;\n\t}\n\n\tif ( ! isParentSelected ) {\n\t\treturn null;\n\t}\n\n\treturn <DefaultAppender rootClientId={ rootClientId } />;\n}\n\nfunction BlockListAppender( {\n\trootClientId,\n\trenderAppender,\n\tclassName,\n\ttagName: TagName = 'div',\n} ) {\n\tconst appender = useAppender( rootClientId, renderAppender );\n\tconst isDragOver = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockInsertionPoint,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetBlockCount,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\t\t// Ideally we should also check for `isDragging` but currently it\n\t\t\t// requires a lot more setup. We can revisit this once we refactor\n\t\t\t// the DnD utility hooks.\n\t\t\treturn (\n\t\t\t\tisBlockInsertionPointVisible() &&\n\t\t\t\trootClientId === insertionPoint?.rootClientId &&\n\t\t\t\tgetBlockCount( rootClientId ) === 0\n\t\t\t);\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\n\tif ( ! appender ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<TagName\n\t\t\t// A `tabIndex` is used on the wrapping `div` element in order to\n\t\t\t// force a focus event to occur when an appender `button` element\n\t\t\t// is clicked. In some browsers (Firefox, Safari), button clicks do\n\t\t\t// not emit a focus event, which could cause this event to propagate\n\t\t\t// unexpectedly. The `tabIndex` ensures that the interaction is\n\t\t\t// captured as a focus, without also adding an extra tab stop.\n\t\t\t//\n\t\t\t// See: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\n\t\t\ttabIndex={ -1 }\n\t\t\tclassName={ classnames( 'block-list-appender wp-block', className, {\n\t\t\t\t'is-drag-over': isDragOver,\n\t\t\t} ) }\n\t\t\t// Needed in case the whole editor is content editable (for multi\n\t\t\t// selection). It fixes an edge case where ArrowDown and ArrowRight\n\t\t\t// should collapse the selection to the end of that selection and\n\t\t\t// not into the appender.\n\t\t\tcontentEditable={ false }\n\t\t\t// The appender exists to let you add the first Paragraph before\n\t\t\t// any is inserted. To that end, this appender should visually be\n\t\t\t// presented as a block. That means theme CSS should style it as if\n\t\t\t// it were an empty paragraph block. That means a `wp-block` class to\n\t\t\t// ensure the width is correct, and a [data-block] attribute to ensure\n\t\t\t// the correct margin is applied, especially for classic themes which\n\t\t\t// have commonly targeted that attribute for margins.\n\t\t\tdata-block\n\t\t>\n\t\t\t{ appender }\n\t\t</TagName>\n\t);\n}\n\nexport default BlockListAppender;\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Allow scrolling \"through\" popovers over the canvas. This is only called for\n * as long as the pointer is over a popover. Do not use React events because it\n * will bubble through portals.\n *\n * @param {Object} scrollableRef\n */\nfunction usePopoverScroll( scrollableRef ) {\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! scrollableRef ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction onWheel( event ) {\n\t\t\t\tconst { deltaX, deltaY } = event;\n\t\t\t\tscrollableRef.current.scrollBy( deltaX, deltaY );\n\t\t\t}\n\t\t\t// Tell the browser that we do not call event.preventDefault\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#improving_scrolling_performance_with_passive_listeners\n\t\t\tconst options = { passive: true };\n\t\t\tnode.addEventListener( 'wheel', onWheel, options );\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'wheel', onWheel, options );\n\t\t\t};\n\t\t},\n\t\t[ scrollableRef ]\n\t);\n}\n\nexport default usePopoverScroll;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tuseMemo,\n\tcreateContext,\n\tuseReducer,\n\tuseLayoutEffect,\n} from '@wordpress/element';\nimport { Popover } from '@wordpress/components';\nimport { isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport usePopoverScroll from './use-popover-scroll';\n\nconst MAX_POPOVER_RECOMPUTE_COUNTER = Number.MAX_SAFE_INTEGER;\n\nexport const InsertionPointOpenRef = createContext();\n\nfunction BlockPopoverInbetween( {\n\tpreviousClientId,\n\tnextClientId,\n\tchildren,\n\t__unstablePopoverSlot,\n\t__unstableContentRef,\n\t...props\n} ) {\n\t// This is a temporary hack to get the inbetween inserter to recompute properly.\n\tconst [ popoverRecomputeCounter, forcePopoverRecompute ] = useReducer(\n\t\t// Module is there to make sure that the counter doesn't overflow.\n\t\t( s ) => ( s + 1 ) % MAX_POPOVER_RECOMPUTE_COUNTER,\n\t\t0\n\t);\n\n\tconst { orientation, rootClientId, isVisible } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockListSettings,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tisBlockVisible,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst _rootClientId = getBlockRootClientId(\n\t\t\t\tpreviousClientId ?? nextClientId\n\t\t\t);\n\t\t\treturn {\n\t\t\t\torientation:\n\t\t\t\t\tgetBlockListSettings( _rootClientId )?.orientation ||\n\t\t\t\t\t'vertical',\n\t\t\t\trootClientId: _rootClientId,\n\t\t\t\tisVisible:\n\t\t\t\t\tisBlockVisible( previousClientId ) &&\n\t\t\t\t\tisBlockVisible( nextClientId ),\n\t\t\t};\n\t\t},\n\t\t[ previousClientId, nextClientId ]\n\t);\n\tconst previousElement = useBlockElement( previousClientId );\n\tconst nextElement = useBlockElement( nextClientId );\n\tconst isVertical = orientation === 'vertical';\n\n\tconst popoverAnchor = useMemo( () => {\n\t\tif (\n\t\t\t// popoverRecomputeCounter is by definition always equal or greater than 0.\n\t\t\t// This check is only there to satisfy the correctness of the\n\t\t\t// exhaustive-deps rule for the `useMemo` hook.\n\t\t\tpopoverRecomputeCounter < 0 ||\n\t\t\t( ! previousElement && ! nextElement ) ||\n\t\t\t! isVisible\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst { ownerDocument } = previousElement || nextElement;\n\n\t\treturn {\n\t\t\townerDocument,\n\t\t\tgetBoundingClientRect() {\n\t\t\t\tconst previousRect = previousElement\n\t\t\t\t\t? previousElement.getBoundingClientRect()\n\t\t\t\t\t: null;\n\t\t\t\tconst nextRect = nextElement\n\t\t\t\t\t? nextElement.getBoundingClientRect()\n\t\t\t\t\t: null;\n\n\t\t\t\tlet left = 0;\n\t\t\t\tlet top = 0;\n\t\t\t\tlet width = 0;\n\t\t\t\tlet height = 0;\n\n\t\t\t\tif ( isVertical ) {\n\t\t\t\t\t// vertical\n\t\t\t\t\ttop = previousRect ? previousRect.bottom : nextRect.top;\n\t\t\t\t\twidth = previousRect ? previousRect.width : nextRect.width;\n\t\t\t\t\theight =\n\t\t\t\t\t\tnextRect && previousRect\n\t\t\t\t\t\t\t? nextRect.top - previousRect.bottom\n\t\t\t\t\t\t\t: 0;\n\t\t\t\t\tleft = previousRect ? previousRect.left : nextRect.left;\n\t\t\t\t} else {\n\t\t\t\t\ttop = previousRect ? previousRect.top : nextRect.top;\n\t\t\t\t\theight = previousRect\n\t\t\t\t\t\t? previousRect.height\n\t\t\t\t\t\t: nextRect.height;\n\n\t\t\t\t\tif ( isRTL() ) {\n\t\t\t\t\t\t// non vertical, rtl\n\t\t\t\t\t\tleft = nextRect ? nextRect.right : previousRect.left;\n\t\t\t\t\t\twidth =\n\t\t\t\t\t\t\tpreviousRect && nextRect\n\t\t\t\t\t\t\t\t? previousRect.left - nextRect.right\n\t\t\t\t\t\t\t\t: 0;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// non vertical, ltr\n\t\t\t\t\t\tleft = previousRect\n\t\t\t\t\t\t\t? previousRect.right\n\t\t\t\t\t\t\t: nextRect.left;\n\t\t\t\t\t\twidth =\n\t\t\t\t\t\t\tpreviousRect && nextRect\n\t\t\t\t\t\t\t\t? nextRect.left - previousRect.right\n\t\t\t\t\t\t\t\t: 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn new window.DOMRect( left, top, width, height );\n\t\t\t},\n\t\t};\n\t}, [\n\t\tpreviousElement,\n\t\tnextElement,\n\t\tpopoverRecomputeCounter,\n\t\tisVertical,\n\t\tisVisible,\n\t] );\n\n\tconst popoverScrollRef = usePopoverScroll( __unstableContentRef );\n\n\t// This is only needed for a smooth transition when moving blocks.\n\t// When blocks are moved up/down, their position can be set by\n\t// updating the `transform` property manually (i.e. without using CSS\n\t// transitions or animations). The animation, which can also scroll the block\n\t// editor, can sometimes cause the position of the Popover to get out of sync.\n\t// A MutationObserver is therefore used to make sure that changes to the\n\t// selectedElement's attribute (i.e. `transform`) can be tracked and used to\n\t// trigger the Popover to rerender.\n\tuseLayoutEffect( () => {\n\t\tif ( ! previousElement ) {\n\t\t\treturn;\n\t\t}\n\t\tconst observer = new window.MutationObserver( forcePopoverRecompute );\n\t\tobserver.observe( previousElement, { attributes: true } );\n\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t}, [ previousElement ] );\n\n\tuseLayoutEffect( () => {\n\t\tif ( ! nextElement ) {\n\t\t\treturn;\n\t\t}\n\t\tconst observer = new window.MutationObserver( forcePopoverRecompute );\n\t\tobserver.observe( nextElement, { attributes: true } );\n\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t}, [ nextElement ] );\n\n\tuseLayoutEffect( () => {\n\t\tif ( ! previousElement ) {\n\t\t\treturn;\n\t\t}\n\t\tpreviousElement.ownerDocument.defaultView.addEventListener(\n\t\t\t'resize',\n\t\t\tforcePopoverRecompute\n\t\t);\n\t\treturn () => {\n\t\t\tpreviousElement.ownerDocument.defaultView?.removeEventListener(\n\t\t\t\t'resize',\n\t\t\t\tforcePopoverRecompute\n\t\t\t);\n\t\t};\n\t}, [ previousElement ] );\n\n\t// If there's either a previous or a next element, show the inbetween popover.\n\t// Note that drag and drop uses the inbetween popover to show the drop indicator\n\t// before the first block and after the last block.\n\tif ( ( ! previousElement && ! nextElement ) || ! isVisible ) {\n\t\treturn null;\n\t}\n\n\t/* eslint-disable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\n\t// While ideally it would be enough to capture the\n\t// bubbling focus event from the Inserter, due to the\n\t// characteristics of click focusing of `button`s in\n\t// Firefox and Safari, it is not reliable.\n\t//\n\t// See: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\n\treturn (\n\t\t<Popover\n\t\t\tref={ popoverScrollRef }\n\t\t\tanimate={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tfocusOnMount={ false }\n\t\t\t// Render in the old slot if needed for backward compatibility,\n\t\t\t// otherwise render in place (not in the default popover slot).\n\t\t\t__unstableSlotName={ __unstablePopoverSlot || null }\n\t\t\t// Forces a remount of the popover when its position changes\n\t\t\t// This makes sure the popover doesn't animate from its previous position.\n\t\t\tkey={ nextClientId + '--' + rootClientId }\n\t\t\t{ ...props }\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-block-popover',\n\t\t\t\t'block-editor-block-popover__inbetween',\n\t\t\t\tprops.className\n\t\t\t) }\n\t\t\tresize={ false }\n\t\t\tflip={ false }\n\t\t\tplacement=\"overlay\"\n\t\t\tvariant=\"unstyled\"\n\t\t>\n\t\t\t<div className=\"block-editor-block-popover__inbetween-container\">\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</Popover>\n\t);\n\t/* eslint-enable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\n}\n\nexport default BlockPopoverInbetween;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMergeRefs } from '@wordpress/compose';\nimport { Popover } from '@wordpress/components';\nimport {\n\tforwardRef,\n\tuseMemo,\n\tuseReducer,\n\tuseLayoutEffect,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport usePopoverScroll from './use-popover-scroll';\n\nconst MAX_POPOVER_RECOMPUTE_COUNTER = Number.MAX_SAFE_INTEGER;\n\nfunction BlockPopover(\n\t{\n\t\tclientId,\n\t\tbottomClientId,\n\t\tchildren,\n\t\t__unstableRefreshSize,\n\t\t__unstableCoverTarget = false,\n\t\t__unstablePopoverSlot,\n\t\t__unstableContentRef,\n\t\tshift = true,\n\t\t...props\n\t},\n\tref\n) {\n\tconst selectedElement = useBlockElement( clientId );\n\tconst lastSelectedElement = useBlockElement( bottomClientId ?? clientId );\n\tconst mergedRefs = useMergeRefs( [\n\t\tref,\n\t\tusePopoverScroll( __unstableContentRef ),\n\t] );\n\n\tconst [\n\t\tpopoverDimensionsRecomputeCounter,\n\t\tforceRecomputePopoverDimensions,\n\t] = useReducer(\n\t\t// Module is there to make sure that the counter doesn't overflow.\n\t\t( s ) => ( s + 1 ) % MAX_POPOVER_RECOMPUTE_COUNTER,\n\t\t0\n\t);\n\n\t// When blocks are moved up/down, they are animated to their new position by\n\t// updating the `transform` property manually (i.e. without using CSS\n\t// transitions or animations). The animation, which can also scroll the block\n\t// editor, can sometimes cause the position of the Popover to get out of sync.\n\t// A MutationObserver is therefore used to make sure that changes to the\n\t// selectedElement's attribute (i.e. `transform`) can be tracked and used to\n\t// trigger the Popover to rerender.\n\tuseLayoutEffect( () => {\n\t\tif ( ! selectedElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst observer = new window.MutationObserver(\n\t\t\tforceRecomputePopoverDimensions\n\t\t);\n\t\tobserver.observe( selectedElement, { attributes: true } );\n\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t}, [ selectedElement ] );\n\n\tconst style = useMemo( () => {\n\t\tif (\n\t\t\t// popoverDimensionsRecomputeCounter is by definition always equal or greater\n\t\t\t// than 0. This check is only there to satisfy the correctness of the\n\t\t\t// exhaustive-deps rule for the `useMemo` hook.\n\t\t\tpopoverDimensionsRecomputeCounter < 0 ||\n\t\t\t! selectedElement ||\n\t\t\tlastSelectedElement !== selectedElement\n\t\t) {\n\t\t\treturn {};\n\t\t}\n\n\t\treturn {\n\t\t\tposition: 'absolute',\n\t\t\twidth: selectedElement.offsetWidth,\n\t\t\theight: selectedElement.offsetHeight,\n\t\t};\n\t}, [\n\t\tselectedElement,\n\t\tlastSelectedElement,\n\t\t__unstableRefreshSize,\n\t\tpopoverDimensionsRecomputeCounter,\n\t] );\n\n\tconst popoverAnchor = useMemo( () => {\n\t\tif (\n\t\t\t// popoverDimensionsRecomputeCounter is by definition always equal or greater\n\t\t\t// than 0. This check is only there to satisfy the correctness of the\n\t\t\t// exhaustive-deps rule for the `useMemo` hook.\n\t\t\tpopoverDimensionsRecomputeCounter < 0 ||\n\t\t\t! selectedElement ||\n\t\t\t( bottomClientId && ! lastSelectedElement )\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tgetBoundingClientRect() {\n\t\t\t\tconst selectedBCR = selectedElement.getBoundingClientRect();\n\t\t\t\tconst lastSelectedBCR =\n\t\t\t\t\tlastSelectedElement?.getBoundingClientRect();\n\n\t\t\t\t// Get the biggest rectangle that encompasses completely the currently\n\t\t\t\t// selected element and the last selected element:\n\t\t\t\t// - for top/left coordinates, use the smaller numbers\n\t\t\t\t// - for the bottom/right coordinates, use the largest numbers\n\t\t\t\tconst left = Math.min(\n\t\t\t\t\tselectedBCR.left,\n\t\t\t\t\tlastSelectedBCR?.left ?? Infinity\n\t\t\t\t);\n\t\t\t\tconst top = Math.min(\n\t\t\t\t\tselectedBCR.top,\n\t\t\t\t\tlastSelectedBCR?.top ?? Infinity\n\t\t\t\t);\n\t\t\t\tconst right = Math.max(\n\t\t\t\t\tselectedBCR.right,\n\t\t\t\t\tlastSelectedBCR.right ?? -Infinity\n\t\t\t\t);\n\t\t\t\tconst bottom = Math.max(\n\t\t\t\t\tselectedBCR.bottom,\n\t\t\t\t\tlastSelectedBCR.bottom ?? -Infinity\n\t\t\t\t);\n\t\t\t\tconst width = right - left;\n\t\t\t\tconst height = bottom - top;\n\n\t\t\t\treturn new window.DOMRect( left, top, width, height );\n\t\t\t},\n\t\t\townerDocument: selectedElement.ownerDocument,\n\t\t};\n\t}, [\n\t\tbottomClientId,\n\t\tlastSelectedElement,\n\t\tselectedElement,\n\t\tpopoverDimensionsRecomputeCounter,\n\t] );\n\n\tif ( ! selectedElement || ( bottomClientId && ! lastSelectedElement ) ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Popover\n\t\t\tref={ mergedRefs }\n\t\t\tanimate={ false }\n\t\t\tfocusOnMount={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\t// Render in the old slot if needed for backward compatibility,\n\t\t\t// otherwise render in place (not in the default popover slot).\n\t\t\t__unstableSlotName={ __unstablePopoverSlot || null }\n\t\t\tplacement=\"top-start\"\n\t\t\tresize={ false }\n\t\t\tflip={ false }\n\t\t\tshift={ shift }\n\t\t\t{ ...props }\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-block-popover',\n\t\t\t\tprops.className\n\t\t\t) }\n\t\t\tvariant=\"unstyled\"\n\t\t>\n\t\t\t{ __unstableCoverTarget && <div style={ style }>{ children }</div> }\n\t\t\t{ ! __unstableCoverTarget && children }\n\t\t</Popover>\n\t);\n}\n\nexport default forwardRef( BlockPopover );\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useReducedMotion } from '@wordpress/compose';\nimport { __unstableMotion as motion } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockPopover from './index';\n\nconst animateVariants = {\n\thide: { opacity: 0, scaleY: 0.75 },\n\tshow: { opacity: 1, scaleY: 1 },\n\texit: { opacity: 0, scaleY: 0.9 },\n};\n\nfunction BlockDropZonePopover( {\n\t__unstablePopoverSlot,\n\t__unstableContentRef,\n} ) {\n\tconst { clientId } = useSelect( ( select ) => {\n\t\tconst { getBlockOrder, getBlockInsertionPoint } =\n\t\t\tselect( blockEditorStore );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst order = getBlockOrder( insertionPoint.rootClientId );\n\n\t\tif ( ! order.length ) {\n\t\t\treturn {};\n\t\t}\n\n\t\treturn {\n\t\t\tclientId: order[ insertionPoint.index ],\n\t\t};\n\t}, [] );\n\tconst reducedMotion = useReducedMotion();\n\n\treturn (\n\t\t<BlockPopover\n\t\t\tclientId={ clientId }\n\t\t\t__unstableCoverTarget\n\t\t\t__unstablePopoverSlot={ __unstablePopoverSlot }\n\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\tclassName=\"block-editor-block-popover__drop-zone\"\n\t\t>\n\t\t\t<motion.div\n\t\t\t\tdata-testid=\"block-popover-drop-zone\"\n\t\t\t\tinitial={\n\t\t\t\t\treducedMotion ? animateVariants.show : animateVariants.hide\n\t\t\t\t}\n\t\t\t\tanimate={ animateVariants.show }\n\t\t\t\texit={\n\t\t\t\t\treducedMotion ? animateVariants.show : animateVariants.exit\n\t\t\t\t}\n\t\t\t\tclassName=\"block-editor-block-popover__drop-zone-foreground\"\n\t\t\t/>\n\t\t</BlockPopover>\n\t);\n}\n\nexport default BlockDropZonePopover;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRef, createContext, useContext } from '@wordpress/element';\nimport { __unstableMotion as motion } from '@wordpress/components';\nimport { useReducedMotion } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport Inserter from '../inserter';\nimport { store as blockEditorStore } from '../../store';\nimport BlockPopoverInbetween from '../block-popover/inbetween';\nimport BlockDropZonePopover from '../block-popover/drop-zone';\n\nexport const InsertionPointOpenRef = createContext();\n\nfunction InbetweenInsertionPointPopover( {\n\t__unstablePopoverSlot,\n\t__unstableContentRef,\n} ) {\n\tconst { selectBlock, hideInsertionPoint } = useDispatch( blockEditorStore );\n\tconst openRef = useContext( InsertionPointOpenRef );\n\tconst ref = useRef();\n\tconst {\n\t\torientation,\n\t\tpreviousClientId,\n\t\tnextClientId,\n\t\trootClientId,\n\t\tisInserterShown,\n\t\tisDistractionFree,\n\t\tisNavigationMode,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockOrder,\n\t\t\tgetBlockListSettings,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tisBlockBeingDragged,\n\t\t\tgetPreviousBlockClientId,\n\t\t\tgetNextBlockClientId,\n\t\t\tgetSettings,\n\t\t\tisNavigationMode: _isNavigationMode,\n\t\t} = select( blockEditorStore );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst order = getBlockOrder( insertionPoint.rootClientId );\n\n\t\tif ( ! order.length ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tlet _previousClientId = order[ insertionPoint.index - 1 ];\n\t\tlet _nextClientId = order[ insertionPoint.index ];\n\n\t\twhile ( isBlockBeingDragged( _previousClientId ) ) {\n\t\t\t_previousClientId = getPreviousBlockClientId( _previousClientId );\n\t\t}\n\n\t\twhile ( isBlockBeingDragged( _nextClientId ) ) {\n\t\t\t_nextClientId = getNextBlockClientId( _nextClientId );\n\t\t}\n\n\t\tconst settings = getSettings();\n\n\t\treturn {\n\t\t\tpreviousClientId: _previousClientId,\n\t\t\tnextClientId: _nextClientId,\n\t\t\torientation:\n\t\t\t\tgetBlockListSettings( insertionPoint.rootClientId )\n\t\t\t\t\t?.orientation || 'vertical',\n\t\t\trootClientId: insertionPoint.rootClientId,\n\t\t\tisNavigationMode: _isNavigationMode(),\n\t\t\tisDistractionFree: settings.isDistractionFree,\n\t\t\tisInserterShown: insertionPoint?.__unstableWithInserter,\n\t\t};\n\t}, [] );\n\n\tconst disableMotion = useReducedMotion();\n\n\tfunction onClick( event ) {\n\t\tif ( event.target === ref.current && nextClientId ) {\n\t\t\tselectBlock( nextClientId, -1 );\n\t\t}\n\t}\n\n\tfunction maybeHideInserterPoint( event ) {\n\t\t// Only hide the inserter if it's triggered on the wrapper,\n\t\t// and the inserter is not open.\n\t\tif ( event.target === ref.current && ! openRef.current ) {\n\t\t\thideInsertionPoint();\n\t\t}\n\t}\n\n\tfunction onFocus( event ) {\n\t\t// Only handle click on the wrapper specifically, and not an event\n\t\t// bubbled from the inserter itself.\n\t\tif ( event.target !== ref.current ) {\n\t\t\topenRef.current = true;\n\t\t}\n\t}\n\n\tconst lineVariants = {\n\t\t// Initial position starts from the center and invisible.\n\t\tstart: {\n\t\t\topacity: 0,\n\t\t\tscale: 0,\n\t\t},\n\t\t// The line expands to fill the container. If the inserter is visible it\n\t\t// is delayed so it appears orchestrated.\n\t\trest: {\n\t\t\topacity: 1,\n\t\t\tscale: 1,\n\t\t\ttransition: { delay: isInserterShown ? 0.5 : 0, type: 'tween' },\n\t\t},\n\t\thover: {\n\t\t\topacity: 1,\n\t\t\tscale: 1,\n\t\t\ttransition: { delay: 0.5, type: 'tween' },\n\t\t},\n\t};\n\n\tconst inserterVariants = {\n\t\tstart: {\n\t\t\tscale: disableMotion ? 1 : 0,\n\t\t},\n\t\trest: {\n\t\t\tscale: 1,\n\t\t\ttransition: { delay: 0.4, type: 'tween' },\n\t\t},\n\t};\n\n\tif ( isDistractionFree && ! isNavigationMode ) {\n\t\treturn null;\n\t}\n\n\tconst className = classnames(\n\t\t'block-editor-block-list__insertion-point',\n\t\t'is-' + orientation\n\t);\n\n\treturn (\n\t\t<BlockPopoverInbetween\n\t\t\tpreviousClientId={ previousClientId }\n\t\t\tnextClientId={ nextClientId }\n\t\t\t__unstablePopoverSlot={ __unstablePopoverSlot }\n\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t>\n\t\t\t<motion.div\n\t\t\t\tlayout={ ! disableMotion }\n\t\t\t\tinitial={ disableMotion ? 'rest' : 'start' }\n\t\t\t\tanimate=\"rest\"\n\t\t\t\twhileHover=\"hover\"\n\t\t\t\twhileTap=\"pressed\"\n\t\t\t\texit=\"start\"\n\t\t\t\tref={ ref }\n\t\t\t\ttabIndex={ -1 }\n\t\t\t\tonClick={ onClick }\n\t\t\t\tonFocus={ onFocus }\n\t\t\t\tclassName={ classnames( className, {\n\t\t\t\t\t'is-with-inserter': isInserterShown,\n\t\t\t\t} ) }\n\t\t\t\tonHoverEnd={ maybeHideInserterPoint }\n\t\t\t>\n\t\t\t\t<motion.div\n\t\t\t\t\tvariants={ lineVariants }\n\t\t\t\t\tclassName=\"block-editor-block-list__insertion-point-indicator\"\n\t\t\t\t\tdata-testid=\"block-list-insertion-point-indicator\"\n\t\t\t\t/>\n\t\t\t\t{ isInserterShown && (\n\t\t\t\t\t<motion.div\n\t\t\t\t\t\tvariants={ inserterVariants }\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'block-editor-block-list__insertion-point-inserter'\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Inserter\n\t\t\t\t\t\t\tposition=\"bottom center\"\n\t\t\t\t\t\t\tclientId={ nextClientId }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\t__experimentalIsQuick\n\t\t\t\t\t\t\tonToggle={ ( isOpen ) => {\n\t\t\t\t\t\t\t\topenRef.current = isOpen;\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonSelectOrClose={ () => {\n\t\t\t\t\t\t\t\topenRef.current = false;\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</motion.div>\n\t\t\t\t) }\n\t\t\t</motion.div>\n\t\t</BlockPopoverInbetween>\n\t);\n}\n\nexport default function InsertionPoint( props ) {\n\tconst { insertionPoint, isVisible, isBlockListEmpty } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockInsertionPoint,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetBlockCount,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst blockInsertionPoint = getBlockInsertionPoint();\n\t\t\treturn {\n\t\t\t\tinsertionPoint: blockInsertionPoint,\n\t\t\t\tisVisible: isBlockInsertionPointVisible(),\n\t\t\t\tisBlockListEmpty:\n\t\t\t\t\tgetBlockCount( blockInsertionPoint?.rootClientId ) === 0,\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\n\tif (\n\t\t! isVisible ||\n\t\t// Don't render the insertion point if the block list is empty.\n\t\t// The insertion point will be represented by the appender instead.\n\t\tisBlockListEmpty\n\t) {\n\t\treturn null;\n\t}\n\n\t/**\n\t * Render a popover that overlays the block when the desired operation is to replace it.\n\t * Otherwise, render a popover in between blocks for the indication of inserting between them.\n\t */\n\treturn insertionPoint.operation === 'replace' ? (\n\t\t<BlockDropZonePopover\n\t\t\t// Force remount to trigger the animation.\n\t\t\tkey={ `${ insertionPoint.rootClientId }-${ insertionPoint.index }` }\n\t\t\t{ ...props }\n\t\t/>\n\t) : (\n\t\t<InbetweenInsertionPointPopover { ...props } />\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useContext } from '@wordpress/element';\nimport { isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { InsertionPointOpenRef } from '../block-tools/insertion-point';\nimport { unlock } from '../../lock-unlock';\n\nexport function useInBetweenInserter() {\n\tconst openRef = useContext( InsertionPointOpenRef );\n\tconst isInBetweenInserterDisabled = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getSettings().isDistractionFree ||\n\t\t\tselect( blockEditorStore ).__unstableGetEditorMode() === 'zoom-out',\n\t\t[]\n\t);\n\tconst {\n\t\tgetBlockListSettings,\n\t\tgetBlockRootClientId,\n\t\tgetBlockIndex,\n\t\tisBlockInsertionPointVisible,\n\t\tisMultiSelecting,\n\t\tgetSelectedBlockClientIds,\n\t\tgetTemplateLock,\n\t\t__unstableIsWithinBlockOverlay,\n\t\tgetBlockEditingMode,\n\t} = unlock( useSelect( blockEditorStore ) );\n\tconst { showInsertionPoint, hideInsertionPoint } =\n\t\tuseDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( isInBetweenInserterDisabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction onMouseMove( event ) {\n\t\t\t\tif ( openRef.current ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Ignore text nodes sometimes detected in FireFox.\n\t\t\t\tif ( event.target.nodeType === event.target.TEXT_NODE ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( isMultiSelecting() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t! event.target.classList.contains(\n\t\t\t\t\t\t'block-editor-block-list__layout'\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\thideInsertionPoint();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet rootClientId;\n\t\t\t\tif (\n\t\t\t\t\t! event.target.classList.contains( 'is-root-container' )\n\t\t\t\t) {\n\t\t\t\t\tconst blockElement = !! event.target.getAttribute(\n\t\t\t\t\t\t'data-block'\n\t\t\t\t\t)\n\t\t\t\t\t\t? event.target\n\t\t\t\t\t\t: event.target.closest( '[data-block]' );\n\t\t\t\t\trootClientId = blockElement.getAttribute( 'data-block' );\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tgetTemplateLock( rootClientId ) ||\n\t\t\t\t\tgetBlockEditingMode( rootClientId ) === 'disabled'\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst orientation =\n\t\t\t\t\tgetBlockListSettings( rootClientId )?.orientation ||\n\t\t\t\t\t'vertical';\n\t\t\t\tconst offsetTop = event.clientY;\n\t\t\t\tconst offsetLeft = event.clientX;\n\n\t\t\t\tconst children = Array.from( event.target.children );\n\t\t\t\tlet element = children.find( ( blockEl ) => {\n\t\t\t\t\tconst blockElRect = blockEl.getBoundingClientRect();\n\t\t\t\t\treturn (\n\t\t\t\t\t\t( blockEl.classList.contains( 'wp-block' ) &&\n\t\t\t\t\t\t\torientation === 'vertical' &&\n\t\t\t\t\t\t\tblockElRect.top > offsetTop ) ||\n\t\t\t\t\t\t( blockEl.classList.contains( 'wp-block' ) &&\n\t\t\t\t\t\t\torientation === 'horizontal' &&\n\t\t\t\t\t\t\t( isRTL()\n\t\t\t\t\t\t\t\t? blockElRect.right < offsetLeft\n\t\t\t\t\t\t\t\t: blockElRect.left > offsetLeft ) )\n\t\t\t\t\t);\n\t\t\t\t} );\n\n\t\t\t\tif ( ! element ) {\n\t\t\t\t\thideInsertionPoint();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// The block may be in an alignment wrapper, so check the first direct\n\t\t\t\t// child if the element has no ID.\n\t\t\t\tif ( ! element.id ) {\n\t\t\t\t\telement = element.firstElementChild;\n\n\t\t\t\t\tif ( ! element ) {\n\t\t\t\t\t\thideInsertionPoint();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Don't show the insertion point if a parent block has an \"overlay\"\n\t\t\t\t// See https://github.com/WordPress/gutenberg/pull/34012#pullrequestreview-727762337\n\t\t\t\tconst clientId = element.id.slice( 'block-'.length );\n\t\t\t\tif (\n\t\t\t\t\t! clientId ||\n\t\t\t\t\t__unstableIsWithinBlockOverlay( clientId )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Don't show the inserter when hovering above (conflicts with\n\t\t\t\t// block toolbar) or inside selected block(s).\n\t\t\t\tif ( getSelectedBlockClientIds().includes( clientId ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst elementRect = element.getBoundingClientRect();\n\n\t\t\t\tif (\n\t\t\t\t\t( orientation === 'horizontal' &&\n\t\t\t\t\t\t( event.clientY > elementRect.bottom ||\n\t\t\t\t\t\t\tevent.clientY < elementRect.top ) ) ||\n\t\t\t\t\t( orientation === 'vertical' &&\n\t\t\t\t\t\t( event.clientX > elementRect.right ||\n\t\t\t\t\t\t\tevent.clientX < elementRect.left ) )\n\t\t\t\t) {\n\t\t\t\t\thideInsertionPoint();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst index = getBlockIndex( clientId );\n\n\t\t\t\t// Don't show the in-between inserter before the first block in\n\t\t\t\t// the list (preserves the original behaviour).\n\t\t\t\tif ( index === 0 ) {\n\t\t\t\t\thideInsertionPoint();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tshowInsertionPoint( rootClientId, index, {\n\t\t\t\t\t__unstableWithInserter: true,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mousemove', onMouseMove );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'mousemove', onMouseMove );\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\topenRef,\n\t\t\tgetBlockListSettings,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockIndex,\n\t\t\tisBlockInsertionPointVisible,\n\t\t\tisMultiSelecting,\n\t\t\tshowInsertionPoint,\n\t\t\thideInsertionPoint,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\tisInBetweenInserterDisabled,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, select } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\n\nconst requestIdleCallback = ( () => {\n\tif ( typeof window === 'undefined' ) {\n\t\treturn ( callback ) => {\n\t\t\tsetTimeout( () => callback( Date.now() ), 0 );\n\t\t};\n\t}\n\n\treturn window.requestIdleCallback || window.requestAnimationFrame;\n} )();\n\nconst cancelIdleCallback = ( () => {\n\tif ( typeof window === 'undefined' ) {\n\t\treturn clearTimeout;\n\t}\n\n\treturn window.cancelIdleCallback || window.cancelAnimationFrame;\n} )();\n\nexport function usePreParsePatterns() {\n\tconst { patterns, isPreviewMode } = useSelect( ( _select ) => {\n\t\tconst { __experimentalBlockPatterns, __unstableIsPreviewMode } =\n\t\t\t_select( blockEditorStore ).getSettings();\n\t\treturn {\n\t\t\tpatterns: __experimentalBlockPatterns,\n\t\t\tisPreviewMode: __unstableIsPreviewMode,\n\t\t};\n\t}, [] );\n\n\tuseEffect( () => {\n\t\tif ( isPreviewMode ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( ! patterns?.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet handle;\n\t\tlet index = -1;\n\n\t\tconst callback = () => {\n\t\t\tindex++;\n\t\t\tif ( index >= patterns.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tselect( blockEditorStore ).__experimentalGetParsedPattern(\n\t\t\t\tpatterns[ index ].name\n\t\t\t);\n\n\t\t\thandle = requestIdleCallback( callback );\n\t\t};\n\n\t\thandle = requestIdleCallback( callback );\n\t\treturn () => cancelIdleCallback( handle );\n\t}, [ patterns, isPreviewMode ] );\n\n\treturn null;\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tstore as blocksStore,\n\tisReusableBlock,\n\tisTemplatePart,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/** @typedef {import('@wordpress/blocks').WPIcon} WPIcon */\n\n/**\n * Contains basic block's information for display reasons.\n *\n * @typedef {Object} WPBlockDisplayInformation\n *\n * @property {boolean} isSynced    True if is a reusable block or template part\n * @property {string}  title       Human-readable block type label.\n * @property {WPIcon}  icon        Block type icon.\n * @property {string}  description A detailed block type description.\n * @property {string}  anchor      HTML anchor.\n */\n\n/**\n * Hook used to try to find a matching block variation and return\n * the appropriate information for display reasons. In order to\n * to try to find a match we need to things:\n * 1. Block's client id to extract it's current attributes.\n * 2. A block variation should have set `isActive` prop to a proper function.\n *\n * If for any reason a block variation match cannot be found,\n * the returned information come from the Block Type.\n * If no blockType is found with the provided clientId, returns null.\n *\n * @param {string} clientId Block's client id.\n * @return {?WPBlockDisplayInformation} Block's display information, or `null` when the block or its type not found.\n */\n\nexport default function useBlockDisplayInformation( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! clientId ) return null;\n\t\t\tconst { getBlockName, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst { getBlockType, getActiveBlockVariation } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst blockType = getBlockType( blockName );\n\t\t\tif ( ! blockType ) return null;\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\n\t\t\tconst isSynced =\n\t\t\t\tisReusableBlock( blockType ) || isTemplatePart( blockType );\n\t\t\tconst blockTypeInfo = {\n\t\t\t\tisSynced,\n\t\t\t\ttitle: blockType.title,\n\t\t\t\ticon: blockType.icon,\n\t\t\t\tdescription: blockType.description,\n\t\t\t\tanchor: attributes?.anchor,\n\t\t\t};\n\t\t\tif ( ! match ) return blockTypeInfo;\n\n\t\t\treturn {\n\t\t\t\tisSynced,\n\t\t\t\ttitle: match.title || blockType.title,\n\t\t\t\ticon: match.icon || blockType.icon,\n\t\t\t\tdescription: match.description || blockType.description,\n\t\t\t\tanchor: attributes?.anchor,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tgetBlockType,\n\t__experimentalGetBlockLabel as getBlockLabel,\n\tisReusableBlock,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Returns the block's configured title as a string, or empty if the title\n * cannot be determined.\n *\n * @example\n *\n * ```js\n * useBlockDisplayTitle( { clientId: 'afd1cb17-2c08-4e7a-91be-007ba7ddc3a1', maximumLength: 17 } );\n * ```\n *\n * @param {Object}           props\n * @param {string}           props.clientId      Client ID of block.\n * @param {number|undefined} props.maximumLength The maximum length that the block title string may be before truncated.\n * @param {string|undefined} props.context       The context to pass to `getBlockLabel`.\n * @return {?string} Block title.\n */\nexport default function useBlockDisplayTitle( {\n\tclientId,\n\tmaximumLength,\n\tcontext,\n} ) {\n\tconst { attributes, name, reusableBlockTitle } = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\t__experimentalGetReusableBlockTitle,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tif ( ! blockName ) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tconst isReusable = isReusableBlock( getBlockType( blockName ) );\n\t\t\treturn {\n\t\t\t\tattributes: getBlockAttributes( clientId ),\n\t\t\t\tname: blockName,\n\t\t\t\treusableBlockTitle:\n\t\t\t\t\tisReusable &&\n\t\t\t\t\t__experimentalGetReusableBlockTitle(\n\t\t\t\t\t\tgetBlockAttributes( clientId ).ref\n\t\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tif ( ! name || ! blockInformation ) {\n\t\treturn null;\n\t}\n\tconst blockType = getBlockType( name );\n\tconst blockLabel = blockType\n\t\t? getBlockLabel( blockType, attributes, context )\n\t\t: null;\n\n\tconst label = reusableBlockTitle || blockLabel;\n\t// Label will fallback to the title if no label is defined for the current\n\t// label context. If the label is defined we prioritize it over a\n\t// possible block variation title match.\n\tconst blockTitle =\n\t\tlabel && label !== blockType.title ? label : blockInformation.title;\n\n\tif (\n\t\tmaximumLength &&\n\t\tmaximumLength > 0 &&\n\t\tblockTitle.length > maximumLength\n\t) {\n\t\tconst omission = '...';\n\t\treturn (\n\t\t\tblockTitle.slice( 0, maximumLength - omission.length ) + omission\n\t\t);\n\t}\n\n\treturn blockTitle;\n}\n","/**\n * Internal dependencies\n */\n\nimport useBlockDisplayTitle from './use-block-display-title';\n\n/**\n * Renders the block's configured title as a string, or empty if the title\n * cannot be determined.\n *\n * @example\n *\n * ```jsx\n * <BlockTitle clientId=\"afd1cb17-2c08-4e7a-91be-007ba7ddc3a1\" maximumLength={ 17 }/>\n * ```\n *\n * @param {Object}           props\n * @param {string}           props.clientId      Client ID of block.\n * @param {number|undefined} props.maximumLength The maximum length that the block title string may be before truncated.\n * @param {string|undefined} props.context       The context to pass to `getBlockLabel`.\n *\n * @return {JSX.Element} Block title.\n */\nexport default function BlockTitle( { clientId, maximumLength, context } ) {\n\treturn useBlockDisplayTitle( { clientId, maximumLength, context } );\n}\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { Draggable } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockDraggableChip from './draggable-chip';\nimport useScrollWhenDragging from './use-scroll-when-dragging';\nimport { store as blockEditorStore } from '../../store';\n\nconst BlockDraggable = ( {\n\tchildren,\n\tclientIds,\n\tcloneClassname,\n\tonDragStart,\n\tonDragEnd,\n} ) => {\n\tconst { srcRootClientId, isDraggable, icon } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { canMoveBlocks, getBlockRootClientId, getBlockName } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst { getBlockType } = select( blocksStore );\n\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\t\t\tconst blockName = getBlockName( clientIds[ 0 ] );\n\n\t\t\treturn {\n\t\t\t\tsrcRootClientId: rootClientId,\n\t\t\t\tisDraggable: canMoveBlocks( clientIds, rootClientId ),\n\t\t\t\ticon: getBlockType( blockName )?.icon,\n\t\t\t};\n\t\t},\n\t\t[ clientIds ]\n\t);\n\tconst isDragging = useRef( false );\n\tconst [ startScrolling, scrollOnDragOver, stopScrolling ] =\n\t\tuseScrollWhenDragging();\n\n\tconst { startDraggingBlocks, stopDraggingBlocks } =\n\t\tuseDispatch( blockEditorStore );\n\n\t// Stop dragging blocks if the block draggable is unmounted.\n\tuseEffect( () => {\n\t\treturn () => {\n\t\t\tif ( isDragging.current ) {\n\t\t\t\tstopDraggingBlocks();\n\t\t\t}\n\t\t};\n\t}, [] );\n\n\tif ( ! isDraggable ) {\n\t\treturn children( { draggable: false } );\n\t}\n\n\tconst transferData = {\n\t\ttype: 'block',\n\t\tsrcClientIds: clientIds,\n\t\tsrcRootClientId,\n\t};\n\n\treturn (\n\t\t<Draggable\n\t\t\tcloneClassname={ cloneClassname }\n\t\t\t__experimentalTransferDataType=\"wp-blocks\"\n\t\t\ttransferData={ transferData }\n\t\t\tonDragStart={ ( event ) => {\n\t\t\t\t// Defer hiding the dragged source element to the next\n\t\t\t\t// frame to enable dragging.\n\t\t\t\twindow.requestAnimationFrame( () => {\n\t\t\t\t\tstartDraggingBlocks( clientIds );\n\t\t\t\t\tisDragging.current = true;\n\n\t\t\t\t\tstartScrolling( event );\n\n\t\t\t\t\tif ( onDragStart ) {\n\t\t\t\t\t\tonDragStart();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} }\n\t\t\tonDragOver={ scrollOnDragOver }\n\t\t\tonDragEnd={ () => {\n\t\t\t\tstopDraggingBlocks();\n\t\t\t\tisDragging.current = false;\n\n\t\t\t\tstopScrolling();\n\n\t\t\t\tif ( onDragEnd ) {\n\t\t\t\t\tonDragEnd();\n\t\t\t\t}\n\t\t\t} }\n\t\t\t__experimentalDragComponent={\n\t\t\t\t<BlockDraggableChip count={ clientIds.length } icon={ icon } />\n\t\t\t}\n\t\t>\n\t\t\t{ ( { onDraggableStart, onDraggableEnd } ) => {\n\t\t\t\treturn children( {\n\t\t\t\t\tdraggable: true,\n\t\t\t\t\tonDragStart: onDraggableStart,\n\t\t\t\t\tonDragEnd: onDraggableEnd,\n\t\t\t\t} );\n\t\t\t} }\n\t\t</Draggable>\n\t);\n};\n\nexport default BlockDraggable;\n","/**\n * WordPress dependencies\n */\nimport { getScrollContainer } from '@wordpress/dom';\nimport { useCallback, useEffect, useRef } from '@wordpress/element';\n\nconst SCROLL_INACTIVE_DISTANCE_PX = 50;\nconst SCROLL_INTERVAL_MS = 25;\nconst PIXELS_PER_SECOND_PER_PERCENTAGE = 1000;\nconst VELOCITY_MULTIPLIER =\n\tPIXELS_PER_SECOND_PER_PERCENTAGE * ( SCROLL_INTERVAL_MS / 1000 );\n\n/**\n * React hook that scrolls the scroll container when a block is being dragged.\n *\n * @return {Function[]} `startScrolling`, `scrollOnDragOver`, `stopScrolling`\n *                      functions to be called in `onDragStart`, `onDragOver`\n *                      and `onDragEnd` events respectively.\n */\nexport default function useScrollWhenDragging() {\n\tconst dragStartY = useRef( null );\n\tconst velocityY = useRef( null );\n\tconst scrollParentY = useRef( null );\n\tconst scrollEditorInterval = useRef( null );\n\n\t// Clear interval when unmounting.\n\tuseEffect(\n\t\t() => () => {\n\t\t\tif ( scrollEditorInterval.current ) {\n\t\t\t\tclearInterval( scrollEditorInterval.current );\n\t\t\t\tscrollEditorInterval.current = null;\n\t\t\t}\n\t\t},\n\t\t[]\n\t);\n\n\tconst startScrolling = useCallback( ( event ) => {\n\t\tdragStartY.current = event.clientY;\n\n\t\t// Find nearest parent(s) to scroll.\n\t\tscrollParentY.current = getScrollContainer( event.target );\n\n\t\tscrollEditorInterval.current = setInterval( () => {\n\t\t\tif ( scrollParentY.current && velocityY.current ) {\n\t\t\t\tconst newTop =\n\t\t\t\t\tscrollParentY.current.scrollTop + velocityY.current;\n\n\t\t\t\t// Setting `behavior: 'smooth'` as a scroll property seems to hurt performance.\n\t\t\t\t// Better to use a small scroll interval.\n\t\t\t\tscrollParentY.current.scroll( {\n\t\t\t\t\ttop: newTop,\n\t\t\t\t} );\n\t\t\t}\n\t\t}, SCROLL_INTERVAL_MS );\n\t}, [] );\n\n\tconst scrollOnDragOver = useCallback( ( event ) => {\n\t\tif ( ! scrollParentY.current ) {\n\t\t\treturn;\n\t\t}\n\t\tconst scrollParentHeight = scrollParentY.current.offsetHeight;\n\t\tconst offsetDragStartPosition =\n\t\t\tdragStartY.current - scrollParentY.current.offsetTop;\n\t\tconst offsetDragPosition =\n\t\t\tevent.clientY - scrollParentY.current.offsetTop;\n\n\t\tif ( event.clientY > offsetDragStartPosition ) {\n\t\t\t// User is dragging downwards.\n\t\t\tconst moveableDistance = Math.max(\n\t\t\t\tscrollParentHeight -\n\t\t\t\t\toffsetDragStartPosition -\n\t\t\t\t\tSCROLL_INACTIVE_DISTANCE_PX,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst dragDistance = Math.max(\n\t\t\t\toffsetDragPosition -\n\t\t\t\t\toffsetDragStartPosition -\n\t\t\t\t\tSCROLL_INACTIVE_DISTANCE_PX,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst distancePercentage =\n\t\t\t\tmoveableDistance === 0 || dragDistance === 0\n\t\t\t\t\t? 0\n\t\t\t\t\t: dragDistance / moveableDistance;\n\t\t\tvelocityY.current = VELOCITY_MULTIPLIER * distancePercentage;\n\t\t} else if ( event.clientY < offsetDragStartPosition ) {\n\t\t\t// User is dragging upwards.\n\t\t\tconst moveableDistance = Math.max(\n\t\t\t\toffsetDragStartPosition - SCROLL_INACTIVE_DISTANCE_PX,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst dragDistance = Math.max(\n\t\t\t\toffsetDragStartPosition -\n\t\t\t\t\toffsetDragPosition -\n\t\t\t\t\tSCROLL_INACTIVE_DISTANCE_PX,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst distancePercentage =\n\t\t\t\tmoveableDistance === 0 || dragDistance === 0\n\t\t\t\t\t? 0\n\t\t\t\t\t: dragDistance / moveableDistance;\n\t\t\tvelocityY.current = -VELOCITY_MULTIPLIER * distancePercentage;\n\t\t} else {\n\t\t\tvelocityY.current = 0;\n\t\t}\n\t}, [] );\n\n\tconst stopScrolling = () => {\n\t\tdragStartY.current = null;\n\t\tscrollParentY.current = null;\n\n\t\tif ( scrollEditorInterval.current ) {\n\t\t\tclearInterval( scrollEditorInterval.current );\n\t\t\tscrollEditorInterval.current = null;\n\t\t}\n\t};\n\n\treturn [ startScrolling, scrollOnDragOver, stopScrolling ];\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronUp = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z\" />\n\t</SVG>\n);\n\nexport default chevronUp;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronDown = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z\" />\n\t</SVG>\n);\n\nexport default chevronDown;\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf, isRTL } from '@wordpress/i18n';\n\nconst getMovementDirection = ( moveDirection, orientation ) => {\n\tif ( moveDirection === 'up' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? 'right' : 'left';\n\t\t}\n\t\treturn 'up';\n\t} else if ( moveDirection === 'down' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? 'left' : 'right';\n\t\t}\n\t\treturn 'down';\n\t}\n\treturn null;\n};\n\n/**\n * Return a label for the block movement controls depending on block position.\n *\n * @param {number}  selectedCount Number of blocks selected.\n * @param {string}  type          Block type - in the case of a single block, should\n *                                define its 'type'. I.e. 'Text', 'Heading', 'Image' etc.\n * @param {number}  firstIndex    The index (position - 1) of the first block selected.\n * @param {boolean} isFirst       This is the first block.\n * @param {boolean} isLast        This is the last block.\n * @param {number}  dir           Direction of movement (> 0 is considered to be going\n *                                down, < 0 is up).\n * @param {string}  orientation   The orientation of the block movers, vertical or\n *                                horizontal.\n *\n * @return {string | undefined} Label for the block movement controls.\n */\nexport function getBlockMoverDescription(\n\tselectedCount,\n\ttype,\n\tfirstIndex,\n\tisFirst,\n\tisLast,\n\tdir,\n\torientation\n) {\n\tconst position = firstIndex + 1;\n\n\tif ( selectedCount > 1 ) {\n\t\treturn getMultiBlockMoverDescription(\n\t\t\tselectedCount,\n\t\t\tfirstIndex,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tdir,\n\t\t\torientation\n\t\t);\n\t}\n\n\tif ( isFirst && isLast ) {\n\t\treturn sprintf(\n\t\t\t// translators: %s: Type of block (i.e. Text, Image etc)\n\t\t\t__( 'Block %s is the only block, and cannot be moved' ),\n\t\t\ttype\n\t\t);\n\t}\n\n\tif ( dir > 0 && ! isLast ) {\n\t\t// Moving down.\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\n\n\t\tif ( movementDirection === 'down' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__(\n\t\t\t\t\t'Move %1$s block from position %2$d down to position %3$d'\n\t\t\t\t),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition + 1\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__(\n\t\t\t\t\t'Move %1$s block from position %2$d left to position %3$d'\n\t\t\t\t),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition + 1\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__(\n\t\t\t\t\t'Move %1$s block from position %2$d right to position %3$d'\n\t\t\t\t),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition + 1\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir > 0 && isLast ) {\n\t\t// Moving down, and is the last item.\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\n\n\t\tif ( movementDirection === 'down' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the end of the content and can’t be moved down'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the end of the content and can’t be moved left'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the end of the content and can’t be moved right'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir < 0 && ! isFirst ) {\n\t\t// Moving up.\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\n\n\t\tif ( movementDirection === 'up' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__( 'Move %1$s block from position %2$d up to position %3$d' ),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition - 1\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__(\n\t\t\t\t\t'Move %1$s block from position %2$d left to position %3$d'\n\t\t\t\t),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition - 1\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t\t__(\n\t\t\t\t\t'Move %1$s block from position %2$d right to position %3$d'\n\t\t\t\t),\n\t\t\t\ttype,\n\t\t\t\tposition,\n\t\t\t\tposition - 1\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir < 0 && isFirst ) {\n\t\t// Moving up, and is the first item.\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\n\n\t\tif ( movementDirection === 'up' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the beginning of the content and can’t be moved up'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the beginning of the content and can’t be moved left'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\n\t\t\t\t__(\n\t\t\t\t\t'Block %1$s is at the beginning of the content and can’t be moved right'\n\t\t\t\t),\n\t\t\t\ttype\n\t\t\t);\n\t\t}\n\t}\n}\n\n/**\n * Return a label for the block movement controls depending on block position.\n *\n * @param {number}  selectedCount Number of blocks selected.\n * @param {number}  firstIndex    The index (position - 1) of the first block selected.\n * @param {boolean} isFirst       This is the first block.\n * @param {boolean} isLast        This is the last block.\n * @param {number}  dir           Direction of movement (> 0 is considered to be going\n *                                down, < 0 is up).\n * @param {string}  orientation   The orientation of the block movers, vertical or\n *                                horizontal.\n *\n * @return {string | undefined} Label for the block movement controls.\n */\nexport function getMultiBlockMoverDescription(\n\tselectedCount,\n\tfirstIndex,\n\tisFirst,\n\tisLast,\n\tdir,\n\torientation\n) {\n\tconst position = firstIndex + 1;\n\n\tif ( isFirst && isLast ) {\n\t\t// All blocks are selected\n\t\treturn __( 'All blocks are selected, and cannot be moved' );\n\t}\n\n\tif ( dir > 0 && ! isLast ) {\n\t\t// moving down\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\n\n\t\tif ( movementDirection === 'down' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d down by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d left by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d right by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir > 0 && isLast ) {\n\t\t// moving down, and the selected blocks are the last item\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\n\n\t\tif ( movementDirection === 'down' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved down as they are already at the bottom'\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved left as they are already are at the leftmost position'\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved right as they are already are at the rightmost position'\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir < 0 && ! isFirst ) {\n\t\t// moving up\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\n\n\t\tif ( movementDirection === 'up' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d up by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d left by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t\t__( 'Move %1$d blocks from position %2$d right by one place' ),\n\t\t\t\tselectedCount,\n\t\t\t\tposition\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( dir < 0 && isFirst ) {\n\t\t// moving up, and the selected blocks are the first item\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\n\n\t\tif ( movementDirection === 'up' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved up as they are already at the top'\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'left' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved left as they are already are at the leftmost position'\n\t\t\t);\n\t\t}\n\n\t\tif ( movementDirection === 'right' ) {\n\t\t\treturn __(\n\t\t\t\t'Blocks cannot be moved right as they are already are at the rightmost position'\n\t\t\t);\n\t\t}\n\t}\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { getBlockType } from '@wordpress/blocks';\nimport { Button, VisuallyHidden } from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\nimport { __, isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport {\n\tchevronLeft,\n\tchevronRight,\n\tchevronUp,\n\tchevronDown,\n} from '@wordpress/icons';\nimport { getBlockMoverDescription } from './mover-description';\nimport { store as blockEditorStore } from '../../store';\n\nconst getArrowIcon = ( direction, orientation ) => {\n\tif ( direction === 'up' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? chevronRight : chevronLeft;\n\t\t}\n\t\treturn chevronUp;\n\t} else if ( direction === 'down' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? chevronLeft : chevronRight;\n\t\t}\n\t\treturn chevronDown;\n\t}\n\treturn null;\n};\n\nconst getMovementDirectionLabel = ( moveDirection, orientation ) => {\n\tif ( moveDirection === 'up' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? __( 'Move right' ) : __( 'Move left' );\n\t\t}\n\t\treturn __( 'Move up' );\n\t} else if ( moveDirection === 'down' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? __( 'Move left' ) : __( 'Move right' );\n\t\t}\n\t\treturn __( 'Move down' );\n\t}\n\treturn null;\n};\n\nconst BlockMoverButton = forwardRef(\n\t(\n\t\t{ clientIds, direction, orientation: moverOrientation, ...props },\n\t\tref\n\t) => {\n\t\tconst instanceId = useInstanceId( BlockMoverButton );\n\t\tconst normalizedClientIds = Array.isArray( clientIds )\n\t\t\t? clientIds\n\t\t\t: [ clientIds ];\n\t\tconst blocksCount = normalizedClientIds.length;\n\n\t\tconst {\n\t\t\tblockType,\n\t\t\tisDisabled,\n\t\t\trootClientId,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tfirstIndex,\n\t\t\torientation = 'vertical',\n\t\t} = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\tgetBlockIndex,\n\t\t\t\t\tgetBlockRootClientId,\n\t\t\t\t\tgetBlockOrder,\n\t\t\t\t\tgetBlock,\n\t\t\t\t\tgetBlockListSettings,\n\t\t\t\t} = select( blockEditorStore );\n\t\t\t\tconst firstClientId = normalizedClientIds[ 0 ];\n\t\t\t\tconst blockRootClientId = getBlockRootClientId( firstClientId );\n\t\t\t\tconst firstBlockIndex = getBlockIndex( firstClientId );\n\t\t\t\tconst lastBlockIndex = getBlockIndex(\n\t\t\t\t\tnormalizedClientIds[ normalizedClientIds.length - 1 ]\n\t\t\t\t);\n\t\t\t\tconst blockOrder = getBlockOrder( blockRootClientId );\n\t\t\t\tconst block = getBlock( firstClientId );\n\t\t\t\tconst isFirstBlock = firstBlockIndex === 0;\n\t\t\t\tconst isLastBlock = lastBlockIndex === blockOrder.length - 1;\n\t\t\t\tconst { orientation: blockListOrientation } =\n\t\t\t\t\tgetBlockListSettings( blockRootClientId ) || {};\n\n\t\t\t\treturn {\n\t\t\t\t\tblockType: block ? getBlockType( block.name ) : null,\n\t\t\t\t\tisDisabled: direction === 'up' ? isFirstBlock : isLastBlock,\n\t\t\t\t\trootClientId: blockRootClientId,\n\t\t\t\t\tfirstIndex: firstBlockIndex,\n\t\t\t\t\tisFirst: isFirstBlock,\n\t\t\t\t\tisLast: isLastBlock,\n\t\t\t\t\torientation: moverOrientation || blockListOrientation,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ clientIds, direction ]\n\t\t);\n\n\t\tconst { moveBlocksDown, moveBlocksUp } =\n\t\t\tuseDispatch( blockEditorStore );\n\t\tconst moverFunction =\n\t\t\tdirection === 'up' ? moveBlocksUp : moveBlocksDown;\n\n\t\tconst onClick = ( event ) => {\n\t\t\tmoverFunction( clientIds, rootClientId );\n\t\t\tif ( props.onClick ) {\n\t\t\t\tprops.onClick( event );\n\t\t\t}\n\t\t};\n\n\t\tconst descriptionId = `block-editor-block-mover-button__description-${ instanceId }`;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button\n\t\t\t\t\tref={ ref }\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'block-editor-block-mover-button',\n\t\t\t\t\t\t`is-${ direction }-button`\n\t\t\t\t\t) }\n\t\t\t\t\ticon={ getArrowIcon( direction, orientation ) }\n\t\t\t\t\tlabel={ getMovementDirectionLabel(\n\t\t\t\t\t\tdirection,\n\t\t\t\t\t\torientation\n\t\t\t\t\t) }\n\t\t\t\t\taria-describedby={ descriptionId }\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tonClick={ isDisabled ? null : onClick }\n\t\t\t\t\tdisabled={ isDisabled }\n\t\t\t\t\t__experimentalIsFocusable\n\t\t\t\t/>\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ getBlockMoverDescription(\n\t\t\t\t\t\tblocksCount,\n\t\t\t\t\t\tblockType && blockType.title,\n\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\tisFirst,\n\t\t\t\t\t\tisLast,\n\t\t\t\t\t\tdirection === 'up' ? -1 : 1,\n\t\t\t\t\t\torientation\n\t\t\t\t\t) }\n\t\t\t\t</VisuallyHidden>\n\t\t\t</>\n\t\t);\n\t}\n);\n\nexport const BlockMoverUpButton = forwardRef( ( props, ref ) => {\n\treturn <BlockMoverButton direction=\"up\" ref={ ref } { ...props } />;\n} );\n\nexport const BlockMoverDownButton = forwardRef( ( props, ref ) => {\n\treturn <BlockMoverButton direction=\"down\" ref={ ref } { ...props } />;\n} );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\n\nimport { dragHandle } from '@wordpress/icons';\nimport { ToolbarGroup, ToolbarItem, Button } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockDraggable from '../block-draggable';\nimport { BlockMoverUpButton, BlockMoverDownButton } from './button';\nimport { store as blockEditorStore } from '../../store';\n\nfunction BlockMover( { clientIds, hideDragHandle } ) {\n\tconst { canMove, rootClientId, isFirst, isLast, orientation } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockListSettings,\n\t\t\t\tcanMoveBlocks,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst normalizedClientIds = Array.isArray( clientIds )\n\t\t\t\t? clientIds\n\t\t\t\t: [ clientIds ];\n\t\t\tconst firstClientId = normalizedClientIds[ 0 ];\n\t\t\tconst _rootClientId = getBlockRootClientId( firstClientId );\n\t\t\tconst firstIndex = getBlockIndex( firstClientId );\n\t\t\tconst lastIndex = getBlockIndex(\n\t\t\t\tnormalizedClientIds[ normalizedClientIds.length - 1 ]\n\t\t\t);\n\t\t\tconst blockOrder = getBlockOrder( _rootClientId );\n\n\t\t\treturn {\n\t\t\t\tcanMove: canMoveBlocks( clientIds, _rootClientId ),\n\t\t\t\trootClientId: _rootClientId,\n\t\t\t\tisFirst: firstIndex === 0,\n\t\t\t\tisLast: lastIndex === blockOrder.length - 1,\n\t\t\t\torientation: getBlockListSettings( _rootClientId )?.orientation,\n\t\t\t};\n\t\t},\n\t\t[ clientIds ]\n\t);\n\n\tif ( ! canMove || ( isFirst && isLast && ! rootClientId ) ) {\n\t\treturn null;\n\t}\n\n\tconst dragHandleLabel = __( 'Drag' );\n\n\treturn (\n\t\t<ToolbarGroup\n\t\t\tclassName={ classnames( 'block-editor-block-mover', {\n\t\t\t\t'is-horizontal': orientation === 'horizontal',\n\t\t\t} ) }\n\t\t>\n\t\t\t{ ! hideDragHandle && (\n\t\t\t\t<BlockDraggable clientIds={ clientIds }>\n\t\t\t\t\t{ ( draggableProps ) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticon={ dragHandle }\n\t\t\t\t\t\t\tclassName=\"block-editor-block-mover__drag-handle\"\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\tlabel={ dragHandleLabel }\n\t\t\t\t\t\t\t// Should not be able to tab to drag handle as this\n\t\t\t\t\t\t\t// button can only be used with a pointer device.\n\t\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\t\t{ ...draggableProps }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</BlockDraggable>\n\t\t\t) }\n\t\t\t<div className=\"block-editor-block-mover__move-button-container\">\n\t\t\t\t<ToolbarItem>\n\t\t\t\t\t{ ( itemProps ) => (\n\t\t\t\t\t\t<BlockMoverUpButton\n\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t{ ...itemProps }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolbarItem>\n\t\t\t\t<ToolbarItem>\n\t\t\t\t\t{ ( itemProps ) => (\n\t\t\t\t\t\t<BlockMoverDownButton\n\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t{ ...itemProps }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolbarItem>\n\t\t\t</div>\n\t\t</ToolbarGroup>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-mover/README.md\n */\nexport default BlockMover;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { dragHandle } from '@wordpress/icons';\nimport { Button, Flex, FlexItem } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect, useRef } from '@wordpress/element';\nimport {\n\tBACKSPACE,\n\tDELETE,\n\tUP,\n\tDOWN,\n\tLEFT,\n\tRIGHT,\n\tTAB,\n\tESCAPE,\n\tENTER,\n\tSPACE,\n} from '@wordpress/keycodes';\nimport {\n\tgetBlockType,\n\t__experimentalGetAccessibleBlockLabel as getAccessibleBlockLabel,\n} from '@wordpress/blocks';\nimport { speak } from '@wordpress/a11y';\nimport { focus } from '@wordpress/dom';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockTitle from '../block-title';\nimport BlockIcon from '../block-icon';\nimport { store as blockEditorStore } from '../../store';\nimport BlockDraggable from '../block-draggable';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport BlockMover from '../block-mover';\n\n/**\n * Block selection button component, displaying the label of the block. If the block\n * descends from a root block, a button is displayed enabling the user to select\n * the root block.\n *\n * @param {string} props          Component props.\n * @param {string} props.clientId Client ID of block.\n *\n * @return {WPComponent} The component to be rendered.\n */\nfunction BlockSelectionButton( { clientId, rootClientId } ) {\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst selected = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlock,\n\t\t\t\tgetBlockIndex,\n\t\t\t\thasBlockMovingClientId,\n\t\t\t\tgetBlockListSettings,\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst index = getBlockIndex( clientId );\n\t\t\tconst { name, attributes } = getBlock( clientId );\n\t\t\tconst blockMovingMode = hasBlockMovingClientId();\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\tname,\n\t\t\t\tattributes,\n\t\t\t\tblockMovingMode,\n\t\t\t\torientation: getBlockListSettings( rootClientId )?.orientation,\n\t\t\t\teditorMode: __unstableGetEditorMode(),\n\t\t\t};\n\t\t},\n\t\t[ clientId, rootClientId ]\n\t);\n\tconst {\n\t\tindex,\n\t\tname,\n\t\tattributes,\n\t\tblockMovingMode,\n\t\torientation,\n\t\teditorMode,\n\t} = selected;\n\tconst { setNavigationMode, removeBlock } = useDispatch( blockEditorStore );\n\tconst ref = useRef();\n\n\tconst blockType = getBlockType( name );\n\tconst label = getAccessibleBlockLabel(\n\t\tblockType,\n\t\tattributes,\n\t\tindex + 1,\n\t\torientation\n\t);\n\n\t// Focus the breadcrumb in navigation mode.\n\tuseEffect( () => {\n\t\tref.current.focus();\n\n\t\tspeak( label );\n\t}, [ label ] );\n\tconst blockElement = useBlockElement( clientId );\n\n\tconst {\n\t\thasBlockMovingClientId,\n\t\tgetBlockIndex,\n\t\tgetBlockRootClientId,\n\t\tgetClientIdsOfDescendants,\n\t\tgetSelectedBlockClientId,\n\t\tgetMultiSelectedBlocksEndClientId,\n\t\tgetPreviousBlockClientId,\n\t\tgetNextBlockClientId,\n\t} = useSelect( blockEditorStore );\n\tconst {\n\t\tselectBlock,\n\t\tclearSelectedBlock,\n\t\tsetBlockMovingClientId,\n\t\tmoveBlockToPosition,\n\t} = useDispatch( blockEditorStore );\n\n\tfunction onKeyDown( event ) {\n\t\tconst { keyCode } = event;\n\t\tconst isUp = keyCode === UP;\n\t\tconst isDown = keyCode === DOWN;\n\t\tconst isLeft = keyCode === LEFT;\n\t\tconst isRight = keyCode === RIGHT;\n\t\tconst isTab = keyCode === TAB;\n\t\tconst isEscape = keyCode === ESCAPE;\n\t\tconst isEnter = keyCode === ENTER;\n\t\tconst isSpace = keyCode === SPACE;\n\t\tconst isShift = event.shiftKey;\n\n\t\tif ( keyCode === BACKSPACE || keyCode === DELETE ) {\n\t\t\tremoveBlock( clientId );\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst selectionEndClientId = getMultiSelectedBlocksEndClientId();\n\t\tconst selectionBeforeEndClientId = getPreviousBlockClientId(\n\t\t\tselectionEndClientId || selectedBlockClientId\n\t\t);\n\t\tconst selectionAfterEndClientId = getNextBlockClientId(\n\t\t\tselectionEndClientId || selectedBlockClientId\n\t\t);\n\n\t\tconst navigateUp = ( isTab && isShift ) || isUp;\n\t\tconst navigateDown = ( isTab && ! isShift ) || isDown;\n\t\t// Move out of current nesting level (no effect if at root level).\n\t\tconst navigateOut = isLeft;\n\t\t// Move into next nesting level (no effect if the current block has no innerBlocks).\n\t\tconst navigateIn = isRight;\n\n\t\tlet focusedBlockUid;\n\t\tif ( navigateUp ) {\n\t\t\tfocusedBlockUid = selectionBeforeEndClientId;\n\t\t} else if ( navigateDown ) {\n\t\t\tfocusedBlockUid = selectionAfterEndClientId;\n\t\t} else if ( navigateOut ) {\n\t\t\tfocusedBlockUid =\n\t\t\t\tgetBlockRootClientId( selectedBlockClientId ) ??\n\t\t\t\tselectedBlockClientId;\n\t\t} else if ( navigateIn ) {\n\t\t\tfocusedBlockUid =\n\t\t\t\tgetClientIdsOfDescendants( [ selectedBlockClientId ] )[ 0 ] ??\n\t\t\t\tselectedBlockClientId;\n\t\t}\n\t\tconst startingBlockClientId = hasBlockMovingClientId();\n\t\tif ( isEscape && startingBlockClientId && ! event.defaultPrevented ) {\n\t\t\tsetBlockMovingClientId( null );\n\t\t\tevent.preventDefault();\n\t\t}\n\t\tif ( ( isEnter || isSpace ) && startingBlockClientId ) {\n\t\t\tconst sourceRoot = getBlockRootClientId( startingBlockClientId );\n\t\t\tconst destRoot = getBlockRootClientId( selectedBlockClientId );\n\t\t\tconst sourceBlockIndex = getBlockIndex( startingBlockClientId );\n\t\t\tlet destinationBlockIndex = getBlockIndex( selectedBlockClientId );\n\t\t\tif (\n\t\t\t\tsourceBlockIndex < destinationBlockIndex &&\n\t\t\t\tsourceRoot === destRoot\n\t\t\t) {\n\t\t\t\tdestinationBlockIndex -= 1;\n\t\t\t}\n\t\t\tmoveBlockToPosition(\n\t\t\t\tstartingBlockClientId,\n\t\t\t\tsourceRoot,\n\t\t\t\tdestRoot,\n\t\t\t\tdestinationBlockIndex\n\t\t\t);\n\t\t\tselectBlock( startingBlockClientId );\n\t\t\tsetBlockMovingClientId( null );\n\t\t}\n\t\tif ( navigateDown || navigateUp || navigateOut || navigateIn ) {\n\t\t\tif ( focusedBlockUid ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tselectBlock( focusedBlockUid );\n\t\t\t} else if ( isTab && selectedBlockClientId ) {\n\t\t\t\tlet nextTabbable;\n\n\t\t\t\tif ( navigateDown ) {\n\t\t\t\t\tnextTabbable = blockElement;\n\t\t\t\t\tdo {\n\t\t\t\t\t\tnextTabbable = focus.tabbable.findNext( nextTabbable );\n\t\t\t\t\t} while (\n\t\t\t\t\t\tnextTabbable &&\n\t\t\t\t\t\tblockElement.contains( nextTabbable )\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( ! nextTabbable ) {\n\t\t\t\t\t\tnextTabbable =\n\t\t\t\t\t\t\tblockElement.ownerDocument.defaultView.frameElement;\n\t\t\t\t\t\tnextTabbable = focus.tabbable.findNext( nextTabbable );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnextTabbable = focus.tabbable.findPrevious( blockElement );\n\t\t\t\t}\n\n\t\t\t\tif ( nextTabbable ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tnextTabbable.focus();\n\t\t\t\t\tclearSelectedBlock();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst classNames = classnames(\n\t\t'block-editor-block-list__block-selection-button',\n\t\t{\n\t\t\t'is-block-moving-mode': !! blockMovingMode,\n\t\t}\n\t);\n\n\tconst dragHandleLabel = __( 'Drag' );\n\n\treturn (\n\t\t<div className={ classNames }>\n\t\t\t<Flex\n\t\t\t\tjustify=\"center\"\n\t\t\t\tclassName=\"block-editor-block-list__block-selection-button__content\"\n\t\t\t>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<BlockIcon icon={ blockInformation?.icon } showColors />\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t{ editorMode === 'zoom-out' && (\n\t\t\t\t\t\t<BlockMover clientIds={ [ clientId ] } hideDragHandle />\n\t\t\t\t\t) }\n\t\t\t\t\t{ editorMode === 'navigation' && (\n\t\t\t\t\t\t<BlockDraggable clientIds={ [ clientId ] }>\n\t\t\t\t\t\t\t{ ( draggableProps ) => (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ticon={ dragHandle }\n\t\t\t\t\t\t\t\t\tclassName=\"block-selection-button_drag-handle\"\n\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\tlabel={ dragHandleLabel }\n\t\t\t\t\t\t\t\t\t// Should not be able to tab to drag handle as this\n\t\t\t\t\t\t\t\t\t// button can only be used with a pointer device.\n\t\t\t\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\t\t\t\t{ ...draggableProps }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</BlockDraggable>\n\t\t\t\t\t) }\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\teditorMode === 'navigation'\n\t\t\t\t\t\t\t\t? () => setNavigationMode( false )\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonKeyDown={ onKeyDown }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\tshowTooltip={ false }\n\t\t\t\t\t\tclassName=\"block-selection-button_select-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockTitle\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\tmaximumLength={ 35 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</div>\n\t);\n}\n\nexport default BlockSelectionButton;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst levelUp = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m13.53 8.47-1.06 1.06-2.72-2.72V12h-1.5V6.81L5.53 9.53 4.47 8.47 9 3.94l4.53 4.53Zm-1.802 7.968c1.307.697 3.235.812 5.772.812v1.5c-2.463 0-4.785-.085-6.478-.988a4.721 4.721 0 0 1-2.07-2.13C8.48 14.67 8.25 13.471 8.25 12h1.5c0 1.328.208 2.28.548 2.969.332.675.81 1.138 1.43 1.47Z\" />\n\t</SVG>\n);\n\nexport default levelUp;\n","/**\n * WordPress dependencies\n */\nimport { NavigableMenu, Toolbar } from '@wordpress/components';\nimport {\n\tuseState,\n\tuseRef,\n\tuseLayoutEffect,\n\tuseEffect,\n\tuseCallback,\n} from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\nimport { focus } from '@wordpress/dom';\nimport { useShortcut } from '@wordpress/keyboard-shortcuts';\n\nfunction hasOnlyToolbarItem( elements ) {\n\tconst dataProp = 'toolbarItem';\n\treturn ! elements.some( ( element ) => ! ( dataProp in element.dataset ) );\n}\n\nfunction getAllToolbarItemsIn( container ) {\n\treturn Array.from( container.querySelectorAll( '[data-toolbar-item]' ) );\n}\n\nfunction hasFocusWithin( container ) {\n\treturn container.contains( container.ownerDocument.activeElement );\n}\n\nfunction focusFirstTabbableIn( container ) {\n\tconst [ firstTabbable ] = focus.tabbable.find( container );\n\tif ( firstTabbable ) {\n\t\tfirstTabbable.focus( {\n\t\t\t// When focusing newly mounted toolbars,\n\t\t\t// the position of the popover is often not right on the first render\n\t\t\t// This prevents the layout shifts when focusing the dialogs.\n\t\t\tpreventScroll: true,\n\t\t} );\n\t}\n}\n\nfunction useIsAccessibleToolbar( ref ) {\n\t/*\n\t * By default, we'll assume the starting accessible state of the Toolbar\n\t * is true, as it seems to be the most common case.\n\t *\n\t * Transitioning from an (initial) false to true state causes the\n\t * <Toolbar /> component to mount twice, which is causing undesired\n\t * side-effects. These side-effects appear to only affect certain\n\t * E2E tests.\n\t *\n\t * This was initial discovered in this pull-request:\n\t * https://github.com/WordPress/gutenberg/pull/23425\n\t */\n\tconst initialAccessibleToolbarState = true;\n\n\t// By default, it's gonna render NavigableMenu. If all the tabbable elements\n\t// inside the toolbar are ToolbarItem components (or derived components like\n\t// ToolbarButton), then we can wrap them with the accessible Toolbar\n\t// component.\n\tconst [ isAccessibleToolbar, setIsAccessibleToolbar ] = useState(\n\t\tinitialAccessibleToolbarState\n\t);\n\n\tconst determineIsAccessibleToolbar = useCallback( () => {\n\t\tconst tabbables = focus.tabbable.find( ref.current );\n\t\tconst onlyToolbarItem = hasOnlyToolbarItem( tabbables );\n\t\tif ( ! onlyToolbarItem ) {\n\t\t\tdeprecated( 'Using custom components as toolbar controls', {\n\t\t\t\tsince: '5.6',\n\t\t\t\talternative:\n\t\t\t\t\t'ToolbarItem, ToolbarButton or ToolbarDropdownMenu components',\n\t\t\t\tlink: 'https://developer.wordpress.org/block-editor/components/toolbar-button/#inside-blockcontrols',\n\t\t\t} );\n\t\t}\n\t\tsetIsAccessibleToolbar( onlyToolbarItem );\n\t}, [] );\n\n\tuseLayoutEffect( () => {\n\t\t// Toolbar buttons may be rendered asynchronously, so we use\n\t\t// MutationObserver to check if the toolbar subtree has been modified.\n\t\tconst observer = new window.MutationObserver(\n\t\t\tdetermineIsAccessibleToolbar\n\t\t);\n\t\tobserver.observe( ref.current, { childList: true, subtree: true } );\n\t\treturn () => observer.disconnect();\n\t}, [ isAccessibleToolbar ] );\n\n\treturn isAccessibleToolbar;\n}\n\nfunction useToolbarFocus(\n\tref,\n\tfocusOnMount,\n\tisAccessibleToolbar,\n\tdefaultIndex,\n\tonIndexChange,\n\tshouldUseKeyboardFocusShortcut\n) {\n\t// Make sure we don't use modified versions of this prop.\n\tconst [ initialFocusOnMount ] = useState( focusOnMount );\n\tconst [ initialIndex ] = useState( defaultIndex );\n\n\tconst focusToolbar = useCallback( () => {\n\t\tfocusFirstTabbableIn( ref.current );\n\t}, [] );\n\n\tconst focusToolbarViaShortcut = () => {\n\t\tif ( shouldUseKeyboardFocusShortcut ) {\n\t\t\tfocusToolbar();\n\t\t}\n\t};\n\n\t// Focus on toolbar when pressing alt+F10 when the toolbar is visible.\n\tuseShortcut( 'core/block-editor/focus-toolbar', focusToolbarViaShortcut );\n\n\tuseEffect( () => {\n\t\tif ( initialFocusOnMount ) {\n\t\t\tfocusToolbar();\n\t\t}\n\t}, [ isAccessibleToolbar, initialFocusOnMount, focusToolbar ] );\n\n\tuseEffect( () => {\n\t\t// Store ref so we have access on useEffect cleanup: https://legacy.reactjs.org/blog/2020/08/10/react-v17-rc.html#effect-cleanup-timing\n\t\tconst navigableToolbarRef = ref.current;\n\t\t// If initialIndex is passed, we focus on that toolbar item when the\n\t\t// toolbar gets mounted and initial focus is not forced.\n\t\t// We have to wait for the next browser paint because block controls aren't\n\t\t// rendered right away when the toolbar gets mounted.\n\t\tlet raf = 0;\n\t\tif ( ! initialFocusOnMount ) {\n\t\t\traf = window.requestAnimationFrame( () => {\n\t\t\t\tconst items = getAllToolbarItemsIn( navigableToolbarRef );\n\t\t\t\tconst index = initialIndex || 0;\n\t\t\t\tif ( items[ index ] && hasFocusWithin( navigableToolbarRef ) ) {\n\t\t\t\t\titems[ index ].focus( {\n\t\t\t\t\t\t// When focusing newly mounted toolbars,\n\t\t\t\t\t\t// the position of the popover is often not right on the first render\n\t\t\t\t\t\t// This prevents the layout shifts when focusing the dialogs.\n\t\t\t\t\t\tpreventScroll: true,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\treturn () => {\n\t\t\twindow.cancelAnimationFrame( raf );\n\t\t\tif ( ! onIndexChange || ! navigableToolbarRef ) return;\n\t\t\t// When the toolbar element is unmounted and onIndexChange is passed, we\n\t\t\t// pass the focused toolbar item index so it can be hydrated later.\n\t\t\tconst items = getAllToolbarItemsIn( navigableToolbarRef );\n\t\t\tconst index = items.findIndex( ( item ) => item.tabIndex === 0 );\n\t\t\tonIndexChange( index );\n\t\t};\n\t}, [ initialIndex, initialFocusOnMount ] );\n}\n\nfunction NavigableToolbar( {\n\tchildren,\n\tfocusOnMount,\n\tshouldUseKeyboardFocusShortcut = true,\n\t__experimentalInitialIndex: initialIndex,\n\t__experimentalOnIndexChange: onIndexChange,\n\t...props\n} ) {\n\tconst ref = useRef();\n\tconst isAccessibleToolbar = useIsAccessibleToolbar( ref );\n\n\tuseToolbarFocus(\n\t\tref,\n\t\tfocusOnMount,\n\t\tisAccessibleToolbar,\n\t\tinitialIndex,\n\t\tonIndexChange,\n\t\tshouldUseKeyboardFocusShortcut\n\t);\n\n\tif ( isAccessibleToolbar ) {\n\t\treturn (\n\t\t\t<Toolbar label={ props[ 'aria-label' ] } ref={ ref } { ...props }>\n\t\t\t\t{ children }\n\t\t\t</Toolbar>\n\t\t);\n\t}\n\n\treturn (\n\t\t<NavigableMenu\n\t\t\torientation=\"horizontal\"\n\t\t\trole=\"toolbar\"\n\t\t\tref={ ref }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</NavigableMenu>\n\t);\n}\n\nexport default NavigableToolbar;\n","/**\n * WordPress dependencies\n */\nimport { useState, useRef, useEffect } from '@wordpress/element';\n\nconst { clearTimeout, setTimeout } = window;\nconst noop = () => {};\nconst DEBOUNCE_TIMEOUT = 200;\n\n/**\n * Hook that creates a showMover state, as well as debounced show/hide callbacks.\n *\n * @param {Object}   props                       Component props.\n * @param {Object}   props.ref                   Element reference.\n * @param {boolean}  props.isFocused             Whether the component has current focus.\n * @param {number}   [props.debounceTimeout=250] Debounce timeout in milliseconds.\n * @param {Function} [props.onChange=noop]       Callback function.\n */\nexport function useDebouncedShowMovers( {\n\tref,\n\tisFocused,\n\tdebounceTimeout = DEBOUNCE_TIMEOUT,\n\tonChange = noop,\n} ) {\n\tconst [ showMovers, setShowMovers ] = useState( false );\n\tconst timeoutRef = useRef();\n\n\tconst handleOnChange = ( nextIsFocused ) => {\n\t\tif ( ref?.current ) {\n\t\t\tsetShowMovers( nextIsFocused );\n\t\t}\n\n\t\tonChange( nextIsFocused );\n\t};\n\n\tconst getIsHovered = () => {\n\t\treturn ref?.current && ref.current.matches( ':hover' );\n\t};\n\n\tconst shouldHideMovers = () => {\n\t\tconst isHovered = getIsHovered();\n\t\treturn ! isFocused && ! isHovered;\n\t};\n\n\tconst clearTimeoutRef = () => {\n\t\tconst timeout = timeoutRef.current;\n\n\t\tif ( timeout && clearTimeout ) {\n\t\t\tclearTimeout( timeout );\n\t\t}\n\t};\n\n\tconst debouncedShowMovers = ( event ) => {\n\t\tif ( event ) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\n\t\tclearTimeoutRef();\n\n\t\tif ( ! showMovers ) {\n\t\t\thandleOnChange( true );\n\t\t}\n\t};\n\n\tconst debouncedHideMovers = ( event ) => {\n\t\tif ( event ) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\n\t\tclearTimeoutRef();\n\n\t\ttimeoutRef.current = setTimeout( () => {\n\t\t\tif ( shouldHideMovers() ) {\n\t\t\t\thandleOnChange( false );\n\t\t\t}\n\t\t}, debounceTimeout );\n\t};\n\n\tuseEffect(\n\t\t() => () => {\n\t\t\t/**\n\t\t\t * We need to call the change handler with `isFocused`\n\t\t\t * set to false on unmount because we also clear the\n\t\t\t * timeout that would handle that.\n\t\t\t */\n\t\t\thandleOnChange( false );\n\t\t\tclearTimeoutRef();\n\t\t},\n\t\t[]\n\t);\n\n\treturn {\n\t\tshowMovers,\n\t\tdebouncedShowMovers,\n\t\tdebouncedHideMovers,\n\t};\n}\n\n/**\n * Hook that provides a showMovers state and gesture events for DOM elements\n * that interact with the showMovers state.\n *\n * @param {Object}   props                       Component props.\n * @param {Object}   props.ref                   Element reference.\n * @param {number}   [props.debounceTimeout=250] Debounce timeout in milliseconds.\n * @param {Function} [props.onChange=noop]       Callback function.\n */\nexport function useShowMoversGestures( {\n\tref,\n\tdebounceTimeout = DEBOUNCE_TIMEOUT,\n\tonChange = noop,\n} ) {\n\tconst [ isFocused, setIsFocused ] = useState( false );\n\tconst { showMovers, debouncedShowMovers, debouncedHideMovers } =\n\t\tuseDebouncedShowMovers( { ref, debounceTimeout, isFocused, onChange } );\n\n\tconst registerRef = useRef( false );\n\n\tconst isFocusedWithin = () => {\n\t\treturn (\n\t\t\tref?.current &&\n\t\t\tref.current.contains( ref.current.ownerDocument.activeElement )\n\t\t);\n\t};\n\n\tuseEffect( () => {\n\t\tconst node = ref.current;\n\n\t\tconst handleOnFocus = () => {\n\t\t\tif ( isFocusedWithin() ) {\n\t\t\t\tsetIsFocused( true );\n\t\t\t\tdebouncedShowMovers();\n\t\t\t}\n\t\t};\n\n\t\tconst handleOnBlur = () => {\n\t\t\tif ( ! isFocusedWithin() ) {\n\t\t\t\tsetIsFocused( false );\n\t\t\t\tdebouncedHideMovers();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Events are added via DOM events (vs. React synthetic events),\n\t\t * as the child React components swallow mouse events.\n\t\t */\n\t\tif ( node && ! registerRef.current ) {\n\t\t\tnode.addEventListener( 'focus', handleOnFocus, true );\n\t\t\tnode.addEventListener( 'blur', handleOnBlur, true );\n\t\t\tregisterRef.current = true;\n\t\t}\n\n\t\treturn () => {\n\t\t\tif ( node ) {\n\t\t\t\tnode.removeEventListener( 'focus', handleOnFocus );\n\t\t\t\tnode.removeEventListener( 'blur', handleOnBlur );\n\t\t\t}\n\t\t};\n\t}, [\n\t\tref,\n\t\tregisterRef,\n\t\tsetIsFocused,\n\t\tdebouncedShowMovers,\n\t\tdebouncedHideMovers,\n\t] );\n\n\treturn {\n\t\tshowMovers,\n\t\tgestures: {\n\t\t\tonMouseMove: debouncedShowMovers,\n\t\t\tonMouseLeave: debouncedHideMovers,\n\t\t},\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { getBlockType, store as blocksStore } from '@wordpress/blocks';\nimport { ToolbarButton } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport BlockIcon from '../block-icon';\nimport { useShowMoversGestures } from '../block-toolbar/utils';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Block parent selector component, displaying the hierarchy of the\n * current block selection as a single icon to \"go up\" a level.\n *\n * @return {WPComponent} Parent block selector.\n */\nexport default function BlockParentSelector() {\n\tconst { selectBlock, toggleBlockHighlight } =\n\t\tuseDispatch( blockEditorStore );\n\tconst { firstParentClientId, shouldHide, isDistractionFree } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockParents,\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tgetSettings,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { hasBlockSupport } = select( blocksStore );\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\tconst parents = getBlockParents( selectedBlockClientId );\n\t\t\tconst _firstParentClientId = parents[ parents.length - 1 ];\n\t\t\tconst parentBlockName = getBlockName( _firstParentClientId );\n\t\t\tconst _parentBlockType = getBlockType( parentBlockName );\n\t\t\tconst settings = getSettings();\n\t\t\treturn {\n\t\t\t\tfirstParentClientId: _firstParentClientId,\n\t\t\t\tshouldHide: ! hasBlockSupport(\n\t\t\t\t\t_parentBlockType,\n\t\t\t\t\t'__experimentalParentSelector',\n\t\t\t\t\ttrue\n\t\t\t\t),\n\t\t\t\tisDistractionFree: settings.isDistractionFree,\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\tconst blockInformation = useBlockDisplayInformation( firstParentClientId );\n\n\t// Allows highlighting the parent block outline when focusing or hovering\n\t// the parent block selector within the child.\n\tconst nodeRef = useRef();\n\tconst { gestures: showMoversGestures } = useShowMoversGestures( {\n\t\tref: nodeRef,\n\t\tonChange( isFocused ) {\n\t\t\tif ( isFocused && isDistractionFree ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttoggleBlockHighlight( firstParentClientId, isFocused );\n\t\t},\n\t} );\n\n\tif ( shouldHide || firstParentClientId === undefined ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block-editor-block-parent-selector\"\n\t\t\tkey={ firstParentClientId }\n\t\t\tref={ nodeRef }\n\t\t\t{ ...showMoversGestures }\n\t\t>\n\t\t\t<ToolbarButton\n\t\t\t\tclassName=\"block-editor-block-parent-selector__button\"\n\t\t\t\tonClick={ () => selectBlock( firstParentClientId ) }\n\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t/* translators: %s: Name of the block's parent. */\n\t\t\t\t\t__( 'Select %s' ),\n\t\t\t\t\tblockInformation?.title\n\t\t\t\t) }\n\t\t\t\tshowTooltip\n\t\t\t\ticon={ <BlockIcon icon={ blockInformation?.icon } /> }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst copy = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M20.2 8v11c0 .7-.6 1.2-1.2 1.2H6v1.5h13c1.5 0 2.7-1.2 2.7-2.8V8zM18 16.4V4.6c0-.9-.7-1.6-1.6-1.6H4.6C3.7 3 3 3.7 3 4.6v11.8c0 .9.7 1.6 1.6 1.6h11.8c.9 0 1.6-.7 1.6-1.6zm-13.5 0V4.6c0-.1.1-.1.1-.1h11.8c.1 0 .1.1.1.1v11.8c0 .1-.1.1-.1.1H4.6l-.1-.1z\" />\n\t</SVG>\n);\n\nexport default copy;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Popover } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\n\nexport default function PreviewBlockPopover( { blocks } ) {\n\treturn (\n\t\t<div className=\"block-editor-block-switcher__popover__preview__parent\">\n\t\t\t<div className=\"block-editor-block-switcher__popover__preview__container\">\n\t\t\t\t<Popover\n\t\t\t\t\tclassName=\"block-editor-block-switcher__preview__popover\"\n\t\t\t\t\tplacement=\"bottom-start\"\n\t\t\t\t\tfocusOnMount={ false }\n\t\t\t\t>\n\t\t\t\t\t<div className=\"block-editor-block-switcher__preview\">\n\t\t\t\t\t\t<div className=\"block-editor-block-switcher__preview-title\">\n\t\t\t\t\t\t\t{ __( 'Preview' ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<BlockPreview viewportWidth={ 500 } blocks={ blocks } />\n\t\t\t\t\t</div>\n\t\t\t\t</Popover>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { MenuItem } from '@wordpress/components';\nimport {\n\tgetBlockMenuDefaultClassName,\n\tcloneBlock,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { useState, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockIcon from '../block-icon';\nimport PreviewBlockPopover from './preview-block-popover';\n\nconst EMPTY_OBJECT = {};\n\nexport function useBlockVariationTransforms( { clientIds, blocks } ) {\n\tconst { activeBlockVariation, blockVariationTransformations } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tcanRemoveBlocks,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { getActiveBlockVariation, getBlockVariations } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst rootClientId = getBlockRootClientId(\n\t\t\t\tArray.isArray( clientIds ) ? clientIds[ 0 ] : clientIds\n\t\t\t);\n\t\t\tconst canRemove = canRemoveBlocks( clientIds, rootClientId );\n\t\t\t// Only handle single selected blocks for now.\n\t\t\tif ( blocks.length !== 1 || ! canRemove ) {\n\t\t\t\treturn EMPTY_OBJECT;\n\t\t\t}\n\t\t\tconst [ firstBlock ] = blocks;\n\t\t\treturn {\n\t\t\t\tblockVariationTransformations: getBlockVariations(\n\t\t\t\t\tfirstBlock.name,\n\t\t\t\t\t'transform'\n\t\t\t\t),\n\t\t\t\tactiveBlockVariation: getActiveBlockVariation(\n\t\t\t\t\tfirstBlock.name,\n\t\t\t\t\tgetBlockAttributes( firstBlock.clientId )\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientIds, blocks ]\n\t);\n\tconst transformations = useMemo( () => {\n\t\treturn blockVariationTransformations?.filter(\n\t\t\t( { name } ) => name !== activeBlockVariation?.name\n\t\t);\n\t}, [ blockVariationTransformations, activeBlockVariation ] );\n\treturn transformations;\n}\n\nconst BlockVariationTransformations = ( {\n\ttransformations,\n\tonSelect,\n\tblocks,\n} ) => {\n\tconst [ hoveredTransformItemName, setHoveredTransformItemName ] =\n\t\tuseState();\n\treturn (\n\t\t<>\n\t\t\t{ hoveredTransformItemName && (\n\t\t\t\t<PreviewBlockPopover\n\t\t\t\t\tblocks={ cloneBlock(\n\t\t\t\t\t\tblocks[ 0 ],\n\t\t\t\t\t\ttransformations.find(\n\t\t\t\t\t\t\t( { name } ) => name === hoveredTransformItemName\n\t\t\t\t\t\t).attributes\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ transformations?.map( ( item ) => (\n\t\t\t\t<BlockVariationTranformationItem\n\t\t\t\t\tkey={ item.name }\n\t\t\t\t\titem={ item }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</>\n\t);\n};\n\nfunction BlockVariationTranformationItem( {\n\titem,\n\tonSelect,\n\tsetHoveredTransformItemName,\n} ) {\n\tconst { name, icon, title } = item;\n\treturn (\n\t\t<MenuItem\n\t\t\tclassName={ getBlockMenuDefaultClassName( name ) }\n\t\t\tonClick={ ( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tonSelect( name );\n\t\t\t} }\n\t\t\tonMouseLeave={ () => setHoveredTransformItemName( null ) }\n\t\t\tonMouseEnter={ () => setHoveredTransformItemName( name ) }\n\t\t>\n\t\t\t<BlockIcon icon={ icon } showColors />\n\t\t\t{ title }\n\t\t</MenuItem>\n\t);\n}\n\nexport default BlockVariationTransformations;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuGroup, MenuItem } from '@wordpress/components';\nimport {\n\tgetBlockMenuDefaultClassName,\n\tswitchToBlockType,\n} from '@wordpress/blocks';\nimport { useState, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport PreviewBlockPopover from './preview-block-popover';\nimport BlockVariationTransformations from './block-variation-transformations';\n\n/**\n * Helper hook to group transformations to display them in a specific order in the UI.\n * For now we group only priority content driven transformations(ex. paragraph -> heading).\n *\n * Later on we could also group 'layout' transformations(ex. paragraph -> group) and\n * display them in different sections.\n *\n * @param {Object[]} possibleBlockTransformations The available block transformations.\n * @return {Record<string, Object[]>} The grouped block transformations.\n */\nfunction useGroupedTransforms( possibleBlockTransformations ) {\n\tconst priorityContentTranformationBlocks = {\n\t\t'core/paragraph': 1,\n\t\t'core/heading': 2,\n\t\t'core/list': 3,\n\t\t'core/quote': 4,\n\t};\n\tconst transformations = useMemo( () => {\n\t\tconst priorityTextTranformsNames = Object.keys(\n\t\t\tpriorityContentTranformationBlocks\n\t\t);\n\t\treturn possibleBlockTransformations.reduce(\n\t\t\t( accumulator, item ) => {\n\t\t\t\tconst { name } = item;\n\t\t\t\tif ( priorityTextTranformsNames.includes( name ) ) {\n\t\t\t\t\taccumulator.priorityTextTransformations.push( item );\n\t\t\t\t} else {\n\t\t\t\t\taccumulator.restTransformations.push( item );\n\t\t\t\t}\n\t\t\t\treturn accumulator;\n\t\t\t},\n\t\t\t{ priorityTextTransformations: [], restTransformations: [] }\n\t\t);\n\t}, [ possibleBlockTransformations ] );\n\n\t// Order the priority text transformations.\n\ttransformations.priorityTextTransformations.sort(\n\t\t( { name: currentName }, { name: nextName } ) => {\n\t\t\treturn priorityContentTranformationBlocks[ currentName ] <\n\t\t\t\tpriorityContentTranformationBlocks[ nextName ]\n\t\t\t\t? -1\n\t\t\t\t: 1;\n\t\t}\n\t);\n\treturn transformations;\n}\n\nconst BlockTransformationsMenu = ( {\n\tclassName,\n\tpossibleBlockTransformations,\n\tpossibleBlockVariationTransformations,\n\tonSelect,\n\tonSelectVariation,\n\tblocks,\n} ) => {\n\tconst [ hoveredTransformItemName, setHoveredTransformItemName ] =\n\t\tuseState();\n\n\tconst { priorityTextTransformations, restTransformations } =\n\t\tuseGroupedTransforms( possibleBlockTransformations );\n\t// We have to check if both content transformations(priority and rest) are set\n\t// in order to create a separate MenuGroup for them.\n\tconst hasBothContentTransformations =\n\t\tpriorityTextTransformations.length && restTransformations.length;\n\tconst restTransformItems = !! restTransformations.length && (\n\t\t<RestTransformationItems\n\t\t\trestTransformations={ restTransformations }\n\t\t\tonSelect={ onSelect }\n\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\n\t\t/>\n\t);\n\treturn (\n\t\t<>\n\t\t\t<MenuGroup label={ __( 'Transform to' ) } className={ className }>\n\t\t\t\t{ hoveredTransformItemName && (\n\t\t\t\t\t<PreviewBlockPopover\n\t\t\t\t\t\tblocks={ switchToBlockType(\n\t\t\t\t\t\t\tblocks,\n\t\t\t\t\t\t\thoveredTransformItemName\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ !! possibleBlockVariationTransformations?.length && (\n\t\t\t\t\t<BlockVariationTransformations\n\t\t\t\t\t\ttransformations={\n\t\t\t\t\t\t\tpossibleBlockVariationTransformations\n\t\t\t\t\t\t}\n\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\tonSelect={ onSelectVariation }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ priorityTextTransformations.map( ( item ) => (\n\t\t\t\t\t<BlockTranformationItem\n\t\t\t\t\t\tkey={ item.name }\n\t\t\t\t\t\titem={ item }\n\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\tsetHoveredTransformItemName={\n\t\t\t\t\t\t\tsetHoveredTransformItemName\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t\t{ ! hasBothContentTransformations && restTransformItems }\n\t\t\t</MenuGroup>\n\t\t\t{ !! hasBothContentTransformations && (\n\t\t\t\t<MenuGroup className={ className }>\n\t\t\t\t\t{ restTransformItems }\n\t\t\t\t</MenuGroup>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nfunction RestTransformationItems( {\n\trestTransformations,\n\tonSelect,\n\tsetHoveredTransformItemName,\n} ) {\n\treturn restTransformations.map( ( item ) => (\n\t\t<BlockTranformationItem\n\t\t\tkey={ item.name }\n\t\t\titem={ item }\n\t\t\tonSelect={ onSelect }\n\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\n\t\t/>\n\t) );\n}\n\nfunction BlockTranformationItem( {\n\titem,\n\tonSelect,\n\tsetHoveredTransformItemName,\n} ) {\n\tconst { name, icon, title, isDisabled } = item;\n\treturn (\n\t\t<MenuItem\n\t\t\tclassName={ getBlockMenuDefaultClassName( name ) }\n\t\t\tonClick={ ( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tonSelect( name );\n\t\t\t} }\n\t\t\tdisabled={ isDisabled }\n\t\t\tonMouseLeave={ () => setHoveredTransformItemName( null ) }\n\t\t\tonMouseEnter={ () => setHoveredTransformItemName( name ) }\n\t\t>\n\t\t\t<BlockIcon icon={ icon } showColors />\n\t\t\t{ title }\n\t\t</MenuItem>\n\t);\n}\n\nexport default BlockTransformationsMenu;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst check = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z\" />\n\t</SVG>\n);\n\nexport default check;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"tokenList\"];","/**\n * WordPress dependencies\n */\nimport TokenList from '@wordpress/token-list';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Returns the active style from the given className.\n *\n * @param {Array}  styles    Block styles.\n * @param {string} className Class name\n *\n * @return {Object?} The active style.\n */\nexport function getActiveStyle( styles, className ) {\n\tfor ( const style of new TokenList( className ).values() ) {\n\t\tif ( style.indexOf( 'is-style-' ) === -1 ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst potentialStyleName = style.substring( 9 );\n\t\tconst activeStyle = styles?.find(\n\t\t\t( { name } ) => name === potentialStyleName\n\t\t);\n\t\tif ( activeStyle ) {\n\t\t\treturn activeStyle;\n\t\t}\n\t}\n\n\treturn getDefaultStyle( styles );\n}\n\n/**\n * Replaces the active style in the block's className.\n *\n * @param {string}  className   Class name.\n * @param {Object?} activeStyle The replaced style.\n * @param {Object}  newStyle    The replacing style.\n *\n * @return {string} The updated className.\n */\nexport function replaceActiveStyle( className, activeStyle, newStyle ) {\n\tconst list = new TokenList( className );\n\n\tif ( activeStyle ) {\n\t\tlist.remove( 'is-style-' + activeStyle.name );\n\t}\n\n\tlist.add( 'is-style-' + newStyle.name );\n\n\treturn list.value;\n}\n\n/**\n * Returns a collection of styles that can be represented on the frontend.\n * The function checks a style collection for a default style. If none is found, it adds one to\n * act as a fallback for when there is no active style applied to a block. The default item also serves\n * as a switch on the frontend to deactivate non-default styles.\n *\n * @param {Array} styles Block styles.\n *\n * @return {Array<Object?>}        The style collection.\n */\nexport function getRenderedStyles( styles ) {\n\tif ( ! styles || styles.length === 0 ) {\n\t\treturn [];\n\t}\n\n\treturn getDefaultStyle( styles )\n\t\t? styles\n\t\t: [\n\t\t\t\t{\n\t\t\t\t\tname: 'default',\n\t\t\t\t\tlabel: _x( 'Default', 'block style' ),\n\t\t\t\t\tisDefault: true,\n\t\t\t\t},\n\t\t\t\t...styles,\n\t\t  ];\n}\n\n/**\n * Returns a style object from a collection of styles where that style object is the default block style.\n *\n * @param {Array} styles Block styles.\n *\n * @return {Object?}        The default style object, if found.\n */\nexport function getDefaultStyle( styles ) {\n\treturn styles?.find( ( style ) => style.isDefault );\n}\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\tcloneBlock,\n\tgetBlockType,\n\tgetBlockFromExample,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getActiveStyle, getRenderedStyles, replaceActiveStyle } from './utils';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n *\n * @param {WPBlock}     block Block object.\n * @param {WPBlockType} type  Block type settings.\n * @return {WPBlock}          A generic block ready for styles preview.\n */\nfunction useGenericPreviewBlock( block, type ) {\n\treturn useMemo( () => {\n\t\tconst example = type?.example;\n\t\tconst blockName = type?.name;\n\n\t\tif ( example && blockName ) {\n\t\t\treturn getBlockFromExample( blockName, {\n\t\t\t\tattributes: example.attributes,\n\t\t\t\tinnerBlocks: example.innerBlocks,\n\t\t\t} );\n\t\t}\n\n\t\tif ( block ) {\n\t\t\treturn cloneBlock( block );\n\t\t}\n\t}, [ type?.example ? block?.name : block, type ] );\n}\n\n/**\n * @typedef useStylesForBlocksArguments\n * @property {string}     clientId Block client ID.\n * @property {() => void} onSwitch Block style switch callback function.\n */\n\n/**\n *\n * @param {useStylesForBlocksArguments} useStylesForBlocks arguments.\n * @return {Object}                                         Results of the select methods.\n */\nexport default function useStylesForBlocks( { clientId, onSwitch } ) {\n\tconst selector = ( select ) => {\n\t\tconst { getBlock } = select( blockEditorStore );\n\t\tconst block = getBlock( clientId );\n\n\t\tif ( ! block ) {\n\t\t\treturn {};\n\t\t}\n\t\tconst blockType = getBlockType( block.name );\n\t\tconst { getBlockStyles } = select( blocksStore );\n\n\t\treturn {\n\t\t\tblock,\n\t\t\tblockType,\n\t\t\tstyles: getBlockStyles( block.name ),\n\t\t\tclassName: block.attributes.className || '',\n\t\t};\n\t};\n\tconst { styles, block, blockType, className } = useSelect( selector, [\n\t\tclientId,\n\t] );\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst stylesToRender = getRenderedStyles( styles );\n\tconst activeStyle = getActiveStyle( stylesToRender, className );\n\tconst genericPreviewBlock = useGenericPreviewBlock( block, blockType );\n\n\tconst onSelect = ( style ) => {\n\t\tconst styleClassName = replaceActiveStyle(\n\t\t\tclassName,\n\t\t\tactiveStyle,\n\t\t\tstyle\n\t\t);\n\t\tupdateBlockAttributes( clientId, {\n\t\t\tclassName: styleClassName,\n\t\t} );\n\t\tonSwitch();\n\t};\n\n\treturn {\n\t\tonSelect,\n\t\tstylesToRender,\n\t\tactiveStyle,\n\t\tgenericPreviewBlock,\n\t\tclassName,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { MenuItem, __experimentalText as Text } from '@wordpress/components';\nimport { check } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport useStylesForBlocks from './use-styles-for-block';\n\nconst noop = () => {};\n\nexport default function BlockStylesMenuItems( { clientId, onSwitch = noop } ) {\n\tconst { onSelect, stylesToRender, activeStyle } = useStylesForBlocks( {\n\t\tclientId,\n\t\tonSwitch,\n\t} );\n\n\tif ( ! stylesToRender || stylesToRender.length === 0 ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<>\n\t\t\t{ stylesToRender.map( ( style ) => {\n\t\t\t\tconst menuItemText = style.label || style.name;\n\t\t\t\treturn (\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tkey={ style.name }\n\t\t\t\t\t\ticon={ activeStyle.name === style.name ? check : null }\n\t\t\t\t\t\tonClick={ () => onSelect( style ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\tas=\"span\"\n\t\t\t\t\t\t\tlimit={ 18 }\n\t\t\t\t\t\t\tellipsizeMode=\"tail\"\n\t\t\t\t\t\t\ttruncate\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ menuItemText }\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuGroup } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockStylesMenuItems from '../block-styles/menu-items';\n\nexport default function BlockStylesMenu( { hoveredBlock, onSwitch } ) {\n\tconst { clientId } = hoveredBlock;\n\n\treturn (\n\t\t<MenuGroup\n\t\t\tlabel={ __( 'Styles' ) }\n\t\t\tclassName=\"block-editor-block-switcher__styles__menugroup\"\n\t\t>\n\t\t\t<BlockStylesMenuItems clientId={ clientId } onSwitch={ onSwitch } />\n\t\t</MenuGroup>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalGetBlockAttributesNamesByRole as getBlockAttributesNamesByRole } from '@wordpress/blocks';\n\n/**\n * Try to find a matching block by a block's name in a provided\n * block. We recurse through InnerBlocks and return the reference\n * of the matched block (it could be an InnerBlock).\n * If no match is found return nothing.\n *\n * @param {WPBlock} block             The block to try to find a match.\n * @param {string}  selectedBlockName The block's name to use for matching condition.\n * @param {Set}     consumedBlocks    A set holding the previously matched/consumed blocks.\n *\n * @return {WPBlock | undefined} The matched block if found or nothing(`undefined`).\n */\nexport const getMatchingBlockByName = (\n\tblock,\n\tselectedBlockName,\n\tconsumedBlocks = new Set()\n) => {\n\tconst { clientId, name, innerBlocks = [] } = block;\n\t// Check if block has been consumed already.\n\tif ( consumedBlocks.has( clientId ) ) return;\n\tif ( name === selectedBlockName ) return block;\n\t// Try to find a matching block from InnerBlocks recursively.\n\tfor ( const innerBlock of innerBlocks ) {\n\t\tconst match = getMatchingBlockByName(\n\t\t\tinnerBlock,\n\t\t\tselectedBlockName,\n\t\t\tconsumedBlocks\n\t\t);\n\t\tif ( match ) return match;\n\t}\n};\n\n/**\n * Find and return the block attributes to retain through\n * the transformation, based on Block Type's `role:content`\n * attributes. If no `role:content` attributes exist,\n * return selected block's attributes.\n *\n * @param {string} name       Block type's namespaced name.\n * @param {Object} attributes Selected block's attributes.\n * @return {Object} The block's attributes to retain.\n */\nexport const getRetainedBlockAttributes = ( name, attributes ) => {\n\tconst contentAttributes = getBlockAttributesNamesByRole( name, 'content' );\n\tif ( ! contentAttributes?.length ) return attributes;\n\n\treturn contentAttributes.reduce( ( _accumulator, attribute ) => {\n\t\tif ( attributes[ attribute ] )\n\t\t\t_accumulator[ attribute ] = attributes[ attribute ];\n\t\treturn _accumulator;\n\t}, {} );\n};\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { cloneBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { getMatchingBlockByName, getRetainedBlockAttributes } from './utils';\n\n/**\n * Mutate the matched block's attributes by getting\n * which block type's attributes to retain and prioritize\n * them in the merging of the attributes.\n *\n * @param {WPBlock} match         The matched block.\n * @param {WPBlock} selectedBlock The selected block.\n * @return {void}\n */\nexport const transformMatchingBlock = ( match, selectedBlock ) => {\n\t// Get the block attributes to retain through the transformation.\n\tconst retainedBlockAttributes = getRetainedBlockAttributes(\n\t\tselectedBlock.name,\n\t\tselectedBlock.attributes\n\t);\n\tmatch.attributes = {\n\t\t...match.attributes,\n\t\t...retainedBlockAttributes,\n\t};\n};\n\n/**\n * By providing the selected blocks and pattern's blocks\n * find the matching blocks, transform them and return them.\n * If not all selected blocks are matched, return nothing.\n *\n * @param {WPBlock[]} selectedBlocks The selected blocks.\n * @param {WPBlock[]} patternBlocks  The pattern's blocks.\n * @return {WPBlock[]|void} The transformed pattern's blocks or undefined if not all selected blocks have been matched.\n */\nexport const getPatternTransformedBlocks = (\n\tselectedBlocks,\n\tpatternBlocks\n) => {\n\t// Clone Pattern's blocks to produce new clientIds and be able to mutate the matches.\n\tconst _patternBlocks = patternBlocks.map( ( block ) =>\n\t\tcloneBlock( block )\n\t);\n\t/**\n\t * Keep track of the consumed pattern blocks.\n\t * This is needed because we loop the selected blocks\n\t * and for example we may have selected two paragraphs and\n\t * the pattern's blocks could have more `paragraphs`.\n\t */\n\tconst consumedBlocks = new Set();\n\tfor ( const selectedBlock of selectedBlocks ) {\n\t\tlet isMatch = false;\n\t\tfor ( const patternBlock of _patternBlocks ) {\n\t\t\tconst match = getMatchingBlockByName(\n\t\t\t\tpatternBlock,\n\t\t\t\tselectedBlock.name,\n\t\t\t\tconsumedBlocks\n\t\t\t);\n\t\t\tif ( ! match ) continue;\n\t\t\tisMatch = true;\n\t\t\tconsumedBlocks.add( match.clientId );\n\t\t\t// We update (mutate) the matching pattern block.\n\t\t\ttransformMatchingBlock( match, selectedBlock );\n\t\t\t// No need to loop through other pattern's blocks.\n\t\t\tbreak;\n\t\t}\n\t\t// Bail eary if a selected block has not been matched.\n\t\tif ( ! isMatch ) return;\n\t}\n\treturn _patternBlocks;\n};\n\n/**\n * @typedef {WPBlockPattern & {transformedBlocks: WPBlock[]}} TransformedBlockPattern\n */\n\n/**\n * Custom hook that accepts patterns from state and the selected\n * blocks and tries to match these with the pattern's blocks.\n * If all selected blocks are matched with a Pattern's block,\n * we transform them by retaining block's attributes with `role:content`.\n * The transformed pattern's blocks are set to a new pattern\n * property `transformedBlocks`.\n *\n * @param {WPBlockPattern[]} patterns       Patterns from state.\n * @param {WPBlock[]}        selectedBlocks The currently selected blocks.\n * @return {TransformedBlockPattern[]} Returns the eligible matched patterns with all the selected blocks.\n */\nconst useTransformedPatterns = ( patterns, selectedBlocks ) => {\n\treturn useMemo(\n\t\t() =>\n\t\t\tpatterns.reduce( ( accumulator, _pattern ) => {\n\t\t\t\tconst transformedBlocks = getPatternTransformedBlocks(\n\t\t\t\t\tselectedBlocks,\n\t\t\t\t\t_pattern.blocks\n\t\t\t\t);\n\t\t\t\tif ( transformedBlocks ) {\n\t\t\t\t\taccumulator.push( {\n\t\t\t\t\t\t..._pattern,\n\t\t\t\t\t\ttransformedBlocks,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\treturn accumulator;\n\t\t\t}, [] ),\n\t\t[ patterns, selectedBlocks ]\n\t);\n};\n\nexport default useTransformedPatterns;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { useInstanceId } from '@wordpress/compose';\nimport { chevronRight } from '@wordpress/icons';\n\nimport {\n\tMenuGroup,\n\tMenuItem,\n\tPopover,\n\tVisuallyHidden,\n\t__unstableComposite as Composite,\n\t__unstableUseCompositeState as useCompositeState,\n\t__unstableCompositeItem as CompositeItem,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\nimport useTransformedPatterns from './use-transformed-patterns';\n\nfunction PatternTransformationsMenu( {\n\tblocks,\n\tpatterns: statePatterns,\n\tonSelect,\n} ) {\n\tconst [ showTransforms, setShowTransforms ] = useState( false );\n\tconst patterns = useTransformedPatterns( statePatterns, blocks );\n\tif ( ! patterns.length ) return null;\n\n\treturn (\n\t\t<MenuGroup className=\"block-editor-block-switcher__pattern__transforms__menugroup\">\n\t\t\t{ showTransforms && (\n\t\t\t\t<PreviewPatternsPopover\n\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<MenuItem\n\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tsetShowTransforms( ! showTransforms );\n\t\t\t\t} }\n\t\t\t\ticon={ chevronRight }\n\t\t\t>\n\t\t\t\t{ __( 'Patterns' ) }\n\t\t\t</MenuItem>\n\t\t</MenuGroup>\n\t);\n}\n\nfunction PreviewPatternsPopover( { patterns, onSelect } ) {\n\treturn (\n\t\t<div className=\"block-editor-block-switcher__popover__preview__parent\">\n\t\t\t<div className=\"block-editor-block-switcher__popover__preview__container\">\n\t\t\t\t<Popover\n\t\t\t\t\tclassName=\"block-editor-block-switcher__preview__popover\"\n\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"block-editor-block-switcher__preview\">\n\t\t\t\t\t\t<div className=\"block-editor-block-switcher__preview-title\">\n\t\t\t\t\t\t\t{ __( 'Preview' ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Popover>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction BlockPatternsList( { patterns, onSelect } ) {\n\tconst composite = useCompositeState();\n\treturn (\n\t\t<Composite\n\t\t\t{ ...composite }\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-block-switcher__preview-patterns-container\"\n\t\t\taria-label={ __( 'Patterns list' ) }\n\t\t>\n\t\t\t{ patterns.map( ( pattern ) => (\n\t\t\t\t<BlockPattern\n\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\tcomposite={ composite }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</Composite>\n\t);\n}\n\nfunction BlockPattern( { pattern, onSelect, composite } ) {\n\t// TODO check pattern/preview width...\n\tconst baseClassName =\n\t\t'block-editor-block-switcher__preview-patterns-container';\n\tconst descriptionId = useInstanceId(\n\t\tBlockPattern,\n\t\t`${ baseClassName }-list__item-description`\n\t);\n\treturn (\n\t\t<div className={ `${ baseClassName }-list__list-item` }>\n\t\t\t<CompositeItem\n\t\t\t\trole=\"option\"\n\t\t\t\tas=\"div\"\n\t\t\t\t{ ...composite }\n\t\t\t\taria-label={ pattern.title }\n\t\t\t\taria-describedby={\n\t\t\t\t\tpattern.description ? descriptionId : undefined\n\t\t\t\t}\n\t\t\t\tclassName={ `${ baseClassName }-list__item` }\n\t\t\t\tonClick={ () => onSelect( pattern.transformedBlocks ) }\n\t\t\t>\n\t\t\t\t<BlockPreview\n\t\t\t\t\tblocks={ pattern.transformedBlocks }\n\t\t\t\t\tviewportWidth={ pattern.viewportWidth || 500 }\n\t\t\t\t/>\n\t\t\t\t<div className={ `${ baseClassName }-list__item-title` }>\n\t\t\t\t\t{ pattern.title }\n\t\t\t\t</div>\n\t\t\t</CompositeItem>\n\t\t\t{ !! pattern.description && (\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ pattern.description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default PatternTransformationsMenu;\n","/**\n * WordPress dependencies\n */\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport {\n\tDropdownMenu,\n\tToolbarButton,\n\tToolbarGroup,\n\tToolbarItem,\n} from '@wordpress/components';\nimport {\n\tswitchToBlockType,\n\tstore as blocksStore,\n\tisReusableBlock,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { copy } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport BlockIcon from '../block-icon';\nimport BlockTransformationsMenu from './block-transformations-menu';\nimport { useBlockVariationTransforms } from './block-variation-transformations';\nimport BlockStylesMenu from './block-styles-menu';\nimport PatternTransformationsMenu from './pattern-transformations-menu';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\n\nexport const BlockSwitcherDropdownMenu = ( { clientIds, blocks } ) => {\n\tconst { replaceBlocks, multiSelect, updateBlockAttributes } =\n\t\tuseDispatch( blockEditorStore );\n\tconst blockInformation = useBlockDisplayInformation( blocks[ 0 ].clientId );\n\tconst {\n\t\tpossibleBlockTransformations,\n\t\tcanRemove,\n\t\thasBlockStyles,\n\t\ticon,\n\t\tpatterns,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockTransformItems,\n\t\t\t\t__experimentalGetPatternTransformItems,\n\t\t\t\tcanRemoveBlocks,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { getBlockStyles, getBlockType } = select( blocksStore );\n\t\t\tconst rootClientId = getBlockRootClientId(\n\t\t\t\tArray.isArray( clientIds ) ? clientIds[ 0 ] : clientIds\n\t\t\t);\n\t\t\tconst [ { name: firstBlockName } ] = blocks;\n\t\t\tconst _isSingleBlockSelected = blocks.length === 1;\n\t\t\tconst styles =\n\t\t\t\t_isSingleBlockSelected && getBlockStyles( firstBlockName );\n\t\t\tlet _icon;\n\t\t\tif ( _isSingleBlockSelected ) {\n\t\t\t\t_icon = blockInformation?.icon; // Take into account active block variations.\n\t\t\t} else {\n\t\t\t\tconst isSelectionOfSameType =\n\t\t\t\t\tnew Set( blocks.map( ( { name } ) => name ) ).size === 1;\n\t\t\t\t// When selection consists of blocks of multiple types, display an\n\t\t\t\t// appropriate icon to communicate the non-uniformity.\n\t\t\t\t_icon = isSelectionOfSameType\n\t\t\t\t\t? getBlockType( firstBlockName )?.icon\n\t\t\t\t\t: copy;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tpossibleBlockTransformations: getBlockTransformItems(\n\t\t\t\t\tblocks,\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t\tcanRemove: canRemoveBlocks( clientIds, rootClientId ),\n\t\t\t\thasBlockStyles: !! styles?.length,\n\t\t\t\ticon: _icon,\n\t\t\t\tpatterns: __experimentalGetPatternTransformItems(\n\t\t\t\t\tblocks,\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientIds, blocks, blockInformation?.icon ]\n\t);\n\n\tconst blockVariationTransformations = useBlockVariationTransforms( {\n\t\tclientIds,\n\t\tblocks,\n\t} );\n\n\tconst blockTitle = useBlockDisplayTitle( {\n\t\tclientId: Array.isArray( clientIds ) ? clientIds[ 0 ] : clientIds,\n\t\tmaximumLength: 35,\n\t} );\n\tconst isReusable = blocks.length === 1 && isReusableBlock( blocks[ 0 ] );\n\tconst isTemplate = blocks.length === 1 && isTemplatePart( blocks[ 0 ] );\n\n\tfunction selectForMultipleBlocks( insertedBlocks ) {\n\t\tif ( insertedBlocks.length > 1 ) {\n\t\t\tmultiSelect(\n\t\t\t\tinsertedBlocks[ 0 ].clientId,\n\t\t\t\tinsertedBlocks[ insertedBlocks.length - 1 ].clientId\n\t\t\t);\n\t\t}\n\t}\n\n\t// Simple block tranformation based on the `Block Transforms` API.\n\tfunction onBlockTransform( name ) {\n\t\tconst newBlocks = switchToBlockType( blocks, name );\n\t\treplaceBlocks( clientIds, newBlocks );\n\t\tselectForMultipleBlocks( newBlocks );\n\t}\n\n\tfunction onBlockVariationTransform( name ) {\n\t\tupdateBlockAttributes( blocks[ 0 ].clientId, {\n\t\t\t...blockVariationTransformations.find(\n\t\t\t\t( { name: variationName } ) => variationName === name\n\t\t\t).attributes,\n\t\t} );\n\t}\n\n\t// Pattern transformation through the `Patterns` API.\n\tfunction onPatternTransform( transformedBlocks ) {\n\t\treplaceBlocks( clientIds, transformedBlocks );\n\t\tselectForMultipleBlocks( transformedBlocks );\n\t}\n\n\t/**\n\t * The `isTemplate` check is a stopgap solution here.\n\t * Ideally, the Transforms API should handle this\n\t * by allowing to exclude blocks from wildcard transformations.\n\t */\n\tconst hasPossibleBlockTransformations =\n\t\t!! possibleBlockTransformations.length && canRemove && ! isTemplate;\n\tconst hasPossibleBlockVariationTransformations =\n\t\t!! blockVariationTransformations?.length;\n\tconst hasPatternTransformation = !! patterns?.length && canRemove;\n\tif (\n\t\t! hasBlockStyles &&\n\t\t! hasPossibleBlockTransformations &&\n\t\t! hasPossibleBlockVariationTransformations\n\t) {\n\t\treturn (\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tdisabled\n\t\t\t\t\tclassName=\"block-editor-block-switcher__no-switcher-icon\"\n\t\t\t\t\ttitle={ blockTitle }\n\t\t\t\t\ticon={\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<BlockIcon icon={ icon } showColors />\n\t\t\t\t\t\t\t{ ( isReusable || isTemplate ) && (\n\t\t\t\t\t\t\t\t<span className=\"block-editor-block-switcher__toggle-text\">\n\t\t\t\t\t\t\t\t\t{ blockTitle }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t);\n\t}\n\n\tconst blockSwitcherLabel = blockTitle;\n\n\tconst blockSwitcherDescription =\n\t\t1 === blocks.length\n\t\t\t? sprintf(\n\t\t\t\t\t/* translators: %s: block title. */\n\t\t\t\t\t__( '%s: Change block type or style' ),\n\t\t\t\t\tblockTitle\n\t\t\t  )\n\t\t\t: sprintf(\n\t\t\t\t\t/* translators: %d: number of blocks. */\n\t\t\t\t\t_n(\n\t\t\t\t\t\t'Change type of %d block',\n\t\t\t\t\t\t'Change type of %d blocks',\n\t\t\t\t\t\tblocks.length\n\t\t\t\t\t),\n\t\t\t\t\tblocks.length\n\t\t\t  );\n\n\tconst hasBlockOrBlockVariationTransforms =\n\t\thasPossibleBlockTransformations ||\n\t\thasPossibleBlockVariationTransformations;\n\tconst showDropDown =\n\t\thasBlockStyles ||\n\t\thasBlockOrBlockVariationTransforms ||\n\t\thasPatternTransformation;\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarItem>\n\t\t\t\t{ ( toggleProps ) => (\n\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\tclassName=\"block-editor-block-switcher\"\n\t\t\t\t\t\tlabel={ blockSwitcherLabel }\n\t\t\t\t\t\tpopoverProps={ {\n\t\t\t\t\t\t\tposition: 'bottom right',\n\t\t\t\t\t\t\tvariant: 'toolbar',\n\t\t\t\t\t\t\tclassName: 'block-editor-block-switcher__popover',\n\t\t\t\t\t\t} }\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<BlockIcon\n\t\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-block-switcher__toggle\"\n\t\t\t\t\t\t\t\t\tshowColors\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{ ( isReusable || isTemplate ) && (\n\t\t\t\t\t\t\t\t\t<span className=\"block-editor-block-switcher__toggle-text\">\n\t\t\t\t\t\t\t\t\t\t{ blockTitle }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoggleProps={ {\n\t\t\t\t\t\t\tdescribedBy: blockSwitcherDescription,\n\t\t\t\t\t\t\t...toggleProps,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tmenuProps={ { orientation: 'both' } }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ( { onClose } ) =>\n\t\t\t\t\t\t\tshowDropDown && (\n\t\t\t\t\t\t\t\t<div className=\"block-editor-block-switcher__container\">\n\t\t\t\t\t\t\t\t\t{ hasPatternTransformation && (\n\t\t\t\t\t\t\t\t\t\t<PatternTransformationsMenu\n\t\t\t\t\t\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\t\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\t\t\t\t\t\t\tonSelect={ (\n\t\t\t\t\t\t\t\t\t\t\t\ttransformedBlocks\n\t\t\t\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\t\t\t\tonPatternTransform(\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransformedBlocks\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ hasBlockOrBlockVariationTransforms && (\n\t\t\t\t\t\t\t\t\t\t<BlockTransformationsMenu\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-block-switcher__transforms__menugroup\"\n\t\t\t\t\t\t\t\t\t\t\tpossibleBlockTransformations={\n\t\t\t\t\t\t\t\t\t\t\t\tpossibleBlockTransformations\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tpossibleBlockVariationTransformations={\n\t\t\t\t\t\t\t\t\t\t\t\tblockVariationTransformations\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\t\t\t\t\t\tonSelect={ ( name ) => {\n\t\t\t\t\t\t\t\t\t\t\t\tonBlockTransform( name );\n\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\tonSelectVariation={ ( name ) => {\n\t\t\t\t\t\t\t\t\t\t\t\tonBlockVariationTransform(\n\t\t\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ hasBlockStyles && (\n\t\t\t\t\t\t\t\t\t\t<BlockStylesMenu\n\t\t\t\t\t\t\t\t\t\t\thoveredBlock={ blocks[ 0 ] }\n\t\t\t\t\t\t\t\t\t\t\tonSwitch={ onClose }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</DropdownMenu>\n\t\t\t\t) }\n\t\t\t</ToolbarItem>\n\t\t</ToolbarGroup>\n\t);\n};\n\nexport const BlockSwitcher = ( { clientIds } ) => {\n\tconst blocks = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getBlocksByClientId( clientIds ),\n\t\t[ clientIds ]\n\t);\n\n\tif ( ! blocks.length || blocks.some( ( block ) => ! block ) ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<BlockSwitcherDropdownMenu clientIds={ clientIds } blocks={ blocks } />\n\t);\n};\n\nexport default BlockSwitcher;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst { Fill: __unstableBlockToolbarLastItem, Slot } = createSlotFill(\n\t'__unstableBlockToolbarLastItem'\n);\n\n__unstableBlockToolbarLastItem.Slot = Slot;\n\nexport default __unstableBlockToolbarLastItem;\n","/**\n * WordPress dependencies\n */\nimport { getFilesFromDataTransfer } from '@wordpress/dom';\n\nexport function getPasteEventData( { clipboardData } ) {\n\tlet plainText = '';\n\tlet html = '';\n\n\t// IE11 only supports `Text` as an argument for `getData` and will\n\t// otherwise throw an invalid argument error, so we try the standard\n\t// arguments first, then fallback to `Text` if they fail.\n\ttry {\n\t\tplainText = clipboardData.getData( 'text/plain' );\n\t\thtml = clipboardData.getData( 'text/html' );\n\t} catch ( error1 ) {\n\t\ttry {\n\t\t\thtml = clipboardData.getData( 'Text' );\n\t\t} catch ( error2 ) {\n\t\t\t// Some browsers like UC Browser paste plain text by default and\n\t\t\t// don't support clipboardData at all, so allow default\n\t\t\t// behaviour.\n\t\t\treturn;\n\t\t}\n\t}\n\n\tconst files = getFilesFromDataTransfer( clipboardData );\n\n\tif (\n\t\tfiles.length &&\n\t\t! shouldDismissPastedFiles( files, html, plainText )\n\t) {\n\t\treturn { files };\n\t}\n\n\treturn { html, plainText, files: [] };\n}\n\n/**\n * Given a collection of DataTransfer files and HTML and plain text strings,\n * determine whether the files are to be dismissed in favor of the HTML.\n *\n * Certain office-type programs, like Microsoft Word or Apple Numbers,\n * will, upon copy, generate a screenshot of the content being copied and\n * attach it to the clipboard alongside the actual rich text that the user\n * sought to copy. In those cases, we should let Gutenberg handle the rich text\n * content and not the screenshot, since this allows Gutenberg to insert\n * meaningful blocks, like paragraphs, lists or even tables.\n *\n * @param {File[]} files File objects obtained from a paste event\n * @param {string} html  HTML content obtained from a paste event\n * @return {boolean}     True if the files should be dismissed\n */\nexport function shouldDismissPastedFiles( files, html /*, plainText */ ) {\n\t// The question is only relevant when there is actual HTML content and when\n\t// there is exactly one image file.\n\tif (\n\t\thtml &&\n\t\tfiles?.length === 1 &&\n\t\tfiles[ 0 ].type.indexOf( 'image/' ) === 0\n\t) {\n\t\t// A single <img> tag found in the HTML source suggests that the\n\t\t// content being pasted revolves around an image. Sometimes there are\n\t\t// other elements found, like <figure>, but we assume that the user's\n\t\t// intention is to paste the actual image file.\n\t\tconst IMAGE_TAG = /<\\s*img\\b/gi;\n\t\tif ( html.match( IMAGE_TAG )?.length !== 1 ) return true;\n\n\t\t// Even when there is exactly one <img> tag in the HTML payload, we\n\t\t// choose to weed out local images, i.e. those whose source starts with\n\t\t// \"file://\". These payloads occur in specific configurations, such as\n\t\t// when copying an entire document from Microsoft Word, that contains\n\t\t// text and exactly one image, and pasting that content using Google\n\t\t// Chrome.\n\t\tconst IMG_WITH_LOCAL_SRC = /<\\s*img\\b[^>]*\\bsrc=\"file:\\/\\//i;\n\t\tif ( html.match( IMG_WITH_LOCAL_SRC ) ) return true;\n\t}\n\n\treturn false;\n}\n","/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport {\n\tserialize,\n\tpasteHandler,\n\tstore as blocksStore,\n\tcreateBlock,\n\tfindTransform,\n\tgetBlockTransforms,\n} from '@wordpress/blocks';\nimport {\n\tdocumentHasSelection,\n\tdocumentHasUncollapsedSelection,\n\t__unstableStripHTML as stripHTML,\n} from '@wordpress/dom';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { getPasteEventData } from '../../utils/pasting';\nimport { store as blockEditorStore } from '../../store';\n\nexport function useNotifyCopy() {\n\tconst { getBlockName } = useSelect( blockEditorStore );\n\tconst { getBlockType } = useSelect( blocksStore );\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\n\n\treturn useCallback( ( eventType, selectedBlockClientIds ) => {\n\t\tlet notice = '';\n\t\tif ( selectedBlockClientIds.length === 1 ) {\n\t\t\tconst clientId = selectedBlockClientIds[ 0 ];\n\t\t\tconst title = getBlockType( getBlockName( clientId ) )?.title;\n\t\t\tnotice =\n\t\t\t\teventType === 'copy'\n\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t// Translators: Name of the block being copied, e.g. \"Paragraph\".\n\t\t\t\t\t\t\t__( 'Copied \"%s\" to clipboard.' ),\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t  )\n\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t// Translators: Name of the block being cut, e.g. \"Paragraph\".\n\t\t\t\t\t\t\t__( 'Moved \"%s\" to clipboard.' ),\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t  );\n\t\t} else {\n\t\t\tnotice =\n\t\t\t\teventType === 'copy'\n\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t// Translators: %d: Number of blocks being copied.\n\t\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t\t'Copied %d block to clipboard.',\n\t\t\t\t\t\t\t\t'Copied %d blocks to clipboard.',\n\t\t\t\t\t\t\t\tselectedBlockClientIds.length\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tselectedBlockClientIds.length\n\t\t\t\t\t  )\n\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t// Translators: %d: Number of blocks being cut.\n\t\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t\t'Moved %d block to clipboard.',\n\t\t\t\t\t\t\t\t'Moved %d blocks to clipboard.',\n\t\t\t\t\t\t\t\tselectedBlockClientIds.length\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tselectedBlockClientIds.length\n\t\t\t\t\t  );\n\t\t}\n\t\tcreateSuccessNotice( notice, {\n\t\t\ttype: 'snackbar',\n\t\t} );\n\t}, [] );\n}\n\nexport function useClipboardHandler() {\n\tconst {\n\t\tgetBlocksByClientId,\n\t\tgetSelectedBlockClientIds,\n\t\thasMultiSelection,\n\t\tgetSettings,\n\t\t__unstableIsFullySelected,\n\t\t__unstableIsSelectionCollapsed,\n\t\t__unstableIsSelectionMergeable,\n\t\t__unstableGetSelectedBlocksWithPartialSelection,\n\t\tcanInsertBlockType,\n\t} = useSelect( blockEditorStore );\n\tconst {\n\t\tflashBlock,\n\t\tremoveBlocks,\n\t\treplaceBlocks,\n\t\t__unstableDeleteSelection,\n\t\t__unstableExpandSelection,\n\t\tinsertBlocks,\n\t} = useDispatch( blockEditorStore );\n\tconst notifyCopy = useNotifyCopy();\n\n\treturn useRefEffect( ( node ) => {\n\t\tfunction handler( event ) {\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\n\t\t\tif ( selectedBlockClientIds.length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Always handle multiple selected blocks.\n\t\t\tif ( ! hasMultiSelection() ) {\n\t\t\t\tconst { target } = event;\n\t\t\t\tconst { ownerDocument } = target;\n\t\t\t\t// If copying, only consider actual text selection as selection.\n\t\t\t\t// Otherwise, any focus on an input field is considered.\n\t\t\t\tconst hasSelection =\n\t\t\t\t\tevent.type === 'copy' || event.type === 'cut'\n\t\t\t\t\t\t? documentHasUncollapsedSelection( ownerDocument )\n\t\t\t\t\t\t: documentHasSelection( ownerDocument );\n\n\t\t\t\t// Let native copy behaviour take over in input fields.\n\t\t\t\tif ( hasSelection ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! node.contains( event.target.ownerDocument.activeElement ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst eventDefaultPrevented = event.defaultPrevented;\n\t\t\tevent.preventDefault();\n\n\t\t\tconst isSelectionMergeable = __unstableIsSelectionMergeable();\n\t\t\tconst shouldHandleWholeBlocks =\n\t\t\t\t__unstableIsSelectionCollapsed() || __unstableIsFullySelected();\n\t\t\tconst expandSelectionIsNeeded =\n\t\t\t\t! shouldHandleWholeBlocks && ! isSelectionMergeable;\n\t\t\tif ( event.type === 'copy' || event.type === 'cut' ) {\n\t\t\t\tif ( selectedBlockClientIds.length === 1 ) {\n\t\t\t\t\tflashBlock( selectedBlockClientIds[ 0 ] );\n\t\t\t\t}\n\t\t\t\t// If we have a partial selection that is not mergeable, just\n\t\t\t\t// expand the selection to the whole blocks.\n\t\t\t\tif ( expandSelectionIsNeeded ) {\n\t\t\t\t\t__unstableExpandSelection();\n\t\t\t\t} else {\n\t\t\t\t\tnotifyCopy( event.type, selectedBlockClientIds );\n\t\t\t\t\tlet blocks;\n\t\t\t\t\t// Check if we have partial selection.\n\t\t\t\t\tif ( shouldHandleWholeBlocks ) {\n\t\t\t\t\t\tblocks = getBlocksByClientId( selectedBlockClientIds );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst [ head, tail ] =\n\t\t\t\t\t\t\t__unstableGetSelectedBlocksWithPartialSelection();\n\t\t\t\t\t\tconst inBetweenBlocks = getBlocksByClientId(\n\t\t\t\t\t\t\tselectedBlockClientIds.slice(\n\t\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t\tselectedBlockClientIds.length - 1\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tblocks = [ head, ...inBetweenBlocks, tail ];\n\t\t\t\t\t}\n\n\t\t\t\t\tconst wrapperBlockName = event.clipboardData.getData(\n\t\t\t\t\t\t'__unstableWrapperBlockName'\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( wrapperBlockName ) {\n\t\t\t\t\t\tblocks = createBlock(\n\t\t\t\t\t\t\twrapperBlockName,\n\t\t\t\t\t\t\tJSON.parse(\n\t\t\t\t\t\t\t\tevent.clipboardData.getData(\n\t\t\t\t\t\t\t\t\t'__unstableWrapperBlockAttributes'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tblocks\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst serialized = serialize( blocks );\n\n\t\t\t\t\tevent.clipboardData.setData(\n\t\t\t\t\t\t'text/plain',\n\t\t\t\t\t\ttoPlainText( serialized )\n\t\t\t\t\t);\n\t\t\t\t\tevent.clipboardData.setData( 'text/html', serialized );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( event.type === 'cut' ) {\n\t\t\t\t// We need to also check if at the start we needed to\n\t\t\t\t// expand the selection, as in this point we might have\n\t\t\t\t// programmatically fully selected the blocks above.\n\t\t\t\tif ( shouldHandleWholeBlocks && ! expandSelectionIsNeeded ) {\n\t\t\t\t\tremoveBlocks( selectedBlockClientIds );\n\t\t\t\t} else {\n\t\t\t\t\t__unstableDeleteSelection();\n\t\t\t\t}\n\t\t\t} else if ( event.type === 'paste' ) {\n\t\t\t\tif ( eventDefaultPrevented ) {\n\t\t\t\t\t// This was likely already handled in rich-text/use-paste-handler.js.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst {\n\t\t\t\t\t__experimentalCanUserUseUnfilteredHTML:\n\t\t\t\t\t\tcanUserUseUnfilteredHTML,\n\t\t\t\t} = getSettings();\n\t\t\t\tconst { plainText, html, files } = getPasteEventData( event );\n\t\t\t\tlet blocks = [];\n\n\t\t\t\tif ( files.length ) {\n\t\t\t\t\tconst fromTransforms = getBlockTransforms( 'from' );\n\t\t\t\t\tblocks = files\n\t\t\t\t\t\t.reduce( ( accumulator, file ) => {\n\t\t\t\t\t\t\tconst transformation = findTransform(\n\t\t\t\t\t\t\t\tfromTransforms,\n\t\t\t\t\t\t\t\t( transform ) =>\n\t\t\t\t\t\t\t\t\ttransform.type === 'files' &&\n\t\t\t\t\t\t\t\t\ttransform.isMatch( [ file ] )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif ( transformation ) {\n\t\t\t\t\t\t\t\taccumulator.push(\n\t\t\t\t\t\t\t\t\ttransformation.transform( [ file ] )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn accumulator;\n\t\t\t\t\t\t}, [] )\n\t\t\t\t\t\t.flat();\n\t\t\t\t} else {\n\t\t\t\t\tblocks = pasteHandler( {\n\t\t\t\t\t\tHTML: html,\n\t\t\t\t\t\tplainText,\n\t\t\t\t\t\tmode: 'BLOCKS',\n\t\t\t\t\t\tcanUserUseUnfilteredHTML,\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tif ( selectedBlockClientIds.length === 1 ) {\n\t\t\t\t\tconst [ selectedBlockClientId ] = selectedBlockClientIds;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tblocks.every( ( block ) =>\n\t\t\t\t\t\t\tcanInsertBlockType(\n\t\t\t\t\t\t\t\tblock.name,\n\t\t\t\t\t\t\t\tselectedBlockClientId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tinsertBlocks(\n\t\t\t\t\t\t\tblocks,\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\tselectedBlockClientId\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treplaceBlocks(\n\t\t\t\t\tselectedBlockClientIds,\n\t\t\t\t\tblocks,\n\t\t\t\t\tblocks.length - 1,\n\t\t\t\t\t-1\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tnode.ownerDocument.addEventListener( 'copy', handler );\n\t\tnode.ownerDocument.addEventListener( 'cut', handler );\n\t\tnode.ownerDocument.addEventListener( 'paste', handler );\n\n\t\treturn () => {\n\t\t\tnode.ownerDocument.removeEventListener( 'copy', handler );\n\t\t\tnode.ownerDocument.removeEventListener( 'cut', handler );\n\t\t\tnode.ownerDocument.removeEventListener( 'paste', handler );\n\t\t};\n\t}, [] );\n}\n\nfunction CopyHandler( { children } ) {\n\treturn <div ref={ useClipboardHandler() }>{ children }</div>;\n}\n\n/**\n * Given a string of HTML representing serialized blocks, returns the plain\n * text extracted after stripping the HTML of any tags and fixing line breaks.\n *\n * @param {string} html Serialized blocks.\n * @return {string} The plain-text content with any html removed.\n */\nfunction toPlainText( html ) {\n\t// Manually handle BR tags as line breaks prior to `stripHTML` call\n\thtml = html.replace( /<br>/g, '\\n' );\n\n\tconst plainText = stripHTML( html ).trim();\n\n\t// Merge any consecutive line breaks\n\treturn plainText.replace( /\\n\\n+/g, '\\n\\n' );\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/copy-handler/README.md\n */\nexport default CopyHandler;\n","/**\n * WordPress dependencies\n */\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { Platform } from '@wordpress/element';\n\nconst ALIGN_SUPPORT_KEY = 'align';\nconst ALIGN_WIDE_SUPPORT_KEY = 'alignWide';\nconst BORDER_SUPPORT_KEY = '__experimentalBorder';\nconst COLOR_SUPPORT_KEY = 'color';\nconst CUSTOM_CLASS_NAME_SUPPORT_KEY = 'customClassName';\nconst FONT_FAMILY_SUPPORT_KEY = 'typography.__experimentalFontFamily';\nconst FONT_SIZE_SUPPORT_KEY = 'typography.fontSize';\nconst LINE_HEIGHT_SUPPORT_KEY = 'typography.lineHeight';\n/**\n * Key within block settings' support array indicating support for font style.\n */\nconst FONT_STYLE_SUPPORT_KEY = 'typography.__experimentalFontStyle';\n/**\n * Key within block settings' support array indicating support for font weight.\n */\nconst FONT_WEIGHT_SUPPORT_KEY = 'typography.__experimentalFontWeight';\n/**\n * Key within block settings' supports array indicating support for text\n * columns e.g. settings found in `block.json`.\n */\nconst TEXT_COLUMNS_SUPPORT_KEY = 'typography.textColumns';\n/**\n * Key within block settings' supports array indicating support for text\n * decorations e.g. settings found in `block.json`.\n */\nconst TEXT_DECORATION_SUPPORT_KEY = 'typography.__experimentalTextDecoration';\n/**\n * Key within block settings' supports array indicating support for text\n * transforms e.g. settings found in `block.json`.\n */\nconst TEXT_TRANSFORM_SUPPORT_KEY = 'typography.__experimentalTextTransform';\n/**\n * Key within block settings' supports array indicating support for letter-spacing\n * e.g. settings found in `block.json`.\n */\nconst LETTER_SPACING_SUPPORT_KEY = 'typography.__experimentalLetterSpacing';\nconst LAYOUT_SUPPORT_KEY = '__experimentalLayout';\nconst TYPOGRAPHY_SUPPORT_KEYS = [\n\tLINE_HEIGHT_SUPPORT_KEY,\n\tFONT_SIZE_SUPPORT_KEY,\n\tFONT_STYLE_SUPPORT_KEY,\n\tFONT_WEIGHT_SUPPORT_KEY,\n\tFONT_FAMILY_SUPPORT_KEY,\n\tTEXT_COLUMNS_SUPPORT_KEY,\n\tTEXT_DECORATION_SUPPORT_KEY,\n\tTEXT_TRANSFORM_SUPPORT_KEY,\n\tLETTER_SPACING_SUPPORT_KEY,\n];\nconst SPACING_SUPPORT_KEY = 'spacing';\nconst styleSupportKeys = [\n\t...TYPOGRAPHY_SUPPORT_KEYS,\n\tBORDER_SUPPORT_KEY,\n\tCOLOR_SUPPORT_KEY,\n\tSPACING_SUPPORT_KEY,\n];\n\n/**\n * Returns true if the block defines support for align.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasAlignSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, ALIGN_SUPPORT_KEY );\n\n/**\n * Returns the block support value for align, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getAlignSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, ALIGN_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for align wide.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasAlignWideSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, ALIGN_WIDE_SUPPORT_KEY );\n\n/**\n * Returns the block support value for align wide, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getAlignWideSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, ALIGN_WIDE_SUPPORT_KEY );\n\n/**\n * Determine whether there is block support for border properties.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @param {string}        feature    Border feature to check support for.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasBorderSupport( nameOrType, feature = 'any' ) {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst support = getBlockSupport( nameOrType, BORDER_SUPPORT_KEY );\n\n\tif ( support === true ) {\n\t\treturn true;\n\t}\n\n\tif ( feature === 'any' ) {\n\t\treturn !! (\n\t\t\tsupport?.color ||\n\t\t\tsupport?.radius ||\n\t\t\tsupport?.width ||\n\t\t\tsupport?.style\n\t\t);\n\t}\n\n\treturn !! support?.[ feature ];\n}\n\n/**\n * Get block support for border properties.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @param {string}        feature    Border feature to get.\n *\n * @return {unknown} The block support.\n */\nexport const getBorderSupport = ( nameOrType, feature ) =>\n\tgetBlockSupport( nameOrType, [ BORDER_SUPPORT_KEY, feature ] );\n\n/**\n * Returns true if the block defines support for color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasColorSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\treturn (\n\t\tcolorSupport &&\n\t\t( colorSupport.link === true ||\n\t\t\tcolorSupport.gradient === true ||\n\t\t\tcolorSupport.background !== false ||\n\t\t\tcolorSupport.text !== false )\n\t);\n};\n\n/**\n * Returns true if the block defines support for link color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasLinkColorSupport = ( nameOrType ) => {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.link\n\t);\n};\n\n/**\n * Returns true if the block defines support for gradient color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasGradientSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.gradients\n\t);\n};\n\n/**\n * Returns true if the block defines support for background color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasBackgroundColorSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.background !== false;\n};\n\n/**\n * Returns true if the block defines support for background color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasTextColorSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.text !== false;\n};\n\n/**\n * Get block support for color properties.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @param {string}        feature    Color feature to get.\n *\n * @return {unknown} The block support.\n */\nexport const getColorSupport = ( nameOrType, feature ) =>\n\tgetBlockSupport( nameOrType, [ COLOR_SUPPORT_KEY, feature ] );\n\n/**\n * Returns true if the block defines support for custom class name.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasCustomClassNameSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, CUSTOM_CLASS_NAME_SUPPORT_KEY, true );\n\n/**\n * Returns the block support value for custom class name, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getCustomClassNameSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, CUSTOM_CLASS_NAME_SUPPORT_KEY, true );\n\n/**\n * Returns true if the block defines support for font family.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasFontFamilySupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, FONT_FAMILY_SUPPORT_KEY );\n\n/**\n * Returns the block support value for font family, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getFontFamilySupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, FONT_FAMILY_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for font size.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasFontSizeSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, FONT_SIZE_SUPPORT_KEY );\n\n/**\n * Returns the block support value for font size, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getFontSizeSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, FONT_SIZE_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for layout.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasLayoutSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, LAYOUT_SUPPORT_KEY );\n\n/**\n * Returns the block support value for layout, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getLayoutSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, LAYOUT_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for style.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasStyleSupport = ( nameOrType ) =>\n\tstyleSupportKeys.some( ( key ) => hasBlockSupport( nameOrType, key ) );\n","/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport { getBlockType, parse } from '@wordpress/blocks';\nimport { useDispatch, useRegistry } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport {\n\thasAlignSupport,\n\thasBorderSupport,\n\thasBackgroundColorSupport,\n\thasTextColorSupport,\n\thasGradientSupport,\n\thasCustomClassNameSupport,\n\thasFontFamilySupport,\n\thasFontSizeSupport,\n\thasLayoutSupport,\n\thasStyleSupport,\n} from '../../hooks/supports';\n\n/**\n * Determine if the copied text looks like serialized blocks or not.\n * Since plain text will always get parsed into a freeform block,\n * we check that if the parsed blocks is anything other than that.\n *\n * @param {string} text The copied text.\n * @return {boolean} True if the text looks like serialized blocks, false otherwise.\n */\nfunction hasSerializedBlocks( text ) {\n\ttry {\n\t\tconst blocks = parse( text, {\n\t\t\t__unstableSkipMigrationLogs: true,\n\t\t\t__unstableSkipAutop: true,\n\t\t} );\n\t\tif ( blocks.length === 1 && blocks[ 0 ].name === 'core/freeform' ) {\n\t\t\t// It's likely that the text is just plain text and not serialized blocks.\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} catch ( err ) {\n\t\t// Parsing error, the text is not serialized blocks.\n\t\t// (Even though that it technically won't happen)\n\t\treturn false;\n\t}\n}\n\n/**\n * Style attributes are attributes being added in `block-editor/src/hooks/*`.\n * (Except for some unrelated to style like `anchor` or `settings`.)\n * They generally represent the default block supports.\n */\nconst STYLE_ATTRIBUTES = {\n\talign: hasAlignSupport,\n\tborderColor: ( nameOrType ) => hasBorderSupport( nameOrType, 'color' ),\n\tbackgroundColor: hasBackgroundColorSupport,\n\ttextColor: hasTextColorSupport,\n\tgradient: hasGradientSupport,\n\tclassName: hasCustomClassNameSupport,\n\tfontFamily: hasFontFamilySupport,\n\tfontSize: hasFontSizeSupport,\n\tlayout: hasLayoutSupport,\n\tstyle: hasStyleSupport,\n};\n\n/**\n * Get the \"style attributes\" from a given block to a target block.\n *\n * @param {WPBlock} sourceBlock The source block.\n * @param {WPBlock} targetBlock The target block.\n * @return {Object} the filtered attributes object.\n */\nfunction getStyleAttributes( sourceBlock, targetBlock ) {\n\treturn Object.entries( STYLE_ATTRIBUTES ).reduce(\n\t\t( attributes, [ attributeKey, hasSupport ] ) => {\n\t\t\t// Only apply the attribute if both blocks support it.\n\t\t\tif (\n\t\t\t\thasSupport( sourceBlock.name ) &&\n\t\t\t\thasSupport( targetBlock.name )\n\t\t\t) {\n\t\t\t\t// Override attributes that are not present in the block to their defaults.\n\t\t\t\tattributes[ attributeKey ] =\n\t\t\t\t\tsourceBlock.attributes[ attributeKey ];\n\t\t\t}\n\t\t\treturn attributes;\n\t\t},\n\t\t{}\n\t);\n}\n\n/**\n * Update the target blocks with style attributes recursively.\n *\n * @param {WPBlock[]} targetBlocks          The target blocks to be updated.\n * @param {WPBlock[]} sourceBlocks          The source blocks to get th style attributes from.\n * @param {Function}  updateBlockAttributes The function to update the attributes.\n */\nfunction recursivelyUpdateBlockAttributes(\n\ttargetBlocks,\n\tsourceBlocks,\n\tupdateBlockAttributes\n) {\n\tfor (\n\t\tlet index = 0;\n\t\tindex < Math.min( sourceBlocks.length, targetBlocks.length );\n\t\tindex += 1\n\t) {\n\t\tupdateBlockAttributes(\n\t\t\ttargetBlocks[ index ].clientId,\n\t\t\tgetStyleAttributes( sourceBlocks[ index ], targetBlocks[ index ] )\n\t\t);\n\n\t\trecursivelyUpdateBlockAttributes(\n\t\t\ttargetBlocks[ index ].innerBlocks,\n\t\t\tsourceBlocks[ index ].innerBlocks,\n\t\t\tupdateBlockAttributes\n\t\t);\n\t}\n}\n\n/**\n * A hook to return a pasteStyles event function for handling pasting styles to blocks.\n *\n * @return {Function} A function to update the styles to the blocks.\n */\nexport default function usePasteStyles() {\n\tconst registry = useRegistry();\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst { createSuccessNotice, createWarningNotice, createErrorNotice } =\n\t\tuseDispatch( noticesStore );\n\n\treturn useCallback(\n\t\tasync ( targetBlocks ) => {\n\t\t\tlet html = '';\n\t\t\ttry {\n\t\t\t\t// `http:` sites won't have the clipboard property on navigator.\n\t\t\t\t// (with the exception of localhost.)\n\t\t\t\tif ( ! window.navigator.clipboard ) {\n\t\t\t\t\tcreateErrorNotice(\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Unable to paste styles. This feature is only available on secure (https) sites in supporting browsers.'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{ type: 'snackbar' }\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\thtml = await window.navigator.clipboard.readText();\n\t\t\t} catch ( error ) {\n\t\t\t\t// Possibly the permission is denied.\n\t\t\t\tcreateErrorNotice(\n\t\t\t\t\t__(\n\t\t\t\t\t\t'Unable to paste styles. Please allow browser clipboard permissions before continuing.'\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Abort if the copied text is empty or doesn't look like serialized blocks.\n\t\t\tif ( ! html || ! hasSerializedBlocks( html ) ) {\n\t\t\t\tcreateWarningNotice(\n\t\t\t\t\t__(\n\t\t\t\t\t\t\"Unable to paste styles. Block styles couldn't be found within the copied content.\"\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst copiedBlocks = parse( html );\n\n\t\t\tif ( copiedBlocks.length === 1 ) {\n\t\t\t\t// Apply styles of the block to all the target blocks.\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\trecursivelyUpdateBlockAttributes(\n\t\t\t\t\t\ttargetBlocks,\n\t\t\t\t\t\ttargetBlocks.map( () => copiedBlocks[ 0 ] ),\n\t\t\t\t\t\tupdateBlockAttributes\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\trecursivelyUpdateBlockAttributes(\n\t\t\t\t\t\ttargetBlocks,\n\t\t\t\t\t\tcopiedBlocks,\n\t\t\t\t\t\tupdateBlockAttributes\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( targetBlocks.length === 1 ) {\n\t\t\t\tconst title = getBlockType( targetBlocks[ 0 ].name )?.title;\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t// Translators: Name of the block being pasted, e.g. \"Paragraph\".\n\t\t\t\t\t\t__( 'Pasted styles to %s.' ),\n\t\t\t\t\t\ttitle\n\t\t\t\t\t),\n\t\t\t\t\t{ type: 'snackbar' }\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t// Translators: The number of the blocks.\n\t\t\t\t\t\t__( 'Pasted styles to %d blocks.' ),\n\t\t\t\t\t\ttargetBlocks.length\n\t\t\t\t\t),\n\t\t\t\t\t{ type: 'snackbar' }\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tregistry.batch,\n\t\t\tupdateBlockAttributes,\n\t\t\tcreateSuccessNotice,\n\t\t\tcreateWarningNotice,\n\t\t\tcreateErrorNotice,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\thasBlockSupport,\n\tswitchToBlockType,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { useNotifyCopy } from '../copy-handler';\nimport usePasteStyles from '../use-paste-styles';\nimport { store as blockEditorStore } from '../../store';\n\nexport default function BlockActions( {\n\tclientIds,\n\tchildren,\n\t__experimentalUpdateSelection: updateSelection,\n} ) {\n\tconst {\n\t\tcanInsertBlockType,\n\t\tgetBlockRootClientId,\n\t\tgetBlocksByClientId,\n\t\tcanMoveBlocks,\n\t\tcanRemoveBlocks,\n\t} = useSelect( blockEditorStore );\n\tconst { getDefaultBlockName, getGroupingBlockName } =\n\t\tuseSelect( blocksStore );\n\n\tconst blocks = getBlocksByClientId( clientIds );\n\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\tconst canDuplicate = blocks.every( ( block ) => {\n\t\treturn (\n\t\t\t!! block &&\n\t\t\thasBlockSupport( block.name, 'multiple', true ) &&\n\t\t\tcanInsertBlockType( block.name, rootClientId )\n\t\t);\n\t} );\n\n\tconst canInsertDefaultBlock = canInsertBlockType(\n\t\tgetDefaultBlockName(),\n\t\trootClientId\n\t);\n\n\tconst canMove = canMoveBlocks( clientIds, rootClientId );\n\tconst canRemove = canRemoveBlocks( clientIds, rootClientId );\n\n\tconst {\n\t\tremoveBlocks,\n\t\treplaceBlocks,\n\t\tduplicateBlocks,\n\t\tinsertAfterBlock,\n\t\tinsertBeforeBlock,\n\t\tflashBlock,\n\t\tsetBlockMovingClientId,\n\t\tsetNavigationMode,\n\t\tselectBlock,\n\t} = useDispatch( blockEditorStore );\n\n\tconst notifyCopy = useNotifyCopy();\n\tconst pasteStyles = usePasteStyles();\n\n\treturn children( {\n\t\tcanDuplicate,\n\t\tcanInsertDefaultBlock,\n\t\tcanMove,\n\t\tcanRemove,\n\t\trootClientId,\n\t\tblocks,\n\t\tonDuplicate() {\n\t\t\treturn duplicateBlocks( clientIds, updateSelection );\n\t\t},\n\t\tonRemove() {\n\t\t\treturn removeBlocks( clientIds, updateSelection );\n\t\t},\n\t\tonInsertBefore() {\n\t\t\tconst clientId = Array.isArray( clientIds )\n\t\t\t\t? clientIds[ 0 ]\n\t\t\t\t: clientId;\n\t\t\tinsertBeforeBlock( clientId );\n\t\t},\n\t\tonInsertAfter() {\n\t\t\tconst clientId = Array.isArray( clientIds )\n\t\t\t\t? clientIds[ clientIds.length - 1 ]\n\t\t\t\t: clientId;\n\t\t\tinsertAfterBlock( clientId );\n\t\t},\n\t\tonMoveTo() {\n\t\t\tsetNavigationMode( true );\n\t\t\tselectBlock( clientIds[ 0 ] );\n\t\t\tsetBlockMovingClientId( clientIds[ 0 ] );\n\t\t},\n\t\tonGroup() {\n\t\t\tif ( ! blocks.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst groupingBlockName = getGroupingBlockName();\n\n\t\t\t// Activate the `transform` on `core/group` which does the conversion.\n\t\t\tconst newBlocks = switchToBlockType( blocks, groupingBlockName );\n\n\t\t\tif ( ! newBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t},\n\t\tonUngroup() {\n\t\t\tif ( ! blocks.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst innerBlocks = blocks[ 0 ].innerBlocks;\n\n\t\t\tif ( ! innerBlocks.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treplaceBlocks( clientIds, innerBlocks );\n\t\t},\n\t\tonCopy() {\n\t\t\tconst selectedBlockClientIds = blocks.map(\n\t\t\t\t( { clientId } ) => clientId\n\t\t\t);\n\t\t\tif ( blocks.length === 1 ) {\n\t\t\t\tflashBlock( selectedBlockClientIds[ 0 ] );\n\t\t\t}\n\t\t\tnotifyCopy( 'copy', selectedBlockClientIds );\n\t\t},\n\t\tasync onPasteStyles() {\n\t\t\tawait pasteStyles( blocks );\n\t\t},\n\t} );\n}\n","/**\n * WordPress dependencies\n */\nimport { rawHandler, getBlockContent } from '@wordpress/blocks';\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockConvertButton from './block-convert-button';\nimport { store as blockEditorStore } from '../../store';\n\nexport default compose(\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst block = select( blockEditorStore ).getBlock( clientId );\n\n\t\treturn {\n\t\t\tblock,\n\t\t\tshouldRender: block && block.name === 'core/html',\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { block } ) => ( {\n\t\tonClick: () =>\n\t\t\tdispatch( blockEditorStore ).replaceBlocks(\n\t\t\t\tblock.clientId,\n\t\t\t\trawHandler( { HTML: getBlockContent( block ) } )\n\t\t\t),\n\t} ) )\n)( BlockConvertButton );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuItem } from '@wordpress/components';\n\nexport default function BlockConvertButton( { shouldRender, onClick, small } ) {\n\tif ( ! shouldRender ) {\n\t\treturn null;\n\t}\n\n\tconst label = __( 'Convert to Blocks' );\n\treturn <MenuItem onClick={ onClick }>{ ! small && label }</MenuItem>;\n}\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst { Fill: __unstableBlockSettingsMenuFirstItem, Slot } = createSlotFill(\n\t'__unstableBlockSettingsMenuFirstItem'\n);\n\n__unstableBlockSettingsMenuFirstItem.Slot = Slot;\n\nexport default __unstableBlockSettingsMenuFirstItem;\n","/**\n * WordPress dependencies\n */\nimport { MenuItem } from '@wordpress/components';\nimport { _x } from '@wordpress/i18n';\nimport { switchToBlockType } from '@wordpress/blocks';\nimport { useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport useConvertToGroupButtonProps from './use-convert-to-group-button-props';\nimport BlockGroupToolbar from './toolbar';\n\nfunction ConvertToGroupButton( {\n\tclientIds,\n\tisGroupable,\n\tisUngroupable,\n\tonUngroup,\n\tblocksSelection,\n\tgroupingBlockName,\n\tonClose = () => {},\n} ) {\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\tconst onConvertToGroup = () => {\n\t\t// Activate the `transform` on the Grouping Block which does the conversion.\n\t\tconst newBlocks = switchToBlockType(\n\t\t\tblocksSelection,\n\t\t\tgroupingBlockName\n\t\t);\n\t\tif ( newBlocks ) {\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t}\n\t};\n\n\tconst onConvertFromGroup = () => {\n\t\tlet innerBlocks = blocksSelection[ 0 ].innerBlocks;\n\t\tif ( ! innerBlocks.length ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( onUngroup ) {\n\t\t\tinnerBlocks = onUngroup(\n\t\t\t\tblocksSelection[ 0 ].attributes,\n\t\t\t\tblocksSelection[ 0 ].innerBlocks\n\t\t\t);\n\t\t}\n\t\treplaceBlocks( clientIds, innerBlocks );\n\t};\n\n\tif ( ! isGroupable && ! isUngroupable ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ isGroupable && (\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tonConvertToGroup();\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ _x( 'Group', 'verb' ) }\n\t\t\t\t</MenuItem>\n\t\t\t) }\n\t\t\t{ isUngroupable && (\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tonConvertFromGroup();\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Ungroup',\n\t\t\t\t\t\t'Ungrouping blocks from within a grouping block back into individual blocks within the Editor '\n\t\t\t\t\t) }\n\t\t\t\t</MenuItem>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport {\n\tBlockGroupToolbar,\n\tConvertToGroupButton,\n\tuseConvertToGroupButtonProps,\n};\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Contains the properties `ConvertToGroupButton` component needs.\n *\n * @typedef {Object} ConvertToGroupButtonProps\n * @property {string[]}  clientIds         An array of the selected client ids.\n * @property {boolean}   isGroupable       Indicates if the selected blocks can be grouped.\n * @property {boolean}   isUngroupable     Indicates if the selected blocks can be ungrouped.\n * @property {WPBlock[]} blocksSelection   An array of the selected blocks.\n * @property {string}    groupingBlockName The name of block used for handling grouping interactions.\n */\n\n/**\n * Returns the properties `ConvertToGroupButton` component needs to work properly.\n * It is used in `BlockSettingsMenuControls` to know if `ConvertToGroupButton`\n * should be rendered, to avoid ending up with an empty MenuGroup.\n *\n * @param {?string[]} selectedClientIds An optional array of clientIds to group. The selected blocks\n *                                      from the block editor store are used if this is not provided.\n *\n * @return {ConvertToGroupButtonProps} Returns the properties needed by `ConvertToGroupButton`.\n */\nexport default function useConvertToGroupButtonProps( selectedClientIds ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlocksByClientId,\n\t\t\t\tcanInsertBlockType,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { getGroupingBlockName, getBlockType } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst clientIds = selectedClientIds?.length\n\t\t\t\t? selectedClientIds\n\t\t\t\t: getSelectedBlockClientIds();\n\t\t\tconst groupingBlockName = getGroupingBlockName();\n\n\t\t\tconst rootClientId = clientIds?.length\n\t\t\t\t? getBlockRootClientId( clientIds[ 0 ] )\n\t\t\t\t: undefined;\n\n\t\t\tconst groupingBlockAvailable = canInsertBlockType(\n\t\t\t\tgroupingBlockName,\n\t\t\t\trootClientId\n\t\t\t);\n\n\t\t\tconst blocksSelection = getBlocksByClientId( clientIds );\n\t\t\tconst isSingleBlockSelected = blocksSelection.length === 1;\n\t\t\tconst [ firstSelectedBlock ] = blocksSelection;\n\t\t\t// A block is ungroupable if it is a single grouping block with inner blocks.\n\t\t\t// If a block has an `ungroup` transform, it is also ungroupable, without the\n\t\t\t// requirement of being the default grouping block.\n\t\t\t// Do we have a single grouping Block selected and does that group have inner blocks?\n\t\t\tconst isUngroupable =\n\t\t\t\tisSingleBlockSelected &&\n\t\t\t\t( firstSelectedBlock.name === groupingBlockName ||\n\t\t\t\t\tgetBlockType( firstSelectedBlock.name )?.transforms\n\t\t\t\t\t\t?.ungroup ) &&\n\t\t\t\t!! firstSelectedBlock.innerBlocks.length;\n\n\t\t\t// Do we have\n\t\t\t// 1. Grouping block available to be inserted?\n\t\t\t// 2. One or more blocks selected\n\t\t\tconst isGroupable =\n\t\t\t\tgroupingBlockAvailable && blocksSelection.length;\n\n\t\t\treturn {\n\t\t\t\tclientIds,\n\t\t\t\tisGroupable,\n\t\t\t\tisUngroupable,\n\t\t\t\tblocksSelection,\n\t\t\t\tgroupingBlockName,\n\t\t\t\tonUngroup:\n\t\t\t\t\tisUngroupable &&\n\t\t\t\t\tgetBlockType( firstSelectedBlock.name )?.transforms\n\t\t\t\t\t\t?.ungroup,\n\t\t\t};\n\t\t},\n\t\t[ selectedClientIds ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Return details about the block lock status.\n *\n * @param {string} clientId The block client Id.\n *\n * @return {Object} Block lock status\n */\nexport default function useBlockLock( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tcanEditBlock,\n\t\t\t\tcanMoveBlock,\n\t\t\t\tcanRemoveBlock,\n\t\t\t\tcanLockBlockType,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetTemplateLock,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\n\t\t\tconst canEdit = canEditBlock( clientId );\n\t\t\tconst canMove = canMoveBlock( clientId, rootClientId );\n\t\t\tconst canRemove = canRemoveBlock( clientId, rootClientId );\n\n\t\t\treturn {\n\t\t\t\tcanEdit,\n\t\t\t\tcanMove,\n\t\t\t\tcanRemove,\n\t\t\t\tcanLock: canLockBlockType( getBlockName( clientId ) ),\n\t\t\t\tisContentLocked: getTemplateLock( clientId ) === 'contentOnly',\n\t\t\t\tisLocked: ! canEdit || ! canMove || ! canRemove,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst unlock = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8h1.5c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1z\" />\n\t</SVG>\n);\n\nexport default unlock;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst lockOutline = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zM9.8 7c0-1.2 1-2.2 2.2-2.2 1.2 0 2.2 1 2.2 2.2v3H9.8V7zm6.7 11.5h-9v-7h9v7z\" />\n\t</SVG>\n);\n\nexport default lockOutline;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst lock = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zm-2.8 0H9.8V7c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3z\" />\n\t</SVG>\n);\n\nexport default lock;\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useEffect, useState } from '@wordpress/element';\nimport {\n\tButton,\n\tCheckboxControl,\n\tFlex,\n\tFlexItem,\n\tIcon,\n\tModal,\n\tToggleControl,\n} from '@wordpress/components';\nimport { lock as lockIcon, unlock as unlockIcon } from '@wordpress/icons';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { getBlockType } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport useBlockLock from './use-block-lock';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport { store as blockEditorStore } from '../../store';\n\n// Entity based blocks which allow edit locking\nconst ALLOWS_EDIT_LOCKING = [ 'core/block', 'core/navigation' ];\n\nfunction getTemplateLockValue( lock ) {\n\t// Prevents all operations.\n\tif ( lock.remove && lock.move ) {\n\t\treturn 'all';\n\t}\n\n\t// Prevents inserting or removing blocks, but allows moving existing blocks.\n\tif ( lock.remove && ! lock.move ) {\n\t\treturn 'insert';\n\t}\n\n\treturn false;\n}\n\nexport default function BlockLockModal( { clientId, onClose } ) {\n\tconst [ lock, setLock ] = useState( { move: false, remove: false } );\n\tconst { canEdit, canMove, canRemove } = useBlockLock( clientId );\n\tconst { allowsEditLocking, templateLock, hasTemplateLock } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockName, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst blockType = getBlockType( blockName );\n\n\t\t\treturn {\n\t\t\t\tallowsEditLocking: ALLOWS_EDIT_LOCKING.includes( blockName ),\n\t\t\t\ttemplateLock: getBlockAttributes( clientId )?.templateLock,\n\t\t\t\thasTemplateLock: !! blockType?.attributes?.templateLock,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst [ applyTemplateLock, setApplyTemplateLock ] = useState(\n\t\t!! templateLock\n\t);\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst instanceId = useInstanceId(\n\t\tBlockLockModal,\n\t\t'block-editor-block-lock-modal__options-title'\n\t);\n\n\tuseEffect( () => {\n\t\tsetLock( {\n\t\t\tmove: ! canMove,\n\t\t\tremove: ! canRemove,\n\t\t\t...( allowsEditLocking ? { edit: ! canEdit } : {} ),\n\t\t} );\n\t}, [ canEdit, canMove, canRemove, allowsEditLocking ] );\n\n\tconst isAllChecked = Object.values( lock ).every( Boolean );\n\tconst isMixed = Object.values( lock ).some( Boolean ) && ! isAllChecked;\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ sprintf(\n\t\t\t\t/* translators: %s: Name of the block. */\n\t\t\t\t__( 'Lock %s' ),\n\t\t\t\tblockInformation.title\n\t\t\t) }\n\t\t\toverlayClassName=\"block-editor-block-lock-modal\"\n\t\t\tonRequestClose={ onClose }\n\t\t>\n\t\t\t<p>\n\t\t\t\t{ __(\n\t\t\t\t\t'Choose specific attributes to restrict or lock all available options.'\n\t\t\t\t) }\n\t\t\t</p>\n\t\t\t<form\n\t\t\t\tonSubmit={ ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tupdateBlockAttributes( [ clientId ], {\n\t\t\t\t\t\tlock,\n\t\t\t\t\t\ttemplateLock: applyTemplateLock\n\t\t\t\t\t\t\t? getTemplateLockValue( lock )\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t} );\n\t\t\t\t\tonClose();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\trole=\"group\"\n\t\t\t\t\taria-labelledby={ instanceId }\n\t\t\t\t\tclassName=\"block-editor-block-lock-modal__options\"\n\t\t\t\t>\n\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__options-title\"\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t<span id={ instanceId }>{ __( 'Lock all' ) }</span>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchecked={ isAllChecked }\n\t\t\t\t\t\tindeterminate={ isMixed }\n\t\t\t\t\t\tonChange={ ( newValue ) =>\n\t\t\t\t\t\t\tsetLock( {\n\t\t\t\t\t\t\t\tmove: newValue,\n\t\t\t\t\t\t\t\tremove: newValue,\n\t\t\t\t\t\t\t\t...( allowsEditLocking\n\t\t\t\t\t\t\t\t\t? { edit: newValue }\n\t\t\t\t\t\t\t\t\t: {} ),\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<ul className=\"block-editor-block-lock-modal__checklist\">\n\t\t\t\t\t\t{ allowsEditLocking && (\n\t\t\t\t\t\t\t<li className=\"block-editor-block-lock-modal__checklist-item\">\n\t\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Restrict editing' ) }\n\t\t\t\t\t\t\t\t\tchecked={ !! lock.edit }\n\t\t\t\t\t\t\t\t\tonChange={ ( edit ) =>\n\t\t\t\t\t\t\t\t\t\tsetLock( ( prevLock ) => ( {\n\t\t\t\t\t\t\t\t\t\t\t...prevLock,\n\t\t\t\t\t\t\t\t\t\t\tedit,\n\t\t\t\t\t\t\t\t\t\t} ) )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__lock-icon\"\n\t\t\t\t\t\t\t\t\ticon={ lock.edit ? lockIcon : unlockIcon }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<li className=\"block-editor-block-lock-modal__checklist-item\">\n\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={ __( 'Disable movement' ) }\n\t\t\t\t\t\t\t\tchecked={ lock.move }\n\t\t\t\t\t\t\t\tonChange={ ( move ) =>\n\t\t\t\t\t\t\t\t\tsetLock( ( prevLock ) => ( {\n\t\t\t\t\t\t\t\t\t\t...prevLock,\n\t\t\t\t\t\t\t\t\t\tmove,\n\t\t\t\t\t\t\t\t\t} ) )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__lock-icon\"\n\t\t\t\t\t\t\t\ticon={ lock.move ? lockIcon : unlockIcon }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li className=\"block-editor-block-lock-modal__checklist-item\">\n\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={ __( 'Prevent removal' ) }\n\t\t\t\t\t\t\t\tchecked={ lock.remove }\n\t\t\t\t\t\t\t\tonChange={ ( remove ) =>\n\t\t\t\t\t\t\t\t\tsetLock( ( prevLock ) => ( {\n\t\t\t\t\t\t\t\t\t\t...prevLock,\n\t\t\t\t\t\t\t\t\t\tremove,\n\t\t\t\t\t\t\t\t\t} ) )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__lock-icon\"\n\t\t\t\t\t\t\t\ticon={ lock.remove ? lockIcon : unlockIcon }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t{ hasTemplateLock && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__template-lock\"\n\t\t\t\t\t\t\tlabel={ __( 'Apply to all blocks inside' ) }\n\t\t\t\t\t\t\tchecked={ applyTemplateLock }\n\t\t\t\t\t\t\tdisabled={ lock.move && ! lock.remove }\n\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\tsetApplyTemplateLock( ! applyTemplateLock )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t<Flex\n\t\t\t\t\tclassName=\"block-editor-block-lock-modal__actions\"\n\t\t\t\t\tjustify=\"flex-end\"\n\t\t\t\t\texpanded={ false }\n\t\t\t\t>\n\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t<Button variant=\"tertiary\" onClick={ onClose }>\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</FlexItem>\n\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t<Button variant=\"primary\" type=\"submit\">\n\t\t\t\t\t\t\t{ __( 'Apply' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</FlexItem>\n\t\t\t\t</Flex>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useReducer } from '@wordpress/element';\nimport { MenuItem } from '@wordpress/components';\nimport { lockOutline, unlock } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport useBlockLock from './use-block-lock';\nimport BlockLockModal from './modal';\n\nexport default function BlockLockMenuItem( { clientId } ) {\n\tconst { canLock, isLocked } = useBlockLock( clientId );\n\n\tconst [ isModalOpen, toggleModal ] = useReducer(\n\t\t( isActive ) => ! isActive,\n\t\tfalse\n\t);\n\n\tif ( ! canLock ) {\n\t\treturn null;\n\t}\n\n\tconst label = isLocked ? __( 'Unlock' ) : __( 'Lock' );\n\n\treturn (\n\t\t<>\n\t\t\t<MenuItem\n\t\t\t\ticon={ isLocked ? unlock : lockOutline }\n\t\t\t\tonClick={ toggleModal }\n\t\t\t>\n\t\t\t\t{ label }\n\t\t\t</MenuItem>\n\t\t\t{ isModalOpen && (\n\t\t\t\t<BlockLockModal clientId={ clientId } onClose={ toggleModal } />\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuItem } from '@wordpress/components';\nimport { getBlockType, hasBlockSupport } from '@wordpress/blocks';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst noop = () => {};\n\nexport function BlockModeToggle( {\n\tblockType,\n\tmode,\n\tonToggleMode,\n\tsmall = false,\n\tisCodeEditingEnabled = true,\n} ) {\n\tif (\n\t\t! blockType ||\n\t\t! hasBlockSupport( blockType, 'html', true ) ||\n\t\t! isCodeEditingEnabled\n\t) {\n\t\treturn null;\n\t}\n\n\tconst label =\n\t\tmode === 'visual' ? __( 'Edit as HTML' ) : __( 'Edit visually' );\n\n\treturn <MenuItem onClick={ onToggleMode }>{ ! small && label }</MenuItem>;\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlock, getBlockMode, getSettings } =\n\t\t\tselect( blockEditorStore );\n\t\tconst block = getBlock( clientId );\n\t\tconst isCodeEditingEnabled = getSettings().codeEditingEnabled;\n\n\t\treturn {\n\t\t\tmode: getBlockMode( clientId ),\n\t\t\tblockType: block ? getBlockType( block.name ) : null,\n\t\t\tisCodeEditingEnabled,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { onToggle = noop, clientId } ) => ( {\n\t\tonToggleMode() {\n\t\t\tdispatch( blockEditorStore ).toggleBlockMode( clientId );\n\t\t\tonToggle();\n\t\t},\n\t} ) ),\n] )( BlockModeToggle );\n","/**\n * WordPress dependencies\n */\nimport {\n\tcreateSlotFill,\n\tMenuGroup,\n\tMenuItem,\n\t__experimentalStyleProvider as StyleProvider,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { pipe } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport {\n\tuseConvertToGroupButtonProps,\n\tConvertToGroupButton,\n} from '../convert-to-group-buttons';\nimport { BlockLockMenuItem, useBlockLock } from '../block-lock';\nimport { store as blockEditorStore } from '../../store';\nimport BlockModeToggle from '../block-settings-menu/block-mode-toggle';\n\nconst { Fill, Slot } = createSlotFill( 'BlockSettingsMenuControls' );\n\nconst BlockSettingsMenuControlsSlot = ( {\n\tfillProps,\n\tclientIds = null,\n\t__unstableDisplayLocation,\n} ) => {\n\tconst { selectedBlocks, selectedClientIds, canRemove } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockNamesByClientId,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tcanRemoveBlocks,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst ids =\n\t\t\t\tclientIds !== null ? clientIds : getSelectedBlockClientIds();\n\t\t\treturn {\n\t\t\t\tselectedBlocks: getBlockNamesByClientId( ids ),\n\t\t\t\tselectedClientIds: ids,\n\t\t\t\tcanRemove: canRemoveBlocks( ids ),\n\t\t\t};\n\t\t},\n\t\t[ clientIds ]\n\t);\n\n\tconst { canLock } = useBlockLock( selectedClientIds[ 0 ] );\n\tconst showLockButton = selectedClientIds.length === 1 && canLock;\n\n\t// Check if current selection of blocks is Groupable or Ungroupable\n\t// and pass this props down to ConvertToGroupButton.\n\tconst convertToGroupButtonProps =\n\t\tuseConvertToGroupButtonProps( selectedClientIds );\n\tconst { isGroupable, isUngroupable } = convertToGroupButtonProps;\n\tconst showConvertToGroupButton =\n\t\t( isGroupable || isUngroupable ) && canRemove;\n\n\treturn (\n\t\t<Slot\n\t\t\tfillProps={ {\n\t\t\t\t...fillProps,\n\t\t\t\t__unstableDisplayLocation,\n\t\t\t\tselectedBlocks,\n\t\t\t\tselectedClientIds,\n\t\t\t} }\n\t\t>\n\t\t\t{ ( fills ) => {\n\t\t\t\tif (\n\t\t\t\t\t! fills?.length > 0 &&\n\t\t\t\t\t! showConvertToGroupButton &&\n\t\t\t\t\t! showLockButton\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t{ showConvertToGroupButton && (\n\t\t\t\t\t\t\t<ConvertToGroupButton\n\t\t\t\t\t\t\t\t{ ...convertToGroupButtonProps }\n\t\t\t\t\t\t\t\tonClose={ fillProps?.onClose }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ showLockButton && (\n\t\t\t\t\t\t\t<BlockLockMenuItem\n\t\t\t\t\t\t\t\tclientId={ selectedClientIds[ 0 ] }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ fills }\n\t\t\t\t\t\t{ fillProps?.canMove && ! fillProps?.onlyBlock && (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\tfillProps?.onClose,\n\t\t\t\t\t\t\t\t\tfillProps?.onMoveTo\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Move to' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ fillProps?.count === 1 && (\n\t\t\t\t\t\t\t<BlockModeToggle\n\t\t\t\t\t\t\t\tclientId={ fillProps?.firstBlockClientId }\n\t\t\t\t\t\t\t\tonToggle={ fillProps?.onClose }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t);\n\t\t\t} }\n\t\t</Slot>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-settings-menu-controls/README.md\n *\n * @param {Object} props Fill props.\n * @return {WPElement} Element.\n */\nfunction BlockSettingsMenuControls( { ...props } ) {\n\treturn (\n\t\t<StyleProvider document={ document }>\n\t\t\t<Fill { ...props } />\n\t\t</StyleProvider>\n\t);\n}\n\nBlockSettingsMenuControls.Slot = BlockSettingsMenuControlsSlot;\n\nexport default BlockSettingsMenuControls;\n","/**\n * WordPress dependencies\n */\nimport {\n\tgetBlockType,\n\tserialize,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { moreVertical } from '@wordpress/icons';\nimport {\n\tChildren,\n\tcloneElement,\n\tuseCallback,\n\tuseRef,\n} from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tstore as keyboardShortcutsStore,\n\t__unstableUseShortcutEventMatch,\n} from '@wordpress/keyboard-shortcuts';\nimport { pipe, useCopyToClipboard } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockActions from '../block-actions';\nimport BlockIcon from '../block-icon';\nimport BlockHTMLConvertButton from './block-html-convert-button';\nimport __unstableBlockSettingsMenuFirstItem from './block-settings-menu-first-item';\nimport BlockSettingsMenuControls from '../block-settings-menu-controls';\nimport { store as blockEditorStore } from '../../store';\nimport { useShowMoversGestures } from '../block-toolbar/utils';\n\nconst POPOVER_PROPS = {\n\tclassName: 'block-editor-block-settings-menu__popover',\n\tposition: 'bottom right',\n\tvariant: 'toolbar',\n};\n\nfunction CopyMenuItem( { blocks, onCopy, label } ) {\n\tconst ref = useCopyToClipboard( () => serialize( blocks ), onCopy );\n\tconst copyMenuItemBlocksLabel =\n\t\tblocks.length > 1 ? __( 'Copy blocks' ) : __( 'Copy block' );\n\tconst copyMenuItemLabel = label ? label : copyMenuItemBlocksLabel;\n\treturn <MenuItem ref={ ref }>{ copyMenuItemLabel }</MenuItem>;\n}\n\nexport function BlockSettingsDropdown( {\n\tclientIds,\n\t__experimentalSelectBlock,\n\tchildren,\n\t__unstableDisplayLocation,\n\t...props\n} ) {\n\tconst blockClientIds = Array.isArray( clientIds )\n\t\t? clientIds\n\t\t: [ clientIds ];\n\tconst count = blockClientIds.length;\n\tconst firstBlockClientId = blockClientIds[ 0 ];\n\tconst {\n\t\tfirstParentClientId,\n\t\tisDistractionFree,\n\t\tonlyBlock,\n\t\tparentBlockType,\n\t\tpreviousBlockClientId,\n\t\tselectedBlockClientIds,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockCount,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetPreviousBlockClientId,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tgetSettings,\n\t\t\t\tgetBlockAttributes,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst { getActiveBlockVariation } = select( blocksStore );\n\n\t\t\tconst _firstParentClientId =\n\t\t\t\tgetBlockRootClientId( firstBlockClientId );\n\t\t\tconst parentBlockName =\n\t\t\t\t_firstParentClientId && getBlockName( _firstParentClientId );\n\n\t\t\treturn {\n\t\t\t\tfirstParentClientId: _firstParentClientId,\n\t\t\t\tisDistractionFree: getSettings().isDistractionFree,\n\t\t\t\tonlyBlock: 1 === getBlockCount( _firstParentClientId ),\n\t\t\t\tparentBlockType:\n\t\t\t\t\t_firstParentClientId &&\n\t\t\t\t\t( getActiveBlockVariation(\n\t\t\t\t\t\tparentBlockName,\n\t\t\t\t\t\tgetBlockAttributes( _firstParentClientId )\n\t\t\t\t\t) ||\n\t\t\t\t\t\tgetBlockType( parentBlockName ) ),\n\t\t\t\tpreviousBlockClientId:\n\t\t\t\t\tgetPreviousBlockClientId( firstBlockClientId ),\n\t\t\t\tselectedBlockClientIds: getSelectedBlockClientIds(),\n\t\t\t};\n\t\t},\n\t\t[ firstBlockClientId ]\n\t);\n\tconst { getBlockOrder, getSelectedBlockClientIds } =\n\t\tuseSelect( blockEditorStore );\n\n\tconst shortcuts = useSelect( ( select ) => {\n\t\tconst { getShortcutRepresentation } = select( keyboardShortcutsStore );\n\t\treturn {\n\t\t\tduplicate: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/duplicate'\n\t\t\t),\n\t\t\tremove: getShortcutRepresentation( 'core/block-editor/remove' ),\n\t\t\tinsertAfter: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/insert-after'\n\t\t\t),\n\t\t\tinsertBefore: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/insert-before'\n\t\t\t),\n\t\t};\n\t}, [] );\n\tconst isMatch = __unstableUseShortcutEventMatch();\n\n\tconst { selectBlock, toggleBlockHighlight } =\n\t\tuseDispatch( blockEditorStore );\n\tconst hasSelectedBlocks = selectedBlockClientIds.length > 0;\n\n\tconst updateSelectionAfterDuplicate = useCallback(\n\t\tasync ( clientIdsPromise ) => {\n\t\t\tif ( __experimentalSelectBlock ) {\n\t\t\t\tconst ids = await clientIdsPromise;\n\t\t\t\tif ( ids && ids[ 0 ] ) {\n\t\t\t\t\t__experimentalSelectBlock( ids[ 0 ], false );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[ __experimentalSelectBlock ]\n\t);\n\n\tconst updateSelectionAfterRemove = useCallback( () => {\n\t\tif ( __experimentalSelectBlock ) {\n\t\t\tlet blockToFocus = previousBlockClientId || firstParentClientId;\n\n\t\t\t// Focus the first block if there's no previous block nor parent block.\n\t\t\tif ( ! blockToFocus ) {\n\t\t\t\tblockToFocus = getBlockOrder()[ 0 ];\n\t\t\t}\n\n\t\t\t// Only update the selection if the original selection is removed.\n\t\t\tconst shouldUpdateSelection =\n\t\t\t\thasSelectedBlocks && getSelectedBlockClientIds().length === 0;\n\n\t\t\t__experimentalSelectBlock( blockToFocus, shouldUpdateSelection );\n\t\t}\n\t}, [\n\t\t__experimentalSelectBlock,\n\t\tpreviousBlockClientId,\n\t\tfirstParentClientId,\n\t\tgetBlockOrder,\n\t\thasSelectedBlocks,\n\t\tgetSelectedBlockClientIds,\n\t] );\n\n\tconst removeBlockLabel =\n\t\tcount === 1 ? __( 'Delete' ) : __( 'Delete blocks' );\n\n\t// Allows highlighting the parent block outline when focusing or hovering\n\t// the parent block selector within the child.\n\tconst selectParentButtonRef = useRef();\n\tconst { gestures: showParentOutlineGestures } = useShowMoversGestures( {\n\t\tref: selectParentButtonRef,\n\t\tonChange( isFocused ) {\n\t\t\tif ( isFocused && isDistractionFree ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttoggleBlockHighlight( firstParentClientId, isFocused );\n\t\t},\n\t} );\n\n\t// This can occur when the selected block (the parent)\n\t// displays child blocks within a List View.\n\tconst parentBlockIsSelected =\n\t\tselectedBlockClientIds?.includes( firstParentClientId );\n\n\treturn (\n\t\t<BlockActions\n\t\t\tclientIds={ clientIds }\n\t\t\t__experimentalUpdateSelection={ ! __experimentalSelectBlock }\n\t\t>\n\t\t\t{ ( {\n\t\t\t\tcanDuplicate,\n\t\t\t\tcanInsertDefaultBlock,\n\t\t\t\tcanMove,\n\t\t\t\tcanRemove,\n\t\t\t\tonDuplicate,\n\t\t\t\tonInsertAfter,\n\t\t\t\tonInsertBefore,\n\t\t\t\tonRemove,\n\t\t\t\tonCopy,\n\t\t\t\tonPasteStyles,\n\t\t\t\tonMoveTo,\n\t\t\t\tblocks,\n\t\t\t} ) => (\n\t\t\t\t<DropdownMenu\n\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\tlabel={ __( 'Options' ) }\n\t\t\t\t\tclassName=\"block-editor-block-settings-menu\"\n\t\t\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\t\t\tnoIcons\n\t\t\t\t\tmenuProps={ {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * @param {KeyboardEvent} event\n\t\t\t\t\t\t */\n\t\t\t\t\t\tonKeyDown( event ) {\n\t\t\t\t\t\t\tif ( event.defaultPrevented ) return;\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tisMatch( 'core/block-editor/remove', event ) &&\n\t\t\t\t\t\t\t\tcanRemove\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tupdateSelectionAfterRemove( onRemove() );\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tisMatch(\n\t\t\t\t\t\t\t\t\t'core/block-editor/duplicate',\n\t\t\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\tcanDuplicate\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tupdateSelectionAfterDuplicate( onDuplicate() );\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tisMatch(\n\t\t\t\t\t\t\t\t\t'core/block-editor/insert-after',\n\t\t\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\tcanInsertDefaultBlock\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tonInsertAfter();\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tisMatch(\n\t\t\t\t\t\t\t\t\t'core/block-editor/insert-before',\n\t\t\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\tcanInsertDefaultBlock\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tonInsertBefore();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t} }\n\t\t\t\t\t{ ...props }\n\t\t\t\t>\n\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t<__unstableBlockSettingsMenuFirstItem.Slot\n\t\t\t\t\t\t\t\t\tfillProps={ { onClose } }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{ ! parentBlockIsSelected &&\n\t\t\t\t\t\t\t\t\t!! firstParentClientId && (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t{ ...showParentOutlineGestures }\n\t\t\t\t\t\t\t\t\t\t\tref={ selectParentButtonRef }\n\t\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\t\t<BlockIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparentBlockType.icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\tselectBlock(\n\t\t\t\t\t\t\t\t\t\t\t\t\tfirstParentClientId\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t\t\t\t\t\t/* translators: %s: Name of the block's parent. */\n\t\t\t\t\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'Select parent block (%s)'\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\tparentBlockType.title\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t\t<BlockHTMLConvertButton\n\t\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<CopyMenuItem\n\t\t\t\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\t\t\t\tonCopy={ onCopy }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{ canDuplicate && (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\tonDuplicate,\n\t\t\t\t\t\t\t\t\t\t\tupdateSelectionAfterDuplicate\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.duplicate }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Duplicate' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ canInsertDefaultBlock && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\tonInsertBefore\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.insertBefore }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Add before' ) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\tonInsertAfter\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.insertAfter }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Add after' ) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t<CopyMenuItem\n\t\t\t\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\t\t\t\tonCopy={ onCopy }\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Copy styles' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<MenuItem onClick={ onPasteStyles }>\n\t\t\t\t\t\t\t\t\t{ __( 'Paste styles' ) }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t<BlockSettingsMenuControls.Slot\n\t\t\t\t\t\t\t\tfillProps={ {\n\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\tcanMove,\n\t\t\t\t\t\t\t\t\tonMoveTo,\n\t\t\t\t\t\t\t\t\tonlyBlock,\n\t\t\t\t\t\t\t\t\tcount,\n\t\t\t\t\t\t\t\t\tfirstBlockClientId,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t__unstableDisplayLocation={\n\t\t\t\t\t\t\t\t\t__unstableDisplayLocation\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ typeof children === 'function'\n\t\t\t\t\t\t\t\t? children( { onClose } )\n\t\t\t\t\t\t\t\t: Children.map( ( child ) =>\n\t\t\t\t\t\t\t\t\t\tcloneElement( child, { onClose } )\n\t\t\t\t\t\t\t\t  ) }\n\t\t\t\t\t\t\t{ canRemove && (\n\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\tonRemove,\n\t\t\t\t\t\t\t\t\t\t\tupdateSelectionAfterRemove\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.remove }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ removeBlockLabel }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t</DropdownMenu>\n\t\t\t) }\n\t\t</BlockActions>\n\t);\n}\n\nexport default BlockSettingsDropdown;\n","/**\n * WordPress dependencies\n */\nimport { ToolbarGroup, ToolbarItem } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockSettingsDropdown from './block-settings-dropdown';\n\nexport function BlockSettingsMenu( { clientIds, ...props } ) {\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarItem>\n\t\t\t\t{ ( toggleProps ) => (\n\t\t\t\t\t<BlockSettingsDropdown\n\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\ttoggleProps={ toggleProps }\n\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</ToolbarItem>\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default BlockSettingsMenu;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { useReducer } from '@wordpress/element';\nimport { lock } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockLockModal from './modal';\nimport useBlockLock from './use-block-lock';\n\nexport default function BlockLockToolbar( { clientId } ) {\n\tconst { canEdit, canMove, canRemove, canLock } = useBlockLock( clientId );\n\n\tconst [ isModalOpen, toggleModal ] = useReducer(\n\t\t( isActive ) => ! isActive,\n\t\tfalse\n\t);\n\n\tif ( ! canLock ) {\n\t\treturn null;\n\t}\n\n\tif ( canEdit && canMove && canRemove ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<ToolbarGroup className=\"block-editor-block-lock-toolbar\">\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ lock }\n\t\t\t\t\tlabel={ __( 'Unlock' ) }\n\t\t\t\t\tonClick={ toggleModal }\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t\t{ isModalOpen && (\n\t\t\t\t<BlockLockModal clientId={ clientId } onClose={ toggleModal } />\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst group = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M18 4h-7c-1.1 0-2 .9-2 2v3H6c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2v-3h3c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4.5 14c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-7c0-.3.2-.5.5-.5h3V13c0 1.1.9 2 2 2h2.5v3zm0-4.5H11c-.3 0-.5-.2-.5-.5v-2.5H13c.3 0 .5.2.5.5v2.5zm5-.5c0 .3-.2.5-.5.5h-3V11c0-1.1-.9-2-2-2h-2.5V6c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5v7z\" />\n\t</SVG>\n);\n\nexport default group;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst row = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4 6.5h5a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H4V16h5a.5.5 0 0 0 .5-.5v-7A.5.5 0 0 0 9 8H4V6.5Zm16 0h-5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h5V16h-5a.5.5 0 0 1-.5-.5v-7A.5.5 0 0 1 15 8h5V6.5Z\" />\n\t</SVG>\n);\n\nexport default row;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst stack = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M17.5 4v5a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V4H8v5a.5.5 0 0 0 .5.5h7A.5.5 0 0 0 16 9V4h1.5Zm0 16v-5a2 2 0 0 0-2-2h-7a2 2 0 0 0-2 2v5H8v-5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v5h1.5Z\" />\n\t</SVG>\n);\n\nexport default stack;\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { switchToBlockType, store as blocksStore } from '@wordpress/blocks';\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { group, row, stack } from '@wordpress/icons';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useConvertToGroupButtonProps } from '../convert-to-group-buttons';\nimport { store as blockEditorStore } from '../../store';\n\nconst layouts = {\n\tgroup: { type: 'constrained' },\n\trow: { type: 'flex', flexWrap: 'nowrap' },\n\tstack: { type: 'flex', orientation: 'vertical' },\n};\n\nfunction BlockGroupToolbar() {\n\tconst { blocksSelection, clientIds, groupingBlockName, isGroupable } =\n\t\tuseConvertToGroupButtonProps();\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\n\tconst { canRemove, variations } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { canRemoveBlocks } = select( blockEditorStore );\n\t\t\tconst { getBlockVariations } = select( blocksStore );\n\n\t\t\treturn {\n\t\t\t\tcanRemove: canRemoveBlocks( clientIds ),\n\t\t\t\tvariations: getBlockVariations(\n\t\t\t\t\tgroupingBlockName,\n\t\t\t\t\t'transform'\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientIds, groupingBlockName ]\n\t);\n\n\tconst onConvertToGroup = ( layout ) => {\n\t\tconst newBlocks = switchToBlockType(\n\t\t\tblocksSelection,\n\t\t\tgroupingBlockName\n\t\t);\n\n\t\tif ( typeof layout !== 'string' ) {\n\t\t\tlayout = 'group';\n\t\t}\n\n\t\tif ( newBlocks && newBlocks.length > 0 ) {\n\t\t\t// Because the block is not in the store yet we can't use\n\t\t\t// updateBlockAttributes so need to manually update attributes.\n\t\t\tnewBlocks[ 0 ].attributes.layout = layouts[ layout ];\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t}\n\t};\n\n\tconst onConvertToRow = () => onConvertToGroup( 'row' );\n\tconst onConvertToStack = () => onConvertToGroup( 'stack' );\n\n\t// Don't render the button if the current selection cannot be grouped.\n\t// A good example is selecting multiple button blocks within a Buttons block:\n\t// The group block is not a valid child of Buttons, so we should not show the button.\n\t// Any blocks that are locked against removal also cannot be grouped.\n\tif ( ! isGroupable || ! canRemove ) {\n\t\treturn null;\n\t}\n\n\tconst canInsertRow = !! variations.find(\n\t\t( { name } ) => name === 'group-row'\n\t);\n\tconst canInsertStack = !! variations.find(\n\t\t( { name } ) => name === 'group-stack'\n\t);\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\ticon={ group }\n\t\t\t\tlabel={ _x( 'Group', 'verb' ) }\n\t\t\t\tonClick={ onConvertToGroup }\n\t\t\t/>\n\t\t\t{ canInsertRow && (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ row }\n\t\t\t\t\tlabel={ _x( 'Row', 'single horizontal line' ) }\n\t\t\t\t\tonClick={ onConvertToRow }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ canInsertStack && (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ stack }\n\t\t\t\t\tlabel={ _x( 'Stack', 'verb' ) }\n\t\t\t\t\tonClick={ onConvertToStack }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default BlockGroupToolbar;\n","/**\n * WordPress dependencies\n */\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function BlockEditVisuallyButton( { clientIds } ) {\n\t// Edit visually only works for single block selection.\n\tconst clientId = clientIds.length === 1 ? clientIds[ 0 ] : undefined;\n\tconst canEditVisually = useSelect(\n\t\t( select ) =>\n\t\t\t!! clientId &&\n\t\t\tselect( blockEditorStore ).getBlockMode( clientId ) === 'html',\n\t\t[ clientId ]\n\t);\n\tconst { toggleBlockMode } = useDispatch( blockEditorStore );\n\n\tif ( ! canEditVisually ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\tonClick={ () => {\n\t\t\t\t\ttoggleBlockMode( clientId );\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ __( 'Edit visually' ) }\n\t\t\t</ToolbarButton>\n\t\t</ToolbarGroup>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { createContext } from '@wordpress/element';\n\nconst __unstableBlockNameContext = createContext( '' );\n\nexport default __unstableBlockNameContext;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRef } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\nimport {\n\tgetBlockType,\n\thasBlockSupport,\n\tisReusableBlock,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { ToolbarGroup } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockMover from '../block-mover';\nimport BlockParentSelector from '../block-parent-selector';\nimport BlockSwitcher from '../block-switcher';\nimport BlockControls from '../block-controls';\nimport __unstableBlockToolbarLastItem from './block-toolbar-last-item';\nimport BlockSettingsMenu from '../block-settings-menu';\nimport { BlockLockToolbar } from '../block-lock';\nimport { BlockGroupToolbar } from '../convert-to-group-buttons';\nimport BlockEditVisuallyButton from '../block-edit-visually-button';\nimport { useShowMoversGestures } from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport __unstableBlockNameContext from './block-name-context';\nimport { unlock } from '../../lock-unlock';\n\nconst BlockToolbar = ( { hideDragHandle } ) => {\n\tconst {\n\t\tblockClientIds,\n\t\tblockClientId,\n\t\tblockType,\n\t\thasFixedToolbar,\n\t\tisDistractionFree,\n\t\tisValid,\n\t\tisVisual,\n\t\tblockEditingMode,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockName,\n\t\t\tgetBlockMode,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\tisBlockValid,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetSettings,\n\t\t\tgetBlockEditingMode,\n\t\t} = unlock( select( blockEditorStore ) );\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\tconst selectedBlockClientId = selectedBlockClientIds[ 0 ];\n\t\tconst blockRootClientId = getBlockRootClientId( selectedBlockClientId );\n\t\tconst settings = getSettings();\n\n\t\treturn {\n\t\t\tblockClientIds: selectedBlockClientIds,\n\t\t\tblockClientId: selectedBlockClientId,\n\t\t\tblockType:\n\t\t\t\tselectedBlockClientId &&\n\t\t\t\tgetBlockType( getBlockName( selectedBlockClientId ) ),\n\t\t\thasFixedToolbar: settings.hasFixedToolbar,\n\t\t\tisDistractionFree: settings.isDistractionFree,\n\t\t\trootClientId: blockRootClientId,\n\t\t\tisValid: selectedBlockClientIds.every( ( id ) =>\n\t\t\t\tisBlockValid( id )\n\t\t\t),\n\t\t\tisVisual: selectedBlockClientIds.every(\n\t\t\t\t( id ) => getBlockMode( id ) === 'visual'\n\t\t\t),\n\t\t\tblockEditingMode: getBlockEditingMode( selectedBlockClientId ),\n\t\t};\n\t}, [] );\n\n\t// Handles highlighting the current block outline on hover or focus of the\n\t// block type toolbar area.\n\tconst { toggleBlockHighlight } = useDispatch( blockEditorStore );\n\tconst nodeRef = useRef();\n\tconst { showMovers, gestures: showMoversGestures } = useShowMoversGestures(\n\t\t{\n\t\t\tref: nodeRef,\n\t\t\tonChange( isFocused ) {\n\t\t\t\tif ( isFocused && isDistractionFree ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttoggleBlockHighlight( blockClientId, isFocused );\n\t\t\t},\n\t\t}\n\t);\n\n\t// Account for the cases where the block toolbar is rendered within the\n\t// header area and not contextually to the block.\n\tconst displayHeaderToolbar =\n\t\tuseViewportMatch( 'medium', '<' ) || hasFixedToolbar;\n\tconst isLargeViewport = ! useViewportMatch( 'medium', '<' );\n\n\tif ( blockType ) {\n\t\tif ( ! hasBlockSupport( blockType, '__experimentalToolbar', true ) ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tconst shouldShowMovers = displayHeaderToolbar || showMovers;\n\n\tif ( blockClientIds.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst shouldShowVisualToolbar = isValid && isVisual;\n\tconst isMultiToolbar = blockClientIds.length > 1;\n\tconst isSynced =\n\t\tisReusableBlock( blockType ) || isTemplatePart( blockType );\n\n\tconst classes = classnames( 'block-editor-block-toolbar', {\n\t\t'is-showing-movers': shouldShowMovers,\n\t\t'is-synced': isSynced,\n\t} );\n\n\treturn (\n\t\t<div className={ classes }>\n\t\t\t{ ! isMultiToolbar &&\n\t\t\t\tisLargeViewport &&\n\t\t\t\tblockEditingMode === 'default' && <BlockParentSelector /> }\n\t\t\t<div ref={ nodeRef } { ...showMoversGestures }>\n\t\t\t\t{ ( shouldShowVisualToolbar || isMultiToolbar ) &&\n\t\t\t\t\tblockEditingMode === 'default' && (\n\t\t\t\t\t\t<ToolbarGroup className=\"block-editor-block-toolbar__block-controls\">\n\t\t\t\t\t\t\t<BlockSwitcher clientIds={ blockClientIds } />\n\t\t\t\t\t\t\t{ ! isMultiToolbar && (\n\t\t\t\t\t\t\t\t<BlockLockToolbar\n\t\t\t\t\t\t\t\t\tclientId={ blockClientIds[ 0 ] }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<BlockMover\n\t\t\t\t\t\t\t\tclientIds={ blockClientIds }\n\t\t\t\t\t\t\t\thideDragHandle={ hideDragHandle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t) }\n\t\t\t</div>\n\t\t\t{ shouldShowVisualToolbar && isMultiToolbar && (\n\t\t\t\t<BlockGroupToolbar />\n\t\t\t) }\n\t\t\t{ shouldShowVisualToolbar && (\n\t\t\t\t<>\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"parent\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"block\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockControls.Slot className=\"block-editor-block-toolbar__slot\" />\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"inline\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\tgroup=\"other\"\n\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t/>\n\t\t\t\t\t<__unstableBlockNameContext.Provider\n\t\t\t\t\t\tvalue={ blockType?.name }\n\t\t\t\t\t>\n\t\t\t\t\t\t<__unstableBlockToolbarLastItem.Slot />\n\t\t\t\t\t</__unstableBlockNameContext.Provider>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t<BlockEditVisuallyButton clientIds={ blockClientIds } />\n\t\t\t{ blockEditingMode === 'default' && (\n\t\t\t\t<BlockSettingsMenu clientIds={ blockClientIds } />\n\t\t\t) }\n\t\t</div>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-toolbar/README.md\n */\nexport default BlockToolbar;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useEffect, useRef, useState } from '@wordpress/element';\nimport { hasBlockSupport, store as blocksStore } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tToolbarItem,\n\tToolbarButton,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { levelUp } from '@wordpress/icons';\nimport { useViewportMatch } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport NavigableToolbar from '../navigable-toolbar';\nimport BlockToolbar from '../block-toolbar';\nimport { store as blockEditorStore } from '../../store';\nimport BlockIcon from '../block-icon';\nimport { unlock } from '../../lock-unlock';\n\nfunction BlockContextualToolbar( { focusOnMount, isFixed, ...props } ) {\n\t// When the toolbar is fixed it can be collapsed\n\tconst [ isCollapsed, setIsCollapsed ] = useState( false );\n\tconst toolbarButtonRef = useRef();\n\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\tconst { blockType, hasParents, showParentSelector, selectedBlockClientId } =\n\t\tuseSelect( ( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockParents,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\t\t\tconst { getBlockType } = select( blocksStore );\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst _selectedBlockClientId = selectedBlockClientIds[ 0 ];\n\t\t\tconst parents = getBlockParents( _selectedBlockClientId );\n\t\t\tconst firstParentClientId = parents[ parents.length - 1 ];\n\t\t\tconst parentBlockName = getBlockName( firstParentClientId );\n\t\t\tconst parentBlockType = getBlockType( parentBlockName );\n\n\t\t\treturn {\n\t\t\t\tselectedBlockClientId: _selectedBlockClientId,\n\t\t\t\tblockType:\n\t\t\t\t\t_selectedBlockClientId &&\n\t\t\t\t\tgetBlockType( getBlockName( _selectedBlockClientId ) ),\n\t\t\t\thasParents: parents.length,\n\t\t\t\tshowParentSelector:\n\t\t\t\t\tparentBlockType &&\n\t\t\t\t\thasBlockSupport(\n\t\t\t\t\t\tparentBlockType,\n\t\t\t\t\t\t'__experimentalParentSelector',\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) &&\n\t\t\t\t\tselectedBlockClientIds.length <= 1 &&\n\t\t\t\t\tgetBlockEditingMode( _selectedBlockClientId ) === 'default',\n\t\t\t};\n\t\t}, [] );\n\n\tuseEffect( () => {\n\t\tsetIsCollapsed( false );\n\t}, [ selectedBlockClientId ] );\n\n\tif (\n\t\tblockType &&\n\t\t! hasBlockSupport( blockType, '__experimentalToolbar', true )\n\t) {\n\t\treturn null;\n\t}\n\n\t// Shifts the toolbar to make room for the parent block selector.\n\tconst classes = classnames( 'block-editor-block-contextual-toolbar', {\n\t\t'has-parent': hasParents && showParentSelector,\n\t\t'is-fixed': isFixed,\n\t\t'is-collapsed': isCollapsed,\n\t} );\n\n\treturn (\n\t\t<NavigableToolbar\n\t\t\tfocusOnMount={ focusOnMount }\n\t\t\tclassName={ classes }\n\t\t\t/* translators: accessibility text for the block toolbar */\n\t\t\taria-label={ __( 'Block tools' ) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ isFixed && isLargeViewport && blockType && (\n\t\t\t\t<ToolbarGroup\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tisCollapsed\n\t\t\t\t\t\t\t? 'block-editor-block-toolbar__group-expand-fixed-toolbar'\n\t\t\t\t\t\t\t: 'block-editor-block-toolbar__group-collapse-fixed-toolbar'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\tas={ ToolbarButton }\n\t\t\t\t\t\tref={ toolbarButtonRef }\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\tisCollapsed ? (\n\t\t\t\t\t\t\t\t<BlockIcon icon={ blockType.icon } />\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\tlevelUp\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tsetIsCollapsed( ( collapsed ) => ! collapsed );\n\t\t\t\t\t\t\ttoolbarButtonRef.current.focus();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\tisCollapsed\n\t\t\t\t\t\t\t\t? __( 'Show block tools' )\n\t\t\t\t\t\t\t\t: __( 'Show document tools' )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t) }\n\t\t\t{ ! isCollapsed && <BlockToolbar hideDragHandle={ isFixed } /> }\n\t\t</NavigableToolbar>\n\t);\n}\n\nexport default BlockContextualToolbar;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport {\n\tBaseControl,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { createHigherOrderComponent, useInstanceId } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tuseContext,\n\tuseMemo,\n\tcreatePortal,\n\tPlatform,\n} from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport BlockList from '../components/block-list';\nimport useSetting from '../components/use-setting';\nimport InspectorControls from '../components/inspector-controls';\nimport { cleanEmptyObject } from './utils';\nimport { unlock } from '../lock-unlock';\nimport { store as blockEditorStore } from '../store';\n\nconst { CustomSelectControl } = unlock( componentsPrivateApis );\n\nconst POSITION_SUPPORT_KEY = 'position';\n\nconst OPTION_CLASSNAME =\n\t'block-editor-hooks__position-selection__select-control__option';\n\nconst DEFAULT_OPTION = {\n\tkey: 'default',\n\tvalue: '',\n\tname: __( 'Default' ),\n\tclassName: OPTION_CLASSNAME,\n};\n\nconst STICKY_OPTION = {\n\tkey: 'sticky',\n\tvalue: 'sticky',\n\tname: _x( 'Sticky', 'Name for the value of the CSS position property' ),\n\tclassName: OPTION_CLASSNAME,\n\t__experimentalHint: __(\n\t\t'The block will stick to the top of the window instead of scrolling.'\n\t),\n};\n\nconst FIXED_OPTION = {\n\tkey: 'fixed',\n\tvalue: 'fixed',\n\tname: _x( 'Fixed', 'Name for the value of the CSS position property' ),\n\tclassName: OPTION_CLASSNAME,\n\t__experimentalHint: __(\n\t\t'The block will not move when the page is scrolled.'\n\t),\n};\n\nconst POSITION_SIDES = [ 'top', 'right', 'bottom', 'left' ];\nconst VALID_POSITION_TYPES = [ 'sticky', 'fixed' ];\n\n/**\n * Get calculated position CSS.\n *\n * @param {Object} props          Component props.\n * @param {string} props.selector Selector to use.\n * @param {Object} props.style    Style object.\n * @return {string} The generated CSS rules.\n */\nexport function getPositionCSS( { selector, style } ) {\n\tlet output = '';\n\n\tconst { type: positionType } = style?.position || {};\n\n\tif ( ! VALID_POSITION_TYPES.includes( positionType ) ) {\n\t\treturn output;\n\t}\n\n\toutput += `${ selector } {`;\n\toutput += `position: ${ positionType };`;\n\n\tPOSITION_SIDES.forEach( ( side ) => {\n\t\tif ( style?.position?.[ side ] !== undefined ) {\n\t\t\toutput += `${ side }: ${ style.position[ side ] };`;\n\t\t}\n\t} );\n\n\tif ( positionType === 'sticky' || positionType === 'fixed' ) {\n\t\t// TODO: Replace hard-coded z-index value with a z-index preset approach in theme.json.\n\t\toutput += `z-index: 10`;\n\t}\n\toutput += `}`;\n\n\treturn output;\n}\n\n/**\n * Determines if there is sticky position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasStickyPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! ( true === support || support?.sticky );\n}\n\n/**\n * Determines if there is fixed position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasFixedPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! ( true === support || support?.fixed );\n}\n\n/**\n * Determines if there is position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! support;\n}\n\n/**\n * Checks if there is a current value in the position block support attributes.\n *\n * @param {Object} props Block props.\n * @return {boolean} Whether or not the block has a position value set.\n */\nexport function hasPositionValue( props ) {\n\treturn props.attributes.style?.position?.type !== undefined;\n}\n\n/**\n * Checks if the block is currently set to a sticky or fixed position.\n * This check is helpful for determining how to position block toolbars or other elements.\n *\n * @param {Object} attributes Block attributes.\n * @return {boolean} Whether or not the block is set to a sticky or fixed position.\n */\nexport function hasStickyOrFixedPositionValue( attributes ) {\n\tconst positionType = attributes.style?.position?.type;\n\treturn positionType === 'sticky' || positionType === 'fixed';\n}\n\n/**\n * Resets the position block support attributes. This can be used when disabling\n * the position support controls for a block via a `ToolsPanel`.\n *\n * @param {Object} props               Block props.\n * @param {Object} props.attributes    Block's attributes.\n * @param {Object} props.setAttributes Function to set block's attributes.\n */\nexport function resetPosition( { attributes = {}, setAttributes } ) {\n\tconst { style = {} } = attributes;\n\n\tsetAttributes( {\n\t\tstyle: cleanEmptyObject( {\n\t\t\t...style,\n\t\t\tposition: {\n\t\t\t\t...style?.position,\n\t\t\t\ttype: undefined,\n\t\t\t\ttop: undefined,\n\t\t\t\tright: undefined,\n\t\t\t\tbottom: undefined,\n\t\t\t\tleft: undefined,\n\t\t\t},\n\t\t} ),\n\t} );\n}\n\n/**\n * Custom hook that checks if position settings have been disabled.\n *\n * @param {string} name The name of the block.\n *\n * @return {boolean} Whether padding setting is disabled.\n */\nexport function useIsPositionDisabled( { name: blockName } = {} ) {\n\tconst allowFixed = useSetting( 'position.fixed' );\n\tconst allowSticky = useSetting( 'position.sticky' );\n\tconst isDisabled = ! allowFixed && ! allowSticky;\n\n\treturn ! hasPositionSupport( blockName ) || isDisabled;\n}\n\n/*\n * Position controls rendered in an inspector control panel.\n *\n * @param {Object} props\n *\n * @return {WPElement} Position panel.\n */\nexport function PositionPanel( props ) {\n\tconst {\n\t\tattributes: { style = {} },\n\t\tclientId,\n\t\tname: blockName,\n\t\tsetAttributes,\n\t} = props;\n\n\tconst allowFixed = hasFixedPositionSupport( blockName );\n\tconst allowSticky = hasStickyPositionSupport( blockName );\n\tconst value = style?.position?.type;\n\n\tconst { hasParents } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockParents } = select( blockEditorStore );\n\t\t\tconst parents = getBlockParents( clientId );\n\t\t\treturn {\n\t\t\t\thasParents: parents.length,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst options = useMemo( () => {\n\t\tconst availableOptions = [ DEFAULT_OPTION ];\n\t\t// Only display sticky option if the block has no parents (is at the root of the document),\n\t\t// or if the block already has a sticky position value set.\n\t\tif (\n\t\t\t( allowSticky && ! hasParents ) ||\n\t\t\tvalue === STICKY_OPTION.value\n\t\t) {\n\t\t\tavailableOptions.push( STICKY_OPTION );\n\t\t}\n\t\tif ( allowFixed || value === FIXED_OPTION.value ) {\n\t\t\tavailableOptions.push( FIXED_OPTION );\n\t\t}\n\t\treturn availableOptions;\n\t}, [ allowFixed, allowSticky, hasParents, value ] );\n\n\tconst onChangeType = ( next ) => {\n\t\t// For now, use a hard-coded `0px` value for the position.\n\t\t// `0px` is preferred over `0` as it can be used in `calc()` functions.\n\t\t// In the future, it could be useful to allow for an offset value.\n\t\tconst placementValue = '0px';\n\n\t\tconst newStyle = {\n\t\t\t...style,\n\t\t\tposition: {\n\t\t\t\t...style?.position,\n\t\t\t\ttype: next,\n\t\t\t\ttop:\n\t\t\t\t\tnext === 'sticky' || next === 'fixed'\n\t\t\t\t\t\t? placementValue\n\t\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t};\n\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( newStyle ),\n\t\t} );\n\t};\n\n\tconst selectedOption = value\n\t\t? options.find( ( option ) => option.value === value ) || DEFAULT_OPTION\n\t\t: DEFAULT_OPTION;\n\n\t// Only display position controls if there is at least one option to choose from.\n\treturn Platform.select( {\n\t\tweb:\n\t\t\toptions.length > 1 ? (\n\t\t\t\t<InspectorControls group=\"position\">\n\t\t\t\t\t<BaseControl className=\"block-editor-hooks__position-selection\">\n\t\t\t\t\t\t<CustomSelectControl\n\t\t\t\t\t\t\t__nextUnconstrainedWidth\n\t\t\t\t\t\t\t__next36pxDefaultSize\n\t\t\t\t\t\t\tclassName=\"block-editor-hooks__position-selection__select-control\"\n\t\t\t\t\t\t\tlabel={ __( 'Position' ) }\n\t\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\t\tdescribedBy={ sprintf(\n\t\t\t\t\t\t\t\t// translators: %s: Currently selected position.\n\t\t\t\t\t\t\t\t__( 'Currently selected position: %s' ),\n\t\t\t\t\t\t\t\tselectedOption.name\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\toptions={ options }\n\t\t\t\t\t\t\tvalue={ selectedOption }\n\t\t\t\t\t\t\t__experimentalShowSelectedHint\n\t\t\t\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\t\t\t\tonChangeType( selectedItem.value );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</BaseControl>\n\t\t\t\t</InspectorControls>\n\t\t\t) : null,\n\t\tnative: null,\n\t} );\n}\n\n/**\n * Override the default edit UI to include position controls.\n *\n * @param {Function} BlockEdit Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withInspectorControls = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\tconst { name: blockName } = props;\n\t\tconst positionSupport = hasBlockSupport(\n\t\t\tblockName,\n\t\t\tPOSITION_SUPPORT_KEY\n\t\t);\n\t\tconst showPositionControls =\n\t\t\tpositionSupport && ! useIsPositionDisabled( props );\n\n\t\treturn [\n\t\t\tshowPositionControls && (\n\t\t\t\t<PositionPanel key=\"position\" { ...props } />\n\t\t\t),\n\t\t\t<BlockEdit key=\"edit\" { ...props } />,\n\t\t];\n\t},\n\t'withInspectorControls'\n);\n\n/**\n * Override the default block element to add the position styles.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withPositionStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst { name, attributes } = props;\n\t\tconst hasPositionBlockSupport = hasBlockSupport(\n\t\t\tname,\n\t\t\tPOSITION_SUPPORT_KEY\n\t\t);\n\t\tconst allowPositionStyles =\n\t\t\thasPositionBlockSupport && ! useIsPositionDisabled( props );\n\n\t\tconst id = useInstanceId( BlockListBlock );\n\t\tconst element = useContext( BlockList.__unstableElementContext );\n\n\t\t// Higher specificity to override defaults in editor UI.\n\t\tconst positionSelector = `.wp-container-${ id }.wp-container-${ id }`;\n\n\t\t// Get CSS string for the current position values.\n\t\tlet css;\n\t\tif ( allowPositionStyles ) {\n\t\t\tcss =\n\t\t\t\tgetPositionCSS( {\n\t\t\t\t\tselector: positionSelector,\n\t\t\t\t\tstyle: attributes?.style,\n\t\t\t\t} ) || '';\n\t\t}\n\n\t\t// Attach a `wp-container-` id-based class name.\n\t\tconst className = classnames( props?.className, {\n\t\t\t[ `wp-container-${ id }` ]: allowPositionStyles && !! css, // Only attach a container class if there is generated CSS to be attached.\n\t\t\t[ `is-position-${ attributes?.style?.position?.type }` ]:\n\t\t\t\tallowPositionStyles &&\n\t\t\t\t!! css &&\n\t\t\t\t!! attributes?.style?.position?.type,\n\t\t} );\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ allowPositionStyles &&\n\t\t\t\t\telement &&\n\t\t\t\t\t!! css &&\n\t\t\t\t\tcreatePortal( <style>{ css }</style>, element ) }\n\t\t\t\t<BlockListBlock { ...props } className={ className } />\n\t\t\t</>\n\t\t);\n\t},\n\t'withPositionStyles'\n);\n\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/editor/position/with-position-styles',\n\twithPositionStyles\n);\naddFilter(\n\t'editor.BlockEdit',\n\t'core/editor/position/with-inspector-controls',\n\twithInspectorControls\n);\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { getScrollContainer } from '@wordpress/dom';\nimport {\n\tuseCallback,\n\tuseLayoutEffect,\n\tuseMemo,\n\tuseState,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport { hasStickyOrFixedPositionValue } from '../../hooks/position';\n\nconst COMMON_PROPS = {\n\tplacement: 'top-start',\n};\n\n// By default the toolbar sets the `shift` prop. If the user scrolls the page\n// down the toolbar will stay on screen by adopting a sticky position at the\n// top of the viewport.\nconst DEFAULT_PROPS = {\n\t...COMMON_PROPS,\n\tflip: false,\n\tshift: true,\n};\n\n// When there isn't enough height between the top of the block and the editor\n// canvas, the `shift` prop is set to `false`, as it will cause the block to be\n// obscured. The `flip` behavior is enabled, which positions the toolbar below\n// the block. This only happens if the block is smaller than the viewport, as\n// otherwise the toolbar will be off-screen.\nconst RESTRICTED_HEIGHT_PROPS = {\n\t...COMMON_PROPS,\n\tflip: true,\n\tshift: false,\n};\n\n/**\n * Get the popover props for the block toolbar, determined by the space at the top of the canvas and the toolbar height.\n *\n * @param {Element} contentElement       The DOM element that represents the editor content or canvas.\n * @param {Element} selectedBlockElement The outer DOM element of the first selected block.\n * @param {Element} scrollContainer      The scrollable container for the contentElement.\n * @param {number}  toolbarHeight        The height of the toolbar in pixels.\n * @param {boolean} isSticky             Whether or not the selected block is sticky or fixed.\n *\n * @return {Object} The popover props used to determine the position of the toolbar.\n */\nfunction getProps(\n\tcontentElement,\n\tselectedBlockElement,\n\tscrollContainer,\n\ttoolbarHeight,\n\tisSticky\n) {\n\tif ( ! contentElement || ! selectedBlockElement ) {\n\t\treturn DEFAULT_PROPS;\n\t}\n\n\t// Get how far the content area has been scrolled.\n\tconst scrollTop = scrollContainer?.scrollTop || 0;\n\n\tconst blockRect = selectedBlockElement.getBoundingClientRect();\n\tconst contentRect = contentElement.getBoundingClientRect();\n\n\t// Get the vertical position of top of the visible content area.\n\tconst topOfContentElementInViewport = scrollTop + contentRect.top;\n\n\t// The document element's clientHeight represents the viewport height.\n\tconst viewportHeight =\n\t\tcontentElement.ownerDocument.documentElement.clientHeight;\n\n\t// The restricted height area is calculated as the sum of the\n\t// vertical position of the visible content area, plus the height\n\t// of the block toolbar.\n\tconst restrictedTopArea = topOfContentElementInViewport + toolbarHeight;\n\tconst hasSpaceForToolbarAbove = blockRect.top > restrictedTopArea;\n\n\tconst isBlockTallerThanViewport =\n\t\tblockRect.height > viewportHeight - toolbarHeight;\n\n\t// Sticky blocks are treated as if they will never have enough space for the toolbar above.\n\tif (\n\t\t! isSticky &&\n\t\t( hasSpaceForToolbarAbove || isBlockTallerThanViewport )\n\t) {\n\t\treturn DEFAULT_PROPS;\n\t}\n\n\treturn RESTRICTED_HEIGHT_PROPS;\n}\n\n/**\n * Determines the desired popover positioning behavior, returning a set of appropriate props.\n *\n * @param {Object}  elements\n * @param {Element} elements.contentElement The DOM element that represents the editor content or canvas.\n * @param {string}  elements.clientId       The clientId of the first selected block.\n *\n * @return {Object} The popover props used to determine the position of the toolbar.\n */\nexport default function useBlockToolbarPopoverProps( {\n\tcontentElement,\n\tclientId,\n} ) {\n\tconst selectedBlockElement = useBlockElement( clientId );\n\tconst [ toolbarHeight, setToolbarHeight ] = useState( 0 );\n\tconst { blockIndex, isSticky } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockIndex, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\treturn {\n\t\t\t\tblockIndex: getBlockIndex( clientId ),\n\t\t\t\tisSticky: hasStickyOrFixedPositionValue(\n\t\t\t\t\tgetBlockAttributes( clientId )\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst scrollContainer = useMemo( () => {\n\t\tif ( ! contentElement ) {\n\t\t\treturn;\n\t\t}\n\t\treturn getScrollContainer( contentElement );\n\t}, [ contentElement ] );\n\tconst [ props, setProps ] = useState( () =>\n\t\tgetProps(\n\t\t\tcontentElement,\n\t\t\tselectedBlockElement,\n\t\t\tscrollContainer,\n\t\t\ttoolbarHeight,\n\t\t\tisSticky\n\t\t)\n\t);\n\n\tconst popoverRef = useRefEffect( ( popoverNode ) => {\n\t\tsetToolbarHeight( popoverNode.offsetHeight );\n\t}, [] );\n\n\tconst updateProps = useCallback(\n\t\t() =>\n\t\t\tsetProps(\n\t\t\t\tgetProps(\n\t\t\t\t\tcontentElement,\n\t\t\t\t\tselectedBlockElement,\n\t\t\t\t\tscrollContainer,\n\t\t\t\t\ttoolbarHeight,\n\t\t\t\t\tisSticky\n\t\t\t\t)\n\t\t\t),\n\t\t[ contentElement, selectedBlockElement, scrollContainer, toolbarHeight ]\n\t);\n\n\t// Update props when the block is moved. This also ensures the props are\n\t// correct on initial mount, and when the selected block or content element\n\t// changes (since the callback ref will update).\n\tuseLayoutEffect( updateProps, [ blockIndex, updateProps ] );\n\n\t// Update props when the viewport is resized or the block is resized.\n\tuseLayoutEffect( () => {\n\t\tif ( ! contentElement || ! selectedBlockElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Update the toolbar props on viewport resize.\n\t\tconst contentView = contentElement?.ownerDocument?.defaultView;\n\t\tcontentView?.addEventHandler?.( 'resize', updateProps );\n\n\t\t// Update the toolbar props on block resize.\n\t\tlet resizeObserver;\n\t\tconst blockView = selectedBlockElement?.ownerDocument?.defaultView;\n\t\tif ( blockView.ResizeObserver ) {\n\t\t\tresizeObserver = new blockView.ResizeObserver( updateProps );\n\t\t\tresizeObserver.observe( selectedBlockElement );\n\t\t}\n\n\t\treturn () => {\n\t\t\tcontentView?.removeEventHandler?.( 'resize', updateProps );\n\n\t\t\tif ( resizeObserver ) {\n\t\t\t\tresizeObserver.disconnect();\n\t\t\t}\n\t\t};\n\t}, [ updateProps, contentElement, selectedBlockElement ] );\n\n\treturn {\n\t\t...props,\n\t\tref: popoverRef,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\nimport { useViewportMatch } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { unlock } from '../lock-unlock';\n\n/**\n * Returns true if the contextual block toolbar should show, or false if it should be hidden.\n *\n * @return {boolean} Whether the block toolbar is hidden.\n */\nexport function useShouldContextualToolbarShow() {\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\n\tconst {\n\t\tshouldShowContextualToolbar,\n\t\tcanFocusHiddenToolbar,\n\t\tfixedToolbarCanBeFocused,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t\tisMultiSelecting,\n\t\t\t\tisTyping,\n\t\t\t\tisBlockInterfaceHidden,\n\t\t\t\tgetBlock,\n\t\t\t\tgetSettings,\n\t\t\t\tisNavigationMode,\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tgetFirstMultiSelectedBlockClientId,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\n\t\t\tconst isEditMode = __unstableGetEditorMode() === 'edit';\n\t\t\tconst hasFixedToolbar = getSettings().hasFixedToolbar;\n\t\t\tconst isDistractionFree = getSettings().isDistractionFree;\n\t\t\tconst selectedBlockId =\n\t\t\t\tgetFirstMultiSelectedBlockClientId() ||\n\t\t\t\tgetSelectedBlockClientId();\n\t\t\tconst hasSelectedBlockId = !! selectedBlockId;\n\t\t\tconst isEmptyDefaultBlock = isUnmodifiedDefaultBlock(\n\t\t\t\tgetBlock( selectedBlockId ) || {}\n\t\t\t);\n\n\t\t\tconst _shouldShowContextualToolbar =\n\t\t\t\tisEditMode &&\n\t\t\t\t! hasFixedToolbar &&\n\t\t\t\t( ! isDistractionFree || isNavigationMode() ) &&\n\t\t\t\tisLargeViewport &&\n\t\t\t\t! isMultiSelecting() &&\n\t\t\t\t! isTyping() &&\n\t\t\t\thasSelectedBlockId &&\n\t\t\t\t! isEmptyDefaultBlock &&\n\t\t\t\t! isBlockInterfaceHidden();\n\n\t\t\tconst _canFocusHiddenToolbar =\n\t\t\t\tisEditMode &&\n\t\t\t\thasSelectedBlockId &&\n\t\t\t\t! _shouldShowContextualToolbar &&\n\t\t\t\t! hasFixedToolbar &&\n\t\t\t\t! isDistractionFree &&\n\t\t\t\t! isEmptyDefaultBlock;\n\n\t\t\treturn {\n\t\t\t\tshouldShowContextualToolbar: _shouldShowContextualToolbar,\n\t\t\t\tcanFocusHiddenToolbar: _canFocusHiddenToolbar,\n\t\t\t\tfixedToolbarCanBeFocused:\n\t\t\t\t\t( hasFixedToolbar || ! isLargeViewport ) && selectedBlockId,\n\t\t\t};\n\t\t},\n\t\t[ isLargeViewport ]\n\t);\n\n\treturn {\n\t\tshouldShowContextualToolbar,\n\t\tcanFocusHiddenToolbar,\n\t\tfixedToolbarCanBeFocused,\n\t};\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useShortcut } from '@wordpress/keyboard-shortcuts';\n\n/**\n * Internal dependencies\n */\nimport BlockSelectionButton from './block-selection-button';\nimport BlockContextualToolbar from './block-contextual-toolbar';\nimport { store as blockEditorStore } from '../../store';\nimport BlockPopover from '../block-popover';\nimport useBlockToolbarPopoverProps from './use-block-toolbar-popover-props';\nimport Inserter from '../inserter';\nimport { useShouldContextualToolbarShow } from '../../utils/use-should-contextual-toolbar-show';\n\nfunction selector( select ) {\n\tconst {\n\t\t__unstableGetEditorMode,\n\t\thasMultiSelection,\n\t\tisTyping,\n\t\tgetLastMultiSelectedBlockClientId,\n\t} = select( blockEditorStore );\n\n\treturn {\n\t\teditorMode: __unstableGetEditorMode(),\n\t\thasMultiSelection: hasMultiSelection(),\n\t\tisTyping: isTyping(),\n\t\tlastClientId: hasMultiSelection()\n\t\t\t? getLastMultiSelectedBlockClientId()\n\t\t\t: null,\n\t};\n}\n\nfunction SelectedBlockPopover( {\n\tclientId,\n\trootClientId,\n\tisEmptyDefaultBlock,\n\tcapturingClientId,\n\t__unstablePopoverSlot,\n\t__unstableContentRef,\n} ) {\n\tconst { editorMode, hasMultiSelection, isTyping, lastClientId } = useSelect(\n\t\tselector,\n\t\t[]\n\t);\n\n\tconst isInsertionPointVisible = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetBlockInsertionPoint,\n\t\t\t\tgetBlockOrder,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tif ( ! isBlockInsertionPointVisible() ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\t\tconst order = getBlockOrder( insertionPoint.rootClientId );\n\t\t\treturn order[ insertionPoint.index ] === clientId;\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst isToolbarForced = useRef( false );\n\tconst { shouldShowContextualToolbar, canFocusHiddenToolbar } =\n\t\tuseShouldContextualToolbarShow();\n\n\tconst { stopTyping } = useDispatch( blockEditorStore );\n\n\tconst showEmptyBlockSideInserter =\n\t\t! isTyping && editorMode === 'edit' && isEmptyDefaultBlock;\n\tconst shouldShowBreadcrumb =\n\t\t! hasMultiSelection &&\n\t\t( editorMode === 'navigation' || editorMode === 'zoom-out' );\n\n\tuseShortcut(\n\t\t'core/block-editor/focus-toolbar',\n\t\t() => {\n\t\t\tisToolbarForced.current = true;\n\t\t\tstopTyping( true );\n\t\t},\n\t\t{\n\t\t\tisDisabled: ! canFocusHiddenToolbar,\n\t\t}\n\t);\n\n\tuseEffect( () => {\n\t\tisToolbarForced.current = false;\n\t} );\n\n\t// Stores the active toolbar item index so the block toolbar can return focus\n\t// to it when re-mounting.\n\tconst initialToolbarItemIndexRef = useRef();\n\n\tuseEffect( () => {\n\t\t// Resets the index whenever the active block changes so this is not\n\t\t// persisted. See https://github.com/WordPress/gutenberg/pull/25760#issuecomment-717906169\n\t\tinitialToolbarItemIndexRef.current = undefined;\n\t}, [ clientId ] );\n\n\tconst popoverProps = useBlockToolbarPopoverProps( {\n\t\tcontentElement: __unstableContentRef?.current,\n\t\tclientId,\n\t} );\n\n\tif ( showEmptyBlockSideInserter ) {\n\t\treturn (\n\t\t\t<BlockPopover\n\t\t\t\tclientId={ capturingClientId || clientId }\n\t\t\t\t__unstableCoverTarget\n\t\t\t\tbottomClientId={ lastClientId }\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'block-editor-block-list__block-side-inserter-popover',\n\t\t\t\t\t{\n\t\t\t\t\t\t'is-insertion-point-visible': isInsertionPointVisible,\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t\t__unstablePopoverSlot={ __unstablePopoverSlot }\n\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\tresize={ false }\n\t\t\t\tshift={ false }\n\t\t\t\t{ ...popoverProps }\n\t\t\t>\n\t\t\t\t<div className=\"block-editor-block-list__empty-block-inserter\">\n\t\t\t\t\t<Inserter\n\t\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t__experimentalIsQuick\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</BlockPopover>\n\t\t);\n\t}\n\n\tif ( shouldShowBreadcrumb || shouldShowContextualToolbar ) {\n\t\treturn (\n\t\t\t<BlockPopover\n\t\t\t\tclientId={ capturingClientId || clientId }\n\t\t\t\tbottomClientId={ lastClientId }\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'block-editor-block-list__block-popover',\n\t\t\t\t\t{\n\t\t\t\t\t\t'is-insertion-point-visible': isInsertionPointVisible,\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t\t__unstablePopoverSlot={ __unstablePopoverSlot }\n\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\tresize={ false }\n\t\t\t\t{ ...popoverProps }\n\t\t\t>\n\t\t\t\t{ shouldShowContextualToolbar && (\n\t\t\t\t\t<BlockContextualToolbar\n\t\t\t\t\t\t// If the toolbar is being shown because of being forced\n\t\t\t\t\t\t// it should focus the toolbar right after the mount.\n\t\t\t\t\t\tfocusOnMount={ isToolbarForced.current }\n\t\t\t\t\t\t__experimentalInitialIndex={\n\t\t\t\t\t\t\tinitialToolbarItemIndexRef.current\n\t\t\t\t\t\t}\n\t\t\t\t\t\t__experimentalOnIndexChange={ ( index ) => {\n\t\t\t\t\t\t\tinitialToolbarItemIndexRef.current = index;\n\t\t\t\t\t\t} }\n\t\t\t\t\t\t// Resets the index whenever the active block changes so\n\t\t\t\t\t\t// this is not persisted. See https://github.com/WordPress/gutenberg/pull/25760#issuecomment-717906169\n\t\t\t\t\t\tkey={ clientId }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ shouldShowBreadcrumb && (\n\t\t\t\t\t<BlockSelectionButton\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</BlockPopover>\n\t\t);\n\t}\n\n\treturn null;\n}\n\nfunction wrapperSelector( select ) {\n\tconst {\n\t\tgetSelectedBlockClientId,\n\t\tgetFirstMultiSelectedBlockClientId,\n\t\tgetBlockRootClientId,\n\t\tgetBlock,\n\t\tgetBlockParents,\n\t\t__experimentalGetBlockListSettingsForBlocks,\n\t} = select( blockEditorStore );\n\n\tconst clientId =\n\t\tgetSelectedBlockClientId() || getFirstMultiSelectedBlockClientId();\n\n\tif ( ! clientId ) {\n\t\treturn;\n\t}\n\n\tconst { name, attributes = {} } = getBlock( clientId ) || {};\n\tconst blockParentsClientIds = getBlockParents( clientId );\n\n\t// Get Block List Settings for all ancestors of the current Block clientId.\n\tconst parentBlockListSettings = __experimentalGetBlockListSettingsForBlocks(\n\t\tblockParentsClientIds\n\t);\n\n\t// Get the clientId of the topmost parent with the capture toolbars setting.\n\tconst capturingClientId = blockParentsClientIds.find(\n\t\t( parentClientId ) =>\n\t\t\tparentBlockListSettings[ parentClientId ]\n\t\t\t\t?.__experimentalCaptureToolbars\n\t);\n\n\treturn {\n\t\tclientId,\n\t\trootClientId: getBlockRootClientId( clientId ),\n\t\tname,\n\t\tisEmptyDefaultBlock:\n\t\t\tname && isUnmodifiedDefaultBlock( { name, attributes } ),\n\t\tcapturingClientId,\n\t};\n}\n\nexport default function WrappedBlockPopover( {\n\t__unstablePopoverSlot,\n\t__unstableContentRef,\n} ) {\n\tconst selected = useSelect( wrapperSelector, [] );\n\n\tif ( ! selected ) {\n\t\treturn null;\n\t}\n\n\tconst {\n\t\tclientId,\n\t\trootClientId,\n\t\tname,\n\t\tisEmptyDefaultBlock,\n\t\tcapturingClientId,\n\t} = selected;\n\n\tif ( ! name ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<SelectedBlockPopover\n\t\t\tclientId={ clientId }\n\t\t\trootClientId={ rootClientId }\n\t\t\tisEmptyDefaultBlock={ isEmptyDefaultBlock }\n\t\t\tcapturingClientId={ capturingClientId }\n\t\t\t__unstablePopoverSlot={ __unstablePopoverSlot }\n\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useContext } from '@wordpress/element';\nimport { Disabled } from '@wordpress/components';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport InsertionPoint, { InsertionPointOpenRef } from './insertion-point';\nimport BlockPopover from './selected-block-popover';\n\nexport default function BlockToolsBackCompat( { children } ) {\n\tconst openRef = useContext( InsertionPointOpenRef );\n\tconst isDisabled = useContext( Disabled.Context );\n\n\t// If context is set, `BlockTools` is a parent component.\n\tif ( openRef || isDisabled ) {\n\t\treturn children;\n\t}\n\n\tdeprecated( 'wp.components.Popover.Slot name=\"block-toolbar\"', {\n\t\talternative: 'wp.blockEditor.BlockTools',\n\t\tsince: '5.8',\n\t\tversion: '6.3',\n\t} );\n\n\treturn (\n\t\t<InsertionPoint __unstablePopoverSlot=\"block-toolbar\">\n\t\t\t<BlockPopover __unstablePopoverSlot=\"block-toolbar\" />\n\t\t\t{ children }\n\t\t</InsertionPoint>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit/context';\n\nconst withClientId = createHigherOrderComponent(\n\t( WrappedComponent ) => ( props ) => {\n\t\tconst { clientId } = useBlockEditContext();\n\t\treturn <WrappedComponent { ...props } clientId={ clientId } />;\n\t},\n\t'withClientId'\n);\n\nexport default withClientId;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * Internal dependencies\n */\nimport BaseButtonBlockAppender from '../button-block-appender';\nimport withClientId from './with-client-id';\n\nexport const ButtonBlockAppender = ( {\n\tclientId,\n\tshowSeparator,\n\tisFloating,\n\tonAddBlock,\n\tisToggle,\n} ) => {\n\treturn (\n\t\t<BaseButtonBlockAppender\n\t\t\tclassName={ classnames( {\n\t\t\t\t'block-list-appender__toggle': isToggle,\n\t\t\t} ) }\n\t\t\trootClientId={ clientId }\n\t\t\tshowSeparator={ showSeparator }\n\t\t\tisFloating={ isFloating }\n\t\t\tonAddBlock={ onAddBlock }\n\t\t/>\n\t);\n};\n\nexport default withClientId( ButtonBlockAppender );\n","/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BaseDefaultBlockAppender from '../default-block-appender';\nimport withClientId from './with-client-id';\nimport { store as blockEditorStore } from '../../store';\n\nexport const DefaultBlockAppender = ( { clientId } ) => {\n\treturn <BaseDefaultBlockAppender rootClientId={ clientId } />;\n};\n\nexport default compose( [\n\twithClientId,\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlockOrder } = select( blockEditorStore );\n\n\t\tconst blockClientIds = getBlockOrder( clientId );\n\n\t\treturn {\n\t\t\tlastBlockClientId: blockClientIds[ blockClientIds.length - 1 ],\n\t\t};\n\t} ),\n] )( DefaultBlockAppender );\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"isShallowEqual\"];","/**\n * WordPress dependencies\n */\nimport { useLayoutEffect, useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch, useRegistry } from '@wordpress/data';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { getLayoutType } from '../../layouts';\n\n/** @typedef {import('../../selectors').WPDirectInsertBlock } WPDirectInsertBlock */\n\nconst pendingSettingsUpdates = new WeakMap();\n\n/**\n * This hook is a side effect which updates the block-editor store when changes\n * happen to inner block settings. The given props are transformed into a\n * settings object, and if that is different from the current settings object in\n * the block-editor store, then the store is updated with the new settings which\n * came from props.\n *\n * @param {string}               clientId                   The client ID of the block to update.\n * @param {string[]}             allowedBlocks              An array of block names which are permitted\n *                                                          in inner blocks.\n * @param {string[]}             prioritizedInserterBlocks  Block names and/or block variations to be prioritized in the inserter, in the format {blockName}/{variationName}.\n * @param {?WPDirectInsertBlock} __experimentalDefaultBlock The default block to insert: [ blockName, { blockAttributes } ].\n * @param {?Function|boolean}    __experimentalDirectInsert If a default block should be inserted directly by the\n *                                                          appender.\n * @param {string}               [templateLock]             The template lock specified for the inner\n *                                                          blocks component. (e.g. \"all\")\n * @param {boolean}              captureToolbars            Whether or children toolbars should be shown\n *                                                          in the inner blocks component rather than on\n *                                                          the child block.\n * @param {string}               orientation                The direction in which the block\n *                                                          should face.\n * @param {Object}               layout                     The layout object for the block container.\n */\nexport default function useNestedSettingsUpdate(\n\tclientId,\n\tallowedBlocks,\n\tprioritizedInserterBlocks,\n\t__experimentalDefaultBlock,\n\t__experimentalDirectInsert,\n\ttemplateLock,\n\tcaptureToolbars,\n\torientation,\n\tlayout\n) {\n\tconst { updateBlockListSettings } = useDispatch( blockEditorStore );\n\tconst registry = useRegistry();\n\n\tconst { blockListSettings, parentLock } = useSelect(\n\t\t( select ) => {\n\t\t\tconst rootClientId =\n\t\t\t\tselect( blockEditorStore ).getBlockRootClientId( clientId );\n\t\t\treturn {\n\t\t\t\tblockListSettings:\n\t\t\t\t\tselect( blockEditorStore ).getBlockListSettings( clientId ),\n\t\t\t\tparentLock:\n\t\t\t\t\tselect( blockEditorStore ).getTemplateLock( rootClientId ),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\t// Memoize allowedBlocks and prioritisedInnerBlocks based on the contents\n\t// of the arrays. Implementors often pass a new array on every render,\n\t// and the contents of the arrays are just strings, so the entire array\n\t// can be passed as dependencies.\n\n\tconst _allowedBlocks = useMemo(\n\t\t() => allowedBlocks,\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\tallowedBlocks\n\t);\n\n\tconst _prioritizedInserterBlocks = useMemo(\n\t\t() => prioritizedInserterBlocks,\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\tprioritizedInserterBlocks\n\t);\n\n\tuseLayoutEffect( () => {\n\t\tconst newSettings = {\n\t\t\tallowedBlocks: _allowedBlocks,\n\t\t\tprioritizedInserterBlocks: _prioritizedInserterBlocks,\n\t\t\ttemplateLock:\n\t\t\t\ttemplateLock === undefined || parentLock === 'contentOnly'\n\t\t\t\t\t? parentLock\n\t\t\t\t\t: templateLock,\n\t\t};\n\n\t\t// These values are not defined for RN, so only include them if they\n\t\t// are defined.\n\t\tif ( captureToolbars !== undefined ) {\n\t\t\tnewSettings.__experimentalCaptureToolbars = captureToolbars;\n\t\t}\n\n\t\t// Orientation depends on layout,\n\t\t// ideally the separate orientation prop should be deprecated.\n\t\tif ( orientation !== undefined ) {\n\t\t\tnewSettings.orientation = orientation;\n\t\t} else {\n\t\t\tconst layoutType = getLayoutType( layout?.type );\n\t\t\tnewSettings.orientation = layoutType.getOrientation( layout );\n\t\t}\n\n\t\tif ( __experimentalDefaultBlock !== undefined ) {\n\t\t\tnewSettings.__experimentalDefaultBlock = __experimentalDefaultBlock;\n\t\t}\n\n\t\tif ( __experimentalDirectInsert !== undefined ) {\n\t\t\tnewSettings.__experimentalDirectInsert = __experimentalDirectInsert;\n\t\t}\n\n\t\tif ( ! isShallowEqual( blockListSettings, newSettings ) ) {\n\t\t\t// Batch updates to block list settings to avoid triggering cascading renders\n\t\t\t// for each container block included in a tree and optimize initial render.\n\t\t\t// To avoid triggering updateBlockListSettings for each container block\n\t\t\t// causing X re-renderings for X container blocks,\n\t\t\t// we batch all the updatedBlockListSettings in a single \"data\" batch\n\t\t\t// which results in a single re-render.\n\t\t\tif ( ! pendingSettingsUpdates.get( registry ) ) {\n\t\t\t\tpendingSettingsUpdates.set( registry, [] );\n\t\t\t}\n\t\t\tpendingSettingsUpdates\n\t\t\t\t.get( registry )\n\t\t\t\t.push( [ clientId, newSettings ] );\n\t\t\twindow.queueMicrotask( () => {\n\t\t\t\tif ( pendingSettingsUpdates.get( registry )?.length ) {\n\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\tpendingSettingsUpdates\n\t\t\t\t\t\t\t.get( registry )\n\t\t\t\t\t\t\t.forEach( ( args ) => {\n\t\t\t\t\t\t\t\tupdateBlockListSettings( ...args );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\tpendingSettingsUpdates.set( registry, [] );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}, [\n\t\tclientId,\n\t\tblockListSettings,\n\t\t_allowedBlocks,\n\t\t_prioritizedInserterBlocks,\n\t\t__experimentalDefaultBlock,\n\t\t__experimentalDirectInsert,\n\t\ttemplateLock,\n\t\tparentLock,\n\t\tcaptureToolbars,\n\t\torientation,\n\t\tupdateBlockListSettings,\n\t\tlayout,\n\t\tregistry,\n\t] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport {\n\tcloneBlock,\n\tfindTransform,\n\tgetBlockTransforms,\n\tpasteHandler,\n} from '@wordpress/blocks';\nimport { useDispatch, useSelect, useRegistry } from '@wordpress/data';\nimport { getFilesFromDataTransfer } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/** @typedef {import('@wordpress/element').WPSyntheticEvent} WPSyntheticEvent */\n/** @typedef {import('./types').WPDropOperation} WPDropOperation */\n\n/**\n * Retrieve the data for a block drop event.\n *\n * @param {WPSyntheticEvent} event The drop event.\n *\n * @return {Object} An object with block drag and drop data.\n */\nexport function parseDropEvent( event ) {\n\tlet result = {\n\t\tsrcRootClientId: null,\n\t\tsrcClientIds: null,\n\t\tsrcIndex: null,\n\t\ttype: null,\n\t\tblocks: null,\n\t};\n\n\tif ( ! event.dataTransfer ) {\n\t\treturn result;\n\t}\n\n\ttry {\n\t\tresult = Object.assign(\n\t\t\tresult,\n\t\t\tJSON.parse( event.dataTransfer.getData( 'wp-blocks' ) )\n\t\t);\n\t} catch ( err ) {\n\t\treturn result;\n\t}\n\n\treturn result;\n}\n\n/**\n * A function that returns an event handler function for block drop events.\n *\n * @param {string}   targetRootClientId        The root client id where the block(s) will be inserted.\n * @param {number}   targetBlockIndex          The index where the block(s) will be inserted.\n * @param {Function} getBlockIndex             A function that gets the index of a block.\n * @param {Function} getClientIdsOfDescendants A function that gets the client ids of descendant blocks.\n * @param {Function} moveBlocks                A function that moves blocks.\n * @param {Function} insertOrReplaceBlocks     A function that inserts or replaces blocks.\n * @param {Function} clearSelectedBlock        A function that clears block selection.\n * @return {Function} The event handler for a block drop event.\n */\nexport function onBlockDrop(\n\ttargetRootClientId,\n\ttargetBlockIndex,\n\tgetBlockIndex,\n\tgetClientIdsOfDescendants,\n\tmoveBlocks,\n\tinsertOrReplaceBlocks,\n\tclearSelectedBlock\n) {\n\treturn ( event ) => {\n\t\tconst {\n\t\t\tsrcRootClientId: sourceRootClientId,\n\t\t\tsrcClientIds: sourceClientIds,\n\t\t\ttype: dropType,\n\t\t\tblocks,\n\t\t} = parseDropEvent( event );\n\n\t\t// If the user is inserting a block.\n\t\tif ( dropType === 'inserter' ) {\n\t\t\tclearSelectedBlock();\n\t\t\tconst blocksToInsert = blocks.map( ( block ) =>\n\t\t\t\tcloneBlock( block )\n\t\t\t);\n\t\t\tinsertOrReplaceBlocks( blocksToInsert, true, null );\n\t\t}\n\n\t\t// If the user is moving a block.\n\t\tif ( dropType === 'block' ) {\n\t\t\tconst sourceBlockIndex = getBlockIndex( sourceClientIds[ 0 ] );\n\n\t\t\t// If the user is dropping to the same position, return early.\n\t\t\tif (\n\t\t\t\tsourceRootClientId === targetRootClientId &&\n\t\t\t\tsourceBlockIndex === targetBlockIndex\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If the user is attempting to drop a block within its own\n\t\t\t// nested blocks, return early as this would create infinite\n\t\t\t// recursion.\n\t\t\tif (\n\t\t\t\tsourceClientIds.includes( targetRootClientId ) ||\n\t\t\t\tgetClientIdsOfDescendants( sourceClientIds ).some(\n\t\t\t\t\t( id ) => id === targetRootClientId\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst isAtSameLevel = sourceRootClientId === targetRootClientId;\n\t\t\tconst draggedBlockCount = sourceClientIds.length;\n\n\t\t\t// If the block is kept at the same level and moved downwards,\n\t\t\t// subtract to take into account that the blocks being dragged\n\t\t\t// were removed from the block list above the insertion point.\n\t\t\tconst insertIndex =\n\t\t\t\tisAtSameLevel && sourceBlockIndex < targetBlockIndex\n\t\t\t\t\t? targetBlockIndex - draggedBlockCount\n\t\t\t\t\t: targetBlockIndex;\n\n\t\t\tmoveBlocks( sourceClientIds, sourceRootClientId, insertIndex );\n\t\t}\n\t};\n}\n\n/**\n * A function that returns an event handler function for block-related file drop events.\n *\n * @param {string}   targetRootClientId    The root client id where the block(s) will be inserted.\n * @param {number}   targetBlockIndex      The index where the block(s) will be inserted.\n * @param {boolean}  hasUploadPermissions  Whether the user has upload permissions.\n * @param {Function} updateBlockAttributes A function that updates a block's attributes.\n * @param {Function} canInsertBlockType    A function that returns checks whether a block type can be inserted.\n * @param {Function} insertOrReplaceBlocks A function that inserts or replaces blocks.\n *\n * @return {Function} The event handler for a block-related file drop event.\n */\nexport function onFilesDrop(\n\ttargetRootClientId,\n\ttargetBlockIndex,\n\thasUploadPermissions,\n\tupdateBlockAttributes,\n\tcanInsertBlockType,\n\tinsertOrReplaceBlocks\n) {\n\treturn ( files ) => {\n\t\tif ( ! hasUploadPermissions ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst transformation = findTransform(\n\t\t\tgetBlockTransforms( 'from' ),\n\t\t\t( transform ) =>\n\t\t\t\ttransform.type === 'files' &&\n\t\t\t\tcanInsertBlockType( transform.blockName, targetRootClientId ) &&\n\t\t\t\ttransform.isMatch( files )\n\t\t);\n\n\t\tif ( transformation ) {\n\t\t\tconst blocks = transformation.transform(\n\t\t\t\tfiles,\n\t\t\t\tupdateBlockAttributes\n\t\t\t);\n\t\t\tinsertOrReplaceBlocks( blocks );\n\t\t}\n\t};\n}\n\n/**\n * A function that returns an event handler function for block-related HTML drop events.\n *\n * @param {string}   targetRootClientId    The root client id where the block(s) will be inserted.\n * @param {number}   targetBlockIndex      The index where the block(s) will be inserted.\n * @param {Function} insertOrReplaceBlocks A function that inserts or replaces blocks.\n *\n * @return {Function} The event handler for a block-related HTML drop event.\n */\nexport function onHTMLDrop(\n\ttargetRootClientId,\n\ttargetBlockIndex,\n\tinsertOrReplaceBlocks\n) {\n\treturn ( HTML ) => {\n\t\tconst blocks = pasteHandler( { HTML, mode: 'BLOCKS' } );\n\n\t\tif ( blocks.length ) {\n\t\t\tinsertOrReplaceBlocks( blocks );\n\t\t}\n\t};\n}\n\n/**\n * A React hook for handling block drop events.\n *\n * @param {string}          targetRootClientId  The root client id where the block(s) will be inserted.\n * @param {number}          targetBlockIndex    The index where the block(s) will be inserted.\n * @param {Object}          options             The optional options.\n * @param {WPDropOperation} [options.operation] The type of operation to perform on drop. Could be `insert` or `replace` for now.\n *\n * @return {Function} A function to be passed to the onDrop handler.\n */\nexport default function useOnBlockDrop(\n\ttargetRootClientId,\n\ttargetBlockIndex,\n\toptions = {}\n) {\n\tconst { operation = 'insert' } = options;\n\tconst hasUploadPermissions = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings().mediaUpload,\n\t\t[]\n\t);\n\tconst {\n\t\tcanInsertBlockType,\n\t\tgetBlockIndex,\n\t\tgetClientIdsOfDescendants,\n\t\tgetBlockOrder,\n\t\tgetBlocksByClientId,\n\t} = useSelect( blockEditorStore );\n\tconst {\n\t\tinsertBlocks,\n\t\tmoveBlocksToPosition,\n\t\tupdateBlockAttributes,\n\t\tclearSelectedBlock,\n\t\treplaceBlocks,\n\t\tremoveBlocks,\n\t} = useDispatch( blockEditorStore );\n\tconst registry = useRegistry();\n\n\tconst insertOrReplaceBlocks = useCallback(\n\t\t( blocks, updateSelection = true, initialPosition = 0 ) => {\n\t\t\tif ( operation === 'replace' ) {\n\t\t\t\tconst clientIds = getBlockOrder( targetRootClientId );\n\t\t\t\tconst clientId = clientIds[ targetBlockIndex ];\n\n\t\t\t\treplaceBlocks( clientId, blocks, undefined, initialPosition );\n\t\t\t} else {\n\t\t\t\tinsertBlocks(\n\t\t\t\t\tblocks,\n\t\t\t\t\ttargetBlockIndex,\n\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\tupdateSelection,\n\t\t\t\t\tinitialPosition\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\toperation,\n\t\t\tgetBlockOrder,\n\t\t\tinsertBlocks,\n\t\t\treplaceBlocks,\n\t\t\ttargetBlockIndex,\n\t\t\ttargetRootClientId,\n\t\t]\n\t);\n\n\tconst moveBlocks = useCallback(\n\t\t( sourceClientIds, sourceRootClientId, insertIndex ) => {\n\t\t\tif ( operation === 'replace' ) {\n\t\t\t\tconst sourceBlocks = getBlocksByClientId( sourceClientIds );\n\t\t\t\tconst targetBlockClientIds =\n\t\t\t\t\tgetBlockOrder( targetRootClientId );\n\t\t\t\tconst targetBlockClientId =\n\t\t\t\t\ttargetBlockClientIds[ targetBlockIndex ];\n\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t// Remove the source blocks.\n\t\t\t\t\tremoveBlocks( sourceClientIds, false );\n\t\t\t\t\t// Replace the target block with the source blocks.\n\t\t\t\t\treplaceBlocks(\n\t\t\t\t\t\ttargetBlockClientId,\n\t\t\t\t\t\tsourceBlocks,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t0\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\tsourceClientIds,\n\t\t\t\t\tsourceRootClientId,\n\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\tinsertIndex\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\toperation,\n\t\t\tgetBlockOrder,\n\t\t\tgetBlocksByClientId,\n\t\t\tinsertBlocks,\n\t\t\tmoveBlocksToPosition,\n\t\t\tremoveBlocks,\n\t\t\ttargetBlockIndex,\n\t\t\ttargetRootClientId,\n\t\t]\n\t);\n\n\tconst _onDrop = onBlockDrop(\n\t\ttargetRootClientId,\n\t\ttargetBlockIndex,\n\t\tgetBlockIndex,\n\t\tgetClientIdsOfDescendants,\n\t\tmoveBlocks,\n\t\tinsertOrReplaceBlocks,\n\t\tclearSelectedBlock\n\t);\n\tconst _onFilesDrop = onFilesDrop(\n\t\ttargetRootClientId,\n\t\ttargetBlockIndex,\n\t\thasUploadPermissions,\n\t\tupdateBlockAttributes,\n\t\tcanInsertBlockType,\n\t\tinsertOrReplaceBlocks\n\t);\n\tconst _onHTMLDrop = onHTMLDrop(\n\t\ttargetRootClientId,\n\t\ttargetBlockIndex,\n\t\tinsertOrReplaceBlocks\n\t);\n\n\treturn ( event ) => {\n\t\tconst files = getFilesFromDataTransfer( event.dataTransfer );\n\t\tconst html = event.dataTransfer.getData( 'text/html' );\n\n\t\t/**\n\t\t * From Windows Chrome 96, the `event.dataTransfer` returns both file object and HTML.\n\t\t * The order of the checks is important to recognise the HTML drop.\n\t\t */\n\t\tif ( html ) {\n\t\t\t_onHTMLDrop( html );\n\t\t} else if ( files.length ) {\n\t\t\t_onFilesDrop( files );\n\t\t} else {\n\t\t\t_onDrop( event );\n\t\t}\n\t};\n}\n","/**\n * A string representing the name of an edge.\n *\n * @typedef {'top'|'right'|'bottom'|'left'} WPEdgeName\n */\n\n/**\n * @typedef  {Object} WPPoint\n * @property {number} x The horizontal position.\n * @property {number} y The vertical position.\n */\n\n/**\n * Given a point, a DOMRect and the name of an edge, returns the distance to\n * that edge of the rect.\n *\n * This function works for edges that are horizontal or vertical (e.g. not\n * rotated), the following terms are used so that the function works in both\n * orientations:\n *\n * - Forward, meaning the axis running horizontally when an edge is vertical\n *   and vertically when an edge is horizontal.\n * - Lateral, meaning the axis running vertically when an edge is vertical\n *   and horizontally when an edge is horizontal.\n *\n * @param {WPPoint}    point The point to measure distance from.\n * @param {DOMRect}    rect  A DOM Rect containing edge positions.\n * @param {WPEdgeName} edge  The edge to measure to.\n */\nexport function getDistanceFromPointToEdge( point, rect, edge ) {\n\tconst isHorizontal = edge === 'top' || edge === 'bottom';\n\tconst { x, y } = point;\n\tconst pointLateralPosition = isHorizontal ? x : y;\n\tconst pointForwardPosition = isHorizontal ? y : x;\n\tconst edgeStart = isHorizontal ? rect.left : rect.top;\n\tconst edgeEnd = isHorizontal ? rect.right : rect.bottom;\n\tconst edgeForwardPosition = rect[ edge ];\n\n\t// Measure the straight line distance to the edge of the rect, when the\n\t// point is adjacent to the edge.\n\t// Else, if the point is positioned diagonally to the edge of the rect,\n\t// measure diagonally to the nearest corner that the edge meets.\n\tlet edgeLateralPosition;\n\tif (\n\t\tpointLateralPosition >= edgeStart &&\n\t\tpointLateralPosition <= edgeEnd\n\t) {\n\t\tedgeLateralPosition = pointLateralPosition;\n\t} else if ( pointLateralPosition < edgeEnd ) {\n\t\tedgeLateralPosition = edgeStart;\n\t} else {\n\t\tedgeLateralPosition = edgeEnd;\n\t}\n\n\treturn Math.sqrt(\n\t\t( pointLateralPosition - edgeLateralPosition ) ** 2 +\n\t\t\t( pointForwardPosition - edgeForwardPosition ) ** 2\n\t);\n}\n\n/**\n * Given a point, a DOMRect and a list of allowed edges returns the name of and\n * distance to the nearest edge.\n *\n * @param {WPPoint}      point        The point to measure distance from.\n * @param {DOMRect}      rect         A DOM Rect containing edge positions.\n * @param {WPEdgeName[]} allowedEdges A list of the edges included in the\n *                                    calculation. Defaults to all edges.\n *\n * @return {[number, string]} An array where the first value is the distance\n *                              and a second is the edge name.\n */\nexport function getDistanceToNearestEdge(\n\tpoint,\n\trect,\n\tallowedEdges = [ 'top', 'bottom', 'left', 'right' ]\n) {\n\tlet candidateDistance;\n\tlet candidateEdge;\n\n\tallowedEdges.forEach( ( edge ) => {\n\t\tconst distance = getDistanceFromPointToEdge( point, rect, edge );\n\n\t\tif ( candidateDistance === undefined || distance < candidateDistance ) {\n\t\t\tcandidateDistance = distance;\n\t\t\tcandidateEdge = edge;\n\t\t}\n\t} );\n\n\treturn [ candidateDistance, candidateEdge ];\n}\n\n/**\n * Is the point contained by the rectangle.\n *\n * @param {WPPoint} point The point.\n * @param {DOMRect} rect  The rectangle.\n *\n * @return {boolean} True if the point is contained by the rectangle, false otherwise.\n */\nexport function isPointContainedByRect( point, rect ) {\n\treturn (\n\t\trect.left <= point.x &&\n\t\trect.right >= point.x &&\n\t\trect.top <= point.y &&\n\t\trect.bottom >= point.y\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useViewportMatch, useMergeRefs } from '@wordpress/compose';\nimport { forwardRef, useMemo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tgetBlockSupport,\n\tstore as blocksStore,\n\t__unstableGetInnerBlocksProps as getInnerBlocksProps,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport ButtonBlockAppender from './button-block-appender';\nimport DefaultBlockAppender from './default-block-appender';\nimport useNestedSettingsUpdate from './use-nested-settings-update';\nimport useInnerBlockTemplateSync from './use-inner-block-template-sync';\nimport useBlockContext from './use-block-context';\nimport { BlockListItems } from '../block-list';\nimport { BlockContextProvider } from '../block-context';\nimport { useBlockEditContext } from '../block-edit/context';\nimport useBlockSync from '../provider/use-block-sync';\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDropZone from '../use-block-drop-zone';\nimport useSetting from '../use-setting';\n\nconst EMPTY_OBJECT = {};\n\n/**\n * InnerBlocks is a component which allows a single block to have multiple blocks\n * as children. The UncontrolledInnerBlocks component is used whenever the inner\n * blocks are not controlled by another entity. In other words, it is normally\n * used for inner blocks in the post editor\n *\n * @param {Object} props The component props.\n */\nfunction UncontrolledInnerBlocks( props ) {\n\tconst {\n\t\tclientId,\n\t\tallowedBlocks,\n\t\tprioritizedInserterBlocks,\n\t\t__experimentalDefaultBlock,\n\t\t__experimentalDirectInsert,\n\t\ttemplate,\n\t\ttemplateLock,\n\t\twrapperRef,\n\t\ttemplateInsertUpdatesSelection,\n\t\t__experimentalCaptureToolbars: captureToolbars,\n\t\t__experimentalAppenderTagName,\n\t\trenderAppender,\n\t\torientation,\n\t\tplaceholder,\n\t\tlayout,\n\t} = props;\n\n\tuseNestedSettingsUpdate(\n\t\tclientId,\n\t\tallowedBlocks,\n\t\tprioritizedInserterBlocks,\n\t\t__experimentalDefaultBlock,\n\t\t__experimentalDirectInsert,\n\t\ttemplateLock,\n\t\tcaptureToolbars,\n\t\torientation,\n\t\tlayout\n\t);\n\n\tuseInnerBlockTemplateSync(\n\t\tclientId,\n\t\ttemplate,\n\t\ttemplateLock,\n\t\ttemplateInsertUpdatesSelection\n\t);\n\n\tconst context = useBlockContext( clientId );\n\tconst name = useSelect(\n\t\t( select ) => {\n\t\t\treturn select( blockEditorStore ).getBlock( clientId )?.name;\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst defaultLayoutBlockSupport =\n\t\tgetBlockSupport( name, '__experimentalLayout' ) || EMPTY_OBJECT;\n\n\tconst { allowSizingOnChildren = false } = defaultLayoutBlockSupport;\n\n\tconst defaultLayout = useSetting( 'layout' ) || EMPTY_OBJECT;\n\n\tconst usedLayout = layout || defaultLayoutBlockSupport;\n\n\tconst memoedLayout = useMemo(\n\t\t() => ( {\n\t\t\t// Default layout will know about any content/wide size defined by the theme.\n\t\t\t...defaultLayout,\n\t\t\t...usedLayout,\n\t\t\t...( allowSizingOnChildren && {\n\t\t\t\tallowSizingOnChildren: true,\n\t\t\t} ),\n\t\t} ),\n\t\t[ defaultLayout, usedLayout, allowSizingOnChildren ]\n\t);\n\n\t// This component needs to always be synchronous as it's the one changing\n\t// the async mode depending on the block selection.\n\treturn (\n\t\t<BlockContextProvider value={ context }>\n\t\t\t<BlockListItems\n\t\t\t\trootClientId={ clientId }\n\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t__experimentalAppenderTagName={ __experimentalAppenderTagName }\n\t\t\t\t__experimentalLayout={ memoedLayout }\n\t\t\t\twrapperRef={ wrapperRef }\n\t\t\t\tplaceholder={ placeholder }\n\t\t\t/>\n\t\t</BlockContextProvider>\n\t);\n}\n\n/**\n * The controlled inner blocks component wraps the uncontrolled inner blocks\n * component with the blockSync hook. This keeps the innerBlocks of the block in\n * the block-editor store in sync with the blocks of the controlling entity. An\n * example of an inner block controller is a template part block, which provides\n * its own blocks from the template part entity data source.\n *\n * @param {Object} props The component props.\n */\nfunction ControlledInnerBlocks( props ) {\n\tuseBlockSync( props );\n\treturn <UncontrolledInnerBlocks { ...props } />;\n}\n\nconst ForwardedInnerBlocks = forwardRef( ( props, ref ) => {\n\tconst innerBlocksProps = useInnerBlocksProps( { ref }, props );\n\treturn (\n\t\t<div className=\"block-editor-inner-blocks\">\n\t\t\t<div { ...innerBlocksProps } />\n\t\t</div>\n\t);\n} );\n\n/**\n * This hook is used to lightly mark an element as an inner blocks wrapper\n * element. Call this hook and pass the returned props to the element to mark as\n * an inner blocks wrapper, automatically rendering inner blocks as children. If\n * you define a ref for the element, it is important to pass the ref to this\n * hook, which the hook in turn will pass to the component through the props it\n * returns. Optionally, you can also pass any other props through this hook, and\n * they will be merged and returned.\n *\n * @param {Object} props   Optional. Props to pass to the element. Must contain\n *                         the ref if one is defined.\n * @param {Object} options Optional. Inner blocks options.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/inner-blocks/README.md\n */\nexport function useInnerBlocksProps( props = {}, options = {} ) {\n\tconst { __unstableDisableLayoutClassNames, __unstableDisableDropZone } =\n\t\toptions;\n\tconst {\n\t\tclientId,\n\t\tlayout = null,\n\t\t__unstableLayoutClassNames: layoutClassNames = '',\n\t} = useBlockEditContext();\n\tconst isSmallScreen = useViewportMatch( 'medium', '<' );\n\tconst { __experimentalCaptureToolbars, hasOverlay } = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tisBlockSelected,\n\t\t\t\thasSelectedInnerBlock,\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst enableClickThrough =\n\t\t\t\t__unstableGetEditorMode() === 'navigation' || isSmallScreen;\n\t\t\treturn {\n\t\t\t\t__experimentalCaptureToolbars: select(\n\t\t\t\t\tblocksStore\n\t\t\t\t).hasBlockSupport(\n\t\t\t\t\tblockName,\n\t\t\t\t\t'__experimentalExposeControlsToChildren',\n\t\t\t\t\tfalse\n\t\t\t\t),\n\t\t\t\thasOverlay:\n\t\t\t\t\tblockName !== 'core/template' &&\n\t\t\t\t\t! isBlockSelected( clientId ) &&\n\t\t\t\t\t! hasSelectedInnerBlock( clientId, true ) &&\n\t\t\t\t\tenableClickThrough,\n\t\t\t};\n\t\t},\n\t\t[ clientId, isSmallScreen ]\n\t);\n\n\tconst blockDropZoneRef = useBlockDropZone( {\n\t\trootClientId: clientId,\n\t} );\n\n\tconst ref = useMergeRefs( [\n\t\tprops.ref,\n\t\t__unstableDisableDropZone ? null : blockDropZoneRef,\n\t] );\n\n\tconst innerBlocksProps = {\n\t\t__experimentalCaptureToolbars,\n\t\tlayout,\n\t\t...options,\n\t};\n\tconst InnerBlocks =\n\t\tinnerBlocksProps.value && innerBlocksProps.onChange\n\t\t\t? ControlledInnerBlocks\n\t\t\t: UncontrolledInnerBlocks;\n\n\treturn {\n\t\t...props,\n\t\tref,\n\t\tclassName: classnames(\n\t\t\tprops.className,\n\t\t\t'block-editor-block-list__layout',\n\t\t\t__unstableDisableLayoutClassNames ? '' : layoutClassNames,\n\t\t\t{\n\t\t\t\t'has-overlay': hasOverlay,\n\t\t\t}\n\t\t),\n\t\tchildren: clientId ? (\n\t\t\t<InnerBlocks { ...innerBlocksProps } clientId={ clientId } />\n\t\t) : (\n\t\t\t<BlockListItems { ...options } />\n\t\t),\n\t};\n}\n\nuseInnerBlocksProps.save = getInnerBlocksProps;\n\n// Expose default appender placeholders as components.\nForwardedInnerBlocks.DefaultBlockAppender = DefaultBlockAppender;\nForwardedInnerBlocks.ButtonBlockAppender = ButtonBlockAppender;\n\nForwardedInnerBlocks.Content = () => useInnerBlocksProps.save().children;\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/inner-blocks/README.md\n */\nexport default ForwardedInnerBlocks;\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useLayoutEffect } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { synchronizeBlocksWithTemplate } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * This hook makes sure that a block's inner blocks stay in sync with the given\n * block \"template\". The template is a block hierarchy to which inner blocks must\n * conform. If the blocks get \"out of sync\" with the template and the template\n * is meant to be locked (e.g. templateLock = \"all\" or templateLock = \"contentOnly\"),\n * then we replace the inner blocks with the correct value after synchronizing it with the template.\n *\n * @param {string}  clientId                       The block client ID.\n * @param {Object}  template                       The template to match.\n * @param {string}  templateLock                   The template lock state for the inner blocks. For\n *                                                 example, if the template lock is set to \"all\",\n *                                                 then the inner blocks will stay in sync with the\n *                                                 template. If not defined or set to false, then\n *                                                 the inner blocks will not be synchronized with\n *                                                 the given template.\n * @param {boolean} templateInsertUpdatesSelection Whether or not to update the\n *                                                 block-editor selection state when inner blocks\n *                                                 are replaced after template synchronization.\n */\nexport default function useInnerBlockTemplateSync(\n\tclientId,\n\ttemplate,\n\ttemplateLock,\n\ttemplateInsertUpdatesSelection\n) {\n\tconst {\n\t\tgetBlocks,\n\t\tgetSelectedBlocksInitialCaretPosition,\n\t\tisBlockSelected,\n\t} = useSelect( blockEditorStore );\n\tconst { replaceInnerBlocks, __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\n\tconst { innerBlocks } = useSelect(\n\t\t( select ) => ( {\n\t\t\tinnerBlocks: select( blockEditorStore ).getBlocks( clientId ),\n\t\t} ),\n\t\t[ clientId ]\n\t);\n\n\t// Maintain a reference to the previous value so we can do a deep equality check.\n\tconst existingTemplate = useRef( null );\n\n\tuseLayoutEffect( () => {\n\t\tlet isCancelled = false;\n\n\t\t// There's an implicit dependency between useInnerBlockTemplateSync and useNestedSettingsUpdate\n\t\t// The former needs to happen after the latter and since the latter is using microtasks to batch updates (performance optimization),\n\t\t// we need to schedule this one in a microtask as well.\n\t\t// Example: If you remove queueMicrotask here, ctrl + click to insert quote block won't close the inserter.\n\t\twindow.queueMicrotask( () => {\n\t\t\tif ( isCancelled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Only synchronize innerBlocks with template if innerBlocks are empty\n\t\t\t// or a locking \"all\" or \"contentOnly\" exists directly on the block.\n\t\t\tconst currentInnerBlocks = getBlocks( clientId );\n\t\t\tconst shouldApplyTemplate =\n\t\t\t\tcurrentInnerBlocks.length === 0 ||\n\t\t\t\ttemplateLock === 'all' ||\n\t\t\t\ttemplateLock === 'contentOnly';\n\n\t\t\tconst hasTemplateChanged = ! fastDeepEqual(\n\t\t\t\ttemplate,\n\t\t\t\texistingTemplate.current\n\t\t\t);\n\n\t\t\tif ( ! shouldApplyTemplate || ! hasTemplateChanged ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\texistingTemplate.current = template;\n\t\t\tconst nextBlocks = synchronizeBlocksWithTemplate(\n\t\t\t\tcurrentInnerBlocks,\n\t\t\t\ttemplate\n\t\t\t);\n\n\t\t\tif ( ! fastDeepEqual( nextBlocks, currentInnerBlocks ) ) {\n\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\treplaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tnextBlocks,\n\t\t\t\t\tcurrentInnerBlocks.length === 0 &&\n\t\t\t\t\t\ttemplateInsertUpdatesSelection &&\n\t\t\t\t\t\tnextBlocks.length !== 0 &&\n\t\t\t\t\t\tisBlockSelected( clientId ),\n\t\t\t\t\t// This ensures the \"initialPosition\" doesn't change when applying the template\n\t\t\t\t\t// If we're supposed to focus the block, we'll focus the first inner block\n\t\t\t\t\t// otherwise, we won't apply any auto-focus.\n\t\t\t\t\t// This ensures for instance that the focus stays in the inserter when inserting the \"buttons\" block.\n\t\t\t\t\tgetSelectedBlocksInitialCaretPosition()\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\treturn () => {\n\t\t\tisCancelled = true;\n\t\t};\n\t}, [ innerBlocks, template, templateLock, clientId ] );\n}\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Returns a context object for a given block.\n *\n * @param {string} clientId The block client ID.\n *\n * @return {Record<string,*>} Context value.\n */\nexport default function useBlockContext( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst block = select( blockEditorStore ).getBlock( clientId );\n\t\t\tif ( ! block ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst blockType = select( blocksStore ).getBlockType( block.name );\n\t\t\tif ( ! blockType ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif ( Object.keys( blockType.providesContext ).length === 0 ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn Object.fromEntries(\n\t\t\t\tObject.entries( blockType.providesContext ).map(\n\t\t\t\t\t( [ contextName, attributeName ] ) => [\n\t\t\t\t\t\tcontextName,\n\t\t\t\t\t\tblock.attributes[ attributeName ],\n\t\t\t\t\t]\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect, useRegistry } from '@wordpress/data';\nimport { useCallback, useState } from '@wordpress/element';\nimport {\n\tuseThrottle,\n\t__experimentalUseDropZone as useDropZone,\n} from '@wordpress/compose';\nimport { isRTL } from '@wordpress/i18n';\nimport { isUnmodifiedDefaultBlock as getIsUnmodifiedDefaultBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport useOnBlockDrop from '../use-on-block-drop';\nimport {\n\tgetDistanceToNearestEdge,\n\tisPointContainedByRect,\n} from '../../utils/math';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\n/** @typedef {import('../../utils/math').WPPoint} WPPoint */\n/** @typedef {import('../use-on-block-drop/types').WPDropOperation} WPDropOperation */\n\n/**\n * The orientation of a block list.\n *\n * @typedef {'horizontal'|'vertical'|undefined} WPBlockListOrientation\n */\n\n/**\n * The insert position when dropping a block.\n *\n * @typedef {'before'|'after'} WPInsertPosition\n */\n\n/**\n * @typedef {Object} WPBlockData\n * @property {boolean}       isUnmodifiedDefaultBlock Is the block unmodified default block.\n * @property {() => DOMRect} getBoundingClientRect    Get the bounding client rect of the block.\n * @property {number}        blockIndex               The index of the block.\n */\n\n/**\n * Get the drop target position from a given drop point and the orientation.\n *\n * @param {WPBlockData[]}          blocksData  The block data list.\n * @param {WPPoint}                position    The position of the item being dragged.\n * @param {WPBlockListOrientation} orientation The orientation of the block list.\n * @return {[number, WPDropOperation]} The drop target position.\n */\nexport function getDropTargetPosition(\n\tblocksData,\n\tposition,\n\torientation = 'vertical'\n) {\n\tconst allowedEdges =\n\t\torientation === 'horizontal'\n\t\t\t? [ 'left', 'right' ]\n\t\t\t: [ 'top', 'bottom' ];\n\n\tconst isRightToLeft = isRTL();\n\n\tlet nearestIndex = 0;\n\tlet insertPosition = 'before';\n\tlet minDistance = Infinity;\n\n\tblocksData.forEach(\n\t\t( { isUnmodifiedDefaultBlock, getBoundingClientRect, blockIndex } ) => {\n\t\t\tconst rect = getBoundingClientRect();\n\n\t\t\tlet [ distance, edge ] = getDistanceToNearestEdge(\n\t\t\t\tposition,\n\t\t\t\trect,\n\t\t\t\tallowedEdges\n\t\t\t);\n\t\t\t// Prioritize the element if the point is inside of an unmodified default block.\n\t\t\tif (\n\t\t\t\tisUnmodifiedDefaultBlock &&\n\t\t\t\tisPointContainedByRect( position, rect )\n\t\t\t) {\n\t\t\t\tdistance = 0;\n\t\t\t}\n\n\t\t\tif ( distance < minDistance ) {\n\t\t\t\t// Where the dropped block will be inserted on the nearest block.\n\t\t\t\tinsertPosition =\n\t\t\t\t\tedge === 'bottom' ||\n\t\t\t\t\t( ! isRightToLeft && edge === 'right' ) ||\n\t\t\t\t\t( isRightToLeft && edge === 'left' )\n\t\t\t\t\t\t? 'after'\n\t\t\t\t\t\t: 'before';\n\n\t\t\t\t// Update the currently known best candidate.\n\t\t\t\tminDistance = distance;\n\t\t\t\tnearestIndex = blockIndex;\n\t\t\t}\n\t\t}\n\t);\n\n\tconst adjacentIndex =\n\t\tnearestIndex + ( insertPosition === 'after' ? 1 : -1 );\n\tconst isNearestBlockUnmodifiedDefaultBlock =\n\t\t!! blocksData[ nearestIndex ]?.isUnmodifiedDefaultBlock;\n\tconst isAdjacentBlockUnmodifiedDefaultBlock =\n\t\t!! blocksData[ adjacentIndex ]?.isUnmodifiedDefaultBlock;\n\n\t// If both blocks are not unmodified default blocks then just insert between them.\n\tif (\n\t\t! isNearestBlockUnmodifiedDefaultBlock &&\n\t\t! isAdjacentBlockUnmodifiedDefaultBlock\n\t) {\n\t\t// If the user is dropping to the trailing edge of the block\n\t\t// add 1 to the index to represent dragging after.\n\t\tconst insertionIndex =\n\t\t\tinsertPosition === 'after' ? nearestIndex + 1 : nearestIndex;\n\t\treturn [ insertionIndex, 'insert' ];\n\t}\n\n\t// Otherwise, replace the nearest unmodified default block.\n\treturn [\n\t\tisNearestBlockUnmodifiedDefaultBlock ? nearestIndex : adjacentIndex,\n\t\t'replace',\n\t];\n}\n\n/**\n * @typedef  {Object} WPBlockDropZoneConfig\n * @property {string} rootClientId The root client id for the block list.\n */\n\n/**\n * A React hook that can be used to make a block list handle drag and drop.\n *\n * @param {WPBlockDropZoneConfig} dropZoneConfig configuration data for the drop zone.\n */\nexport default function useBlockDropZone( {\n\t// An undefined value represents a top-level block. Default to an empty\n\t// string for this so that `targetRootClientId` can be easily compared to\n\t// values returned by the `getRootBlockClientId` selector, which also uses\n\t// an empty string to represent top-level blocks.\n\trootClientId: targetRootClientId = '',\n} = {} ) {\n\tconst registry = useRegistry();\n\tconst [ dropTarget, setDropTarget ] = useState( {\n\t\tindex: null,\n\t\toperation: 'insert',\n\t} );\n\n\tconst isDisabled = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\t__unstableIsWithinBlockOverlay,\n\t\t\t\t__unstableHasActiveBlockOverlayActive,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\t\t\tconst blockEditingMode = getBlockEditingMode( targetRootClientId );\n\t\t\treturn (\n\t\t\t\tblockEditingMode !== 'default' ||\n\t\t\t\t__unstableHasActiveBlockOverlayActive( targetRootClientId ) ||\n\t\t\t\t__unstableIsWithinBlockOverlay( targetRootClientId )\n\t\t\t);\n\t\t},\n\t\t[ targetRootClientId ]\n\t);\n\n\tconst { getBlockListSettings, getBlocks, getBlockIndex } =\n\t\tuseSelect( blockEditorStore );\n\tconst { showInsertionPoint, hideInsertionPoint } =\n\t\tuseDispatch( blockEditorStore );\n\n\tconst onBlockDrop = useOnBlockDrop( targetRootClientId, dropTarget.index, {\n\t\toperation: dropTarget.operation,\n\t} );\n\tconst throttled = useThrottle(\n\t\tuseCallback(\n\t\t\t( event, ownerDocument ) => {\n\t\t\t\tconst blocks = getBlocks( targetRootClientId );\n\n\t\t\t\t// The block list is empty, don't show the insertion point but still allow dropping.\n\t\t\t\tif ( blocks.length === 0 ) {\n\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\tsetDropTarget( {\n\t\t\t\t\t\t\tindex: 0,\n\t\t\t\t\t\t\toperation: 'insert',\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tshowInsertionPoint( targetRootClientId, 0, {\n\t\t\t\t\t\t\toperation: 'insert',\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst blocksData = blocks.map( ( block ) => {\n\t\t\t\t\tconst clientId = block.clientId;\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tisUnmodifiedDefaultBlock:\n\t\t\t\t\t\t\tgetIsUnmodifiedDefaultBlock( block ),\n\t\t\t\t\t\tgetBoundingClientRect: () =>\n\t\t\t\t\t\t\townerDocument\n\t\t\t\t\t\t\t\t.getElementById( `block-${ clientId }` )\n\t\t\t\t\t\t\t\t.getBoundingClientRect(),\n\t\t\t\t\t\tblockIndex: getBlockIndex( clientId ),\n\t\t\t\t\t};\n\t\t\t\t} );\n\n\t\t\t\tconst [ targetIndex, operation ] = getDropTargetPosition(\n\t\t\t\t\tblocksData,\n\t\t\t\t\t{ x: event.clientX, y: event.clientY },\n\t\t\t\t\tgetBlockListSettings( targetRootClientId )?.orientation\n\t\t\t\t);\n\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\tsetDropTarget( {\n\t\t\t\t\t\tindex: targetIndex,\n\t\t\t\t\t\toperation,\n\t\t\t\t\t} );\n\t\t\t\t\tshowInsertionPoint( targetRootClientId, targetIndex, {\n\t\t\t\t\t\toperation,\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t},\n\t\t\t[\n\t\t\t\tgetBlocks,\n\t\t\t\ttargetRootClientId,\n\t\t\t\tgetBlockListSettings,\n\t\t\t\tregistry,\n\t\t\t\tshowInsertionPoint,\n\t\t\t\tgetBlockIndex,\n\t\t\t]\n\t\t),\n\t\t200\n\t);\n\n\treturn useDropZone( {\n\t\tisDisabled,\n\t\tonDrop: onBlockDrop,\n\t\tonDragOver( event ) {\n\t\t\t// `currentTarget` is only available while the event is being\n\t\t\t// handled, so get it now and pass it to the thottled function.\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget\n\t\t\tthrottled( event, event.currentTarget.ownerDocument );\n\t\t},\n\t\tonDragLeave() {\n\t\t\tthrottled.cancel();\n\t\t\thideInsertionPoint();\n\t\t},\n\t\tonDragEnd() {\n\t\t\tthrottled.cancel();\n\t\t\thideInsertionPoint();\n\t\t},\n\t} );\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tAsyncModeProvider,\n\tuseSelect,\n\tuseDispatch,\n\tuseRegistry,\n} from '@wordpress/data';\nimport {\n\tuseViewportMatch,\n\tuseMergeRefs,\n\tuseDebounce,\n} from '@wordpress/compose';\nimport {\n\tcreateContext,\n\tuseState,\n\tuseMemo,\n\tuseCallback,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockListBlock from './block';\nimport BlockListAppender from '../block-list-appender';\nimport { useInBetweenInserter } from './use-in-between-inserter';\nimport { store as blockEditorStore } from '../../store';\nimport { usePreParsePatterns } from '../../utils/pre-parse-patterns';\nimport { LayoutProvider, defaultLayout } from './layout';\nimport BlockToolsBackCompat from '../block-tools/back-compat';\nimport { useBlockSelectionClearer } from '../block-selection-clearer';\nimport { useInnerBlocksProps } from '../inner-blocks';\nimport {\n\tBlockEditContextProvider,\n\tDEFAULT_BLOCK_EDIT_CONTEXT,\n} from '../block-edit/context';\n\nconst elementContext = createContext();\n\nexport const IntersectionObserver = createContext();\nconst pendingBlockVisibilityUpdatesPerRegistry = new WeakMap();\n\nfunction Root( { className, ...settings } ) {\n\tconst [ element, setElement ] = useState();\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\tconst { isOutlineMode, isFocusMode, editorMode } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getSettings, __unstableGetEditorMode } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst { outlineMode, focusMode } = getSettings();\n\t\t\treturn {\n\t\t\t\tisOutlineMode: outlineMode,\n\t\t\t\tisFocusMode: focusMode,\n\t\t\t\teditorMode: __unstableGetEditorMode(),\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\tconst registry = useRegistry();\n\tconst { setBlockVisibility } = useDispatch( blockEditorStore );\n\n\tconst delayedBlockVisibilityUpdates = useDebounce(\n\t\tuseCallback( () => {\n\t\t\tconst updates = {};\n\t\t\tpendingBlockVisibilityUpdatesPerRegistry\n\t\t\t\t.get( registry )\n\t\t\t\t.forEach( ( [ id, isIntersecting ] ) => {\n\t\t\t\t\tupdates[ id ] = isIntersecting;\n\t\t\t\t} );\n\t\t\tsetBlockVisibility( updates );\n\t\t}, [ registry ] ),\n\t\t300,\n\t\t{\n\t\t\ttrailing: true,\n\t\t}\n\t);\n\tconst intersectionObserver = useMemo( () => {\n\t\tconst { IntersectionObserver: Observer } = window;\n\n\t\tif ( ! Observer ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn new Observer( ( entries ) => {\n\t\t\tif ( ! pendingBlockVisibilityUpdatesPerRegistry.get( registry ) ) {\n\t\t\t\tpendingBlockVisibilityUpdatesPerRegistry.set( registry, [] );\n\t\t\t}\n\t\t\tfor ( const entry of entries ) {\n\t\t\t\tconst clientId = entry.target.getAttribute( 'data-block' );\n\t\t\t\tpendingBlockVisibilityUpdatesPerRegistry\n\t\t\t\t\t.get( registry )\n\t\t\t\t\t.push( [ clientId, entry.isIntersecting ] );\n\t\t\t}\n\t\t\tdelayedBlockVisibilityUpdates();\n\t\t} );\n\t}, [] );\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tref: useMergeRefs( [\n\t\t\t\tuseBlockSelectionClearer(),\n\t\t\t\tuseInBetweenInserter(),\n\t\t\t\tsetElement,\n\t\t\t] ),\n\t\t\tclassName: classnames( 'is-root-container', className, {\n\t\t\t\t'is-outline-mode': isOutlineMode,\n\t\t\t\t'is-focus-mode': isFocusMode && isLargeViewport,\n\t\t\t\t'is-navigate-mode': editorMode === 'navigation',\n\t\t\t} ),\n\t\t},\n\t\tsettings\n\t);\n\treturn (\n\t\t<elementContext.Provider value={ element }>\n\t\t\t<IntersectionObserver.Provider value={ intersectionObserver }>\n\t\t\t\t<div { ...innerBlocksProps } />\n\t\t\t</IntersectionObserver.Provider>\n\t\t</elementContext.Provider>\n\t);\n}\n\nexport default function BlockList( settings ) {\n\tusePreParsePatterns();\n\treturn (\n\t\t<BlockToolsBackCompat>\n\t\t\t<BlockEditContextProvider value={ DEFAULT_BLOCK_EDIT_CONTEXT }>\n\t\t\t\t<Root { ...settings } />\n\t\t\t</BlockEditContextProvider>\n\t\t</BlockToolsBackCompat>\n\t);\n}\n\nBlockList.__unstableElementContext = elementContext;\n\nfunction Items( {\n\tplaceholder,\n\trootClientId,\n\trenderAppender,\n\t__experimentalAppenderTagName,\n\t__experimentalLayout: layout = defaultLayout,\n} ) {\n\tconst { order, selectedBlocks, visibleBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\t__unstableGetVisibleBlocks,\n\t\t\t} = select( blockEditorStore );\n\t\t\treturn {\n\t\t\t\torder: getBlockOrder( rootClientId ),\n\t\t\t\tselectedBlocks: getSelectedBlockClientIds(),\n\t\t\t\tvisibleBlocks: __unstableGetVisibleBlocks(),\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\n\treturn (\n\t\t<LayoutProvider value={ layout }>\n\t\t\t{ order.map( ( clientId ) => (\n\t\t\t\t<AsyncModeProvider\n\t\t\t\t\tkey={ clientId }\n\t\t\t\t\tvalue={\n\t\t\t\t\t\t// Only provide data asynchronously if the block is\n\t\t\t\t\t\t// not visible and not selected.\n\t\t\t\t\t\t! visibleBlocks.has( clientId ) &&\n\t\t\t\t\t\t! selectedBlocks.includes( clientId )\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<BlockListBlock\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t/>\n\t\t\t\t</AsyncModeProvider>\n\t\t\t) ) }\n\t\t\t{ order.length < 1 && placeholder }\n\t\t\t<BlockListAppender\n\t\t\t\ttagName={ __experimentalAppenderTagName }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\trenderAppender={ renderAppender }\n\t\t\t/>\n\t\t</LayoutProvider>\n\t);\n}\n\nexport function BlockListItems( props ) {\n\t// This component needs to always be synchronous as it's the one changing\n\t// the async mode depending on the block selection.\n\treturn (\n\t\t<AsyncModeProvider value={ false }>\n\t\t\t<Items { ...props } />\n\t\t</AsyncModeProvider>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { kebabCase } from 'lodash';\nimport { colord, extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\nimport a11yPlugin from 'colord/plugins/a11y';\n\nextend( [ namesPlugin, a11yPlugin ] );\n\n/**\n * Provided an array of color objects as set by the theme or by the editor defaults,\n * and the values of the defined color or custom color returns a color object describing the color.\n *\n * @param {Array}   colors       Array of color objects as set by the theme or by the editor defaults.\n * @param {?string} definedColor A string containing the color slug.\n * @param {?string} customColor  A string containing the customColor value.\n *\n * @return {?Object} If definedColor is passed and the name is found in colors,\n *                   the color object exactly as set by the theme or editor defaults is returned.\n *                   Otherwise, an object that just sets the color is defined.\n */\nexport const getColorObjectByAttributeValues = (\n\tcolors,\n\tdefinedColor,\n\tcustomColor\n) => {\n\tif ( definedColor ) {\n\t\tconst colorObj = colors?.find(\n\t\t\t( color ) => color.slug === definedColor\n\t\t);\n\n\t\tif ( colorObj ) {\n\t\t\treturn colorObj;\n\t\t}\n\t}\n\treturn {\n\t\tcolor: customColor,\n\t};\n};\n\n/**\n * Provided an array of color objects as set by the theme or by the editor defaults, and a color value returns the color object matching that value or undefined.\n *\n * @param {Array}   colors     Array of color objects as set by the theme or by the editor defaults.\n * @param {?string} colorValue A string containing the color value.\n *\n * @return {?Object} Color object included in the colors array whose color property equals colorValue.\n *                   Returns undefined if no color object matches this requirement.\n */\nexport const getColorObjectByColorValue = ( colors, colorValue ) => {\n\treturn colors?.find( ( color ) => color.color === colorValue );\n};\n\n/**\n * Returns a class based on the context a color is being used and its slug.\n *\n * @param {string} colorContextName Context/place where color is being used e.g: background, text etc...\n * @param {string} colorSlug        Slug of the color.\n *\n * @return {?string} String with the class corresponding to the color in the provided context.\n *                   Returns undefined if either colorContextName or colorSlug are not provided.\n */\nexport function getColorClassName( colorContextName, colorSlug ) {\n\tif ( ! colorContextName || ! colorSlug ) {\n\t\treturn undefined;\n\t}\n\n\treturn `has-${ kebabCase( colorSlug ) }-${ colorContextName }`;\n}\n\n/**\n * Given an array of color objects and a color value returns the color value of the most readable color in the array.\n *\n * @param {Array}   colors     Array of color objects as set by the theme or by the editor defaults.\n * @param {?string} colorValue A string containing the color value.\n *\n * @return {string} String with the color value of the most readable color.\n */\nexport function getMostReadableColor( colors, colorValue ) {\n\tconst colordColor = colord( colorValue );\n\tconst getColorContrast = ( { color } ) => colordColor.contrast( color );\n\n\tconst maxContrast = Math.max( ...colors.map( getColorContrast ) );\n\treturn colors.find( ( color ) => getColorContrast( color ) === maxContrast )\n\t\t.color;\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useSetting from '../use-setting';\n\n/**\n * Retrieves color and gradient related settings.\n *\n * The arrays for colors and gradients are made up of color palettes from each\n * origin i.e. \"Core\", \"Theme\", and \"User\".\n *\n * @return {Object} Color and gradient related settings.\n */\nexport default function useMultipleOriginColorsAndGradients() {\n\tconst colorGradientSettings = {\n\t\tdisableCustomColors: ! useSetting( 'color.custom' ),\n\t\tdisableCustomGradients: ! useSetting( 'color.customGradient' ),\n\t};\n\tconst customColors = useSetting( 'color.palette.custom' );\n\tconst themeColors = useSetting( 'color.palette.theme' );\n\tconst defaultColors = useSetting( 'color.palette.default' );\n\tconst shouldDisplayDefaultColors = useSetting( 'color.defaultPalette' );\n\n\tcolorGradientSettings.colors = useMemo( () => {\n\t\tconst result = [];\n\t\tif ( themeColors && themeColors.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Theme',\n\t\t\t\t\t'Indicates this palette comes from the theme.'\n\t\t\t\t),\n\t\t\t\tcolors: themeColors,\n\t\t\t} );\n\t\t}\n\t\tif (\n\t\t\tshouldDisplayDefaultColors &&\n\t\t\tdefaultColors &&\n\t\t\tdefaultColors.length\n\t\t) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Default',\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\n\t\t\t\t),\n\t\t\t\tcolors: defaultColors,\n\t\t\t} );\n\t\t}\n\t\tif ( customColors && customColors.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Custom',\n\t\t\t\t\t'Indicates this palette comes from the theme.'\n\t\t\t\t),\n\t\t\t\tcolors: customColors,\n\t\t\t} );\n\t\t}\n\t\treturn result;\n\t}, [\n\t\tdefaultColors,\n\t\tthemeColors,\n\t\tcustomColors,\n\t\tshouldDisplayDefaultColors,\n\t] );\n\n\tconst customGradients = useSetting( 'color.gradients.custom' );\n\tconst themeGradients = useSetting( 'color.gradients.theme' );\n\tconst defaultGradients = useSetting( 'color.gradients.default' );\n\tconst shouldDisplayDefaultGradients = useSetting(\n\t\t'color.defaultGradients'\n\t);\n\tcolorGradientSettings.gradients = useMemo( () => {\n\t\tconst result = [];\n\t\tif ( themeGradients && themeGradients.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Theme',\n\t\t\t\t\t'Indicates this palette comes from the theme.'\n\t\t\t\t),\n\t\t\t\tgradients: themeGradients,\n\t\t\t} );\n\t\t}\n\t\tif (\n\t\t\tshouldDisplayDefaultGradients &&\n\t\t\tdefaultGradients &&\n\t\t\tdefaultGradients.length\n\t\t) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Default',\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\n\t\t\t\t),\n\t\t\t\tgradients: defaultGradients,\n\t\t\t} );\n\t\t}\n\t\tif ( customGradients && customGradients.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Custom',\n\t\t\t\t\t'Indicates this palette is created by the user.'\n\t\t\t\t),\n\t\t\t\tgradients: customGradients,\n\t\t\t} );\n\t\t}\n\t\treturn result;\n\t}, [\n\t\tcustomGradients,\n\t\tthemeGradients,\n\t\tdefaultGradients,\n\t\tshouldDisplayDefaultGradients,\n\t] );\n\n\tcolorGradientSettings.hasColorsOrGradients =\n\t\t!! colorGradientSettings.colors.length ||\n\t\t!! colorGradientSettings.gradients.length;\n\n\treturn colorGradientSettings;\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue } from '@wordpress/components';\n\n/**\n * Gets the (non-undefined) item with the highest occurrence within an array\n * Based in part on: https://stackoverflow.com/a/20762713\n *\n * Undefined values are always sorted to the end by `sort`, so this function\n * returns the first element, to always prioritize real values over undefined\n * values.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#description\n *\n * @param {Array<any>} inputArray Array of items to check.\n * @return {any}                  The item with the most occurrences.\n */\nexport function mode( inputArray ) {\n\tconst arr = [ ...inputArray ];\n\treturn arr\n\t\t.sort(\n\t\t\t( a, b ) =>\n\t\t\t\tinputArray.filter( ( v ) => v === b ).length -\n\t\t\t\tinputArray.filter( ( v ) => v === a ).length\n\t\t)\n\t\t.shift();\n}\n\n/**\n * Returns the most common CSS unit from the current CSS unit selections.\n *\n * - If a single flat border radius is set, its unit will be used\n * - If individual corner selections, the most common of those will be used\n * - Failing any unit selections a default of 'px' is returned.\n *\n * @param {Object} selectedUnits Unit selections for flat radius & each corner.\n * @return {string} Most common CSS unit from current selections. Default: `px`.\n */\nexport function getAllUnit( selectedUnits = {} ) {\n\tconst { flat, ...cornerUnits } = selectedUnits;\n\treturn (\n\t\tflat || mode( Object.values( cornerUnits ).filter( Boolean ) ) || 'px'\n\t);\n}\n\n/**\n * Gets the 'all' input value and unit from values data.\n *\n * @param {Object|string} values Radius values.\n * @return {string}              A value + unit for the 'all' input.\n */\nexport function getAllValue( values = {} ) {\n\t/**\n\t * Border radius support was originally a single pixel value.\n\t *\n\t * To maintain backwards compatibility treat this case as the all value.\n\t */\n\tif ( typeof values === 'string' ) {\n\t\treturn values;\n\t}\n\n\tconst parsedQuantitiesAndUnits = Object.values( values ).map( ( value ) =>\n\t\tparseQuantityAndUnitFromRawValue( value )\n\t);\n\n\tconst allValues = parsedQuantitiesAndUnits.map(\n\t\t( value ) => value[ 0 ] ?? ''\n\t);\n\tconst allUnits = parsedQuantitiesAndUnits.map( ( value ) => value[ 1 ] );\n\n\tconst value = allValues.every( ( v ) => v === allValues[ 0 ] )\n\t\t? allValues[ 0 ]\n\t\t: '';\n\tconst unit = mode( allUnits );\n\n\tconst allValue = value === 0 || value ? `${ value }${ unit }` : undefined;\n\n\treturn allValue;\n}\n\n/**\n * Checks to determine if values are mixed.\n *\n * @param {Object} values Radius values.\n * @return {boolean}      Whether values are mixed.\n */\nexport function hasMixedValues( values = {} ) {\n\tconst allValue = getAllValue( values );\n\tconst isMixed =\n\t\ttypeof values === 'string' ? false : isNaN( parseFloat( allValue ) );\n\n\treturn isMixed;\n}\n\n/**\n * Checks to determine if values are defined.\n *\n * @param {Object} values Radius values.\n * @return {boolean}      Whether values are mixed.\n */\nexport function hasDefinedValues( values ) {\n\tif ( ! values ) {\n\t\treturn false;\n\t}\n\n\t// A string value represents a shorthand value.\n\tif ( typeof values === 'string' ) {\n\t\treturn true;\n\t}\n\n\t// An object represents longhand border radius values, if any are set\n\t// flag values as being defined.\n\tconst filteredValues = Object.values( values ).filter( ( value ) => {\n\t\treturn !! value || value === 0;\n\t} );\n\n\treturn !! filteredValues.length;\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalUnitControl as UnitControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetAllValue,\n\tgetAllUnit,\n\thasMixedValues,\n\thasDefinedValues,\n} from './utils';\n\nexport default function AllInputControl( {\n\tonChange,\n\tselectedUnits,\n\tsetSelectedUnits,\n\tvalues,\n\t...props\n} ) {\n\tlet allValue = getAllValue( values );\n\n\tif ( allValue === undefined ) {\n\t\t// If we don't have any value set the unit to any current selection\n\t\t// or the most common unit from the individual radii values.\n\t\tallValue = getAllUnit( selectedUnits );\n\t}\n\n\tconst hasValues = hasDefinedValues( values );\n\tconst isMixed = hasValues && hasMixedValues( values );\n\tconst allPlaceholder = isMixed ? __( 'Mixed' ) : null;\n\n\t// Filter out CSS-unit-only values to prevent invalid styles.\n\tconst handleOnChange = ( next ) => {\n\t\tconst isNumeric = ! isNaN( parseFloat( next ) );\n\t\tconst nextValue = isNumeric ? next : undefined;\n\t\tonChange( nextValue );\n\t};\n\n\t// Store current unit selection for use as fallback for individual\n\t// radii controls.\n\tconst handleOnUnitChange = ( unit ) => {\n\t\tsetSelectedUnits( {\n\t\t\ttopLeft: unit,\n\t\t\ttopRight: unit,\n\t\t\tbottomLeft: unit,\n\t\t\tbottomRight: unit,\n\t\t} );\n\t};\n\n\treturn (\n\t\t<UnitControl\n\t\t\t{ ...props }\n\t\t\taria-label={ __( 'Border radius' ) }\n\t\t\tdisableUnits={ isMixed }\n\t\t\tisOnly\n\t\t\tvalue={ allValue }\n\t\t\tonChange={ handleOnChange }\n\t\t\tonUnitChange={ handleOnUnitChange }\n\t\t\tplaceholder={ allPlaceholder }\n\t\t\tsize={ '__unstable-large' }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n\t__experimentalUnitControl as UnitControl,\n\tTooltip,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\nconst CORNERS = {\n\ttopLeft: __( 'Top left' ),\n\ttopRight: __( 'Top right' ),\n\tbottomLeft: __( 'Bottom left' ),\n\tbottomRight: __( 'Bottom right' ),\n};\n\nexport default function BoxInputControls( {\n\tonChange,\n\tselectedUnits,\n\tsetSelectedUnits,\n\tvalues: valuesProp,\n\t...props\n} ) {\n\tconst createHandleOnChange = ( corner ) => ( next ) => {\n\t\tif ( ! onChange ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Filter out CSS-unit-only values to prevent invalid styles.\n\t\tconst isNumeric = ! isNaN( parseFloat( next ) );\n\t\tconst nextValue = isNumeric ? next : undefined;\n\n\t\tonChange( {\n\t\t\t...values,\n\t\t\t[ corner ]: nextValue,\n\t\t} );\n\t};\n\n\tconst createHandleOnUnitChange = ( side ) => ( next ) => {\n\t\tconst newUnits = { ...selectedUnits };\n\t\tnewUnits[ side ] = next;\n\t\tsetSelectedUnits( newUnits );\n\t};\n\n\t// For shorthand style & backwards compatibility, handle flat string value.\n\tconst values =\n\t\ttypeof valuesProp !== 'string'\n\t\t\t? valuesProp\n\t\t\t: {\n\t\t\t\t\ttopLeft: valuesProp,\n\t\t\t\t\ttopRight: valuesProp,\n\t\t\t\t\tbottomLeft: valuesProp,\n\t\t\t\t\tbottomRight: valuesProp,\n\t\t\t  };\n\n\t// Controls are wrapped in tooltips as visible labels aren't desired here.\n\t// Tooltip rendering also requires the UnitControl to be wrapped. See:\n\t// https://github.com/WordPress/gutenberg/pull/24966#issuecomment-685875026\n\treturn (\n\t\t<div className=\"components-border-radius-control__input-controls-wrapper\">\n\t\t\t{ Object.entries( CORNERS ).map( ( [ corner, label ] ) => {\n\t\t\t\tconst [ parsedQuantity, parsedUnit ] =\n\t\t\t\t\tparseQuantityAndUnitFromRawValue( values[ corner ] );\n\n\t\t\t\tconst computedUnit = values[ corner ]\n\t\t\t\t\t? parsedUnit\n\t\t\t\t\t: selectedUnits[ corner ] || selectedUnits.flat;\n\n\t\t\t\treturn (\n\t\t\t\t\t<Tooltip text={ label } position=\"top\" key={ corner }>\n\t\t\t\t\t\t<div className=\"components-border-radius-control__tooltip-wrapper\">\n\t\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t\t\taria-label={ label }\n\t\t\t\t\t\t\t\tvalue={ [ parsedQuantity, computedUnit ].join(\n\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tonChange={ createHandleOnChange( corner ) }\n\t\t\t\t\t\t\t\tonUnitChange={ createHandleOnUnitChange(\n\t\t\t\t\t\t\t\t\tcorner\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst link = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M15.6 7.2H14v1.5h1.6c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.8 0 5.2-2.3 5.2-5.2 0-2.9-2.3-5.2-5.2-5.2zM4.7 12.4c0-2 1.7-3.7 3.7-3.7H10V7.2H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H10v-1.5H8.4c-2 0-3.7-1.7-3.7-3.7zm4.6.9h5.3v-1.5H9.3v1.5z\" />\n\t</SVG>\n);\n\nexport default link;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst linkOff = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M15.6 7.3h-.7l1.6-3.5-.9-.4-3.9 8.5H9v1.5h2l-1.3 2.8H8.4c-2 0-3.7-1.7-3.7-3.7s1.7-3.7 3.7-3.7H10V7.3H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H9l-1.4 3.2.9.4 5.7-12.5h1.4c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.9 0 5.2-2.3 5.2-5.2 0-2.9-2.4-5.2-5.2-5.2z\" />\n\t</SVG>\n);\n\nexport default linkOff;\n","/**\n * WordPress dependencies\n */\nimport { Button, Tooltip } from '@wordpress/components';\nimport { link, linkOff } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\n\nexport default function LinkedButton( { isLinked, ...props } ) {\n\tconst label = isLinked ? __( 'Unlink radii' ) : __( 'Link radii' );\n\n\t// TODO: Remove span after merging https://github.com/WordPress/gutenberg/pull/44198\n\treturn (\n\t\t<Tooltip text={ label }>\n\t\t\t<span>\n\t\t\t\t<Button\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tclassName=\"component-border-radius-control__linked-button\"\n\t\t\t\t\tisSmall\n\t\t\t\t\ticon={ isLinked ? link : linkOff }\n\t\t\t\t\ticonSize={ 24 }\n\t\t\t\t\taria-label={ label }\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</Tooltip>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tBaseControl,\n\tRangeControl,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n\t__experimentalUseCustomUnits as useCustomUnits,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport AllInputControl from './all-input-control';\nimport InputControls from './input-controls';\nimport LinkedButton from './linked-button';\nimport useSetting from '../use-setting';\nimport {\n\tgetAllValue,\n\tgetAllUnit,\n\thasDefinedValues,\n\thasMixedValues,\n} from './utils';\n\nconst DEFAULT_VALUES = {\n\ttopLeft: undefined,\n\ttopRight: undefined,\n\tbottomLeft: undefined,\n\tbottomRight: undefined,\n};\nconst MIN_BORDER_RADIUS_VALUE = 0;\nconst MAX_BORDER_RADIUS_VALUES = {\n\tpx: 100,\n\tem: 20,\n\trem: 20,\n};\n\n/**\n * Control to display border radius options.\n *\n * @param {Object}   props          Component props.\n * @param {Function} props.onChange Callback to handle onChange.\n * @param {Object}   props.values   Border radius values.\n *\n * @return {WPElement}              Custom border radius control.\n */\nexport default function BorderRadiusControl( { onChange, values } ) {\n\tconst [ isLinked, setIsLinked ] = useState(\n\t\t! hasDefinedValues( values ) || ! hasMixedValues( values )\n\t);\n\n\t// Tracking selected units via internal state allows filtering of CSS unit\n\t// only values from being saved while maintaining preexisting unit selection\n\t// behaviour. Filtering CSS unit only values prevents invalid style values.\n\tconst [ selectedUnits, setSelectedUnits ] = useState( {\n\t\tflat:\n\t\t\ttypeof values === 'string'\n\t\t\t\t? parseQuantityAndUnitFromRawValue( values )[ 1 ]\n\t\t\t\t: undefined,\n\t\ttopLeft: parseQuantityAndUnitFromRawValue( values?.topLeft )[ 1 ],\n\t\ttopRight: parseQuantityAndUnitFromRawValue( values?.topRight )[ 1 ],\n\t\tbottomLeft: parseQuantityAndUnitFromRawValue( values?.bottomLeft )[ 1 ],\n\t\tbottomRight: parseQuantityAndUnitFromRawValue(\n\t\t\tvalues?.bottomRight\n\t\t)[ 1 ],\n\t} );\n\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: useSetting( 'spacing.units' ) || [ 'px', 'em', 'rem' ],\n\t} );\n\n\tconst unit = getAllUnit( selectedUnits );\n\tconst unitConfig = units && units.find( ( item ) => item.value === unit );\n\tconst step = unitConfig?.step || 1;\n\n\tconst [ allValue ] = parseQuantityAndUnitFromRawValue(\n\t\tgetAllValue( values )\n\t);\n\n\tconst toggleLinked = () => setIsLinked( ! isLinked );\n\n\tconst handleSliderChange = ( next ) => {\n\t\tonChange( next !== undefined ? `${ next }${ unit }` : undefined );\n\t};\n\n\treturn (\n\t\t<fieldset className=\"components-border-radius-control\">\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t{ __( 'Radius' ) }\n\t\t\t</BaseControl.VisualLabel>\n\t\t\t<div className=\"components-border-radius-control__wrapper\">\n\t\t\t\t{ isLinked ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<AllInputControl\n\t\t\t\t\t\t\tclassName=\"components-border-radius-control__unit-control\"\n\t\t\t\t\t\t\tvalues={ values }\n\t\t\t\t\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\n\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\tselectedUnits={ selectedUnits }\n\t\t\t\t\t\t\tsetSelectedUnits={ setSelectedUnits }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Border radius' ) }\n\t\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\t\tclassName=\"components-border-radius-control__range-control\"\n\t\t\t\t\t\t\tvalue={ allValue ?? '' }\n\t\t\t\t\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\n\t\t\t\t\t\t\tmax={ MAX_BORDER_RADIUS_VALUES[ unit ] }\n\t\t\t\t\t\t\tinitialPosition={ 0 }\n\t\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t\t\tonChange={ handleSliderChange }\n\t\t\t\t\t\t\tstep={ step }\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<InputControls\n\t\t\t\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\tselectedUnits={ selectedUnits }\n\t\t\t\t\t\tsetSelectedUnits={ setSelectedUnits }\n\t\t\t\t\t\tvalues={ values || DEFAULT_VALUES }\n\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<LinkedButton onClick={ toggleLinked } isLinked={ isLinked } />\n\t\t\t</div>\n\t\t</fieldset>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalBorderBoxControl as BorderBoxControl,\n\t__experimentalHasSplitBorders as hasSplitBorders,\n\t__experimentalIsDefinedBorder as isDefinedBorder,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BorderRadiusControl from '../border-radius-control';\nimport { useColorsPerOrigin } from './hooks';\nimport { getValueFromVariable } from './utils';\n\nexport function useHasBorderPanel( settings ) {\n\tconst controls = [\n\t\tuseHasBorderColorControl( settings ),\n\t\tuseHasBorderRadiusControl( settings ),\n\t\tuseHasBorderStyleControl( settings ),\n\t\tuseHasBorderWidthControl( settings ),\n\t];\n\n\treturn controls.some( Boolean );\n}\n\nfunction useHasBorderColorControl( settings ) {\n\treturn settings?.border?.color;\n}\n\nfunction useHasBorderRadiusControl( settings ) {\n\treturn settings?.border?.radius;\n}\n\nfunction useHasBorderStyleControl( settings ) {\n\treturn settings?.border?.style;\n}\n\nfunction useHasBorderWidthControl( settings ) {\n\treturn settings?.border?.width;\n}\n\nfunction BorderToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Border' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tradius: true,\n\tcolor: true,\n\twidth: true,\n};\n\nexport default function BorderPanel( {\n\tas: Wrapper = BorderToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n} ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\tconst encodeColorValue = ( colorValue ) => {\n\t\tconst allColors = colors.flatMap(\n\t\t\t( { colors: originColors } ) => originColors\n\t\t);\n\t\tconst colorObject = allColors.find(\n\t\t\t( { color } ) => color === colorValue\n\t\t);\n\t\treturn colorObject\n\t\t\t? 'var:preset|color|' + colorObject.slug\n\t\t\t: colorValue;\n\t};\n\tconst decodeColorValue = useCallback(\n\t\t( colorValue ) => {\n\t\t\tconst allColors = colors.flatMap(\n\t\t\t\t( { colors: originColors } ) => originColors\n\t\t\t);\n\t\t\tconst colorObject = allColors.find(\n\t\t\t\t( { slug } ) => colorValue === 'var:preset|color|' + slug\n\t\t\t);\n\t\t\treturn colorObject ? colorObject.color : colorValue;\n\t\t},\n\t\t[ colors ]\n\t);\n\tconst border = useMemo( () => {\n\t\tif ( hasSplitBorders( inheritedValue?.border ) ) {\n\t\t\tconst borderValue = { ...inheritedValue?.border };\n\t\t\t[ 'top', 'right', 'bottom', 'left' ].forEach( ( side ) => {\n\t\t\t\tborderValue[ side ] = {\n\t\t\t\t\t...borderValue[ side ],\n\t\t\t\t\tcolor: decodeColorValue( borderValue[ side ]?.color ),\n\t\t\t\t};\n\t\t\t} );\n\t\t\treturn borderValue;\n\t\t}\n\t\treturn {\n\t\t\t...inheritedValue?.border,\n\t\t\tcolor: inheritedValue?.border?.color\n\t\t\t\t? decodeColorValue( inheritedValue?.border?.color )\n\t\t\t\t: undefined,\n\t\t};\n\t}, [ inheritedValue?.border, decodeColorValue ] );\n\tconst setBorder = ( newBorder ) =>\n\t\tonChange( { ...value, border: newBorder } );\n\tconst showBorderColor = useHasBorderColorControl( settings );\n\tconst showBorderStyle = useHasBorderStyleControl( settings );\n\tconst showBorderWidth = useHasBorderWidthControl( settings );\n\n\t// Border radius.\n\tconst showBorderRadius = useHasBorderRadiusControl( settings );\n\tconst borderRadiusValues = decodeValue( border?.radius );\n\tconst setBorderRadius = ( newBorderRadius ) =>\n\t\tsetBorder( { ...border, radius: newBorderRadius } );\n\tconst hasBorderRadius = () => {\n\t\tconst borderValues = value?.border?.radius;\n\t\tif ( typeof borderValues === 'object' ) {\n\t\t\treturn Object.entries( borderValues ).some( Boolean );\n\t\t}\n\t\treturn !! borderValues;\n\t};\n\n\tconst resetBorder = () => {\n\t\tif ( hasBorderRadius() ) {\n\t\t\treturn setBorder( { radius: value?.border?.radius } );\n\t\t}\n\n\t\tsetBorder( undefined );\n\t};\n\n\tconst onBorderChange = ( newBorder ) => {\n\t\t// Ensure we have a visible border style when a border width or\n\t\t// color is being selected.\n\t\tconst updatedBorder = { ...newBorder };\n\n\t\tif ( hasSplitBorders( updatedBorder ) ) {\n\t\t\t[ 'top', 'right', 'bottom', 'left' ].forEach( ( side ) => {\n\t\t\t\tif ( updatedBorder[ side ] ) {\n\t\t\t\t\tupdatedBorder[ side ] = {\n\t\t\t\t\t\t...updatedBorder[ side ],\n\t\t\t\t\t\tcolor: encodeColorValue( updatedBorder[ side ]?.color ),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} );\n\t\t} else if ( updatedBorder ) {\n\t\t\tupdatedBorder.color = encodeColorValue( updatedBorder.color );\n\t\t}\n\n\t\t// As radius is maintained separately to color, style, and width\n\t\t// maintain its value. Undefined values here will be cleaned when\n\t\t// global styles are saved.\n\t\tsetBorder( { radius: border?.radius, ...updatedBorder } );\n\t};\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tborder: undefined,\n\t\t};\n\t}, [] );\n\n\tconst showBorderByDefault =\n\t\tdefaultControls?.color || defaultControls?.width;\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ ( showBorderWidth || showBorderColor ) && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ () => isDefinedBorder( value?.border ) }\n\t\t\t\t\tlabel={ __( 'Border' ) }\n\t\t\t\t\tonDeselect={ () => resetBorder() }\n\t\t\t\t\tisShownByDefault={ showBorderByDefault }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<BorderBoxControl\n\t\t\t\t\t\tcolors={ colors }\n\t\t\t\t\t\tenableAlpha={ true }\n\t\t\t\t\t\tenableStyle={ showBorderStyle }\n\t\t\t\t\t\tonChange={ onBorderChange }\n\t\t\t\t\t\tpopoverOffset={ 40 }\n\t\t\t\t\t\tpopoverPlacement=\"left-start\"\n\t\t\t\t\t\tvalue={ border }\n\t\t\t\t\t\t__experimentalIsRenderedInSidebar={ true }\n\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showBorderRadius && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasBorderRadius }\n\t\t\t\t\tlabel={ __( 'Radius' ) }\n\t\t\t\t\tonDeselect={ () => setBorderRadius( undefined ) }\n\t\t\t\t\tisShownByDefault={ defaultControls.radius }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<BorderRadiusControl\n\t\t\t\t\t\tvalues={ borderRadiusValues }\n\t\t\t\t\t\tonChange={ ( newValue ) => {\n\t\t\t\t\t\t\tsetBorderRadius( newValue || undefined );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { getBlockSupport } from '@wordpress/blocks';\nimport { __experimentalHasSplitBorders as hasSplitBorders } from '@wordpress/components';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { Platform, useCallback, useMemo } from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport { getColorClassName } from '../components/colors';\nimport InspectorControls from '../components/inspector-controls';\nimport useMultipleOriginColorsAndGradients from '../components/colors-gradients/use-multiple-origin-colors-and-gradients';\nimport {\n\tcleanEmptyObject,\n\tshouldSkipSerialization,\n\tuseBlockSettings,\n} from './utils';\nimport {\n\tuseHasBorderPanel,\n\tBorderPanel as StylesBorderPanel,\n} from '../components/global-styles';\n\nexport const BORDER_SUPPORT_KEY = '__experimentalBorder';\n\nconst getColorByProperty = ( colors, property, value ) => {\n\tlet matchedColor;\n\n\tcolors.some( ( origin ) =>\n\t\torigin.colors.some( ( color ) => {\n\t\t\tif ( color[ property ] === value ) {\n\t\t\t\tmatchedColor = color;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t} )\n\t);\n\n\treturn matchedColor;\n};\n\nexport const getMultiOriginColor = ( { colors, namedColor, customColor } ) => {\n\t// Search each origin (default, theme, or user) for matching color by name.\n\tif ( namedColor ) {\n\t\tconst colorObject = getColorByProperty( colors, 'slug', namedColor );\n\t\tif ( colorObject ) {\n\t\t\treturn colorObject;\n\t\t}\n\t}\n\n\t// Skip if no custom color or matching named color.\n\tif ( ! customColor ) {\n\t\treturn { color: undefined };\n\t}\n\n\t// Attempt to find color via custom color value or build new object.\n\tconst colorObject = getColorByProperty( colors, 'color', customColor );\n\treturn colorObject ? colorObject : { color: customColor };\n};\n\nfunction getColorSlugFromVariable( value ) {\n\tconst namedColor = /var:preset\\|color\\|(.+)/.exec( value );\n\tif ( namedColor && namedColor[ 1 ] ) {\n\t\treturn namedColor[ 1 ];\n\t}\n\treturn null;\n}\n\nfunction styleToAttributes( style ) {\n\tif ( hasSplitBorders( style?.border ) ) {\n\t\treturn {\n\t\t\tstyle,\n\t\t\tborderColor: undefined,\n\t\t};\n\t}\n\n\tconst borderColorValue = style?.border?.color;\n\tconst borderColorSlug = borderColorValue?.startsWith( 'var:preset|color|' )\n\t\t? borderColorValue.substring( 'var:preset|color|'.length )\n\t\t: undefined;\n\tconst updatedStyle = { ...style };\n\tupdatedStyle.border = {\n\t\t...updatedStyle.border,\n\t\tcolor: borderColorSlug ? undefined : borderColorValue,\n\t};\n\treturn {\n\t\tstyle: cleanEmptyObject( updatedStyle ),\n\t\tborderColor: borderColorSlug,\n\t};\n}\n\nfunction attributesToStyle( attributes ) {\n\tif ( hasSplitBorders( attributes.style?.border ) ) {\n\t\treturn attributes.style;\n\t}\n\treturn {\n\t\t...attributes.style,\n\t\tborder: {\n\t\t\t...attributes.style?.border,\n\t\t\tcolor: attributes.borderColor\n\t\t\t\t? 'var:preset|color|' + attributes.borderColor\n\t\t\t\t: attributes.style?.border?.color,\n\t\t},\n\t};\n}\n\nfunction BordersInspectorControl( { children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributesToStyle( attributes );\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\t...styleToAttributes( updatedStyle ),\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"border\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function BorderPanel( props ) {\n\tconst { clientId, name, attributes, setAttributes } = props;\n\tconst settings = useBlockSettings( name );\n\tconst isEnabled = useHasBorderPanel( settings );\n\tconst value = useMemo( () => {\n\t\treturn attributesToStyle( {\n\t\t\tstyle: attributes.style,\n\t\t\tborderColor: attributes.borderColor,\n\t\t} );\n\t}, [ attributes.style, attributes.borderColor ] );\n\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( styleToAttributes( newStyle ) );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultControls = getBlockSupport( props.name, [\n\t\tBORDER_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\n\treturn (\n\t\t<StylesBorderPanel\n\t\t\tas={ BordersInspectorControl }\n\t\t\tpanelId={ clientId }\n\t\t\tsettings={ settings }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tdefaultControls={ defaultControls }\n\t\t/>\n\t);\n}\n\n/**\n * Determine whether there is block support for border properties.\n *\n * @param {string} blockName Block name.\n * @param {string} feature   Border feature to check support for.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasBorderSupport( blockName, feature = 'any' ) {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst support = getBlockSupport( blockName, BORDER_SUPPORT_KEY );\n\n\tif ( support === true ) {\n\t\treturn true;\n\t}\n\n\tif ( feature === 'any' ) {\n\t\treturn !! (\n\t\t\tsupport?.color ||\n\t\t\tsupport?.radius ||\n\t\t\tsupport?.width ||\n\t\t\tsupport?.style\n\t\t);\n\t}\n\n\treturn !! support?.[ feature ];\n}\n\n/**\n * Returns a new style object where the specified border attribute has been\n * removed.\n *\n * @param {Object} style     Styles from block attributes.\n * @param {string} attribute The border style attribute to clear.\n *\n * @return {Object} Style object with the specified attribute removed.\n */\nexport function removeBorderAttribute( style, attribute ) {\n\treturn cleanEmptyObject( {\n\t\t...style,\n\t\tborder: {\n\t\t\t...style?.border,\n\t\t\t[ attribute ]: undefined,\n\t\t},\n\t} );\n}\n\n/**\n * Filters registered block settings, extending attributes to include\n * `borderColor` if needed.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Updated block settings.\n */\nfunction addAttributes( settings ) {\n\tif ( ! hasBorderSupport( settings, 'color' ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify default value if needed.\n\tif ( settings.attributes.borderColor ) {\n\t\treturn settings;\n\t}\n\n\t// Add new borderColor attribute to block settings.\n\treturn {\n\t\t...settings,\n\t\tattributes: {\n\t\t\t...settings.attributes,\n\t\t\tborderColor: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t},\n\t};\n}\n\n/**\n * Override props assigned to save component to inject border color.\n *\n * @param {Object} props      Additional props applied to save element.\n * @param {Object} blockType  Block type definition.\n * @param {Object} attributes Block's attributes.\n *\n * @return {Object} Filtered props to apply to save element.\n */\nfunction addSaveProps( props, blockType, attributes ) {\n\tif (\n\t\t! hasBorderSupport( blockType, 'color' ) ||\n\t\tshouldSkipSerialization( blockType, BORDER_SUPPORT_KEY, 'color' )\n\t) {\n\t\treturn props;\n\t}\n\n\tconst borderClasses = getBorderClasses( attributes );\n\tconst newClassName = classnames( props.className, borderClasses );\n\n\t// If we are clearing the last of the previous classes in `className`\n\t// set it to `undefined` to avoid rendering empty DOM attributes.\n\tprops.className = newClassName ? newClassName : undefined;\n\n\treturn props;\n}\n\n/**\n * Generates a CSS class name consisting of all the applicable border color\n * classes given the current block attributes.\n *\n * @param {Object} attributes Block's attributes.\n *\n * @return {string} CSS class name.\n */\nexport function getBorderClasses( attributes ) {\n\tconst { borderColor, style } = attributes;\n\tconst borderColorClass = getColorClassName( 'border-color', borderColor );\n\n\treturn classnames( {\n\t\t'has-border-color': borderColor || style?.border?.color,\n\t\t[ borderColorClass ]: !! borderColorClass,\n\t} );\n}\n\n/**\n * Filters the registered block settings to apply border color styles and\n * classnames to the block edit wrapper.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addEditProps( settings ) {\n\tif (\n\t\t! hasBorderSupport( settings, 'color' ) ||\n\t\tshouldSkipSerialization( settings, BORDER_SUPPORT_KEY, 'color' )\n\t) {\n\t\treturn settings;\n\t}\n\n\tconst existingGetEditWrapperProps = settings.getEditWrapperProps;\n\tsettings.getEditWrapperProps = ( attributes ) => {\n\t\tlet props = {};\n\n\t\tif ( existingGetEditWrapperProps ) {\n\t\t\tprops = existingGetEditWrapperProps( attributes );\n\t\t}\n\n\t\treturn addSaveProps( props, settings, attributes );\n\t};\n\n\treturn settings;\n}\n\n/**\n * This adds inline styles for color palette colors.\n * Ideally, this is not needed and themes should load their palettes on the editor.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withBorderColorPaletteStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst { name, attributes } = props;\n\t\tconst { borderColor, style } = attributes;\n\t\tconst { colors } = useMultipleOriginColorsAndGradients();\n\n\t\tif (\n\t\t\t! hasBorderSupport( name, 'color' ) ||\n\t\t\tshouldSkipSerialization( name, BORDER_SUPPORT_KEY, 'color' )\n\t\t) {\n\t\t\treturn <BlockListBlock { ...props } />;\n\t\t}\n\n\t\tconst { color: borderColorValue } = getMultiOriginColor( {\n\t\t\tcolors,\n\t\t\tnamedColor: borderColor,\n\t\t} );\n\t\tconst { color: borderTopColor } = getMultiOriginColor( {\n\t\t\tcolors,\n\t\t\tnamedColor: getColorSlugFromVariable( style?.border?.top?.color ),\n\t\t} );\n\t\tconst { color: borderRightColor } = getMultiOriginColor( {\n\t\t\tcolors,\n\t\t\tnamedColor: getColorSlugFromVariable( style?.border?.right?.color ),\n\t\t} );\n\n\t\tconst { color: borderBottomColor } = getMultiOriginColor( {\n\t\t\tcolors,\n\t\t\tnamedColor: getColorSlugFromVariable(\n\t\t\t\tstyle?.border?.bottom?.color\n\t\t\t),\n\t\t} );\n\t\tconst { color: borderLeftColor } = getMultiOriginColor( {\n\t\t\tcolors,\n\t\t\tnamedColor: getColorSlugFromVariable( style?.border?.left?.color ),\n\t\t} );\n\n\t\tconst extraStyles = {\n\t\t\tborderTopColor: borderTopColor || borderColorValue,\n\t\t\tborderRightColor: borderRightColor || borderColorValue,\n\t\t\tborderBottomColor: borderBottomColor || borderColorValue,\n\t\t\tborderLeftColor: borderLeftColor || borderColorValue,\n\t\t};\n\n\t\tlet wrapperProps = props.wrapperProps;\n\t\twrapperProps = {\n\t\t\t...props.wrapperProps,\n\t\t\tstyle: {\n\t\t\t\t...props.wrapperProps?.style,\n\t\t\t\t...extraStyles,\n\t\t\t},\n\t\t};\n\n\t\treturn <BlockListBlock { ...props } wrapperProps={ wrapperProps } />;\n\t},\n\t'withBorderColorPaletteStyles'\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/border/addAttributes',\n\taddAttributes\n);\n\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/border/addSaveProps',\n\taddSaveProps\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/border/addEditProps',\n\taddEditProps\n);\n\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/border/with-border-color-palette-styles',\n\twithBorderColorPaletteStyles\n);\n","/**\n * WordPress dependencies\n */\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit';\nimport useSetting from '../use-setting';\nimport { store as blockEditorStore } from '../../store';\n\nexport function __experimentalGetGradientClass( gradientSlug ) {\n\tif ( ! gradientSlug ) {\n\t\treturn undefined;\n\t}\n\treturn `has-${ gradientSlug }-gradient-background`;\n}\n\n/**\n * Retrieves the gradient value per slug.\n *\n * @param {Array}  gradients Gradient Palette\n * @param {string} slug      Gradient slug\n *\n * @return {string} Gradient value.\n */\nexport function getGradientValueBySlug( gradients, slug ) {\n\tconst gradient = gradients?.find( ( g ) => g.slug === slug );\n\treturn gradient && gradient.gradient;\n}\n\nexport function __experimentalGetGradientObjectByGradientValue(\n\tgradients,\n\tvalue\n) {\n\tconst gradient = gradients?.find( ( g ) => g.gradient === value );\n\treturn gradient;\n}\n\n/**\n * Retrieves the gradient slug per slug.\n *\n * @param {Array}  gradients Gradient Palette\n * @param {string} value     Gradient value\n * @return {string} Gradient slug.\n */\nexport function getGradientSlugByValue( gradients, value ) {\n\tconst gradient = __experimentalGetGradientObjectByGradientValue(\n\t\tgradients,\n\t\tvalue\n\t);\n\treturn gradient && gradient.slug;\n}\n\nexport function __experimentalUseGradient( {\n\tgradientAttribute = 'gradient',\n\tcustomGradientAttribute = 'customGradient',\n} = {} ) {\n\tconst { clientId } = useBlockEditContext();\n\n\tconst userGradientPalette = useSetting( 'color.gradients.custom' );\n\tconst themeGradientPalette = useSetting( 'color.gradients.theme' );\n\tconst defaultGradientPalette = useSetting( 'color.gradients.default' );\n\tconst allGradients = useMemo(\n\t\t() => [\n\t\t\t...( userGradientPalette || [] ),\n\t\t\t...( themeGradientPalette || [] ),\n\t\t\t...( defaultGradientPalette || [] ),\n\t\t],\n\t\t[ userGradientPalette, themeGradientPalette, defaultGradientPalette ]\n\t);\n\tconst { gradient, customGradient } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockAttributes } = select( blockEditorStore );\n\t\t\tconst attributes = getBlockAttributes( clientId ) || {};\n\t\t\treturn {\n\t\t\t\tcustomGradient: attributes[ customGradientAttribute ],\n\t\t\t\tgradient: attributes[ gradientAttribute ],\n\t\t\t};\n\t\t},\n\t\t[ clientId, gradientAttribute, customGradientAttribute ]\n\t);\n\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst setGradient = useCallback(\n\t\t( newGradientValue ) => {\n\t\t\tconst slug = getGradientSlugByValue(\n\t\t\t\tallGradients,\n\t\t\t\tnewGradientValue\n\t\t\t);\n\t\t\tif ( slug ) {\n\t\t\t\tupdateBlockAttributes( clientId, {\n\t\t\t\t\t[ gradientAttribute ]: slug,\n\t\t\t\t\t[ customGradientAttribute ]: undefined,\n\t\t\t\t} );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdateBlockAttributes( clientId, {\n\t\t\t\t[ gradientAttribute ]: undefined,\n\t\t\t\t[ customGradientAttribute ]: newGradientValue,\n\t\t\t} );\n\t\t},\n\t\t[ allGradients, clientId, updateBlockAttributes ]\n\t);\n\n\tconst gradientClass = __experimentalGetGradientClass( gradient );\n\tlet gradientValue;\n\tif ( gradient ) {\n\t\tgradientValue = getGradientValueBySlug( allGradients, gradient );\n\t} else {\n\t\tgradientValue = customGradient;\n\t}\n\treturn { gradientClass, gradientValue, setGradient };\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tBaseControl,\n\t__experimentalVStack as VStack,\n\tTabPanel,\n\tColorPalette,\n\tGradientPicker,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport useSetting from '../use-setting';\n\nconst colorsAndGradientKeys = [\n\t'colors',\n\t'disableCustomColors',\n\t'gradients',\n\t'disableCustomGradients',\n];\n\nconst TAB_COLOR = {\n\tname: 'color',\n\ttitle: 'Solid',\n\tvalue: 'color',\n};\nconst TAB_GRADIENT = {\n\tname: 'gradient',\n\ttitle: 'Gradient',\n\tvalue: 'gradient',\n};\n\nconst TABS_SETTINGS = [ TAB_COLOR, TAB_GRADIENT ];\n\nfunction ColorGradientControlInner( {\n\tcolors,\n\tgradients,\n\tdisableCustomColors,\n\tdisableCustomGradients,\n\t__experimentalIsRenderedInSidebar,\n\tclassName,\n\tlabel,\n\tonColorChange,\n\tonGradientChange,\n\tcolorValue,\n\tgradientValue,\n\tclearable,\n\tshowTitle = true,\n\tenableAlpha,\n\theadingLevel,\n} ) {\n\tconst canChooseAColor =\n\t\tonColorChange &&\n\t\t( ( colors && colors.length > 0 ) || ! disableCustomColors );\n\tconst canChooseAGradient =\n\t\tonGradientChange &&\n\t\t( ( gradients && gradients.length > 0 ) || ! disableCustomGradients );\n\n\tif ( ! canChooseAColor && ! canChooseAGradient ) {\n\t\treturn null;\n\t}\n\n\tconst tabPanels = {\n\t\t[ TAB_COLOR.value ]: (\n\t\t\t<ColorPalette\n\t\t\t\tvalue={ colorValue }\n\t\t\t\tonChange={\n\t\t\t\t\tcanChooseAGradient\n\t\t\t\t\t\t? ( newColor ) => {\n\t\t\t\t\t\t\t\tonColorChange( newColor );\n\t\t\t\t\t\t\t\tonGradientChange();\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: onColorChange\n\t\t\t\t}\n\t\t\t\t{ ...{ colors, disableCustomColors } }\n\t\t\t\t__experimentalIsRenderedInSidebar={\n\t\t\t\t\t__experimentalIsRenderedInSidebar\n\t\t\t\t}\n\t\t\t\tclearable={ clearable }\n\t\t\t\tenableAlpha={ enableAlpha }\n\t\t\t\theadingLevel={ headingLevel }\n\t\t\t/>\n\t\t),\n\t\t[ TAB_GRADIENT.value ]: (\n\t\t\t<GradientPicker\n\t\t\t\t__nextHasNoMargin\n\t\t\t\tvalue={ gradientValue }\n\t\t\t\tonChange={\n\t\t\t\t\tcanChooseAColor\n\t\t\t\t\t\t? ( newGradient ) => {\n\t\t\t\t\t\t\t\tonGradientChange( newGradient );\n\t\t\t\t\t\t\t\tonColorChange();\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: onGradientChange\n\t\t\t\t}\n\t\t\t\t{ ...{ gradients, disableCustomGradients } }\n\t\t\t\t__experimentalIsRenderedInSidebar={\n\t\t\t\t\t__experimentalIsRenderedInSidebar\n\t\t\t\t}\n\t\t\t\tclearable={ clearable }\n\t\t\t\theadingLevel={ headingLevel }\n\t\t\t/>\n\t\t),\n\t};\n\n\tconst renderPanelType = ( type ) => (\n\t\t<div className=\"block-editor-color-gradient-control__panel\">\n\t\t\t{ tabPanels[ type ] }\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<BaseControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-color-gradient-control',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t>\n\t\t\t<fieldset className=\"block-editor-color-gradient-control__fieldset\">\n\t\t\t\t<VStack spacing={ 1 }>\n\t\t\t\t\t{ showTitle && (\n\t\t\t\t\t\t<legend>\n\t\t\t\t\t\t\t<div className=\"block-editor-color-gradient-control__color-indicator\">\n\t\t\t\t\t\t\t\t<BaseControl.VisualLabel>\n\t\t\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</legend>\n\t\t\t\t\t) }\n\t\t\t\t\t{ canChooseAColor && canChooseAGradient && (\n\t\t\t\t\t\t<TabPanel\n\t\t\t\t\t\t\tclassName=\"block-editor-color-gradient-control__tabs\"\n\t\t\t\t\t\t\ttabs={ TABS_SETTINGS }\n\t\t\t\t\t\t\tinitialTabName={\n\t\t\t\t\t\t\t\tgradientValue\n\t\t\t\t\t\t\t\t\t? TAB_GRADIENT.value\n\t\t\t\t\t\t\t\t\t: !! canChooseAColor && TAB_COLOR.value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ ( tab ) => renderPanelType( tab.value ) }\n\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t) }\n\t\t\t\t\t{ ! canChooseAGradient &&\n\t\t\t\t\t\trenderPanelType( TAB_COLOR.value ) }\n\t\t\t\t\t{ ! canChooseAColor &&\n\t\t\t\t\t\trenderPanelType( TAB_GRADIENT.value ) }\n\t\t\t\t</VStack>\n\t\t\t</fieldset>\n\t\t</BaseControl>\n\t);\n}\n\nfunction ColorGradientControlSelect( props ) {\n\tconst colorGradientSettings = {};\n\tcolorGradientSettings.colors = useSetting( 'color.palette' );\n\tcolorGradientSettings.gradients = useSetting( 'color.gradients' );\n\tcolorGradientSettings.disableCustomColors = ! useSetting( 'color.custom' );\n\tcolorGradientSettings.disableCustomGradients = ! useSetting(\n\t\t'color.customGradient'\n\t);\n\n\treturn (\n\t\t<ColorGradientControlInner\n\t\t\t{ ...{ ...colorGradientSettings, ...props } }\n\t\t/>\n\t);\n}\n\nfunction ColorGradientControl( props ) {\n\tif (\n\t\tcolorsAndGradientKeys.every( ( key ) => props.hasOwnProperty( key ) )\n\t) {\n\t\treturn <ColorGradientControlInner { ...props } />;\n\t}\n\treturn <ColorGradientControlSelect { ...props } />;\n}\n\nexport default ColorGradientControl;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalHStack as HStack,\n\t__experimentalZStack as ZStack,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\tTabPanel,\n\tColorIndicator,\n\tFlex,\n\tFlexItem,\n\tDropdown,\n\tButton,\n} from '@wordpress/components';\nimport { useCallback } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport ColorGradientControl from '../colors-gradients/control';\nimport { useColorsPerOrigin, useGradientsPerOrigin } from './hooks';\nimport { getValueFromVariable } from './utils';\nimport { setImmutably } from '../../utils/object';\n\nexport function useHasColorPanel( settings ) {\n\tconst hasTextPanel = useHasTextPanel( settings );\n\tconst hasBackgroundPanel = useHasBackgroundPanel( settings );\n\tconst hasLinkPanel = useHasLinkPanel( settings );\n\tconst hasHeadingPanel = useHasHeadingPanel( settings );\n\tconst hasButtonPanel = useHasHeadingPanel( settings );\n\tconst hasCaptionPanel = useHasCaptionPanel( settings );\n\n\treturn (\n\t\thasTextPanel ||\n\t\thasBackgroundPanel ||\n\t\thasLinkPanel ||\n\t\thasHeadingPanel ||\n\t\thasButtonPanel ||\n\t\thasCaptionPanel\n\t);\n}\n\nexport function useHasTextPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.text &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasLinkPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.link &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasCaptionPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.caption &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasHeadingPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.heading &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nexport function useHasButtonPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.button &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nexport function useHasBackgroundPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.background &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nfunction ColorToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Color' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\thasInnerWrapper\n\t\t\tclassName=\"color-block-support-panel\"\n\t\t\t__experimentalFirstVisibleItemClass=\"first\"\n\t\t\t__experimentalLastVisibleItemClass=\"last\"\n\t\t>\n\t\t\t<div className=\"color-block-support-panel__inner-wrapper\">\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\ttext: true,\n\tbackground: true,\n\tlink: true,\n\theading: true,\n\tbutton: true,\n\tcaption: true,\n};\n\nconst popoverProps = {\n\tplacement: 'left-start',\n\toffset: 36,\n\tshift: true,\n};\n\nconst LabeledColorIndicators = ( { indicators, label } ) => (\n\t<HStack justify=\"flex-start\">\n\t\t<ZStack isLayered={ false } offset={ -8 }>\n\t\t\t{ indicators.map( ( indicator, index ) => (\n\t\t\t\t<Flex key={ index } expanded={ false }>\n\t\t\t\t\t<ColorIndicator colorValue={ indicator } />\n\t\t\t\t</Flex>\n\t\t\t) ) }\n\t\t</ZStack>\n\t\t<FlexItem\n\t\t\tclassName=\"block-editor-panel-color-gradient-settings__color-name\"\n\t\t\ttitle={ label }\n\t\t>\n\t\t\t{ label }\n\t\t</FlexItem>\n\t</HStack>\n);\n\nfunction ColorPanelTab( {\n\tisGradient,\n\tinheritedValue,\n\tuserValue,\n\tsetValue,\n\tcolorGradientControlSettings,\n} ) {\n\treturn (\n\t\t<ColorGradientControl\n\t\t\t{ ...colorGradientControlSettings }\n\t\t\tshowTitle={ false }\n\t\t\tenableAlpha\n\t\t\t__experimentalIsRenderedInSidebar\n\t\t\tcolorValue={ isGradient ? undefined : inheritedValue }\n\t\t\tgradientValue={ isGradient ? inheritedValue : undefined }\n\t\t\tonColorChange={ isGradient ? undefined : setValue }\n\t\t\tonGradientChange={ isGradient ? setValue : undefined }\n\t\t\tclearable={ inheritedValue === userValue }\n\t\t\theadingLevel={ 3 }\n\t\t/>\n\t);\n}\n\nfunction ColorPanelDropdown( {\n\tlabel,\n\thasValue,\n\tresetValue,\n\tisShownByDefault,\n\tindicators,\n\ttabs,\n\tcolorGradientControlSettings,\n\tpanelId,\n} ) {\n\tconst tabConfigs = tabs.map( ( { key, label: tabLabel } ) => {\n\t\treturn {\n\t\t\tname: key,\n\t\t\ttitle: tabLabel,\n\t\t};\n\t} );\n\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__item\"\n\t\t\thasValue={ hasValue }\n\t\t\tlabel={ label }\n\t\t\tonDeselect={ resetValue }\n\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t<Dropdown\n\t\t\t\tpopoverProps={ popoverProps }\n\t\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__dropdown\"\n\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\t\tconst toggleProps = {\n\t\t\t\t\t\tonClick: onToggle,\n\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t'block-editor-panel-color-gradient-settings__dropdown',\n\t\t\t\t\t\t\t{ 'is-open': isOpen }\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'aria-expanded': isOpen,\n\t\t\t\t\t\t'aria-label': sprintf(\n\t\t\t\t\t\t\t/* translators: %s is the type of color property, e.g., \"background\" */\n\t\t\t\t\t\t\t__( 'Color %s styles' ),\n\t\t\t\t\t\t\tlabel\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button { ...toggleProps }>\n\t\t\t\t\t\t\t<LabeledColorIndicators\n\t\t\t\t\t\t\t\tindicators={ indicators }\n\t\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\trenderContent={ () => (\n\t\t\t\t\t<DropdownContentWrapper paddingSize=\"none\">\n\t\t\t\t\t\t<div className=\"block-editor-panel-color-gradient-settings__dropdown-content\">\n\t\t\t\t\t\t\t{ tabs.length === 1 && (\n\t\t\t\t\t\t\t\t<ColorPanelTab\n\t\t\t\t\t\t\t\t\t{ ...tabs[ 0 ] }\n\t\t\t\t\t\t\t\t\tcolorGradientControlSettings={\n\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ tabs.length > 1 && (\n\t\t\t\t\t\t\t\t<TabPanel tabs={ tabConfigs }>\n\t\t\t\t\t\t\t\t\t{ ( tab ) => {\n\t\t\t\t\t\t\t\t\t\tconst selectedTab = tabs.find(\n\t\t\t\t\t\t\t\t\t\t\t( t ) => t.key === tab.name\n\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\tif ( ! selectedTab ) {\n\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<ColorPanelTab\n\t\t\t\t\t\t\t\t\t\t\t\t{ ...selectedTab }\n\t\t\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings={\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</DropdownContentWrapper>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</ToolsPanelItem>\n\t);\n}\n\nexport default function ColorPanel( {\n\tas: Wrapper = ColorToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n\tchildren,\n} ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\tconst areCustomSolidsEnabled = settings?.color?.custom;\n\tconst areCustomGradientsEnabled = settings?.color?.customGradient;\n\tconst hasSolidColors = colors.length > 0 || areCustomSolidsEnabled;\n\tconst hasGradientColors = gradients.length > 0 || areCustomGradientsEnabled;\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\tconst encodeColorValue = ( colorValue ) => {\n\t\tconst allColors = colors.flatMap(\n\t\t\t( { colors: originColors } ) => originColors\n\t\t);\n\t\tconst colorObject = allColors.find(\n\t\t\t( { color } ) => color === colorValue\n\t\t);\n\t\treturn colorObject\n\t\t\t? 'var:preset|color|' + colorObject.slug\n\t\t\t: colorValue;\n\t};\n\tconst encodeGradientValue = ( gradientValue ) => {\n\t\tconst allGradients = gradients.flatMap(\n\t\t\t( { gradients: originGradients } ) => originGradients\n\t\t);\n\t\tconst gradientObject = allGradients.find(\n\t\t\t( { gradient } ) => gradient === gradientValue\n\t\t);\n\t\treturn gradientObject\n\t\t\t? 'var:preset|gradient|' + gradientObject.slug\n\t\t\t: gradientValue;\n\t};\n\n\t// Text Color\n\tconst showTextPanel = useHasTextPanel( settings );\n\tconst textColor = decodeValue( inheritedValue?.color?.text );\n\tconst userTextColor = decodeValue( value?.color?.text );\n\tconst hasTextColor = () => !! userTextColor;\n\tconst setTextColor = ( newColor ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'color', 'text' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t)\n\t\t);\n\t};\n\tconst resetTextColor = () => setTextColor( undefined );\n\n\t// BackgroundColor\n\tconst showBackgroundPanel = useHasBackgroundPanel( settings );\n\tconst backgroundColor = decodeValue( inheritedValue?.color?.background );\n\tconst userBackgroundColor = decodeValue( value?.color?.background );\n\tconst gradient = decodeValue( inheritedValue?.color?.gradient );\n\tconst userGradient = decodeValue( value?.color?.gradient );\n\tconst hasBackground = () => !! userBackgroundColor || !! userGradient;\n\tconst setBackgroundColor = ( newColor ) => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'background' ],\n\t\t\tencodeColorValue( newColor )\n\t\t);\n\t\tnewValue.color.gradient = undefined;\n\t\tonChange( newValue );\n\t};\n\tconst setGradient = ( newGradient ) => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'gradient' ],\n\t\t\tencodeGradientValue( newGradient )\n\t\t);\n\t\tnewValue.color.background = undefined;\n\t\tonChange( newValue );\n\t};\n\tconst resetBackground = () => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'background' ],\n\t\t\tundefined\n\t\t);\n\t\tnewValue.color.gradient = undefined;\n\t\tonChange( newValue );\n\t};\n\n\t// Links\n\tconst showLinkPanel = useHasLinkPanel( settings );\n\tconst linkColor = decodeValue(\n\t\tinheritedValue?.elements?.link?.color?.text\n\t);\n\tconst userLinkColor = decodeValue( value?.elements?.link?.color?.text );\n\tconst setLinkColor = ( newColor ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', 'link', 'color', 'text' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t)\n\t\t);\n\t};\n\tconst hoverLinkColor = decodeValue(\n\t\tinheritedValue?.elements?.link?.[ ':hover' ]?.color?.text\n\t);\n\tconst userHoverLinkColor = decodeValue(\n\t\tvalue?.elements?.link?.[ ':hover' ]?.color?.text\n\t);\n\tconst setHoverLinkColor = ( newColor ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', 'link', ':hover', 'color', 'text' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t)\n\t\t);\n\t};\n\tconst hasLink = () => !! userLinkColor || !! userHoverLinkColor;\n\tconst resetLink = () => {\n\t\tlet newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'elements', 'link', ':hover', 'color', 'text' ],\n\t\t\tundefined\n\t\t);\n\t\tnewValue = setImmutably(\n\t\t\tnewValue,\n\t\t\t[ 'elements', 'link', 'color', 'text' ],\n\t\t\tundefined\n\t\t);\n\t\tonChange( newValue );\n\t};\n\n\t// Elements\n\tconst elements = [\n\t\t{\n\t\t\tname: 'caption',\n\t\t\tlabel: __( 'Captions' ),\n\t\t\tshowPanel: useHasCaptionPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'button',\n\t\t\tlabel: __( 'Button' ),\n\t\t\tshowPanel: useHasButtonPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'heading',\n\t\t\tlabel: __( 'Heading' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h1',\n\t\t\tlabel: __( 'H1' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h2',\n\t\t\tlabel: __( 'H2' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h3',\n\t\t\tlabel: __( 'H3' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h4',\n\t\t\tlabel: __( 'H4' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h5',\n\t\t\tlabel: __( 'H5' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h6',\n\t\t\tlabel: __( 'H6' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t];\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tcolor: undefined,\n\t\t\telements: {\n\t\t\t\t...previousValue?.elements,\n\t\t\t\tlink: {\n\t\t\t\t\t...previousValue?.elements?.link,\n\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t':hover': {\n\t\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t...elements.reduce( ( acc, element ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t[ element.name ]: {\n\t\t\t\t\t\t\t...previousValue?.elements?.[ element.name ],\n\t\t\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}, {} ),\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\tconst items = [\n\t\tshowTextPanel && {\n\t\t\tkey: 'text',\n\t\t\tlabel: __( 'Text' ),\n\t\t\thasValue: hasTextColor,\n\t\t\tresetValue: resetTextColor,\n\t\t\tisShownByDefault: defaultControls.text,\n\t\t\tindicators: [ textColor ],\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'text',\n\t\t\t\t\tlabel: __( 'Text' ),\n\t\t\t\t\tinheritedValue: textColor,\n\t\t\t\t\tsetValue: setTextColor,\n\t\t\t\t\tuserValue: userTextColor,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tshowBackgroundPanel && {\n\t\t\tkey: 'background',\n\t\t\tlabel: __( 'Background' ),\n\t\t\thasValue: hasBackground,\n\t\t\tresetValue: resetBackground,\n\t\t\tisShownByDefault: defaultControls.background,\n\t\t\tindicators: [ gradient ?? backgroundColor ],\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'background',\n\t\t\t\t\tlabel: __( 'Solid' ),\n\t\t\t\t\tinheritedValue: backgroundColor,\n\t\t\t\t\tsetValue: setBackgroundColor,\n\t\t\t\t\tuserValue: userBackgroundColor,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'gradient',\n\t\t\t\t\tlabel: __( 'Gradient' ),\n\t\t\t\t\tinheritedValue: gradient,\n\t\t\t\t\tsetValue: setGradient,\n\t\t\t\t\tuserValue: userGradient,\n\t\t\t\t\tisGradient: true,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tshowLinkPanel && {\n\t\t\tkey: 'link',\n\t\t\tlabel: __( 'Link' ),\n\t\t\thasValue: hasLink,\n\t\t\tresetValue: resetLink,\n\t\t\tisShownByDefault: defaultControls.link,\n\t\t\tindicators: [ linkColor, hoverLinkColor ],\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'link',\n\t\t\t\t\tlabel: __( 'Default' ),\n\t\t\t\t\tinheritedValue: linkColor,\n\t\t\t\t\tsetValue: setLinkColor,\n\t\t\t\t\tuserValue: userLinkColor,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'hover',\n\t\t\t\t\tlabel: __( 'Hover' ),\n\t\t\t\t\tinheritedValue: hoverLinkColor,\n\t\t\t\t\tsetValue: setHoverLinkColor,\n\t\t\t\t\tuserValue: userHoverLinkColor,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t].filter( Boolean );\n\n\telements.forEach( ( { name, label, showPanel } ) => {\n\t\tif ( ! showPanel ) return;\n\n\t\tconst elementBackgroundColor = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.background\n\t\t);\n\t\tconst elementGradient = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.gradient\n\t\t);\n\t\tconst elementTextColor = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.text\n\t\t);\n\t\tconst elementBackgroundUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.background\n\t\t);\n\t\tconst elementGradientUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.gradient\n\t\t);\n\t\tconst elementTextUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.text\n\t\t);\n\t\tconst hasElement = () =>\n\t\t\t!! (\n\t\t\t\telementTextUserColor ||\n\t\t\t\telementBackgroundUserColor ||\n\t\t\t\telementGradientUserColor\n\t\t\t);\n\t\tconst resetElement = () => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'background' ],\n\t\t\t\tundefined\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.gradient = undefined;\n\t\t\tnewValue.elements[ name ].color.text = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\n\t\tconst setElementTextColor = ( newTextColor ) => {\n\t\t\tonChange(\n\t\t\t\tsetImmutably(\n\t\t\t\t\tvalue,\n\t\t\t\t\t[ 'elements', name, 'color', 'text' ],\n\t\t\t\t\tencodeColorValue( newTextColor )\n\t\t\t\t)\n\t\t\t);\n\t\t};\n\t\tconst setElementBackgroundColor = ( newBackgroundColor ) => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'background' ],\n\t\t\t\tencodeColorValue( newBackgroundColor )\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.gradient = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\t\tconst setElementGradient = ( newGradient ) => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'gradient' ],\n\t\t\t\tencodeGradientValue( newGradient )\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.background = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\t\tconst supportsTextColor = true;\n\t\t// Background color is not supported for `caption`\n\t\t// as there isn't yet a way to set padding for the element.\n\t\tconst supportsBackground = name !== 'caption';\n\n\t\titems.push( {\n\t\t\tkey: name,\n\t\t\tlabel,\n\t\t\thasValue: hasElement,\n\t\t\tresetValue: resetElement,\n\t\t\tisShownByDefault: defaultControls[ name ],\n\t\t\tindicators:\n\t\t\t\tsupportsTextColor && supportsBackground\n\t\t\t\t\t? [\n\t\t\t\t\t\t\telementTextColor,\n\t\t\t\t\t\t\telementGradient ?? elementBackgroundColor,\n\t\t\t\t\t  ]\n\t\t\t\t\t: [\n\t\t\t\t\t\t\tsupportsTextColor\n\t\t\t\t\t\t\t\t? elementTextColor\n\t\t\t\t\t\t\t\t: elementGradient ?? elementBackgroundColor,\n\t\t\t\t\t  ],\n\t\t\ttabs: [\n\t\t\t\thasSolidColors &&\n\t\t\t\t\tsupportsTextColor && {\n\t\t\t\t\t\tkey: 'text',\n\t\t\t\t\t\tlabel: __( 'Text' ),\n\t\t\t\t\t\tinheritedValue: elementTextColor,\n\t\t\t\t\t\tsetValue: setElementTextColor,\n\t\t\t\t\t\tuserValue: elementTextUserColor,\n\t\t\t\t\t},\n\t\t\t\thasSolidColors &&\n\t\t\t\t\tsupportsBackground && {\n\t\t\t\t\t\tkey: 'background',\n\t\t\t\t\t\tlabel: __( 'Background' ),\n\t\t\t\t\t\tinheritedValue: elementBackgroundColor,\n\t\t\t\t\t\tsetValue: setElementBackgroundColor,\n\t\t\t\t\t\tuserValue: elementBackgroundUserColor,\n\t\t\t\t\t},\n\t\t\t\thasGradientColors &&\n\t\t\t\t\tsupportsBackground && {\n\t\t\t\t\t\tkey: 'gradient',\n\t\t\t\t\t\tlabel: __( 'Gradient' ),\n\t\t\t\t\t\tinheritedValue: elementGradient,\n\t\t\t\t\t\tsetValue: setElementGradient,\n\t\t\t\t\t\tuserValue: elementGradientUserColor,\n\t\t\t\t\t\tisGradient: true,\n\t\t\t\t\t},\n\t\t\t].filter( Boolean ),\n\t\t} );\n\t} );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ items.map( ( item ) => (\n\t\t\t\t<ColorPanelDropdown\n\t\t\t\t\tkey={ item.key }\n\t\t\t\t\t{ ...item }\n\t\t\t\t\tcolorGradientControlSettings={ {\n\t\t\t\t\t\tcolors,\n\t\t\t\t\t\tdisableCustomColors: ! areCustomSolidsEnabled,\n\t\t\t\t\t\tgradients,\n\t\t\t\t\t\tdisableCustomGradients: ! areCustomGradientsEnabled,\n\t\t\t\t\t} }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t\t{ children }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * External dependencies\n */\nimport a11yPlugin from 'colord/plugins/a11y';\nimport namesPlugin from 'colord/plugins/names';\nimport { colord, extend } from 'colord';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Notice } from '@wordpress/components';\nimport { speak } from '@wordpress/a11y';\n\nextend( [ namesPlugin, a11yPlugin ] );\n\nfunction ContrastChecker( {\n\tbackgroundColor,\n\tfallbackBackgroundColor,\n\tfallbackTextColor,\n\tfallbackLinkColor,\n\tfontSize, // Font size value in pixels.\n\tisLargeText,\n\ttextColor,\n\tlinkColor,\n\tenableAlphaChecker = false,\n} ) {\n\tconst currentBackgroundColor = backgroundColor || fallbackBackgroundColor;\n\n\t// Must have a background color.\n\tif ( ! currentBackgroundColor ) {\n\t\treturn null;\n\t}\n\n\tconst currentTextColor = textColor || fallbackTextColor;\n\tconst currentLinkColor = linkColor || fallbackLinkColor;\n\n\t// Must have at least one text color.\n\tif ( ! currentTextColor && ! currentLinkColor ) {\n\t\treturn null;\n\t}\n\n\tconst textColors = [\n\t\t{\n\t\t\tcolor: currentTextColor,\n\t\t\tdescription: __( 'text color' ),\n\t\t},\n\t\t{\n\t\t\tcolor: currentLinkColor,\n\t\t\tdescription: __( 'link color' ),\n\t\t},\n\t];\n\tconst colordBackgroundColor = colord( currentBackgroundColor );\n\tconst backgroundColorHasTransparency = colordBackgroundColor.alpha() < 1;\n\tconst backgroundColorBrightness = colordBackgroundColor.brightness();\n\tconst isReadableOptions = {\n\t\tlevel: 'AA',\n\t\tsize:\n\t\t\tisLargeText || ( isLargeText !== false && fontSize >= 24 )\n\t\t\t\t? 'large'\n\t\t\t\t: 'small',\n\t};\n\n\tlet message = '';\n\tlet speakMessage = '';\n\tfor ( const item of textColors ) {\n\t\t// If there is no color, go no further.\n\t\tif ( ! item.color ) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst colordTextColor = colord( item.color );\n\t\tconst isColordTextReadable = colordTextColor.isReadable(\n\t\t\tcolordBackgroundColor,\n\t\t\tisReadableOptions\n\t\t);\n\t\tconst textHasTransparency = colordTextColor.alpha() < 1;\n\n\t\t// If the contrast is not readable.\n\t\tif ( ! isColordTextReadable ) {\n\t\t\t// Don't show the message if the background or text is transparent.\n\t\t\tif ( backgroundColorHasTransparency || textHasTransparency ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tmessage =\n\t\t\t\tbackgroundColorBrightness < colordTextColor.brightness()\n\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t// translators: %s is a type of text color, e.g., \"text color\" or \"link color\".\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t'This color combination may be hard for people to read. Try using a darker background color and/or a brighter %s.'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\titem.description\n\t\t\t\t\t  )\n\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t// translators: %s is a type of text color, e.g., \"text color\" or \"link color\".\n\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t'This color combination may be hard for people to read. Try using a brighter background color and/or a darker %s.'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\titem.description\n\t\t\t\t\t  );\n\t\t\tspeakMessage = __(\n\t\t\t\t'This color combination may be hard for people to read.'\n\t\t\t);\n\t\t\t// Break from the loop when we have a contrast warning.\n\t\t\t// These messages take priority over the transparency warning.\n\t\t\tbreak;\n\t\t}\n\n\t\t// If there is no contrast warning and the text is transparent,\n\t\t// show the transparent warning if alpha check is enabled.\n\t\tif ( textHasTransparency && enableAlphaChecker ) {\n\t\t\tmessage = __( 'Transparent text may be hard for people to read.' );\n\t\t\tspeakMessage = __(\n\t\t\t\t'Transparent text may be hard for people to read.'\n\t\t\t);\n\t\t}\n\t}\n\n\tif ( ! message ) {\n\t\treturn null;\n\t}\n\n\t// Note: The `Notice` component can speak messages via its `spokenMessage`\n\t// prop, but the contrast checker requires granular control over when the\n\t// announcements are made. Notably, the message will be re-announced if a\n\t// new color combination is selected and the contrast is still insufficient.\n\tspeak( speakMessage );\n\n\treturn (\n\t\t<div className=\"block-editor-contrast-checker\">\n\t\t\t<Notice\n\t\t\t\tspokenMessage={ null }\n\t\t\t\tstatus=\"warning\"\n\t\t\t\tisDismissible={ false }\n\t\t\t>\n\t\t\t\t{ message }\n\t\t\t</Notice>\n\t\t</div>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/contrast-checker/README.md\n */\nexport default ContrastChecker;\n","/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport ContrastChecker from '../components/contrast-checker';\nimport { __unstableUseBlockRef as useBlockRef } from '../components/block-list/use-block-props/use-block-refs';\n\nfunction getComputedStyle( node ) {\n\treturn node.ownerDocument.defaultView.getComputedStyle( node );\n}\n\nexport default function BlockColorContrastChecker( { clientId } ) {\n\tconst [ detectedBackgroundColor, setDetectedBackgroundColor ] = useState();\n\tconst [ detectedColor, setDetectedColor ] = useState();\n\tconst [ detectedLinkColor, setDetectedLinkColor ] = useState();\n\tconst ref = useBlockRef( clientId );\n\n\t// There are so many things that can change the color of a block\n\t// So we perform this check on every render.\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tuseEffect( () => {\n\t\tif ( ! ref.current ) {\n\t\t\treturn;\n\t\t}\n\t\tsetDetectedColor( getComputedStyle( ref.current ).color );\n\n\t\tconst firstLinkElement = ref.current?.querySelector( 'a' );\n\t\tif ( firstLinkElement && !! firstLinkElement.innerText ) {\n\t\t\tsetDetectedLinkColor( getComputedStyle( firstLinkElement ).color );\n\t\t}\n\n\t\tlet backgroundColorNode = ref.current;\n\t\tlet backgroundColor =\n\t\t\tgetComputedStyle( backgroundColorNode ).backgroundColor;\n\t\twhile (\n\t\t\tbackgroundColor === 'rgba(0, 0, 0, 0)' &&\n\t\t\tbackgroundColorNode.parentNode &&\n\t\t\tbackgroundColorNode.parentNode.nodeType ===\n\t\t\t\tbackgroundColorNode.parentNode.ELEMENT_NODE\n\t\t) {\n\t\t\tbackgroundColorNode = backgroundColorNode.parentNode;\n\t\t\tbackgroundColor =\n\t\t\t\tgetComputedStyle( backgroundColorNode ).backgroundColor;\n\t\t}\n\n\t\tsetDetectedBackgroundColor( backgroundColor );\n\t} );\n\n\treturn (\n\t\t<ContrastChecker\n\t\t\tbackgroundColor={ detectedBackgroundColor }\n\t\t\ttextColor={ detectedColor }\n\t\t\tenableAlphaChecker\n\t\t\tlinkColor={ detectedLinkColor }\n\t\t/>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { getBlockSupport } from '@wordpress/blocks';\nimport { useMemo, Platform, useCallback } from '@wordpress/element';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetColorClassName,\n\tgetColorObjectByAttributeValues,\n} from '../components/colors';\nimport { __experimentalGetGradientClass } from '../components/gradients';\nimport {\n\tcleanEmptyObject,\n\ttransformStyles,\n\tshouldSkipSerialization,\n\tuseBlockSettings,\n} from './utils';\nimport useSetting from '../components/use-setting';\nimport InspectorControls from '../components/inspector-controls';\nimport {\n\tuseHasColorPanel,\n\tdefault as StylesColorPanel,\n} from '../components/global-styles/color-panel';\nimport BlockColorContrastChecker from './contrast-checker';\n\nexport const COLOR_SUPPORT_KEY = 'color';\n\nconst hasColorSupport = ( blockType ) => {\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\treturn (\n\t\tcolorSupport &&\n\t\t( colorSupport.link === true ||\n\t\t\tcolorSupport.gradient === true ||\n\t\t\tcolorSupport.background !== false ||\n\t\t\tcolorSupport.text !== false )\n\t);\n};\n\nconst hasLinkColorSupport = ( blockType ) => {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.link\n\t);\n};\n\nconst hasGradientSupport = ( blockType ) => {\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.gradients\n\t);\n};\n\nconst hasBackgroundColorSupport = ( blockType ) => {\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.background !== false;\n};\n\nconst hasTextColorSupport = ( blockType ) => {\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.text !== false;\n};\n\n/**\n * Filters registered block settings, extending attributes to include\n * `backgroundColor` and `textColor` attribute.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addAttributes( settings ) {\n\tif ( ! hasColorSupport( settings ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( ! settings.attributes.backgroundColor ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tbackgroundColor: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\tif ( ! settings.attributes.textColor ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\ttextColor: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\tif ( hasGradientSupport( settings ) && ! settings.attributes.gradient ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tgradient: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override props assigned to save component to inject colors classnames.\n *\n * @param {Object} props      Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( props, blockType, attributes ) {\n\tif (\n\t\t! hasColorSupport( blockType ) ||\n\t\tshouldSkipSerialization( blockType, COLOR_SUPPORT_KEY )\n\t) {\n\t\treturn props;\n\t}\n\n\tconst hasGradient = hasGradientSupport( blockType );\n\n\t// I'd have preferred to avoid the \"style\" attribute usage here\n\tconst { backgroundColor, textColor, gradient, style } = attributes;\n\n\tconst shouldSerialize = ( feature ) =>\n\t\t! shouldSkipSerialization( blockType, COLOR_SUPPORT_KEY, feature );\n\n\t// Primary color classes must come before the `has-text-color`,\n\t// `has-background` and `has-link-color` classes to maintain backwards\n\t// compatibility and avoid block invalidations.\n\tconst textClass = shouldSerialize( 'text' )\n\t\t? getColorClassName( 'color', textColor )\n\t\t: undefined;\n\n\tconst gradientClass = shouldSerialize( 'gradients' )\n\t\t? __experimentalGetGradientClass( gradient )\n\t\t: undefined;\n\n\tconst backgroundClass = shouldSerialize( 'background' )\n\t\t? getColorClassName( 'background-color', backgroundColor )\n\t\t: undefined;\n\n\tconst serializeHasBackground =\n\t\tshouldSerialize( 'background' ) || shouldSerialize( 'gradients' );\n\tconst hasBackground =\n\t\tbackgroundColor ||\n\t\tstyle?.color?.background ||\n\t\t( hasGradient && ( gradient || style?.color?.gradient ) );\n\n\tconst newClassName = classnames(\n\t\tprops.className,\n\t\ttextClass,\n\t\tgradientClass,\n\t\t{\n\t\t\t// Don't apply the background class if there's a custom gradient.\n\t\t\t[ backgroundClass ]:\n\t\t\t\t( ! hasGradient || ! style?.color?.gradient ) &&\n\t\t\t\t!! backgroundClass,\n\t\t\t'has-text-color':\n\t\t\t\tshouldSerialize( 'text' ) &&\n\t\t\t\t( textColor || style?.color?.text ),\n\t\t\t'has-background': serializeHasBackground && hasBackground,\n\t\t\t'has-link-color':\n\t\t\t\tshouldSerialize( 'link' ) && style?.elements?.link?.color,\n\t\t}\n\t);\n\tprops.className = newClassName ? newClassName : undefined;\n\n\treturn props;\n}\n\n/**\n * Filters registered block settings to extend the block edit wrapper\n * to apply the desired styles and classnames properly.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addEditProps( settings ) {\n\tif (\n\t\t! hasColorSupport( settings ) ||\n\t\tshouldSkipSerialization( settings, COLOR_SUPPORT_KEY )\n\t) {\n\t\treturn settings;\n\t}\n\tconst existingGetEditWrapperProps = settings.getEditWrapperProps;\n\tsettings.getEditWrapperProps = ( attributes ) => {\n\t\tlet props = {};\n\t\tif ( existingGetEditWrapperProps ) {\n\t\t\tprops = existingGetEditWrapperProps( attributes );\n\t\t}\n\t\treturn addSaveProps( props, settings, attributes );\n\t};\n\n\treturn settings;\n}\n\nfunction styleToAttributes( style ) {\n\tconst textColorValue = style?.color?.text;\n\tconst textColorSlug = textColorValue?.startsWith( 'var:preset|color|' )\n\t\t? textColorValue.substring( 'var:preset|color|'.length )\n\t\t: undefined;\n\tconst backgroundColorValue = style?.color?.background;\n\tconst backgroundColorSlug = backgroundColorValue?.startsWith(\n\t\t'var:preset|color|'\n\t)\n\t\t? backgroundColorValue.substring( 'var:preset|color|'.length )\n\t\t: undefined;\n\tconst gradientValue = style?.color?.gradient;\n\tconst gradientSlug = gradientValue?.startsWith( 'var:preset|gradient|' )\n\t\t? gradientValue.substring( 'var:preset|gradient|'.length )\n\t\t: undefined;\n\tconst updatedStyle = { ...style };\n\tupdatedStyle.color = {\n\t\t...updatedStyle.color,\n\t\ttext: textColorSlug ? undefined : textColorValue,\n\t\tbackground: backgroundColorSlug ? undefined : backgroundColorValue,\n\t\tgradient: gradientSlug ? undefined : gradientValue,\n\t};\n\treturn {\n\t\tstyle: cleanEmptyObject( updatedStyle ),\n\t\ttextColor: textColorSlug,\n\t\tbackgroundColor: backgroundColorSlug,\n\t\tgradient: gradientSlug,\n\t};\n}\n\nfunction attributesToStyle( attributes ) {\n\treturn {\n\t\t...attributes.style,\n\t\tcolor: {\n\t\t\t...attributes.style?.color,\n\t\t\ttext: attributes.textColor\n\t\t\t\t? 'var:preset|color|' + attributes.textColor\n\t\t\t\t: attributes.style?.color?.text,\n\t\t\tbackground: attributes.backgroundColor\n\t\t\t\t? 'var:preset|color|' + attributes.backgroundColor\n\t\t\t\t: attributes.style?.color?.background,\n\t\t\tgradient: attributes.gradient\n\t\t\t\t? 'var:preset|gradient|' + attributes.gradient\n\t\t\t\t: attributes.style?.color?.gradient,\n\t\t},\n\t};\n}\n\nfunction ColorInspectorControl( { children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributesToStyle( attributes );\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\t...styleToAttributes( updatedStyle ),\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"color\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function ColorEdit( props ) {\n\tconst { clientId, name, attributes, setAttributes } = props;\n\tconst settings = useBlockSettings( name );\n\tconst isEnabled = useHasColorPanel( settings );\n\tconst value = useMemo( () => {\n\t\treturn attributesToStyle( {\n\t\t\tstyle: attributes.style,\n\t\t\ttextColor: attributes.textColor,\n\t\t\tbackgroundColor: attributes.backgroundColor,\n\t\t\tgradient: attributes.gradient,\n\t\t} );\n\t}, [\n\t\tattributes.style,\n\t\tattributes.textColor,\n\t\tattributes.backgroundColor,\n\t\tattributes.gradient,\n\t] );\n\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( styleToAttributes( newStyle ) );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultControls = getBlockSupport( props.name, [\n\t\tCOLOR_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\n\tconst enableContrastChecking =\n\t\tPlatform.OS === 'web' &&\n\t\t! value?.color?.gradient &&\n\t\t( settings?.color?.text || settings?.color?.link ) &&\n\t\t// Contrast checking is enabled by default.\n\t\t// Deactivating it requires `enableContrastChecker` to have\n\t\t// an explicit value of `false`.\n\t\tfalse !==\n\t\t\tgetBlockSupport( props.name, [\n\t\t\t\tCOLOR_SUPPORT_KEY,\n\t\t\t\t'enableContrastChecker',\n\t\t\t] );\n\n\treturn (\n\t\t<StylesColorPanel\n\t\t\tas={ ColorInspectorControl }\n\t\t\tpanelId={ clientId }\n\t\t\tsettings={ settings }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tdefaultControls={ defaultControls }\n\t\t\tenableContrastChecker={\n\t\t\t\tfalse !==\n\t\t\t\tgetBlockSupport( props.name, [\n\t\t\t\t\tCOLOR_SUPPORT_KEY,\n\t\t\t\t\t'enableContrastChecker',\n\t\t\t\t] )\n\t\t\t}\n\t\t>\n\t\t\t{ enableContrastChecking && (\n\t\t\t\t<BlockColorContrastChecker clientId={ clientId } />\n\t\t\t) }\n\t\t</StylesColorPanel>\n\t);\n}\n\n/**\n * This adds inline styles for color palette colors.\n * Ideally, this is not needed and themes should load their palettes on the editor.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withColorPaletteStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst { name, attributes } = props;\n\t\tconst { backgroundColor, textColor } = attributes;\n\t\tconst userPalette = useSetting( 'color.palette.custom' );\n\t\tconst themePalette = useSetting( 'color.palette.theme' );\n\t\tconst defaultPalette = useSetting( 'color.palette.default' );\n\t\tconst colors = useMemo(\n\t\t\t() => [\n\t\t\t\t...( userPalette || [] ),\n\t\t\t\t...( themePalette || [] ),\n\t\t\t\t...( defaultPalette || [] ),\n\t\t\t],\n\t\t\t[ userPalette, themePalette, defaultPalette ]\n\t\t);\n\t\tif (\n\t\t\t! hasColorSupport( name ) ||\n\t\t\tshouldSkipSerialization( name, COLOR_SUPPORT_KEY )\n\t\t) {\n\t\t\treturn <BlockListBlock { ...props } />;\n\t\t}\n\t\tconst extraStyles = {};\n\n\t\tif (\n\t\t\ttextColor &&\n\t\t\t! shouldSkipSerialization( name, COLOR_SUPPORT_KEY, 'text' )\n\t\t) {\n\t\t\textraStyles.color = getColorObjectByAttributeValues(\n\t\t\t\tcolors,\n\t\t\t\ttextColor\n\t\t\t)?.color;\n\t\t}\n\t\tif (\n\t\t\tbackgroundColor &&\n\t\t\t! shouldSkipSerialization( name, COLOR_SUPPORT_KEY, 'background' )\n\t\t) {\n\t\t\textraStyles.backgroundColor = getColorObjectByAttributeValues(\n\t\t\t\tcolors,\n\t\t\t\tbackgroundColor\n\t\t\t)?.color;\n\t\t}\n\n\t\tlet wrapperProps = props.wrapperProps;\n\t\twrapperProps = {\n\t\t\t...props.wrapperProps,\n\t\t\tstyle: {\n\t\t\t\t...extraStyles,\n\t\t\t\t...props.wrapperProps?.style,\n\t\t\t},\n\t\t};\n\n\t\treturn <BlockListBlock { ...props } wrapperProps={ wrapperProps } />;\n\t},\n\t'withColorPaletteStyles'\n);\n\nconst MIGRATION_PATHS = {\n\tlinkColor: [ [ 'style', 'elements', 'link', 'color', 'text' ] ],\n\ttextColor: [ [ 'textColor' ], [ 'style', 'color', 'text' ] ],\n\tbackgroundColor: [\n\t\t[ 'backgroundColor' ],\n\t\t[ 'style', 'color', 'background' ],\n\t],\n\tgradient: [ [ 'gradient' ], [ 'style', 'color', 'gradient' ] ],\n};\n\nexport function addTransforms( result, source, index, results ) {\n\tconst destinationBlockType = result.name;\n\tconst activeSupports = {\n\t\tlinkColor: hasLinkColorSupport( destinationBlockType ),\n\t\ttextColor: hasTextColorSupport( destinationBlockType ),\n\t\tbackgroundColor: hasBackgroundColorSupport( destinationBlockType ),\n\t\tgradient: hasGradientSupport( destinationBlockType ),\n\t};\n\treturn transformStyles(\n\t\tactiveSupports,\n\t\tMIGRATION_PATHS,\n\t\tresult,\n\t\tsource,\n\t\tindex,\n\t\tresults\n\t);\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/color/addAttribute',\n\taddAttributes\n);\n\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/color/addSaveProps',\n\taddSaveProps\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/color/addEditProps',\n\taddEditProps\n);\n\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/color/with-color-palette-styles',\n\twithColorPaletteStyles\n);\n\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/color/addTransforms',\n\taddTransforms\n);\n","/**\n * WordPress dependencies\n */\nimport { SelectControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useSetting from '../use-setting';\n\nexport default function FontFamilyControl( {\n\tvalue = '',\n\tonChange,\n\tfontFamilies,\n\t...props\n} ) {\n\tconst blockLevelFontFamilies = useSetting( 'typography.fontFamilies' );\n\tif ( ! fontFamilies ) {\n\t\tfontFamilies = blockLevelFontFamilies;\n\t}\n\n\tif ( ! fontFamilies || fontFamilies.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst options = [\n\t\t{ value: '', label: __( 'Default' ) },\n\t\t...fontFamilies.map( ( { fontFamily, name } ) => {\n\t\t\treturn {\n\t\t\t\tvalue: fontFamily,\n\t\t\t\tlabel: name || fontFamily,\n\t\t\t};\n\t\t} ),\n\t];\n\treturn (\n\t\t<SelectControl\n\t\t\tlabel={ __( 'Font' ) }\n\t\t\toptions={ options }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tlabelPosition=\"top\"\n\t\t\t{ ...props }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { CustomSelectControl } from '@wordpress/components';\nimport { useMemo } from '@wordpress/element';\nimport { __, _x, sprintf } from '@wordpress/i18n';\n\nconst FONT_STYLES = [\n\t{\n\t\tname: _x( 'Regular', 'font style' ),\n\t\tvalue: 'normal',\n\t},\n\t{\n\t\tname: _x( 'Italic', 'font style' ),\n\t\tvalue: 'italic',\n\t},\n];\n\nconst FONT_WEIGHTS = [\n\t{\n\t\tname: _x( 'Thin', 'font weight' ),\n\t\tvalue: '100',\n\t},\n\t{\n\t\tname: _x( 'Extra Light', 'font weight' ),\n\t\tvalue: '200',\n\t},\n\t{\n\t\tname: _x( 'Light', 'font weight' ),\n\t\tvalue: '300',\n\t},\n\t{\n\t\tname: _x( 'Regular', 'font weight' ),\n\t\tvalue: '400',\n\t},\n\t{\n\t\tname: _x( 'Medium', 'font weight' ),\n\t\tvalue: '500',\n\t},\n\t{\n\t\tname: _x( 'Semi Bold', 'font weight' ),\n\t\tvalue: '600',\n\t},\n\t{\n\t\tname: _x( 'Bold', 'font weight' ),\n\t\tvalue: '700',\n\t},\n\t{\n\t\tname: _x( 'Extra Bold', 'font weight' ),\n\t\tvalue: '800',\n\t},\n\t{\n\t\tname: _x( 'Black', 'font weight' ),\n\t\tvalue: '900',\n\t},\n];\n\n/**\n * Adjusts font appearance field label in case either font styles or weights\n * are disabled.\n *\n * @param {boolean} hasFontStyles  Whether font styles are enabled and present.\n * @param {boolean} hasFontWeights Whether font weights are enabled and present.\n * @return {string} A label representing what font appearance is being edited.\n */\nconst getFontAppearanceLabel = ( hasFontStyles, hasFontWeights ) => {\n\tif ( ! hasFontStyles ) {\n\t\treturn __( 'Font weight' );\n\t}\n\n\tif ( ! hasFontWeights ) {\n\t\treturn __( 'Font style' );\n\t}\n\n\treturn __( 'Appearance' );\n};\n\n/**\n * Control to display unified font style and weight options.\n *\n * @param {Object} props Component props.\n *\n * @return {WPElement} Font appearance control.\n */\nexport default function FontAppearanceControl( props ) {\n\tconst {\n\t\tonChange,\n\t\thasFontStyles = true,\n\t\thasFontWeights = true,\n\t\tvalue: { fontStyle, fontWeight },\n\t\t...otherProps\n\t} = props;\n\tconst hasStylesOrWeights = hasFontStyles || hasFontWeights;\n\tconst label = getFontAppearanceLabel( hasFontStyles, hasFontWeights );\n\tconst defaultOption = {\n\t\tkey: 'default',\n\t\tname: __( 'Default' ),\n\t\tstyle: { fontStyle: undefined, fontWeight: undefined },\n\t};\n\n\t// Combines both font style and weight options into a single dropdown.\n\tconst combineOptions = () => {\n\t\tconst combinedOptions = [ defaultOption ];\n\n\t\tFONT_STYLES.forEach( ( { name: styleName, value: styleValue } ) => {\n\t\t\tFONT_WEIGHTS.forEach(\n\t\t\t\t( { name: weightName, value: weightValue } ) => {\n\t\t\t\t\tconst optionName =\n\t\t\t\t\t\tstyleValue === 'normal'\n\t\t\t\t\t\t\t? weightName\n\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t/* translators: 1: Font weight name. 2: Font style name. */\n\t\t\t\t\t\t\t\t\t__( '%1$s %2$s' ),\n\t\t\t\t\t\t\t\t\tweightName,\n\t\t\t\t\t\t\t\t\tstyleName\n\t\t\t\t\t\t\t  );\n\n\t\t\t\t\tcombinedOptions.push( {\n\t\t\t\t\t\tkey: `${ styleValue }-${ weightValue }`,\n\t\t\t\t\t\tname: optionName,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tfontStyle: styleValue,\n\t\t\t\t\t\t\tfontWeight: weightValue,\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t);\n\t\t} );\n\n\t\treturn combinedOptions;\n\t};\n\n\t// Generates select options for font styles only.\n\tconst styleOptions = () => {\n\t\tconst combinedOptions = [ defaultOption ];\n\t\tFONT_STYLES.forEach( ( { name, value } ) => {\n\t\t\tcombinedOptions.push( {\n\t\t\t\tkey: value,\n\t\t\t\tname,\n\t\t\t\tstyle: { fontStyle: value, fontWeight: undefined },\n\t\t\t} );\n\t\t} );\n\t\treturn combinedOptions;\n\t};\n\n\t// Generates select options for font weights only.\n\tconst weightOptions = () => {\n\t\tconst combinedOptions = [ defaultOption ];\n\t\tFONT_WEIGHTS.forEach( ( { name, value } ) => {\n\t\t\tcombinedOptions.push( {\n\t\t\t\tkey: value,\n\t\t\t\tname,\n\t\t\t\tstyle: { fontStyle: undefined, fontWeight: value },\n\t\t\t} );\n\t\t} );\n\t\treturn combinedOptions;\n\t};\n\n\t// Map font styles and weights to select options.\n\tconst selectOptions = useMemo( () => {\n\t\tif ( hasFontStyles && hasFontWeights ) {\n\t\t\treturn combineOptions();\n\t\t}\n\n\t\treturn hasFontStyles ? styleOptions() : weightOptions();\n\t}, [ props.options ] );\n\n\t// Find current selection by comparing font style & weight against options,\n\t// and fall back to the Default option if there is no matching option.\n\tconst currentSelection =\n\t\tselectOptions.find(\n\t\t\t( option ) =>\n\t\t\t\toption.style.fontStyle === fontStyle &&\n\t\t\t\toption.style.fontWeight === fontWeight\n\t\t) || selectOptions[ 0 ];\n\n\t// Adjusts screen reader description based on styles or weights.\n\tconst getDescribedBy = () => {\n\t\tif ( ! currentSelection ) {\n\t\t\treturn __( 'No selected font appearance' );\n\t\t}\n\n\t\tif ( ! hasFontStyles ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: %s: Currently selected font weight.\n\t\t\t\t__( 'Currently selected font weight: %s' ),\n\t\t\t\tcurrentSelection.name\n\t\t\t);\n\t\t}\n\n\t\tif ( ! hasFontWeights ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: %s: Currently selected font style.\n\t\t\t\t__( 'Currently selected font style: %s' ),\n\t\t\t\tcurrentSelection.name\n\t\t\t);\n\t\t}\n\n\t\treturn sprintf(\n\t\t\t// translators: %s: Currently selected font appearance.\n\t\t\t__( 'Currently selected font appearance: %s' ),\n\t\t\tcurrentSelection.name\n\t\t);\n\t};\n\n\treturn (\n\t\thasStylesOrWeights && (\n\t\t\t<CustomSelectControl\n\t\t\t\t{ ...otherProps }\n\t\t\t\tclassName=\"components-font-appearance-control\"\n\t\t\t\tlabel={ label }\n\t\t\t\tdescribedBy={ getDescribedBy() }\n\t\t\t\toptions={ selectOptions }\n\t\t\t\tvalue={ currentSelection }\n\t\t\t\tonChange={ ( { selectedItem } ) =>\n\t\t\t\t\tonChange( selectedItem.style )\n\t\t\t\t}\n\t\t\t\t__nextUnconstrainedWidth\n\t\t\t/>\n\t\t)\n\t);\n}\n","export const BASE_DEFAULT_VALUE = 1.5;\nexport const STEP = 0.1;\n/**\n * There are varying value types within LineHeightControl:\n *\n * {undefined} Initial value. No changes from the user.\n * {string} Input value. Value consumed/outputted by the input. Empty would be ''.\n * {number} Block attribute type. Input value needs to be converted for attribute setting.\n *\n * Note: If the value is undefined, the input requires it to be an empty string ('')\n * in order to be considered \"controlled\" by props (rather than internal state).\n */\nexport const RESET_VALUE = '';\n\n/**\n * Determines if the lineHeight attribute has been properly defined.\n *\n * @param {any} lineHeight The value to check.\n *\n * @return {boolean} Whether the lineHeight attribute is valid.\n */\nexport function isLineHeightDefined( lineHeight ) {\n\treturn lineHeight !== undefined && lineHeight !== RESET_VALUE;\n}\n","/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\nimport { __ } from '@wordpress/i18n';\nimport { __experimentalNumberControl as NumberControl } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport {\n\tBASE_DEFAULT_VALUE,\n\tRESET_VALUE,\n\tSTEP,\n\tisLineHeightDefined,\n} from './utils';\n\nconst LineHeightControl = ( {\n\tvalue: lineHeight,\n\tonChange,\n\t/** Start opting into the new margin-free styles that will become the default in a future version. */\n\t__nextHasNoMarginBottom = false,\n\t__unstableInputWidth = '60px',\n\t...otherProps\n} ) => {\n\tconst isDefined = isLineHeightDefined( lineHeight );\n\n\tconst adjustNextValue = ( nextValue, wasTypedOrPasted ) => {\n\t\t// Set the next value without modification if lineHeight has been defined.\n\t\tif ( isDefined ) return nextValue;\n\n\t\t/**\n\t\t * The following logic handles the initial step up/down action\n\t\t * (from an undefined value state) so that the next values are better suited for\n\t\t * line-height rendering. For example, the first step up should immediately\n\t\t * go to 1.6, rather than the normally expected 0.1.\n\t\t *\n\t\t * Step up/down actions can be triggered by keydowns of the up/down arrow keys,\n\t\t * or by clicking the spin buttons.\n\t\t */\n\t\tswitch ( `${ nextValue }` ) {\n\t\t\tcase `${ STEP }`:\n\t\t\t\t// Increment by step value.\n\t\t\t\treturn BASE_DEFAULT_VALUE + STEP;\n\t\t\tcase '0': {\n\t\t\t\t// This means the user explicitly input '0', rather than stepped down\n\t\t\t\t// from an undefined value state.\n\t\t\t\tif ( wasTypedOrPasted ) return nextValue;\n\t\t\t\t// Decrement by step value.\n\t\t\t\treturn BASE_DEFAULT_VALUE - STEP;\n\t\t\t}\n\t\t\tcase '':\n\t\t\t\treturn BASE_DEFAULT_VALUE;\n\t\t\tdefault:\n\t\t\t\treturn nextValue;\n\t\t}\n\t};\n\n\tconst stateReducer = ( state, action ) => {\n\t\t// Be careful when changing this — cross-browser behavior of the\n\t\t// `inputType` field in `input` events are inconsistent.\n\t\t// For example, Firefox emits an input event with inputType=\"insertReplacementText\"\n\t\t// on spin button clicks, while other browsers do not even emit an input event.\n\t\tconst wasTypedOrPasted = [ 'insertText', 'insertFromPaste' ].includes(\n\t\t\taction.payload.event.nativeEvent?.inputType\n\t\t);\n\t\tconst value = adjustNextValue( state.value, wasTypedOrPasted );\n\t\treturn { ...state, value };\n\t};\n\n\tconst value = isDefined ? lineHeight : RESET_VALUE;\n\n\tif ( ! __nextHasNoMarginBottom ) {\n\t\tdeprecated(\n\t\t\t'Bottom margin styles for wp.blockEditor.LineHeightControl',\n\t\t\t{\n\t\t\t\tsince: '6.0',\n\t\t\t\tversion: '6.4',\n\t\t\t\thint: 'Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version',\n\t\t\t}\n\t\t);\n\t}\n\tconst deprecatedStyles = __nextHasNoMarginBottom\n\t\t? undefined\n\t\t: { marginBottom: 24 };\n\n\tconst handleOnChange = ( nextValue, { event } ) => {\n\t\tif ( nextValue === '' ) {\n\t\t\tonChange();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( event.type === 'click' ) {\n\t\t\tonChange( adjustNextValue( `${ nextValue }`, false ) );\n\t\t\treturn;\n\t\t}\n\n\t\tonChange( `${ nextValue }` );\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block-editor-line-height-control\"\n\t\t\tstyle={ deprecatedStyles }\n\t\t>\n\t\t\t<NumberControl\n\t\t\t\t{ ...otherProps }\n\t\t\t\t__unstableInputWidth={ __unstableInputWidth }\n\t\t\t\t__unstableStateReducer={ stateReducer }\n\t\t\t\tonChange={ handleOnChange }\n\t\t\t\tlabel={ __( 'Line height' ) }\n\t\t\t\tplaceholder={ BASE_DEFAULT_VALUE }\n\t\t\t\tstep={ STEP }\n\t\t\t\tvalue={ value }\n\t\t\t\tmin={ 0 }\n\t\t\t\tspinControls=\"custom\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/line-height-control/README.md\n */\nexport default LineHeightControl;\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalUseCustomUnits as useCustomUnits,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useSetting from '../../components/use-setting';\n\n/**\n * Control for letter-spacing.\n *\n * @param {Object}                  props                      Component props.\n * @param {string}                  props.value                Currently selected letter-spacing.\n * @param {Function}                props.onChange             Handles change in letter-spacing selection.\n * @param {string|number|undefined} props.__unstableInputWidth Input width to pass through to inner UnitControl. Should be a valid CSS value.\n *\n * @return {WPElement} Letter-spacing control.\n */\nexport default function LetterSpacingControl( {\n\tvalue,\n\tonChange,\n\t__unstableInputWidth = '60px',\n\t...otherProps\n} ) {\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: useSetting( 'spacing.units' ) || [ 'px', 'em', 'rem' ],\n\t\tdefaultValues: { px: 2, em: 0.2, rem: 0.2 },\n\t} );\n\treturn (\n\t\t<UnitControl\n\t\t\t{ ...otherProps }\n\t\t\tlabel={ __( 'Letter spacing' ) }\n\t\t\tvalue={ value }\n\t\t\t__unstableInputWidth={ __unstableInputWidth }\n\t\t\tunits={ units }\n\t\t\tonChange={ onChange }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst reset = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7 11.5h10V13H7z\" />\n\t</SVG>\n);\n\nexport default reset;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatUppercase = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M6.1 6.8L2.1 18h1.6l1.1-3h4.3l1.1 3h1.6l-4-11.2H6.1zm-.8 6.8L7 8.9l1.7 4.7H5.3zm15.1-.7c-.4-.5-.9-.8-1.6-1 .4-.2.7-.5.8-.9.2-.4.3-.9.3-1.4 0-.9-.3-1.6-.8-2-.6-.5-1.3-.7-2.4-.7h-3.5V18h4.2c1.1 0 2-.3 2.6-.8.6-.6 1-1.4 1-2.4-.1-.8-.3-1.4-.6-1.9zm-5.7-4.7h1.8c.6 0 1.1.1 1.4.4.3.2.5.7.5 1.3 0 .6-.2 1.1-.5 1.3-.3.2-.8.4-1.4.4h-1.8V8.2zm4 8c-.4.3-.9.5-1.5.5h-2.6v-3.8h2.6c1.4 0 2 .6 2 1.9.1.6-.1 1-.5 1.4z\" />\n\t</SVG>\n);\n\nexport default formatUppercase;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatLowercase = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M11 16.8c-.1-.1-.2-.3-.3-.5v-2.6c0-.9-.1-1.7-.3-2.2-.2-.5-.5-.9-.9-1.2-.4-.2-.9-.3-1.6-.3-.5 0-1 .1-1.5.2s-.9.3-1.2.6l.2 1.2c.4-.3.7-.4 1.1-.5.3-.1.7-.2 1-.2.6 0 1 .1 1.3.4.3.2.4.7.4 1.4-1.2 0-2.3.2-3.3.7s-1.4 1.1-1.4 2.1c0 .7.2 1.2.7 1.6.4.4 1 .6 1.8.6.9 0 1.7-.4 2.4-1.2.1.3.2.5.4.7.1.2.3.3.6.4.3.1.6.1 1.1.1h.1l.2-1.2h-.1c-.4.1-.6 0-.7-.1zM9.2 16c-.2.3-.5.6-.9.8-.3.1-.7.2-1.1.2-.4 0-.7-.1-.9-.3-.2-.2-.3-.5-.3-.9 0-.6.2-1 .7-1.3.5-.3 1.3-.4 2.5-.5v2zm10.6-3.9c-.3-.6-.7-1.1-1.2-1.5-.6-.4-1.2-.6-1.9-.6-.5 0-.9.1-1.4.3-.4.2-.8.5-1.1.8V6h-1.4v12h1.3l.2-1c.2.4.6.6 1 .8.4.2.9.3 1.4.3.7 0 1.2-.2 1.8-.5.5-.4 1-.9 1.3-1.5.3-.6.5-1.3.5-2.1-.1-.6-.2-1.3-.5-1.9zm-1.7 4c-.4.5-.9.8-1.6.8s-1.2-.2-1.7-.7c-.4-.5-.7-1.2-.7-2.1 0-.9.2-1.6.7-2.1.4-.5 1-.7 1.7-.7s1.2.3 1.6.8c.4.5.6 1.2.6 2s-.2 1.4-.6 2z\" />\n\t</SVG>\n);\n\nexport default formatLowercase;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatCapitalize = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7.1 6.8L3.1 18h1.6l1.1-3h4.3l1.1 3h1.6l-4-11.2H7.1zm-.8 6.8L8 8.9l1.7 4.7H6.3zm14.5-1.5c-.3-.6-.7-1.1-1.2-1.5-.6-.4-1.2-.6-1.9-.6-.5 0-.9.1-1.4.3-.4.2-.8.5-1.1.8V6h-1.4v12h1.3l.2-1c.2.4.6.6 1 .8.4.2.9.3 1.4.3.7 0 1.2-.2 1.8-.5.5-.4 1-.9 1.3-1.5.3-.6.5-1.3.5-2.1-.1-.6-.2-1.3-.5-1.9zm-1.7 4c-.4.5-.9.8-1.6.8s-1.2-.2-1.7-.7c-.4-.5-.7-1.2-.7-2.1 0-.9.2-1.6.7-2.1.4-.5 1-.7 1.7-.7s1.2.3 1.6.8c.4.5.6 1.2.6 2 .1.8-.2 1.4-.6 2z\" />\n\t</SVG>\n);\n\nexport default formatCapitalize;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { BaseControl, Button } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport {\n\treset,\n\tformatCapitalize,\n\tformatLowercase,\n\tformatUppercase,\n} from '@wordpress/icons';\n\nconst TEXT_TRANSFORMS = [\n\t{\n\t\tname: __( 'None' ),\n\t\tvalue: 'none',\n\t\ticon: reset,\n\t},\n\t{\n\t\tname: __( 'Uppercase' ),\n\t\tvalue: 'uppercase',\n\t\ticon: formatUppercase,\n\t},\n\t{\n\t\tname: __( 'Lowercase' ),\n\t\tvalue: 'lowercase',\n\t\ticon: formatLowercase,\n\t},\n\t{\n\t\tname: __( 'Capitalize' ),\n\t\tvalue: 'capitalize',\n\t\ticon: formatCapitalize,\n\t},\n];\n\n/**\n * Control to facilitate text transform selections.\n *\n * @param {Object}   props           Component props.\n * @param {string}   props.className Class name to add to the control.\n * @param {string}   props.value     Currently selected text transform.\n * @param {Function} props.onChange  Handles change in text transform selection.\n *\n * @return {WPElement} Text transform control.\n */\nexport default function TextTransformControl( { className, value, onChange } ) {\n\treturn (\n\t\t<fieldset\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-text-transform-control',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t>\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t{ __( 'Letter case' ) }\n\t\t\t</BaseControl.VisualLabel>\n\t\t\t<div className=\"block-editor-text-transform-control__buttons\">\n\t\t\t\t{ TEXT_TRANSFORMS.map( ( textTransform ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tkey={ textTransform.value }\n\t\t\t\t\t\t\ticon={ textTransform.icon }\n\t\t\t\t\t\t\tlabel={ textTransform.name }\n\t\t\t\t\t\t\tisPressed={ textTransform.value === value }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t\t\ttextTransform.value === value\n\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t: textTransform.value\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t</fieldset>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatUnderline = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7 18v1h10v-1H7zm5-2c1.5 0 2.6-.4 3.4-1.2.8-.8 1.1-2 1.1-3.5V5H15v5.8c0 1.2-.2 2.1-.6 2.8-.4.7-1.2 1-2.4 1s-2-.3-2.4-1c-.4-.7-.6-1.6-.6-2.8V5H7.5v6.2c0 1.5.4 2.7 1.1 3.5.8.9 1.9 1.3 3.4 1.3z\" />\n\t</SVG>\n);\n\nexport default formatUnderline;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst formatStrikethrough = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M9.1 9v-.5c0-.6.2-1.1.7-1.4.5-.3 1.2-.5 2-.5.7 0 1.4.1 2.1.3.7.2 1.4.5 2.1.9l.2-1.9c-.6-.3-1.2-.5-1.9-.7-.8-.1-1.6-.2-2.4-.2-1.5 0-2.7.3-3.6 1-.8.7-1.2 1.5-1.2 2.6V9h2zM20 12H4v1h8.3c.3.1.6.2.8.3.5.2.9.5 1.1.8.3.3.4.7.4 1.2 0 .7-.2 1.1-.8 1.5-.5.3-1.2.5-2.1.5-.8 0-1.6-.1-2.4-.3-.8-.2-1.5-.5-2.2-.8L7 18.1c.5.2 1.2.4 2 .6.8.2 1.6.3 2.4.3 1.7 0 3-.3 3.9-1 .9-.7 1.3-1.6 1.3-2.8 0-.9-.2-1.7-.7-2.2H20v-1z\" />\n\t</SVG>\n);\n\nexport default formatStrikethrough;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { BaseControl, Button } from '@wordpress/components';\nimport { reset, formatStrikethrough, formatUnderline } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\n\nconst TEXT_DECORATIONS = [\n\t{\n\t\tname: __( 'None' ),\n\t\tvalue: 'none',\n\t\ticon: reset,\n\t},\n\t{\n\t\tname: __( 'Underline' ),\n\t\tvalue: 'underline',\n\t\ticon: formatUnderline,\n\t},\n\t{\n\t\tname: __( 'Strikethrough' ),\n\t\tvalue: 'line-through',\n\t\ticon: formatStrikethrough,\n\t},\n];\n\n/**\n * Control to facilitate text decoration selections.\n *\n * @param {Object}   props             Component props.\n * @param {string}   props.value       Currently selected text decoration.\n * @param {Function} props.onChange    Handles change in text decoration selection.\n * @param {string}   [props.className] Additional class name to apply.\n *\n * @return {WPElement} Text decoration control.\n */\nexport default function TextDecorationControl( {\n\tvalue,\n\tonChange,\n\tclassName,\n} ) {\n\treturn (\n\t\t<fieldset\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-text-decoration-control',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t>\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t{ __( 'Decoration' ) }\n\t\t\t</BaseControl.VisualLabel>\n\t\t\t<div className=\"block-editor-text-decoration-control__buttons\">\n\t\t\t\t{ TEXT_DECORATIONS.map( ( textDecoration ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tkey={ textDecoration.value }\n\t\t\t\t\t\t\ticon={ textDecoration.icon }\n\t\t\t\t\t\t\tlabel={ textDecoration.name }\n\t\t\t\t\t\t\tisPressed={ textDecoration.value === value }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t\t\ttextDecoration.value === value\n\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t: textDecoration.value\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t</fieldset>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tFontSizePicker,\n\t__experimentalNumberControl as NumberControl,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport FontFamilyControl from '../font-family';\nimport FontAppearanceControl from '../font-appearance-control';\nimport LineHeightControl from '../line-height-control';\nimport LetterSpacingControl from '../letter-spacing-control';\nimport TextTransformControl from '../text-transform-control';\nimport TextDecorationControl from '../text-decoration-control';\nimport { getValueFromVariable } from './utils';\nimport { setImmutably } from '../../utils/object';\n\nconst MIN_TEXT_COLUMNS = 1;\nconst MAX_TEXT_COLUMNS = 6;\n\nexport function useHasTypographyPanel( settings ) {\n\tconst hasFontFamily = useHasFontFamilyControl( settings );\n\tconst hasLineHeight = useHasLineHeightControl( settings );\n\tconst hasFontAppearance = useHasAppearanceControl( settings );\n\tconst hasLetterSpacing = useHasLetterSpacingControl( settings );\n\tconst hasTextTransform = useHasTextTransformControl( settings );\n\tconst hasTextDecoration = useHasTextDecorationControl( settings );\n\tconst hasTextColumns = useHasTextColumnsControl( settings );\n\tconst hasFontSize = useHasFontSizeControl( settings );\n\n\treturn (\n\t\thasFontFamily ||\n\t\thasLineHeight ||\n\t\thasFontAppearance ||\n\t\thasLetterSpacing ||\n\t\thasTextTransform ||\n\t\thasFontSize ||\n\t\thasTextDecoration ||\n\t\thasTextColumns\n\t);\n}\n\nfunction useHasFontSizeControl( settings ) {\n\tconst disableCustomFontSizes = ! settings?.typography?.customFontSize;\n\tconst fontSizesPerOrigin = settings?.typography?.fontSizes ?? {};\n\tconst fontSizes =\n\t\tfontSizesPerOrigin?.custom ??\n\t\tfontSizesPerOrigin?.theme ??\n\t\tfontSizesPerOrigin.default;\n\treturn !! fontSizes?.length || ! disableCustomFontSizes;\n}\n\nfunction useHasFontFamilyControl( settings ) {\n\tconst fontFamiliesPerOrigin = settings?.typography?.fontFamilies;\n\tconst fontFamilies =\n\t\tfontFamiliesPerOrigin?.custom ??\n\t\tfontFamiliesPerOrigin?.theme ??\n\t\tfontFamiliesPerOrigin?.default;\n\treturn !! fontFamilies?.length;\n}\n\nfunction useHasLineHeightControl( settings ) {\n\treturn settings?.typography?.lineHeight;\n}\n\nfunction useHasAppearanceControl( settings ) {\n\tconst hasFontStyles = settings?.typography?.fontStyle;\n\tconst hasFontWeights = settings?.typography?.fontWeight;\n\treturn hasFontStyles || hasFontWeights;\n}\n\nfunction useAppearanceControlLabel( settings ) {\n\tconst hasFontStyles = settings?.typography?.fontStyle;\n\tconst hasFontWeights = settings?.typography?.fontWeight;\n\tif ( ! hasFontStyles ) {\n\t\treturn __( 'Font weight' );\n\t}\n\tif ( ! hasFontWeights ) {\n\t\treturn __( 'Font style' );\n\t}\n\treturn __( 'Appearance' );\n}\n\nfunction useHasLetterSpacingControl( settings ) {\n\treturn settings?.typography?.letterSpacing;\n}\n\nfunction useHasTextTransformControl( settings ) {\n\treturn settings?.typography?.textTransform;\n}\n\nfunction useHasTextDecorationControl( settings ) {\n\treturn settings?.typography?.textDecoration;\n}\n\nfunction useHasTextColumnsControl( settings ) {\n\treturn settings?.typography?.textColumns;\n}\n\nfunction TypographyToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Typography' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tfontFamily: true,\n\tfontSize: true,\n\tfontAppearance: true,\n\tlineHeight: true,\n\tletterSpacing: true,\n\ttextTransform: true,\n\ttextDecoration: true,\n\ttextColumns: true,\n};\n\nexport default function TypographyPanel( {\n\tas: Wrapper = TypographyToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n} ) {\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\n\t// Font Family\n\tconst hasFontFamilyEnabled = useHasFontFamilyControl( settings );\n\tconst fontFamiliesPerOrigin = settings?.typography?.fontFamilies;\n\tconst fontFamilies =\n\t\tfontFamiliesPerOrigin?.custom ??\n\t\tfontFamiliesPerOrigin?.theme ??\n\t\tfontFamiliesPerOrigin?.default;\n\tconst fontFamily = decodeValue( inheritedValue?.typography?.fontFamily );\n\tconst setFontFamily = ( newValue ) => {\n\t\tconst slug = fontFamilies?.find(\n\t\t\t( { fontFamily: f } ) => f === newValue\n\t\t)?.slug;\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'fontFamily' ],\n\t\t\t\tslug\n\t\t\t\t\t? `var:preset|font-family|${ slug }`\n\t\t\t\t\t: newValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasFontFamily = () => !! value?.typography?.fontFamily;\n\tconst resetFontFamily = () => setFontFamily( undefined );\n\n\t// Font Size\n\tconst hasFontSizeEnabled = useHasFontSizeControl( settings );\n\tconst disableCustomFontSizes = ! settings?.typography?.customFontSize;\n\tconst fontSizesPerOrigin = settings?.typography?.fontSizes ?? {};\n\tconst fontSizes =\n\t\tfontSizesPerOrigin?.custom ??\n\t\tfontSizesPerOrigin?.theme ??\n\t\tfontSizesPerOrigin.default;\n\tconst fontSize = decodeValue( inheritedValue?.typography?.fontSize );\n\tconst setFontSize = ( newValue, metadata ) => {\n\t\tconst actualValue = !! metadata?.slug\n\t\t\t? `var:preset|font-size|${ metadata?.slug }`\n\t\t\t: newValue;\n\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'fontSize' ],\n\t\t\t\tactualValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasFontSize = () => !! value?.typography?.fontSize;\n\tconst resetFontSize = () => setFontSize( undefined );\n\n\t// Appearance\n\tconst hasAppearanceControl = useHasAppearanceControl( settings );\n\tconst appearanceControlLabel = useAppearanceControlLabel( settings );\n\tconst hasFontStyles = settings?.typography?.fontStyle;\n\tconst hasFontWeights = settings?.typography?.fontWeight;\n\tconst fontStyle = decodeValue( inheritedValue?.typography?.fontStyle );\n\tconst fontWeight = decodeValue( inheritedValue?.typography?.fontWeight );\n\tconst setFontAppearance = ( {\n\t\tfontStyle: newFontStyle,\n\t\tfontWeight: newFontWeight,\n\t} ) => {\n\t\tonChange( {\n\t\t\t...value,\n\t\t\ttypography: {\n\t\t\t\t...value?.typography,\n\t\t\t\tfontStyle: newFontStyle || undefined,\n\t\t\t\tfontWeight: newFontWeight || undefined,\n\t\t\t},\n\t\t} );\n\t};\n\tconst hasFontAppearance = () =>\n\t\t!! value?.typography?.fontStyle || !! value?.typography?.fontWeight;\n\tconst resetFontAppearance = () => {\n\t\tsetFontAppearance( {} );\n\t};\n\n\t// Line Height\n\tconst hasLineHeightEnabled = useHasLineHeightControl( settings );\n\tconst lineHeight = decodeValue( inheritedValue?.typography?.lineHeight );\n\tconst setLineHeight = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'lineHeight' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasLineHeight = () => value?.typography?.lineHeight !== undefined;\n\tconst resetLineHeight = () => setLineHeight( undefined );\n\n\t// Letter Spacing\n\tconst hasLetterSpacingControl = useHasLetterSpacingControl( settings );\n\tconst letterSpacing = decodeValue(\n\t\tinheritedValue?.typography?.letterSpacing\n\t);\n\tconst setLetterSpacing = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'letterSpacing' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasLetterSpacing = () => !! value?.typography?.letterSpacing;\n\tconst resetLetterSpacing = () => setLetterSpacing( undefined );\n\n\t// Text Columns\n\tconst hasTextColumnsControl = useHasTextColumnsControl( settings );\n\tconst textColumns = decodeValue( inheritedValue?.typography?.textColumns );\n\tconst setTextColumns = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'textColumns' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasTextColumns = () => !! value?.typography?.textColumns;\n\tconst resetTextColumns = () => setTextColumns( undefined );\n\n\t// Text Transform\n\tconst hasTextTransformControl = useHasTextTransformControl( settings );\n\tconst textTransform = decodeValue(\n\t\tinheritedValue?.typography?.textTransform\n\t);\n\tconst setTextTransform = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'textTransform' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasTextTransform = () => !! value?.typography?.textTransform;\n\tconst resetTextTransform = () => setTextTransform( undefined );\n\n\t// Text Decoration\n\tconst hasTextDecorationControl = useHasTextDecorationControl( settings );\n\tconst textDecoration = decodeValue(\n\t\tinheritedValue?.typography?.textDecoration\n\t);\n\tconst setTextDecoration = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'textDecoration' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasTextDecoration = () => !! value?.typography?.textDecoration;\n\tconst resetTextDecoration = () => setTextDecoration( undefined );\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\ttypography: {},\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ hasFontFamilyEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Font family' ) }\n\t\t\t\t\thasValue={ hasFontFamily }\n\t\t\t\t\tonDeselect={ resetFontFamily }\n\t\t\t\t\tisShownByDefault={ defaultControls.fontFamily }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<FontFamilyControl\n\t\t\t\t\t\tfontFamilies={ fontFamilies }\n\t\t\t\t\t\tvalue={ fontFamily }\n\t\t\t\t\t\tonChange={ setFontFamily }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasFontSizeEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Font size' ) }\n\t\t\t\t\thasValue={ hasFontSize }\n\t\t\t\t\tonDeselect={ resetFontSize }\n\t\t\t\t\tisShownByDefault={ defaultControls.fontSize }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<FontSizePicker\n\t\t\t\t\t\tvalue={ fontSize }\n\t\t\t\t\t\tonChange={ setFontSize }\n\t\t\t\t\t\tfontSizes={ fontSizes }\n\t\t\t\t\t\tdisableCustomFontSizes={ disableCustomFontSizes }\n\t\t\t\t\t\twithReset={ false }\n\t\t\t\t\t\twithSlider\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasAppearanceControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ appearanceControlLabel }\n\t\t\t\t\thasValue={ hasFontAppearance }\n\t\t\t\t\tonDeselect={ resetFontAppearance }\n\t\t\t\t\tisShownByDefault={ defaultControls.fontAppearance }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<FontAppearanceControl\n\t\t\t\t\t\tvalue={ {\n\t\t\t\t\t\t\tfontStyle,\n\t\t\t\t\t\t\tfontWeight,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonChange={ setFontAppearance }\n\t\t\t\t\t\thasFontStyles={ hasFontStyles }\n\t\t\t\t\t\thasFontWeights={ hasFontWeights }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasLineHeightEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Line height' ) }\n\t\t\t\t\thasValue={ hasLineHeight }\n\t\t\t\t\tonDeselect={ resetLineHeight }\n\t\t\t\t\tisShownByDefault={ defaultControls.lineHeight }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<LineHeightControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t\t\tvalue={ lineHeight }\n\t\t\t\t\t\tonChange={ setLineHeight }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasLetterSpacingControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Letter spacing' ) }\n\t\t\t\t\thasValue={ hasLetterSpacing }\n\t\t\t\t\tonDeselect={ resetLetterSpacing }\n\t\t\t\t\tisShownByDefault={ defaultControls.letterSpacing }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<LetterSpacingControl\n\t\t\t\t\t\tvalue={ letterSpacing }\n\t\t\t\t\t\tonChange={ setLetterSpacing }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasTextColumnsControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Text columns' ) }\n\t\t\t\t\thasValue={ hasTextColumns }\n\t\t\t\t\tonDeselect={ resetTextColumns }\n\t\t\t\t\tisShownByDefault={ defaultControls.textColumns }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<NumberControl\n\t\t\t\t\t\tlabel={ __( 'Text columns' ) }\n\t\t\t\t\t\tmax={ MAX_TEXT_COLUMNS }\n\t\t\t\t\t\tmin={ MIN_TEXT_COLUMNS }\n\t\t\t\t\t\tonChange={ setTextColumns }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\tspinControls=\"custom\"\n\t\t\t\t\t\tvalue={ textColumns }\n\t\t\t\t\t\tinitialPosition={ 1 }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasTextDecorationControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Text decoration' ) }\n\t\t\t\t\thasValue={ hasTextDecoration }\n\t\t\t\t\tonDeselect={ resetTextDecoration }\n\t\t\t\t\tisShownByDefault={ defaultControls.textDecoration }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<TextDecorationControl\n\t\t\t\t\t\tvalue={ textDecoration }\n\t\t\t\t\t\tonChange={ setTextDecoration }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasTextTransformControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Letter case' ) }\n\t\t\t\t\thasValue={ hasTextTransform }\n\t\t\t\t\tonDeselect={ resetTextTransform }\n\t\t\t\t\tisShownByDefault={ defaultControls.textTransform }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<TextTransformControl\n\t\t\t\t\t\tvalue={ textTransform }\n\t\t\t\t\t\tonChange={ setTextTransform }\n\t\t\t\t\t\tshowNone\n\t\t\t\t\t\tisBlock\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { hasBlockSupport } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport LineHeightControl from '../components/line-height-control';\nimport { cleanEmptyObject } from './utils';\nimport useSetting from '../components/use-setting';\n\nexport const LINE_HEIGHT_SUPPORT_KEY = 'typography.lineHeight';\n\n/**\n * Inspector control panel containing the line height related configuration\n *\n * @param {Object} props\n *\n * @return {WPElement} Line height edit element.\n */\nexport function LineHeightEdit( props ) {\n\tconst {\n\t\tattributes: { style },\n\t\tsetAttributes,\n\t} = props;\n\n\tconst onChange = ( newLineHeightValue ) => {\n\t\tconst newStyle = {\n\t\t\t...style,\n\t\t\ttypography: {\n\t\t\t\t...style?.typography,\n\t\t\t\tlineHeight: newLineHeightValue,\n\t\t\t},\n\t\t};\n\n\t\tsetAttributes( { style: cleanEmptyObject( newStyle ) } );\n\t};\n\treturn (\n\t\t<LineHeightControl\n\t\t\t__unstableInputWidth=\"100%\"\n\t\t\t__nextHasNoMarginBottom={ true }\n\t\t\tvalue={ style?.typography?.lineHeight }\n\t\t\tonChange={ onChange }\n\t\t\tsize=\"__unstable-large\"\n\t\t/>\n\t);\n}\n\n/**\n * Custom hook that checks if line-height settings have been disabled.\n *\n * @param {string} name The name of the block.\n * @return {boolean} Whether setting is disabled.\n */\nexport function useIsLineHeightDisabled( { name: blockName } = {} ) {\n\tconst isDisabled = ! useSetting( 'typography.lineHeight' );\n\n\treturn (\n\t\t! hasBlockSupport( blockName, LINE_HEIGHT_SUPPORT_KEY ) || isDisabled\n\t);\n}\n","/**\n * External dependencies\n */\nimport { kebabCase } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport TokenList from '@wordpress/token-list';\n\n/**\n * Internal dependencies\n */\nimport { shouldSkipSerialization } from './utils';\nimport { TYPOGRAPHY_SUPPORT_KEY } from './typography';\n\nexport const FONT_FAMILY_SUPPORT_KEY = 'typography.__experimentalFontFamily';\n\n/**\n * Filters registered block settings, extending attributes to include\n * the `fontFamily` attribute.\n *\n * @param {Object} settings Original block settings\n * @return {Object}         Filtered block settings\n */\nfunction addAttributes( settings ) {\n\tif ( ! hasBlockSupport( settings, FONT_FAMILY_SUPPORT_KEY ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify a default value if needed.\n\tif ( ! settings.attributes.fontFamily ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tfontFamily: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override props assigned to save component to inject font family.\n *\n * @param {Object} props      Additional props applied to save element\n * @param {Object} blockType  Block type\n * @param {Object} attributes Block attributes\n * @return {Object}           Filtered props applied to save element\n */\nfunction addSaveProps( props, blockType, attributes ) {\n\tif ( ! hasBlockSupport( blockType, FONT_FAMILY_SUPPORT_KEY ) ) {\n\t\treturn props;\n\t}\n\n\tif (\n\t\tshouldSkipSerialization(\n\t\t\tblockType,\n\t\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t\t\t'fontFamily'\n\t\t)\n\t) {\n\t\treturn props;\n\t}\n\n\tif ( ! attributes?.fontFamily ) {\n\t\treturn props;\n\t}\n\n\t// Use TokenList to dedupe classes.\n\tconst classes = new TokenList( props.className );\n\tclasses.add( `has-${ kebabCase( attributes?.fontFamily ) }-font-family` );\n\tconst newClassName = classes.value;\n\tprops.className = newClassName ? newClassName : undefined;\n\n\treturn props;\n}\n\n/**\n * Filters registered block settings to expand the block edit wrapper\n * by applying the desired styles and classnames.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addEditProps( settings ) {\n\tif ( ! hasBlockSupport( settings, FONT_FAMILY_SUPPORT_KEY ) ) {\n\t\treturn settings;\n\t}\n\n\tconst existingGetEditWrapperProps = settings.getEditWrapperProps;\n\tsettings.getEditWrapperProps = ( attributes ) => {\n\t\tlet props = {};\n\t\tif ( existingGetEditWrapperProps ) {\n\t\t\tprops = existingGetEditWrapperProps( attributes );\n\t\t}\n\t\treturn addSaveProps( props, settings, attributes );\n\t};\n\n\treturn settings;\n}\n\n/**\n * Resets the font family block support attribute. This can be used when\n * disabling the font family support controls for a block via a progressive\n * discovery panel.\n *\n * @param {Object} props               Block props.\n * @param {Object} props.setAttributes Function to set block's attributes.\n */\nexport function resetFontFamily( { setAttributes } ) {\n\tsetAttributes( { fontFamily: undefined } );\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/fontFamily/addAttribute',\n\taddAttributes\n);\n\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/fontFamily/addSaveProps',\n\taddSaveProps\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/fontFamily/addEditProps',\n\taddEditProps\n);\n","/**\n * External dependencies\n */\nimport { kebabCase } from 'lodash';\n\n/**\n *  Returns the font size object based on an array of named font sizes and the namedFontSize and customFontSize values.\n * \tIf namedFontSize is undefined or not found in fontSizes an object with just the size value based on customFontSize is returned.\n *\n * @param {Array}   fontSizes               Array of font size objects containing at least the \"name\" and \"size\" values as properties.\n * @param {?string} fontSizeAttribute       Content of the font size attribute (slug).\n * @param {?number} customFontSizeAttribute Contents of the custom font size attribute (value).\n *\n * @return {?Object} If fontSizeAttribute is set and an equal slug is found in fontSizes it returns the font size object for that slug.\n * \t\t\t\t\t Otherwise, an object with just the size value based on customFontSize is returned.\n */\nexport const getFontSize = (\n\tfontSizes,\n\tfontSizeAttribute,\n\tcustomFontSizeAttribute\n) => {\n\tif ( fontSizeAttribute ) {\n\t\tconst fontSizeObject = fontSizes?.find(\n\t\t\t( { slug } ) => slug === fontSizeAttribute\n\t\t);\n\t\tif ( fontSizeObject ) {\n\t\t\treturn fontSizeObject;\n\t\t}\n\t}\n\treturn {\n\t\tsize: customFontSizeAttribute,\n\t};\n};\n\n/**\n * Returns the corresponding font size object for a given value.\n *\n * @param {Array}  fontSizes Array of font size objects.\n * @param {number} value     Font size value.\n *\n * @return {Object} Font size object.\n */\nexport function getFontSizeObjectByValue( fontSizes, value ) {\n\tconst fontSizeObject = fontSizes?.find( ( { size } ) => size === value );\n\tif ( fontSizeObject ) {\n\t\treturn fontSizeObject;\n\t}\n\n\treturn {\n\t\tsize: value,\n\t};\n}\n\n/**\n * Returns a class based on fontSizeName.\n *\n * @param {string} fontSizeSlug Slug of the fontSize.\n *\n * @return {string | undefined} String with the class corresponding to the fontSize passed.\n *                  The class is generated by appending 'has-' followed by fontSizeSlug in kebabCase and ending with '-font-size'.\n */\nexport function getFontSizeClass( fontSizeSlug ) {\n\tif ( ! fontSizeSlug ) {\n\t\treturn;\n\t}\n\n\treturn `has-${ kebabCase( fontSizeSlug ) }-font-size`;\n}\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport TokenList from '@wordpress/token-list';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { select } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetFontSize,\n\tgetFontSizeClass,\n\tgetFontSizeObjectByValue,\n\tFontSizePicker,\n\tgetComputedFluidTypographyValue,\n} from '../components/font-sizes';\nimport { TYPOGRAPHY_SUPPORT_KEY } from './typography';\nimport {\n\tcleanEmptyObject,\n\ttransformStyles,\n\tshouldSkipSerialization,\n} from './utils';\nimport useSetting from '../components/use-setting';\nimport { store as blockEditorStore } from '../store';\n\nexport const FONT_SIZE_SUPPORT_KEY = 'typography.fontSize';\n\n/**\n * Filters registered block settings, extending attributes to include\n * `fontSize` and `fontWeight` attributes.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addAttributes( settings ) {\n\tif ( ! hasBlockSupport( settings, FONT_SIZE_SUPPORT_KEY ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify a default value if needed.\n\tif ( ! settings.attributes.fontSize ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tfontSize: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override props assigned to save component to inject font size.\n *\n * @param {Object} props      Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nfunction addSaveProps( props, blockType, attributes ) {\n\tif ( ! hasBlockSupport( blockType, FONT_SIZE_SUPPORT_KEY ) ) {\n\t\treturn props;\n\t}\n\n\tif (\n\t\tshouldSkipSerialization( blockType, TYPOGRAPHY_SUPPORT_KEY, 'fontSize' )\n\t) {\n\t\treturn props;\n\t}\n\n\t// Use TokenList to dedupe classes.\n\tconst classes = new TokenList( props.className );\n\tclasses.add( getFontSizeClass( attributes.fontSize ) );\n\tconst newClassName = classes.value;\n\tprops.className = newClassName ? newClassName : undefined;\n\n\treturn props;\n}\n\n/**\n * Filters registered block settings to expand the block edit wrapper\n * by applying the desired styles and classnames.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addEditProps( settings ) {\n\tif ( ! hasBlockSupport( settings, FONT_SIZE_SUPPORT_KEY ) ) {\n\t\treturn settings;\n\t}\n\n\tconst existingGetEditWrapperProps = settings.getEditWrapperProps;\n\tsettings.getEditWrapperProps = ( attributes ) => {\n\t\tlet props = {};\n\t\tif ( existingGetEditWrapperProps ) {\n\t\t\tprops = existingGetEditWrapperProps( attributes );\n\t\t}\n\t\treturn addSaveProps( props, settings, attributes );\n\t};\n\n\treturn settings;\n}\n\n/**\n * Inspector control panel containing the font size related configuration\n *\n * @param {Object} props\n *\n * @return {WPElement} Font size edit element.\n */\nexport function FontSizeEdit( props ) {\n\tconst {\n\t\tattributes: { fontSize, style },\n\t\tsetAttributes,\n\t} = props;\n\tconst fontSizes = useSetting( 'typography.fontSizes' );\n\n\tconst onChange = ( value ) => {\n\t\tconst fontSizeSlug = getFontSizeObjectByValue( fontSizes, value ).slug;\n\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( {\n\t\t\t\t...style,\n\t\t\t\ttypography: {\n\t\t\t\t\t...style?.typography,\n\t\t\t\t\tfontSize: fontSizeSlug ? undefined : value,\n\t\t\t\t},\n\t\t\t} ),\n\t\t\tfontSize: fontSizeSlug,\n\t\t} );\n\t};\n\n\tconst fontSizeObject = getFontSize(\n\t\tfontSizes,\n\t\tfontSize,\n\t\tstyle?.typography?.fontSize\n\t);\n\n\tconst fontSizeValue =\n\t\tfontSizeObject?.size || style?.typography?.fontSize || fontSize;\n\n\treturn (\n\t\t<FontSizePicker\n\t\t\tonChange={ onChange }\n\t\t\tvalue={ fontSizeValue }\n\t\t\twithReset={ false }\n\t\t\twithSlider\n\t\t\tsize=\"__unstable-large\"\n\t\t\t__nextHasNoMarginBottom\n\t\t/>\n\t);\n}\n\n/**\n * Custom hook that checks if font-size settings have been disabled.\n *\n * @param {string} name The name of the block.\n * @return {boolean} Whether setting is disabled.\n */\nexport function useIsFontSizeDisabled( { name: blockName } = {} ) {\n\tconst fontSizes = useSetting( 'typography.fontSizes' );\n\tconst hasFontSizes = !! fontSizes?.length;\n\n\treturn (\n\t\t! hasBlockSupport( blockName, FONT_SIZE_SUPPORT_KEY ) || ! hasFontSizes\n\t);\n}\n\n/**\n * Add inline styles for font sizes.\n * Ideally, this is not needed and themes load the font-size classes on the\n * editor.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nconst withFontSizeInlineStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst fontSizes = useSetting( 'typography.fontSizes' );\n\t\tconst {\n\t\t\tname: blockName,\n\t\t\tattributes: { fontSize, style },\n\t\t\twrapperProps,\n\t\t} = props;\n\n\t\t// Only add inline styles if the block supports font sizes,\n\t\t// doesn't skip serialization of font sizes,\n\t\t// doesn't already have an inline font size,\n\t\t// and does have a class to extract the font size from.\n\t\tif (\n\t\t\t! hasBlockSupport( blockName, FONT_SIZE_SUPPORT_KEY ) ||\n\t\t\tshouldSkipSerialization(\n\t\t\t\tblockName,\n\t\t\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t\t\t\t'fontSize'\n\t\t\t) ||\n\t\t\t! fontSize ||\n\t\t\tstyle?.typography?.fontSize\n\t\t) {\n\t\t\treturn <BlockListBlock { ...props } />;\n\t\t}\n\n\t\tconst fontSizeValue = getFontSize(\n\t\t\tfontSizes,\n\t\t\tfontSize,\n\t\t\tstyle?.typography?.fontSize\n\t\t).size;\n\n\t\tconst newProps = {\n\t\t\t...props,\n\t\t\twrapperProps: {\n\t\t\t\t...wrapperProps,\n\t\t\t\tstyle: {\n\t\t\t\t\tfontSize: fontSizeValue,\n\t\t\t\t\t...wrapperProps?.style,\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn <BlockListBlock { ...newProps } />;\n\t},\n\t'withFontSizeInlineStyles'\n);\n\nconst MIGRATION_PATHS = {\n\tfontSize: [ [ 'fontSize' ], [ 'style', 'typography', 'fontSize' ] ],\n};\n\nfunction addTransforms( result, source, index, results ) {\n\tconst destinationBlockType = result.name;\n\tconst activeSupports = {\n\t\tfontSize: hasBlockSupport(\n\t\t\tdestinationBlockType,\n\t\t\tFONT_SIZE_SUPPORT_KEY\n\t\t),\n\t};\n\treturn transformStyles(\n\t\tactiveSupports,\n\t\tMIGRATION_PATHS,\n\t\tresult,\n\t\tsource,\n\t\tindex,\n\t\tresults\n\t);\n}\n\n/**\n * Allow custom font sizes to appear fluid when fluid typography is enabled at\n * the theme level.\n *\n * Adds a custom getEditWrapperProps() callback to all block types that support\n * font sizes. Then, if fluid typography is enabled, this callback will swap any\n * custom font size in style.fontSize with a fluid font size (i.e. one that uses\n * clamp()).\n *\n * It's important that this hook runs after 'core/style/addEditProps' sets\n * style.fontSize as otherwise fontSize will be overwritten.\n *\n * @param {Object} blockType Block settings object.\n */\nfunction addEditPropsForFluidCustomFontSizes( blockType ) {\n\tif (\n\t\t! hasBlockSupport( blockType, FONT_SIZE_SUPPORT_KEY ) ||\n\t\tshouldSkipSerialization( blockType, TYPOGRAPHY_SUPPORT_KEY, 'fontSize' )\n\t) {\n\t\treturn blockType;\n\t}\n\n\tconst existingGetEditWrapperProps = blockType.getEditWrapperProps;\n\n\tblockType.getEditWrapperProps = ( attributes ) => {\n\t\tconst wrapperProps = existingGetEditWrapperProps\n\t\t\t? existingGetEditWrapperProps( attributes )\n\t\t\t: {};\n\n\t\tconst fontSize = wrapperProps?.style?.fontSize;\n\n\t\t// TODO: This sucks! We should be using useSetting( 'typography.fluid' )\n\t\t// or even useSelect( blockEditorStore ). We can't do either here\n\t\t// because getEditWrapperProps is a plain JavaScript function called by\n\t\t// BlockListBlock and not a React component rendered within\n\t\t// BlockListContext.Provider. If we set fontSize using editor.\n\t\t// BlockListBlock instead of using getEditWrapperProps then the value is\n\t\t// clobbered when the core/style/addEditProps filter runs.\n\t\tconst fluidTypographyConfig =\n\t\t\tselect( blockEditorStore ).getSettings().__experimentalFeatures\n\t\t\t\t?.typography?.fluid;\n\n\t\tconst fluidTypographySettings =\n\t\t\ttypeof fluidTypographyConfig === 'object'\n\t\t\t\t? fluidTypographyConfig\n\t\t\t\t: {};\n\n\t\tconst newFontSize =\n\t\t\tfontSize && !! fluidTypographyConfig\n\t\t\t\t? getComputedFluidTypographyValue( {\n\t\t\t\t\t\tfontSize,\n\t\t\t\t\t\tminimumFontSizeLimit:\n\t\t\t\t\t\t\tfluidTypographySettings?.minFontSize,\n\t\t\t\t  } )\n\t\t\t\t: null;\n\n\t\tif ( newFontSize === null ) {\n\t\t\treturn wrapperProps;\n\t\t}\n\n\t\treturn {\n\t\t\t...wrapperProps,\n\t\t\tstyle: {\n\t\t\t\t...wrapperProps?.style,\n\t\t\t\tfontSize: newFontSize,\n\t\t\t},\n\t\t};\n\t};\n\n\treturn blockType;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/font/addAttribute',\n\taddAttributes\n);\n\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/font/addSaveProps',\n\taddSaveProps\n);\n\naddFilter( 'blocks.registerBlockType', 'core/font/addEditProps', addEditProps );\n\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/font-size/with-font-size-inline-styles',\n\twithFontSizeInlineStyles\n);\n\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/font-size/addTransforms',\n\taddTransforms\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/font-size/addEditPropsForFluidCustomFontSizes',\n\taddEditPropsForFluidCustomFontSizes,\n\t// Run after 'core/style/addEditProps' so that the style object has already\n\t// been translated into inline CSS.\n\t11\n);\n","/**\n * WordPress dependencies\n */\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { useMemo, useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport InspectorControls from '../components/inspector-controls';\nimport {\n\tdefault as StylesTypographyPanel,\n\tuseHasTypographyPanel,\n} from '../components/global-styles/typography-panel';\n\nimport { LINE_HEIGHT_SUPPORT_KEY } from './line-height';\nimport { FONT_FAMILY_SUPPORT_KEY } from './font-family';\nimport { FONT_SIZE_SUPPORT_KEY } from './font-size';\nimport { cleanEmptyObject, useBlockSettings } from './utils';\n\nfunction omit( object, keys ) {\n\treturn Object.fromEntries(\n\t\tObject.entries( object ).filter( ( [ key ] ) => ! keys.includes( key ) )\n\t);\n}\n\nconst LETTER_SPACING_SUPPORT_KEY = 'typography.__experimentalLetterSpacing';\nconst TEXT_TRANSFORM_SUPPORT_KEY = 'typography.__experimentalTextTransform';\nconst TEXT_DECORATION_SUPPORT_KEY = 'typography.__experimentalTextDecoration';\nconst TEXT_COLUMNS_SUPPORT_KEY = 'typography.textColumns';\nconst FONT_STYLE_SUPPORT_KEY = 'typography.__experimentalFontStyle';\nconst FONT_WEIGHT_SUPPORT_KEY = 'typography.__experimentalFontWeight';\nexport const TYPOGRAPHY_SUPPORT_KEY = 'typography';\nexport const TYPOGRAPHY_SUPPORT_KEYS = [\n\tLINE_HEIGHT_SUPPORT_KEY,\n\tFONT_SIZE_SUPPORT_KEY,\n\tFONT_STYLE_SUPPORT_KEY,\n\tFONT_WEIGHT_SUPPORT_KEY,\n\tFONT_FAMILY_SUPPORT_KEY,\n\tTEXT_COLUMNS_SUPPORT_KEY,\n\tTEXT_DECORATION_SUPPORT_KEY,\n\tTEXT_TRANSFORM_SUPPORT_KEY,\n\tLETTER_SPACING_SUPPORT_KEY,\n];\n\nfunction styleToAttributes( style ) {\n\tconst updatedStyle = { ...omit( style, [ 'fontFamily' ] ) };\n\tconst fontSizeValue = style?.typography?.fontSize;\n\tconst fontFamilyValue = style?.typography?.fontFamily;\n\tconst fontSizeSlug = fontSizeValue?.startsWith( 'var:preset|font-size|' )\n\t\t? fontSizeValue.substring( 'var:preset|font-size|'.length )\n\t\t: undefined;\n\tconst fontFamilySlug = fontFamilyValue?.startsWith(\n\t\t'var:preset|font-family|'\n\t)\n\t\t? fontFamilyValue.substring( 'var:preset|font-family|'.length )\n\t\t: undefined;\n\tupdatedStyle.typography = {\n\t\t...omit( updatedStyle.typography, [ 'fontFamily' ] ),\n\t\tfontSize: fontSizeSlug ? undefined : fontSizeValue,\n\t};\n\treturn {\n\t\tstyle: cleanEmptyObject( updatedStyle ),\n\t\tfontFamily: fontFamilySlug,\n\t\tfontSize: fontSizeSlug,\n\t};\n}\n\nfunction attributesToStyle( attributes ) {\n\treturn {\n\t\t...attributes.style,\n\t\ttypography: {\n\t\t\t...attributes.style?.typography,\n\t\t\tfontFamily: attributes.fontFamily\n\t\t\t\t? 'var:preset|font-family|' + attributes.fontFamily\n\t\t\t\t: undefined,\n\t\t\tfontSize: attributes.fontSize\n\t\t\t\t? 'var:preset|font-size|' + attributes.fontSize\n\t\t\t\t: attributes.style?.typography?.fontSize,\n\t\t},\n\t};\n}\n\nfunction TypographyInspectorControl( { children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributesToStyle( attributes );\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\t...styleToAttributes( updatedStyle ),\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"typography\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function TypographyPanel( {\n\tclientId,\n\tname,\n\tattributes,\n\tsetAttributes,\n\t__unstableParentLayout,\n} ) {\n\tconst settings = useBlockSettings( name, __unstableParentLayout );\n\tconst isEnabled = useHasTypographyPanel( settings );\n\tconst value = useMemo( () => {\n\t\treturn attributesToStyle( {\n\t\t\tstyle: attributes.style,\n\t\t\tfontFamily: attributes.fontFamily,\n\t\t\tfontSize: attributes.fontSize,\n\t\t} );\n\t}, [ attributes.style, attributes.fontSize, attributes.fontFamily ] );\n\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( styleToAttributes( newStyle ) );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultControls = getBlockSupport( name, [\n\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\n\treturn (\n\t\t<StylesTypographyPanel\n\t\t\tas={ TypographyInspectorControl }\n\t\t\tpanelId={ clientId }\n\t\t\tsettings={ settings }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tdefaultControls={ defaultControls }\n\t\t/>\n\t);\n}\n\nexport const hasTypographySupport = ( blockName ) => {\n\treturn TYPOGRAPHY_SUPPORT_KEYS.some( ( key ) =>\n\t\thasBlockSupport( blockName, key )\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst settings = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M14.5 13.8c-1.1 0-2.1.7-2.4 1.8H4V17h8.1c.3 1 1.3 1.8 2.4 1.8s2.1-.7 2.4-1.8H20v-1.5h-3.1c-.3-1-1.3-1.7-2.4-1.7zM11.9 7c-.3-1-1.3-1.8-2.4-1.8S7.4 6 7.1 7H4v1.5h3.1c.3 1 1.3 1.8 2.4 1.8s2.1-.7 2.4-1.8H20V7h-8.1z\" />\n\t</SVG>\n);\n\nexport default settings;\n","/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tCustomSelectControl,\n\tIcon,\n\tRangeControl,\n\t__experimentalHStack as HStack,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { useState, useMemo } from '@wordpress/element';\nimport { usePrevious } from '@wordpress/compose';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { settings } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport useSetting from '../../use-setting';\nimport { store as blockEditorStore } from '../../../store';\nimport {\n\tALL_SIDES,\n\tLABELS,\n\tgetSliderValueFromPreset,\n\tgetCustomValueFromPreset,\n\tgetPresetValueFromCustomValue,\n\tisValueSpacingPreset,\n} from '../utils';\n\nconst CUSTOM_VALUE_SETTINGS = {\n\tpx: { max: 300, steps: 1 },\n\t'%': { max: 100, steps: 1 },\n\tvw: { max: 100, steps: 1 },\n\tvh: { max: 100, steps: 1 },\n\tem: { max: 10, steps: 0.1 },\n\trm: { max: 10, steps: 0.1 },\n};\n\nexport default function SpacingInputControl( {\n\ticon,\n\tisMixed = false,\n\tminimumCustomValue,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tshowSideInLabel = true,\n\tside,\n\tspacingSizes,\n\ttype,\n\tvalue,\n} ) {\n\t// Treat value as a preset value if the passed in value matches the value of one of the spacingSizes.\n\tvalue = getPresetValueFromCustomValue( value, spacingSizes );\n\n\tlet selectListSizes = spacingSizes;\n\tconst showRangeControl = spacingSizes.length <= 8;\n\n\tconst disableCustomSpacingSizes = useSelect( ( select ) => {\n\t\tconst editorSettings = select( blockEditorStore ).getSettings();\n\t\treturn editorSettings?.disableCustomSpacingSizes;\n\t} );\n\n\tconst [ showCustomValueControl, setShowCustomValueControl ] = useState(\n\t\t! disableCustomSpacingSizes &&\n\t\t\tvalue !== undefined &&\n\t\t\t! isValueSpacingPreset( value )\n\t);\n\n\tconst previousValue = usePrevious( value );\n\tif (\n\t\t!! value &&\n\t\tpreviousValue !== value &&\n\t\t! isValueSpacingPreset( value ) &&\n\t\tshowCustomValueControl !== true\n\t) {\n\t\tsetShowCustomValueControl( true );\n\t}\n\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: useSetting( 'spacing.units' ) || [ 'px', 'em', 'rem' ],\n\t} );\n\n\tlet currentValue = null;\n\n\tconst showCustomValueInSelectList =\n\t\t! showRangeControl &&\n\t\t! showCustomValueControl &&\n\t\tvalue !== undefined &&\n\t\t( ! isValueSpacingPreset( value ) ||\n\t\t\t( isValueSpacingPreset( value ) && isMixed ) );\n\n\tif ( showCustomValueInSelectList ) {\n\t\tselectListSizes = [\n\t\t\t...spacingSizes,\n\t\t\t{\n\t\t\t\tname: ! isMixed\n\t\t\t\t\t? // translators: A custom measurement, eg. a number followed by a unit like 12px.\n\t\t\t\t\t  sprintf( __( 'Custom (%s)' ), value )\n\t\t\t\t\t: __( 'Mixed' ),\n\t\t\t\tslug: 'custom',\n\t\t\t\tsize: value,\n\t\t\t},\n\t\t];\n\t\tcurrentValue = selectListSizes.length - 1;\n\t} else if ( ! isMixed ) {\n\t\tcurrentValue = ! showCustomValueControl\n\t\t\t? getSliderValueFromPreset( value, spacingSizes )\n\t\t\t: getCustomValueFromPreset( value, spacingSizes );\n\t}\n\n\tconst selectedUnit =\n\t\tuseMemo(\n\t\t\t() => parseQuantityAndUnitFromRawValue( currentValue ),\n\t\t\t[ currentValue ]\n\t\t)[ 1 ] || units[ 0 ].value;\n\n\tconst setInitialValue = () => {\n\t\tif ( value === undefined ) {\n\t\t\tonChange( '0' );\n\t\t}\n\t};\n\n\tconst customTooltipContent = ( newValue ) =>\n\t\tvalue === undefined ? undefined : spacingSizes[ newValue ]?.name;\n\n\tconst customRangeValue = parseFloat( currentValue, 10 );\n\n\tconst getNewCustomValue = ( newSize ) => {\n\t\tconst isNumeric = ! isNaN( parseFloat( newSize ) );\n\t\tconst nextValue = isNumeric ? newSize : undefined;\n\t\treturn nextValue;\n\t};\n\n\tconst getNewPresetValue = ( newSize, controlType ) => {\n\t\tconst size = parseInt( newSize, 10 );\n\n\t\tif ( controlType === 'selectList' ) {\n\t\t\tif ( size === 0 ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tif ( size === 1 ) {\n\t\t\t\treturn '0';\n\t\t\t}\n\t\t} else if ( size === 0 ) {\n\t\t\treturn '0';\n\t\t}\n\t\treturn `var:preset|spacing|${ spacingSizes[ newSize ]?.slug }`;\n\t};\n\n\tconst handleCustomValueSliderChange = ( next ) => {\n\t\tonChange( [ next, selectedUnit ].join( '' ) );\n\t};\n\n\tconst allPlaceholder = isMixed ? __( 'Mixed' ) : null;\n\n\tconst options = selectListSizes.map( ( size, index ) => ( {\n\t\tkey: index,\n\t\tname: size.name,\n\t} ) );\n\n\tconst marks = spacingSizes.map( ( _newValue, index ) => ( {\n\t\tvalue: index,\n\t\tlabel: undefined,\n\t} ) );\n\n\tconst sideLabel =\n\t\tALL_SIDES.includes( side ) && showSideInLabel ? LABELS[ side ] : '';\n\tconst typeLabel = showSideInLabel ? type?.toLowerCase() : type;\n\n\tconst ariaLabel = sprintf(\n\t\t// translators: 1: The side of the block being modified (top, bottom, left, All sides etc.). 2. Type of spacing being modified (Padding, margin, etc)\n\t\t__( '%1$s %2$s' ),\n\t\tsideLabel,\n\t\ttypeLabel\n\t).trim();\n\n\treturn (\n\t\t<HStack className=\"spacing-sizes-control__wrapper\">\n\t\t\t{ icon && (\n\t\t\t\t<Icon\n\t\t\t\t\tclassName=\"spacing-sizes-control__icon\"\n\t\t\t\t\ticon={ icon }\n\t\t\t\t\tsize={ 24 }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ showCustomValueControl && (\n\t\t\t\t<>\n\t\t\t\t\t<UnitControl\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t\t\tonChange={ ( newSize ) =>\n\t\t\t\t\t\t\tonChange( getNewCustomValue( newSize ) )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue={ currentValue }\n\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\tmin={ minimumCustomValue }\n\t\t\t\t\t\tplaceholder={ allPlaceholder }\n\t\t\t\t\t\tdisableUnits={ isMixed }\n\t\t\t\t\t\tlabel={ ariaLabel }\n\t\t\t\t\t\thideLabelFromVision={ true }\n\t\t\t\t\t\tclassName=\"spacing-sizes-control__custom-value-input\"\n\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t/>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t\t\tvalue={ customRangeValue }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tmax={ CUSTOM_VALUE_SETTINGS[ selectedUnit ]?.max ?? 10 }\n\t\t\t\t\t\tstep={\n\t\t\t\t\t\t\tCUSTOM_VALUE_SETTINGS[ selectedUnit ]?.steps ?? 0.1\n\t\t\t\t\t\t}\n\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t\tonChange={ handleCustomValueSliderChange }\n\t\t\t\t\t\tclassName=\"spacing-sizes-control__custom-value-range\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t{ showRangeControl && ! showCustomValueControl && (\n\t\t\t\t<RangeControl\n\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\tclassName=\"spacing-sizes-control__range-control\"\n\t\t\t\t\tvalue={ currentValue }\n\t\t\t\t\tonChange={ ( newSize ) =>\n\t\t\t\t\t\tonChange( getNewPresetValue( newSize ) )\n\t\t\t\t\t}\n\t\t\t\t\tonMouseDown={ ( event ) => {\n\t\t\t\t\t\t// If mouse down is near start of range set initial value to 0, which\n\t\t\t\t\t\t// prevents the user have to drag right then left to get 0 setting.\n\t\t\t\t\t\tif ( event?.nativeEvent?.offsetX < 35 ) {\n\t\t\t\t\t\t\tsetInitialValue();\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\twithInputField={ false }\n\t\t\t\t\taria-valuenow={ currentValue }\n\t\t\t\t\taria-valuetext={ spacingSizes[ currentValue ]?.name }\n\t\t\t\t\trenderTooltipContent={ customTooltipContent }\n\t\t\t\t\tmin={ 0 }\n\t\t\t\t\tmax={ spacingSizes.length - 1 }\n\t\t\t\t\tmarks={ marks }\n\t\t\t\t\tlabel={ ariaLabel }\n\t\t\t\t\thideLabelFromVision={ true }\n\t\t\t\t\t__nextHasNoMarginBottom={ true }\n\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ ! showRangeControl && ! showCustomValueControl && (\n\t\t\t\t<CustomSelectControl\n\t\t\t\t\tclassName=\"spacing-sizes-control__custom-select-control\"\n\t\t\t\t\tvalue={\n\t\t\t\t\t\toptions.find(\n\t\t\t\t\t\t\t( option ) => option.key === currentValue\n\t\t\t\t\t\t) || '' // passing undefined here causes a downshift controlled/uncontrolled warning\n\t\t\t\t\t}\n\t\t\t\t\tonChange={ ( selection ) => {\n\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\tgetNewPresetValue(\n\t\t\t\t\t\t\t\tselection.selectedItem.key,\n\t\t\t\t\t\t\t\t'selectList'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\toptions={ options }\n\t\t\t\t\tlabel={ ariaLabel }\n\t\t\t\t\thideLabelFromVision={ true }\n\t\t\t\t\t__nextUnconstrainedWidth={ true }\n\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ ! disableCustomSpacingSizes && (\n\t\t\t\t<Button\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tshowCustomValueControl\n\t\t\t\t\t\t\t? __( 'Use size preset' )\n\t\t\t\t\t\t\t: __( 'Set custom size' )\n\t\t\t\t\t}\n\t\t\t\t\ticon={ settings }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tsetShowCustomValueControl( ! showCustomValueControl );\n\t\t\t\t\t} }\n\t\t\t\t\tisPressed={ showCustomValueControl }\n\t\t\t\t\tisSmall\n\t\t\t\t\tclassName=\"spacing-sizes-control__custom-toggle\"\n\t\t\t\t\ticonSize={ 24 }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</HStack>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport SpacingInputControl from './spacing-input-control';\nimport { LABELS, ICONS, hasAxisSupport } from '../utils';\n\nconst groupedSides = [ 'vertical', 'horizontal' ];\n\nexport default function AxialInputControls( {\n\tminimumCustomValue,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tsides,\n\tspacingSizes,\n\ttype,\n\tvalues,\n} ) {\n\tconst createHandleOnChange = ( side ) => ( next ) => {\n\t\tif ( ! onChange ) {\n\t\t\treturn;\n\t\t}\n\t\tconst nextValues = { ...values };\n\n\t\tif ( side === 'vertical' ) {\n\t\t\tnextValues.top = next;\n\t\t\tnextValues.bottom = next;\n\t\t}\n\n\t\tif ( side === 'horizontal' ) {\n\t\t\tnextValues.left = next;\n\t\t\tnextValues.right = next;\n\t\t}\n\n\t\tonChange( nextValues );\n\t};\n\n\t// Filter sides if custom configuration provided, maintaining default order.\n\tconst filteredSides = sides?.length\n\t\t? groupedSides.filter( ( side ) => hasAxisSupport( sides, side ) )\n\t\t: groupedSides;\n\n\treturn (\n\t\t<>\n\t\t\t{ filteredSides.map( ( side ) => {\n\t\t\t\tconst axisValue =\n\t\t\t\t\tside === 'vertical' ? values.top : values.left;\n\t\t\t\treturn (\n\t\t\t\t\t<SpacingInputControl\n\t\t\t\t\t\tkey={ `spacing-sizes-control-${ side }` }\n\t\t\t\t\t\ticon={ ICONS[ side ] }\n\t\t\t\t\t\tlabel={ LABELS[ side ] }\n\t\t\t\t\t\tminimumCustomValue={ minimumCustomValue }\n\t\t\t\t\t\tonChange={ createHandleOnChange( side ) }\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\t\tside={ side }\n\t\t\t\t\t\tspacingSizes={ spacingSizes }\n\t\t\t\t\t\ttype={ type }\n\t\t\t\t\t\tvalue={ axisValue }\n\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport SpacingInputControl from './spacing-input-control';\nimport { ALL_SIDES, LABELS, ICONS } from '../utils';\n\nexport default function SeparatedInputControls( {\n\tminimumCustomValue,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tsides,\n\tspacingSizes,\n\ttype,\n\tvalues,\n} ) {\n\t// Filter sides if custom configuration provided, maintaining default order.\n\tconst filteredSides = sides?.length\n\t\t? ALL_SIDES.filter( ( side ) => sides.includes( side ) )\n\t\t: ALL_SIDES;\n\n\tconst createHandleOnChange = ( side ) => ( next ) => {\n\t\tconst nextValues = { ...values };\n\t\tnextValues[ side ] = next;\n\n\t\tonChange( nextValues );\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{ filteredSides.map( ( side ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<SpacingInputControl\n\t\t\t\t\t\tkey={ `spacing-sizes-control-${ side }` }\n\t\t\t\t\t\ticon={ ICONS[ side ] }\n\t\t\t\t\t\tlabel={ LABELS[ side ] }\n\t\t\t\t\t\tminimumCustomValue={ minimumCustomValue }\n\t\t\t\t\t\tonChange={ createHandleOnChange( side ) }\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\t\tside={ side }\n\t\t\t\t\t\tspacingSizes={ spacingSizes }\n\t\t\t\t\t\ttype={ type }\n\t\t\t\t\t\tvalue={ values[ side ] }\n\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport SpacingInputControl from './spacing-input-control';\nimport { LABELS } from '../utils';\n\nexport default function SingleInputControl( {\n\tminimumCustomValue,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tshowSideInLabel,\n\tside,\n\tspacingSizes,\n\ttype,\n\tvalues,\n} ) {\n\tconst createHandleOnChange = ( currentSide ) => ( next ) => {\n\t\tconst nextValues = { ...values };\n\t\tnextValues[ currentSide ] = next;\n\n\t\tonChange( nextValues );\n\t};\n\n\treturn (\n\t\t<SpacingInputControl\n\t\t\tlabel={ LABELS[ side ] }\n\t\t\tminimumCustomValue={ minimumCustomValue }\n\t\t\tonChange={ createHandleOnChange( side ) }\n\t\t\tonMouseOut={ onMouseOut }\n\t\t\tonMouseOver={ onMouseOver }\n\t\t\tshowSideInLabel={ showSideInLabel }\n\t\t\tside={ side }\n\t\t\tspacingSizes={ spacingSizes }\n\t\t\ttype={ type }\n\t\t\tvalue={ values[ side ] }\n\t\t\twithInputField={ false }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { DropdownMenu, Icon, MenuGroup, MenuItem } from '@wordpress/components';\nimport { check } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { getSupportedMenuItems, VIEWS } from '../utils';\n\nconst checkIcon = <Icon icon={ check } size={ 24 } />;\n\nexport default function SidesDropdown( {\n\tlabel: labelProp,\n\tonChange,\n\tsides,\n\tvalue,\n} ) {\n\tif ( ! sides || ! sides.length ) {\n\t\treturn;\n\t}\n\n\tconst supportedItems = getSupportedMenuItems( sides );\n\tconst sideIcon = supportedItems[ value ].icon;\n\tconst { custom: customItem, ...menuItems } = supportedItems;\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\ticon={ sideIcon }\n\t\t\tlabel={ labelProp }\n\t\t\tclassName=\"spacing-sizes-control__dropdown\"\n\t\t\ttoggleProps={ { isSmall: true } }\n\t\t>\n\t\t\t{ ( { onClose } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t{ Object.entries( menuItems ).map(\n\t\t\t\t\t\t\t\t( [ slug, { label, icon } ] ) => {\n\t\t\t\t\t\t\t\t\tconst isSelected = value === slug;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tkey={ slug }\n\t\t\t\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\n\t\t\t\t\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\t\t\t\t\trole=\"menuitemradio\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\tonChange( slug );\n\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t\t\t\t? checkIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t{ !! customItem && (\n\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\ticon={ customItem.icon }\n\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\n\t\t\t\t\t\t\t\t\tisSelected={ value === VIEWS.custom }\n\t\t\t\t\t\t\t\t\trole=\"menuitemradio\"\n\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\tonChange( VIEWS.custom );\n\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t\t\tvalue === VIEWS.custom\n\t\t\t\t\t\t\t\t\t\t\t? checkIcon\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ customItem.label }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} }\n\t\t</DropdownMenu>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tBaseControl,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __, _x, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport AxialInputControls from './input-controls/axial';\nimport SeparatedInputControls from './input-controls/separated';\nimport SingleInputControl from './input-controls/single';\nimport SidesDropdown from './sides-dropdown';\nimport useSpacingSizes from './hooks/use-spacing-sizes';\nimport {\n\tALL_SIDES,\n\tDEFAULT_VALUES,\n\tLABELS,\n\tVIEWS,\n\tgetInitialView,\n} from './utils';\n\nexport default function SpacingSizesControl( {\n\tinputProps,\n\tlabel: labelProp,\n\tminimumCustomValue = 0,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tshowSideInLabel = true,\n\tsides = ALL_SIDES,\n\tuseSelect,\n\tvalues,\n} ) {\n\tconst spacingSizes = useSpacingSizes();\n\tconst inputValues = values || DEFAULT_VALUES;\n\tconst hasOneSide = sides?.length === 1;\n\tconst hasOnlyAxialSides =\n\t\tsides?.includes( 'horizontal' ) &&\n\t\tsides?.includes( 'vertical' ) &&\n\t\tsides?.length === 2;\n\n\tconst [ view, setView ] = useState( getInitialView( inputValues, sides ) );\n\n\tconst handleOnChange = ( nextValue ) => {\n\t\tconst newValues = { ...values, ...nextValue };\n\t\tonChange( newValues );\n\t};\n\n\tconst inputControlProps = {\n\t\t...inputProps,\n\t\tminimumCustomValue,\n\t\tonChange: handleOnChange,\n\t\tonMouseOut,\n\t\tonMouseOver,\n\t\tsides,\n\t\tspacingSizes,\n\t\ttype: labelProp,\n\t\tuseSelect,\n\t\tvalues: inputValues,\n\t};\n\n\tconst renderControls = () => {\n\t\tif ( view === VIEWS.axial ) {\n\t\t\treturn <AxialInputControls { ...inputControlProps } />;\n\t\t}\n\t\tif ( view === VIEWS.custom ) {\n\t\t\treturn <SeparatedInputControls { ...inputControlProps } />;\n\t\t}\n\t\treturn (\n\t\t\t<SingleInputControl\n\t\t\t\tside={ view }\n\t\t\t\t{ ...inputControlProps }\n\t\t\t\tshowSideInLabel={ showSideInLabel }\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst sideLabel =\n\t\tALL_SIDES.includes( view ) && showSideInLabel ? LABELS[ view ] : '';\n\n\tconst label = sprintf(\n\t\t// translators: 2. Type of spacing being modified (Padding, margin, etc). 1: The side of the block being modified (top, bottom, left etc.).\n\t\t__( '%1$s %2$s' ),\n\t\tlabelProp,\n\t\tsideLabel\n\t).trim();\n\n\tconst dropdownLabelText = sprintf(\n\t\t// translators: %s: The current spacing property e.g. \"Padding\", \"Margin\".\n\t\t_x( '%s options', 'Button label to reveal side configuration options' ),\n\t\tlabelProp\n\t);\n\n\treturn (\n\t\t<fieldset className=\"spacing-sizes-control\">\n\t\t\t<HStack className=\"spacing-sizes-control__header\">\n\t\t\t\t<BaseControl.VisualLabel\n\t\t\t\t\tas=\"legend\"\n\t\t\t\t\tclassName=\"spacing-sizes-control__label\"\n\t\t\t\t>\n\t\t\t\t\t{ label }\n\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t{ ! hasOneSide && ! hasOnlyAxialSides && (\n\t\t\t\t\t<SidesDropdown\n\t\t\t\t\t\tlabel={ dropdownLabelText }\n\t\t\t\t\t\tonChange={ setView }\n\t\t\t\t\t\tsides={ sides }\n\t\t\t\t\t\tvalue={ view }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</HStack>\n\t\t\t{ renderControls() }\n\t\t</fieldset>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useSetting from '../../use-setting';\n\nexport default function useSpacingSizes() {\n\tconst spacingSizes = [\n\t\t{ name: 0, slug: '0', side: 0 },\n\t\t...( useSetting( 'spacing.spacingSizes' ) || [] ),\n\t];\n\n\tif ( spacingSizes.length > 8 ) {\n\t\tspacingSizes.unshift( {\n\t\t\tname: __( 'Default' ),\n\t\t\tslug: 'default',\n\t\t\tsize: undefined,\n\t\t} );\n\t}\n\n\treturn spacingSizes;\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport {\n\tBaseControl,\n\tRangeControl,\n\tFlex,\n\tFlexItem,\n\t__experimentalSpacer as Spacer,\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useSetting from '../use-setting';\n\nconst RANGE_CONTROL_CUSTOM_SETTINGS = {\n\tpx: { max: 1000, step: 1 },\n\t'%': { max: 100, step: 1 },\n\tvw: { max: 100, step: 1 },\n\tvh: { max: 100, step: 1 },\n\tem: { max: 50, step: 0.1 },\n\trem: { max: 50, step: 0.1 },\n};\n\n/**\n * HeightControl renders a linked unit control and range control for adjusting the height of a block.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/height-control/README.md\n *\n * @param {Object}                     props\n * @param {?string}                    props.label    A label for the control.\n * @param {( value: string ) => void } props.onChange Called when the height changes.\n * @param {string}                     props.value    The current height value.\n *\n * @return {WPComponent} The component to be rendered.\n */\nexport default function HeightControl( {\n\tlabel = __( 'Height' ),\n\tonChange,\n\tvalue,\n} ) {\n\tconst customRangeValue = parseFloat( value );\n\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: useSetting( 'spacing.units' ) || [\n\t\t\t'%',\n\t\t\t'px',\n\t\t\t'em',\n\t\t\t'rem',\n\t\t\t'vh',\n\t\t\t'vw',\n\t\t],\n\t} );\n\n\tconst selectedUnit =\n\t\tuseMemo(\n\t\t\t() => parseQuantityAndUnitFromRawValue( value ),\n\t\t\t[ value ]\n\t\t)[ 1 ] ||\n\t\tunits[ 0 ]?.value ||\n\t\t'px';\n\n\tconst handleSliderChange = ( next ) => {\n\t\tonChange( [ next, selectedUnit ].join( '' ) );\n\t};\n\n\tconst handleUnitChange = ( newUnit ) => {\n\t\t// Attempt to smooth over differences between currentUnit and newUnit.\n\t\t// This should slightly improve the experience of switching between unit types.\n\t\tconst [ currentValue, currentUnit ] =\n\t\t\tparseQuantityAndUnitFromRawValue( value );\n\n\t\tif ( [ 'em', 'rem' ].includes( newUnit ) && currentUnit === 'px' ) {\n\t\t\t// Convert pixel value to an approximate of the new unit, assuming a root size of 16px.\n\t\t\tonChange( ( currentValue / 16 ).toFixed( 2 ) + newUnit );\n\t\t} else if (\n\t\t\t[ 'em', 'rem' ].includes( currentUnit ) &&\n\t\t\tnewUnit === 'px'\n\t\t) {\n\t\t\t// Convert to pixel value assuming a root size of 16px.\n\t\t\tonChange( Math.round( currentValue * 16 ) + newUnit );\n\t\t} else if (\n\t\t\t[ 'vh', 'vw', '%' ].includes( newUnit ) &&\n\t\t\tcurrentValue > 100\n\t\t) {\n\t\t\t// When converting to `vh`, `vw`, or `%` units, cap the new value at 100.\n\t\t\tonChange( 100 + newUnit );\n\t\t}\n\t};\n\n\treturn (\n\t\t<fieldset className=\"block-editor-height-control\">\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t{ label }\n\t\t\t</BaseControl.VisualLabel>\n\t\t\t<Flex>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<UnitControl\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\tonUnitChange={ handleUnitChange }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<Spacer marginX={ 2 } marginBottom={ 0 }>\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tvalue={ customRangeValue }\n\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\tmax={\n\t\t\t\t\t\t\t\tRANGE_CONTROL_CUSTOM_SETTINGS[ selectedUnit ]\n\t\t\t\t\t\t\t\t\t?.max ?? 100\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstep={\n\t\t\t\t\t\t\t\tRANGE_CONTROL_CUSTOM_SETTINGS[ selectedUnit ]\n\t\t\t\t\t\t\t\t\t?.step ?? 0.1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t\t\tonChange={ handleSliderChange }\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Spacer>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</fieldset>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n\t__experimentalUnitControl as UnitControl,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useEffect } from '@wordpress/element';\n\nfunction helpText( selfStretch, parentLayout ) {\n\tconst { orientation = 'horizontal' } = parentLayout;\n\n\tif ( selfStretch === 'fill' ) {\n\t\treturn __( 'Stretch to fill available space.' );\n\t}\n\tif ( selfStretch === 'fixed' && orientation === 'horizontal' ) {\n\t\treturn __( 'Specify a fixed width.' );\n\t} else if ( selfStretch === 'fixed' ) {\n\t\treturn __( 'Specify a fixed height.' );\n\t}\n\treturn __( 'Fit contents.' );\n}\n\n/**\n * Form to edit the child layout value.\n *\n * @param {Object}   props              Props.\n * @param {Object}   props.value        The child layout value.\n * @param {Function} props.onChange     Function to update the child layout value.\n * @param {Object}   props.parentLayout The parent layout value.\n *\n * @return {WPElement} child layout edit element.\n */\nexport default function ChildLayoutControl( {\n\tvalue: childLayout = {},\n\tonChange,\n\tparentLayout,\n} ) {\n\tconst { selfStretch, flexSize } = childLayout;\n\n\tuseEffect( () => {\n\t\tif ( selfStretch === 'fixed' && ! flexSize ) {\n\t\t\tonChange( {\n\t\t\t\t...childLayout,\n\t\t\t\tselfStretch: 'fit',\n\t\t\t} );\n\t\t}\n\t}, [] );\n\n\treturn (\n\t\t<>\n\t\t\t<ToggleGroupControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\tlabel={ childLayoutOrientation( parentLayout ) }\n\t\t\t\tvalue={ selfStretch || 'fit' }\n\t\t\t\thelp={ helpText( selfStretch, parentLayout ) }\n\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\tconst newFlexSize = value !== 'fixed' ? null : flexSize;\n\t\t\t\t\tonChange( {\n\t\t\t\t\t\t...childLayout,\n\t\t\t\t\t\tselfStretch: value,\n\t\t\t\t\t\tflexSize: newFlexSize,\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t\tisBlock={ true }\n\t\t\t>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey={ 'fit' }\n\t\t\t\t\tvalue={ 'fit' }\n\t\t\t\t\tlabel={ __( 'Fit' ) }\n\t\t\t\t/>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey={ 'fill' }\n\t\t\t\t\tvalue={ 'fill' }\n\t\t\t\t\tlabel={ __( 'Fill' ) }\n\t\t\t\t/>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey={ 'fixed' }\n\t\t\t\t\tvalue={ 'fixed' }\n\t\t\t\t\tlabel={ __( 'Fixed' ) }\n\t\t\t\t/>\n\t\t\t</ToggleGroupControl>\n\t\t\t{ selfStretch === 'fixed' && (\n\t\t\t\t<UnitControl\n\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t...childLayout,\n\t\t\t\t\t\t\tflexSize: value,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\tvalue={ flexSize }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport function childLayoutOrientation( parentLayout ) {\n\tconst { orientation = 'horizontal' } = parentLayout;\n\n\treturn orientation === 'horizontal' ? __( 'Width' ) : __( 'Height' );\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalBoxControl as BoxControl,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalView as View,\n} from '@wordpress/components';\nimport { Icon, positionCenter, stretchWide } from '@wordpress/icons';\nimport { useCallback, Platform } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromVariable } from './utils';\nimport SpacingSizesControl from '../spacing-sizes-control';\nimport HeightControl from '../height-control';\nimport ChildLayoutControl from '../child-layout-control';\nimport { cleanEmptyObject } from '../../hooks/utils';\nimport { setImmutably } from '../../utils/object';\n\nconst AXIAL_SIDES = [ 'horizontal', 'vertical' ];\n\nexport function useHasDimensionsPanel( settings ) {\n\tconst hasContentSize = useHasContentSize( settings );\n\tconst hasWideSize = useHasWideSize( settings );\n\tconst hasPadding = useHasPadding( settings );\n\tconst hasMargin = useHasMargin( settings );\n\tconst hasGap = useHasGap( settings );\n\tconst hasMinHeight = useHasMinHeight( settings );\n\tconst hasChildLayout = useHasChildLayout( settings );\n\n\treturn (\n\t\tPlatform.OS === 'web' &&\n\t\t( hasContentSize ||\n\t\t\thasWideSize ||\n\t\t\thasPadding ||\n\t\t\thasMargin ||\n\t\t\thasGap ||\n\t\t\thasMinHeight ||\n\t\t\thasChildLayout )\n\t);\n}\n\nfunction useHasContentSize( settings ) {\n\treturn settings?.layout?.contentSize;\n}\n\nfunction useHasWideSize( settings ) {\n\treturn settings?.layout?.wideSize;\n}\n\nfunction useHasPadding( settings ) {\n\treturn settings?.spacing?.padding;\n}\n\nfunction useHasMargin( settings ) {\n\treturn settings?.spacing?.margin;\n}\n\nfunction useHasGap( settings ) {\n\treturn settings?.spacing?.blockGap;\n}\n\nfunction useHasMinHeight( settings ) {\n\treturn settings?.dimensions?.minHeight;\n}\n\nfunction useHasChildLayout( settings ) {\n\tconst {\n\t\ttype: parentLayoutType = 'default',\n\t\tdefault: { type: defaultParentLayoutType = 'default' } = {},\n\t\tallowSizingOnChildren = false,\n\t} = settings?.parentLayout ?? {};\n\n\tconst support =\n\t\t( defaultParentLayoutType === 'flex' || parentLayoutType === 'flex' ) &&\n\t\tallowSizingOnChildren;\n\n\treturn !! settings?.layout && support;\n}\n\nfunction useHasSpacingPresets( settings ) {\n\tconst {\n\t\tcustom,\n\t\ttheme,\n\t\tdefault: defaultPresets,\n\t} = settings?.spacing?.spacingSizes || {};\n\tconst presets = custom ?? theme ?? defaultPresets ?? [];\n\n\treturn presets.length > 0;\n}\n\nfunction filterValuesBySides( values, sides ) {\n\t// If no custom side configuration, all sides are opted into by default.\n\t// Without any values, we have nothing to filter either.\n\tif ( ! sides || ! values ) {\n\t\treturn values;\n\t}\n\n\t// Only include sides opted into within filtered values.\n\tconst filteredValues = {};\n\tsides.forEach( ( side ) => {\n\t\tif ( side === 'vertical' ) {\n\t\t\tfilteredValues.top = values.top;\n\t\t\tfilteredValues.bottom = values.bottom;\n\t\t}\n\t\tif ( side === 'horizontal' ) {\n\t\t\tfilteredValues.left = values.left;\n\t\t\tfilteredValues.right = values.right;\n\t\t}\n\t\tfilteredValues[ side ] = values?.[ side ];\n\t} );\n\n\treturn filteredValues;\n}\n\nfunction splitStyleValue( value ) {\n\t// Check for shorthand value (a string value).\n\tif ( value && typeof value === 'string' ) {\n\t\t// Convert to value for individual sides for BoxControl.\n\t\treturn {\n\t\t\ttop: value,\n\t\t\tright: value,\n\t\t\tbottom: value,\n\t\t\tleft: value,\n\t\t};\n\t}\n\n\treturn value;\n}\n\nfunction splitGapValue( value ) {\n\t// Check for shorthand value (a string value).\n\tif ( value && typeof value === 'string' ) {\n\t\t// If the value is a string, treat it as a single side (top) for the spacing controls.\n\t\treturn {\n\t\t\ttop: value,\n\t\t};\n\t}\n\n\tif ( value ) {\n\t\treturn {\n\t\t\t...value,\n\t\t\tright: value?.left,\n\t\t\tbottom: value?.top,\n\t\t};\n\t}\n\n\treturn value;\n}\n\nfunction DimensionsToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tcontentSize: true,\n\twideSize: true,\n\tpadding: true,\n\tmargin: true,\n\tblockGap: true,\n\tminHeight: true,\n\tchildLayout: true,\n};\n\nexport default function DimensionsPanel( {\n\tas: Wrapper = DimensionsToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n\tonVisualize = () => {},\n\t// Special case because the layout controls are not part of the dimensions panel\n\t// in global styles but not in block inspector.\n\tincludeLayoutControls = false,\n} ) {\n\tconst decodeValue = ( rawValue ) => {\n\t\tif ( rawValue && typeof rawValue === 'object' ) {\n\t\t\treturn Object.keys( rawValue ).reduce( ( acc, key ) => {\n\t\t\t\tacc[ key ] = getValueFromVariable(\n\t\t\t\t\t{ settings },\n\t\t\t\t\t'',\n\t\t\t\t\trawValue[ key ]\n\t\t\t\t);\n\t\t\t\treturn acc;\n\t\t\t}, {} );\n\t\t}\n\t\treturn getValueFromVariable( { settings }, '', rawValue );\n\t};\n\n\tconst showSpacingPresetsControl = useHasSpacingPresets( settings );\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: settings?.spacing?.units || [\n\t\t\t'%',\n\t\t\t'px',\n\t\t\t'em',\n\t\t\t'rem',\n\t\t\t'vw',\n\t\t],\n\t} );\n\n\t// Content Size\n\tconst showContentSizeControl =\n\t\tuseHasContentSize( settings ) && includeLayoutControls;\n\tconst contentSizeValue = decodeValue( inheritedValue?.layout?.contentSize );\n\tconst setContentSizeValue = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'layout', 'contentSize' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasUserSetContentSizeValue = () => !! value?.layout?.contentSize;\n\tconst resetContentSizeValue = () => setContentSizeValue( undefined );\n\n\t// Wide Size\n\tconst showWideSizeControl =\n\t\tuseHasWideSize( settings ) && includeLayoutControls;\n\tconst wideSizeValue = decodeValue( inheritedValue?.layout?.wideSize );\n\tconst setWideSizeValue = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'layout', 'wideSize' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasUserSetWideSizeValue = () => !! value?.layout?.wideSize;\n\tconst resetWideSizeValue = () => setWideSizeValue( undefined );\n\n\t// Padding\n\tconst showPaddingControl = useHasPadding( settings );\n\tconst rawPadding = decodeValue( inheritedValue?.spacing?.padding );\n\tconst paddingValues = splitStyleValue( rawPadding );\n\tconst paddingSides = Array.isArray( settings?.spacing?.padding )\n\t\t? settings?.spacing?.padding\n\t\t: settings?.spacing?.padding?.sides;\n\tconst isAxialPadding =\n\t\tpaddingSides &&\n\t\tpaddingSides.some( ( side ) => AXIAL_SIDES.includes( side ) );\n\tconst setPaddingValues = ( newPaddingValues ) => {\n\t\tconst padding = filterValuesBySides( newPaddingValues, paddingSides );\n\t\tonChange( setImmutably( value, [ 'spacing', 'padding' ], padding ) );\n\t};\n\tconst hasPaddingValue = () =>\n\t\t!! value?.spacing?.padding &&\n\t\tObject.keys( value?.spacing?.padding ).length;\n\tconst resetPaddingValue = () => setPaddingValues( undefined );\n\tconst onMouseOverPadding = () => onVisualize( 'padding' );\n\n\t// Margin\n\tconst showMarginControl = useHasMargin( settings );\n\tconst rawMargin = decodeValue( inheritedValue?.spacing?.margin );\n\tconst marginValues = splitStyleValue( rawMargin );\n\tconst marginSides = Array.isArray( settings?.spacing?.margin )\n\t\t? settings?.spacing?.margin\n\t\t: settings?.spacing?.margin?.sides;\n\tconst isAxialMargin =\n\t\tmarginSides &&\n\t\tmarginSides.some( ( side ) => AXIAL_SIDES.includes( side ) );\n\tconst setMarginValues = ( newMarginValues ) => {\n\t\tconst margin = filterValuesBySides( newMarginValues, marginSides );\n\t\tonChange( setImmutably( value, [ 'spacing', 'margin' ], margin ) );\n\t};\n\tconst hasMarginValue = () =>\n\t\t!! value?.spacing?.margin &&\n\t\tObject.keys( value?.spacing?.margin ).length;\n\tconst resetMarginValue = () => setMarginValues( undefined );\n\tconst onMouseOverMargin = () => onVisualize( 'margin' );\n\n\t// Block Gap\n\tconst showGapControl = useHasGap( settings );\n\tconst gapValue = decodeValue( inheritedValue?.spacing?.blockGap );\n\tconst gapValues = splitGapValue( gapValue );\n\tconst gapSides = Array.isArray( settings?.spacing?.blockGap )\n\t\t? settings?.spacing?.blockGap\n\t\t: settings?.spacing?.blockGap?.sides;\n\tconst isAxialGap =\n\t\tgapSides && gapSides.some( ( side ) => AXIAL_SIDES.includes( side ) );\n\tconst setGapValue = ( newGapValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably( value, [ 'spacing', 'blockGap' ], newGapValue )\n\t\t);\n\t};\n\tconst setGapValues = ( nextBoxGapValue ) => {\n\t\tif ( ! nextBoxGapValue ) {\n\t\t\tsetGapValue( null );\n\t\t}\n\t\t// If axial gap is not enabled, treat the 'top' value as the shorthand gap value.\n\t\tif ( ! isAxialGap && nextBoxGapValue?.hasOwnProperty( 'top' ) ) {\n\t\t\tsetGapValue( nextBoxGapValue.top );\n\t\t} else {\n\t\t\tsetGapValue( {\n\t\t\t\ttop: nextBoxGapValue?.top,\n\t\t\t\tleft: nextBoxGapValue?.left,\n\t\t\t} );\n\t\t}\n\t};\n\tconst resetGapValue = () => setGapValue( undefined );\n\tconst hasGapValue = () => !! value?.spacing?.blockGap;\n\n\t// Min Height\n\tconst showMinHeightControl = useHasMinHeight( settings );\n\tconst minHeightValue = decodeValue( inheritedValue?.dimensions?.minHeight );\n\tconst setMinHeightValue = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably( value, [ 'dimensions', 'minHeight' ], newValue )\n\t\t);\n\t};\n\tconst resetMinHeightValue = () => {\n\t\tsetMinHeightValue( undefined );\n\t};\n\tconst hasMinHeightValue = () => !! value?.dimensions?.minHeight;\n\n\t// Child Layout\n\tconst showChildLayoutControl = useHasChildLayout( settings );\n\tconst childLayout = inheritedValue?.layout;\n\tconst { orientation = 'horizontal' } = settings?.parentLayout ?? {};\n\tconst childLayoutOrientationLabel =\n\t\torientation === 'horizontal' ? __( 'Width' ) : __( 'Height' );\n\tconst setChildLayout = ( newChildLayout ) => {\n\t\tonChange( {\n\t\t\t...value,\n\t\t\tlayout: {\n\t\t\t\t...value?.layout,\n\t\t\t\t...newChildLayout,\n\t\t\t},\n\t\t} );\n\t};\n\tconst resetChildLayoutValue = () => {\n\t\tsetChildLayout( {\n\t\t\tselfStretch: undefined,\n\t\t\tflexSize: undefined,\n\t\t} );\n\t};\n\tconst hasChildLayoutValue = () => !! value?.layout;\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tlayout: cleanEmptyObject( {\n\t\t\t\t...previousValue?.layout,\n\t\t\t\tcontentSize: undefined,\n\t\t\t\twideSize: undefined,\n\t\t\t\tselfStretch: undefined,\n\t\t\t\tflexSize: undefined,\n\t\t\t} ),\n\t\t\tspacing: {\n\t\t\t\t...previousValue?.spacing,\n\t\t\t\tpadding: undefined,\n\t\t\t\tmargin: undefined,\n\t\t\t\tblockGap: undefined,\n\t\t\t},\n\t\t\tdimensions: {\n\t\t\t\t...previousValue?.dimensions,\n\t\t\t\tminHeight: undefined,\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\tconst onMouseLeaveControls = () => onVisualize( false );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ ( showContentSizeControl || showWideSizeControl ) && (\n\t\t\t\t<span className=\"span-columns\">\n\t\t\t\t\t{ __( 'Set the width of the main content area.' ) }\n\t\t\t\t</span>\n\t\t\t) }\n\t\t\t{ showContentSizeControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Content size' ) }\n\t\t\t\t\thasValue={ hasUserSetContentSizeValue }\n\t\t\t\t\tonDeselect={ resetContentSizeValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.contentSize ??\n\t\t\t\t\t\tDEFAULT_CONTROLS.contentSize\n\t\t\t\t\t}\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<HStack alignment=\"flex-end\" justify=\"flex-start\">\n\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\tlabel={ __( 'Content' ) }\n\t\t\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\t\t\t__unstableInputWidth=\"80px\"\n\t\t\t\t\t\t\tvalue={ contentSizeValue || '' }\n\t\t\t\t\t\t\tonChange={ ( nextContentSize ) => {\n\t\t\t\t\t\t\t\tsetContentSizeValue( nextContentSize );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<View>\n\t\t\t\t\t\t\t<Icon icon={ positionCenter } />\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</HStack>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showWideSizeControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Wide size' ) }\n\t\t\t\t\thasValue={ hasUserSetWideSizeValue }\n\t\t\t\t\tonDeselect={ resetWideSizeValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.wideSize ?? DEFAULT_CONTROLS.wideSize\n\t\t\t\t\t}\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<HStack alignment=\"flex-end\" justify=\"flex-start\">\n\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\tlabel={ __( 'Wide' ) }\n\t\t\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\t\t\t__unstableInputWidth=\"80px\"\n\t\t\t\t\t\t\tvalue={ wideSizeValue || '' }\n\t\t\t\t\t\t\tonChange={ ( nextWideSize ) => {\n\t\t\t\t\t\t\t\tsetWideSizeValue( nextWideSize );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<View>\n\t\t\t\t\t\t\t<Icon icon={ stretchWide } />\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</HStack>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showPaddingControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasPaddingValue }\n\t\t\t\t\tlabel={ __( 'Padding' ) }\n\t\t\t\t\tonDeselect={ resetPaddingValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.padding ?? DEFAULT_CONTROLS.padding\n\t\t\t\t\t}\n\t\t\t\t\tclassName={ classnames( {\n\t\t\t\t\t\t'tools-panel-item-spacing': showSpacingPresetsControl,\n\t\t\t\t\t} ) }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t{ ! showSpacingPresetsControl && (\n\t\t\t\t\t\t<BoxControl\n\t\t\t\t\t\t\tvalues={ paddingValues }\n\t\t\t\t\t\t\tonChange={ setPaddingValues }\n\t\t\t\t\t\t\tlabel={ __( 'Padding' ) }\n\t\t\t\t\t\t\tsides={ paddingSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tsplitOnAxis={ isAxialPadding }\n\t\t\t\t\t\t\tonMouseOver={ onMouseOverPadding }\n\t\t\t\t\t\t\tonMouseOut={ onMouseLeaveControls }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showSpacingPresetsControl && (\n\t\t\t\t\t\t<SpacingSizesControl\n\t\t\t\t\t\t\tvalues={ paddingValues }\n\t\t\t\t\t\t\tonChange={ setPaddingValues }\n\t\t\t\t\t\t\tlabel={ __( 'Padding' ) }\n\t\t\t\t\t\t\tsides={ paddingSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tonMouseOver={ onMouseOverPadding }\n\t\t\t\t\t\t\tonMouseOut={ onMouseLeaveControls }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showMarginControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasMarginValue }\n\t\t\t\t\tlabel={ __( 'Margin' ) }\n\t\t\t\t\tonDeselect={ resetMarginValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.margin ?? DEFAULT_CONTROLS.margin\n\t\t\t\t\t}\n\t\t\t\t\tclassName={ classnames( {\n\t\t\t\t\t\t'tools-panel-item-spacing': showSpacingPresetsControl,\n\t\t\t\t\t} ) }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t{ ! showSpacingPresetsControl && (\n\t\t\t\t\t\t<BoxControl\n\t\t\t\t\t\t\tvalues={ marginValues }\n\t\t\t\t\t\t\tonChange={ setMarginValues }\n\t\t\t\t\t\t\tlabel={ __( 'Margin' ) }\n\t\t\t\t\t\t\tsides={ marginSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tsplitOnAxis={ isAxialMargin }\n\t\t\t\t\t\t\tonMouseOver={ onMouseOverMargin }\n\t\t\t\t\t\t\tonMouseOut={ onMouseLeaveControls }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showSpacingPresetsControl && (\n\t\t\t\t\t\t<SpacingSizesControl\n\t\t\t\t\t\t\tvalues={ marginValues }\n\t\t\t\t\t\t\tonChange={ setMarginValues }\n\t\t\t\t\t\t\tlabel={ __( 'Margin' ) }\n\t\t\t\t\t\t\tsides={ marginSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tonMouseOver={ onMouseOverMargin }\n\t\t\t\t\t\t\tonMouseOut={ onMouseLeaveControls }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showGapControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasGapValue }\n\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\tonDeselect={ resetGapValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.blockGap ?? DEFAULT_CONTROLS.blockGap\n\t\t\t\t\t}\n\t\t\t\t\tclassName={ classnames( {\n\t\t\t\t\t\t'tools-panel-item-spacing': showSpacingPresetsControl,\n\t\t\t\t\t} ) }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t{ ! showSpacingPresetsControl &&\n\t\t\t\t\t\t( isAxialGap ? (\n\t\t\t\t\t\t\t<BoxControl\n\t\t\t\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\t\tonChange={ setGapValues }\n\t\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\t\tsides={ gapSides }\n\t\t\t\t\t\t\t\tvalues={ gapValues }\n\t\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\t\tsplitOnAxis={ isAxialGap }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\t\t\t\t__unstableInputWidth=\"80px\"\n\t\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\t\tonChange={ setGapValue }\n\t\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\t\tvalue={ gapValue }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t{ showSpacingPresetsControl && (\n\t\t\t\t\t\t<SpacingSizesControl\n\t\t\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\tonChange={ setGapValues }\n\t\t\t\t\t\t\tshowSideInLabel={ false }\n\t\t\t\t\t\t\tsides={ isAxialGap ? gapSides : [ 'top' ] } // Use 'top' as the shorthand property in non-axial configurations.\n\t\t\t\t\t\t\tvalues={ gapValues }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showMinHeightControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasMinHeightValue }\n\t\t\t\t\tlabel={ __( 'Min. height' ) }\n\t\t\t\t\tonDeselect={ resetMinHeightValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.minHeight ?? DEFAULT_CONTROLS.minHeight\n\t\t\t\t\t}\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<HeightControl\n\t\t\t\t\t\tlabel={ __( 'Min. height' ) }\n\t\t\t\t\t\tvalue={ minHeightValue }\n\t\t\t\t\t\tonChange={ setMinHeightValue }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showChildLayoutControl && (\n\t\t\t\t<VStack\n\t\t\t\t\tas={ ToolsPanelItem }\n\t\t\t\t\tspacing={ 2 }\n\t\t\t\t\thasValue={ hasChildLayoutValue }\n\t\t\t\t\tlabel={ childLayoutOrientationLabel }\n\t\t\t\t\tonDeselect={ resetChildLayoutValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.childLayout ??\n\t\t\t\t\t\tDEFAULT_CONTROLS.childLayout\n\t\t\t\t\t}\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<ChildLayoutControl\n\t\t\t\t\t\tvalue={ childLayout }\n\t\t\t\t\t\tonChange={ setChildLayout }\n\t\t\t\t\t\tparentLayout={ settings?.parentLayout }\n\t\t\t\t\t/>\n\t\t\t\t</VStack>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useState, useRef, useEffect } from '@wordpress/element';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport BlockPopover from '../components/block-popover';\nimport { __unstableUseBlockElement as useBlockElement } from '../components/block-list/use-block-props/use-block-refs';\n\nfunction getComputedCSS( element, property ) {\n\treturn element.ownerDocument.defaultView\n\t\t.getComputedStyle( element )\n\t\t.getPropertyValue( property );\n}\n\nexport function MarginVisualizer( { clientId, attributes, forceShow } ) {\n\tconst blockElement = useBlockElement( clientId );\n\tconst [ style, setStyle ] = useState();\n\n\tconst margin = attributes?.style?.spacing?.margin;\n\n\tuseEffect( () => {\n\t\tif ( ! blockElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst top = getComputedCSS( blockElement, 'margin-top' );\n\t\tconst right = getComputedCSS( blockElement, 'margin-right' );\n\t\tconst bottom = getComputedCSS( blockElement, 'margin-bottom' );\n\t\tconst left = getComputedCSS( blockElement, 'margin-left' );\n\n\t\tsetStyle( {\n\t\t\tborderTopWidth: top,\n\t\t\tborderRightWidth: right,\n\t\t\tborderBottomWidth: bottom,\n\t\t\tborderLeftWidth: left,\n\t\t\ttop: top ? `-${ top }` : 0,\n\t\t\tright: right ? `-${ right }` : 0,\n\t\t\tbottom: bottom ? `-${ bottom }` : 0,\n\t\t\tleft: left ? `-${ left }` : 0,\n\t\t} );\n\t}, [ blockElement, margin ] );\n\n\tconst [ isActive, setIsActive ] = useState( false );\n\tconst valueRef = useRef( margin );\n\tconst timeoutRef = useRef();\n\n\tconst clearTimer = () => {\n\t\tif ( timeoutRef.current ) {\n\t\t\twindow.clearTimeout( timeoutRef.current );\n\t\t}\n\t};\n\n\tuseEffect( () => {\n\t\tif ( ! isShallowEqual( margin, valueRef.current ) && ! forceShow ) {\n\t\t\tsetIsActive( true );\n\t\t\tvalueRef.current = margin;\n\n\t\t\ttimeoutRef.current = setTimeout( () => {\n\t\t\t\tsetIsActive( false );\n\t\t\t}, 400 );\n\t\t}\n\n\t\treturn () => {\n\t\t\tsetIsActive( false );\n\t\t\tclearTimer();\n\t\t};\n\t}, [ margin, forceShow ] );\n\n\tif ( ! isActive && ! forceShow ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<BlockPopover\n\t\t\tclientId={ clientId }\n\t\t\t__unstableCoverTarget\n\t\t\t__unstableRefreshSize={ margin }\n\t\t\t__unstablePopoverSlot=\"block-toolbar\"\n\t\t\tshift={ false }\n\t\t>\n\t\t\t<div className=\"block-editor__padding-visualizer\" style={ style } />\n\t\t</BlockPopover>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useState, useRef, useEffect } from '@wordpress/element';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport BlockPopover from '../components/block-popover';\nimport { __unstableUseBlockElement as useBlockElement } from '../components/block-list/use-block-props/use-block-refs';\n\nfunction getComputedCSS( element, property ) {\n\treturn element.ownerDocument.defaultView\n\t\t.getComputedStyle( element )\n\t\t.getPropertyValue( property );\n}\n\nexport function PaddingVisualizer( { clientId, attributes, forceShow } ) {\n\tconst blockElement = useBlockElement( clientId );\n\tconst [ style, setStyle ] = useState();\n\n\tconst padding = attributes?.style?.spacing?.padding;\n\n\tuseEffect( () => {\n\t\tif ( ! blockElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetStyle( {\n\t\t\tborderTopWidth: getComputedCSS( blockElement, 'padding-top' ),\n\t\t\tborderRightWidth: getComputedCSS( blockElement, 'padding-right' ),\n\t\t\tborderBottomWidth: getComputedCSS( blockElement, 'padding-bottom' ),\n\t\t\tborderLeftWidth: getComputedCSS( blockElement, 'padding-left' ),\n\t\t} );\n\t}, [ blockElement, padding ] );\n\n\tconst [ isActive, setIsActive ] = useState( false );\n\tconst valueRef = useRef( padding );\n\tconst timeoutRef = useRef();\n\n\tconst clearTimer = () => {\n\t\tif ( timeoutRef.current ) {\n\t\t\twindow.clearTimeout( timeoutRef.current );\n\t\t}\n\t};\n\n\tuseEffect( () => {\n\t\tif ( ! isShallowEqual( padding, valueRef.current ) && ! forceShow ) {\n\t\t\tsetIsActive( true );\n\t\t\tvalueRef.current = padding;\n\n\t\t\ttimeoutRef.current = setTimeout( () => {\n\t\t\t\tsetIsActive( false );\n\t\t\t}, 400 );\n\t\t}\n\n\t\treturn () => {\n\t\t\tsetIsActive( false );\n\t\t\tclearTimer();\n\t\t};\n\t}, [ padding, forceShow ] );\n\n\tif ( ! isActive && ! forceShow ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<BlockPopover\n\t\t\tclientId={ clientId }\n\t\t\t__unstableCoverTarget\n\t\t\t__unstableRefreshSize={ padding }\n\t\t\t__unstablePopoverSlot=\"block-toolbar\"\n\t\t\tshift={ false }\n\t\t>\n\t\t\t<div className=\"block-editor__padding-visualizer\" style={ style } />\n\t\t</BlockPopover>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useState, useEffect, useCallback } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { getBlockSupport } from '@wordpress/blocks';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport InspectorControls from '../components/inspector-controls';\nimport {\n\tDimensionsPanel as StylesDimensionsPanel,\n\tuseHasDimensionsPanel,\n} from '../components/global-styles';\nimport { MarginVisualizer } from './margin';\nimport { PaddingVisualizer } from './padding';\nimport { store as blockEditorStore } from '../store';\nimport { unlock } from '../lock-unlock';\n\nimport { cleanEmptyObject, useBlockSettings } from './utils';\n\nexport const DIMENSIONS_SUPPORT_KEY = 'dimensions';\nexport const SPACING_SUPPORT_KEY = 'spacing';\nexport const ALL_SIDES = [ 'top', 'right', 'bottom', 'left' ];\nexport const AXIAL_SIDES = [ 'vertical', 'horizontal' ];\n\nfunction useVisualizer() {\n\tconst [ property, setProperty ] = useState( false );\n\tconst { hideBlockInterface, showBlockInterface } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\tuseEffect( () => {\n\t\tif ( ! property ) {\n\t\t\tshowBlockInterface();\n\t\t} else {\n\t\t\thideBlockInterface();\n\t\t}\n\t}, [ property, showBlockInterface, hideBlockInterface ] );\n\n\treturn [ property, setProperty ];\n}\n\nfunction DimensionsInspectorControl( { children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributes.style;\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\tstyle: updatedStyle,\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"dimensions\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function DimensionsPanel( props ) {\n\tconst {\n\t\tclientId,\n\t\tname,\n\t\tattributes,\n\t\tsetAttributes,\n\t\t__unstableParentLayout,\n\t} = props;\n\tconst settings = useBlockSettings( name, __unstableParentLayout );\n\tconst isEnabled = useHasDimensionsPanel( settings );\n\tconst value = attributes.style;\n\tconst [ visualizedProperty, setVisualizedProperty ] = useVisualizer();\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( newStyle ),\n\t\t} );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultDimensionsControls = getBlockSupport( props.name, [\n\t\tDIMENSIONS_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\tconst defaultSpacingControls = getBlockSupport( props.name, [\n\t\tSPACING_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\tconst defaultControls = {\n\t\t...defaultDimensionsControls,\n\t\t...defaultSpacingControls,\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<StylesDimensionsPanel\n\t\t\t\tas={ DimensionsInspectorControl }\n\t\t\t\tpanelId={ clientId }\n\t\t\t\tsettings={ settings }\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tdefaultControls={ defaultControls }\n\t\t\t\tonVisualize={ setVisualizedProperty }\n\t\t\t/>\n\t\t\t{ !! settings?.spacing?.padding && (\n\t\t\t\t<PaddingVisualizer\n\t\t\t\t\tforceShow={ visualizedProperty === 'padding' }\n\t\t\t\t\t{ ...props }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ !! settings?.spacing?.margin && (\n\t\t\t\t<MarginVisualizer\n\t\t\t\t\tforceShow={ visualizedProperty === 'margin' }\n\t\t\t\t\t{ ...props }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\n/**\n * @deprecated\n */\nexport function useCustomSides() {\n\tdeprecated( 'wp.blockEditor.__experimentalUseCustomSides', {\n\t\tsince: '6.3',\n\t\tversion: '6.4',\n\t} );\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useContext, useMemo, createPortal } from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\nimport {\n\tgetBlockSupport,\n\thasBlockSupport,\n\t__EXPERIMENTAL_ELEMENTS as ELEMENTS,\n} from '@wordpress/blocks';\nimport { createHigherOrderComponent, useInstanceId } from '@wordpress/compose';\nimport { getCSSRules, compileCSS } from '@wordpress/style-engine';\n\n/**\n * Internal dependencies\n */\nimport BlockList from '../components/block-list';\nimport { BORDER_SUPPORT_KEY, BorderPanel } from './border';\nimport { COLOR_SUPPORT_KEY, ColorEdit } from './color';\nimport {\n\tTypographyPanel,\n\tTYPOGRAPHY_SUPPORT_KEY,\n\tTYPOGRAPHY_SUPPORT_KEYS,\n} from './typography';\nimport {\n\tDIMENSIONS_SUPPORT_KEY,\n\tSPACING_SUPPORT_KEY,\n\tDimensionsPanel,\n} from './dimensions';\nimport useDisplayBlockControls from '../components/use-display-block-controls';\nimport { shouldSkipSerialization } from './utils';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\nconst styleSupportKeys = [\n\t...TYPOGRAPHY_SUPPORT_KEYS,\n\tBORDER_SUPPORT_KEY,\n\tCOLOR_SUPPORT_KEY,\n\tDIMENSIONS_SUPPORT_KEY,\n\tSPACING_SUPPORT_KEY,\n];\n\nconst hasStyleSupport = ( blockType ) =>\n\tstyleSupportKeys.some( ( key ) => hasBlockSupport( blockType, key ) );\n\n/**\n * Returns the inline styles to add depending on the style object\n *\n * @param {Object} styles Styles configuration.\n *\n * @return {Object} Flattened CSS variables declaration.\n */\nexport function getInlineStyles( styles = {} ) {\n\tconst output = {};\n\t// The goal is to move everything to server side generated engine styles\n\t// This is temporary as we absorb more and more styles into the engine.\n\tgetCSSRules( styles ).forEach( ( rule ) => {\n\t\toutput[ rule.key ] = rule.value;\n\t} );\n\n\treturn output;\n}\n\n/**\n * Filters registered block settings, extending attributes to include `style` attribute.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addAttribute( settings ) {\n\tif ( ! hasStyleSupport( settings ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( ! settings.attributes.style ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tstyle: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * A dictionary of paths to flag skipping block support serialization as the key,\n * with values providing the style paths to be omitted from serialization.\n *\n * @constant\n * @type {Record<string, string[]>}\n */\nconst skipSerializationPathsEdit = {\n\t[ `${ BORDER_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [ 'border' ],\n\t[ `${ COLOR_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tCOLOR_SUPPORT_KEY,\n\t],\n\t[ `${ TYPOGRAPHY_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t],\n\t[ `${ DIMENSIONS_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tDIMENSIONS_SUPPORT_KEY,\n\t],\n\t[ `${ SPACING_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tSPACING_SUPPORT_KEY,\n\t],\n};\n\n/**\n * A dictionary of paths to flag skipping block support serialization as the key,\n * with values providing the style paths to be omitted from serialization.\n *\n * Extends the Edit skip paths to enable skipping additional paths in just\n * the Save component. This allows a block support to be serialized within the\n * editor, while using an alternate approach, such as server-side rendering, when\n * the support is saved.\n *\n * @constant\n * @type {Record<string, string[]>}\n */\nconst skipSerializationPathsSave = {\n\t...skipSerializationPathsEdit,\n\t[ `${ SPACING_SUPPORT_KEY }` ]: [ 'spacing.blockGap' ],\n};\n\n/**\n * A dictionary used to normalize feature names between support flags, style\n * object properties and __experimentSkipSerialization configuration arrays.\n *\n * This allows not having to provide a migration for a support flag and possible\n * backwards compatibility bridges, while still achieving consistency between\n * the support flag and the skip serialization array.\n *\n * @constant\n * @type {Record<string, string>}\n */\nconst renamedFeatures = { gradients: 'gradient' };\n\n/**\n * A utility function used to remove one or more paths from a style object.\n * Works in a way similar to Lodash's `omit()`. See unit tests and examples below.\n *\n * It supports a single string path:\n *\n * ```\n * omitStyle( { color: 'red' }, 'color' ); // {}\n * ```\n *\n * or an array of paths:\n *\n * ```\n * omitStyle( { color: 'red', background: '#fff' }, [ 'color', 'background' ] ); // {}\n * ```\n *\n * It also allows you to specify paths at multiple levels in a string.\n *\n * ```\n * omitStyle( { typography: { textDecoration: 'underline' } }, 'typography.textDecoration' ); // {}\n * ```\n *\n * You can remove multiple paths at the same time:\n *\n * ```\n * omitStyle(\n * \t\t{\n * \t\t\ttypography: {\n * \t\t\t\ttextDecoration: 'underline',\n * \t\t\t\ttextTransform: 'uppercase',\n * \t\t\t}\n *\t\t},\n *\t\t[\n * \t\t\t'typography.textDecoration',\n * \t\t\t'typography.textTransform',\n *\t\t]\n * );\n * // {}\n * ```\n *\n * You can also specify nested paths as arrays:\n *\n * ```\n * omitStyle(\n * \t\t{\n * \t\t\ttypography: {\n * \t\t\t\ttextDecoration: 'underline',\n * \t\t\t\ttextTransform: 'uppercase',\n * \t\t\t}\n *\t\t},\n *\t\t[\n * \t\t\t[ 'typography', 'textDecoration' ],\n * \t\t\t[ 'typography', 'textTransform' ],\n *\t\t]\n * );\n * // {}\n * ```\n *\n * With regards to nesting of styles, infinite depth is supported:\n *\n * ```\n * omitStyle(\n * \t\t{\n * \t\t\tborder: {\n * \t\t\t\tradius: {\n * \t\t\t\t\ttopLeft: '10px',\n * \t\t\t\t\ttopRight: '0.5rem',\n * \t\t\t\t}\n * \t\t\t}\n *\t\t},\n *\t\t[\n * \t\t\t[ 'border', 'radius', 'topRight' ],\n *\t\t]\n * );\n * // { border: { radius: { topLeft: '10px' } } }\n * ```\n *\n * The third argument, `preserveReference`, defines how to treat the input style object.\n * It is mostly necessary to properly handle mutation when recursively handling the style object.\n * Defaulting to `false`, this will always create a new object, avoiding to mutate `style`.\n * However, when recursing, we change that value to `true` in order to work with a single copy\n * of the original style object.\n *\n * @see https://lodash.com/docs/4.17.15#omit\n *\n * @param {Object}       style             Styles object.\n * @param {Array|string} paths             Paths to remove.\n * @param {boolean}      preserveReference True to mutate the `style` object, false otherwise.\n * @return {Object}      Styles object with the specified paths removed.\n */\nexport function omitStyle( style, paths, preserveReference = false ) {\n\tif ( ! style ) {\n\t\treturn style;\n\t}\n\n\tlet newStyle = style;\n\tif ( ! preserveReference ) {\n\t\tnewStyle = JSON.parse( JSON.stringify( style ) );\n\t}\n\n\tif ( ! Array.isArray( paths ) ) {\n\t\tpaths = [ paths ];\n\t}\n\n\tpaths.forEach( ( path ) => {\n\t\tif ( ! Array.isArray( path ) ) {\n\t\t\tpath = path.split( '.' );\n\t\t}\n\n\t\tif ( path.length > 1 ) {\n\t\t\tconst [ firstSubpath, ...restPath ] = path;\n\t\t\tomitStyle( newStyle[ firstSubpath ], [ restPath ], true );\n\t\t} else if ( path.length === 1 ) {\n\t\t\tdelete newStyle[ path[ 0 ] ];\n\t\t}\n\t} );\n\n\treturn newStyle;\n}\n\n/**\n * Override props assigned to save component to inject the CSS variables definition.\n *\n * @param {Object}                    props      Additional props applied to save element.\n * @param {Object}                    blockType  Block type.\n * @param {Object}                    attributes Block attributes.\n * @param {?Record<string, string[]>} skipPaths  An object of keys and paths to skip serialization.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps(\n\tprops,\n\tblockType,\n\tattributes,\n\tskipPaths = skipSerializationPathsSave\n) {\n\tif ( ! hasStyleSupport( blockType ) ) {\n\t\treturn props;\n\t}\n\n\tlet { style } = attributes;\n\tObject.entries( skipPaths ).forEach( ( [ indicator, path ] ) => {\n\t\tconst skipSerialization = getBlockSupport( blockType, indicator );\n\n\t\tif ( skipSerialization === true ) {\n\t\t\tstyle = omitStyle( style, path );\n\t\t}\n\n\t\tif ( Array.isArray( skipSerialization ) ) {\n\t\t\tskipSerialization.forEach( ( featureName ) => {\n\t\t\t\tconst feature = renamedFeatures[ featureName ] || featureName;\n\t\t\t\tstyle = omitStyle( style, [ [ ...path, feature ] ] );\n\t\t\t} );\n\t\t}\n\t} );\n\n\tprops.style = {\n\t\t...getInlineStyles( style ),\n\t\t...props.style,\n\t};\n\n\treturn props;\n}\n\n/**\n * Filters registered block settings to extend the block edit wrapper\n * to apply the desired styles and classnames properly.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object}.Filtered block settings.\n */\nexport function addEditProps( settings ) {\n\tif ( ! hasStyleSupport( settings ) ) {\n\t\treturn settings;\n\t}\n\n\tconst existingGetEditWrapperProps = settings.getEditWrapperProps;\n\tsettings.getEditWrapperProps = ( attributes ) => {\n\t\tlet props = {};\n\t\tif ( existingGetEditWrapperProps ) {\n\t\t\tprops = existingGetEditWrapperProps( attributes );\n\t\t}\n\n\t\treturn addSaveProps(\n\t\t\tprops,\n\t\t\tsettings,\n\t\t\tattributes,\n\t\t\tskipSerializationPathsEdit\n\t\t);\n\t};\n\n\treturn settings;\n}\n\n/**\n * Override the default edit UI to include new inspector controls for\n * all the custom styles configs.\n *\n * @param {Function} BlockEdit Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withBlockControls = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\tconst shouldDisplayControls = useDisplayBlockControls();\n\t\tconst blockEditingMode = useBlockEditingMode();\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ shouldDisplayControls && blockEditingMode === 'default' && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<ColorEdit { ...props } />\n\t\t\t\t\t\t<TypographyPanel { ...props } />\n\t\t\t\t\t\t<BorderPanel { ...props } />\n\t\t\t\t\t\t<DimensionsPanel { ...props } />\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t<BlockEdit { ...props } />\n\t\t\t</>\n\t\t);\n\t},\n\t'withToolbarControls'\n);\n\n/**\n * Override the default block element to include elements styles.\n *\n * @param {Function} BlockListBlock Original component\n * @return {Function}                Wrapped component\n */\nconst withElementsStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst blockElementsContainerIdentifier = `wp-elements-${ useInstanceId(\n\t\t\tBlockListBlock\n\t\t) }`;\n\n\t\tconst skipLinkColorSerialization = shouldSkipSerialization(\n\t\t\tprops.name,\n\t\t\tCOLOR_SUPPORT_KEY,\n\t\t\t'link'\n\t\t);\n\n\t\tconst styles = useMemo( () => {\n\t\t\t// The .editor-styles-wrapper selector is required on elements styles. As it is\n\t\t\t// added to all other editor styles, not providing it causes reset and global\n\t\t\t// styles to override element styles because of higher specificity.\n\t\t\tconst elements = [\n\t\t\t\t{\n\t\t\t\t\tstyles: ! skipLinkColorSerialization\n\t\t\t\t\t\t? props.attributes.style?.elements?.link\n\t\t\t\t\t\t: undefined,\n\t\t\t\t\tselector: `.editor-styles-wrapper .${ blockElementsContainerIdentifier } ${ ELEMENTS.link }`,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tstyles: ! skipLinkColorSerialization\n\t\t\t\t\t\t? props.attributes.style?.elements?.link?.[ ':hover' ]\n\t\t\t\t\t\t: undefined,\n\t\t\t\t\tselector: `.editor-styles-wrapper .${ blockElementsContainerIdentifier } ${ ELEMENTS.link }:hover`,\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst elementCssRules = [];\n\t\t\tfor ( const { styles: elementStyles, selector } of elements ) {\n\t\t\t\tif ( elementStyles ) {\n\t\t\t\t\tconst cssRule = compileCSS( elementStyles, {\n\t\t\t\t\t\tselector,\n\t\t\t\t\t} );\n\t\t\t\t\telementCssRules.push( cssRule );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn elementCssRules.length > 0\n\t\t\t\t? elementCssRules.join( '' )\n\t\t\t\t: undefined;\n\t\t}, [\n\t\t\tprops.attributes.style?.elements,\n\t\t\tblockElementsContainerIdentifier,\n\t\t\tskipLinkColorSerialization,\n\t\t] );\n\n\t\tconst element = useContext( BlockList.__unstableElementContext );\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ styles &&\n\t\t\t\t\telement &&\n\t\t\t\t\tcreatePortal(\n\t\t\t\t\t\t<style\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={ {\n\t\t\t\t\t\t\t\t__html: styles,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>,\n\t\t\t\t\t\telement\n\t\t\t\t\t) }\n\n\t\t\t\t<BlockListBlock\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tprops.attributes.style?.elements\n\t\t\t\t\t\t\t? classnames(\n\t\t\t\t\t\t\t\t\tprops.className,\n\t\t\t\t\t\t\t\t\tblockElementsContainerIdentifier\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: props.className\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t},\n\t'withElementsStyles'\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/style/addAttribute',\n\taddAttribute\n);\n\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/style/addSaveProps',\n\taddSaveProps\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/style/addEditProps',\n\taddEditProps\n);\n\naddFilter(\n\t'editor.BlockEdit',\n\t'core/style/with-block-controls',\n\twithBlockControls\n);\n\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/editor/with-elements-styles',\n\twithElementsStyles\n);\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport } from '@wordpress/blocks';\n\nconst hasSettingsSupport = ( blockType ) =>\n\thasBlockSupport( blockType, '__experimentalSettings', false );\n\nfunction addAttribute( settings ) {\n\tif ( ! hasSettingsSupport( settings ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( ! settings?.attributes?.settings ) {\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tsettings: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t};\n\t}\n\n\treturn settings;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/settings/addAttribute',\n\taddAttribute\n);\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst filter = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12 4 4 19h16L12 4zm0 3.2 5.5 10.3H12V7.2z\" />\n\t</SVG>\n);\n\nexport default filter;\n","/**\n * WordPress dependencies\n */\nimport {\n\tColorIndicator,\n\tDropdown,\n\tDuotonePicker,\n\tDuotoneSwatch,\n\tMenuGroup,\n\tToolbarButton,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { DOWN } from '@wordpress/keycodes';\nimport { Icon, filter } from '@wordpress/icons';\n\nfunction DuotoneControl( {\n\tcolorPalette,\n\tduotonePalette,\n\tdisableCustomColors,\n\tdisableCustomDuotone,\n\tvalue,\n\tonChange,\n} ) {\n\tlet toolbarIcon;\n\tif ( value === 'unset' ) {\n\t\ttoolbarIcon = (\n\t\t\t<ColorIndicator className=\"block-editor-duotone-control__unset-indicator\" />\n\t\t);\n\t} else if ( value ) {\n\t\ttoolbarIcon = <DuotoneSwatch values={ value } />;\n\t} else {\n\t\ttoolbarIcon = <Icon icon={ filter } />;\n\t}\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ {\n\t\t\t\tclassName: 'block-editor-duotone-control__popover',\n\t\t\t\theaderTitle: __( 'Duotone' ),\n\t\t\t\tvariant: 'toolbar',\n\t\t\t} }\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => {\n\t\t\t\tconst openOnArrowDown = ( event ) => {\n\t\t\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tonToggle();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\tonKeyDown={ openOnArrowDown }\n\t\t\t\t\t\tlabel={ __( 'Apply duotone filter' ) }\n\t\t\t\t\t\ticon={ toolbarIcon }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} }\n\t\t\trenderContent={ () => (\n\t\t\t\t<MenuGroup label={ __( 'Duotone' ) }>\n\t\t\t\t\t<div className=\"block-editor-duotone-control__description\">\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Create a two-tone color effect without losing your original image.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t\t<DuotonePicker\n\t\t\t\t\t\tcolorPalette={ colorPalette }\n\t\t\t\t\t\tduotonePalette={ duotonePalette }\n\t\t\t\t\t\tdisableCustomColors={ disableCustomColors }\n\t\t\t\t\t\tdisableCustomDuotone={ disableCustomDuotone }\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t/>\n\t\t\t\t</MenuGroup>\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nexport default DuotoneControl;\n","/**\n * External dependencies\n */\nimport { colord } from 'colord';\n\n/**\n * Convert a list of colors to an object of R, G, and B values.\n *\n * @param {string[]} colors Array of RBG color strings.\n *\n * @return {Object} R, G, and B values.\n */\nexport function getValuesFromColors( colors = [] ) {\n\tconst values = { r: [], g: [], b: [], a: [] };\n\n\tcolors.forEach( ( color ) => {\n\t\tconst rgbColor = colord( color ).toRgb();\n\t\tvalues.r.push( rgbColor.r / 255 );\n\t\tvalues.g.push( rgbColor.g / 255 );\n\t\tvalues.b.push( rgbColor.b / 255 );\n\t\tvalues.a.push( rgbColor.a );\n\t} );\n\n\treturn values;\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { __unstableGetValuesFromColors as getValuesFromColors } from './index';\n\n/**\n * SVG and stylesheet needed for rendering the duotone filter.\n *\n * @param {Object} props          Duotone props.\n * @param {string} props.selector Selector to apply the filter to.\n * @param {string} props.id       Unique id for this duotone filter.\n *\n * @return {WPElement} Duotone element.\n */\nexport function DuotoneStylesheet( { selector, id } ) {\n\tconst css = `\n${ selector } {\n\tfilter: url( #${ id } );\n}\n`;\n\treturn <style>{ css }</style>;\n}\n\n/**\n * Stylesheet for disabling a global styles duotone filter.\n *\n * @param {Object} props          Duotone props.\n * @param {string} props.selector Selector to disable the filter for.\n *\n * @return {WPElement} Filter none style element.\n */\nexport function DuotoneUnsetStylesheet( { selector } ) {\n\tconst css = `\n${ selector } {\n\tfilter: none;\n}\n`;\n\treturn <style>{ css }</style>;\n}\n\n/**\n * The SVG part of the duotone filter.\n *\n * @param {Object}   props        Duotone props.\n * @param {string}   props.id     Unique id for this duotone filter.\n * @param {string[]} props.colors Color strings from dark to light.\n *\n * @return {WPElement} Duotone SVG.\n */\nexport function DuotoneFilter( { id, colors } ) {\n\tconst values = getValuesFromColors( colors );\n\treturn (\n\t\t<SVG\n\t\t\txmlnsXlink=\"http://www.w3.org/1999/xlink\"\n\t\t\tviewBox=\"0 0 0 0\"\n\t\t\twidth=\"0\"\n\t\t\theight=\"0\"\n\t\t\tfocusable=\"false\"\n\t\t\trole=\"none\"\n\t\t\tstyle={ {\n\t\t\t\tvisibility: 'hidden',\n\t\t\t\tposition: 'absolute',\n\t\t\t\tleft: '-9999px',\n\t\t\t\toverflow: 'hidden',\n\t\t\t} }\n\t\t>\n\t\t\t<defs>\n\t\t\t\t<filter id={ id }>\n\t\t\t\t\t<feColorMatrix\n\t\t\t\t\t\t// Use sRGB instead of linearRGB so transparency looks correct.\n\t\t\t\t\t\tcolorInterpolationFilters=\"sRGB\"\n\t\t\t\t\t\ttype=\"matrix\"\n\t\t\t\t\t\t// Use perceptual brightness to convert to grayscale.\n\t\t\t\t\t\tvalues=\"\n\t\t\t\t\t\t\t.299 .587 .114 0 0\n\t\t\t\t\t\t\t.299 .587 .114 0 0\n\t\t\t\t\t\t\t.299 .587 .114 0 0\n\t\t\t\t\t\t\t.299 .587 .114 0 0\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\t\t\t\t\t<feComponentTransfer\n\t\t\t\t\t\t// Use sRGB instead of linearRGB to be consistent with how CSS gradients work.\n\t\t\t\t\t\tcolorInterpolationFilters=\"sRGB\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<feFuncR\n\t\t\t\t\t\t\ttype=\"table\"\n\t\t\t\t\t\t\ttableValues={ values.r.join( ' ' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<feFuncG\n\t\t\t\t\t\t\ttype=\"table\"\n\t\t\t\t\t\t\ttableValues={ values.g.join( ' ' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<feFuncB\n\t\t\t\t\t\t\ttype=\"table\"\n\t\t\t\t\t\t\ttableValues={ values.b.join( ' ' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<feFuncA\n\t\t\t\t\t\t\ttype=\"table\"\n\t\t\t\t\t\t\ttableValues={ values.a.join( ' ' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</feComponentTransfer>\n\t\t\t\t\t<feComposite\n\t\t\t\t\t\t// Re-mask the image with the original transparency since the feColorMatrix above loses that information.\n\t\t\t\t\t\tin2=\"SourceGraphic\"\n\t\t\t\t\t\toperator=\"in\"\n\t\t\t\t\t/>\n\t\t\t\t</filter>\n\t\t\t</defs>\n\t\t</SVG>\n\t);\n}\n\n/**\n * SVG from a duotone preset\n *\n * @param {Object} props        Duotone props.\n * @param {Object} props.preset Duotone preset settings.\n *\n * @return {WPElement} Duotone element.\n */\nexport function PresetDuotoneFilter( { preset } ) {\n\treturn (\n\t\t<DuotoneFilter\n\t\t\tid={ `wp-duotone-${ preset.slug }` }\n\t\t\tcolors={ preset.colors }\n\t\t/>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport { scopeSelector } from './utils';\n\n/**\n * Determine the CSS selector for the block type and target provided, returning\n * it if available.\n *\n * @param {import('@wordpress/blocks').Block} blockType        The block's type.\n * @param {string|string[]}                   target           The desired selector's target e.g. `root`, delimited string, or array path.\n * @param {Object}                            options          Options object.\n * @param {boolean}                           options.fallback Whether or not to fallback to broader selector.\n *\n * @return {?string} The CSS selector or `null` if no selector available.\n */\nexport function getBlockCSSSelector(\n\tblockType,\n\ttarget = 'root',\n\toptions = {}\n) {\n\tif ( ! target ) {\n\t\treturn null;\n\t}\n\n\tconst { fallback = false } = options;\n\tconst { name, selectors, supports } = blockType;\n\n\tconst hasSelectors = selectors && Object.keys( selectors ).length > 0;\n\tconst path = Array.isArray( target ) ? target.join( '.' ) : target;\n\n\t// Root selector.\n\n\t// Calculated before returning as it can be used as a fallback for feature\n\t// selectors later on.\n\tlet rootSelector = null;\n\n\tif ( hasSelectors && selectors.root ) {\n\t\t// Use the selectors API if available.\n\t\trootSelector = selectors?.root;\n\t} else if ( supports?.__experimentalSelector ) {\n\t\t// Use the old experimental selector supports property if set.\n\t\trootSelector = supports.__experimentalSelector;\n\t} else {\n\t\t// If no root selector found, generate default block class selector.\n\t\trootSelector =\n\t\t\t'.wp-block-' + name.replace( 'core/', '' ).replace( '/', '-' );\n\t}\n\n\t// Return selector if it's the root target we are looking for.\n\tif ( path === 'root' ) {\n\t\treturn rootSelector;\n\t}\n\n\t// If target is not `root` or `duotone` we have a feature or subfeature\n\t// as the target. If the target is a string convert to an array.\n\tconst pathArray = Array.isArray( target ) ? target : target.split( '.' );\n\n\t// Feature selectors ( may fallback to root selector );\n\tif ( pathArray.length === 1 ) {\n\t\tconst fallbackSelector = fallback ? rootSelector : null;\n\n\t\t// Prefer the selectors API if available.\n\t\tif ( hasSelectors ) {\n\t\t\t// Get selector from either `feature.root` or shorthand path.\n\t\t\tconst featureSelector =\n\t\t\t\tget( selectors, `${ path }.root`, null ) ||\n\t\t\t\tget( selectors, path, null );\n\n\t\t\t// Return feature selector if found or any available fallback.\n\t\t\treturn featureSelector || fallbackSelector;\n\t\t}\n\n\t\t// Try getting old experimental supports selector value.\n\t\tconst featureSelector = get(\n\t\t\tsupports,\n\t\t\t`${ path }.__experimentalSelector`,\n\t\t\tnull\n\t\t);\n\n\t\t// If nothing to work with, provide fallback selector if available.\n\t\tif ( ! featureSelector ) {\n\t\t\treturn fallbackSelector;\n\t\t}\n\n\t\t// Scope the feature selector by the block's root selector.\n\t\treturn scopeSelector( rootSelector, featureSelector );\n\t}\n\n\t// Subfeature selector.\n\t// This may fallback either to parent feature or root selector.\n\tlet subfeatureSelector;\n\n\t// Use selectors API if available.\n\tif ( hasSelectors ) {\n\t\tsubfeatureSelector = get( selectors, path, null );\n\t}\n\n\t// Only return if we have a subfeature selector.\n\tif ( subfeatureSelector ) {\n\t\treturn subfeatureSelector;\n\t}\n\n\t// To this point we don't have a subfeature selector. If a fallback has been\n\t// requested, remove subfeature from target path and return results of a\n\t// call for the parent feature's selector.\n\tif ( fallback ) {\n\t\treturn getBlockCSSSelector( blockType, pathArray[ 0 ], options );\n\t}\n\n\t// We tried.\n\treturn null;\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalHStack as HStack,\n\t__experimentalZStack as ZStack,\n\t__experimentalVStack as VStack,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\tButton,\n\tColorIndicator,\n\tDuotonePicker,\n\tDuotoneSwatch,\n\tDropdown,\n\tFlex,\n\tFlexItem,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useCallback, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromVariable } from './utils';\nimport { setImmutably } from '../../utils/object';\n\nconst EMPTY_ARRAY = [];\nfunction useMultiOriginColorPresets(\n\tsettings,\n\t{ presetSetting, defaultSetting }\n) {\n\tconst disableDefault = ! settings?.color?.[ defaultSetting ];\n\tconst userPresets =\n\t\tsettings?.color?.[ presetSetting ]?.custom || EMPTY_ARRAY;\n\tconst themePresets =\n\t\tsettings?.color?.[ presetSetting ]?.theme || EMPTY_ARRAY;\n\tconst defaultPresets =\n\t\tsettings?.color?.[ presetSetting ]?.default || EMPTY_ARRAY;\n\treturn useMemo(\n\t\t() => [\n\t\t\t...userPresets,\n\t\t\t...themePresets,\n\t\t\t...( disableDefault ? EMPTY_ARRAY : defaultPresets ),\n\t\t],\n\t\t[ disableDefault, userPresets, themePresets, defaultPresets ]\n\t);\n}\n\nexport function useHasFiltersPanel( settings ) {\n\tconst hasDuotone = useHasDuotoneControl( settings );\n\n\treturn hasDuotone;\n}\n\nfunction useHasDuotoneControl( settings ) {\n\treturn settings.color.customDuotone || settings.color.defaultDuotone;\n}\n\nfunction FiltersToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Filters' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tduotone: true,\n};\n\nconst popoverProps = {\n\tplacement: 'left-start',\n\toffset: 36,\n\tshift: true,\n\tclassName: 'block-editor-duotone-control__popover',\n\theaderTitle: __( 'Duotone' ),\n};\n\nconst LabeledColorIndicator = ( { indicator, label } ) => (\n\t<HStack justify=\"flex-start\">\n\t\t<ZStack isLayered={ false } offset={ -8 }>\n\t\t\t<Flex expanded={ false }>\n\t\t\t\t{ indicator === 'unset' || ! indicator ? (\n\t\t\t\t\t<ColorIndicator className=\"block-editor-duotone-control__unset-indicator\" />\n\t\t\t\t) : (\n\t\t\t\t\t<DuotoneSwatch values={ indicator } />\n\t\t\t\t) }\n\t\t\t</Flex>\n\t\t</ZStack>\n\t\t<FlexItem title={ label }>{ label }</FlexItem>\n\t</HStack>\n);\n\nexport default function FiltersPanel( {\n\tas: Wrapper = FiltersToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n} ) {\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\n\t// Duotone\n\tconst hasDuotoneEnabled = useHasDuotoneControl( settings );\n\tconst duotonePalette = useMultiOriginColorPresets( settings, {\n\t\tpresetSetting: 'duotone',\n\t\tdefaultSetting: 'defaultDuotone',\n\t} );\n\tconst colorPalette = useMultiOriginColorPresets( settings, {\n\t\tpresetSetting: 'palette',\n\t\tdefaultSetting: 'defaultPalette',\n\t} );\n\tconst duotone = decodeValue( inheritedValue?.filter?.duotone );\n\tconst setDuotone = ( newValue ) => {\n\t\tconst duotonePreset = duotonePalette.find( ( { colors } ) => {\n\t\t\treturn colors === newValue;\n\t\t} );\n\t\tconst settedValue = duotonePreset\n\t\t\t? `var:preset|duotone|${ duotonePreset.slug }`\n\t\t\t: newValue;\n\t\tonChange( setImmutably( value, [ 'filter', 'duotone' ], settedValue ) );\n\t};\n\tconst hasDuotone = () => !! value?.filter?.duotone;\n\tconst resetDuotone = () => setDuotone( undefined );\n\n\tconst disableCustomColors = ! settings?.color?.custom;\n\tconst disableCustomDuotone =\n\t\t! settings?.color?.customDuotone ||\n\t\t( colorPalette?.length === 0 && disableCustomColors );\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tfilter: {\n\t\t\t\t...previousValue.filter,\n\t\t\t\tduotone: undefined,\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ hasDuotoneEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Duotone' ) }\n\t\t\t\t\thasValue={ hasDuotone }\n\t\t\t\t\tonDeselect={ resetDuotone }\n\t\t\t\t\tisShownByDefault={ defaultControls.duotone }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\tpopoverProps={ popoverProps }\n\t\t\t\t\t\tclassName=\"block-editor-global-styles-filters-panel__dropdown\"\n\t\t\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\t\t\t\tconst toggleProps = {\n\t\t\t\t\t\t\t\tonClick: onToggle,\n\t\t\t\t\t\t\t\tclassName: classnames( { 'is-open': isOpen } ),\n\t\t\t\t\t\t\t\t'aria-expanded': isOpen,\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<ItemGroup isBordered isSeparated>\n\t\t\t\t\t\t\t\t\t<Button { ...toggleProps }>\n\t\t\t\t\t\t\t\t\t\t<LabeledColorIndicator\n\t\t\t\t\t\t\t\t\t\t\tindicator={ duotone }\n\t\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Duotone' ) }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</ItemGroup>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t\trenderContent={ () => (\n\t\t\t\t\t\t\t<DropdownContentWrapper paddingSize=\"medium\">\n\t\t\t\t\t\t\t\t<VStack>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t'Create a two-tone color effect without losing your original image.'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<DuotonePicker\n\t\t\t\t\t\t\t\t\t\tcolorPalette={ colorPalette }\n\t\t\t\t\t\t\t\t\t\tduotonePalette={ duotonePalette }\n\t\t\t\t\t\t\t\t\t\tdisableCustomColors={\n\t\t\t\t\t\t\t\t\t\t\tdisableCustomColors\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdisableCustomDuotone={\n\t\t\t\t\t\t\t\t\t\t\tdisableCustomDuotone\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tvalue={ duotone }\n\t\t\t\t\t\t\t\t\t\tonChange={ setDuotone }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</VStack>\n\t\t\t\t\t\t\t</DropdownContentWrapper>\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tgetBlockSupport,\n\tgetBlockType,\n\thasBlockSupport,\n} from '@wordpress/blocks';\nimport { createHigherOrderComponent, useInstanceId } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport { useMemo, useContext, createPortal } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport {\n\tBlockControls,\n\tInspectorControls,\n\t__experimentalDuotoneControl as DuotoneControl,\n\tuseSetting,\n} from '../components';\nimport BlockList from '../components/block-list';\nimport {\n\t__unstableDuotoneFilter as DuotoneFilter,\n\t__unstableDuotoneStylesheet as DuotoneStylesheet,\n\t__unstableDuotoneUnsetStylesheet as DuotoneUnsetStylesheet,\n} from '../components/duotone';\nimport { getBlockCSSSelector } from '../components/global-styles/get-block-css-selector';\nimport { scopeSelector } from '../components/global-styles/utils';\nimport { useBlockSettings } from './utils';\nimport { default as StylesFiltersPanel } from '../components/global-styles/filters-panel';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\nconst EMPTY_ARRAY = [];\n\nextend( [ namesPlugin ] );\n\n/**\n * SVG and stylesheet needed for rendering the duotone filter.\n *\n * @param {Object}           props          Duotone props.\n * @param {string}           props.selector Selector to apply the filter to.\n * @param {string}           props.id       Unique id for this duotone filter.\n * @param {string[]|\"unset\"} props.colors   Array of RGB color strings ordered from dark to light.\n *\n * @return {WPElement} Duotone element.\n */\nfunction InlineDuotone( { selector, id, colors } ) {\n\tif ( colors === 'unset' ) {\n\t\treturn <DuotoneUnsetStylesheet selector={ selector } />;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<DuotoneFilter id={ id } colors={ colors } />\n\t\t\t<DuotoneStylesheet id={ id } selector={ selector } />\n\t\t</>\n\t);\n}\n\nfunction useMultiOriginPresets( { presetSetting, defaultSetting } ) {\n\tconst disableDefault = ! useSetting( defaultSetting );\n\tconst userPresets =\n\t\tuseSetting( `${ presetSetting }.custom` ) || EMPTY_ARRAY;\n\tconst themePresets =\n\t\tuseSetting( `${ presetSetting }.theme` ) || EMPTY_ARRAY;\n\tconst defaultPresets =\n\t\tuseSetting( `${ presetSetting }.default` ) || EMPTY_ARRAY;\n\treturn useMemo(\n\t\t() => [\n\t\t\t...userPresets,\n\t\t\t...themePresets,\n\t\t\t...( disableDefault ? EMPTY_ARRAY : defaultPresets ),\n\t\t],\n\t\t[ disableDefault, userPresets, themePresets, defaultPresets ]\n\t);\n}\n\nexport function getColorsFromDuotonePreset( duotone, duotonePalette ) {\n\tif ( ! duotone ) {\n\t\treturn;\n\t}\n\tconst preset = duotonePalette?.find( ( { slug } ) => {\n\t\treturn duotone === `var:preset|duotone|${ slug }`;\n\t} );\n\n\treturn preset ? preset.colors : undefined;\n}\n\nexport function getDuotonePresetFromColors( colors, duotonePalette ) {\n\tif ( ! colors || ! Array.isArray( colors ) ) {\n\t\treturn;\n\t}\n\n\tconst preset = duotonePalette?.find( ( duotonePreset ) => {\n\t\treturn duotonePreset?.colors?.every(\n\t\t\t( val, index ) => val === colors[ index ]\n\t\t);\n\t} );\n\n\treturn preset ? `var:preset|duotone|${ preset.slug }` : undefined;\n}\n\nfunction DuotonePanel( { attributes, setAttributes, name } ) {\n\tconst style = attributes?.style;\n\tconst duotoneStyle = style?.color?.duotone;\n\tconst settings = useBlockSettings( name );\n\n\tconst duotonePalette = useMultiOriginPresets( {\n\t\tpresetSetting: 'color.duotone',\n\t\tdefaultSetting: 'color.defaultDuotone',\n\t} );\n\tconst colorPalette = useMultiOriginPresets( {\n\t\tpresetSetting: 'color.palette',\n\t\tdefaultSetting: 'color.defaultPalette',\n\t} );\n\tconst disableCustomColors = ! useSetting( 'color.custom' );\n\tconst disableCustomDuotone =\n\t\t! useSetting( 'color.customDuotone' ) ||\n\t\t( colorPalette?.length === 0 && disableCustomColors );\n\n\tif ( duotonePalette?.length === 0 && disableCustomDuotone ) {\n\t\treturn null;\n\t}\n\n\tconst duotonePresetOrColors = ! Array.isArray( duotoneStyle )\n\t\t? getColorsFromDuotonePreset( duotoneStyle, duotonePalette )\n\t\t: duotoneStyle;\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls group=\"filter\">\n\t\t\t\t<StylesFiltersPanel\n\t\t\t\t\tvalue={ { filter: { duotone: duotonePresetOrColors } } }\n\t\t\t\t\tonChange={ ( newDuotone ) => {\n\t\t\t\t\t\tconst newStyle = {\n\t\t\t\t\t\t\t...style,\n\t\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t\t...newDuotone?.filter,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsetAttributes( { style: newStyle } );\n\t\t\t\t\t} }\n\t\t\t\t\tsettings={ settings }\n\t\t\t\t/>\n\t\t\t</InspectorControls>\n\t\t\t<BlockControls group=\"block\" __experimentalShareWithChildBlocks>\n\t\t\t\t<DuotoneControl\n\t\t\t\t\tduotonePalette={ duotonePalette }\n\t\t\t\t\tcolorPalette={ colorPalette }\n\t\t\t\t\tdisableCustomDuotone={ disableCustomDuotone }\n\t\t\t\t\tdisableCustomColors={ disableCustomColors }\n\t\t\t\t\tvalue={ duotonePresetOrColors }\n\t\t\t\t\tonChange={ ( newDuotone ) => {\n\t\t\t\t\t\tconst maybePreset = getDuotonePresetFromColors(\n\t\t\t\t\t\t\tnewDuotone,\n\t\t\t\t\t\t\tduotonePalette\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst newStyle = {\n\t\t\t\t\t\t\t...style,\n\t\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t\t...style?.color,\n\t\t\t\t\t\t\t\tduotone: maybePreset ?? newDuotone, // use preset or fallback to custom colors.\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsetAttributes( { style: newStyle } );\n\t\t\t\t\t} }\n\t\t\t\t\tsettings={ settings }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t</>\n\t);\n}\n\n/**\n * Filters registered block settings, extending attributes to include\n * the `duotone` attribute.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addDuotoneAttributes( settings ) {\n\t// Previous `color.__experimentalDuotone` support flag is migrated via\n\t// block_type_metadata_settings filter in `lib/block-supports/duotone.php`.\n\tif ( ! hasBlockSupport( settings, 'filter.duotone' ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify their own attribute definition with default\n\t// values if needed.\n\tif ( ! settings.attributes.style ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tstyle: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override the default edit UI to include toolbar controls for duotone if the\n * block supports duotone.\n *\n * @param {Function} BlockEdit Original component.\n *\n * @return {Function} Wrapped component.\n */\nconst withDuotoneControls = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\t// Previous `color.__experimentalDuotone` support flag is migrated via\n\t\t// block_type_metadata_settings filter in `lib/block-supports/duotone.php`.\n\t\tconst hasDuotoneSupport = hasBlockSupport(\n\t\t\tprops.name,\n\t\t\t'filter.duotone'\n\t\t);\n\n\t\tconst blockEditingMode = useBlockEditingMode();\n\n\t\t// CAUTION: code added before this line will be executed\n\t\t// for all blocks, not just those that support duotone. Code added\n\t\t// above this line should be carefully evaluated for its impact on\n\t\t// performance.\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ hasDuotoneSupport && blockEditingMode === 'default' && (\n\t\t\t\t\t<DuotonePanel { ...props } />\n\t\t\t\t) }\n\t\t\t\t<BlockEdit { ...props } />\n\t\t\t</>\n\t\t);\n\t},\n\t'withDuotoneControls'\n);\n\nfunction DuotoneStyles( {\n\tid: filterId,\n\tselector: duotoneSelector,\n\tattribute: duotoneAttr,\n} ) {\n\tconst element = useContext( BlockList.__unstableElementContext );\n\n\tconst duotonePalette = useMultiOriginPresets( {\n\t\tpresetSetting: 'color.duotone',\n\t\tdefaultSetting: 'color.defaultDuotone',\n\t} );\n\n\t// Possible values for duotone attribute:\n\t// 1. Array of colors - e.g. ['#000000', '#ffffff'].\n\t// 2. Variable for an existing Duotone preset - e.g. 'var:preset|duotone|green-blue' or 'var(--wp--preset--duotone--green-blue)''\n\t// 3. A CSS string - e.g. 'unset' to remove globally applied duotone.\n\tconst isCustom = Array.isArray( duotoneAttr );\n\tconst duotonePreset = isCustom\n\t\t? undefined\n\t\t: getColorsFromDuotonePreset( duotoneAttr, duotonePalette );\n\tconst isPreset = typeof duotoneAttr === 'string' && duotonePreset;\n\tconst isCSS = typeof duotoneAttr === 'string' && ! isPreset;\n\n\t// Match the structure of WP_Duotone_Gutenberg::render_duotone_support() in PHP.\n\tlet colors = null;\n\tif ( isPreset ) {\n\t\t// Array of colors.\n\t\tcolors = duotonePreset;\n\t} else if ( isCSS ) {\n\t\t// CSS filter property string (e.g. 'unset').\n\t\tcolors = duotoneAttr;\n\t} else if ( isCustom ) {\n\t\t// Array of colors.\n\t\tcolors = duotoneAttr;\n\t}\n\n\t// Build the CSS selectors to which the filter will be applied.\n\tconst selectors = duotoneSelector.split( ',' );\n\n\tconst selectorsScoped = selectors.map( ( selectorPart ) => {\n\t\t// Extra .editor-styles-wrapper specificity is needed in the editor\n\t\t// since we're not using inline styles to apply the filter. We need to\n\t\t// override duotone applied by global styles and theme.json.\n\n\t\t// Assuming the selector part is a subclass selector (not a tag name)\n\t\t// so we can prepend the filter id class. If we want to support elements\n\t\t// such as `img` or namespaces, we'll need to add a case for that here.\n\t\treturn `.editor-styles-wrapper .${ filterId }${ selectorPart.trim() }`;\n\t} );\n\n\tconst selector = selectorsScoped.join( ', ' );\n\n\tconst isValidFilter = Array.isArray( colors ) || colors === 'unset';\n\n\treturn (\n\t\telement &&\n\t\tisValidFilter &&\n\t\tcreatePortal(\n\t\t\t<InlineDuotone\n\t\t\t\tselector={ selector }\n\t\t\t\tid={ filterId }\n\t\t\t\tcolors={ colors }\n\t\t\t/>,\n\t\t\telement\n\t\t)\n\t);\n}\n\n/**\n * Override the default block element to include duotone styles.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nconst withDuotoneStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst id = useInstanceId( BlockListBlock );\n\n\t\tconst selector = useMemo( () => {\n\t\t\tconst blockType = getBlockType( props.name );\n\n\t\t\tif ( blockType ) {\n\t\t\t\t// Backwards compatibility for `supports.color.__experimentalDuotone`\n\t\t\t\t// is provided via the `block_type_metadata_settings` filter. If\n\t\t\t\t// `supports.filter.duotone` has not been set and the\n\t\t\t\t// experimental property has been, the experimental property\n\t\t\t\t// value is copied into `supports.filter.duotone`.\n\t\t\t\tconst duotoneSupport = getBlockSupport(\n\t\t\t\t\tblockType,\n\t\t\t\t\t'filter.duotone',\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tif ( ! duotoneSupport ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\t// If the experimental duotone support was set, that value is\n\t\t\t\t// to be treated as a selector and requires scoping.\n\t\t\t\tconst experimentalDuotone = getBlockSupport(\n\t\t\t\t\tblockType,\n\t\t\t\t\t'color.__experimentalDuotone',\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tif ( experimentalDuotone ) {\n\t\t\t\t\tconst rootSelector = getBlockCSSSelector( blockType );\n\t\t\t\t\treturn typeof experimentalDuotone === 'string'\n\t\t\t\t\t\t? scopeSelector( rootSelector, experimentalDuotone )\n\t\t\t\t\t\t: rootSelector;\n\t\t\t\t}\n\n\t\t\t\t// Regular filter.duotone support uses filter.duotone selectors with fallbacks.\n\t\t\t\treturn getBlockCSSSelector( blockType, 'filter.duotone', {\n\t\t\t\t\tfallback: true,\n\t\t\t\t} );\n\t\t\t}\n\t\t}, [ props.name ] );\n\n\t\tconst attribute = props?.attributes?.style?.color?.duotone;\n\n\t\tconst filterClass = `wp-duotone-${ id }`;\n\n\t\tconst shouldRender = selector && attribute;\n\n\t\tconst className = shouldRender\n\t\t\t? classnames( props?.className, filterClass )\n\t\t\t: props?.className;\n\n\t\t// CAUTION: code added before this line will be executed\n\t\t// for all blocks, not just those that support duotone. Code added\n\t\t// above this line should be carefully evaluated for its impact on\n\t\t// performance.\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ shouldRender && (\n\t\t\t\t\t<DuotoneStyles\n\t\t\t\t\t\tid={ filterClass }\n\t\t\t\t\t\tselector={ selector }\n\t\t\t\t\t\tattribute={ attribute }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<BlockListBlock { ...props } className={ className } />\n\t\t\t</>\n\t\t);\n\t},\n\t'withDuotoneStyles'\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/editor/duotone/add-attributes',\n\taddDuotoneAttributes\n);\naddFilter(\n\t'editor.BlockEdit',\n\t'core/editor/duotone/with-editor-controls',\n\twithDuotoneControls\n);\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/editor/duotone/with-styles',\n\twithDuotoneStyles\n);\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { kebabCase } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent, useInstanceId } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tButton,\n\tButtonGroup,\n\tToggleControl,\n\tPanelBody,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useContext, createPortal } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { InspectorControls } from '../components';\nimport useSetting from '../components/use-setting';\nimport { LayoutStyle } from '../components/block-list/layout';\nimport BlockList from '../components/block-list';\nimport { getLayoutType, getLayoutTypes } from '../layouts';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\nconst layoutBlockSupportKey = '__experimentalLayout';\n\n/**\n * Generates the utility classnames for the given block's layout attributes.\n *\n * @param { Object } blockAttributes Block attributes.\n * @param { string } blockName       Block name.\n *\n * @return { Array } Array of CSS classname strings.\n */\nexport function useLayoutClasses( blockAttributes = {}, blockName = '' ) {\n\tconst rootPaddingAlignment = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn getSettings().__experimentalFeatures\n\t\t\t?.useRootPaddingAwareAlignments;\n\t}, [] );\n\tconst globalLayoutSettings = useSetting( 'layout' ) || {};\n\n\tconst { layout } = blockAttributes;\n\n\tconst { default: defaultBlockLayout } =\n\t\tgetBlockSupport( blockName, layoutBlockSupportKey ) || {};\n\tconst usedLayout =\n\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t: layout || defaultBlockLayout || {};\n\n\tconst layoutClassnames = [];\n\n\tif (\n\t\tglobalLayoutSettings?.definitions?.[ usedLayout?.type || 'default' ]\n\t\t\t?.className\n\t) {\n\t\tconst baseClassName =\n\t\t\tglobalLayoutSettings?.definitions?.[ usedLayout?.type || 'default' ]\n\t\t\t\t?.className;\n\t\tconst compoundClassName = `wp-block-${ blockName\n\t\t\t.split( '/' )\n\t\t\t.pop() }-${ baseClassName }`;\n\t\tlayoutClassnames.push( baseClassName, compoundClassName );\n\t}\n\n\tif (\n\t\t( usedLayout?.inherit ||\n\t\t\tusedLayout?.contentSize ||\n\t\t\tusedLayout?.type === 'constrained' ) &&\n\t\trootPaddingAlignment\n\t) {\n\t\tlayoutClassnames.push( 'has-global-padding' );\n\t}\n\n\tif ( usedLayout?.orientation ) {\n\t\tlayoutClassnames.push( `is-${ kebabCase( usedLayout.orientation ) }` );\n\t}\n\n\tif ( usedLayout?.justifyContent ) {\n\t\tlayoutClassnames.push(\n\t\t\t`is-content-justification-${ kebabCase(\n\t\t\t\tusedLayout.justifyContent\n\t\t\t) }`\n\t\t);\n\t}\n\n\tif ( usedLayout?.flexWrap && usedLayout.flexWrap === 'nowrap' ) {\n\t\tlayoutClassnames.push( 'is-nowrap' );\n\t}\n\n\treturn layoutClassnames;\n}\n\n/**\n * Generates a CSS rule with the given block's layout styles.\n *\n * @param { Object } blockAttributes Block attributes.\n * @param { string } blockName       Block name.\n * @param { string } selector        A selector to use in generating the CSS rule.\n *\n * @return { string } CSS rule.\n */\nexport function useLayoutStyles( blockAttributes = {}, blockName, selector ) {\n\tconst { layout = {}, style = {} } = blockAttributes;\n\t// Update type for blocks using legacy layouts.\n\tconst usedLayout =\n\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t: layout || {};\n\tconst fullLayoutType = getLayoutType( usedLayout?.type || 'default' );\n\tconst globalLayoutSettings = useSetting( 'layout' ) || {};\n\tconst blockGapSupport = useSetting( 'spacing.blockGap' );\n\tconst hasBlockGapSupport = blockGapSupport !== null;\n\tconst css = fullLayoutType?.getLayoutStyle?.( {\n\t\tblockName,\n\t\tselector,\n\t\tlayout,\n\t\tlayoutDefinitions: globalLayoutSettings?.definitions,\n\t\tstyle,\n\t\thasBlockGapSupport,\n\t} );\n\treturn css;\n}\n\nfunction LayoutPanel( { setAttributes, attributes, name: blockName } ) {\n\tconst { layout } = attributes;\n\tconst defaultThemeLayout = useSetting( 'layout' );\n\tconst { themeSupportsLayout } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn {\n\t\t\tthemeSupportsLayout: getSettings().supportsLayout,\n\t\t};\n\t}, [] );\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tconst layoutBlockSupport = getBlockSupport(\n\t\tblockName,\n\t\tlayoutBlockSupportKey,\n\t\t{}\n\t);\n\tconst {\n\t\tallowSwitching,\n\t\tallowEditing = true,\n\t\tallowInheriting = true,\n\t\tdefault: defaultBlockLayout,\n\t} = layoutBlockSupport;\n\n\tif ( ! allowEditing ) {\n\t\treturn null;\n\t}\n\n\t// Only show the inherit toggle if it's supported,\n\t// a default theme layout is set (e.g. one that provides `contentSize` and/or `wideSize` values),\n\t// and either the default / flow or the constrained layout type is in use, as the toggle switches from one to the other.\n\tconst showInheritToggle = !! (\n\t\tallowInheriting &&\n\t\t!! defaultThemeLayout &&\n\t\t( ! layout?.type ||\n\t\t\tlayout?.type === 'default' ||\n\t\t\tlayout?.type === 'constrained' ||\n\t\t\tlayout?.inherit )\n\t);\n\n\tconst usedLayout = layout || defaultBlockLayout || {};\n\tconst {\n\t\tinherit = false,\n\t\ttype = 'default',\n\t\tcontentSize = null,\n\t} = usedLayout;\n\t/**\n\t * `themeSupportsLayout` is only relevant to the `default/flow` or\n\t * `constrained` layouts and it should not be taken into account when other\n\t * `layout` types are used.\n\t */\n\tif (\n\t\t( type === 'default' || type === 'constrained' ) &&\n\t\t! themeSupportsLayout\n\t) {\n\t\treturn null;\n\t}\n\tconst layoutType = getLayoutType( type );\n\tconst constrainedType = getLayoutType( 'constrained' );\n\tconst displayControlsForLegacyLayouts =\n\t\t! usedLayout.type && ( contentSize || inherit );\n\tconst hasContentSizeOrLegacySettings = !! inherit || !! contentSize;\n\n\tconst onChangeType = ( newType ) =>\n\t\tsetAttributes( { layout: { type: newType } } );\n\tconst onChangeLayout = ( newLayout ) =>\n\t\tsetAttributes( { layout: newLayout } );\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Layout' ) }>\n\t\t\t\t\t{ showInheritToggle && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tclassName=\"block-editor-hooks__toggle-control\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Inner blocks use content width' ) }\n\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\tlayoutType?.name === 'constrained' ||\n\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\t\t\t\t\tlayoutType?.name ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t'constrained' ||\n\t\t\t\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'constrained',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\t\tlayoutType?.name === 'constrained' ||\n\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Nested blocks use content width with options for full and wide widths.'\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Nested blocks will fill the width of this container. Toggle to constrain.'\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ ! inherit && allowSwitching && (\n\t\t\t\t\t\t<LayoutTypeSwitcher\n\t\t\t\t\t\t\ttype={ type }\n\t\t\t\t\t\t\tonChange={ onChangeType }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ layoutType && layoutType.name !== 'default' && (\n\t\t\t\t\t\t<layoutType.inspectorControls\n\t\t\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\t\t\tlayoutBlockSupport={ layoutBlockSupport }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ constrainedType && displayControlsForLegacyLayouts && (\n\t\t\t\t\t\t<constrainedType.inspectorControls\n\t\t\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\t\t\tlayoutBlockSupport={ layoutBlockSupport }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t{ ! inherit && blockEditingMode === 'default' && layoutType && (\n\t\t\t\t<layoutType.toolBarControls\n\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\tlayoutBlockSupport={ layoutBlockSupport }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nfunction LayoutTypeSwitcher( { type, onChange } ) {\n\treturn (\n\t\t<ButtonGroup>\n\t\t\t{ getLayoutTypes().map( ( { name, label } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tkey={ name }\n\t\t\t\t\t\tisPressed={ type === name }\n\t\t\t\t\t\tonClick={ () => onChange( name ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ label }\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ButtonGroup>\n\t);\n}\n\n/**\n * Filters registered block settings, extending attributes to include `layout`.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\tif ( 'type' in ( settings.attributes?.layout ?? {} ) ) {\n\t\treturn settings;\n\t}\n\tif ( hasBlockSupport( settings, layoutBlockSupportKey ) ) {\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tlayout: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t};\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override the default edit UI to include layout controls\n *\n * @param {Function} BlockEdit Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withInspectorControls = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\tconst { name: blockName } = props;\n\t\tconst supportLayout = hasBlockSupport(\n\t\t\tblockName,\n\t\t\tlayoutBlockSupportKey\n\t\t);\n\n\t\tconst blockEditingMode = useBlockEditingMode();\n\t\treturn [\n\t\t\tsupportLayout && blockEditingMode === 'default' && (\n\t\t\t\t<LayoutPanel key=\"layout\" { ...props } />\n\t\t\t),\n\t\t\t<BlockEdit key=\"edit\" { ...props } />,\n\t\t];\n\t},\n\t'withInspectorControls'\n);\n\n/**\n * Override the default block element to add the layout styles.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withLayoutStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst { name, attributes } = props;\n\t\tconst hasLayoutBlockSupport = hasBlockSupport(\n\t\t\tname,\n\t\t\tlayoutBlockSupportKey\n\t\t);\n\t\tconst disableLayoutStyles = useSelect( ( select ) => {\n\t\t\tconst { getSettings } = select( blockEditorStore );\n\t\t\treturn !! getSettings().disableLayoutStyles;\n\t\t} );\n\t\tconst shouldRenderLayoutStyles =\n\t\t\thasLayoutBlockSupport && ! disableLayoutStyles;\n\t\tconst id = useInstanceId( BlockListBlock );\n\t\tconst defaultThemeLayout = useSetting( 'layout' ) || {};\n\t\tconst element = useContext( BlockList.__unstableElementContext );\n\t\tconst { layout } = attributes;\n\t\tconst { default: defaultBlockLayout } =\n\t\t\tgetBlockSupport( name, layoutBlockSupportKey ) || {};\n\t\tconst usedLayout =\n\t\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t\t: layout || defaultBlockLayout || {};\n\t\tconst layoutClasses = hasLayoutBlockSupport\n\t\t\t? useLayoutClasses( attributes, name )\n\t\t\t: null;\n\t\t// Higher specificity to override defaults from theme.json.\n\t\tconst selector = `.wp-container-${ id }.wp-container-${ id }`;\n\t\tconst blockGapSupport = useSetting( 'spacing.blockGap' );\n\t\tconst hasBlockGapSupport = blockGapSupport !== null;\n\n\t\t// Get CSS string for the current layout type.\n\t\t// The CSS and `style` element is only output if it is not empty.\n\t\tlet css;\n\t\tif ( shouldRenderLayoutStyles ) {\n\t\t\tconst fullLayoutType = getLayoutType(\n\t\t\t\tusedLayout?.type || 'default'\n\t\t\t);\n\t\t\tcss = fullLayoutType?.getLayoutStyle?.( {\n\t\t\t\tblockName: name,\n\t\t\t\tselector,\n\t\t\t\tlayout: usedLayout,\n\t\t\t\tlayoutDefinitions: defaultThemeLayout?.definitions,\n\t\t\t\tstyle: attributes?.style,\n\t\t\t\thasBlockGapSupport,\n\t\t\t} );\n\t\t}\n\n\t\t// Attach a `wp-container-` id-based class name as well as a layout class name such as `is-layout-flex`.\n\t\tconst layoutClassNames = classnames(\n\t\t\t{\n\t\t\t\t[ `wp-container-${ id }` ]: shouldRenderLayoutStyles && !! css, // Only attach a container class if there is generated CSS to be attached.\n\t\t\t},\n\t\t\tlayoutClasses\n\t\t);\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ shouldRenderLayoutStyles &&\n\t\t\t\t\telement &&\n\t\t\t\t\t!! css &&\n\t\t\t\t\tcreatePortal(\n\t\t\t\t\t\t<LayoutStyle\n\t\t\t\t\t\t\tblockName={ name }\n\t\t\t\t\t\t\tselector={ selector }\n\t\t\t\t\t\t\tcss={ css }\n\t\t\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\t\t\tstyle={ attributes?.style }\n\t\t\t\t\t\t/>,\n\t\t\t\t\t\telement\n\t\t\t\t\t) }\n\t\t\t\t<BlockListBlock\n\t\t\t\t\t{ ...props }\n\t\t\t\t\t__unstableLayoutClassNames={ layoutClassNames }\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t},\n\t'withLayoutStyles'\n);\n\n/**\n * Override the default block element to add the child layout styles.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withChildLayoutStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst { attributes } = props;\n\t\tconst { style: { layout = {} } = {} } = attributes;\n\t\tconst { selfStretch, flexSize } = layout;\n\t\tconst hasChildLayout = selfStretch || flexSize;\n\t\tconst disableLayoutStyles = useSelect( ( select ) => {\n\t\t\tconst { getSettings } = select( blockEditorStore );\n\t\t\treturn !! getSettings().disableLayoutStyles;\n\t\t} );\n\t\tconst shouldRenderChildLayoutStyles =\n\t\t\thasChildLayout && ! disableLayoutStyles;\n\n\t\tconst element = useContext( BlockList.__unstableElementContext );\n\t\tconst id = useInstanceId( BlockListBlock );\n\t\tconst selector = `.wp-container-content-${ id }`;\n\n\t\tlet css = '';\n\n\t\tif ( selfStretch === 'fixed' && flexSize ) {\n\t\t\tcss += `${ selector } {\n\t\t\t\tflex-basis: ${ flexSize };\n\t\t\t\tbox-sizing: border-box;\n\t\t\t}`;\n\t\t} else if ( selfStretch === 'fill' ) {\n\t\t\tcss += `${ selector } {\n\t\t\t\tflex-grow: 1;\n\t\t\t}`;\n\t\t}\n\n\t\t// Attach a `wp-container-content` id-based classname.\n\t\tconst className = classnames( props?.className, {\n\t\t\t[ `wp-container-content-${ id }` ]:\n\t\t\t\tshouldRenderChildLayoutStyles && !! css, // Only attach a container class if there is generated CSS to be attached.\n\t\t} );\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ shouldRenderChildLayoutStyles &&\n\t\t\t\t\telement &&\n\t\t\t\t\t!! css &&\n\t\t\t\t\tcreatePortal( <style>{ css }</style>, element ) }\n\t\t\t\t<BlockListBlock { ...props } className={ className } />\n\t\t\t</>\n\t\t);\n\t},\n\t'withChildLayoutStyles'\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/layout/addAttribute',\n\taddAttribute\n);\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/editor/layout/with-layout-styles',\n\twithLayoutStyles\n);\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/editor/layout/with-child-layout-styles',\n\twithChildLayoutStyles\n);\naddFilter(\n\t'editor.BlockEdit',\n\t'core/editor/layout/with-inspector-controls',\n\twithInspectorControls\n);\n","/**\n * WordPress dependencies\n */\nimport { ToolbarButton, MenuItem } from '@wordpress/components';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { addFilter } from '@wordpress/hooks';\nimport { __ } from '@wordpress/i18n';\nimport { useEffect, useRef, useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { BlockControls, BlockSettingsMenuControls } from '../components';\n\nfunction StopEditingAsBlocksOnOutsideSelect( {\n\tclientId,\n\tstopEditingAsBlock,\n} ) {\n\tconst isBlockOrDescendantSelected = useSelect(\n\t\t( select ) => {\n\t\t\tconst { isBlockSelected, hasSelectedInnerBlock } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\treturn (\n\t\t\t\tisBlockSelected( clientId ) ||\n\t\t\t\thasSelectedInnerBlock( clientId, true )\n\t\t\t);\n\t\t},\n\t\t[ clientId ]\n\t);\n\tuseEffect( () => {\n\t\tif ( ! isBlockOrDescendantSelected ) {\n\t\t\tstopEditingAsBlock();\n\t\t}\n\t}, [ isBlockOrDescendantSelected, stopEditingAsBlock ] );\n\treturn null;\n}\n\nexport const withBlockControls = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\tconst { getBlockListSettings, getSettings } =\n\t\t\tuseSelect( blockEditorStore );\n\t\tconst focusModeToRevert = useRef();\n\t\tconst { templateLock, isLockedByParent, isEditingAsBlocks } = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\t__unstableGetContentLockingParent,\n\t\t\t\t\tgetTemplateLock,\n\t\t\t\t\t__unstableGetTemporarilyEditingAsBlocks,\n\t\t\t\t} = select( blockEditorStore );\n\t\t\t\treturn {\n\t\t\t\t\ttemplateLock: getTemplateLock( props.clientId ),\n\t\t\t\t\tisLockedByParent: !! __unstableGetContentLockingParent(\n\t\t\t\t\t\tprops.clientId\n\t\t\t\t\t),\n\t\t\t\t\tisEditingAsBlocks:\n\t\t\t\t\t\t__unstableGetTemporarilyEditingAsBlocks() ===\n\t\t\t\t\t\tprops.clientId,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ props.clientId ]\n\t\t);\n\n\t\tconst {\n\t\t\tupdateSettings,\n\t\t\tupdateBlockListSettings,\n\t\t\t__unstableSetTemporarilyEditingAsBlocks,\n\t\t} = useDispatch( blockEditorStore );\n\t\tconst isContentLocked =\n\t\t\t! isLockedByParent && templateLock === 'contentOnly';\n\t\tconst {\n\t\t\t__unstableMarkNextChangeAsNotPersistent,\n\t\t\tupdateBlockAttributes,\n\t\t} = useDispatch( blockEditorStore );\n\n\t\tconst stopEditingAsBlock = useCallback( () => {\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\tupdateBlockAttributes( props.clientId, {\n\t\t\t\ttemplateLock: 'contentOnly',\n\t\t\t} );\n\t\t\tupdateBlockListSettings( props.clientId, {\n\t\t\t\t...getBlockListSettings( props.clientId ),\n\t\t\t\ttemplateLock: 'contentOnly',\n\t\t\t} );\n\t\t\tupdateSettings( { focusMode: focusModeToRevert.current } );\n\t\t\t__unstableSetTemporarilyEditingAsBlocks();\n\t\t}, [\n\t\t\tprops.clientId,\n\t\t\tupdateSettings,\n\t\t\tupdateBlockListSettings,\n\t\t\tgetBlockListSettings,\n\t\t\t__unstableMarkNextChangeAsNotPersistent,\n\t\t\tupdateBlockAttributes,\n\t\t\t__unstableSetTemporarilyEditingAsBlocks,\n\t\t] );\n\n\t\tif ( ! isContentLocked && ! isEditingAsBlocks ) {\n\t\t\treturn <BlockEdit key=\"edit\" { ...props } />;\n\t\t}\n\n\t\tconst showStopEditingAsBlocks = isEditingAsBlocks && ! isContentLocked;\n\t\tconst showStartEditingAsBlocks =\n\t\t\t! isEditingAsBlocks && isContentLocked && props.isSelected;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ showStopEditingAsBlocks && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<StopEditingAsBlocksOnOutsideSelect\n\t\t\t\t\t\t\tclientId={ props.clientId }\n\t\t\t\t\t\t\tstopEditingAsBlock={ stopEditingAsBlock }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BlockControls group=\"other\">\n\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tstopEditingAsBlock();\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Done' ) }\n\t\t\t\t\t\t\t</ToolbarButton>\n\t\t\t\t\t\t</BlockControls>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t{ showStartEditingAsBlocks && (\n\t\t\t\t\t<BlockSettingsMenuControls>\n\t\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\t\t\t\t\t\tupdateBlockAttributes( props.clientId, {\n\t\t\t\t\t\t\t\t\t\ttemplateLock: undefined,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\tupdateBlockListSettings( props.clientId, {\n\t\t\t\t\t\t\t\t\t\t...getBlockListSettings(\n\t\t\t\t\t\t\t\t\t\t\tprops.clientId\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\ttemplateLock: false,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\tfocusModeToRevert.current =\n\t\t\t\t\t\t\t\t\t\tgetSettings().focusMode;\n\t\t\t\t\t\t\t\t\tupdateSettings( { focusMode: true } );\n\t\t\t\t\t\t\t\t\t__unstableSetTemporarilyEditingAsBlocks(\n\t\t\t\t\t\t\t\t\t\tprops.clientId\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Modify' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</BlockSettingsMenuControls>\n\t\t\t\t) }\n\t\t\t\t<BlockEdit key=\"edit\" { ...props } />\n\t\t\t</>\n\t\t);\n\t},\n\t'withToolbarControls'\n);\n\naddFilter(\n\t'editor.BlockEdit',\n\t'core/content-lock-ui/with-block-controls',\n\twithBlockControls\n);\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { getBlockSupport } from '@wordpress/blocks';\n\nconst META_ATTRIBUTE_NAME = 'metadata';\n\nexport function hasBlockMetadataSupport( blockType, feature = '' ) {\n\t// Only core blocks are allowed to use __experimentalMetadata until the fetaure is stablised.\n\tif ( ! blockType.name.startsWith( 'core/' ) ) {\n\t\treturn false;\n\t}\n\tconst support = getBlockSupport( blockType, '__experimentalMetadata' );\n\treturn !! ( true === support || support?.[ feature ] );\n}\n\n/**\n * Filters registered block settings, extending attributes to include `metadata`.\n *\n * see: https://github.com/WordPress/gutenberg/pull/40393/files#r864632012\n *\n * @param {Object} blockTypeSettings Original block settings.\n * @return {Object} Filtered block settings.\n */\nexport function addMetaAttribute( blockTypeSettings ) {\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( blockTypeSettings?.attributes?.[ META_ATTRIBUTE_NAME ]?.type ) {\n\t\treturn blockTypeSettings;\n\t}\n\n\tconst supportsBlockNaming = hasBlockMetadataSupport(\n\t\tblockTypeSettings,\n\t\t'name'\n\t);\n\n\tif ( supportsBlockNaming ) {\n\t\tblockTypeSettings.attributes = {\n\t\t\t...blockTypeSettings.attributes,\n\t\t\t[ META_ATTRIBUTE_NAME ]: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t};\n\t}\n\n\treturn blockTypeSettings;\n}\n\nexport function addSaveProps( extraProps, blockType, attributes ) {\n\tif ( hasBlockMetadataSupport( blockType ) ) {\n\t\textraProps[ META_ATTRIBUTE_NAME ] = attributes[ META_ATTRIBUTE_NAME ];\n\t}\n\n\treturn extraProps;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/metadata/addMetaAttribute',\n\taddMetaAttribute\n);\n\naddFilter(\n\t'blocks.getSaveContent.extraProps',\n\t'core/metadata/save-props',\n\taddSaveProps\n);\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\n/**\n * Internal dependencies\n */\nimport { hasBlockMetadataSupport } from './metadata';\n\n/**\n * Filters registered block settings, adding an `__experimentalLabel` callback if one does not already exist.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addLabelCallback( settings ) {\n\t// If blocks provide their own label callback, do not override it.\n\tif ( settings.__experimentalLabel ) {\n\t\treturn settings;\n\t}\n\n\tconst supportsBlockNaming = hasBlockMetadataSupport(\n\t\tsettings,\n\t\t'name',\n\t\tfalse // default value\n\t);\n\n\t// Check whether block metadata is supported before using it.\n\tif ( supportsBlockNaming ) {\n\t\tsettings.__experimentalLabel = ( attributes, { context } ) => {\n\t\t\tconst { metadata } = attributes;\n\n\t\t\t// In the list view, use the block's name attribute as the label.\n\t\t\tif ( context === 'list-view' && metadata?.name ) {\n\t\t\t\treturn metadata.name;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn settings;\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/metadata/addLabelCallback',\n\taddLabelCallback\n);\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport {\n\tSelectControl,\n\tButton,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { InspectorControls } from '../components';\n\n/**\n * External dependencies\n */\nimport merge from 'deepmerge';\n\nfunction BehaviorsControl( {\n\tblockName,\n\tblockBehaviors,\n\tonChange,\n\tdisabled = false,\n} ) {\n\tconst { settings, themeBehaviors } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBehaviors, getSettings } = select( blockEditorStore );\n\n\t\t\treturn {\n\t\t\t\tsettings:\n\t\t\t\t\tgetSettings()?.__experimentalFeatures?.blocks?.[ blockName ]\n\t\t\t\t\t\t?.behaviors,\n\t\t\t\tthemeBehaviors: getBehaviors()?.blocks?.[ blockName ],\n\t\t\t};\n\t\t},\n\t\t[ blockName ]\n\t);\n\n\tconst noBehaviorsOption = {\n\t\tvalue: '',\n\t\tlabel: __( 'No behaviors' ),\n\t};\n\n\tconst behaviorsOptions = Object.entries( settings )\n\t\t.filter(\n\t\t\t( [ behaviorName, behaviorValue ] ) =>\n\t\t\t\thasBlockSupport( blockName, 'behaviors.' + behaviorName ) &&\n\t\t\t\tbehaviorValue\n\t\t) // Filter out behaviors that are disabled.\n\t\t.map( ( [ behaviorName ] ) => ( {\n\t\t\tvalue: behaviorName,\n\t\t\tlabel:\n\t\t\t\t// Capitalize the first letter of the behavior name.\n\t\t\t\tbehaviorName[ 0 ].toUpperCase() +\n\t\t\t\tbehaviorName.slice( 1 ).toLowerCase(),\n\t\t} ) );\n\n\t// If every behavior is disabled, do not show the behaviors inspector control.\n\tif ( behaviorsOptions.length === 0 ) return null;\n\n\tconst options = [ noBehaviorsOption, ...behaviorsOptions ];\n\n\t// Block behaviors take precedence over theme behaviors.\n\tconst behaviors = merge( themeBehaviors, blockBehaviors || {} );\n\n\tconst helpText = disabled\n\t\t? __( 'The lightbox behavior is disabled for linked images.' )\n\t\t: __( 'Add behaviors.' );\n\n\treturn (\n\t\t<InspectorControls group=\"advanced\">\n\t\t\t{ /* This div is needed to prevent a margin bottom between the dropdown and the button. */ }\n\t\t\t<div>\n\t\t\t\t<SelectControl\n\t\t\t\t\tlabel={ __( 'Behaviors' ) }\n\t\t\t\t\t// At the moment we are only supporting one behavior (Lightbox)\n\t\t\t\t\tvalue={ behaviors?.lightbox ? 'lightbox' : '' }\n\t\t\t\t\toptions={ options }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\thideCancelButton={ true }\n\t\t\t\t\thelp={ helpText }\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<HStack justify=\"flex-end\">\n\t\t\t\t<Button\n\t\t\t\t\tisSmall\n\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\tonClick={ () => onChange( undefined ) }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t</Button>\n\t\t\t</HStack>\n\t\t</InspectorControls>\n\t);\n}\n\n/**\n * Override the default edit UI to include a new block inspector control for\n * assigning behaviors to blocks if behaviors are enabled in the theme.json.\n *\n * Currently, only the `core/image` block is supported.\n *\n * @param {WPComponent} BlockEdit Original component.\n *\n * @return {WPComponent} Wrapped component.\n */\nexport const withBehaviors = createHigherOrderComponent( ( BlockEdit ) => {\n\treturn ( props ) => {\n\t\tconst blockEdit = <BlockEdit key=\"edit\" { ...props } />;\n\t\t// Only add behaviors to blocks with support.\n\t\tif ( ! hasBlockSupport( props.name, 'behaviors' ) ) {\n\t\t\treturn blockEdit;\n\t\t}\n\t\tconst blockHasLink =\n\t\t\ttypeof props.attributes?.linkDestination !== 'undefined' &&\n\t\t\tprops.attributes?.linkDestination !== 'none';\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ blockEdit }\n\t\t\t\t<BehaviorsControl\n\t\t\t\t\tblockName={ props.name }\n\t\t\t\t\tblockBehaviors={ props.attributes.behaviors }\n\t\t\t\t\tonChange={ ( nextValue ) => {\n\t\t\t\t\t\tif ( nextValue === undefined ) {\n\t\t\t\t\t\t\tprops.setAttributes( {\n\t\t\t\t\t\t\t\tbehaviors: undefined,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// If the user selects something, it means that they want to\n\t\t\t\t\t\t\t// change the default value (true) so we save it in the attributes.\n\t\t\t\t\t\t\tprops.setAttributes( {\n\t\t\t\t\t\t\t\tbehaviors: {\n\t\t\t\t\t\t\t\t\tlightbox: nextValue === 'lightbox',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tdisabled={ blockHasLink }\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t};\n}, 'withBehaviors' );\n\nif ( window?.__experimentalInteractivityAPI ) {\n\taddFilter(\n\t\t'editor.BlockEdit',\n\t\t'core/behaviors/with-inspector-control',\n\t\twithBehaviors\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\nimport { getBorderClasses, getMultiOriginColor } from './border';\nimport useMultipleOriginColorsAndGradients from '../components/colors-gradients/use-multiple-origin-colors-and-gradients';\n\n// This utility is intended to assist where the serialization of the border\n// block support is being skipped for a block but the border related CSS classes\n// & styles still need to be generated so they can be applied to inner elements.\n\n/**\n * Provides the CSS class names and inline styles for a block's border support\n * attributes.\n *\n * @param {Object} attributes Block attributes.\n * @return {Object} Border block support derived CSS classes & styles.\n */\nexport function getBorderClassesAndStyles( attributes ) {\n\tconst border = attributes.style?.border || {};\n\tconst className = getBorderClasses( attributes );\n\n\treturn {\n\t\tclassName: className || undefined,\n\t\tstyle: getInlineStyles( { border } ),\n\t};\n}\n\n/**\n * Derives the border related props for a block from its border block support\n * attributes.\n *\n * Inline styles are forced for named colors to ensure these selections are\n * reflected when themes do not load their color stylesheets in the editor.\n *\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} ClassName & style props from border block support.\n */\nexport function useBorderProps( attributes ) {\n\tconst { colors } = useMultipleOriginColorsAndGradients();\n\tconst borderProps = getBorderClassesAndStyles( attributes );\n\tconst { borderColor } = attributes;\n\n\t// Force inline styles to apply named border colors when themes do not load\n\t// their color stylesheets in the editor.\n\tif ( borderColor ) {\n\t\tconst borderColorObject = getMultiOriginColor( {\n\t\t\tcolors,\n\t\t\tnamedColor: borderColor,\n\t\t} );\n\n\t\tborderProps.style.borderColor = borderColorObject.color;\n\t}\n\n\treturn borderProps;\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\nimport {\n\tgetColorClassName,\n\tgetColorObjectByAttributeValues,\n} from '../components/colors';\nimport {\n\t__experimentalGetGradientClass,\n\tgetGradientValueBySlug,\n} from '../components/gradients';\nimport useSetting from '../components/use-setting';\n\n// The code in this file has largely been lifted from the color block support\n// hook.\n//\n// This utility is intended to assist where the serialization of the colors\n// block support is being skipped for a block but the color related CSS classes\n// & styles still need to be generated so they can be applied to inner elements.\n\n/**\n * Provides the CSS class names and inline styles for a block's color support\n * attributes.\n *\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} Color block support derived CSS classes & styles.\n */\nexport function getColorClassesAndStyles( attributes ) {\n\tconst { backgroundColor, textColor, gradient, style } = attributes;\n\n\t// Collect color CSS classes.\n\tconst backgroundClass = getColorClassName(\n\t\t'background-color',\n\t\tbackgroundColor\n\t);\n\tconst textClass = getColorClassName( 'color', textColor );\n\n\tconst gradientClass = __experimentalGetGradientClass( gradient );\n\tconst hasGradient = gradientClass || style?.color?.gradient;\n\n\t// Determine color CSS class name list.\n\tconst className = classnames( textClass, gradientClass, {\n\t\t// Don't apply the background class if there's a gradient.\n\t\t[ backgroundClass ]: ! hasGradient && !! backgroundClass,\n\t\t'has-text-color': textColor || style?.color?.text,\n\t\t'has-background':\n\t\t\tbackgroundColor ||\n\t\t\tstyle?.color?.background ||\n\t\t\tgradient ||\n\t\t\tstyle?.color?.gradient,\n\t\t'has-link-color': style?.elements?.link?.color,\n\t} );\n\n\t// Collect inline styles for colors.\n\tconst colorStyles = style?.color || {};\n\tconst styleProp = getInlineStyles( { color: colorStyles } );\n\n\treturn {\n\t\tclassName: className || undefined,\n\t\tstyle: styleProp,\n\t};\n}\n\nconst EMPTY_OBJECT = {};\n\n/**\n * Determines the color related props for a block derived from its color block\n * support attributes.\n *\n * Inline styles are forced for named colors to ensure these selections are\n * reflected when themes do not load their color stylesheets in the editor.\n *\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} ClassName & style props from colors block support.\n */\nexport function useColorProps( attributes ) {\n\tconst { backgroundColor, textColor, gradient } = attributes;\n\n\t// Some color settings have a special handling for deprecated flags in `useSetting`,\n\t// so we can't unwrap them by doing const { ... } = useSetting('color')\n\t// until https://github.com/WordPress/gutenberg/issues/37094 is fixed.\n\tconst userPalette = useSetting( 'color.palette.custom' );\n\tconst themePalette = useSetting( 'color.palette.theme' );\n\tconst defaultPalette = useSetting( 'color.palette.default' );\n\tconst gradientsPerOrigin = useSetting( 'color.gradients' ) || EMPTY_OBJECT;\n\tconst colors = useMemo(\n\t\t() => [\n\t\t\t...( userPalette || [] ),\n\t\t\t...( themePalette || [] ),\n\t\t\t...( defaultPalette || [] ),\n\t\t],\n\t\t[ userPalette, themePalette, defaultPalette ]\n\t);\n\tconst gradients = useMemo(\n\t\t() => [\n\t\t\t...( gradientsPerOrigin?.custom || [] ),\n\t\t\t...( gradientsPerOrigin?.theme || [] ),\n\t\t\t...( gradientsPerOrigin?.default || [] ),\n\t\t],\n\t\t[ gradientsPerOrigin ]\n\t);\n\n\tconst colorProps = getColorClassesAndStyles( attributes );\n\n\t// Force inline styles to apply colors when themes do not load their color\n\t// stylesheets in the editor.\n\tif ( backgroundColor ) {\n\t\tconst backgroundColorObject = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\tbackgroundColor\n\t\t);\n\n\t\tcolorProps.style.backgroundColor = backgroundColorObject.color;\n\t}\n\n\tif ( gradient ) {\n\t\tcolorProps.style.background = getGradientValueBySlug(\n\t\t\tgradients,\n\t\t\tgradient\n\t\t);\n\t}\n\n\tif ( textColor ) {\n\t\tconst textColorObject = getColorObjectByAttributeValues(\n\t\t\tcolors,\n\t\t\ttextColor\n\t\t);\n\n\t\tcolorProps.style.color = textColorObject.color;\n\t}\n\n\treturn colorProps;\n}\n","/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\n\n// This utility is intended to assist where the serialization of the spacing\n// block support is being skipped for a block but the spacing related CSS\n// styles still need to be generated so they can be applied to inner elements.\n\n/**\n * Provides the CSS class names and inline styles for a block's spacing support\n * attributes.\n *\n * @param {Object} attributes Block attributes.\n *\n * @return {Object} Spacing block support derived CSS classes & styles.\n */\nexport function getSpacingClassesAndStyles( attributes ) {\n\tconst { style } = attributes;\n\n\t// Collect inline styles for spacing.\n\tconst spacingStyles = style?.spacing || {};\n\tconst styleProp = getInlineStyles( { spacing: spacingStyles } );\n\n\treturn {\n\t\tstyle: styleProp,\n\t};\n}\n","/**\n * External dependencies\n */\nimport { kebabCase } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\nimport { getFontSizeClass } from '../components/font-sizes';\nimport { getComputedFluidTypographyValue } from '../components/font-sizes/fluid-utils';\n\n/*\n * This utility is intended to assist where the serialization of the typography\n * block support is being skipped for a block but the typography related CSS\n * styles still need to be generated so they can be applied to inner elements.\n */\n/**\n * Provides the CSS class names and inline styles for a block's typography support\n * attributes.\n *\n * @param {Object}         attributes Block attributes.\n * @param {Object|boolean} settings   Merged theme.json settings\n *\n * @return {Object} Typography block support derived CSS classes & styles.\n */\nexport function getTypographyClassesAndStyles( attributes, settings ) {\n\tlet typographyStyles = attributes?.style?.typography || {};\n\tconst fluidTypographySettings = settings?.typography?.fluid;\n\n\tif (\n\t\t!! fluidTypographySettings &&\n\t\t( true === fluidTypographySettings ||\n\t\t\tObject.keys( fluidTypographySettings ).length !== 0 )\n\t) {\n\t\tconst newFontSize =\n\t\t\tgetComputedFluidTypographyValue( {\n\t\t\t\tfontSize: attributes?.style?.typography?.fontSize,\n\t\t\t\tminimumFontSizeLimit: fluidTypographySettings?.minFontSize,\n\t\t\t\tmaximumViewPortWidth: settings?.layout?.wideSize,\n\t\t\t} ) || attributes?.style?.typography?.fontSize;\n\t\ttypographyStyles = {\n\t\t\t...typographyStyles,\n\t\t\tfontSize: newFontSize,\n\t\t};\n\t}\n\n\tconst style = getInlineStyles( { typography: typographyStyles } );\n\tconst fontFamilyClassName = !! attributes?.fontFamily\n\t\t? `has-${ kebabCase( attributes.fontFamily ) }-font-family`\n\t\t: '';\n\n\tconst className = classnames(\n\t\tfontFamilyClassName,\n\t\tgetFontSizeClass( attributes?.fontSize )\n\t);\n\n\treturn {\n\t\tclassName,\n\t\tstyle,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\n\n/**\n * Keeps an up-to-date copy of the passed value and returns it. If value becomes falsy, it will return the last truthy copy.\n *\n * @param {any} value\n * @return {any} value\n */\nexport function useCachedTruthy( value ) {\n\tconst [ cachedValue, setCachedValue ] = useState( value );\n\tuseEffect( () => {\n\t\tif ( value ) {\n\t\t\tsetCachedValue( value );\n\t\t}\n\t}, [ value ] );\n\treturn cachedValue;\n}\n","/**\n * External dependencies\n */\nimport { kebabCase } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo, Component } from '@wordpress/element';\nimport { compose, createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetColorClassName,\n\tgetColorObjectByColorValue,\n\tgetColorObjectByAttributeValues,\n\tgetMostReadableColor,\n} from './utils';\nimport useSetting from '../use-setting';\n\n/**\n * Capitalizes the first letter in a string.\n *\n * @param {string} str The string whose first letter the function will capitalize.\n *\n * @return {string} Capitalized string.\n */\nconst upperFirst = ( [ firstLetter, ...rest ] ) =>\n\tfirstLetter.toUpperCase() + rest.join( '' );\n\n/**\n * Higher order component factory for injecting the `colorsArray` argument as\n * the colors prop in the `withCustomColors` HOC.\n *\n * @param {Array} colorsArray An array of color objects.\n *\n * @return {Function} The higher order component.\n */\nconst withCustomColorPalette = ( colorsArray ) =>\n\tcreateHigherOrderComponent(\n\t\t( WrappedComponent ) => ( props ) =>\n\t\t\t<WrappedComponent { ...props } colors={ colorsArray } />,\n\t\t'withCustomColorPalette'\n\t);\n\n/**\n * Higher order component factory for injecting the editor colors as the\n * `colors` prop in the `withColors` HOC.\n *\n * @return {Function} The higher order component.\n */\nconst withEditorColorPalette = () =>\n\tcreateHigherOrderComponent(\n\t\t( WrappedComponent ) => ( props ) => {\n\t\t\t// Some color settings have a special handling for deprecated flags in `useSetting`,\n\t\t\t// so we can't unwrap them by doing const { ... } = useSetting('color')\n\t\t\t// until https://github.com/WordPress/gutenberg/issues/37094 is fixed.\n\t\t\tconst userPalette = useSetting( 'color.palette.custom' );\n\t\t\tconst themePalette = useSetting( 'color.palette.theme' );\n\t\t\tconst defaultPalette = useSetting( 'color.palette.default' );\n\t\t\tconst allColors = useMemo(\n\t\t\t\t() => [\n\t\t\t\t\t...( userPalette || [] ),\n\t\t\t\t\t...( themePalette || [] ),\n\t\t\t\t\t...( defaultPalette || [] ),\n\t\t\t\t],\n\t\t\t\t[ userPalette, themePalette, defaultPalette ]\n\t\t\t);\n\t\t\treturn <WrappedComponent { ...props } colors={ allColors } />;\n\t\t},\n\t\t'withEditorColorPalette'\n\t);\n\n/**\n * Helper function used with `createHigherOrderComponent` to create\n * higher order components for managing color logic.\n *\n * @param {Array}    colorTypes       An array of color types (e.g. 'backgroundColor, borderColor).\n * @param {Function} withColorPalette A HOC for injecting the 'colors' prop into the WrappedComponent.\n *\n * @return {WPComponent} The component that can be used as a HOC.\n */\nfunction createColorHOC( colorTypes, withColorPalette ) {\n\tconst colorMap = colorTypes.reduce( ( colorObject, colorType ) => {\n\t\treturn {\n\t\t\t...colorObject,\n\t\t\t...( typeof colorType === 'string'\n\t\t\t\t? { [ colorType ]: kebabCase( colorType ) }\n\t\t\t\t: colorType ),\n\t\t};\n\t}, {} );\n\n\treturn compose( [\n\t\twithColorPalette,\n\t\t( WrappedComponent ) => {\n\t\t\treturn class extends Component {\n\t\t\t\tconstructor( props ) {\n\t\t\t\t\tsuper( props );\n\n\t\t\t\t\tthis.setters = this.createSetters();\n\t\t\t\t\tthis.colorUtils = {\n\t\t\t\t\t\tgetMostReadableColor:\n\t\t\t\t\t\t\tthis.getMostReadableColor.bind( this ),\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.state = {};\n\t\t\t\t}\n\n\t\t\t\tgetMostReadableColor( colorValue ) {\n\t\t\t\t\tconst { colors } = this.props;\n\t\t\t\t\treturn getMostReadableColor( colors, colorValue );\n\t\t\t\t}\n\n\t\t\t\tcreateSetters() {\n\t\t\t\t\treturn Object.keys( colorMap ).reduce(\n\t\t\t\t\t\t( settersAccumulator, colorAttributeName ) => {\n\t\t\t\t\t\t\tconst upperFirstColorAttributeName =\n\t\t\t\t\t\t\t\tupperFirst( colorAttributeName );\n\t\t\t\t\t\t\tconst customColorAttributeName = `custom${ upperFirstColorAttributeName }`;\n\t\t\t\t\t\t\tsettersAccumulator[\n\t\t\t\t\t\t\t\t`set${ upperFirstColorAttributeName }`\n\t\t\t\t\t\t\t] = this.createSetColor(\n\t\t\t\t\t\t\t\tcolorAttributeName,\n\t\t\t\t\t\t\t\tcustomColorAttributeName\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn settersAccumulator;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tcreateSetColor( colorAttributeName, customColorAttributeName ) {\n\t\t\t\t\treturn ( colorValue ) => {\n\t\t\t\t\t\tconst colorObject = getColorObjectByColorValue(\n\t\t\t\t\t\t\tthis.props.colors,\n\t\t\t\t\t\t\tcolorValue\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.props.setAttributes( {\n\t\t\t\t\t\t\t[ colorAttributeName ]:\n\t\t\t\t\t\t\t\tcolorObject && colorObject.slug\n\t\t\t\t\t\t\t\t\t? colorObject.slug\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t[ customColorAttributeName ]:\n\t\t\t\t\t\t\t\tcolorObject && colorObject.slug\n\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t: colorValue,\n\t\t\t\t\t\t} );\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tstatic getDerivedStateFromProps(\n\t\t\t\t\t{ attributes, colors },\n\t\t\t\t\tpreviousState\n\t\t\t\t) {\n\t\t\t\t\treturn Object.entries( colorMap ).reduce(\n\t\t\t\t\t\t( newState, [ colorAttributeName, colorContext ] ) => {\n\t\t\t\t\t\t\tconst colorObject = getColorObjectByAttributeValues(\n\t\t\t\t\t\t\t\tcolors,\n\t\t\t\t\t\t\t\tattributes[ colorAttributeName ],\n\t\t\t\t\t\t\t\tattributes[\n\t\t\t\t\t\t\t\t\t`custom${ upperFirst(\n\t\t\t\t\t\t\t\t\t\tcolorAttributeName\n\t\t\t\t\t\t\t\t\t) }`\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconst previousColorObject =\n\t\t\t\t\t\t\t\tpreviousState[ colorAttributeName ];\n\t\t\t\t\t\t\tconst previousColor = previousColorObject?.color;\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * The \"and previousColorObject\" condition checks that a previous color object was already computed.\n\t\t\t\t\t\t\t * At the start previousColorObject and colorValue are both equal to undefined\n\t\t\t\t\t\t\t * bus as previousColorObject does not exist we should compute the object.\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tpreviousColor === colorObject.color &&\n\t\t\t\t\t\t\t\tpreviousColorObject\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tnewState[ colorAttributeName ] =\n\t\t\t\t\t\t\t\t\tpreviousColorObject;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewState[ colorAttributeName ] = {\n\t\t\t\t\t\t\t\t\t...colorObject,\n\t\t\t\t\t\t\t\t\tclass: getColorClassName(\n\t\t\t\t\t\t\t\t\t\tcolorContext,\n\t\t\t\t\t\t\t\t\t\tcolorObject.slug\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn newState;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\trender() {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t...this.props,\n\t\t\t\t\t\t\t\tcolors: undefined,\n\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\t...this.setters,\n\t\t\t\t\t\t\t\tcolorUtils: this.colorUtils,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t] );\n}\n\n/**\n * A higher-order component factory for creating a 'withCustomColors' HOC, which handles color logic\n * for class generation color value, retrieval and color attribute setting.\n *\n * Use this higher-order component to work with a custom set of colors.\n *\n * @example\n *\n * ```jsx\n * const CUSTOM_COLORS = [ { name: 'Red', slug: 'red', color: '#ff0000' }, { name: 'Blue', slug: 'blue', color: '#0000ff' } ];\n * const withCustomColors = createCustomColorsHOC( CUSTOM_COLORS );\n * // ...\n * export default compose(\n *     withCustomColors( 'backgroundColor', 'borderColor' ),\n *     MyColorfulComponent,\n * );\n * ```\n *\n * @param {Array} colorsArray The array of color objects (name, slug, color, etc... ).\n *\n * @return {Function} Higher-order component.\n */\nexport function createCustomColorsHOC( colorsArray ) {\n\treturn ( ...colorTypes ) => {\n\t\tconst withColorPalette = withCustomColorPalette( colorsArray );\n\t\treturn createHigherOrderComponent(\n\t\t\tcreateColorHOC( colorTypes, withColorPalette ),\n\t\t\t'withCustomColors'\n\t\t);\n\t};\n}\n\n/**\n * A higher-order component, which handles color logic for class generation color value, retrieval and color attribute setting.\n *\n * For use with the default editor/theme color palette.\n *\n * @example\n *\n * ```jsx\n * export default compose(\n *     withColors( 'backgroundColor', { textColor: 'color' } ),\n *     MyColorfulComponent,\n * );\n * ```\n *\n * @param {...(Object|string)} colorTypes The arguments can be strings or objects. If the argument is an object,\n *                                        it should contain the color attribute name as key and the color context as value.\n *                                        If the argument is a string the value should be the color attribute name,\n *                                        the color context is computed by applying a kebab case transform to the value.\n *                                        Color context represents the context/place where the color is going to be used.\n *                                        The class name of the color is generated using 'has' followed by the color name\n *                                        and ending with the color context all in kebab case e.g: has-green-background-color.\n *\n * @return {Function} Higher-order component.\n */\nexport default function withColors( ...colorTypes ) {\n\tconst withColorPalette = withEditorColorPalette();\n\treturn createHigherOrderComponent(\n\t\tcreateColorHOC( colorTypes, withColorPalette ),\n\t\t'withColors'\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { FontSizePicker as BaseFontSizePicker } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport useSetting from '../use-setting';\n\nfunction FontSizePicker( props ) {\n\tconst fontSizes = useSetting( 'typography.fontSizes' );\n\tconst disableCustomFontSizes = ! useSetting( 'typography.customFontSize' );\n\n\treturn (\n\t\t<BaseFontSizePicker\n\t\t\t{ ...props }\n\t\t\tfontSizes={ fontSizes }\n\t\t\tdisableCustomFontSizes={ disableCustomFontSizes }\n\t\t/>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/font-sizes/README.md\n */\nexport default FontSizePicker;\n","/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent, compose } from '@wordpress/compose';\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getFontSize, getFontSizeClass } from './utils';\nimport useSetting from '../use-setting';\n\nconst DEFAULT_FONT_SIZES = [];\n\n/**\n * Capitalizes the first letter in a string.\n *\n * @param {string} str The string whose first letter the function will capitalize.\n *\n * @return {string} Capitalized string.\n */\nconst upperFirst = ( [ firstLetter, ...rest ] ) =>\n\tfirstLetter.toUpperCase() + rest.join( '' );\n\n/**\n * Higher-order component, which handles font size logic for class generation,\n * font size value retrieval, and font size change handling.\n *\n * @param {...(Object|string)} fontSizeNames The arguments should all be strings.\n *                                           Each string contains the font size\n *                                           attribute name e.g: 'fontSize'.\n *\n * @return {Function} Higher-order component.\n */\nexport default ( ...fontSizeNames ) => {\n\t/*\n\t * Computes an object whose key is the font size attribute name as passed in the array,\n\t * and the value is the custom font size attribute name.\n\t * Custom font size is automatically compted by appending custom followed by the font size attribute name in with the first letter capitalized.\n\t */\n\tconst fontSizeAttributeNames = fontSizeNames.reduce(\n\t\t( fontSizeAttributeNamesAccumulator, fontSizeAttributeName ) => {\n\t\t\tfontSizeAttributeNamesAccumulator[\n\t\t\t\tfontSizeAttributeName\n\t\t\t] = `custom${ upperFirst( fontSizeAttributeName ) }`;\n\t\t\treturn fontSizeAttributeNamesAccumulator;\n\t\t},\n\t\t{}\n\t);\n\n\treturn createHigherOrderComponent(\n\t\tcompose( [\n\t\t\tcreateHigherOrderComponent(\n\t\t\t\t( WrappedComponent ) => ( props ) => {\n\t\t\t\t\tconst fontSizes =\n\t\t\t\t\t\tuseSetting( 'typography.fontSizes' ) ||\n\t\t\t\t\t\tDEFAULT_FONT_SIZES;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t\tfontSizes={ fontSizes }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\t'withFontSizes'\n\t\t\t),\n\t\t\t( WrappedComponent ) => {\n\t\t\t\treturn class extends Component {\n\t\t\t\t\tconstructor( props ) {\n\t\t\t\t\t\tsuper( props );\n\n\t\t\t\t\t\tthis.setters = this.createSetters();\n\n\t\t\t\t\t\tthis.state = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tcreateSetters() {\n\t\t\t\t\t\treturn Object.entries( fontSizeAttributeNames ).reduce(\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tsettersAccumulator,\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\tfontSizeAttributeName,\n\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName,\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\tconst upperFirstFontSizeAttributeName =\n\t\t\t\t\t\t\t\t\tupperFirst( fontSizeAttributeName );\n\t\t\t\t\t\t\t\tsettersAccumulator[\n\t\t\t\t\t\t\t\t\t`set${ upperFirstFontSizeAttributeName }`\n\t\t\t\t\t\t\t\t] = this.createSetFontSize(\n\t\t\t\t\t\t\t\t\tfontSizeAttributeName,\n\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treturn settersAccumulator;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tcreateSetFontSize(\n\t\t\t\t\t\tfontSizeAttributeName,\n\t\t\t\t\t\tcustomFontSizeAttributeName\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn ( fontSizeValue ) => {\n\t\t\t\t\t\t\tconst fontSizeObject = this.props.fontSizes?.find(\n\t\t\t\t\t\t\t\t( { size } ) => size === Number( fontSizeValue )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.props.setAttributes( {\n\t\t\t\t\t\t\t\t[ fontSizeAttributeName ]:\n\t\t\t\t\t\t\t\t\tfontSizeObject && fontSizeObject.slug\n\t\t\t\t\t\t\t\t\t\t? fontSizeObject.slug\n\t\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t[ customFontSizeAttributeName ]:\n\t\t\t\t\t\t\t\t\tfontSizeObject && fontSizeObject.slug\n\t\t\t\t\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t\t\t\t\t: fontSizeValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tstatic getDerivedStateFromProps(\n\t\t\t\t\t\t{ attributes, fontSizes },\n\t\t\t\t\t\tpreviousState\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst didAttributesChange = (\n\t\t\t\t\t\t\tcustomFontSizeAttributeName,\n\t\t\t\t\t\t\tfontSizeAttributeName\n\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\tif ( previousState[ fontSizeAttributeName ] ) {\n\t\t\t\t\t\t\t\t// If new font size is name compare with the previous slug.\n\t\t\t\t\t\t\t\tif ( attributes[ fontSizeAttributeName ] ) {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\tattributes[ fontSizeAttributeName ] !==\n\t\t\t\t\t\t\t\t\t\tpreviousState[ fontSizeAttributeName ]\n\t\t\t\t\t\t\t\t\t\t\t.slug\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// If font size is not named, update when the font size value changes.\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\tpreviousState[ fontSizeAttributeName ]\n\t\t\t\t\t\t\t\t\t\t.size !==\n\t\t\t\t\t\t\t\t\tattributes[ customFontSizeAttributeName ]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// In this case we need to build the font size object.\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t! Object.values( fontSizeAttributeNames ).some(\n\t\t\t\t\t\t\t\tdidAttributesChange\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst newState = Object.entries(\n\t\t\t\t\t\t\tfontSizeAttributeNames\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.filter( ( [ key, value ] ) =>\n\t\t\t\t\t\t\t\tdidAttributesChange( value, key )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.reduce(\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\tnewStateAccumulator,\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\tfontSizeAttributeName,\n\t\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName,\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\tconst fontSizeAttributeValue =\n\t\t\t\t\t\t\t\t\t\tattributes[ fontSizeAttributeName ];\n\t\t\t\t\t\t\t\t\tconst fontSizeObject = getFontSize(\n\t\t\t\t\t\t\t\t\t\tfontSizes,\n\t\t\t\t\t\t\t\t\t\tfontSizeAttributeValue,\n\t\t\t\t\t\t\t\t\t\tattributes[\n\t\t\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tnewStateAccumulator[\n\t\t\t\t\t\t\t\t\t\tfontSizeAttributeName\n\t\t\t\t\t\t\t\t\t] = {\n\t\t\t\t\t\t\t\t\t\t...fontSizeObject,\n\t\t\t\t\t\t\t\t\t\tclass: getFontSizeClass(\n\t\t\t\t\t\t\t\t\t\t\tfontSizeAttributeValue\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\treturn newStateAccumulator;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...previousState,\n\t\t\t\t\t\t\t...newState,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\trender() {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t\t...this.props,\n\t\t\t\t\t\t\t\t\tfontSizes: undefined,\n\t\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\t\t...this.setters,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t] ),\n\t\t'withFontSizes'\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst alignLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4 19.8h8.9v-1.5H4v1.5zm8.9-15.6H4v1.5h8.9V4.2zm-8.9 7v1.5h16v-1.5H4z\" />\n\t</SVG>\n);\n\nexport default alignLeft;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst alignCenter = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M16.4 4.2H7.6v1.5h8.9V4.2zM4 11.2v1.5h16v-1.5H4zm3.6 8.6h8.9v-1.5H7.6v1.5z\" />\n\t</SVG>\n);\n\nexport default alignCenter;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst alignRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M11.1 19.8H20v-1.5h-8.9v1.5zm0-15.6v1.5H20V4.2h-8.9zM4 12.8h16v-1.5H4v1.5z\" />\n\t</SVG>\n);\n\nexport default alignRight;\n","/**\n * WordPress dependencies\n */\nimport { __, isRTL } from '@wordpress/i18n';\nimport { ToolbarDropdownMenu, ToolbarGroup } from '@wordpress/components';\nimport { alignLeft, alignRight, alignCenter } from '@wordpress/icons';\n\nconst DEFAULT_ALIGNMENT_CONTROLS = [\n\t{\n\t\ticon: alignLeft,\n\t\ttitle: __( 'Align text left' ),\n\t\talign: 'left',\n\t},\n\t{\n\t\ticon: alignCenter,\n\t\ttitle: __( 'Align text center' ),\n\t\talign: 'center',\n\t},\n\t{\n\t\ticon: alignRight,\n\t\ttitle: __( 'Align text right' ),\n\t\talign: 'right',\n\t},\n];\n\nconst POPOVER_PROPS = {\n\tposition: 'bottom right',\n\tvariant: 'toolbar',\n};\n\nfunction AlignmentUI( {\n\tvalue,\n\tonChange,\n\talignmentControls = DEFAULT_ALIGNMENT_CONTROLS,\n\tlabel = __( 'Align text' ),\n\tdescribedBy = __( 'Change text alignment' ),\n\tisCollapsed = true,\n\tisToolbar,\n} ) {\n\tfunction applyOrUnset( align ) {\n\t\treturn () => onChange( value === align ? undefined : align );\n\t}\n\n\tconst activeAlignment = alignmentControls.find(\n\t\t( control ) => control.align === value\n\t);\n\n\tfunction setIcon() {\n\t\tif ( activeAlignment ) return activeAlignment.icon;\n\t\treturn isRTL() ? alignRight : alignLeft;\n\t}\n\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\n\tconst extraProps = isToolbar\n\t\t? { isCollapsed }\n\t\t: {\n\t\t\t\ttoggleProps: {\n\t\t\t\t\tdescribedBy,\n\t\t\t\t},\n\t\t\t\tpopoverProps: POPOVER_PROPS,\n\t\t  };\n\n\treturn (\n\t\t<UIComponent\n\t\t\ticon={ setIcon() }\n\t\t\tlabel={ label }\n\t\t\tcontrols={ alignmentControls.map( ( control ) => {\n\t\t\t\tconst { align } = control;\n\t\t\t\tconst isActive = value === align;\n\n\t\t\t\treturn {\n\t\t\t\t\t...control,\n\t\t\t\t\tisActive,\n\t\t\t\t\trole: isCollapsed ? 'menuitemradio' : undefined,\n\t\t\t\t\tonClick: applyOrUnset( align ),\n\t\t\t\t};\n\t\t\t} ) }\n\t\t\t{ ...extraProps }\n\t\t/>\n\t);\n}\n\nexport default AlignmentUI;\n","/**\n * Internal dependencies\n */\nimport AlignmentUI from './ui';\n\nconst AlignmentControl = ( props ) => {\n\treturn <AlignmentUI { ...props } isToolbar={ false } />;\n};\n\nconst AlignmentToolbar = ( props ) => {\n\treturn <AlignmentUI { ...props } isToolbar />;\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/alignment-control/README.md\n */\nexport { AlignmentControl, AlignmentToolbar };\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tcreateBlock,\n\tcreateBlocksFromInnerBlocksTemplate,\n} from '@wordpress/blocks';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { searchBlockItems } from '../components/inserter/search-items';\nimport useBlockTypesState from '../components/inserter/hooks/use-block-types-state';\nimport BlockIcon from '../components/block-icon';\nimport { store as blockEditorStore } from '../store';\nimport { orderBy } from '../utils/sorting';\nimport { orderInserterBlockItems } from '../utils/order-inserter-block-items';\n\nconst noop = () => {};\nconst SHOWN_BLOCK_TYPES = 9;\n\n/** @typedef {import('@wordpress/components').WPCompleter} WPCompleter */\n\n/**\n * Creates a blocks repeater for replacing the current block with a selected block type.\n *\n * @return {WPCompleter} A blocks completer.\n */\nfunction createBlockCompleter() {\n\treturn {\n\t\tname: 'blocks',\n\t\tclassName: 'block-editor-autocompleters__block',\n\t\ttriggerPrefix: '/',\n\n\t\tuseItems( filterValue ) {\n\t\t\tconst { rootClientId, selectedBlockName, prioritizedBlocks } =\n\t\t\t\tuseSelect( ( select ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\t\t\tgetBlockName,\n\t\t\t\t\t\tgetBlockInsertionPoint,\n\t\t\t\t\t\tgetBlockListSettings,\n\t\t\t\t\t} = select( blockEditorStore );\n\t\t\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\t\t\tconst _rootClientId = getBlockInsertionPoint().rootClientId;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tselectedBlockName: selectedBlockClientId\n\t\t\t\t\t\t\t? getBlockName( selectedBlockClientId )\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\trootClientId: _rootClientId,\n\t\t\t\t\t\tprioritizedBlocks:\n\t\t\t\t\t\t\tgetBlockListSettings( _rootClientId )\n\t\t\t\t\t\t\t\t?.prioritizedInserterBlocks,\n\t\t\t\t\t};\n\t\t\t\t}, [] );\n\t\t\tconst [ items, categories, collections ] = useBlockTypesState(\n\t\t\t\trootClientId,\n\t\t\t\tnoop\n\t\t\t);\n\n\t\t\tconst filteredItems = useMemo( () => {\n\t\t\t\tconst initialFilteredItems = !! filterValue.trim()\n\t\t\t\t\t? searchBlockItems(\n\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t\tcategories,\n\t\t\t\t\t\t\tcollections,\n\t\t\t\t\t\t\tfilterValue\n\t\t\t\t\t  )\n\t\t\t\t\t: orderInserterBlockItems(\n\t\t\t\t\t\t\torderBy( items, 'frecency', 'desc' ),\n\t\t\t\t\t\t\tprioritizedBlocks\n\t\t\t\t\t  );\n\n\t\t\t\treturn initialFilteredItems\n\t\t\t\t\t.filter( ( item ) => item.name !== selectedBlockName )\n\t\t\t\t\t.slice( 0, SHOWN_BLOCK_TYPES );\n\t\t\t}, [\n\t\t\t\tfilterValue,\n\t\t\t\tselectedBlockName,\n\t\t\t\titems,\n\t\t\t\tcategories,\n\t\t\t\tcollections,\n\t\t\t\tprioritizedBlocks,\n\t\t\t] );\n\n\t\t\tconst options = useMemo(\n\t\t\t\t() =>\n\t\t\t\t\tfilteredItems.map( ( blockItem ) => {\n\t\t\t\t\t\tconst { title, icon, isDisabled } = blockItem;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tkey: `block-${ blockItem.id }`,\n\t\t\t\t\t\t\tvalue: blockItem,\n\t\t\t\t\t\t\tlabel: (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<BlockIcon\n\t\t\t\t\t\t\t\t\t\tkey=\"icon\"\n\t\t\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t\t\t\tshowColors\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tisDisabled,\n\t\t\t\t\t\t};\n\t\t\t\t\t} ),\n\t\t\t\t[ filteredItems ]\n\t\t\t);\n\n\t\t\treturn [ options ];\n\t\t},\n\t\tallowContext( before, after ) {\n\t\t\treturn ! ( /\\S/.test( before ) || /\\S/.test( after ) );\n\t\t},\n\t\tgetOptionCompletion( inserterItem ) {\n\t\t\tconst { name, initialAttributes, innerBlocks } = inserterItem;\n\t\t\treturn {\n\t\t\t\taction: 'replace',\n\t\t\t\tvalue: createBlock(\n\t\t\t\t\tname,\n\t\t\t\t\tinitialAttributes,\n\t\t\t\t\tcreateBlocksFromInnerBlocksTemplate( innerBlocks )\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t};\n}\n\n/**\n * Creates a blocks repeater for replacing the current block with a selected block type.\n *\n * @return {WPCompleter} A blocks completer.\n */\nexport default createBlockCompleter();\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"apiFetch\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst page = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M7 5.5h10a.5.5 0 01.5.5v12a.5.5 0 01-.5.5H7a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM17 4H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V6a2 2 0 00-2-2zm-1 3.75H8v1.5h8v-1.5zM8 11h8v1.5H8V11zm6 3.25H8v1.5h6v-1.5z\" />\n\t</SVG>\n);\n\nexport default page;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst post = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m7.3 9.7 1.4 1.4c.2-.2.3-.3.4-.5 0 0 0-.1.1-.1.3-.5.4-1.1.3-1.6L12 7 9 4 7.2 6.5c-.6-.1-1.1 0-1.6.3 0 0-.1 0-.1.1-.3.1-.4.2-.6.4l1.4 1.4L4 11v1h1l2.3-2.3zM4 20h9v-1.5H4V20zm0-5.5V16h16v-1.5H4z\" />\n\t</SVG>\n);\n\nexport default post;\n","/**\n * WordPress dependencies\n */\n// Disable Reason: Needs to be refactored.\n// eslint-disable-next-line no-restricted-imports\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { Icon, page, post } from '@wordpress/icons';\n\nconst SHOWN_SUGGESTIONS = 10;\n\n/** @typedef {import('@wordpress/components').WPCompleter} WPCompleter */\n\n/**\n * Creates a suggestion list for links to posts or pages.\n *\n * @return {WPCompleter} A links completer.\n */\nfunction createLinkCompleter() {\n\treturn {\n\t\tname: 'links',\n\t\tclassName: 'block-editor-autocompleters__link',\n\t\ttriggerPrefix: '[[',\n\t\toptions: async ( letters ) => {\n\t\t\tlet options = await apiFetch( {\n\t\t\t\tpath: addQueryArgs( '/wp/v2/search', {\n\t\t\t\t\tper_page: SHOWN_SUGGESTIONS,\n\t\t\t\t\tsearch: letters,\n\t\t\t\t\ttype: 'post',\n\t\t\t\t\torder_by: 'menu_order',\n\t\t\t\t} ),\n\t\t\t} );\n\n\t\t\toptions = options.filter( ( option ) => option.title !== '' );\n\n\t\t\treturn options;\n\t\t},\n\t\tgetOptionKeywords( item ) {\n\t\t\tconst expansionWords = item.title.split( /\\s+/ );\n\t\t\treturn [ ...expansionWords ];\n\t\t},\n\t\tgetOptionLabel( item ) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tkey=\"icon\"\n\t\t\t\t\t\ticon={ item.subtype === 'page' ? page : post }\n\t\t\t\t\t/>\n\t\t\t\t\t{ item.title }\n\t\t\t\t</>\n\t\t\t);\n\t\t},\n\t\tgetOptionCompletion( item ) {\n\t\t\treturn <a href={ item.url }>{ item.title }</a>;\n\t\t},\n\t};\n}\n\n/**\n * Creates a suggestion list for links to posts or pages..\n *\n * @return {WPCompleter} A link completer.\n */\nexport default createLinkCompleter();\n","/**\n * WordPress dependencies\n */\nimport { applyFilters, hasFilter } from '@wordpress/hooks';\nimport {\n\tAutocomplete,\n\t__unstableUseAutocompleteProps as useAutocompleteProps,\n} from '@wordpress/components';\nimport { useMemo } from '@wordpress/element';\nimport { getDefaultBlockName, getBlockSupport } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit/context';\nimport blockAutocompleter from '../../autocompleters/block';\nimport linkAutocompleter from '../../autocompleters/link';\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\nfunction useCompleters( { completers = EMPTY_ARRAY } ) {\n\tconst { name } = useBlockEditContext();\n\treturn useMemo( () => {\n\t\tlet filteredCompleters = [ ...completers, linkAutocompleter ];\n\n\t\tif (\n\t\t\tname === getDefaultBlockName() ||\n\t\t\tgetBlockSupport( name, '__experimentalSlashInserter', false )\n\t\t) {\n\t\t\tfilteredCompleters = [ ...filteredCompleters, blockAutocompleter ];\n\t\t}\n\n\t\tif ( hasFilter( 'editor.Autocomplete.completers' ) ) {\n\t\t\t// Provide copies so filters may directly modify them.\n\t\t\tif ( filteredCompleters === completers ) {\n\t\t\t\tfilteredCompleters = filteredCompleters.map(\n\t\t\t\t\t( completer ) => ( { ...completer } )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfilteredCompleters = applyFilters(\n\t\t\t\t'editor.Autocomplete.completers',\n\t\t\t\tfilteredCompleters,\n\t\t\t\tname\n\t\t\t);\n\t\t}\n\n\t\treturn filteredCompleters;\n\t}, [ completers, name ] );\n}\n\nexport function useBlockEditorAutocompleteProps( props ) {\n\treturn useAutocompleteProps( {\n\t\t...props,\n\t\tcompleters: useCompleters( props ),\n\t} );\n}\n\n/**\n * Wrap the default Autocomplete component with one that supports a filter hook\n * for customizing its list of autocompleters.\n *\n * @type {import('react').FC}\n */\nfunction BlockEditorAutocomplete( props ) {\n\treturn <Autocomplete { ...props } completers={ useCompleters( props ) } />;\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/autocomplete/README.md\n */\nexport default BlockEditorAutocomplete;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst fullscreen = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M4.2 9h1.5V5.8H9V4.2H4.2V9zm14 9.2H15v1.5h4.8V15h-1.5v3.2zM15 4.2v1.5h3.2V9h1.5V4.2H15zM5.8 15H4.2v4.8H9v-1.5H5.8V15z\" />\n\t</SVG>\n);\n\nexport default fullscreen;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { ToolbarButton } from '@wordpress/components';\nimport { fullscreen } from '@wordpress/icons';\n\nfunction BlockFullHeightAlignmentControl( {\n\tisActive,\n\tlabel = __( 'Toggle full height' ),\n\tonToggle,\n\tisDisabled,\n} ) {\n\treturn (\n\t\t<ToolbarButton\n\t\t\tisActive={ isActive }\n\t\t\ticon={ fullscreen }\n\t\t\tlabel={ label }\n\t\t\tonClick={ () => onToggle( ! isActive ) }\n\t\t\tdisabled={ isDisabled }\n\t\t/>\n\t);\n}\n\nexport default BlockFullHeightAlignmentControl;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { DOWN } from '@wordpress/keycodes';\nimport {\n\tToolbarButton,\n\tDropdown,\n\t__experimentalAlignmentMatrixControl as AlignmentMatrixControl,\n} from '@wordpress/components';\n\nconst noop = () => {};\n\nfunction BlockAlignmentMatrixControl( props ) {\n\tconst {\n\t\tlabel = __( 'Change matrix alignment' ),\n\t\tonChange = noop,\n\t\tvalue = 'center',\n\t\tisDisabled,\n\t} = props;\n\n\tconst icon = <AlignmentMatrixControl.Icon value={ value } />;\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ { variant: 'toolbar', placement: 'bottom-start' } }\n\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\tconst openOnArrowDown = ( event ) => {\n\t\t\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tonToggle();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\treturn (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\tonKeyDown={ openOnArrowDown }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tshowTooltip\n\t\t\t\t\t\tdisabled={ isDisabled }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t} }\n\t\t\trenderContent={ () => (\n\t\t\t\t<AlignmentMatrixControl\n\t\t\t\t\thasFocusBorder={ false }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t/>\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nexport default BlockAlignmentMatrixControl;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronRightSmall = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z\" />\n\t</SVG>\n);\n\nexport default chevronRightSmall;\n","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { chevronRightSmall, Icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockTitle from '../block-title';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\n/**\n * Block breadcrumb component, displaying the hierarchy of the current block selection as a breadcrumb.\n *\n * @param {Object} props               Component props.\n * @param {string} props.rootLabelText Translated label for the root element of the breadcrumb trail.\n * @return {WPElement}                 Block Breadcrumb.\n */\nfunction BlockBreadcrumb( { rootLabelText } ) {\n\tconst { selectBlock, clearSelectedBlock } = useDispatch( blockEditorStore );\n\tconst { clientId, parents, hasSelection } = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSelectionStart,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlockParents,\n\t\t\tgetBlockEditingMode,\n\t\t} = unlock( select( blockEditorStore ) );\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\treturn {\n\t\t\tparents: getBlockParents( selectedBlockClientId ).filter(\n\t\t\t\t( parentClientId ) =>\n\t\t\t\t\tgetBlockEditingMode( parentClientId ) !== 'disabled'\n\t\t\t),\n\t\t\tclientId: selectedBlockClientId,\n\t\t\thasSelection: !! getSelectionStart().clientId,\n\t\t};\n\t}, [] );\n\tconst rootLabel = rootLabelText || __( 'Document' );\n\n\t/*\n\t * Disable reason: The `list` ARIA role is redundant but\n\t * Safari+VoiceOver won't announce the list otherwise.\n\t */\n\t/* eslint-disable jsx-a11y/no-redundant-roles */\n\treturn (\n\t\t<ul\n\t\t\tclassName=\"block-editor-block-breadcrumb\"\n\t\t\trole=\"list\"\n\t\t\taria-label={ __( 'Block breadcrumb' ) }\n\t\t>\n\t\t\t<li\n\t\t\t\tclassName={\n\t\t\t\t\t! hasSelection\n\t\t\t\t\t\t? 'block-editor-block-breadcrumb__current'\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\taria-current={ ! hasSelection ? 'true' : undefined }\n\t\t\t>\n\t\t\t\t{ hasSelection && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__button\"\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tonClick={ clearSelectedBlock }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ rootLabel }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\t{ ! hasSelection && rootLabel }\n\t\t\t\t{ !! clientId && (\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={ chevronRightSmall }\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__separator\"\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</li>\n\n\t\t\t{ parents.map( ( parentClientId ) => (\n\t\t\t\t<li key={ parentClientId }>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__button\"\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tonClick={ () => selectBlock( parentClientId ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockTitle\n\t\t\t\t\t\t\tclientId={ parentClientId }\n\t\t\t\t\t\t\tmaximumLength={ 35 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={ chevronRightSmall }\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__separator\"\n\t\t\t\t\t/>\n\t\t\t\t</li>\n\t\t\t) ) }\n\t\t\t{ !! clientId && (\n\t\t\t\t<li\n\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__current\"\n\t\t\t\t\taria-current=\"true\"\n\t\t\t\t>\n\t\t\t\t\t<BlockTitle clientId={ clientId } maximumLength={ 35 } />\n\t\t\t\t</li>\n\t\t\t) }\n\t\t</ul>\n\t\t/* eslint-enable jsx-a11y/no-redundant-roles */\n\t);\n}\n\nexport default BlockBreadcrumb;\n","/**\n * WordPress dependencies\n */\nimport {\n\tToolbarButton,\n\tDropdown,\n\tToolbarGroup,\n\tSVG,\n\tPath,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { DOWN } from '@wordpress/keycodes';\nimport deprecated from '@wordpress/deprecated';\n\nconst ColorSelectorSVGIcon = () => (\n\t<SVG xmlns=\"https://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\n\t\t<Path d=\"M7.434 5l3.18 9.16H8.538l-.692-2.184H4.628l-.705 2.184H2L5.18 5h2.254zm-1.13 1.904h-.115l-1.148 3.593H7.44L6.304 6.904zM14.348 7.006c1.853 0 2.9.876 2.9 2.374v4.78h-1.79v-.914h-.114c-.362.64-1.123 1.022-2.031 1.022-1.346 0-2.292-.826-2.292-2.108 0-1.27.972-2.006 2.71-2.107l1.696-.102V9.38c0-.584-.42-.914-1.18-.914-.667 0-1.112.228-1.264.647h-1.701c.12-1.295 1.307-2.107 3.066-2.107zm1.079 4.1l-1.416.09c-.793.056-1.18.342-1.18.844 0 .52.45.837 1.091.837.857 0 1.505-.545 1.505-1.256v-.515z\" />\n\t</SVG>\n);\n\n/**\n * Color Selector Icon component.\n *\n * @param {Object} props           Component properties.\n * @param {Object} props.style     Style object.\n * @param {string} props.className Class name for component.\n *\n * @return {*} React Icon component.\n */\nconst ColorSelectorIcon = ( { style, className } ) => {\n\treturn (\n\t\t<div className=\"block-library-colors-selector__icon-container\">\n\t\t\t<div\n\t\t\t\tclassName={ `${ className } block-library-colors-selector__state-selection` }\n\t\t\t\tstyle={ style }\n\t\t\t>\n\t\t\t\t<ColorSelectorSVGIcon />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\n/**\n * Renders the Colors Selector Toolbar with the icon button.\n *\n * @param {Object} props                 Component properties.\n * @param {Object} props.TextColor       Text color component that wraps icon.\n * @param {Object} props.BackgroundColor Background color component that wraps icon.\n *\n * @return {*} React toggle button component.\n */\nconst renderToggleComponent =\n\t( { TextColor, BackgroundColor } ) =>\n\t( { onToggle, isOpen } ) => {\n\t\tconst openOnArrowDown = ( event ) => {\n\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tonToggle();\n\t\t\t}\n\t\t};\n\n\t\treturn (\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName=\"components-toolbar__control block-library-colors-selector__toggle\"\n\t\t\t\t\tlabel={ __( 'Open Colors Selector' ) }\n\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\tonKeyDown={ openOnArrowDown }\n\t\t\t\t\ticon={\n\t\t\t\t\t\t<BackgroundColor>\n\t\t\t\t\t\t\t<TextColor>\n\t\t\t\t\t\t\t\t<ColorSelectorIcon />\n\t\t\t\t\t\t\t</TextColor>\n\t\t\t\t\t\t</BackgroundColor>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t);\n\t};\n\nconst BlockColorsStyleSelector = ( { children, ...other } ) => {\n\tdeprecated( `wp.blockEditor.BlockColorsStyleSelector`, {\n\t\talternative: 'block supports API',\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t} );\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ { placement: 'bottom-start' } }\n\t\t\tclassName=\"block-library-colors-selector\"\n\t\t\tcontentClassName=\"block-library-colors-selector__popover\"\n\t\t\trenderToggle={ renderToggleComponent( other ) }\n\t\t\trenderContent={ () => children }\n\t\t/>\n\t);\n};\n\nexport default BlockColorsStyleSelector;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst listView = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z\" />\n\t</SVG>\n);\n\nexport default listView;\n","/**\n * WordPress dependencies\n */\nimport { createContext, useContext } from '@wordpress/element';\n\nexport const ListViewContext = createContext( {} );\n\nexport const useListViewContext = () => useContext( ListViewContext );\n","/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\n\n/**\n * A component specifically designed to be used as an element referenced\n * by ARIA attributes such as `aria-labelledby` or `aria-describedby`.\n *\n * @param {Object}                    props          Props.\n * @param {import('react').ReactNode} props.children\n */\nexport default function AriaReferencedText( { children, ...props } ) {\n\tconst ref = useRef();\n\n\tuseEffect( () => {\n\t\tif ( ref.current ) {\n\t\t\t// This seems like a no-op, but it fixes a bug in Firefox where\n\t\t\t// it fails to recompute the text when only the text node changes.\n\t\t\t// @see https://github.com/WordPress/gutenberg/pull/51035\n\t\t\tref.current.textContent = ref.current.textContent;\n\t\t}\n\t}, [ children ] );\n\n\treturn (\n\t\t<div hidden { ...props } ref={ ref }>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { speak } from '@wordpress/a11y';\nimport { useSelect } from '@wordpress/data';\nimport { forwardRef, useEffect } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\nimport { useListViewContext } from './context';\nimport Inserter from '../inserter';\nimport AriaReferencedText from './aria-referenced-text';\n\nexport const Appender = forwardRef(\n\t( { nestingLevel, blockCount, clientId, ...props }, ref ) => {\n\t\tconst { insertedBlock, setInsertedBlock } = useListViewContext();\n\n\t\tconst instanceId = useInstanceId( Appender );\n\t\tconst { hideInserter } = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst { getTemplateLock, __unstableGetEditorMode } =\n\t\t\t\t\tselect( blockEditorStore );\n\n\t\t\t\treturn {\n\t\t\t\t\thideInserter:\n\t\t\t\t\t\t!! getTemplateLock( clientId ) ||\n\t\t\t\t\t\t__unstableGetEditorMode() === 'zoom-out',\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ clientId ]\n\t\t);\n\n\t\tconst blockTitle = useBlockDisplayTitle( {\n\t\t\tclientId,\n\t\t\tcontext: 'list-view',\n\t\t} );\n\n\t\tconst insertedBlockTitle = useBlockDisplayTitle( {\n\t\t\tclientId: insertedBlock?.clientId,\n\t\t\tcontext: 'list-view',\n\t\t} );\n\n\t\tuseEffect( () => {\n\t\t\tif ( ! insertedBlockTitle?.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tspeak(\n\t\t\t\tsprintf(\n\t\t\t\t\t// translators: %s: name of block being inserted (i.e. Paragraph, Image, Group etc)\n\t\t\t\t\t__( '%s block inserted' ),\n\t\t\t\t\tinsertedBlockTitle\n\t\t\t\t),\n\t\t\t\t'assertive'\n\t\t\t);\n\t\t}, [ insertedBlockTitle ] );\n\n\t\tif ( hideInserter ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst descriptionId = `list-view-appender__${ instanceId }`;\n\t\tconst description = sprintf(\n\t\t\t/* translators: 1: The name of the block. 2: The numerical position of the block. 3: The level of nesting for the block. */\n\t\t\t__( 'Append to %1$s block at position %2$d, Level %3$d' ),\n\t\t\tblockTitle,\n\t\t\tblockCount + 1,\n\t\t\tnestingLevel\n\t\t);\n\n\t\treturn (\n\t\t\t<div className=\"list-view-appender\">\n\t\t\t\t<Inserter\n\t\t\t\t\tref={ ref }\n\t\t\t\t\trootClientId={ clientId }\n\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\tisAppender\n\t\t\t\t\tselectBlockOnInsert={ false }\n\t\t\t\t\tshouldDirectInsert={ false }\n\t\t\t\t\t__experimentalIsQuick\n\t\t\t\t\t{ ...props }\n\t\t\t\t\ttoggleProps={ { 'aria-describedby': descriptionId } }\n\t\t\t\t\tonSelectOrClose={ ( maybeInsertedBlock ) => {\n\t\t\t\t\t\tif ( maybeInsertedBlock?.clientId ) {\n\t\t\t\t\t\t\tsetInsertedBlock( maybeInsertedBlock );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<AriaReferencedText id={ descriptionId }>\n\t\t\t\t\t{ description }\n\t\t\t\t</AriaReferencedText>\n\t\t\t</div>\n\t\t);\n\t}\n);\n","/**\n * External dependencies\n */\nimport { animated } from '@react-spring/web';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __experimentalTreeGridRow as TreeGridRow } from '@wordpress/components';\nimport { useMergeRefs } from '@wordpress/compose';\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useMovingAnimation from '../use-moving-animation';\n\nconst AnimatedTreeGridRow = animated( TreeGridRow );\n\nconst ListViewLeaf = forwardRef(\n\t(\n\t\t{\n\t\t\tisSelected,\n\t\t\tposition,\n\t\t\tlevel,\n\t\t\trowCount,\n\t\t\tchildren,\n\t\t\tclassName,\n\t\t\tpath,\n\t\t\t...props\n\t\t},\n\t\tref\n\t) => {\n\t\tconst animationRef = useMovingAnimation( {\n\t\t\tisSelected,\n\t\t\tadjustScrolling: false,\n\t\t\tenableAnimation: true,\n\t\t\ttriggerAnimationOnChange: path,\n\t\t} );\n\n\t\tconst mergedRef = useMergeRefs( [ ref, animationRef ] );\n\n\t\treturn (\n\t\t\t<AnimatedTreeGridRow\n\t\t\t\tref={ mergedRef }\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'block-editor-list-view-leaf',\n\t\t\t\t\tclassName\n\t\t\t\t) }\n\t\t\t\tlevel={ level }\n\t\t\t\tpositionInSet={ position }\n\t\t\t\tsetSize={ rowCount }\n\t\t\t\tisExpanded={ undefined }\n\t\t\t\t{ ...props }\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</AnimatedTreeGridRow>\n\t\t);\n\t}\n);\n\nexport default ListViewLeaf;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst lockSmall = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M15 11h-.2V9c0-1.5-1.2-2.8-2.8-2.8S9.2 7.5 9.2 9v2H9c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1h6c.6 0 1-.4 1-1v-4c0-.6-.4-1-1-1zm-1.8 0h-2.5V9c0-.7.6-1.2 1.2-1.2s1.2.6 1.2 1.2v2z\"\n\t\t/>\n\t</SVG>\n);\n\nexport default lockSmall;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst chevronLeftSmall = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z\" />\n\t</SVG>\n);\n\nexport default chevronLeftSmall;\n","/**\n * WordPress dependencies\n */\nimport { chevronRightSmall, chevronLeftSmall, Icon } from '@wordpress/icons';\nimport { isRTL } from '@wordpress/i18n';\n\nexport default function ListViewExpander( { onClick } ) {\n\treturn (\n\t\t// Keyboard events are handled by TreeGrid see: components/src/tree-grid/index.js\n\t\t//\n\t\t// The expander component is implemented as a pseudo element in the w3 example\n\t\t// https://www.w3.org/TR/wai-aria-practices/examples/treegrid/treegrid-1.html\n\t\t//\n\t\t// We've mimicked this by adding an icon with aria-hidden set to true to hide this from the accessibility tree.\n\t\t// For the current tree grid implementation, please do not try to make this a button.\n\t\t//\n\t\t// eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions\n\t\t<span\n\t\t\tclassName=\"block-editor-list-view__expander\"\n\t\t\tonClick={ ( event ) => onClick( event, { forceToggle: true } ) }\n\t\t\taria-hidden=\"true\"\n\t\t\tdata-testid=\"list-view-expander\"\n\t\t>\n\t\t\t<Icon icon={ isRTL() ? chevronLeftSmall : chevronRightSmall } />\n\t\t</span>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\t__experimentalHStack as HStack,\n\t__experimentalTruncate as Truncate,\n} from '@wordpress/components';\nimport { forwardRef } from '@wordpress/element';\nimport { Icon, lockSmall as lock } from '@wordpress/icons';\nimport { SPACE, ENTER, BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __unstableUseShortcutEventMatch as useShortcutEventMatch } from '@wordpress/keyboard-shortcuts';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\nimport ListViewExpander from './expander';\nimport { useBlockLock } from '../block-lock';\nimport { store as blockEditorStore } from '../../store';\n\nfunction ListViewBlockSelectButton(\n\t{\n\t\tclassName,\n\t\tblock: { clientId },\n\t\tonClick,\n\t\tonToggleExpanded,\n\t\ttabIndex,\n\t\tonFocus,\n\t\tonDragStart,\n\t\tonDragEnd,\n\t\tdraggable,\n\t\tisExpanded,\n\t\tariaLabel,\n\t\tariaDescribedBy,\n\t\tupdateFocusAndSelection,\n\t},\n\tref\n) {\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst blockTitle = useBlockDisplayTitle( {\n\t\tclientId,\n\t\tcontext: 'list-view',\n\t} );\n\tconst { isLocked } = useBlockLock( clientId );\n\tconst {\n\t\tgetSelectedBlockClientIds,\n\t\tgetPreviousBlockClientId,\n\t\tgetBlockRootClientId,\n\t\tgetBlockOrder,\n\t\tcanRemoveBlocks,\n\t} = useSelect( blockEditorStore );\n\tconst { removeBlocks } = useDispatch( blockEditorStore );\n\tconst isMatch = useShortcutEventMatch();\n\n\t// The `href` attribute triggers the browser's native HTML drag operations.\n\t// When the link is dragged, the element's outerHTML is set in DataTransfer object as text/html.\n\t// We need to clear any HTML drag data to prevent `pasteHandler` from firing\n\t// inside the `useOnBlockDrop` hook.\n\tconst onDragStartHandler = ( event ) => {\n\t\tevent.dataTransfer.clearData();\n\t\tonDragStart?.( event );\n\t};\n\n\t/**\n\t * @param {KeyboardEvent} event\n\t */\n\tfunction onKeyDownHandler( event ) {\n\t\tif ( event.keyCode === ENTER || event.keyCode === SPACE ) {\n\t\t\tonClick( event );\n\t\t} else if (\n\t\t\tevent.keyCode === BACKSPACE ||\n\t\t\tevent.keyCode === DELETE ||\n\t\t\tisMatch( 'core/block-editor/remove', event )\n\t\t) {\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst isDeletingSelectedBlocks =\n\t\t\t\tselectedBlockClientIds.includes( clientId );\n\t\t\tconst firstBlockClientId = isDeletingSelectedBlocks\n\t\t\t\t? selectedBlockClientIds[ 0 ]\n\t\t\t\t: clientId;\n\t\t\tconst firstBlockRootClientId =\n\t\t\t\tgetBlockRootClientId( firstBlockClientId );\n\n\t\t\tconst blocksToDelete = isDeletingSelectedBlocks\n\t\t\t\t? selectedBlockClientIds\n\t\t\t\t: [ clientId ];\n\n\t\t\t// Don't update the selection if the blocks cannot be deleted.\n\t\t\tif ( ! canRemoveBlocks( blocksToDelete, firstBlockRootClientId ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet blockToFocus =\n\t\t\t\tgetPreviousBlockClientId( firstBlockClientId ) ??\n\t\t\t\t// If the previous block is not found (when the first block is deleted),\n\t\t\t\t// fallback to focus the parent block.\n\t\t\t\tfirstBlockRootClientId;\n\n\t\t\tremoveBlocks( blocksToDelete, false );\n\n\t\t\t// Update the selection if the original selection has been removed.\n\t\t\tconst shouldUpdateSelection =\n\t\t\t\tselectedBlockClientIds.length > 0 &&\n\t\t\t\tgetSelectedBlockClientIds().length === 0;\n\n\t\t\t// If there's no previous block nor parent block, focus the first block.\n\t\t\tif ( ! blockToFocus ) {\n\t\t\t\tblockToFocus = getBlockOrder()[ 0 ];\n\t\t\t}\n\n\t\t\tupdateFocusAndSelection( blockToFocus, shouldUpdateSelection );\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'block-editor-list-view-block-select-button',\n\t\t\t\t\tclassName\n\t\t\t\t) }\n\t\t\t\tonClick={ onClick }\n\t\t\t\tonKeyDown={ onKeyDownHandler }\n\t\t\t\tref={ ref }\n\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\tonFocus={ onFocus }\n\t\t\t\tonDragStart={ onDragStartHandler }\n\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\tdraggable={ draggable }\n\t\t\t\thref={ `#block-${ clientId }` }\n\t\t\t\taria-label={ ariaLabel }\n\t\t\t\taria-describedby={ ariaDescribedBy }\n\t\t\t\taria-expanded={ isExpanded }\n\t\t\t>\n\t\t\t\t<ListViewExpander onClick={ onToggleExpanded } />\n\t\t\t\t<BlockIcon\n\t\t\t\t\ticon={ blockInformation?.icon }\n\t\t\t\t\tshowColors\n\t\t\t\t\tcontext=\"list-view\"\n\t\t\t\t/>\n\t\t\t\t<HStack\n\t\t\t\t\talignment=\"center\"\n\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__label-wrapper\"\n\t\t\t\t\tjustify=\"flex-start\"\n\t\t\t\t\tspacing={ 1 }\n\t\t\t\t>\n\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__title\">\n\t\t\t\t\t\t<Truncate ellipsizeMode=\"auto\">{ blockTitle }</Truncate>\n\t\t\t\t\t</span>\n\t\t\t\t\t{ blockInformation?.anchor && (\n\t\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__anchor-wrapper\">\n\t\t\t\t\t\t\t<Truncate\n\t\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__anchor\"\n\t\t\t\t\t\t\t\tellipsizeMode=\"auto\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ blockInformation.anchor }\n\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) }\n\t\t\t\t\t{ isLocked && (\n\t\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__lock\">\n\t\t\t\t\t\t\t<Icon icon={ lock } />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) }\n\t\t\t\t</HStack>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n\nexport default forwardRef( ListViewBlockSelectButton );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport ListViewBlockSelectButton from './block-select-button';\nimport BlockDraggable from '../block-draggable';\nimport { store as blockEditorStore } from '../../store';\nimport { useListViewContext } from './context';\n\nconst ListViewBlockContents = forwardRef(\n\t(\n\t\t{\n\t\t\tonClick,\n\t\t\tonToggleExpanded,\n\t\t\tblock,\n\t\t\tisSelected,\n\t\t\tposition,\n\t\t\tsiblingBlockCount,\n\t\t\tlevel,\n\t\t\tisExpanded,\n\t\t\tselectedClientIds,\n\t\t\t...props\n\t\t},\n\t\tref\n\t) => {\n\t\tconst { clientId } = block;\n\n\t\tconst { blockMovingClientId, selectedBlockInBlockEditor } = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst { hasBlockMovingClientId, getSelectedBlockClientId } =\n\t\t\t\t\tselect( blockEditorStore );\n\t\t\t\treturn {\n\t\t\t\t\tblockMovingClientId: hasBlockMovingClientId(),\n\t\t\t\t\tselectedBlockInBlockEditor: getSelectedBlockClientId(),\n\t\t\t\t};\n\t\t\t},\n\t\t\t[]\n\t\t);\n\n\t\tconst { AdditionalBlockContent, insertedBlock, setInsertedBlock } =\n\t\t\tuseListViewContext();\n\n\t\tconst isBlockMoveTarget =\n\t\t\tblockMovingClientId && selectedBlockInBlockEditor === clientId;\n\n\t\tconst className = classnames( 'block-editor-list-view-block-contents', {\n\t\t\t'is-dropping-before': isBlockMoveTarget,\n\t\t} );\n\n\t\t// Only include all selected blocks if the currently clicked on block\n\t\t// is one of the selected blocks. This ensures that if a user attempts\n\t\t// to drag a block that isn't part of the selection, they're still able\n\t\t// to drag it and rearrange its position.\n\t\tconst draggableClientIds = selectedClientIds.includes( clientId )\n\t\t\t? selectedClientIds\n\t\t\t: [ clientId ];\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ AdditionalBlockContent && (\n\t\t\t\t\t<AdditionalBlockContent\n\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\tinsertedBlock={ insertedBlock }\n\t\t\t\t\t\tsetInsertedBlock={ setInsertedBlock }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<BlockDraggable clientIds={ draggableClientIds }>\n\t\t\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\n\t\t\t\t\t\t<ListViewBlockSelectButton\n\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\tclassName={ className }\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\t\t\tonToggleExpanded={ onToggleExpanded }\n\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\tsiblingBlockCount={ siblingBlockCount }\n\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\tdraggable={ draggable }\n\t\t\t\t\t\t\tonDragStart={ onDragStart }\n\t\t\t\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\t\t\t\tisExpanded={ isExpanded }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</BlockDraggable>\n\t\t\t</>\n\t\t);\n\t}\n);\n\nexport default ListViewBlockContents;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport {\n\t__experimentalTreeGridCell as TreeGridCell,\n\t__experimentalTreeGridItem as TreeGridItem,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { moreVertical } from '@wordpress/icons';\nimport {\n\tuseState,\n\tuseRef,\n\tuseEffect,\n\tuseCallback,\n\tmemo,\n} from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { sprintf, __ } from '@wordpress/i18n';\nimport { focus } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport ListViewLeaf from './leaf';\nimport useListViewScrollIntoView from './use-list-view-scroll-into-view';\nimport {\n\tBlockMoverUpButton,\n\tBlockMoverDownButton,\n} from '../block-mover/button';\nimport ListViewBlockContents from './block-contents';\nimport { useListViewContext } from './context';\nimport { getBlockPositionDescription } from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport { useBlockLock } from '../block-lock';\nimport { unlock } from '../../lock-unlock';\nimport AriaReferencedText from './aria-referenced-text';\n\nfunction ListViewBlock( {\n\tblock: { clientId },\n\tisDragged,\n\tisSelected,\n\tisBranchSelected,\n\tselectBlock,\n\tposition,\n\tlevel,\n\trowCount,\n\tsiblingBlockCount,\n\tshowBlockMovers,\n\tpath,\n\tisExpanded,\n\tselectedClientIds,\n\tisSyncedBranch,\n} ) {\n\tconst cellRef = useRef( null );\n\tconst rowRef = useRef( null );\n\tconst [ isHovered, setIsHovered ] = useState( false );\n\n\tconst { isLocked, canEdit } = useBlockLock( clientId );\n\n\tconst isFirstSelectedBlock =\n\t\tisSelected && selectedClientIds[ 0 ] === clientId;\n\tconst isLastSelectedBlock =\n\t\tisSelected &&\n\t\tselectedClientIds[ selectedClientIds.length - 1 ] === clientId;\n\n\tconst { toggleBlockHighlight } = useDispatch( blockEditorStore );\n\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst blockTitle = blockInformation?.title || __( 'Untitled' );\n\tconst block = useSelect(\n\t\t( select ) => select( blockEditorStore ).getBlock( clientId ),\n\t\t[ clientId ]\n\t);\n\tconst blockName = useSelect(\n\t\t( select ) => select( blockEditorStore ).getBlockName( clientId ),\n\t\t[ clientId ]\n\t);\n\tconst blockEditingMode = useSelect(\n\t\t( select ) =>\n\t\t\tunlock( select( blockEditorStore ) ).getBlockEditingMode(\n\t\t\t\tclientId\n\t\t\t),\n\t\t[ clientId ]\n\t);\n\n\tconst showBlockActions =\n\t\t// When a block hides its toolbar it also hides the block settings menu,\n\t\t// since that menu is part of the toolbar in the editor canvas.\n\t\t// List View respects this by also hiding the block settings menu.\n\t\thasBlockSupport( blockName, '__experimentalToolbar', true ) &&\n\t\t// Don't show the settings menu if block is disabled or content only.\n\t\tblockEditingMode === 'default';\n\tconst instanceId = useInstanceId( ListViewBlock );\n\tconst descriptionId = `list-view-block-select-button__${ instanceId }`;\n\tconst blockPositionDescription = getBlockPositionDescription(\n\t\tposition,\n\t\tsiblingBlockCount,\n\t\tlevel\n\t);\n\n\tconst blockAriaLabel = isLocked\n\t\t? sprintf(\n\t\t\t\t// translators: %s: The title of the block. This string indicates a link to select the locked block.\n\t\t\t\t__( '%s (locked)' ),\n\t\t\t\tblockTitle\n\t\t  )\n\t\t: blockTitle;\n\n\tconst settingsAriaLabel = sprintf(\n\t\t// translators: %s: The title of the block.\n\t\t__( 'Options for %s' ),\n\t\tblockTitle\n\t);\n\n\tconst {\n\t\tisTreeGridMounted,\n\t\texpand,\n\t\tcollapse,\n\t\tBlockSettingsMenu,\n\t\tlistViewInstanceId,\n\t\texpandedState,\n\t\tsetInsertedBlock,\n\t\ttreeGridElementRef,\n\t} = useListViewContext();\n\n\tconst hasSiblings = siblingBlockCount > 0;\n\tconst hasRenderedMovers = showBlockMovers && hasSiblings;\n\tconst moverCellClassName = classnames(\n\t\t'block-editor-list-view-block__mover-cell',\n\t\t{ 'is-visible': isHovered || isSelected }\n\t);\n\n\tconst listViewBlockSettingsClassName = classnames(\n\t\t'block-editor-list-view-block__menu-cell',\n\t\t{ 'is-visible': isHovered || isFirstSelectedBlock }\n\t);\n\n\t// If ListView has experimental features related to the Persistent List View,\n\t// only focus the selected list item on mount; otherwise the list would always\n\t// try to steal the focus from the editor canvas.\n\tuseEffect( () => {\n\t\tif ( ! isTreeGridMounted && isSelected ) {\n\t\t\tcellRef.current.focus();\n\t\t}\n\t}, [] );\n\n\tconst onMouseEnter = useCallback( () => {\n\t\tsetIsHovered( true );\n\t\ttoggleBlockHighlight( clientId, true );\n\t}, [ clientId, setIsHovered, toggleBlockHighlight ] );\n\tconst onMouseLeave = useCallback( () => {\n\t\tsetIsHovered( false );\n\t\ttoggleBlockHighlight( clientId, false );\n\t}, [ clientId, setIsHovered, toggleBlockHighlight ] );\n\n\tconst selectEditorBlock = useCallback(\n\t\t( event ) => {\n\t\t\tselectBlock( event, clientId );\n\t\t\tevent.preventDefault();\n\t\t},\n\t\t[ clientId, selectBlock ]\n\t);\n\n\tconst updateFocusAndSelection = useCallback(\n\t\t( focusClientId, shouldSelectBlock ) => {\n\t\t\tif ( shouldSelectBlock ) {\n\t\t\t\tselectBlock( undefined, focusClientId, null, null );\n\t\t\t}\n\n\t\t\tconst getFocusElement = () => {\n\t\t\t\tconst row = treeGridElementRef.current?.querySelector(\n\t\t\t\t\t`[role=row][data-block=\"${ focusClientId }\"]`\n\t\t\t\t);\n\t\t\t\tif ( ! row ) return null;\n\t\t\t\t// Focus the first focusable in the row, which is the ListViewBlockSelectButton.\n\t\t\t\treturn focus.focusable.find( row )[ 0 ];\n\t\t\t};\n\n\t\t\tlet focusElement = getFocusElement();\n\t\t\tif ( focusElement ) {\n\t\t\t\tfocusElement.focus();\n\t\t\t} else {\n\t\t\t\t// The element hasn't been painted yet. Defer focusing on the next frame.\n\t\t\t\t// This could happen when all blocks have been deleted and the default block\n\t\t\t\t// hasn't been added to the editor yet.\n\t\t\t\twindow.requestAnimationFrame( () => {\n\t\t\t\t\tfocusElement = getFocusElement();\n\t\t\t\t\t// Ignore if the element still doesn't exist.\n\t\t\t\t\tif ( focusElement ) {\n\t\t\t\t\t\tfocusElement.focus();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\t\t[ selectBlock, treeGridElementRef ]\n\t);\n\n\tconst toggleExpanded = useCallback(\n\t\t( event ) => {\n\t\t\t// Prevent shift+click from opening link in a new window when toggling.\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tif ( isExpanded === true ) {\n\t\t\t\tcollapse( clientId );\n\t\t\t} else if ( isExpanded === false ) {\n\t\t\t\texpand( clientId );\n\t\t\t}\n\t\t},\n\t\t[ clientId, expand, collapse, isExpanded ]\n\t);\n\n\tlet colSpan;\n\tif ( hasRenderedMovers ) {\n\t\tcolSpan = 2;\n\t} else if ( ! showBlockActions ) {\n\t\tcolSpan = 3;\n\t}\n\n\tconst classes = classnames( {\n\t\t'is-selected': isSelected,\n\t\t'is-first-selected': isFirstSelectedBlock,\n\t\t'is-last-selected': isLastSelectedBlock,\n\t\t'is-branch-selected': isBranchSelected,\n\t\t'is-synced-branch': isSyncedBranch,\n\t\t'is-dragging': isDragged,\n\t\t'has-single-cell': ! showBlockActions,\n\t\t'is-synced': blockInformation?.isSynced,\n\t} );\n\n\t// Only include all selected blocks if the currently clicked on block\n\t// is one of the selected blocks. This ensures that if a user attempts\n\t// to alter a block that isn't part of the selection, they're still able\n\t// to do so.\n\tconst dropdownClientIds = selectedClientIds.includes( clientId )\n\t\t? selectedClientIds\n\t\t: [ clientId ];\n\n\t// Pass in a ref to the row, so that it can be scrolled\n\t// into view when selected. For long lists, the placeholder for the\n\t// selected block is also observed, within ListViewLeafPlaceholder.\n\tuseListViewScrollIntoView( {\n\t\tisSelected,\n\t\trowItemRef: rowRef,\n\t\tselectedClientIds,\n\t} );\n\n\t// Detect if there is a block in the canvas currently being edited and multi-selection is not happening.\n\tconst currentlyEditingBlockInCanvas =\n\t\tisSelected && selectedClientIds.length === 1;\n\n\treturn (\n\t\t<ListViewLeaf\n\t\t\tclassName={ classes }\n\t\t\tonMouseEnter={ onMouseEnter }\n\t\t\tonMouseLeave={ onMouseLeave }\n\t\t\tonFocus={ onMouseEnter }\n\t\t\tonBlur={ onMouseLeave }\n\t\t\tlevel={ level }\n\t\t\tposition={ position }\n\t\t\trowCount={ rowCount }\n\t\t\tpath={ path }\n\t\t\tid={ `list-view-${ listViewInstanceId }-block-${ clientId }` }\n\t\t\tdata-block={ clientId }\n\t\t\tdata-expanded={ canEdit ? isExpanded : undefined }\n\t\t\tref={ rowRef }\n\t\t>\n\t\t\t<TreeGridCell\n\t\t\t\tclassName=\"block-editor-list-view-block__contents-cell\"\n\t\t\t\tcolSpan={ colSpan }\n\t\t\t\tref={ cellRef }\n\t\t\t\taria-selected={ !! isSelected }\n\t\t\t>\n\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t<div className=\"block-editor-list-view-block__contents-container\">\n\t\t\t\t\t\t<ListViewBlockContents\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\tonClick={ selectEditorBlock }\n\t\t\t\t\t\t\tonToggleExpanded={ toggleExpanded }\n\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\tsiblingBlockCount={ siblingBlockCount }\n\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\ttabIndex={\n\t\t\t\t\t\t\t\tcurrentlyEditingBlockInCanvas ? 0 : tabIndex\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\tisExpanded={ canEdit ? isExpanded : undefined }\n\t\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\t\tariaLabel={ blockAriaLabel }\n\t\t\t\t\t\t\tariaDescribedBy={ descriptionId }\n\t\t\t\t\t\t\tupdateFocusAndSelection={ updateFocusAndSelection }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<AriaReferencedText id={ descriptionId }>\n\t\t\t\t\t\t\t{ blockPositionDescription }\n\t\t\t\t\t\t</AriaReferencedText>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</TreeGridCell>\n\t\t\t{ hasRenderedMovers && (\n\t\t\t\t<>\n\t\t\t\t\t<TreeGridCell\n\t\t\t\t\t\tclassName={ moverCellClassName }\n\t\t\t\t\t\twithoutGridItem\n\t\t\t\t\t>\n\t\t\t\t\t\t<TreeGridItem>\n\t\t\t\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t\t\t\t<BlockMoverUpButton\n\t\t\t\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\t\t\t\tclientIds={ [ clientId ] }\n\t\t\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</TreeGridItem>\n\t\t\t\t\t\t<TreeGridItem>\n\t\t\t\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t\t\t\t<BlockMoverDownButton\n\t\t\t\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\t\t\t\tclientIds={ [ clientId ] }\n\t\t\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</TreeGridItem>\n\t\t\t\t\t</TreeGridCell>\n\t\t\t\t</>\n\t\t\t) }\n\n\t\t\t{ showBlockActions && BlockSettingsMenu && (\n\t\t\t\t<TreeGridCell\n\t\t\t\t\tclassName={ listViewBlockSettingsClassName }\n\t\t\t\t\taria-selected={ !! isSelected }\n\t\t\t\t>\n\t\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t\t<BlockSettingsMenu\n\t\t\t\t\t\t\tclientIds={ dropdownClientIds }\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\t\t\tlabel={ settingsAriaLabel }\n\t\t\t\t\t\t\ttoggleProps={ {\n\t\t\t\t\t\t\t\tref,\n\t\t\t\t\t\t\t\tclassName: 'block-editor-list-view-block__menu',\n\t\t\t\t\t\t\t\ttabIndex,\n\t\t\t\t\t\t\t\tonFocus,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tdisableOpenOnArrowDown\n\t\t\t\t\t\t\texpand={ expand }\n\t\t\t\t\t\t\texpandedState={ expandedState }\n\t\t\t\t\t\t\tsetInsertedBlock={ setInsertedBlock }\n\t\t\t\t\t\t\t__experimentalSelectBlock={\n\t\t\t\t\t\t\t\tupdateFocusAndSelection\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</TreeGridCell>\n\t\t\t) }\n\t\t</ListViewLeaf>\n\t);\n}\n\nexport default memo( ListViewBlock );\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\n\nexport const getBlockPositionDescription = ( position, siblingCount, level ) =>\n\tsprintf(\n\t\t/* translators: 1: The numerical position of the block. 2: The total number of blocks. 3. The level of nesting for the block. */\n\t\t__( 'Block %1$d of %2$d, Level %3$d' ),\n\t\tposition,\n\t\tsiblingCount,\n\t\tlevel\n\t);\n\n/**\n * Returns true if the client ID occurs within the block selection or multi-selection,\n * or false otherwise.\n *\n * @param {string}          clientId               Block client ID.\n * @param {string|string[]} selectedBlockClientIds Selected block client ID, or an array of multi-selected blocks client IDs.\n *\n * @return {boolean} Whether the block is in multi-selection set.\n */\nexport const isClientIdSelected = ( clientId, selectedBlockClientIds ) =>\n\tArray.isArray( selectedBlockClientIds ) && selectedBlockClientIds.length\n\t\t? selectedBlockClientIds.indexOf( clientId ) !== -1\n\t\t: selectedBlockClientIds === clientId;\n\n/**\n * From a start and end clientId of potentially different nesting levels,\n * return the nearest-depth ids that have a common level of depth in the\n * nesting hierarchy. For multiple block selection, this ensure that the\n * selection is always at the same nesting level, and not split across\n * separate levels.\n *\n * @param {string}   startId      The first id of a selection.\n * @param {string}   endId        The end id of a selection, usually one that has been clicked on.\n * @param {string[]} startParents An array of ancestor ids for the start id, in descending order.\n * @param {string[]} endParents   An array of ancestor ids for the end id, in descending order.\n * @return {Object} An object containing the start and end ids.\n */\nexport function getCommonDepthClientIds(\n\tstartId,\n\tendId,\n\tstartParents,\n\tendParents\n) {\n\tconst startPath = [ ...startParents, startId ];\n\tconst endPath = [ ...endParents, endId ];\n\tconst depth = Math.min( startPath.length, endPath.length ) - 1;\n\tconst start = startPath[ depth ];\n\tconst end = endPath[ depth ];\n\n\treturn {\n\t\tstart,\n\t\tend,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { getScrollContainer } from '@wordpress/dom';\nimport { useLayoutEffect } from '@wordpress/element';\n\nexport default function useListViewScrollIntoView( {\n\tisSelected,\n\tselectedClientIds,\n\trowItemRef,\n} ) {\n\tconst isSingleSelection = selectedClientIds.length === 1;\n\n\tuseLayoutEffect( () => {\n\t\t// Skip scrolling into view if this particular block isn't selected,\n\t\t// or if more than one block is selected overall. This is to avoid\n\t\t// scrolling the view in a multi selection where the user has intentionally\n\t\t// selected multiple blocks within the list view, but the initially\n\t\t// selected block may be out of view.\n\t\tif ( ! isSelected || ! isSingleSelection || ! rowItemRef.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst scrollContainer = getScrollContainer( rowItemRef.current );\n\t\tconst { ownerDocument } = rowItemRef.current;\n\n\t\tconst windowScroll =\n\t\t\tscrollContainer === ownerDocument.body ||\n\t\t\tscrollContainer === ownerDocument.documentElement;\n\n\t\t// If the there is no scroll container, of if the scroll container is the window,\n\t\t// do not scroll into view, as the block is already in view.\n\t\tif ( windowScroll || ! scrollContainer ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rowRect = rowItemRef.current.getBoundingClientRect();\n\t\tconst scrollContainerRect = scrollContainer.getBoundingClientRect();\n\n\t\t// If the selected block is not currently visible, scroll to it.\n\t\tif (\n\t\t\trowRect.top < scrollContainerRect.top ||\n\t\t\trowRect.bottom > scrollContainerRect.bottom\n\t\t) {\n\t\t\trowItemRef.current.scrollIntoView();\n\t\t}\n\t}, [ isSelected, isSingleSelection, rowItemRef ] );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalTreeGridRow as TreeGridRow,\n\t__experimentalTreeGridCell as TreeGridCell,\n} from '@wordpress/components';\nimport { memo } from '@wordpress/element';\nimport { AsyncModeProvider, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { Appender } from './appender';\nimport ListViewBlock from './block';\nimport { useListViewContext } from './context';\nimport { isClientIdSelected } from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDisplayInformation from '../use-block-display-information';\n\n/**\n * Given a block, returns the total number of blocks in that subtree. This is used to help determine\n * the list position of a block.\n *\n * When a block is collapsed, we do not count their children as part of that total. In the current drag\n * implementation dragged blocks and their children are not counted.\n *\n * @param {Object}  block               block tree\n * @param {Object}  expandedState       state that notes which branches are collapsed\n * @param {Array}   draggedClientIds    a list of dragged client ids\n * @param {boolean} isExpandedByDefault flag to determine the default fallback expanded state.\n * @return {number} block count\n */\nfunction countBlocks(\n\tblock,\n\texpandedState,\n\tdraggedClientIds,\n\tisExpandedByDefault\n) {\n\tconst isDragged = draggedClientIds?.includes( block.clientId );\n\tif ( isDragged ) {\n\t\treturn 0;\n\t}\n\tconst isExpanded = expandedState[ block.clientId ] ?? isExpandedByDefault;\n\n\tif ( isExpanded ) {\n\t\treturn (\n\t\t\t1 +\n\t\t\tblock.innerBlocks.reduce(\n\t\t\t\tcountReducer(\n\t\t\t\t\texpandedState,\n\t\t\t\t\tdraggedClientIds,\n\t\t\t\t\tisExpandedByDefault\n\t\t\t\t),\n\t\t\t\t0\n\t\t\t)\n\t\t);\n\t}\n\treturn 1;\n}\nconst countReducer =\n\t( expandedState, draggedClientIds, isExpandedByDefault ) =>\n\t( count, block ) => {\n\t\tconst isDragged = draggedClientIds?.includes( block.clientId );\n\t\tif ( isDragged ) {\n\t\t\treturn count;\n\t\t}\n\t\tconst isExpanded =\n\t\t\texpandedState[ block.clientId ] ?? isExpandedByDefault;\n\t\tif ( isExpanded && block.innerBlocks.length > 0 ) {\n\t\t\treturn (\n\t\t\t\tcount +\n\t\t\t\tcountBlocks(\n\t\t\t\t\tblock,\n\t\t\t\t\texpandedState,\n\t\t\t\t\tdraggedClientIds,\n\t\t\t\t\tisExpandedByDefault\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\treturn count + 1;\n\t};\n\nconst noop = () => {};\n\nfunction ListViewBranch( props ) {\n\tconst {\n\t\tblocks,\n\t\tselectBlock = noop,\n\t\tshowBlockMovers,\n\t\tselectedClientIds,\n\t\tlevel = 1,\n\t\tpath = '',\n\t\tisBranchSelected = false,\n\t\tlistPosition = 0,\n\t\tfixedListWindow,\n\t\tisExpanded,\n\t\tparentId,\n\t\tshouldShowInnerBlocks = true,\n\t\tisSyncedBranch = false,\n\t\tshowAppender: showAppenderProp = true,\n\t} = props;\n\n\tconst parentBlockInformation = useBlockDisplayInformation( parentId );\n\tconst syncedBranch = isSyncedBranch || !! parentBlockInformation?.isSynced;\n\n\tconst canParentExpand = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! parentId ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn select( blockEditorStore ).canEditBlock( parentId );\n\t\t},\n\t\t[ parentId ]\n\t);\n\n\tconst { expandedState, draggedClientIds } = useListViewContext();\n\n\tif ( ! canParentExpand ) {\n\t\treturn null;\n\t}\n\n\t// Only show the appender at the first level.\n\tconst showAppender = showAppenderProp && level === 1;\n\tconst filteredBlocks = blocks.filter( Boolean );\n\tconst blockCount = filteredBlocks.length;\n\t// The appender means an extra row in List View, so add 1 to the row count.\n\tconst rowCount = showAppender ? blockCount + 1 : blockCount;\n\tlet nextPosition = listPosition;\n\n\treturn (\n\t\t<>\n\t\t\t{ filteredBlocks.map( ( block, index ) => {\n\t\t\t\tconst { clientId, innerBlocks } = block;\n\n\t\t\t\tif ( index > 0 ) {\n\t\t\t\t\tnextPosition += countBlocks(\n\t\t\t\t\t\tfilteredBlocks[ index - 1 ],\n\t\t\t\t\t\texpandedState,\n\t\t\t\t\t\tdraggedClientIds,\n\t\t\t\t\t\tisExpanded\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst { itemInView } = fixedListWindow;\n\t\t\t\tconst blockInView = itemInView( nextPosition );\n\n\t\t\t\tconst position = index + 1;\n\t\t\t\tconst updatedPath =\n\t\t\t\t\tpath.length > 0\n\t\t\t\t\t\t? `${ path }_${ position }`\n\t\t\t\t\t\t: `${ position }`;\n\t\t\t\tconst hasNestedBlocks = !! innerBlocks?.length;\n\n\t\t\t\tconst shouldExpand =\n\t\t\t\t\thasNestedBlocks && shouldShowInnerBlocks\n\t\t\t\t\t\t? expandedState[ clientId ] ?? isExpanded\n\t\t\t\t\t\t: undefined;\n\n\t\t\t\tconst isDragged = !! draggedClientIds?.includes( clientId );\n\n\t\t\t\t// Make updates to the selected or dragged blocks synchronous,\n\t\t\t\t// but asynchronous for any other block.\n\t\t\t\tconst isSelected = isClientIdSelected(\n\t\t\t\t\tclientId,\n\t\t\t\t\tselectedClientIds\n\t\t\t\t);\n\t\t\t\tconst isSelectedBranch =\n\t\t\t\t\tisBranchSelected || ( isSelected && hasNestedBlocks );\n\t\t\t\tconst showBlock = isDragged || blockInView || isSelected;\n\t\t\t\treturn (\n\t\t\t\t\t<AsyncModeProvider key={ clientId } value={ ! isSelected }>\n\t\t\t\t\t\t{ showBlock && (\n\t\t\t\t\t\t\t<ListViewBlock\n\t\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\t\tselectBlock={ selectBlock }\n\t\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\t\tisBranchSelected={ isSelectedBranch }\n\t\t\t\t\t\t\t\tisDragged={ isDragged }\n\t\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\t\trowCount={ rowCount }\n\t\t\t\t\t\t\t\tsiblingBlockCount={ blockCount }\n\t\t\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\t\t\tpath={ updatedPath }\n\t\t\t\t\t\t\t\tisExpanded={ shouldExpand }\n\t\t\t\t\t\t\t\tlistPosition={ nextPosition }\n\t\t\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\t\t\tisSyncedBranch={ syncedBranch }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ ! showBlock && (\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td className=\"block-editor-list-view-placeholder\" />\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ hasNestedBlocks && shouldExpand && ! isDragged && (\n\t\t\t\t\t\t\t<ListViewBranch\n\t\t\t\t\t\t\t\tparentId={ clientId }\n\t\t\t\t\t\t\t\tblocks={ innerBlocks }\n\t\t\t\t\t\t\t\tselectBlock={ selectBlock }\n\t\t\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\t\t\tlevel={ level + 1 }\n\t\t\t\t\t\t\t\tpath={ updatedPath }\n\t\t\t\t\t\t\t\tlistPosition={ nextPosition + 1 }\n\t\t\t\t\t\t\t\tfixedListWindow={ fixedListWindow }\n\t\t\t\t\t\t\t\tisBranchSelected={ isSelectedBranch }\n\t\t\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\t\t\tisExpanded={ isExpanded }\n\t\t\t\t\t\t\t\tisSyncedBranch={ syncedBranch }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</AsyncModeProvider>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t\t{ showAppender && (\n\t\t\t\t<TreeGridRow\n\t\t\t\t\tlevel={ level }\n\t\t\t\t\tsetSize={ rowCount }\n\t\t\t\t\tpositionInSet={ rowCount }\n\t\t\t\t\tisExpanded={ true }\n\t\t\t\t>\n\t\t\t\t\t<TreeGridCell>\n\t\t\t\t\t\t{ ( treeGridCellProps ) => (\n\t\t\t\t\t\t\t<Appender\n\t\t\t\t\t\t\t\tclientId={ parentId }\n\t\t\t\t\t\t\t\tnestingLevel={ level }\n\t\t\t\t\t\t\t\tblockCount={ blockCount }\n\t\t\t\t\t\t\t\t{ ...treeGridCellProps }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</TreeGridCell>\n\t\t\t\t</TreeGridRow>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default memo( ListViewBranch );\n","/**\n * WordPress dependencies\n */\nimport { Popover } from '@wordpress/components';\nimport { getScrollContainer } from '@wordpress/dom';\nimport { useCallback, useMemo } from '@wordpress/element';\n\nexport default function ListViewDropIndicator( {\n\tlistViewRef,\n\tblockDropTarget,\n} ) {\n\tconst { rootClientId, clientId, dropPosition } = blockDropTarget || {};\n\n\tconst [ rootBlockElement, blockElement ] = useMemo( () => {\n\t\tif ( ! listViewRef.current ) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// The rootClientId will be defined whenever dropping into inner\n\t\t// block lists, but is undefined when dropping at the root level.\n\t\tconst _rootBlockElement = rootClientId\n\t\t\t? listViewRef.current.querySelector(\n\t\t\t\t\t`[data-block=\"${ rootClientId }\"]`\n\t\t\t  )\n\t\t\t: undefined;\n\n\t\t// The clientId represents the sibling block, the dragged block will\n\t\t// usually be inserted adjacent to it. It will be undefined when\n\t\t// dropping a block into an empty block list.\n\t\tconst _blockElement = clientId\n\t\t\t? listViewRef.current.querySelector(\n\t\t\t\t\t`[data-block=\"${ clientId }\"]`\n\t\t\t  )\n\t\t\t: undefined;\n\n\t\treturn [ _rootBlockElement, _blockElement ];\n\t}, [ rootClientId, clientId ] );\n\n\t// The targetElement is the element that the drop indicator will appear\n\t// before or after. When dropping into an empty block list, blockElement\n\t// is undefined, so the indicator will appear after the rootBlockElement.\n\tconst targetElement = blockElement || rootBlockElement;\n\n\tconst getDropIndicatorIndent = useCallback(\n\t\t( targetElementRect ) => {\n\t\t\tif ( ! rootBlockElement ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\t// Calculate the indent using the block icon of the root block.\n\t\t\t// Using a classname selector here might be flaky and could be\n\t\t\t// improved.\n\t\t\tconst rootBlockIconElement = rootBlockElement.querySelector(\n\t\t\t\t'.block-editor-block-icon'\n\t\t\t);\n\t\t\tconst rootBlockIconRect =\n\t\t\t\trootBlockIconElement.getBoundingClientRect();\n\t\t\treturn rootBlockIconRect.right - targetElementRect.left;\n\t\t},\n\t\t[ rootBlockElement ]\n\t);\n\n\tconst getDropIndicatorWidth = useCallback(\n\t\t( targetElementRect, indent ) => {\n\t\t\tif ( ! targetElement ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\t// Default to assuming that the width of the drop indicator\n\t\t\t// should be the same as the target element.\n\t\t\tlet width = targetElement.offsetWidth;\n\n\t\t\t// In deeply nested lists, where a scrollbar is present,\n\t\t\t// the width of the drop indicator should be the width of\n\t\t\t// the scroll container, minus the distance from the left\n\t\t\t// edge of the scroll container to the left edge of the\n\t\t\t// target element.\n\t\t\tconst scrollContainer = getScrollContainer(\n\t\t\t\ttargetElement,\n\t\t\t\t'horizontal'\n\t\t\t);\n\n\t\t\tif ( scrollContainer ) {\n\t\t\t\tconst scrollContainerRect =\n\t\t\t\t\tscrollContainer.getBoundingClientRect();\n\n\t\t\t\tif ( scrollContainer.clientWidth < width ) {\n\t\t\t\t\twidth =\n\t\t\t\t\t\tscrollContainer.clientWidth -\n\t\t\t\t\t\t( targetElementRect.left - scrollContainerRect.left );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Subtract the indent from the final width of the indicator.\n\t\t\treturn width - indent;\n\t\t},\n\t\t[ targetElement ]\n\t);\n\n\tconst style = useMemo( () => {\n\t\tif ( ! targetElement ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst targetElementRect = targetElement.getBoundingClientRect();\n\t\tconst indent = getDropIndicatorIndent( targetElementRect );\n\n\t\treturn {\n\t\t\twidth: getDropIndicatorWidth( targetElementRect, indent ),\n\t\t};\n\t}, [ getDropIndicatorIndent, getDropIndicatorWidth, targetElement ] );\n\n\tconst popoverAnchor = useMemo( () => {\n\t\tconst isValidDropPosition =\n\t\t\tdropPosition === 'top' ||\n\t\t\tdropPosition === 'bottom' ||\n\t\t\tdropPosition === 'inside';\n\t\tif ( ! targetElement || ! isValidDropPosition ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\townerDocument: targetElement.ownerDocument,\n\t\t\tgetBoundingClientRect() {\n\t\t\t\tconst rect = targetElement.getBoundingClientRect();\n\t\t\t\tconst indent = getDropIndicatorIndent( rect );\n\t\t\t\tconst left = rect.left + indent;\n\t\t\t\tlet top = 0;\n\t\t\t\tlet bottom = 0;\n\n\t\t\t\tif ( dropPosition === 'top' ) {\n\t\t\t\t\ttop = rect.top;\n\t\t\t\t\tbottom = rect.top;\n\t\t\t\t} else {\n\t\t\t\t\t// `dropPosition` is either `bottom` or `inside`\n\t\t\t\t\ttop = rect.bottom;\n\t\t\t\t\tbottom = rect.bottom;\n\t\t\t\t}\n\n\t\t\t\tconst width = getDropIndicatorWidth( rect, indent );\n\t\t\t\tconst height = bottom - top;\n\n\t\t\t\treturn new window.DOMRect( left, top, width, height );\n\t\t\t},\n\t\t};\n\t}, [\n\t\ttargetElement,\n\t\tdropPosition,\n\t\tgetDropIndicatorIndent,\n\t\tgetDropIndicatorWidth,\n\t] );\n\n\tif ( ! targetElement ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Popover\n\t\t\tanimate={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tfocusOnMount={ false }\n\t\t\tclassName=\"block-editor-list-view-drop-indicator\"\n\t\t\tvariant=\"unstyled\"\n\t\t>\n\t\t\t<div\n\t\t\t\tstyle={ style }\n\t\t\t\tclassName=\"block-editor-list-view-drop-indicator__line\"\n\t\t\t/>\n\t\t</Popover>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useState, useCallback } from '@wordpress/element';\nimport {\n\tuseThrottle,\n\t__experimentalUseDropZone as useDropZone,\n} from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetDistanceToNearestEdge,\n\tisPointContainedByRect,\n} from '../../utils/math';\nimport useOnBlockDrop from '../use-on-block-drop';\nimport { store as blockEditorStore } from '../../store';\n\n/** @typedef {import('../../utils/math').WPPoint} WPPoint */\n\n/**\n * The type of a drag event.\n *\n * @typedef {'default'|'file'|'html'} WPDragEventType\n */\n\n/**\n * An object representing data for blocks in the DOM used by drag and drop.\n *\n * @typedef {Object} WPListViewDropZoneBlock\n * @property {string}  clientId                        The client id for the block.\n * @property {string}  rootClientId                    The root client id for the block.\n * @property {number}  blockIndex                      The block's index.\n * @property {Element} element                         The DOM element representing the block.\n * @property {number}  innerBlockCount                 The number of inner blocks the block has.\n * @property {boolean} isDraggedBlock                  Whether the block is currently being dragged.\n * @property {boolean} isExpanded                      Whether the block is expanded in the UI.\n * @property {boolean} canInsertDraggedBlocksAsSibling Whether the dragged block can be a sibling of this block.\n * @property {boolean} canInsertDraggedBlocksAsChild   Whether the dragged block can be a child of this block.\n */\n\n/**\n * An array representing data for blocks in the DOM used by drag and drop.\n *\n * @typedef {WPListViewDropZoneBlock[]} WPListViewDropZoneBlocks\n */\n\n/**\n * An object containing details of a drop target.\n *\n * @typedef {Object} WPListViewDropZoneTarget\n * @property {string}                  blockIndex   The insertion index.\n * @property {string}                  rootClientId The root client id for the block.\n * @property {string|undefined}        clientId     The client id for the block.\n * @property {'top'|'bottom'|'inside'} dropPosition The position relative to the block that the user is dropping to.\n *                                                  'inside' refers to nesting as an inner block.\n */\n\n// When the indentation level, the corresponding left margin in `style.scss`\n// must be updated as well to ensure the drop zone is aligned with the indentation.\nexport const NESTING_LEVEL_INDENTATION = 28;\n\n/**\n * Determines whether the user is positioning the dragged block to be\n * moved up to a parent level.\n *\n * Determined based on nesting level indentation of the current block.\n *\n * @param {WPPoint} point        The point representing the cursor position when dragging.\n * @param {DOMRect} rect         The rectangle.\n * @param {number}  nestingLevel The nesting level of the block.\n * @return {boolean} Whether the gesture is an upward gesture.\n */\nfunction isUpGesture( point, rect, nestingLevel = 1 ) {\n\t// If the block is nested, and the user is dragging to the bottom\n\t// left of the block, then it is an upward gesture.\n\tconst blockIndentPosition =\n\t\trect.left + nestingLevel * NESTING_LEVEL_INDENTATION;\n\treturn point.x < blockIndentPosition;\n}\n\n/**\n * Returns how many nesting levels up the user is attempting to drag to.\n *\n * The relative parent level is calculated based on how far\n * the cursor is from the provided nesting level (e.g. of a candidate block\n * that the user is hovering over). The nesting level is considered \"desired\"\n * because it is not guaranteed that the user will be able to drag to the desired level.\n *\n * The returned integer can be used to access an ascending array\n * of parent blocks, where the first item is the block the user\n * is hovering over, and the last item is the root block.\n *\n * @param {WPPoint} point        The point representing the cursor position when dragging.\n * @param {DOMRect} rect         The rectangle.\n * @param {number}  nestingLevel The nesting level of the block.\n * @return {number} The desired relative parent level.\n */\nfunction getDesiredRelativeParentLevel( point, rect, nestingLevel = 1 ) {\n\tconst blockIndentPosition =\n\t\trect.left + nestingLevel * NESTING_LEVEL_INDENTATION;\n\tconst desiredParentLevel = Math.round(\n\t\t( point.x - blockIndentPosition ) / NESTING_LEVEL_INDENTATION\n\t);\n\treturn Math.abs( desiredParentLevel );\n}\n\n/**\n * Returns an array of the parent blocks of the block the user is dropping to.\n *\n * @param {WPListViewDropZoneBlock}  candidateBlockData The block the user is dropping to.\n * @param {WPListViewDropZoneBlocks} blocksData         Data about the blocks in list view.\n * @return {WPListViewDropZoneBlocks} An array of block parents, including the block the user is dropping to.\n */\nfunction getCandidateBlockParents( candidateBlockData, blocksData ) {\n\tconst candidateBlockParents = [];\n\tlet currentBlockData = candidateBlockData;\n\n\twhile ( currentBlockData ) {\n\t\tcandidateBlockParents.push( { ...currentBlockData } );\n\t\tcurrentBlockData = blocksData.find(\n\t\t\t( blockData ) =>\n\t\t\t\tblockData.clientId === currentBlockData.rootClientId\n\t\t);\n\t}\n\n\treturn candidateBlockParents;\n}\n\n/**\n * Given a list of blocks data and a block index, return the next non-dragged\n * block. This is used to determine the block that the user is dropping to,\n * while ignoring the dragged block.\n *\n * @param {WPListViewDropZoneBlocks} blocksData Data about the blocks in list view.\n * @param {number}                   index      The index to begin searching from.\n * @return {WPListViewDropZoneBlock | undefined} The next non-dragged block.\n */\nfunction getNextNonDraggedBlock( blocksData, index ) {\n\tconst nextBlockData = blocksData[ index + 1 ];\n\tif ( nextBlockData && nextBlockData.isDraggedBlock ) {\n\t\treturn getNextNonDraggedBlock( blocksData, index + 1 );\n\t}\n\n\treturn nextBlockData;\n}\n\n/**\n * Determines whether the user positioning the dragged block to nest as an\n * inner block.\n *\n * Determined based on nesting level indentation of the current block, plus\n * the indentation of the next level of nesting. The vertical position of the\n * cursor must also be within the block.\n *\n * @param {WPPoint} point        The point representing the cursor position when dragging.\n * @param {DOMRect} rect         The rectangle.\n * @param {number}  nestingLevel The nesting level of the block.\n */\nfunction isNestingGesture( point, rect, nestingLevel = 1 ) {\n\tconst blockIndentPosition =\n\t\trect.left + nestingLevel * NESTING_LEVEL_INDENTATION;\n\treturn (\n\t\tpoint.x > blockIndentPosition + NESTING_LEVEL_INDENTATION &&\n\t\tpoint.y < rect.bottom\n\t);\n}\n\n// Block navigation is always a vertical list, so only allow dropping\n// to the above or below a block.\nconst ALLOWED_DROP_EDGES = [ 'top', 'bottom' ];\n\n/**\n * Given blocks data and the cursor position, compute the drop target.\n *\n * @param {WPListViewDropZoneBlocks} blocksData Data about the blocks in list view.\n * @param {WPPoint}                  position   The point representing the cursor position when dragging.\n *\n * @return {WPListViewDropZoneTarget | undefined} An object containing data about the drop target.\n */\nexport function getListViewDropTarget( blocksData, position ) {\n\tlet candidateEdge;\n\tlet candidateBlockData;\n\tlet candidateDistance;\n\tlet candidateRect;\n\tlet candidateBlockIndex;\n\n\tfor ( let i = 0; i < blocksData.length; i++ ) {\n\t\tconst blockData = blocksData[ i ];\n\t\tif ( blockData.isDraggedBlock ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst rect = blockData.element.getBoundingClientRect();\n\t\tconst [ distance, edge ] = getDistanceToNearestEdge(\n\t\t\tposition,\n\t\t\trect,\n\t\t\tALLOWED_DROP_EDGES\n\t\t);\n\n\t\tconst isCursorWithinBlock = isPointContainedByRect( position, rect );\n\t\tif (\n\t\t\tcandidateDistance === undefined ||\n\t\t\tdistance < candidateDistance ||\n\t\t\tisCursorWithinBlock\n\t\t) {\n\t\t\tcandidateDistance = distance;\n\n\t\t\tconst index = blocksData.indexOf( blockData );\n\t\t\tconst previousBlockData = blocksData[ index - 1 ];\n\n\t\t\t// If dragging near the top of a block and the preceding block\n\t\t\t// is at the same level, use the preceding block as the candidate\n\t\t\t// instead, as later it makes determining a nesting drop easier.\n\t\t\tif (\n\t\t\t\tedge === 'top' &&\n\t\t\t\tpreviousBlockData &&\n\t\t\t\tpreviousBlockData.rootClientId === blockData.rootClientId &&\n\t\t\t\t! previousBlockData.isDraggedBlock\n\t\t\t) {\n\t\t\t\tcandidateBlockData = previousBlockData;\n\t\t\t\tcandidateEdge = 'bottom';\n\t\t\t\tcandidateRect =\n\t\t\t\t\tpreviousBlockData.element.getBoundingClientRect();\n\t\t\t\tcandidateBlockIndex = index - 1;\n\t\t\t} else {\n\t\t\t\tcandidateBlockData = blockData;\n\t\t\t\tcandidateEdge = edge;\n\t\t\t\tcandidateRect = rect;\n\t\t\t\tcandidateBlockIndex = index;\n\t\t\t}\n\n\t\t\t// If the mouse position is within the block, break early\n\t\t\t// as the user would intend to drop either before or after\n\t\t\t// this block.\n\t\t\t//\n\t\t\t// This solves an issue where some rows in the list view\n\t\t\t// tree overlap slightly due to sub-pixel rendering.\n\t\t\tif ( isCursorWithinBlock ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( ! candidateBlockData ) {\n\t\treturn;\n\t}\n\n\tconst candidateBlockParents = getCandidateBlockParents(\n\t\tcandidateBlockData,\n\t\tblocksData\n\t);\n\n\tconst isDraggingBelow = candidateEdge === 'bottom';\n\n\t// If the user is dragging towards the bottom of the block check whether\n\t// they might be trying to move the block to be at a parent level.\n\tif (\n\t\tisDraggingBelow &&\n\t\tcandidateBlockData.rootClientId &&\n\t\tisUpGesture( position, candidateRect, candidateBlockParents.length )\n\t) {\n\t\tconst nextBlock = getNextNonDraggedBlock(\n\t\t\tblocksData,\n\t\t\tcandidateBlockIndex\n\t\t);\n\t\tconst currentLevel = candidateBlockData.nestingLevel;\n\t\tconst nextLevel = nextBlock ? nextBlock.nestingLevel : 1;\n\n\t\tif ( currentLevel && nextLevel ) {\n\t\t\t// Determine the desired relative level of the block to be dropped.\n\t\t\tconst desiredRelativeLevel = getDesiredRelativeParentLevel(\n\t\t\t\tposition,\n\t\t\t\tcandidateRect,\n\t\t\t\tcandidateBlockParents.length\n\t\t\t);\n\n\t\t\tconst targetParentIndex = Math.max(\n\t\t\t\tMath.min( desiredRelativeLevel, currentLevel - nextLevel ),\n\t\t\t\t0\n\t\t\t);\n\n\t\t\tif ( candidateBlockParents[ targetParentIndex ] ) {\n\t\t\t\t// Default to the block index of the candidate block.\n\t\t\t\tlet newBlockIndex = candidateBlockData.blockIndex;\n\n\t\t\t\t// If the next block is at the same level, use that as the default\n\t\t\t\t// block index. This ensures that the block is dropped in the correct\n\t\t\t\t// position when dragging to the bottom of a block.\n\t\t\t\tif (\n\t\t\t\t\tcandidateBlockParents[ targetParentIndex ].nestingLevel ===\n\t\t\t\t\tnextBlock?.nestingLevel\n\t\t\t\t) {\n\t\t\t\t\tnewBlockIndex = nextBlock?.blockIndex;\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, search from the current block index back\n\t\t\t\t\t// to find the last block index within the same target parent.\n\t\t\t\t\tfor ( let i = candidateBlockIndex; i >= 0; i-- ) {\n\t\t\t\t\t\tconst blockData = blocksData[ i ];\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tblockData.rootClientId ===\n\t\t\t\t\t\t\tcandidateBlockParents[ targetParentIndex ]\n\t\t\t\t\t\t\t\t.rootClientId\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tnewBlockIndex = blockData.blockIndex + 1;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\trootClientId:\n\t\t\t\t\t\tcandidateBlockParents[ targetParentIndex ].rootClientId,\n\t\t\t\t\tclientId: candidateBlockData.clientId,\n\t\t\t\t\tblockIndex: newBlockIndex,\n\t\t\t\t\tdropPosition: candidateEdge,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\t// If the user is dragging towards the bottom of the block check whether\n\t// they might be trying to nest the block as a child.\n\t// If the block already has inner blocks, and is expanded, this should be treated\n\t// as nesting since the next block in the tree will be the first child.\n\t// However, if the block is collapsed, dragging beneath the block should\n\t// still be allowed, as the next visible block in the tree will be a sibling.\n\tif (\n\t\tisDraggingBelow &&\n\t\tcandidateBlockData.canInsertDraggedBlocksAsChild &&\n\t\t( ( candidateBlockData.innerBlockCount > 0 &&\n\t\t\tcandidateBlockData.isExpanded ) ||\n\t\t\tisNestingGesture(\n\t\t\t\tposition,\n\t\t\t\tcandidateRect,\n\t\t\t\tcandidateBlockParents.length\n\t\t\t) )\n\t) {\n\t\t// If the block is expanded, insert the block as the first child.\n\t\t// Otherwise, for collapsed blocks, insert the block as the last child.\n\t\tconst newBlockIndex = candidateBlockData.isExpanded\n\t\t\t? 0\n\t\t\t: candidateBlockData.innerBlockCount || 0;\n\n\t\treturn {\n\t\t\trootClientId: candidateBlockData.clientId,\n\t\t\tblockIndex: newBlockIndex,\n\t\t\tdropPosition: 'inside',\n\t\t};\n\t}\n\n\t// If dropping as a sibling, but block cannot be inserted in\n\t// this context, return early.\n\tif ( ! candidateBlockData.canInsertDraggedBlocksAsSibling ) {\n\t\treturn;\n\t}\n\n\tconst offset = isDraggingBelow ? 1 : 0;\n\treturn {\n\t\trootClientId: candidateBlockData.rootClientId,\n\t\tclientId: candidateBlockData.clientId,\n\t\tblockIndex: candidateBlockData.blockIndex + offset,\n\t\tdropPosition: candidateEdge,\n\t};\n}\n\n/**\n * A react hook for implementing a drop zone in list view.\n *\n * @param {Object}       props                   Named parameters.\n * @param {?HTMLElement} [props.dropZoneElement] Optional element to be used as the drop zone.\n *\n * @return {WPListViewDropZoneTarget} The drop target.\n */\nexport default function useListViewDropZone( { dropZoneElement } ) {\n\tconst {\n\t\tgetBlockRootClientId,\n\t\tgetBlockIndex,\n\t\tgetBlockCount,\n\t\tgetDraggedBlockClientIds,\n\t\tcanInsertBlocks,\n\t} = useSelect( blockEditorStore );\n\tconst [ target, setTarget ] = useState();\n\tconst { rootClientId: targetRootClientId, blockIndex: targetBlockIndex } =\n\t\ttarget || {};\n\n\tconst onBlockDrop = useOnBlockDrop( targetRootClientId, targetBlockIndex );\n\n\tconst draggedBlockClientIds = getDraggedBlockClientIds();\n\tconst throttled = useThrottle(\n\t\tuseCallback(\n\t\t\t( event, currentTarget ) => {\n\t\t\t\tconst position = { x: event.clientX, y: event.clientY };\n\t\t\t\tconst isBlockDrag = !! draggedBlockClientIds?.length;\n\n\t\t\t\tconst blockElements = Array.from(\n\t\t\t\t\tcurrentTarget.querySelectorAll( '[data-block]' )\n\t\t\t\t);\n\n\t\t\t\tconst blocksData = blockElements.map( ( blockElement ) => {\n\t\t\t\t\tconst clientId = blockElement.dataset.block;\n\t\t\t\t\tconst isExpanded = blockElement.dataset.expanded === 'true';\n\n\t\t\t\t\t// Get nesting level from `aria-level` attribute because Firefox does not support `element.ariaLevel`.\n\t\t\t\t\tconst nestingLevel = parseInt(\n\t\t\t\t\t\tblockElement.getAttribute( 'aria-level' ),\n\t\t\t\t\t\t10\n\t\t\t\t\t);\n\t\t\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tclientId,\n\t\t\t\t\t\tisExpanded,\n\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\tblockIndex: getBlockIndex( clientId ),\n\t\t\t\t\t\telement: blockElement,\n\t\t\t\t\t\tnestingLevel: nestingLevel || undefined,\n\t\t\t\t\t\tisDraggedBlock: isBlockDrag\n\t\t\t\t\t\t\t? draggedBlockClientIds.includes( clientId )\n\t\t\t\t\t\t\t: false,\n\t\t\t\t\t\tinnerBlockCount: getBlockCount( clientId ),\n\t\t\t\t\t\tcanInsertDraggedBlocksAsSibling: isBlockDrag\n\t\t\t\t\t\t\t? canInsertBlocks(\n\t\t\t\t\t\t\t\t\tdraggedBlockClientIds,\n\t\t\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: true,\n\t\t\t\t\t\tcanInsertDraggedBlocksAsChild: isBlockDrag\n\t\t\t\t\t\t\t? canInsertBlocks( draggedBlockClientIds, clientId )\n\t\t\t\t\t\t\t: true,\n\t\t\t\t\t};\n\t\t\t\t} );\n\n\t\t\t\tconst newTarget = getListViewDropTarget( blocksData, position );\n\n\t\t\t\tif ( newTarget ) {\n\t\t\t\t\tsetTarget( newTarget );\n\t\t\t\t}\n\t\t\t},\n\t\t\t[ draggedBlockClientIds ]\n\t\t),\n\t\t200\n\t);\n\n\tconst ref = useDropZone( {\n\t\tdropZoneElement,\n\t\tonDrop: onBlockDrop,\n\t\tonDragLeave() {\n\t\t\tthrottled.cancel();\n\t\t\tsetTarget( null );\n\t\t},\n\t\tonDragOver( event ) {\n\t\t\t// `currentTarget` is only available while the event is being\n\t\t\t// handled, so get it now and pass it to the thottled function.\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget\n\t\t\tthrottled( event, event.currentTarget );\n\t\t},\n\t\tonDragEnd() {\n\t\t\tthrottled.cancel();\n\t\t\tsetTarget( null );\n\t\t},\n\t} );\n\n\treturn { ref, target };\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tuseInstanceId,\n\tuseMergeRefs,\n\t__experimentalUseFixedWindowList as useFixedWindowList,\n} from '@wordpress/compose';\nimport { __experimentalTreeGrid as TreeGrid } from '@wordpress/components';\nimport { AsyncModeProvider, useSelect } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\nimport {\n\tuseCallback,\n\tuseEffect,\n\tuseMemo,\n\tuseRef,\n\tuseReducer,\n\tforwardRef,\n\tuseState,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport ListViewBranch from './branch';\nimport { ListViewContext } from './context';\nimport ListViewDropIndicator from './drop-indicator';\nimport useBlockSelection from './use-block-selection';\nimport useListViewClientIds from './use-list-view-client-ids';\nimport useListViewDropZone from './use-list-view-drop-zone';\nimport useListViewExpandSelectedItem from './use-list-view-expand-selected-item';\nimport { store as blockEditorStore } from '../../store';\nimport { BlockSettingsDropdown } from '../block-settings-menu/block-settings-dropdown';\n\nconst expanded = ( state, action ) => {\n\tif ( Array.isArray( action.clientIds ) ) {\n\t\treturn {\n\t\t\t...state,\n\t\t\t...action.clientIds.reduce(\n\t\t\t\t( newState, id ) => ( {\n\t\t\t\t\t...newState,\n\t\t\t\t\t[ id ]: action.type === 'expand',\n\t\t\t\t} ),\n\t\t\t\t{}\n\t\t\t),\n\t\t};\n\t}\n\treturn state;\n};\n\nexport const BLOCK_LIST_ITEM_HEIGHT = 36;\n\n/** @typedef {import('react').ComponentType} ComponentType */\n/** @typedef {import('react').Ref<HTMLElement>} Ref */\n\n/**\n * Show a hierarchical list of blocks.\n *\n * @param {Object}         props                        Components props.\n * @param {string}         props.id                     An HTML element id for the root element of ListView.\n * @param {Array}          props.blocks                 _deprecated_ Custom subset of block client IDs to be used instead of the default hierarchy.\n * @param {?HTMLElement}   props.dropZoneElement        Optional element to be used as the drop zone.\n * @param {?boolean}       props.showBlockMovers        Flag to enable block movers. Defaults to `false`.\n * @param {?boolean}       props.isExpanded             Flag to determine whether nested levels are expanded by default. Defaults to `false`.\n * @param {?boolean}       props.showAppender           Flag to show or hide the block appender. Defaults to `false`.\n * @param {?ComponentType} props.blockSettingsMenu      Optional more menu substitution. Defaults to the standard `BlockSettingsDropdown` component.\n * @param {string}         props.rootClientId           The client id of the root block from which we determine the blocks to show in the list.\n * @param {string}         props.description            Optional accessible description for the tree grid component.\n * @param {?Function}      props.onSelect               Optional callback to be invoked when a block is selected. Receives the block object that was selected.\n * @param {?ComponentType} props.additionalBlockContent Component that renders additional block content UI.\n * @param {Ref}            ref                          Forwarded ref\n */\nfunction ListViewComponent(\n\t{\n\t\tid,\n\t\tblocks,\n\t\tdropZoneElement,\n\t\tshowBlockMovers = false,\n\t\tisExpanded = false,\n\t\tshowAppender = false,\n\t\tblockSettingsMenu: BlockSettingsMenu = BlockSettingsDropdown,\n\t\trootClientId,\n\t\tdescription,\n\t\tonSelect,\n\t\tadditionalBlockContent: AdditionalBlockContent,\n\t},\n\tref\n) {\n\t// This can be removed once we no longer need to support the blocks prop.\n\tif ( blocks ) {\n\t\tdeprecated(\n\t\t\t'`blocks` property in `wp.blockEditor.__experimentalListView`',\n\t\t\t{\n\t\t\t\tsince: '6.3',\n\t\t\t\talternative: '`rootClientId` property',\n\t\t\t}\n\t\t);\n\t}\n\n\tconst instanceId = useInstanceId( ListViewComponent );\n\tconst { clientIdsTree, draggedClientIds, selectedClientIds } =\n\t\tuseListViewClientIds( { blocks, rootClientId } );\n\n\tconst { getBlock } = useSelect( blockEditorStore );\n\tconst { visibleBlockCount, shouldShowInnerBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetGlobalBlockCount,\n\t\t\t\tgetClientIdsOfDescendants,\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst draggedBlockCount =\n\t\t\t\tdraggedClientIds?.length > 0\n\t\t\t\t\t? getClientIdsOfDescendants( draggedClientIds ).length + 1\n\t\t\t\t\t: 0;\n\t\t\treturn {\n\t\t\t\tvisibleBlockCount: getGlobalBlockCount() - draggedBlockCount,\n\t\t\t\tshouldShowInnerBlocks: __unstableGetEditorMode() !== 'zoom-out',\n\t\t\t};\n\t\t},\n\t\t[ draggedClientIds ]\n\t);\n\n\tconst { updateBlockSelection } = useBlockSelection();\n\n\tconst [ expandedState, setExpandedState ] = useReducer( expanded, {} );\n\n\tconst { ref: dropZoneRef, target: blockDropTarget } = useListViewDropZone( {\n\t\tdropZoneElement,\n\t} );\n\tconst elementRef = useRef();\n\tconst treeGridRef = useMergeRefs( [ elementRef, dropZoneRef, ref ] );\n\n\tconst isMounted = useRef( false );\n\n\tconst [ insertedBlock, setInsertedBlock ] = useState( null );\n\n\tconst { setSelectedTreeId } = useListViewExpandSelectedItem( {\n\t\tfirstSelectedBlockClientId: selectedClientIds[ 0 ],\n\t\tsetExpandedState,\n\t} );\n\tconst selectEditorBlock = useCallback(\n\t\t/**\n\t\t * @param {MouseEvent | KeyboardEvent | undefined} event\n\t\t * @param {string}                                 blockClientId\n\t\t * @param {null | undefined | -1 | 1}              focusPosition\n\t\t */\n\t\t( event, blockClientId, focusPosition ) => {\n\t\t\tupdateBlockSelection( event, blockClientId, null, focusPosition );\n\t\t\tsetSelectedTreeId( blockClientId );\n\t\t\tif ( onSelect ) {\n\t\t\t\tonSelect( getBlock( blockClientId ) );\n\t\t\t}\n\t\t},\n\t\t[ setSelectedTreeId, updateBlockSelection, onSelect, getBlock ]\n\t);\n\tuseEffect( () => {\n\t\tisMounted.current = true;\n\t}, [] );\n\n\t// List View renders a fixed number of items and relies on each having a fixed item height of 36px.\n\t// If this value changes, we should also change the itemHeight value set in useFixedWindowList.\n\t// See: https://github.com/WordPress/gutenberg/pull/35230 for additional context.\n\tconst [ fixedListWindow ] = useFixedWindowList(\n\t\telementRef,\n\t\tBLOCK_LIST_ITEM_HEIGHT,\n\t\tvisibleBlockCount,\n\t\t{\n\t\t\tuseWindowing: true,\n\t\t\twindowOverscan: 40,\n\t\t}\n\t);\n\n\tconst expand = useCallback(\n\t\t( clientId ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetExpandedState( { type: 'expand', clientIds: [ clientId ] } );\n\t\t},\n\t\t[ setExpandedState ]\n\t);\n\tconst collapse = useCallback(\n\t\t( clientId ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetExpandedState( { type: 'collapse', clientIds: [ clientId ] } );\n\t\t},\n\t\t[ setExpandedState ]\n\t);\n\tconst expandRow = useCallback(\n\t\t( row ) => {\n\t\t\texpand( row?.dataset?.block );\n\t\t},\n\t\t[ expand ]\n\t);\n\tconst collapseRow = useCallback(\n\t\t( row ) => {\n\t\t\tcollapse( row?.dataset?.block );\n\t\t},\n\t\t[ collapse ]\n\t);\n\tconst focusRow = useCallback(\n\t\t( event, startRow, endRow ) => {\n\t\t\tif ( event.shiftKey ) {\n\t\t\t\tupdateBlockSelection(\n\t\t\t\t\tevent,\n\t\t\t\t\tstartRow?.dataset?.block,\n\t\t\t\t\tendRow?.dataset?.block\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[ updateBlockSelection ]\n\t);\n\n\tconst contextValue = useMemo(\n\t\t() => ( {\n\t\t\tisTreeGridMounted: isMounted.current,\n\t\t\tdraggedClientIds,\n\t\t\texpandedState,\n\t\t\texpand,\n\t\t\tcollapse,\n\t\t\tBlockSettingsMenu,\n\t\t\tlistViewInstanceId: instanceId,\n\t\t\tAdditionalBlockContent,\n\t\t\tinsertedBlock,\n\t\t\tsetInsertedBlock,\n\t\t\ttreeGridElementRef: elementRef,\n\t\t} ),\n\t\t[\n\t\t\tdraggedClientIds,\n\t\t\texpandedState,\n\t\t\texpand,\n\t\t\tcollapse,\n\t\t\tBlockSettingsMenu,\n\t\t\tinstanceId,\n\t\t\tAdditionalBlockContent,\n\t\t\tinsertedBlock,\n\t\t\tsetInsertedBlock,\n\t\t]\n\t);\n\n\t// If there are no blocks to show and we're not showing the appender, do not render the list view.\n\tif ( ! clientIdsTree.length && ! showAppender ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<AsyncModeProvider value={ true }>\n\t\t\t<ListViewDropIndicator\n\t\t\t\tlistViewRef={ elementRef }\n\t\t\t\tblockDropTarget={ blockDropTarget }\n\t\t\t/>\n\t\t\t<TreeGrid\n\t\t\t\tid={ id }\n\t\t\t\tclassName=\"block-editor-list-view-tree\"\n\t\t\t\taria-label={ __( 'Block navigation structure' ) }\n\t\t\t\tref={ treeGridRef }\n\t\t\t\tonCollapseRow={ collapseRow }\n\t\t\t\tonExpandRow={ expandRow }\n\t\t\t\tonFocusRow={ focusRow }\n\t\t\t\tapplicationAriaLabel={ __( 'Block navigation structure' ) }\n\t\t\t\t// eslint-disable-next-line jsx-a11y/aria-props\n\t\t\t\taria-description={ description }\n\t\t\t>\n\t\t\t\t<ListViewContext.Provider value={ contextValue }>\n\t\t\t\t\t<ListViewBranch\n\t\t\t\t\t\tblocks={ clientIdsTree }\n\t\t\t\t\t\tparentId={ rootClientId }\n\t\t\t\t\t\tselectBlock={ selectEditorBlock }\n\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\tfixedListWindow={ fixedListWindow }\n\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\tisExpanded={ isExpanded }\n\t\t\t\t\t\tshouldShowInnerBlocks={ shouldShowInnerBlocks }\n\t\t\t\t\t\tshowAppender={ showAppender }\n\t\t\t\t\t/>\n\t\t\t\t</ListViewContext.Provider>\n\t\t\t</TreeGrid>\n\t\t</AsyncModeProvider>\n\t);\n}\n\n// This is the private API for the ListView component.\n// It allows access to all props, not just the public ones.\nexport const PrivateListView = forwardRef( ListViewComponent );\n\n// This is the public API for the ListView component.\n// We wrap the PrivateListView component to hide some props from the public API.\nexport default forwardRef( ( props, ref ) => {\n\treturn (\n\t\t<PrivateListView\n\t\t\tref={ ref }\n\t\t\t{ ...props }\n\t\t\tshowAppender={ false }\n\t\t\trootClientId={ null }\n\t\t\tonSelect={ null }\n\t\t\tadditionalBlockContent={ null }\n\t\t\tblockSettingsMenu={ undefined }\n\t\t/>\n\t);\n} );\n","/**\n * WordPress dependencies\n */\n\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nexport default function useListViewClientIds( { blocks, rootClientId } ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetDraggedBlockClientIds,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\t__unstableGetClientIdsTree,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\n\t\t\tconst removeDisabledBlocks = ( tree ) => {\n\t\t\t\treturn tree.flatMap( ( { clientId, innerBlocks, ...rest } ) => {\n\t\t\t\t\tif ( getBlockEditingMode( clientId ) === 'disabled' ) {\n\t\t\t\t\t\treturn removeDisabledBlocks( innerBlocks );\n\t\t\t\t\t}\n\t\t\t\t\treturn [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t\tinnerBlocks: removeDisabledBlocks( innerBlocks ),\n\t\t\t\t\t\t\t...rest,\n\t\t\t\t\t\t},\n\t\t\t\t\t];\n\t\t\t\t} );\n\t\t\t};\n\n\t\t\treturn {\n\t\t\t\tselectedClientIds: getSelectedBlockClientIds(),\n\t\t\t\tdraggedClientIds: getDraggedBlockClientIds(),\n\t\t\t\tclientIdsTree: removeDisabledBlocks(\n\t\t\t\t\tblocks ?? __unstableGetClientIdsTree( rootClientId )\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ blocks, rootClientId ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { speak } from '@wordpress/a11y';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\nimport { UP, DOWN, HOME, END } from '@wordpress/keycodes';\nimport { store as blocksStore } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { getCommonDepthClientIds } from './utils';\n\nexport default function useBlockSelection() {\n\tconst { clearSelectedBlock, multiSelect, selectBlock } =\n\t\tuseDispatch( blockEditorStore );\n\tconst {\n\t\tgetBlockName,\n\t\tgetBlockParents,\n\t\tgetBlockSelectionStart,\n\t\tgetSelectedBlockClientIds,\n\t\thasMultiSelection,\n\t\thasSelectedBlock,\n\t} = useSelect( blockEditorStore );\n\n\tconst { getBlockType } = useSelect( blocksStore );\n\n\tconst updateBlockSelection = useCallback(\n\t\tasync ( event, clientId, destinationClientId, focusPosition ) => {\n\t\t\tif ( ! event?.shiftKey ) {\n\t\t\t\tselectBlock( clientId, focusPosition );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// To handle multiple block selection via the `SHIFT` key, prevent\n\t\t\t// the browser default behavior of opening the link in a new window.\n\t\t\tevent.preventDefault();\n\n\t\t\tconst isKeyPress =\n\t\t\t\tevent.type === 'keydown' &&\n\t\t\t\t( event.keyCode === UP ||\n\t\t\t\t\tevent.keyCode === DOWN ||\n\t\t\t\t\tevent.keyCode === HOME ||\n\t\t\t\t\tevent.keyCode === END );\n\n\t\t\t// Handle clicking on a block when no blocks are selected, and return early.\n\t\t\tif (\n\t\t\t\t! isKeyPress &&\n\t\t\t\t! hasSelectedBlock() &&\n\t\t\t\t! hasMultiSelection()\n\t\t\t) {\n\t\t\t\tselectBlock( clientId, null );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selectedBlocks = getSelectedBlockClientIds();\n\t\t\tconst clientIdWithParents = [\n\t\t\t\t...getBlockParents( clientId ),\n\t\t\t\tclientId,\n\t\t\t];\n\n\t\t\tif (\n\t\t\t\tisKeyPress &&\n\t\t\t\t! selectedBlocks.some( ( blockId ) =>\n\t\t\t\t\tclientIdWithParents.includes( blockId )\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// Ensure that shift-selecting blocks via the keyboard only\n\t\t\t\t// expands the current selection if focusing over already\n\t\t\t\t// selected blocks. Otherwise, clear the selection so that\n\t\t\t\t// a user can create a new selection entirely by keyboard.\n\t\t\t\tawait clearSelectedBlock();\n\t\t\t}\n\n\t\t\tlet startTarget = getBlockSelectionStart();\n\t\t\tlet endTarget = clientId;\n\n\t\t\t// Handle keyboard behavior for selecting multiple blocks.\n\t\t\tif ( isKeyPress ) {\n\t\t\t\tif ( ! hasSelectedBlock() && ! hasMultiSelection() ) {\n\t\t\t\t\t// Set the starting point of the selection to the currently\n\t\t\t\t\t// focused block, if there are no blocks currently selected.\n\t\t\t\t\t// This ensures that as the selection is expanded or contracted,\n\t\t\t\t\t// the starting point of the selection is anchored to that block.\n\t\t\t\t\tstartTarget = clientId;\n\t\t\t\t}\n\t\t\t\tif ( destinationClientId ) {\n\t\t\t\t\t// If the user presses UP or DOWN, we want to ensure that the block they're\n\t\t\t\t\t// moving to is the target for selection, and not the currently focused one.\n\t\t\t\t\tendTarget = destinationClientId;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst startParents = getBlockParents( startTarget );\n\t\t\tconst endParents = getBlockParents( endTarget );\n\n\t\t\tconst { start, end } = getCommonDepthClientIds(\n\t\t\t\tstartTarget,\n\t\t\t\tendTarget,\n\t\t\t\tstartParents,\n\t\t\t\tendParents\n\t\t\t);\n\t\t\tawait multiSelect( start, end, null );\n\n\t\t\t// Announce deselected block, or number of deselected blocks if\n\t\t\t// the total number of blocks deselected is greater than one.\n\t\t\tconst updatedSelectedBlocks = getSelectedBlockClientIds();\n\n\t\t\t// If the selection is greater than 1 and the Home or End keys\n\t\t\t// were used to generate the selection, then skip announcing the\n\t\t\t// deselected blocks.\n\t\t\tif (\n\t\t\t\t( event.keyCode === HOME || event.keyCode === END ) &&\n\t\t\t\tupdatedSelectedBlocks.length > 1\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selectionDiff = selectedBlocks.filter(\n\t\t\t\t( blockId ) => ! updatedSelectedBlocks.includes( blockId )\n\t\t\t);\n\n\t\t\tlet label;\n\t\t\tif ( selectionDiff.length === 1 ) {\n\t\t\t\tconst title = getBlockType(\n\t\t\t\t\tgetBlockName( selectionDiff[ 0 ] )\n\t\t\t\t)?.title;\n\t\t\t\tif ( title ) {\n\t\t\t\t\tlabel = sprintf(\n\t\t\t\t\t\t/* translators: %s: block name */\n\t\t\t\t\t\t__( '%s deselected.' ),\n\t\t\t\t\t\ttitle\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if ( selectionDiff.length > 1 ) {\n\t\t\t\tlabel = sprintf(\n\t\t\t\t\t/* translators: %s: number of deselected blocks */\n\t\t\t\t\t__( '%s blocks deselected.' ),\n\t\t\t\t\tselectionDiff.length\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( label ) {\n\t\t\t\tspeak( label, 'assertive' );\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tclearSelectedBlock,\n\t\t\tgetBlockName,\n\t\t\tgetBlockType,\n\t\t\tgetBlockParents,\n\t\t\tgetBlockSelectionStart,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\thasMultiSelection,\n\t\t\thasSelectedBlock,\n\t\t\tmultiSelect,\n\t\t\tselectBlock,\n\t\t]\n\t);\n\n\treturn {\n\t\tupdateBlockSelection,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function useListViewExpandSelectedItem( {\n\tfirstSelectedBlockClientId,\n\tsetExpandedState,\n} ) {\n\tconst [ selectedTreeId, setSelectedTreeId ] = useState( null );\n\tconst { selectedBlockParentClientIds } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockParents } = select( blockEditorStore );\n\t\t\treturn {\n\t\t\t\tselectedBlockParentClientIds: getBlockParents(\n\t\t\t\t\tfirstSelectedBlockClientId,\n\t\t\t\t\tfalse\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ firstSelectedBlockClientId ]\n\t);\n\n\tconst parentClientIds =\n\t\tArray.isArray( selectedBlockParentClientIds ) &&\n\t\tselectedBlockParentClientIds.length\n\t\t\t? selectedBlockParentClientIds\n\t\t\t: null;\n\n\t// Expand tree when a block is selected.\n\tuseEffect( () => {\n\t\t// If the selectedTreeId is the same as the selected block,\n\t\t// it means that the block was selected using the block list tree.\n\t\tif ( selectedTreeId === firstSelectedBlockClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If the selected block has parents, get the top-level parent.\n\t\tif ( parentClientIds ) {\n\t\t\t// If the selected block has parents,\n\t\t\t// expand the tree branch.\n\t\t\tsetExpandedState( {\n\t\t\t\ttype: 'expand',\n\t\t\t\tclientIds: selectedBlockParentClientIds,\n\t\t\t} );\n\t\t}\n\t}, [ firstSelectedBlockClientId ] );\n\n\treturn {\n\t\tsetSelectedTreeId,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * WordPress dependencies\n */\nimport { Button, Dropdown } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\nimport { listView } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport ListView from '../list-view';\nimport { store as blockEditorStore } from '../../store';\n\nfunction BlockNavigationDropdownToggle( {\n\tisEnabled,\n\tonToggle,\n\tisOpen,\n\tinnerRef,\n\t...props\n} ) {\n\treturn (\n\t\t<Button\n\t\t\t{ ...props }\n\t\t\tref={ innerRef }\n\t\t\ticon={ listView }\n\t\t\taria-expanded={ isOpen }\n\t\t\taria-haspopup=\"true\"\n\t\t\tonClick={ isEnabled ? onToggle : undefined }\n\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\tlabel={ __( 'List view' ) }\n\t\t\tclassName=\"block-editor-block-navigation\"\n\t\t\taria-disabled={ ! isEnabled }\n\t\t/>\n\t);\n}\n\nfunction BlockNavigationDropdown( { isDisabled, ...props }, ref ) {\n\tdeprecated( 'wp.blockEditor.BlockNavigationDropdown', {\n\t\tsince: '6.1',\n\t\talternative: 'wp.components.Dropdown and wp.blockEditor.ListView',\n\t} );\n\n\tconst hasBlocks = useSelect(\n\t\t( select ) => !! select( blockEditorStore ).getBlockCount(),\n\t\t[]\n\t);\n\tconst isEnabled = hasBlocks && ! isDisabled;\n\n\treturn (\n\t\t<Dropdown\n\t\t\tcontentClassName=\"block-editor-block-navigation__popover\"\n\t\t\tpopoverProps={ { placement: 'bottom-start' } }\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t<BlockNavigationDropdownToggle\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tinnerRef={ ref }\n\t\t\t\t\tisOpen={ isOpen }\n\t\t\t\t\tonToggle={ onToggle }\n\t\t\t\t\tisEnabled={ isEnabled }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\trenderContent={ () => (\n\t\t\t\t<div className=\"block-editor-block-navigation__container\">\n\t\t\t\t\t<p className=\"block-editor-block-navigation__label\">\n\t\t\t\t\t\t{ __( 'List view' ) }\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<ListView />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( BlockNavigationDropdown );\n","/**\n * WordPress dependencies\n */\nimport { getBlockType } from '@wordpress/blocks';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport InserterPreviewPanel from '../inserter/preview-panel';\nimport { replaceActiveStyle } from './utils';\n\nexport default function BlockStylesPreviewPanel( {\n\tgenericPreviewBlock,\n\tstyle,\n\tclassName,\n\tactiveStyle,\n} ) {\n\tconst example = getBlockType( genericPreviewBlock.name )?.example;\n\tconst styleClassName = replaceActiveStyle( className, activeStyle, style );\n\tconst previewBlocks = useMemo( () => {\n\t\treturn {\n\t\t\t...genericPreviewBlock,\n\t\t\ttitle: style.label || style.name,\n\t\t\tdescription: style.description,\n\t\t\tinitialAttributes: {\n\t\t\t\t...genericPreviewBlock.attributes,\n\t\t\t\tclassName:\n\t\t\t\t\tstyleClassName +\n\t\t\t\t\t' block-editor-block-styles__block-preview-container',\n\t\t\t},\n\t\t\texample,\n\t\t};\n\t}, [ genericPreviewBlock, styleClassName ] );\n\n\treturn <InserterPreviewPanel item={ previewBlocks } />;\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport { debounce, useViewportMatch } from '@wordpress/compose';\nimport {\n\tButton,\n\t__experimentalTruncate as Truncate,\n\tPopover,\n} from '@wordpress/components';\nimport deprecated from '@wordpress/deprecated';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockStylesPreviewPanel from './preview-panel';\nimport useStylesForBlocks from './use-styles-for-block';\n\nconst noop = () => {};\n\n// Block Styles component for the Settings Sidebar.\nfunction BlockStyles( { clientId, onSwitch = noop, onHoverClassName = noop } ) {\n\tconst {\n\t\tonSelect,\n\t\tstylesToRender,\n\t\tactiveStyle,\n\t\tgenericPreviewBlock,\n\t\tclassName: previewClassName,\n\t} = useStylesForBlocks( {\n\t\tclientId,\n\t\tonSwitch,\n\t} );\n\tconst [ hoveredStyle, setHoveredStyle ] = useState( null );\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\n\n\tif ( ! stylesToRender || stylesToRender.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tconst debouncedSetHoveredStyle = debounce( setHoveredStyle, 250 );\n\n\tconst onSelectStylePreview = ( style ) => {\n\t\tonSelect( style );\n\t\tonHoverClassName( null );\n\t\tsetHoveredStyle( null );\n\t\tdebouncedSetHoveredStyle.cancel();\n\t};\n\n\tconst styleItemHandler = ( item ) => {\n\t\tif ( hoveredStyle === item ) {\n\t\t\tdebouncedSetHoveredStyle.cancel();\n\t\t\treturn;\n\t\t}\n\t\tdebouncedSetHoveredStyle( item );\n\t\tonHoverClassName( item?.name ?? null );\n\t};\n\n\treturn (\n\t\t<div className=\"block-editor-block-styles\">\n\t\t\t<div className=\"block-editor-block-styles__variants\">\n\t\t\t\t{ stylesToRender.map( ( style ) => {\n\t\t\t\t\tconst buttonText = style.isDefault\n\t\t\t\t\t\t? __( 'Default' )\n\t\t\t\t\t\t: style.label || style.name;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'block-editor-block-styles__item',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'is-active':\n\t\t\t\t\t\t\t\t\t\tactiveStyle.name === style.name,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tkey={ style.name }\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tlabel={ buttonText }\n\t\t\t\t\t\t\tonMouseEnter={ () => styleItemHandler( style ) }\n\t\t\t\t\t\t\tonFocus={ () => styleItemHandler( style ) }\n\t\t\t\t\t\t\tonMouseLeave={ () => styleItemHandler( null ) }\n\t\t\t\t\t\t\tonBlur={ () => styleItemHandler( null ) }\n\t\t\t\t\t\t\tonClick={ () => onSelectStylePreview( style ) }\n\t\t\t\t\t\t\taria-current={ activeStyle.name === style.name }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Truncate\n\t\t\t\t\t\t\t\tnumberOfLines={ 1 }\n\t\t\t\t\t\t\t\tclassName=\"block-editor-block-styles__item-text\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ buttonText }\n\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t\t{ hoveredStyle && ! isMobileViewport && (\n\t\t\t\t<Popover\n\t\t\t\t\tplacement=\"left-start\"\n\t\t\t\t\toffset={ 20 }\n\t\t\t\t\tfocusOnMount={ false }\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"block-editor-block-styles__preview-panel\"\n\t\t\t\t\t\tonMouseLeave={ () => styleItemHandler( null ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockStylesPreviewPanel\n\t\t\t\t\t\t\tactiveStyle={ activeStyle }\n\t\t\t\t\t\t\tclassName={ previewClassName }\n\t\t\t\t\t\t\tgenericPreviewBlock={ genericPreviewBlock }\n\t\t\t\t\t\t\tstyle={ hoveredStyle }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Popover>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default BlockStyles;\n\nBlockStyles.Slot = () => {\n\tdeprecated( 'BlockStyles.Slot', {\n\t\tversion: '6.4',\n\t\tsince: '6.2',\n\t} );\n\n\treturn null;\n};\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst layout = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z\" />\n\t</SVG>\n);\n\nexport default layout;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, Placeholder } from '@wordpress/components';\nimport { layout } from '@wordpress/icons';\n\nfunction BlockVariationPicker( {\n\ticon = layout,\n\tlabel = __( 'Choose variation' ),\n\tinstructions = __( 'Select a variation to start with.' ),\n\tvariations,\n\tonSelect,\n\tallowSkip,\n} ) {\n\tconst classes = classnames( 'block-editor-block-variation-picker', {\n\t\t'has-many-variations': variations.length > 4,\n\t} );\n\n\treturn (\n\t\t<Placeholder\n\t\t\ticon={ icon }\n\t\t\tlabel={ label }\n\t\t\tinstructions={ instructions }\n\t\t\tclassName={ classes }\n\t\t>\n\t\t\t{ /*\n\t\t\t * Disable reason: The `list` ARIA role is redundant but\n\t\t\t * Safari+VoiceOver won't announce the list otherwise.\n\t\t\t */\n\t\t\t/* eslint-disable jsx-a11y/no-redundant-roles */ }\n\t\t\t<ul\n\t\t\t\tclassName=\"block-editor-block-variation-picker__variations\"\n\t\t\t\trole=\"list\"\n\t\t\t\taria-label={ __( 'Block variations' ) }\n\t\t\t>\n\t\t\t\t{ variations.map( ( variation ) => (\n\t\t\t\t\t<li key={ variation.name }>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\tvariation.icon && variation.icon.src\n\t\t\t\t\t\t\t\t\t? variation.icon.src\n\t\t\t\t\t\t\t\t\t: variation.icon\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ticonSize={ 48 }\n\t\t\t\t\t\t\tonClick={ () => onSelect( variation ) }\n\t\t\t\t\t\t\tclassName=\"block-editor-block-variation-picker__variation\"\n\t\t\t\t\t\t\tlabel={ variation.description || variation.title }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span className=\"block-editor-block-variation-picker__variation-label\">\n\t\t\t\t\t\t\t{ variation.title }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</li>\n\t\t\t\t) ) }\n\t\t\t</ul>\n\t\t\t{ /* eslint-enable jsx-a11y/no-redundant-roles */ }\n\t\t\t{ allowSkip && (\n\t\t\t\t<div className=\"block-editor-block-variation-picker__skip\">\n\t\t\t\t\t<Button variant=\"link\" onClick={ () => onSelect() }>\n\t\t\t\t\t\t{ __( 'Skip' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</Placeholder>\n\t);\n}\n\nexport default BlockVariationPicker;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst grid = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\td=\"m3 5c0-1.10457.89543-2 2-2h13.5c1.1046 0 2 .89543 2 2v13.5c0 1.1046-.8954 2-2 2h-13.5c-1.10457 0-2-.8954-2-2zm2-.5h6v6.5h-6.5v-6c0-.27614.22386-.5.5-.5zm-.5 8v6c0 .2761.22386.5.5.5h6v-6.5zm8 0v6.5h6c.2761 0 .5-.2239.5-.5v-6zm0-8v6.5h6.5v-6c0-.27614-.2239-.5-.5-.5z\"\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t/>\n\t</SVG>\n);\n\nexport default grid;\n","export const VIEWMODES = {\n\tcarousel: 'carousel',\n\tgrid: 'grid',\n};\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport {\n\tchevronRight,\n\tchevronLeft,\n\tgrid,\n\tstretchFullWidth,\n} from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { VIEWMODES } from './constants';\n\nconst Actions = ( { onBlockPatternSelect } ) => (\n\t<div className=\"block-editor-block-pattern-setup__actions\">\n\t\t<Button variant=\"primary\" onClick={ onBlockPatternSelect }>\n\t\t\t{ __( 'Choose' ) }\n\t\t</Button>\n\t</div>\n);\n\nconst CarouselNavigation = ( {\n\thandlePrevious,\n\thandleNext,\n\tactiveSlide,\n\ttotalSlides,\n} ) => (\n\t<div className=\"block-editor-block-pattern-setup__navigation\">\n\t\t<Button\n\t\t\ticon={ chevronLeft }\n\t\t\tlabel={ __( 'Previous pattern' ) }\n\t\t\tonClick={ handlePrevious }\n\t\t\tdisabled={ activeSlide === 0 }\n\t\t/>\n\t\t<Button\n\t\t\ticon={ chevronRight }\n\t\t\tlabel={ __( 'Next pattern' ) }\n\t\t\tonClick={ handleNext }\n\t\t\tdisabled={ activeSlide === totalSlides - 1 }\n\t\t/>\n\t</div>\n);\n\nconst SetupToolbar = ( {\n\tviewMode,\n\tsetViewMode,\n\thandlePrevious,\n\thandleNext,\n\tactiveSlide,\n\ttotalSlides,\n\tonBlockPatternSelect,\n} ) => {\n\tconst isCarouselView = viewMode === VIEWMODES.carousel;\n\tconst displayControls = (\n\t\t<div className=\"block-editor-block-pattern-setup__display-controls\">\n\t\t\t<Button\n\t\t\t\ticon={ stretchFullWidth }\n\t\t\t\tlabel={ __( 'Carousel view' ) }\n\t\t\t\tonClick={ () => setViewMode( VIEWMODES.carousel ) }\n\t\t\t\tisPressed={ isCarouselView }\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\ticon={ grid }\n\t\t\t\tlabel={ __( 'Grid view' ) }\n\t\t\t\tonClick={ () => setViewMode( VIEWMODES.grid ) }\n\t\t\t\tisPressed={ viewMode === VIEWMODES.grid }\n\t\t\t/>\n\t\t</div>\n\t);\n\treturn (\n\t\t<div className=\"block-editor-block-pattern-setup__toolbar\">\n\t\t\t{ isCarouselView && (\n\t\t\t\t<CarouselNavigation\n\t\t\t\t\thandlePrevious={ handlePrevious }\n\t\t\t\t\thandleNext={ handleNext }\n\t\t\t\t\tactiveSlide={ activeSlide }\n\t\t\t\t\ttotalSlides={ totalSlides }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ displayControls }\n\t\t\t{ isCarouselView && (\n\t\t\t\t<Actions onBlockPatternSelect={ onBlockPatternSelect } />\n\t\t\t) }\n\t\t</div>\n\t);\n};\n\nexport default SetupToolbar;\n","/**\n * WordPress dependencies\n */\nimport { useDispatch } from '@wordpress/data';\nimport { cloneBlock } from '@wordpress/blocks';\nimport {\n\tVisuallyHidden,\n\t__unstableComposite as Composite,\n\t__unstableUseCompositeState as useCompositeState,\n\t__unstableCompositeItem as CompositeItem,\n} from '@wordpress/components';\n\nimport { useState } from '@wordpress/element';\nimport { useInstanceId } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockPreview from '../block-preview';\nimport SetupToolbar from './setup-toolbar';\nimport usePatternsSetup from './use-patterns-setup';\nimport { VIEWMODES } from './constants';\n\nconst SetupContent = ( {\n\tviewMode,\n\tactiveSlide,\n\tpatterns,\n\tonBlockPatternSelect,\n\tshowTitles,\n} ) => {\n\tconst composite = useCompositeState();\n\tconst containerClass = 'block-editor-block-pattern-setup__container';\n\tif ( viewMode === VIEWMODES.carousel ) {\n\t\tconst slideClass = new Map( [\n\t\t\t[ activeSlide, 'active-slide' ],\n\t\t\t[ activeSlide - 1, 'previous-slide' ],\n\t\t\t[ activeSlide + 1, 'next-slide' ],\n\t\t] );\n\t\treturn (\n\t\t\t<div className=\"block-editor-block-pattern-setup__carousel\">\n\t\t\t\t<div className={ containerClass }>\n\t\t\t\t\t<ul className=\"carousel-container\">\n\t\t\t\t\t\t{ patterns.map( ( pattern, index ) => (\n\t\t\t\t\t\t\t<BlockPatternSlide\n\t\t\t\t\t\t\t\tclassName={ slideClass.get( index ) || '' }\n\t\t\t\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\treturn (\n\t\t<div className=\"block-editor-block-pattern-setup__grid\">\n\t\t\t<Composite\n\t\t\t\t{ ...composite }\n\t\t\t\trole=\"listbox\"\n\t\t\t\tclassName={ containerClass }\n\t\t\t\taria-label={ __( 'Patterns list' ) }\n\t\t\t>\n\t\t\t\t{ patterns.map( ( pattern ) => (\n\t\t\t\t\t<BlockPattern\n\t\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\t\tonSelect={ onBlockPatternSelect }\n\t\t\t\t\t\tcomposite={ composite }\n\t\t\t\t\t\tshowTitles={ showTitles }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</Composite>\n\t\t</div>\n\t);\n};\n\nfunction BlockPattern( { pattern, onSelect, composite, showTitles } ) {\n\tconst baseClassName = 'block-editor-block-pattern-setup-list';\n\tconst { blocks, description, viewportWidth = 700 } = pattern;\n\tconst descriptionId = useInstanceId(\n\t\tBlockPattern,\n\t\t`${ baseClassName }__item-description`\n\t);\n\treturn (\n\t\t<div\n\t\t\tclassName={ `${ baseClassName }__list-item` }\n\t\t\taria-label={ pattern.title }\n\t\t\taria-describedby={ pattern.description ? descriptionId : undefined }\n\t\t>\n\t\t\t<CompositeItem\n\t\t\t\trole=\"option\"\n\t\t\t\tas=\"div\"\n\t\t\t\t{ ...composite }\n\t\t\t\tclassName={ `${ baseClassName }__item` }\n\t\t\t\tonClick={ () => onSelect( blocks ) }\n\t\t\t>\n\t\t\t\t<BlockPreview\n\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\t/>\n\t\t\t\t{ showTitles && (\n\t\t\t\t\t<div className={ `${ baseClassName }__item-title` }>\n\t\t\t\t\t\t{ pattern.title }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ !! description && (\n\t\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t\t{ description }\n\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t) }\n\t\t\t</CompositeItem>\n\t\t</div>\n\t);\n}\n\nfunction BlockPatternSlide( { className, pattern, minHeight } ) {\n\tconst { blocks, title, description } = pattern;\n\tconst descriptionId = useInstanceId(\n\t\tBlockPatternSlide,\n\t\t'block-editor-block-pattern-setup-list__item-description'\n\t);\n\treturn (\n\t\t<li\n\t\t\tclassName={ `pattern-slide ${ className }` }\n\t\t\taria-label={ title }\n\t\t\taria-describedby={ description ? descriptionId : undefined }\n\t\t>\n\t\t\t<BlockPreview blocks={ blocks } minHeight={ minHeight } />\n\t\t\t{ !! description && (\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t</li>\n\t);\n}\n\nconst BlockPatternSetup = ( {\n\tclientId,\n\tblockName,\n\tfilterPatternsFn,\n\tonBlockPatternSelect,\n\tinitialViewMode = VIEWMODES.carousel,\n\tshowTitles = false,\n} ) => {\n\tconst [ viewMode, setViewMode ] = useState( initialViewMode );\n\tconst [ activeSlide, setActiveSlide ] = useState( 0 );\n\tconst { replaceBlock } = useDispatch( blockEditorStore );\n\tconst patterns = usePatternsSetup( clientId, blockName, filterPatternsFn );\n\n\tif ( ! patterns?.length ) {\n\t\treturn null;\n\t}\n\n\tconst onBlockPatternSelectDefault = ( blocks ) => {\n\t\tconst clonedBlocks = blocks.map( ( block ) => cloneBlock( block ) );\n\t\treplaceBlock( clientId, clonedBlocks );\n\t};\n\tconst onPatternSelectCallback =\n\t\tonBlockPatternSelect || onBlockPatternSelectDefault;\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tclassName={ `block-editor-block-pattern-setup view-mode-${ viewMode }` }\n\t\t\t>\n\t\t\t\t<SetupContent\n\t\t\t\t\tviewMode={ viewMode }\n\t\t\t\t\tactiveSlide={ activeSlide }\n\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\tonBlockPatternSelect={ onPatternSelectCallback }\n\t\t\t\t\tshowTitles={ showTitles }\n\t\t\t\t/>\n\t\t\t\t<SetupToolbar\n\t\t\t\t\tviewMode={ viewMode }\n\t\t\t\t\tsetViewMode={ setViewMode }\n\t\t\t\t\tactiveSlide={ activeSlide }\n\t\t\t\t\ttotalSlides={ patterns.length }\n\t\t\t\t\thandleNext={ () => {\n\t\t\t\t\t\tsetActiveSlide( ( active ) => active + 1 );\n\t\t\t\t\t} }\n\t\t\t\t\thandlePrevious={ () => {\n\t\t\t\t\t\tsetActiveSlide( ( active ) => active - 1 );\n\t\t\t\t\t} }\n\t\t\t\t\tonBlockPatternSelect={ () => {\n\t\t\t\t\t\tonPatternSelectCallback(\n\t\t\t\t\t\t\tpatterns[ activeSlide ].blocks\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default BlockPatternSetup;\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nfunction usePatternsSetup( clientId, blockName, filterPatternsFn ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetPatternsByBlockTypes,\n\t\t\t\t__experimentalGetAllowedPatterns,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\t\t\tif ( filterPatternsFn ) {\n\t\t\t\treturn __experimentalGetAllowedPatterns( rootClientId ).filter(\n\t\t\t\t\tfilterPatternsFn\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn getPatternsByBlockTypes( blockName, rootClientId );\n\t\t},\n\t\t[ clientId, blockName, filterPatternsFn ]\n\t);\n}\n\nexport default usePatternsSetup;\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tButton,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItemsChoice,\n\tVisuallyHidden,\n} from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useMemo } from '@wordpress/element';\nimport { chevronDown } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { store as blockEditorStore } from '../../store';\n\nfunction VariationsButtons( {\n\tclassName,\n\tonSelectVariation,\n\tselectedValue,\n\tvariations,\n} ) {\n\treturn (\n\t\t<fieldset className={ className }>\n\t\t\t<VisuallyHidden as=\"legend\">\n\t\t\t\t{ __( 'Transform to variation' ) }\n\t\t\t</VisuallyHidden>\n\t\t\t{ variations.map( ( variation ) => (\n\t\t\t\t<Button\n\t\t\t\t\tkey={ variation.name }\n\t\t\t\t\ticon={ <BlockIcon icon={ variation.icon } showColors /> }\n\t\t\t\t\tisPressed={ selectedValue === variation.name }\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tselectedValue === variation.name\n\t\t\t\t\t\t\t? variation.title\n\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t/* translators: %s: Name of the block variation */\n\t\t\t\t\t\t\t\t\t__( 'Transform to %s' ),\n\t\t\t\t\t\t\t\t\tvariation.title\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t}\n\t\t\t\t\tonClick={ () => onSelectVariation( variation.name ) }\n\t\t\t\t\taria-label={ variation.title }\n\t\t\t\t\tshowTooltip\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</fieldset>\n\t);\n}\n\nfunction VariationsDropdown( {\n\tclassName,\n\tonSelectVariation,\n\tselectedValue,\n\tvariations,\n} ) {\n\tconst selectOptions = variations.map(\n\t\t( { name, title, description } ) => ( {\n\t\t\tvalue: name,\n\t\t\tlabel: title,\n\t\t\tinfo: description,\n\t\t} )\n\t);\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\tclassName={ className }\n\t\t\tlabel={ __( 'Transform to variation' ) }\n\t\t\ttext={ __( 'Transform to variation' ) }\n\t\t\tpopoverProps={ {\n\t\t\t\tposition: 'bottom center',\n\t\t\t\tclassName: `${ className }__popover`,\n\t\t\t} }\n\t\t\ticon={ chevronDown }\n\t\t\ttoggleProps={ { iconPosition: 'right' } }\n\t\t>\n\t\t\t{ () => (\n\t\t\t\t<div className={ `${ className }__container` }>\n\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\tchoices={ selectOptions }\n\t\t\t\t\t\t\tvalue={ selectedValue }\n\t\t\t\t\t\t\tonSelect={ onSelectVariation }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n\nfunction __experimentalBlockVariationTransforms( { blockClientId } ) {\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst { activeBlockVariation, variations } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getActiveBlockVariation, getBlockVariations } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst { getBlockName, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst name = blockClientId && getBlockName( blockClientId );\n\t\t\treturn {\n\t\t\t\tactiveBlockVariation: getActiveBlockVariation(\n\t\t\t\t\tname,\n\t\t\t\t\tgetBlockAttributes( blockClientId )\n\t\t\t\t),\n\t\t\t\tvariations: name && getBlockVariations( name, 'transform' ),\n\t\t\t};\n\t\t},\n\t\t[ blockClientId ]\n\t);\n\n\tconst selectedValue = activeBlockVariation?.name;\n\n\t// Check if each variation has a unique icon.\n\tconst hasUniqueIcons = useMemo( () => {\n\t\tconst variationIcons = new Set();\n\t\tif ( ! variations ) {\n\t\t\treturn false;\n\t\t}\n\t\tvariations.forEach( ( variation ) => {\n\t\t\tif ( variation.icon ) {\n\t\t\t\tvariationIcons.add( variation.icon?.src || variation.icon );\n\t\t\t}\n\t\t} );\n\t\treturn variationIcons.size === variations.length;\n\t}, [ variations ] );\n\n\tconst onSelectVariation = ( variationName ) => {\n\t\tupdateBlockAttributes( blockClientId, {\n\t\t\t...variations.find( ( { name } ) => name === variationName )\n\t\t\t\t.attributes,\n\t\t} );\n\t};\n\n\tconst baseClass = 'block-editor-block-variation-transforms';\n\n\t// Skip rendering if there are no variations\n\tif ( ! variations?.length ) return null;\n\n\tconst Component = hasUniqueIcons ? VariationsButtons : VariationsDropdown;\n\n\treturn (\n\t\t<Component\n\t\t\tclassName={ baseClass }\n\t\t\tonSelectVariation={ onSelectVariation }\n\t\t\tselectedValue={ selectedValue }\n\t\t\tvariations={ variations }\n\t\t/>\n\t);\n}\n\nexport default __experimentalBlockVariationTransforms;\n","/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport useSetting from '../use-setting';\n\nexport default createHigherOrderComponent( ( WrappedComponent ) => {\n\treturn ( props ) => {\n\t\tconst colorsFeature = useSetting( 'color.palette' );\n\t\tconst disableCustomColorsFeature = ! useSetting( 'color.custom' );\n\t\tconst colors =\n\t\t\tprops.colors === undefined ? colorsFeature : props.colors;\n\t\tconst disableCustomColors =\n\t\t\tprops.disableCustomColors === undefined\n\t\t\t\t? disableCustomColorsFeature\n\t\t\t\t: props.disableCustomColors;\n\t\tconst hasColorsToChoose =\n\t\t\t( colors && colors.length > 0 ) || ! disableCustomColors;\n\t\treturn (\n\t\t\t<WrappedComponent\n\t\t\t\t{ ...{\n\t\t\t\t\t...props,\n\t\t\t\t\tcolors,\n\t\t\t\t\tdisableCustomColors,\n\t\t\t\t\thasColorsToChoose,\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t};\n}, 'withColorContext' );\n","/**\n * WordPress dependencies\n */\nimport { ColorPalette } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport withColorContext from './with-color-context';\n\nexport default withColorContext( ColorPalette );\n","/**\n * Internal dependencies\n */\nimport ColorGradientControl from '../colors-gradients/control';\n\nexport default function ColorPaletteControl( {\n\tonChange,\n\tvalue,\n\t...otherProps\n} ) {\n\treturn (\n\t\t<ColorGradientControl\n\t\t\t{ ...otherProps }\n\t\t\tonColorChange={ onChange }\n\t\t\tcolorValue={ value }\n\t\t\tgradients={ [] }\n\t\t\tdisableCustomGradients={ true }\n\t\t/>\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"date\"];","/**\n * WordPress dependencies\n */\nimport { _x, __ } from '@wordpress/i18n';\nimport { dateI18n } from '@wordpress/date';\nimport { useState, createInterpolateElement } from '@wordpress/element';\nimport {\n\tTextControl,\n\tExternalLink,\n\tVisuallyHidden,\n\tCustomSelectControl,\n\tToggleControl,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\n\n// So that we can illustrate the different formats in the dropdown properly,\n// show a date that has a day greater than 12 and a month with more than three\n// letters. Here we're using 2022-01-25 which is when WordPress 5.9 was\n// released.\nconst EXAMPLE_DATE = new Date( 2022, 0, 25 );\n\n/**\n * The `DateFormatPicker` component renders controls that let the user choose a\n * _date format_. That is, how they want their dates to be formatted.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/date-format-picker/README.md\n *\n * @param {Object}                          props\n * @param {string|null}                     props.format        The selected date\n *                                                              format. If\n *                                                              `null`,\n *                                                              _Default_ is\n *                                                              selected.\n * @param {string}                          props.defaultFormat The date format that\n *                                                              will be used if the\n *                                                              user selects\n *                                                              'Default'.\n * @param {( format: string|null ) => void} props.onChange      Called when a\n *                                                              selection is\n *                                                              made. If `null`,\n *                                                              _Default_ is\n *                                                              selected.\n */\nexport default function DateFormatPicker( {\n\tformat,\n\tdefaultFormat,\n\tonChange,\n} ) {\n\treturn (\n\t\t<fieldset className=\"block-editor-date-format-picker\">\n\t\t\t<VisuallyHidden as=\"legend\">{ __( 'Date format' ) }</VisuallyHidden>\n\t\t\t<ToggleControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Default format' ) }\n\t\t\t\thelp={ `${ __( 'Example:' ) }  ${ dateI18n(\n\t\t\t\t\tdefaultFormat,\n\t\t\t\t\tEXAMPLE_DATE\n\t\t\t\t) }` }\n\t\t\t\tchecked={ ! format }\n\t\t\t\tonChange={ ( checked ) =>\n\t\t\t\t\tonChange( checked ? null : defaultFormat )\n\t\t\t\t}\n\t\t\t/>\n\t\t\t{ format && (\n\t\t\t\t<NonDefaultControls format={ format } onChange={ onChange } />\n\t\t\t) }\n\t\t</fieldset>\n\t);\n}\n\nfunction NonDefaultControls( { format, onChange } ) {\n\t// Suggest a short format, medium format, long format, and a standardised\n\t// (YYYY-MM-DD) format. The short, medium, and long formats are localised as\n\t// different languages have different ways of writing these. For example, 'F\n\t// j, Y' (April 20, 2022) in American English (en_US) is 'j. F Y' (20. April\n\t// 2022) in German (de). The resultant array is de-duplicated as some\n\t// languages will use the same format string for short, medium, and long\n\t// formats.\n\tconst suggestedFormats = [\n\t\t...new Set( [\n\t\t\t'Y-m-d',\n\t\t\t_x( 'n/j/Y', 'short date format' ),\n\t\t\t_x( 'n/j/Y g:i A', 'short date format with time' ),\n\t\t\t_x( 'M j, Y', 'medium date format' ),\n\t\t\t_x( 'M j, Y g:i A', 'medium date format with time' ),\n\t\t\t_x( 'F j, Y', 'long date format' ),\n\t\t\t_x( 'M j', 'short date format without the year' ),\n\t\t] ),\n\t];\n\n\tconst suggestedOptions = suggestedFormats.map(\n\t\t( suggestedFormat, index ) => ( {\n\t\t\tkey: `suggested-${ index }`,\n\t\t\tname: dateI18n( suggestedFormat, EXAMPLE_DATE ),\n\t\t\tformat: suggestedFormat,\n\t\t} )\n\t);\n\tconst customOption = {\n\t\tkey: 'custom',\n\t\tname: __( 'Custom' ),\n\t\tclassName:\n\t\t\t'block-editor-date-format-picker__custom-format-select-control__custom-option',\n\t\t__experimentalHint: __( 'Enter your own date format' ),\n\t};\n\n\tconst [ isCustom, setIsCustom ] = useState(\n\t\t() => !! format && ! suggestedFormats.includes( format )\n\t);\n\n\treturn (\n\t\t<VStack>\n\t\t\t<CustomSelectControl\n\t\t\t\t__nextUnconstrainedWidth\n\t\t\t\tlabel={ __( 'Choose a format' ) }\n\t\t\t\toptions={ [ ...suggestedOptions, customOption ] }\n\t\t\t\tvalue={\n\t\t\t\t\tisCustom\n\t\t\t\t\t\t? customOption\n\t\t\t\t\t\t: suggestedOptions.find(\n\t\t\t\t\t\t\t\t( option ) => option.format === format\n\t\t\t\t\t\t  ) ?? customOption\n\t\t\t\t}\n\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\tif ( selectedItem === customOption ) {\n\t\t\t\t\t\tsetIsCustom( true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetIsCustom( false );\n\t\t\t\t\t\tonChange( selectedItem.format );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t{ isCustom && (\n\t\t\t\t<TextControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Custom format' ) }\n\t\t\t\t\thideLabelFromVision\n\t\t\t\t\thelp={ createInterpolateElement(\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Enter a date or time <Link>format string</Link>.'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLink: (\n\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t\t\t\t'https://wordpress.org/documentation/article/customize-date-and-time-format/'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\tvalue={ format }\n\t\t\t\t\tonChange={ ( value ) => onChange( value ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tColorIndicator,\n\tDropdown,\n\tFlexItem,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\t__experimentalHStack as HStack,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport ColorGradientControl from './control';\n\n// When the `ColorGradientSettingsDropdown` controls are being rendered to a\n// `ToolsPanel` they must be wrapped in a `ToolsPanelItem`.\nconst WithToolsPanelItem = ( { setting, children, panelId, ...props } ) => {\n\tconst clearValue = () => {\n\t\tif ( setting.colorValue ) {\n\t\t\tsetting.onColorChange();\n\t\t} else if ( setting.gradientValue ) {\n\t\t\tsetting.onGradientChange();\n\t\t}\n\t};\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\thasValue={ () => {\n\t\t\t\treturn !! setting.colorValue || !! setting.gradientValue;\n\t\t\t} }\n\t\t\tlabel={ setting.label }\n\t\t\tonDeselect={ clearValue }\n\t\t\tisShownByDefault={\n\t\t\t\tsetting.isShownByDefault !== undefined\n\t\t\t\t\t? setting.isShownByDefault\n\t\t\t\t\t: true\n\t\t\t}\n\t\t\t{ ...props }\n\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__item\"\n\t\t\tpanelId={ panelId }\n\t\t\t// Pass resetAllFilter if supplied due to rendering via SlotFill\n\t\t\t// into parent ToolsPanel.\n\t\t\tresetAllFilter={ setting.resetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanelItem>\n\t);\n};\n\nconst LabeledColorIndicator = ( { colorValue, label } ) => (\n\t<HStack justify=\"flex-start\">\n\t\t<ColorIndicator\n\t\t\tclassName=\"block-editor-panel-color-gradient-settings__color-indicator\"\n\t\t\tcolorValue={ colorValue }\n\t\t/>\n\t\t<FlexItem\n\t\t\tclassName=\"block-editor-panel-color-gradient-settings__color-name\"\n\t\t\ttitle={ label }\n\t\t>\n\t\t\t{ label }\n\t\t</FlexItem>\n\t</HStack>\n);\n\n// Renders a color dropdown's toggle as an `Item` if it is within an `ItemGroup`\n// or as a `Button` if it isn't e.g. the controls are being rendered in\n// a `ToolsPanel`.\nconst renderToggle =\n\t( settings ) =>\n\t( { onToggle, isOpen } ) => {\n\t\tconst { colorValue, label } = settings;\n\n\t\tconst toggleProps = {\n\t\t\tonClick: onToggle,\n\t\t\tclassName: classnames(\n\t\t\t\t'block-editor-panel-color-gradient-settings__dropdown',\n\t\t\t\t{ 'is-open': isOpen }\n\t\t\t),\n\t\t\t'aria-expanded': isOpen,\n\t\t};\n\n\t\treturn (\n\t\t\t<Button { ...toggleProps }>\n\t\t\t\t<LabeledColorIndicator\n\t\t\t\t\tcolorValue={ colorValue }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t/>\n\t\t\t</Button>\n\t\t);\n\t};\n\n// Renders a collection of color controls as dropdowns. Depending upon the\n// context in which these dropdowns are being rendered, they may be wrapped\n// in an `ItemGroup` with each dropdown's toggle as an `Item`, or alternatively,\n// the may be individually wrapped in a `ToolsPanelItem` with the toggle as\n// a regular `Button`.\n//\n// For more context see: https://github.com/WordPress/gutenberg/pull/40084\nexport default function ColorGradientSettingsDropdown( {\n\tcolors,\n\tdisableCustomColors,\n\tdisableCustomGradients,\n\tenableAlpha,\n\tgradients,\n\tsettings,\n\t__experimentalIsRenderedInSidebar,\n\t...props\n} ) {\n\tlet popoverProps;\n\tif ( __experimentalIsRenderedInSidebar ) {\n\t\tpopoverProps = {\n\t\t\tplacement: 'left-start',\n\t\t\toffset: 36,\n\t\t\tshift: true,\n\t\t};\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ settings.map( ( setting, index ) => {\n\t\t\t\tconst controlProps = {\n\t\t\t\t\tclearable: false,\n\t\t\t\t\tcolorValue: setting.colorValue,\n\t\t\t\t\tcolors,\n\t\t\t\t\tdisableCustomColors,\n\t\t\t\t\tdisableCustomGradients,\n\t\t\t\t\tenableAlpha,\n\t\t\t\t\tgradientValue: setting.gradientValue,\n\t\t\t\t\tgradients,\n\t\t\t\t\tlabel: setting.label,\n\t\t\t\t\tonColorChange: setting.onColorChange,\n\t\t\t\t\tonGradientChange: setting.onGradientChange,\n\t\t\t\t\tshowTitle: false,\n\t\t\t\t\t__experimentalIsRenderedInSidebar,\n\t\t\t\t\t...setting,\n\t\t\t\t};\n\t\t\t\tconst toggleSettings = {\n\t\t\t\t\tcolorValue: setting.gradientValue ?? setting.colorValue,\n\t\t\t\t\tlabel: setting.label,\n\t\t\t\t};\n\n\t\t\t\treturn (\n\t\t\t\t\tsetting && (\n\t\t\t\t\t\t// If not in an `ItemGroup` wrap the dropdown in a\n\t\t\t\t\t\t// `ToolsPanelItem`\n\t\t\t\t\t\t<WithToolsPanelItem\n\t\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t\tsetting={ setting }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\tpopoverProps={ popoverProps }\n\t\t\t\t\t\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__dropdown\"\n\t\t\t\t\t\t\t\trenderToggle={ renderToggle( toggleSettings ) }\n\t\t\t\t\t\t\t\trenderContent={ () => (\n\t\t\t\t\t\t\t\t\t<DropdownContentWrapper paddingSize=\"none\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"block-editor-panel-color-gradient-settings__dropdown-content\">\n\t\t\t\t\t\t\t\t\t\t\t<ColorGradientControl\n\t\t\t\t\t\t\t\t\t\t\t\t{ ...controlProps }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</DropdownContentWrapper>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</WithToolsPanelItem>\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalSpacer as Spacer,\n\t__experimentalToolsPanel as ToolsPanel,\n} from '@wordpress/components';\nimport { useRegistry } from '@wordpress/data';\nimport { useInstanceId } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport ColorGradientSettingsDropdown from './dropdown';\nimport useColorsAndGradientsPalettes from './use-multiple-origin-colors-and-gradients';\n\nconst colorsAndGradientKeys = [\n\t'colors',\n\t'disableCustomColors',\n\t'gradients',\n\t'disableCustomGradients',\n];\n\nexport const PanelColorGradientSettingsInner = ( {\n\tclassName,\n\tcolors,\n\tgradients,\n\tdisableCustomColors,\n\tdisableCustomGradients,\n\tchildren,\n\tsettings,\n\ttitle,\n\tshowTitle = true,\n\t__experimentalIsRenderedInSidebar,\n\tenableAlpha,\n} ) => {\n\tconst panelId = useInstanceId( PanelColorGradientSettingsInner );\n\tconst { batch } = useRegistry();\n\tif (\n\t\t( ! colors || colors.length === 0 ) &&\n\t\t( ! gradients || gradients.length === 0 ) &&\n\t\tdisableCustomColors &&\n\t\tdisableCustomGradients &&\n\t\tsettings?.every(\n\t\t\t( setting ) =>\n\t\t\t\t( ! setting.colors || setting.colors.length === 0 ) &&\n\t\t\t\t( ! setting.gradients || setting.gradients.length === 0 ) &&\n\t\t\t\t( setting.disableCustomColors === undefined ||\n\t\t\t\t\tsetting.disableCustomColors ) &&\n\t\t\t\t( setting.disableCustomGradients === undefined ||\n\t\t\t\t\tsetting.disableCustomGradients )\n\t\t)\n\t) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-panel-color-gradient-settings',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\tlabel={ showTitle ? title : undefined }\n\t\t\tresetAll={ () => {\n\t\t\t\tbatch( () => {\n\t\t\t\t\tsettings.forEach(\n\t\t\t\t\t\t( {\n\t\t\t\t\t\t\tcolorValue,\n\t\t\t\t\t\t\tgradientValue,\n\t\t\t\t\t\t\tonColorChange,\n\t\t\t\t\t\t\tonGradientChange,\n\t\t\t\t\t\t} ) => {\n\t\t\t\t\t\t\tif ( colorValue ) {\n\t\t\t\t\t\t\t\tonColorChange();\n\t\t\t\t\t\t\t} else if ( gradientValue ) {\n\t\t\t\t\t\t\t\tonGradientChange();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} }\n\t\t\tpanelId={ panelId }\n\t\t\t__experimentalFirstVisibleItemClass=\"first\"\n\t\t\t__experimentalLastVisibleItemClass=\"last\"\n\t\t>\n\t\t\t<ColorGradientSettingsDropdown\n\t\t\t\tsettings={ settings }\n\t\t\t\tpanelId={ panelId }\n\t\t\t\t{ ...{\n\t\t\t\t\tcolors,\n\t\t\t\t\tgradients,\n\t\t\t\t\tdisableCustomColors,\n\t\t\t\t\tdisableCustomGradients,\n\t\t\t\t\t__experimentalIsRenderedInSidebar,\n\t\t\t\t\tenableAlpha,\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t{ !! children && (\n\t\t\t\t<>\n\t\t\t\t\t<Spacer marginY={ 4 } /> { children }\n\t\t\t\t</>\n\t\t\t) }\n\t\t</ToolsPanel>\n\t);\n};\n\nconst PanelColorGradientSettingsSelect = ( props ) => {\n\tconst colorGradientSettings = useColorsAndGradientsPalettes();\n\treturn (\n\t\t<PanelColorGradientSettingsInner\n\t\t\t{ ...{ ...colorGradientSettings, ...props } }\n\t\t/>\n\t);\n};\n\nconst PanelColorGradientSettings = ( props ) => {\n\tif (\n\t\tcolorsAndGradientKeys.every( ( key ) => props.hasOwnProperty( key ) )\n\t) {\n\t\treturn <PanelColorGradientSettingsInner { ...props } />;\n\t}\n\treturn <PanelColorGradientSettingsSelect { ...props } />;\n};\n\nexport default PanelColorGradientSettings;\n","/**\n * WordPress dependencies\n */\nimport { createContext, useContext, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useSaveImage from './use-save-image';\nimport useTransformImage from './use-transform-image';\n\nconst ImageEditingContext = createContext( {} );\n\nexport const useImageEditingContext = () => useContext( ImageEditingContext );\n\nexport default function ImageEditingProvider( {\n\tid,\n\turl,\n\tnaturalWidth,\n\tnaturalHeight,\n\tonFinishEditing,\n\tonSaveImage,\n\tchildren,\n} ) {\n\tconst transformImage = useTransformImage( {\n\t\turl,\n\t\tnaturalWidth,\n\t\tnaturalHeight,\n\t} );\n\n\tconst saveImage = useSaveImage( {\n\t\tid,\n\t\turl,\n\t\tonSaveImage,\n\t\tonFinishEditing,\n\t\t...transformImage,\n\t} );\n\n\tconst providerValue = useMemo(\n\t\t() => ( {\n\t\t\t...transformImage,\n\t\t\t...saveImage,\n\t\t} ),\n\t\t[ transformImage, saveImage ]\n\t);\n\n\treturn (\n\t\t<ImageEditingContext.Provider value={ providerValue }>\n\t\t\t{ children }\n\t\t</ImageEditingContext.Provider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useCallback, useMemo, useState } from '@wordpress/element';\nimport { applyFilters } from '@wordpress/hooks';\n\nexport default function useTransformImage( {\n\turl,\n\tnaturalWidth,\n\tnaturalHeight,\n} ) {\n\tconst [ editedUrl, setEditedUrl ] = useState();\n\tconst [ crop, setCrop ] = useState();\n\tconst [ position, setPosition ] = useState( { x: 0, y: 0 } );\n\tconst [ zoom, setZoom ] = useState( 100 );\n\tconst [ rotation, setRotation ] = useState( 0 );\n\tconst defaultAspect = naturalWidth / naturalHeight;\n\tconst [ aspect, setAspect ] = useState( defaultAspect );\n\n\tconst rotateClockwise = useCallback( () => {\n\t\tconst angle = ( rotation + 90 ) % 360;\n\n\t\tlet naturalAspectRatio = defaultAspect;\n\n\t\tif ( rotation % 180 === 90 ) {\n\t\t\tnaturalAspectRatio = 1 / defaultAspect;\n\t\t}\n\n\t\tif ( angle === 0 ) {\n\t\t\tsetEditedUrl();\n\t\t\tsetRotation( angle );\n\t\t\tsetAspect( defaultAspect );\n\t\t\tsetPosition( {\n\t\t\t\tx: -( position.y * naturalAspectRatio ),\n\t\t\t\ty: position.x * naturalAspectRatio,\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\tfunction editImage( event ) {\n\t\t\tconst canvas = document.createElement( 'canvas' );\n\n\t\t\tlet translateX = 0;\n\t\t\tlet translateY = 0;\n\n\t\t\tif ( angle % 180 ) {\n\t\t\t\tcanvas.width = event.target.height;\n\t\t\t\tcanvas.height = event.target.width;\n\t\t\t} else {\n\t\t\t\tcanvas.width = event.target.width;\n\t\t\t\tcanvas.height = event.target.height;\n\t\t\t}\n\n\t\t\tif ( angle === 90 || angle === 180 ) {\n\t\t\t\ttranslateX = canvas.width;\n\t\t\t}\n\n\t\t\tif ( angle === 270 || angle === 180 ) {\n\t\t\t\ttranslateY = canvas.height;\n\t\t\t}\n\n\t\t\tconst context = canvas.getContext( '2d' );\n\n\t\t\tcontext.translate( translateX, translateY );\n\t\t\tcontext.rotate( ( angle * Math.PI ) / 180 );\n\t\t\tcontext.drawImage( event.target, 0, 0 );\n\n\t\t\tcanvas.toBlob( ( blob ) => {\n\t\t\t\tsetEditedUrl( URL.createObjectURL( blob ) );\n\t\t\t\tsetRotation( angle );\n\t\t\t\tsetAspect( canvas.width / canvas.height );\n\t\t\t\tsetPosition( {\n\t\t\t\t\tx: -( position.y * naturalAspectRatio ),\n\t\t\t\t\ty: position.x * naturalAspectRatio,\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tconst el = new window.Image();\n\t\tel.src = url;\n\t\tel.onload = editImage;\n\n\t\tconst imgCrossOrigin = applyFilters(\n\t\t\t'media.crossOrigin',\n\t\t\tundefined,\n\t\t\turl\n\t\t);\n\t\tif ( typeof imgCrossOrigin === 'string' ) {\n\t\t\tel.crossOrigin = imgCrossOrigin;\n\t\t}\n\t}, [ rotation, defaultAspect ] );\n\n\treturn useMemo(\n\t\t() => ( {\n\t\t\teditedUrl,\n\t\t\tsetEditedUrl,\n\t\t\tcrop,\n\t\t\tsetCrop,\n\t\t\tposition,\n\t\t\tsetPosition,\n\t\t\tzoom,\n\t\t\tsetZoom,\n\t\t\trotation,\n\t\t\tsetRotation,\n\t\t\trotateClockwise,\n\t\t\taspect,\n\t\t\tsetAspect,\n\t\t\tdefaultAspect,\n\t\t} ),\n\t\t[\n\t\t\teditedUrl,\n\t\t\tcrop,\n\t\t\tposition,\n\t\t\tzoom,\n\t\t\trotation,\n\t\t\trotateClockwise,\n\t\t\taspect,\n\t\t\tdefaultAspect,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\n// Disable Reason: Needs to be refactored.\n// eslint-disable-next-line no-restricted-imports\nimport apiFetch from '@wordpress/api-fetch';\nimport { useDispatch } from '@wordpress/data';\nimport { useCallback, useMemo, useState } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\n\nexport default function useSaveImage( {\n\tcrop,\n\trotation,\n\theight,\n\twidth,\n\taspect,\n\turl,\n\tid,\n\tonSaveImage,\n\tonFinishEditing,\n} ) {\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\tconst [ isInProgress, setIsInProgress ] = useState( false );\n\n\tconst cancel = useCallback( () => {\n\t\tsetIsInProgress( false );\n\t\tonFinishEditing();\n\t}, [ setIsInProgress, onFinishEditing ] );\n\n\tconst apply = useCallback( () => {\n\t\tsetIsInProgress( true );\n\n\t\tconst modifiers = [];\n\n\t\tif ( rotation > 0 ) {\n\t\t\tmodifiers.push( {\n\t\t\t\ttype: 'rotate',\n\t\t\t\targs: {\n\t\t\t\t\tangle: rotation,\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\n\t\t// The crop script may return some very small, sub-pixel values when the image was not cropped.\n\t\t// Crop only when the new size has changed by more than 0.1%.\n\t\tif ( crop.width < 99.9 || crop.height < 99.9 ) {\n\t\t\tmodifiers.push( {\n\t\t\t\ttype: 'crop',\n\t\t\t\targs: {\n\t\t\t\t\tleft: crop.x,\n\t\t\t\t\ttop: crop.y,\n\t\t\t\t\twidth: crop.width,\n\t\t\t\t\theight: crop.height,\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\n\t\tapiFetch( {\n\t\t\tpath: `/wp/v2/media/${ id }/edit`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: { src: url, modifiers },\n\t\t} )\n\t\t\t.then( ( response ) => {\n\t\t\t\tonSaveImage( {\n\t\t\t\t\tid: response.id,\n\t\t\t\t\turl: response.source_url,\n\t\t\t\t\theight: height && width ? width / aspect : undefined,\n\t\t\t\t} );\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tcreateErrorNotice(\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t/* translators: 1. Error message */\n\t\t\t\t\t\t__( 'Could not edit image. %s' ),\n\t\t\t\t\t\tstripHTML( error.message )\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'image-editing-error',\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} )\n\t\t\t.finally( () => {\n\t\t\t\tsetIsInProgress( false );\n\t\t\t\tonFinishEditing();\n\t\t\t} );\n\t}, [\n\t\tsetIsInProgress,\n\t\tcrop,\n\t\trotation,\n\t\theight,\n\t\twidth,\n\t\taspect,\n\t\turl,\n\t\tonSaveImage,\n\t\tcreateErrorNotice,\n\t\tsetIsInProgress,\n\t\tonFinishEditing,\n\t] );\n\n\treturn useMemo(\n\t\t() => ( {\n\t\t\tisInProgress,\n\t\t\tapply,\n\t\t\tcancel,\n\t\t} ),\n\t\t[ isInProgress, apply, cancel ]\n\t);\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Area, MediaSize, Point, Size } from './types'\n\n/**\n * Compute the dimension of the crop area based on media size,\n * aspect ratio and optionally rotation\n */\nexport function getCropSize(\n  mediaWidth: number,\n  mediaHeight: number,\n  containerWidth: number,\n  containerHeight: number,\n  aspect: number,\n  rotation = 0\n): Size {\n  const { width, height } = rotateSize(mediaWidth, mediaHeight, rotation)\n  const fittingWidth = Math.min(width, containerWidth)\n  const fittingHeight = Math.min(height, containerHeight)\n\n  if (fittingWidth > fittingHeight * aspect) {\n    return {\n      width: fittingHeight * aspect,\n      height: fittingHeight,\n    }\n  }\n\n  return {\n    width: fittingWidth,\n    height: fittingWidth / aspect,\n  }\n}\n\n/**\n * Compute media zoom.\n * We fit the media into the container with \"max-width: 100%; max-height: 100%;\"\n */\nexport function getMediaZoom(mediaSize: MediaSize) {\n  // Take the axis with more pixels to improve accuracy\n  return mediaSize.width > mediaSize.height\n    ? mediaSize.width / mediaSize.naturalWidth\n    : mediaSize.height / mediaSize.naturalHeight\n}\n\n/**\n * Ensure a new media position stays in the crop area.\n */\nexport function restrictPosition(\n  position: Point,\n  mediaSize: Size,\n  cropSize: Size,\n  zoom: number,\n  rotation = 0\n): Point {\n  const { width, height } = rotateSize(mediaSize.width, mediaSize.height, rotation)\n\n  return {\n    x: restrictPositionCoord(position.x, width, cropSize.width, zoom),\n    y: restrictPositionCoord(position.y, height, cropSize.height, zoom),\n  }\n}\n\nfunction restrictPositionCoord(\n  position: number,\n  mediaSize: number,\n  cropSize: number,\n  zoom: number\n): number {\n  const maxPosition = (mediaSize * zoom) / 2 - cropSize / 2\n\n  return clamp(position, -maxPosition, maxPosition)\n}\n\nexport function getDistanceBetweenPoints(pointA: Point, pointB: Point) {\n  return Math.sqrt(Math.pow(pointA.y - pointB.y, 2) + Math.pow(pointA.x - pointB.x, 2))\n}\n\nexport function getRotationBetweenPoints(pointA: Point, pointB: Point) {\n  return (Math.atan2(pointB.y - pointA.y, pointB.x - pointA.x) * 180) / Math.PI\n}\n\n/**\n * Compute the output cropped area of the media in percentages and pixels.\n * x/y are the top-left coordinates on the src media\n */\nexport function computeCroppedArea(\n  crop: Point,\n  mediaSize: MediaSize,\n  cropSize: Size,\n  aspect: number,\n  zoom: number,\n  rotation = 0,\n  restrictPosition = true\n): { croppedAreaPercentages: Area; croppedAreaPixels: Area } {\n  // if the media is rotated by the user, we cannot limit the position anymore\n  // as it might need to be negative.\n  const limitAreaFn = restrictPosition ? limitArea : noOp\n\n  const mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation)\n  const mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation)\n\n  // calculate the crop area in percentages\n  // in the rotated space\n  const croppedAreaPercentages = {\n    x: limitAreaFn(\n      100,\n      (((mediaBBoxSize.width - cropSize.width / zoom) / 2 - crop.x / zoom) / mediaBBoxSize.width) *\n        100\n    ),\n    y: limitAreaFn(\n      100,\n      (((mediaBBoxSize.height - cropSize.height / zoom) / 2 - crop.y / zoom) /\n        mediaBBoxSize.height) *\n        100\n    ),\n    width: limitAreaFn(100, ((cropSize.width / mediaBBoxSize.width) * 100) / zoom),\n    height: limitAreaFn(100, ((cropSize.height / mediaBBoxSize.height) * 100) / zoom),\n  }\n\n  // we compute the pixels size naively\n  const widthInPixels = Math.round(\n    limitAreaFn(\n      mediaNaturalBBoxSize.width,\n      (croppedAreaPercentages.width * mediaNaturalBBoxSize.width) / 100\n    )\n  )\n  const heightInPixels = Math.round(\n    limitAreaFn(\n      mediaNaturalBBoxSize.height,\n      (croppedAreaPercentages.height * mediaNaturalBBoxSize.height) / 100\n    )\n  )\n  const isImgWiderThanHigh = mediaNaturalBBoxSize.width >= mediaNaturalBBoxSize.height * aspect\n\n  // then we ensure the width and height exactly match the aspect (to avoid rounding approximations)\n  // if the media is wider than high, when zoom is 0, the crop height will be equals to image height\n  // thus we want to compute the width from the height and aspect for accuracy.\n  // Otherwise, we compute the height from width and aspect.\n  const sizePixels = isImgWiderThanHigh\n    ? {\n        width: Math.round(heightInPixels * aspect),\n        height: heightInPixels,\n      }\n    : {\n        width: widthInPixels,\n        height: Math.round(widthInPixels / aspect),\n      }\n\n  const croppedAreaPixels = {\n    ...sizePixels,\n    x: Math.round(\n      limitAreaFn(\n        mediaNaturalBBoxSize.width - sizePixels.width,\n        (croppedAreaPercentages.x * mediaNaturalBBoxSize.width) / 100\n      )\n    ),\n    y: Math.round(\n      limitAreaFn(\n        mediaNaturalBBoxSize.height - sizePixels.height,\n        (croppedAreaPercentages.y * mediaNaturalBBoxSize.height) / 100\n      )\n    ),\n  }\n\n  return { croppedAreaPercentages, croppedAreaPixels }\n}\n\n/**\n * Ensure the returned value is between 0 and max\n */\nfunction limitArea(max: number, value: number): number {\n  return Math.min(max, Math.max(0, value))\n}\n\nfunction noOp(_max: number, value: number) {\n  return value\n}\n\n/**\n * Compute crop and zoom from the croppedAreaPercentages.\n */\nexport function getInitialCropFromCroppedAreaPercentages(\n  croppedAreaPercentages: Area,\n  mediaSize: MediaSize,\n  rotation: number,\n  cropSize: Size,\n  minZoom: number,\n  maxZoom: number\n) {\n  const mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation)\n\n  // This is the inverse process of computeCroppedArea\n  const zoom = clamp(\n    (cropSize.width / mediaBBoxSize.width) * (100 / croppedAreaPercentages.width),\n    minZoom,\n    maxZoom\n  )\n\n  const crop = {\n    x:\n      (zoom * mediaBBoxSize.width) / 2 -\n      cropSize.width / 2 -\n      mediaBBoxSize.width * zoom * (croppedAreaPercentages.x / 100),\n    y:\n      (zoom * mediaBBoxSize.height) / 2 -\n      cropSize.height / 2 -\n      mediaBBoxSize.height * zoom * (croppedAreaPercentages.y / 100),\n  }\n\n  return { crop, zoom }\n}\n\n/**\n * Compute zoom from the croppedAreaPixels\n */\nfunction getZoomFromCroppedAreaPixels(\n  croppedAreaPixels: Area,\n  mediaSize: MediaSize,\n  cropSize: Size\n): number {\n  const mediaZoom = getMediaZoom(mediaSize)\n\n  return cropSize.height > cropSize.width\n    ? cropSize.height / (croppedAreaPixels.height * mediaZoom)\n    : cropSize.width / (croppedAreaPixels.width * mediaZoom)\n}\n\n/**\n * Compute crop and zoom from the croppedAreaPixels\n */\nexport function getInitialCropFromCroppedAreaPixels(\n  croppedAreaPixels: Area,\n  mediaSize: MediaSize,\n  rotation = 0,\n  cropSize: Size,\n  minZoom: number,\n  maxZoom: number\n): { crop: Point; zoom: number } {\n  const mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation)\n\n  const zoom = clamp(\n    getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize),\n    minZoom,\n    maxZoom\n  )\n\n  const cropZoom =\n    cropSize.height > cropSize.width\n      ? cropSize.height / croppedAreaPixels.height\n      : cropSize.width / croppedAreaPixels.width\n\n  const crop = {\n    x:\n      ((mediaNaturalBBoxSize.width - croppedAreaPixels.width) / 2 - croppedAreaPixels.x) * cropZoom,\n    y:\n      ((mediaNaturalBBoxSize.height - croppedAreaPixels.height) / 2 - croppedAreaPixels.y) *\n      cropZoom,\n  }\n  return { crop, zoom }\n}\n\n/**\n * Return the point that is the center of point a and b\n */\nexport function getCenter(a: Point, b: Point): Point {\n  return {\n    x: (b.x + a.x) / 2,\n    y: (b.y + a.y) / 2,\n  }\n}\n\nexport function getRadianAngle(degreeValue: number) {\n  return (degreeValue * Math.PI) / 180\n}\n\n/**\n * Returns the new bounding area of a rotated rectangle.\n */\nexport function rotateSize(width: number, height: number, rotation: number): Size {\n  const rotRad = getRadianAngle(rotation)\n\n  return {\n    width: Math.abs(Math.cos(rotRad) * width) + Math.abs(Math.sin(rotRad) * height),\n    height: Math.abs(Math.sin(rotRad) * width) + Math.abs(Math.cos(rotRad) * height),\n  }\n}\n\n/**\n * Clamp value between min and max\n */\nexport function clamp(value: number, min: number, max: number) {\n  return Math.min(Math.max(value, min), max)\n}\n\n/**\n * Combine multiple class names into a single string.\n */\nexport function classNames(...args: (boolean | string | number | undefined | void | null)[]) {\n  return args\n    .filter((value) => {\n      if (typeof value === 'string' && value.length > 0) {\n        return true\n      }\n\n      return false\n    })\n    .join(' ')\n    .trim()\n}\n","import React from 'react'\nimport normalizeWheel from 'normalize-wheel'\nimport { Area, MediaSize, Point, Size, VideoSrc } from './types'\nimport {\n  getCropSize,\n  restrictPosition,\n  getDistanceBetweenPoints,\n  getRotationBetweenPoints,\n  computeCroppedArea,\n  getCenter,\n  getInitialCropFromCroppedAreaPixels,\n  getInitialCropFromCroppedAreaPercentages,\n  classNames,\n  clamp,\n} from './helpers'\nimport cssStyles from './styles.css'\n\nexport type CropperProps = {\n  image?: string\n  video?: string | VideoSrc[]\n  transform?: string\n  crop: Point\n  zoom: number\n  rotation: number\n  aspect: number\n  minZoom: number\n  maxZoom: number\n  cropShape: 'rect' | 'round'\n  cropSize?: Size\n  objectFit?: 'contain' | 'horizontal-cover' | 'vertical-cover' | 'auto-cover'\n  showGrid?: boolean\n  zoomSpeed: number\n  zoomWithScroll?: boolean\n  onCropChange: (location: Point) => void\n  onZoomChange?: (zoom: number) => void\n  onRotationChange?: (rotation: number) => void\n  onCropComplete?: (croppedArea: Area, croppedAreaPixels: Area) => void\n  onCropAreaChange?: (croppedArea: Area, croppedAreaPixels: Area) => void\n  onCropSizeChange?: (cropSize: Size) => void\n  onInteractionStart?: () => void\n  onInteractionEnd?: () => void\n  onMediaLoaded?: (mediaSize: MediaSize) => void\n  style: {\n    containerStyle?: React.CSSProperties\n    mediaStyle?: React.CSSProperties\n    cropAreaStyle?: React.CSSProperties\n  }\n  classes: {\n    containerClassName?: string\n    mediaClassName?: string\n    cropAreaClassName?: string\n  }\n  restrictPosition: boolean\n  mediaProps: React.ImgHTMLAttributes<HTMLElement> | React.VideoHTMLAttributes<HTMLElement>\n  disableAutomaticStylesInjection?: boolean\n  initialCroppedAreaPixels?: Area\n  initialCroppedAreaPercentages?: Area\n  onTouchRequest?: (e: React.TouchEvent<HTMLDivElement>) => boolean\n  onWheelRequest?: (e: WheelEvent) => boolean\n  setImageRef?: (ref: React.RefObject<HTMLImageElement>) => void\n  setVideoRef?: (ref: React.RefObject<HTMLVideoElement>) => void\n  setMediaSize?: (size: MediaSize) => void\n  setCropSize?: (size: Size) => void\n  nonce?: string\n}\n\ntype State = {\n  cropSize: Size | null\n  hasWheelJustStarted: boolean\n}\n\nconst MIN_ZOOM = 1\nconst MAX_ZOOM = 3\n\nclass Cropper extends React.Component<CropperProps, State> {\n  static defaultProps = {\n    zoom: 1,\n    rotation: 0,\n    aspect: 4 / 3,\n    maxZoom: MAX_ZOOM,\n    minZoom: MIN_ZOOM,\n    cropShape: 'rect' as const,\n    objectFit: 'contain' as const,\n    showGrid: true,\n    style: {},\n    classes: {},\n    mediaProps: {},\n    zoomSpeed: 1,\n    restrictPosition: true,\n    zoomWithScroll: true,\n  }\n\n  imageRef: React.RefObject<HTMLImageElement> = React.createRef()\n  videoRef: React.RefObject<HTMLVideoElement> = React.createRef()\n  containerRef: HTMLDivElement | null = null\n  styleRef: HTMLStyleElement | null = null\n  containerRect: DOMRect | null = null\n  mediaSize: MediaSize = { width: 0, height: 0, naturalWidth: 0, naturalHeight: 0 }\n  dragStartPosition: Point = { x: 0, y: 0 }\n  dragStartCrop: Point = { x: 0, y: 0 }\n  lastPinchDistance = 0\n  lastPinchRotation = 0\n  rafDragTimeout: number | null = null\n  rafPinchTimeout: number | null = null\n  wheelTimer: number | null = null\n  currentDoc: Document = document\n  currentWindow: Window = window\n\n  state: State = {\n    cropSize: null,\n    hasWheelJustStarted: false,\n  }\n\n  componentDidMount() {\n    if (this.containerRef) {\n      if (this.containerRef.ownerDocument) {\n        this.currentDoc = this.containerRef.ownerDocument\n      }\n      if (this.currentDoc.defaultView) {\n        this.currentWindow = this.currentDoc.defaultView\n      }\n      this.currentWindow.addEventListener('resize', this.computeSizes)\n      this.props.zoomWithScroll &&\n        this.containerRef.addEventListener('wheel', this.onWheel, { passive: false })\n      this.containerRef.addEventListener('gesturestart', this.preventZoomSafari)\n      this.containerRef.addEventListener('gesturechange', this.preventZoomSafari)\n    }\n\n    if (!this.props.disableAutomaticStylesInjection) {\n      this.styleRef = this.currentDoc.createElement('style')\n      this.styleRef.setAttribute('type', 'text/css')\n      if (this.props.nonce) {\n        this.styleRef.setAttribute('nonce', this.props.nonce)\n      }\n      this.styleRef.innerHTML = cssStyles\n      this.currentDoc.head.appendChild(this.styleRef)\n    }\n\n    // when rendered via SSR, the image can already be loaded and its onLoad callback will never be called\n    if (this.imageRef.current && this.imageRef.current.complete) {\n      this.onMediaLoad()\n    }\n\n    // set image and video refs in the parent if the callbacks exist\n    if (this.props.setImageRef) {\n      this.props.setImageRef(this.imageRef)\n    }\n\n    if (this.props.setVideoRef) {\n      this.props.setVideoRef(this.videoRef)\n    }\n  }\n\n  componentWillUnmount() {\n    this.currentWindow.removeEventListener('resize', this.computeSizes)\n    if (this.containerRef) {\n      this.containerRef.removeEventListener('gesturestart', this.preventZoomSafari)\n      this.containerRef.removeEventListener('gesturechange', this.preventZoomSafari)\n    }\n\n    if (this.styleRef) {\n      this.styleRef.parentNode?.removeChild(this.styleRef)\n    }\n\n    this.cleanEvents()\n    this.props.zoomWithScroll && this.clearScrollEvent()\n  }\n\n  componentDidUpdate(prevProps: CropperProps) {\n    if (prevProps.rotation !== this.props.rotation) {\n      this.computeSizes()\n      this.recomputeCropPosition()\n    } else if (prevProps.aspect !== this.props.aspect) {\n      this.computeSizes()\n    } else if (prevProps.zoom !== this.props.zoom) {\n      this.recomputeCropPosition()\n    } else if (\n      prevProps.cropSize?.height !== this.props.cropSize?.height ||\n      prevProps.cropSize?.width !== this.props.cropSize?.width\n    ) {\n      this.computeSizes()\n    } else if (\n      prevProps.crop?.x !== this.props.crop?.x ||\n      prevProps.crop?.y !== this.props.crop?.y\n    ) {\n      this.emitCropAreaChange()\n    }\n    if (prevProps.zoomWithScroll !== this.props.zoomWithScroll && this.containerRef) {\n      this.props.zoomWithScroll\n        ? this.containerRef.addEventListener('wheel', this.onWheel, { passive: false })\n        : this.clearScrollEvent()\n    }\n    if (prevProps.video !== this.props.video) {\n      this.videoRef.current?.load()\n    }\n  }\n\n  // this is to prevent Safari on iOS >= 10 to zoom the page\n  preventZoomSafari = (e: Event) => e.preventDefault()\n\n  cleanEvents = () => {\n    this.currentDoc.removeEventListener('mousemove', this.onMouseMove)\n    this.currentDoc.removeEventListener('mouseup', this.onDragStopped)\n    this.currentDoc.removeEventListener('touchmove', this.onTouchMove)\n    this.currentDoc.removeEventListener('touchend', this.onDragStopped)\n  }\n\n  clearScrollEvent = () => {\n    if (this.containerRef) this.containerRef.removeEventListener('wheel', this.onWheel)\n    if (this.wheelTimer) {\n      clearTimeout(this.wheelTimer)\n    }\n  }\n\n  onMediaLoad = () => {\n    const cropSize = this.computeSizes()\n\n    if (cropSize) {\n      this.emitCropData()\n      this.setInitialCrop(cropSize)\n    }\n\n    if (this.props.onMediaLoaded) {\n      this.props.onMediaLoaded(this.mediaSize)\n    }\n  }\n\n  setInitialCrop = (cropSize: Size) => {\n    if (this.props.initialCroppedAreaPercentages) {\n      const { crop, zoom } = getInitialCropFromCroppedAreaPercentages(\n        this.props.initialCroppedAreaPercentages,\n        this.mediaSize,\n        this.props.rotation,\n        cropSize,\n        this.props.minZoom,\n        this.props.maxZoom\n      )\n\n      this.props.onCropChange(crop)\n      this.props.onZoomChange && this.props.onZoomChange(zoom)\n    } else if (this.props.initialCroppedAreaPixels) {\n      const { crop, zoom } = getInitialCropFromCroppedAreaPixels(\n        this.props.initialCroppedAreaPixels,\n        this.mediaSize,\n        this.props.rotation,\n        cropSize,\n        this.props.minZoom,\n        this.props.maxZoom\n      )\n\n      this.props.onCropChange(crop)\n      this.props.onZoomChange && this.props.onZoomChange(zoom)\n    }\n  }\n\n  getAspect() {\n    const { cropSize, aspect } = this.props\n    if (cropSize) {\n      return cropSize.width / cropSize.height\n    }\n    return aspect\n  }\n\n  computeSizes = () => {\n    const mediaRef = this.imageRef.current || this.videoRef.current\n\n    if (mediaRef && this.containerRef) {\n      this.containerRect = this.containerRef.getBoundingClientRect()\n      const containerAspect = this.containerRect.width / this.containerRect.height\n      const naturalWidth =\n        this.imageRef.current?.naturalWidth || this.videoRef.current?.videoWidth || 0\n      const naturalHeight =\n        this.imageRef.current?.naturalHeight || this.videoRef.current?.videoHeight || 0\n      const isMediaScaledDown =\n        mediaRef.offsetWidth < naturalWidth || mediaRef.offsetHeight < naturalHeight\n      const mediaAspect = naturalWidth / naturalHeight\n\n      // We do not rely on the offsetWidth/offsetHeight if the media is scaled down\n      // as the values they report are rounded. That will result in precision losses\n      // when calculating zoom. We use the fact that the media is positionned relative\n      // to the container. That allows us to use the container's dimensions\n      // and natural aspect ratio of the media to calculate accurate media size.\n      // However, for this to work, the container should not be rotated\n      let renderedMediaSize: Size\n\n      if (isMediaScaledDown) {\n        switch (this.props.objectFit) {\n          default:\n          case 'contain':\n            renderedMediaSize =\n              containerAspect > mediaAspect\n                ? {\n                    width: this.containerRect.height * mediaAspect,\n                    height: this.containerRect.height,\n                  }\n                : {\n                    width: this.containerRect.width,\n                    height: this.containerRect.width / mediaAspect,\n                  }\n            break\n          case 'horizontal-cover':\n            renderedMediaSize = {\n              width: this.containerRect.width,\n              height: this.containerRect.width / mediaAspect,\n            }\n            break\n          case 'vertical-cover':\n            renderedMediaSize = {\n              width: this.containerRect.height * mediaAspect,\n              height: this.containerRect.height,\n            }\n            break\n          case 'auto-cover':\n            renderedMediaSize =\n              naturalWidth > naturalHeight\n                ? {\n                    width: this.containerRect.width,\n                    height: this.containerRect.width / mediaAspect,\n                  }\n                : {\n                    width: this.containerRect.height * mediaAspect,\n                    height: this.containerRect.height,\n                  }\n            break\n        }\n      } else {\n        renderedMediaSize = {\n          width: mediaRef.offsetWidth,\n          height: mediaRef.offsetHeight,\n        }\n      }\n\n      this.mediaSize = {\n        ...renderedMediaSize,\n        naturalWidth,\n        naturalHeight,\n      }\n\n      // set media size in the parent\n      if (this.props.setMediaSize) {\n        this.props.setMediaSize(this.mediaSize)\n      }\n\n      const cropSize = this.props.cropSize\n        ? this.props.cropSize\n        : getCropSize(\n            this.mediaSize.width,\n            this.mediaSize.height,\n            this.containerRect.width,\n            this.containerRect.height,\n            this.props.aspect,\n            this.props.rotation\n          )\n\n      if (\n        this.state.cropSize?.height !== cropSize.height ||\n        this.state.cropSize?.width !== cropSize.width\n      ) {\n        this.props.onCropSizeChange && this.props.onCropSizeChange(cropSize)\n      }\n      this.setState({ cropSize }, this.recomputeCropPosition)\n      // pass crop size to parent\n      if (this.props.setCropSize) {\n        this.props.setCropSize(cropSize)\n      }\n\n      return cropSize\n    }\n  }\n\n  static getMousePoint = (e: MouseEvent | React.MouseEvent) => ({\n    x: Number(e.clientX),\n    y: Number(e.clientY),\n  })\n\n  static getTouchPoint = (touch: Touch | React.Touch) => ({\n    x: Number(touch.clientX),\n    y: Number(touch.clientY),\n  })\n\n  onMouseDown = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    e.preventDefault()\n    this.currentDoc.addEventListener('mousemove', this.onMouseMove)\n    this.currentDoc.addEventListener('mouseup', this.onDragStopped)\n    this.onDragStart(Cropper.getMousePoint(e))\n  }\n\n  onMouseMove = (e: MouseEvent) => this.onDrag(Cropper.getMousePoint(e))\n\n  onTouchStart = (e: React.TouchEvent<HTMLDivElement>) => {\n    if (this.props.onTouchRequest && !this.props.onTouchRequest(e)) {\n      return\n    }\n\n    this.currentDoc.addEventListener('touchmove', this.onTouchMove, { passive: false }) // iOS 11 now defaults to passive: true\n    this.currentDoc.addEventListener('touchend', this.onDragStopped)\n\n    if (e.touches.length === 2) {\n      this.onPinchStart(e)\n    } else if (e.touches.length === 1) {\n      this.onDragStart(Cropper.getTouchPoint(e.touches[0]))\n    }\n  }\n\n  onTouchMove = (e: TouchEvent) => {\n    // Prevent whole page from scrolling on iOS.\n    e.preventDefault()\n    if (e.touches.length === 2) {\n      this.onPinchMove(e)\n    } else if (e.touches.length === 1) {\n      this.onDrag(Cropper.getTouchPoint(e.touches[0]))\n    }\n  }\n\n  onDragStart = ({ x, y }: Point) => {\n    this.dragStartPosition = { x, y }\n    this.dragStartCrop = { ...this.props.crop }\n    this.props.onInteractionStart?.()\n  }\n\n  onDrag = ({ x, y }: Point) => {\n    if (this.rafDragTimeout) this.currentWindow.cancelAnimationFrame(this.rafDragTimeout)\n\n    this.rafDragTimeout = this.currentWindow.requestAnimationFrame(() => {\n      if (!this.state.cropSize) return\n      if (x === undefined || y === undefined) return\n      const offsetX = x - this.dragStartPosition.x\n      const offsetY = y - this.dragStartPosition.y\n      const requestedPosition = {\n        x: this.dragStartCrop.x + offsetX,\n        y: this.dragStartCrop.y + offsetY,\n      }\n\n      const newPosition = this.props.restrictPosition\n        ? restrictPosition(\n            requestedPosition,\n            this.mediaSize,\n            this.state.cropSize,\n            this.props.zoom,\n            this.props.rotation\n          )\n        : requestedPosition\n      this.props.onCropChange(newPosition)\n    })\n  }\n\n  onDragStopped = () => {\n    this.cleanEvents()\n    this.emitCropData()\n    this.props.onInteractionEnd?.()\n  }\n\n  onPinchStart(e: React.TouchEvent<HTMLDivElement>) {\n    const pointA = Cropper.getTouchPoint(e.touches[0])\n    const pointB = Cropper.getTouchPoint(e.touches[1])\n    this.lastPinchDistance = getDistanceBetweenPoints(pointA, pointB)\n    this.lastPinchRotation = getRotationBetweenPoints(pointA, pointB)\n    this.onDragStart(getCenter(pointA, pointB))\n  }\n\n  onPinchMove(e: TouchEvent) {\n    const pointA = Cropper.getTouchPoint(e.touches[0])\n    const pointB = Cropper.getTouchPoint(e.touches[1])\n    const center = getCenter(pointA, pointB)\n    this.onDrag(center)\n\n    if (this.rafPinchTimeout) this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout)\n    this.rafPinchTimeout = this.currentWindow.requestAnimationFrame(() => {\n      const distance = getDistanceBetweenPoints(pointA, pointB)\n      const newZoom = this.props.zoom * (distance / this.lastPinchDistance)\n      this.setNewZoom(newZoom, center, { shouldUpdatePosition: false })\n      this.lastPinchDistance = distance\n\n      const rotation = getRotationBetweenPoints(pointA, pointB)\n      const newRotation = this.props.rotation + (rotation - this.lastPinchRotation)\n      this.props.onRotationChange && this.props.onRotationChange(newRotation)\n      this.lastPinchRotation = rotation\n    })\n  }\n\n  onWheel = (e: WheelEvent) => {\n    if (this.props.onWheelRequest && !this.props.onWheelRequest(e)) {\n      return\n    }\n\n    e.preventDefault()\n    const point = Cropper.getMousePoint(e)\n    const { pixelY } = normalizeWheel(e)\n    const newZoom = this.props.zoom - (pixelY * this.props.zoomSpeed) / 200\n    this.setNewZoom(newZoom, point, { shouldUpdatePosition: true })\n\n    if (!this.state.hasWheelJustStarted) {\n      this.setState({ hasWheelJustStarted: true }, () => this.props.onInteractionStart?.())\n    }\n\n    if (this.wheelTimer) {\n      clearTimeout(this.wheelTimer)\n    }\n    this.wheelTimer = this.currentWindow.setTimeout(\n      () => this.setState({ hasWheelJustStarted: false }, () => this.props.onInteractionEnd?.()),\n      250\n    )\n  }\n\n  getPointOnContainer = ({ x, y }: Point) => {\n    if (!this.containerRect) {\n      throw new Error('The Cropper is not mounted')\n    }\n    return {\n      x: this.containerRect.width / 2 - (x - this.containerRect.left),\n      y: this.containerRect.height / 2 - (y - this.containerRect.top),\n    }\n  }\n\n  getPointOnMedia = ({ x, y }: Point) => {\n    const { crop, zoom } = this.props\n    return {\n      x: (x + crop.x) / zoom,\n      y: (y + crop.y) / zoom,\n    }\n  }\n\n  setNewZoom = (zoom: number, point: Point, { shouldUpdatePosition = true } = {}) => {\n    if (!this.state.cropSize || !this.props.onZoomChange) return\n\n    const zoomPoint = this.getPointOnContainer(point)\n    const zoomTarget = this.getPointOnMedia(zoomPoint)\n    const newZoom = clamp(zoom, this.props.minZoom, this.props.maxZoom)\n    const requestedPosition = {\n      x: zoomTarget.x * newZoom - zoomPoint.x,\n      y: zoomTarget.y * newZoom - zoomPoint.y,\n    }\n\n    if (shouldUpdatePosition) {\n      const newPosition = this.props.restrictPosition\n        ? restrictPosition(\n            requestedPosition,\n            this.mediaSize,\n            this.state.cropSize,\n            newZoom,\n            this.props.rotation\n          )\n        : requestedPosition\n\n      this.props.onCropChange(newPosition)\n    }\n    this.props.onZoomChange(newZoom)\n  }\n\n  getCropData = () => {\n    if (!this.state.cropSize) {\n      return null\n    }\n\n    // this is to ensure the crop is correctly restricted after a zoom back (https://github.com/ValentinH/react-easy-crop/issues/6)\n    const restrictedPosition = this.props.restrictPosition\n      ? restrictPosition(\n          this.props.crop,\n          this.mediaSize,\n          this.state.cropSize,\n          this.props.zoom,\n          this.props.rotation\n        )\n      : this.props.crop\n    return computeCroppedArea(\n      restrictedPosition,\n      this.mediaSize,\n      this.state.cropSize,\n      this.getAspect(),\n      this.props.zoom,\n      this.props.rotation,\n      this.props.restrictPosition\n    )\n  }\n\n  emitCropData = () => {\n    const cropData = this.getCropData()\n    if (!cropData) return\n\n    const { croppedAreaPercentages, croppedAreaPixels } = cropData\n    if (this.props.onCropComplete) {\n      this.props.onCropComplete(croppedAreaPercentages, croppedAreaPixels)\n    }\n\n    if (this.props.onCropAreaChange) {\n      this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels)\n    }\n  }\n\n  emitCropAreaChange = () => {\n    const cropData = this.getCropData()\n    if (!cropData) return\n\n    const { croppedAreaPercentages, croppedAreaPixels } = cropData\n    if (this.props.onCropAreaChange) {\n      this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels)\n    }\n  }\n\n  recomputeCropPosition = () => {\n    if (!this.state.cropSize) return\n\n    const newPosition = this.props.restrictPosition\n      ? restrictPosition(\n          this.props.crop,\n          this.mediaSize,\n          this.state.cropSize,\n          this.props.zoom,\n          this.props.rotation\n        )\n      : this.props.crop\n\n    this.props.onCropChange(newPosition)\n    this.emitCropData()\n  }\n\n  render() {\n    const {\n      image,\n      video,\n      mediaProps,\n      transform,\n      crop: { x, y },\n      rotation,\n      zoom,\n      cropShape,\n      showGrid,\n      style: { containerStyle, cropAreaStyle, mediaStyle },\n      classes: { containerClassName, cropAreaClassName, mediaClassName },\n      objectFit,\n    } = this.props\n\n    return (\n      <div\n        onMouseDown={this.onMouseDown}\n        onTouchStart={this.onTouchStart}\n        ref={(el) => (this.containerRef = el)}\n        data-testid=\"container\"\n        style={containerStyle}\n        className={classNames('reactEasyCrop_Container', containerClassName)}\n      >\n        {image ? (\n          <img\n            alt=\"\"\n            className={classNames(\n              'reactEasyCrop_Image',\n              objectFit === 'contain' && 'reactEasyCrop_Contain',\n              objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal',\n              objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical',\n              objectFit === 'auto-cover' &&\n                (this.mediaSize.naturalWidth > this.mediaSize.naturalHeight\n                  ? 'reactEasyCrop_Cover_Horizontal'\n                  : 'reactEasyCrop_Cover_Vertical'),\n              mediaClassName\n            )}\n            {...(mediaProps as React.ImgHTMLAttributes<HTMLElement>)}\n            src={image}\n            ref={this.imageRef}\n            style={{\n              ...mediaStyle,\n              transform:\n                transform || `translate(${x}px, ${y}px) rotate(${rotation}deg) scale(${zoom})`,\n            }}\n            onLoad={this.onMediaLoad}\n          />\n        ) : (\n          video && (\n            <video\n              autoPlay\n              loop\n              muted={true}\n              className={classNames(\n                'reactEasyCrop_Video',\n                objectFit === 'contain' && 'reactEasyCrop_Contain',\n                objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal',\n                objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical',\n                objectFit === 'auto-cover' &&\n                  (this.mediaSize.naturalWidth > this.mediaSize.naturalHeight\n                    ? 'reactEasyCrop_Cover_Horizontal'\n                    : 'reactEasyCrop_Cover_Vertical'),\n                mediaClassName\n              )}\n              {...mediaProps}\n              ref={this.videoRef}\n              onLoadedMetadata={this.onMediaLoad}\n              style={{\n                ...mediaStyle,\n                transform:\n                  transform || `translate(${x}px, ${y}px) rotate(${rotation}deg) scale(${zoom})`,\n              }}\n              controls={false}\n            >\n              {(Array.isArray(video) ? video : [{ src: video }]).map((item) => (\n                <source key={item.src} {...item} />\n              ))}\n            </video>\n          )\n        )}\n        {this.state.cropSize && (\n          <div\n            style={{\n              ...cropAreaStyle,\n              width: this.state.cropSize.width,\n              height: this.state.cropSize.height,\n            }}\n            data-testid=\"cropper\"\n            className={classNames(\n              'reactEasyCrop_CropArea',\n              cropShape === 'round' && 'reactEasyCrop_CropAreaRound',\n              showGrid && 'reactEasyCrop_CropAreaGrid',\n              cropAreaClassName\n            )}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default Cropper\n","export const MIN_ZOOM = 100;\nexport const MAX_ZOOM = 300;\nexport const POPOVER_PROPS = {\n\tplacement: 'bottom-start',\n\tvariant: 'toolbar',\n};\n","/**\n * External dependencies\n */\nimport Cropper from 'react-easy-crop';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Spinner } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { MIN_ZOOM, MAX_ZOOM } from './constants';\n\nimport { useImageEditingContext } from './context';\n\nexport default function ImageCropper( {\n\turl,\n\twidth,\n\theight,\n\tclientWidth,\n\tnaturalHeight,\n\tnaturalWidth,\n\tborderProps,\n} ) {\n\tconst {\n\t\tisInProgress,\n\t\teditedUrl,\n\t\tposition,\n\t\tzoom,\n\t\taspect,\n\t\tsetPosition,\n\t\tsetCrop,\n\t\tsetZoom,\n\t\trotation,\n\t} = useImageEditingContext();\n\n\tlet editedHeight = height || ( clientWidth * naturalHeight ) / naturalWidth;\n\n\tif ( rotation % 180 === 90 ) {\n\t\teditedHeight = ( clientWidth * naturalWidth ) / naturalHeight;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={ classnames(\n\t\t\t\t'wp-block-image__crop-area',\n\t\t\t\tborderProps?.className,\n\t\t\t\t{\n\t\t\t\t\t'is-applying': isInProgress,\n\t\t\t\t}\n\t\t\t) }\n\t\t\tstyle={ {\n\t\t\t\t...borderProps?.style,\n\t\t\t\twidth: width || clientWidth,\n\t\t\t\theight: editedHeight,\n\t\t\t} }\n\t\t>\n\t\t\t<Cropper\n\t\t\t\timage={ editedUrl || url }\n\t\t\t\tdisabled={ isInProgress }\n\t\t\t\tminZoom={ MIN_ZOOM / 100 }\n\t\t\t\tmaxZoom={ MAX_ZOOM / 100 }\n\t\t\t\tcrop={ position }\n\t\t\t\tzoom={ zoom / 100 }\n\t\t\t\taspect={ aspect }\n\t\t\t\tonCropChange={ ( pos ) => {\n\t\t\t\t\tsetPosition( pos );\n\t\t\t\t} }\n\t\t\t\tonCropComplete={ ( newCropPercent ) => {\n\t\t\t\t\tsetCrop( newCropPercent );\n\t\t\t\t} }\n\t\t\t\tonZoomChange={ ( newZoom ) => {\n\t\t\t\t\tsetZoom( newZoom * 100 );\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t{ isInProgress && <Spinner /> }\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst search = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z\" />\n\t</SVG>\n);\n\nexport default search;\n","/**\n * WordPress dependencies\n */\nimport { ToolbarButton, RangeControl, Dropdown } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { search } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { MIN_ZOOM, MAX_ZOOM, POPOVER_PROPS } from './constants';\nimport { useImageEditingContext } from './context';\n\nexport default function ZoomDropdown() {\n\tconst { isInProgress, zoom, setZoom } = useImageEditingContext();\n\treturn (\n\t\t<Dropdown\n\t\t\tcontentClassName=\"wp-block-image__zoom\"\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ search }\n\t\t\t\t\tlabel={ __( 'Zoom' ) }\n\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\tdisabled={ isInProgress }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\trenderContent={ () => (\n\t\t\t\t<RangeControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Zoom' ) }\n\t\t\t\t\tmin={ MIN_ZOOM }\n\t\t\t\t\tmax={ MAX_ZOOM }\n\t\t\t\t\tvalue={ Math.round( zoom ) }\n\t\t\t\t\tonChange={ setZoom }\n\t\t\t\t/>\n\t\t\t) }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst aspectRatio = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M18.5 5.5h-13c-1.1 0-2 .9-2 2v9c0 1.1.9 2 2 2h13c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2zm.5 11c0 .3-.2.5-.5.5h-13c-.3 0-.5-.2-.5-.5v-9c0-.3.2-.5.5-.5h13c.3 0 .5.2.5.5v9zM6.5 12H8v-2h2V8.5H6.5V12zm9.5 2h-2v1.5h3.5V12H16v2z\" />\n\t</SVG>\n);\n\nexport default aspectRatio;\n","/**\n * WordPress dependencies\n */\nimport { check, aspectRatio as aspectRatioIcon } from '@wordpress/icons';\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { POPOVER_PROPS } from './constants';\nimport { useImageEditingContext } from './context';\n\nfunction AspectGroup( { aspectRatios, isDisabled, label, onClick, value } ) {\n\treturn (\n\t\t<MenuGroup label={ label }>\n\t\t\t{ aspectRatios.map( ( { title, aspect } ) => (\n\t\t\t\t<MenuItem\n\t\t\t\t\tkey={ aspect }\n\t\t\t\t\tdisabled={ isDisabled }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tonClick( aspect );\n\t\t\t\t\t} }\n\t\t\t\t\trole=\"menuitemradio\"\n\t\t\t\t\tisSelected={ aspect === value }\n\t\t\t\t\ticon={ aspect === value ? check : undefined }\n\t\t\t\t>\n\t\t\t\t\t{ title }\n\t\t\t\t</MenuItem>\n\t\t\t) ) }\n\t\t</MenuGroup>\n\t);\n}\n\nexport default function AspectRatioDropdown( { toggleProps } ) {\n\tconst { isInProgress, aspect, setAspect, defaultAspect } =\n\t\tuseImageEditingContext();\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\ticon={ aspectRatioIcon }\n\t\t\tlabel={ __( 'Aspect Ratio' ) }\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\ttoggleProps={ toggleProps }\n\t\t\tclassName=\"wp-block-image__aspect-ratio\"\n\t\t>\n\t\t\t{ ( { onClose } ) => (\n\t\t\t\t<>\n\t\t\t\t\t<AspectGroup\n\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\taspectRatios={ [\n\t\t\t\t\t\t\t// All ratios should be mirrored in PostFeaturedImage in @wordpress/block-library\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: __( 'Original' ),\n\t\t\t\t\t\t\t\taspect: defaultAspect,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: __( 'Square' ),\n\t\t\t\t\t\t\t\taspect: 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t\t<AspectGroup\n\t\t\t\t\t\tlabel={ __( 'Landscape' ) }\n\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\taspectRatios={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: __( '16:10' ),\n\t\t\t\t\t\t\t\taspect: 16 / 10,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: __( '16:9' ),\n\t\t\t\t\t\t\t\taspect: 16 / 9,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: __( '4:3' ),\n\t\t\t\t\t\t\t\taspect: 4 / 3,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: __( '3:2' ),\n\t\t\t\t\t\t\t\taspect: 3 / 2,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t\t<AspectGroup\n\t\t\t\t\t\tlabel={ __( 'Portrait' ) }\n\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\taspectRatios={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: __( '10:16' ),\n\t\t\t\t\t\t\t\taspect: 10 / 16,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: __( '9:16' ),\n\t\t\t\t\t\t\t\taspect: 9 / 16,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: __( '3:4' ),\n\t\t\t\t\t\t\t\taspect: 3 / 4,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: __( '2:3' ),\n\t\t\t\t\t\t\t\taspect: 2 / 3,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst rotateRight = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M15.1 4.8l-3-2.5V4c-4.4 0-8 3.6-8 8 0 3.7 2.5 6.9 6 7.7.3.1.6.1 1 .2l.2-1.5c-.4 0-.7-.1-1.1-.2l-.1.2v-.2c-2.6-.8-4.5-3.3-4.5-6.2 0-3.6 2.9-6.5 6.5-6.5v1.8l3-2.5zM20 11c-.2-1.4-.7-2.7-1.6-3.8l-1.2.8c.7.9 1.1 2 1.3 3.1L20 11zm-1.5 1.8c-.1.5-.2 1.1-.4 1.6s-.5 1-.8 1.5l1.2.9c.4-.5.8-1.1 1-1.8s.5-1.3.5-2l-1.5-.2zm-5.6 5.6l.2 1.5c1.4-.2 2.7-.7 3.8-1.6l-.9-1.1c-.9.7-2 1.1-3.1 1.2z\" />\n\t</SVG>\n);\n\nexport default rotateRight;\n","/**\n * WordPress dependencies\n */\n\nimport { ToolbarButton } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { rotateRight as rotateRightIcon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { useImageEditingContext } from './context';\n\nexport default function RotationButton() {\n\tconst { isInProgress, rotateClockwise } = useImageEditingContext();\n\treturn (\n\t\t<ToolbarButton\n\t\t\ticon={ rotateRightIcon }\n\t\t\tlabel={ __( 'Rotate' ) }\n\t\t\tonClick={ rotateClockwise }\n\t\t\tdisabled={ isInProgress }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { ToolbarButton } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useImageEditingContext } from './context';\n\nexport default function FormControls() {\n\tconst { isInProgress, apply, cancel } = useImageEditingContext();\n\treturn (\n\t\t<>\n\t\t\t<ToolbarButton onClick={ apply } disabled={ isInProgress }>\n\t\t\t\t{ __( 'Apply' ) }\n\t\t\t</ToolbarButton>\n\t\t\t<ToolbarButton onClick={ cancel }>{ __( 'Cancel' ) }</ToolbarButton>\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { ToolbarGroup, ToolbarItem } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockControls from '../block-controls';\nimport ImageEditingProvider from './context';\nimport Cropper from './cropper';\nimport ZoomDropdown from './zoom-dropdown';\nimport AspectRatioDropdown from './aspect-ratio-dropdown';\nimport RotationButton from './rotation-button';\nimport FormControls from './form-controls';\n\nexport default function ImageEditor( {\n\tid,\n\turl,\n\twidth,\n\theight,\n\tclientWidth,\n\tnaturalHeight,\n\tnaturalWidth,\n\tonSaveImage,\n\tonFinishEditing,\n\tborderProps,\n} ) {\n\treturn (\n\t\t<ImageEditingProvider\n\t\t\tid={ id }\n\t\t\turl={ url }\n\t\t\tnaturalWidth={ naturalWidth }\n\t\t\tnaturalHeight={ naturalHeight }\n\t\t\tonSaveImage={ onSaveImage }\n\t\t\tonFinishEditing={ onFinishEditing }\n\t\t>\n\t\t\t<Cropper\n\t\t\t\tborderProps={ borderProps }\n\t\t\t\turl={ url }\n\t\t\t\twidth={ width }\n\t\t\t\theight={ height }\n\t\t\t\tclientWidth={ clientWidth }\n\t\t\t\tnaturalHeight={ naturalHeight }\n\t\t\t\tnaturalWidth={ naturalWidth }\n\t\t\t/>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ZoomDropdown />\n\t\t\t\t\t<ToolbarItem>\n\t\t\t\t\t\t{ ( toggleProps ) => (\n\t\t\t\t\t\t\t<AspectRatioDropdown toggleProps={ toggleProps } />\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ToolbarItem>\n\t\t\t\t\t<RotationButton />\n\t\t\t\t</ToolbarGroup>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<FormControls />\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t</ImageEditingProvider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tButtonGroup,\n\tSelectControl,\n\t__experimentalNumberControl as NumberControl,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useDimensionHandler from './use-dimension-handler';\n\nconst IMAGE_SIZE_PRESETS = [ 25, 50, 75, 100 ];\nconst noop = () => {};\n\nexport default function ImageSizeControl( {\n\timageSizeHelp,\n\timageWidth,\n\timageHeight,\n\timageSizeOptions = [],\n\tisResizable = true,\n\tslug,\n\twidth,\n\theight,\n\tonChange,\n\tonChangeImage = noop,\n} ) {\n\tconst { currentHeight, currentWidth, updateDimension, updateDimensions } =\n\t\tuseDimensionHandler( height, width, imageHeight, imageWidth, onChange );\n\n\treturn (\n\t\t<>\n\t\t\t{ imageSizeOptions && imageSizeOptions.length > 0 && (\n\t\t\t\t<SelectControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Resolution' ) }\n\t\t\t\t\tvalue={ slug }\n\t\t\t\t\toptions={ imageSizeOptions }\n\t\t\t\t\tonChange={ onChangeImage }\n\t\t\t\t\thelp={ imageSizeHelp }\n\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ isResizable && (\n\t\t\t\t<div className=\"block-editor-image-size-control\">\n\t\t\t\t\t<HStack align=\"baseline\" spacing=\"3\">\n\t\t\t\t\t\t<NumberControl\n\t\t\t\t\t\t\tclassName=\"block-editor-image-size-control__width\"\n\t\t\t\t\t\t\tlabel={ __( 'Width' ) }\n\t\t\t\t\t\t\tvalue={ currentWidth }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tupdateDimension( 'width', value )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<NumberControl\n\t\t\t\t\t\t\tclassName=\"block-editor-image-size-control__height\"\n\t\t\t\t\t\t\tlabel={ __( 'Height' ) }\n\t\t\t\t\t\t\tvalue={ currentHeight }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tupdateDimension( 'height', value )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</HStack>\n\t\t\t\t\t<HStack>\n\t\t\t\t\t\t<ButtonGroup aria-label={ __( 'Image size presets' ) }>\n\t\t\t\t\t\t\t{ IMAGE_SIZE_PRESETS.map( ( scale ) => {\n\t\t\t\t\t\t\t\tconst scaledWidth = Math.round(\n\t\t\t\t\t\t\t\t\timageWidth * ( scale / 100 )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tconst scaledHeight = Math.round(\n\t\t\t\t\t\t\t\t\timageHeight * ( scale / 100 )\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tconst isCurrent =\n\t\t\t\t\t\t\t\t\tcurrentWidth === scaledWidth &&\n\t\t\t\t\t\t\t\t\tcurrentHeight === scaledHeight;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tkey={ scale }\n\t\t\t\t\t\t\t\t\t\tisSmall\n\t\t\t\t\t\t\t\t\t\tvariant={\n\t\t\t\t\t\t\t\t\t\t\tisCurrent ? 'primary' : undefined\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisPressed={ isCurrent }\n\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\tupdateDimensions(\n\t\t\t\t\t\t\t\t\t\t\t\tscaledHeight,\n\t\t\t\t\t\t\t\t\t\t\t\tscaledWidth\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ scale }%\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t<Button isSmall onClick={ () => updateDimensions() }>\n\t\t\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</HStack>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\n\nexport default function useDimensionHandler(\n\tcustomHeight,\n\tcustomWidth,\n\tdefaultHeight,\n\tdefaultWidth,\n\tonChange\n) {\n\tconst [ currentWidth, setCurrentWidth ] = useState(\n\t\tcustomWidth ?? defaultWidth ?? ''\n\t);\n\tconst [ currentHeight, setCurrentHeight ] = useState(\n\t\tcustomHeight ?? defaultHeight ?? ''\n\t);\n\n\t// When an image is first inserted, the default dimensions are initially\n\t// undefined. This effect updates the dimensions when the default values\n\t// come through.\n\tuseEffect( () => {\n\t\tif ( customWidth === undefined && defaultWidth !== undefined ) {\n\t\t\tsetCurrentWidth( defaultWidth );\n\t\t}\n\t\tif ( customHeight === undefined && defaultHeight !== undefined ) {\n\t\t\tsetCurrentHeight( defaultHeight );\n\t\t}\n\t}, [ defaultWidth, defaultHeight ] );\n\n\t// If custom values change, it means an outsider has resized the image using some other method (eg resize box)\n\t// this keeps track of these values too. We need to parse before comparing; custom values can be strings.\n\tuseEffect( () => {\n\t\tif (\n\t\t\tcustomWidth !== undefined &&\n\t\t\tNumber.parseInt( customWidth ) !== Number.parseInt( currentWidth )\n\t\t) {\n\t\t\tsetCurrentWidth( customWidth );\n\t\t}\n\t\tif (\n\t\t\tcustomHeight !== undefined &&\n\t\t\tNumber.parseInt( customHeight ) !== Number.parseInt( currentHeight )\n\t\t) {\n\t\t\tsetCurrentHeight( customHeight );\n\t\t}\n\t}, [ customWidth, customHeight ] );\n\n\tconst updateDimension = ( dimension, value ) => {\n\t\tconst parsedValue = value === '' ? undefined : parseInt( value, 10 );\n\t\tif ( dimension === 'width' ) {\n\t\t\tsetCurrentWidth( parsedValue );\n\t\t} else {\n\t\t\tsetCurrentHeight( parsedValue );\n\t\t}\n\t\tonChange( {\n\t\t\t[ dimension ]: parsedValue,\n\t\t} );\n\t};\n\n\tconst updateDimensions = ( nextHeight, nextWidth ) => {\n\t\tsetCurrentHeight( nextHeight ?? defaultHeight );\n\t\tsetCurrentWidth( nextWidth ?? defaultWidth );\n\t\tonChange( { height: nextHeight, width: nextWidth } );\n\t};\n\n\treturn {\n\t\tcurrentHeight,\n\t\tcurrentWidth,\n\t\tupdateDimension,\n\t\tupdateDimensions,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\t__unstableMotion as motion,\n\t__unstableAnimatePresence as AnimatePresence,\n} from '@wordpress/components';\nimport { settings as settingsIcon } from '@wordpress/icons';\nimport { useReducedMotion, useInstanceId } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\n\nfunction LinkSettingsDrawer( { children, settingsOpen, setSettingsOpen } ) {\n\tconst prefersReducedMotion = useReducedMotion();\n\tconst MaybeAnimatePresence = prefersReducedMotion\n\t\t? Fragment\n\t\t: AnimatePresence;\n\tconst MaybeMotionDiv = prefersReducedMotion ? 'div' : motion.div;\n\n\tconst id = useInstanceId( LinkSettingsDrawer );\n\n\tconst settingsDrawerId = `link-control-settings-drawer-${ id }`;\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tclassName=\"block-editor-link-control__drawer-toggle\"\n\t\t\t\taria-expanded={ settingsOpen }\n\t\t\t\tonClick={ () => setSettingsOpen( ! settingsOpen ) }\n\t\t\t\ticon={ settingsIcon }\n\t\t\t\tlabel={ __( 'Link Settings' ) }\n\t\t\t\taria-controls={ settingsDrawerId }\n\t\t\t/>\n\t\t\t<MaybeAnimatePresence>\n\t\t\t\t{ settingsOpen && (\n\t\t\t\t\t<MaybeMotionDiv\n\t\t\t\t\t\tclassName=\"block-editor-link-control__drawer\"\n\t\t\t\t\t\thidden={ ! settingsOpen }\n\t\t\t\t\t\tid={ settingsDrawerId }\n\t\t\t\t\t\tinitial=\"collapsed\"\n\t\t\t\t\t\tanimate=\"open\"\n\t\t\t\t\t\texit=\"collapsed\"\n\t\t\t\t\t\tvariants={ {\n\t\t\t\t\t\t\topen: { opacity: 1, height: 'auto' },\n\t\t\t\t\t\t\tcollapsed: { opacity: 0, height: 0 },\n\t\t\t\t\t\t} }\n\t\t\t\t\t\ttransition={ {\n\t\t\t\t\t\t\tduration: 0.1,\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"block-editor-link-control__drawer-inner\">\n\t\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</MaybeMotionDiv>\n\t\t\t\t) }\n\t\t\t</MaybeAnimatePresence>\n\t\t</>\n\t);\n}\n\nexport default LinkSettingsDrawer;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport scrollIntoView from 'dom-scroll-into-view';\n\n/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\nimport { __, sprintf, _n } from '@wordpress/i18n';\nimport { Component, createRef } from '@wordpress/element';\nimport { UP, DOWN, ENTER, TAB } from '@wordpress/keycodes';\nimport {\n\tBaseControl,\n\tButton,\n\tSpinner,\n\twithSpokenMessages,\n\tPopover,\n} from '@wordpress/components';\nimport {\n\tcompose,\n\tdebounce,\n\twithInstanceId,\n\twithSafeTimeout,\n} from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport { isURL } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Whether the argument is a function.\n *\n * @param {*} maybeFunc The argument to check.\n * @return {boolean} True if the argument is a function, false otherwise.\n */\nfunction isFunction( maybeFunc ) {\n\treturn typeof maybeFunc === 'function';\n}\n\nclass URLInput extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.onChange = this.onChange.bind( this );\n\t\tthis.onFocus = this.onFocus.bind( this );\n\t\tthis.onKeyDown = this.onKeyDown.bind( this );\n\t\tthis.selectLink = this.selectLink.bind( this );\n\t\tthis.handleOnClick = this.handleOnClick.bind( this );\n\t\tthis.bindSuggestionNode = this.bindSuggestionNode.bind( this );\n\t\tthis.autocompleteRef = props.autocompleteRef || createRef();\n\t\tthis.inputRef = createRef();\n\t\tthis.updateSuggestions = debounce(\n\t\t\tthis.updateSuggestions.bind( this ),\n\t\t\t200\n\t\t);\n\n\t\tthis.suggestionNodes = [];\n\n\t\tthis.suggestionsRequest = null;\n\n\t\tthis.state = {\n\t\t\tsuggestions: [],\n\t\t\tshowSuggestions: false,\n\t\t\tisUpdatingSuggestions: false,\n\t\t\tsuggestionsValue: null,\n\t\t\tselectedSuggestion: null,\n\t\t\tsuggestionsListboxId: '',\n\t\t\tsuggestionOptionIdPrefix: '',\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { showSuggestions, selectedSuggestion } = this.state;\n\t\tconst { value, __experimentalShowInitialSuggestions = false } =\n\t\t\tthis.props;\n\n\t\t// Only have to worry about scrolling selected suggestion into view\n\t\t// when already expanded.\n\t\tif (\n\t\t\tshowSuggestions &&\n\t\t\tselectedSuggestion !== null &&\n\t\t\tthis.suggestionNodes[ selectedSuggestion ] &&\n\t\t\t! this.scrollingIntoView\n\t\t) {\n\t\t\tthis.scrollingIntoView = true;\n\t\t\tscrollIntoView(\n\t\t\t\tthis.suggestionNodes[ selectedSuggestion ],\n\t\t\t\tthis.autocompleteRef.current,\n\t\t\t\t{\n\t\t\t\t\tonlyScrollIfNeeded: true,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tthis.props.setTimeout( () => {\n\t\t\t\tthis.scrollingIntoView = false;\n\t\t\t}, 100 );\n\t\t}\n\n\t\t// Update suggestions when the value changes.\n\t\tif (\n\t\t\tprevProps.value !== value &&\n\t\t\t! this.props.disableSuggestions &&\n\t\t\t! this.state.isUpdatingSuggestions\n\t\t) {\n\t\t\tif ( value?.length ) {\n\t\t\t\t// If the new value is not empty we need to update with suggestions for it.\n\t\t\t\tthis.updateSuggestions( value );\n\t\t\t} else if ( __experimentalShowInitialSuggestions ) {\n\t\t\t\t// If the new value is empty and we can show initial suggestions, then show initial suggestions.\n\t\t\t\tthis.updateSuggestions();\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( this.shouldShowInitialSuggestions() ) {\n\t\t\tthis.updateSuggestions();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.suggestionsRequest?.cancel?.();\n\t\tthis.suggestionsRequest = null;\n\t}\n\n\tbindSuggestionNode( index ) {\n\t\treturn ( ref ) => {\n\t\t\tthis.suggestionNodes[ index ] = ref;\n\t\t};\n\t}\n\n\tshouldShowInitialSuggestions() {\n\t\tconst { __experimentalShowInitialSuggestions = false, value } =\n\t\t\tthis.props;\n\t\treturn (\n\t\t\t__experimentalShowInitialSuggestions && ! ( value && value.length )\n\t\t);\n\t}\n\n\tupdateSuggestions( value = '' ) {\n\t\tconst {\n\t\t\t__experimentalFetchLinkSuggestions: fetchLinkSuggestions,\n\t\t\t__experimentalHandleURLSuggestions: handleURLSuggestions,\n\t\t} = this.props;\n\n\t\tif ( ! fetchLinkSuggestions ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Initial suggestions may only show if there is no value\n\t\t// (note: this includes whitespace).\n\t\tconst isInitialSuggestions = ! value?.length;\n\n\t\t// Trim only now we've determined whether or not it originally had a \"length\"\n\t\t// (even if that value was all whitespace).\n\t\tvalue = value.trim();\n\n\t\t// Allow a suggestions request if:\n\t\t// - there are at least 2 characters in the search input (except manual searches where\n\t\t//   search input length is not required to trigger a fetch)\n\t\t// - this is a direct entry (eg: a URL)\n\t\tif (\n\t\t\t! isInitialSuggestions &&\n\t\t\t( value.length < 2 || ( ! handleURLSuggestions && isURL( value ) ) )\n\t\t) {\n\t\t\tthis.suggestionsRequest?.cancel?.();\n\t\t\tthis.suggestionsRequest = null;\n\n\t\t\tthis.setState( {\n\t\t\t\tsuggestions: [],\n\t\t\t\tshowSuggestions: false,\n\t\t\t\tsuggestionsValue: value,\n\t\t\t\tselectedSuggestion: null,\n\t\t\t\tloading: false,\n\t\t\t} );\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tisUpdatingSuggestions: true,\n\t\t\tselectedSuggestion: null,\n\t\t\tloading: true,\n\t\t} );\n\n\t\tconst request = fetchLinkSuggestions( value, {\n\t\t\tisInitialSuggestions,\n\t\t} );\n\n\t\trequest\n\t\t\t.then( ( suggestions ) => {\n\t\t\t\t// A fetch Promise doesn't have an abort option. It's mimicked by\n\t\t\t\t// comparing the request reference in on the instance, which is\n\t\t\t\t// reset or deleted on subsequent requests or unmounting.\n\t\t\t\tif ( this.suggestionsRequest !== request ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tsuggestions,\n\t\t\t\t\tisUpdatingSuggestions: false,\n\t\t\t\t\tsuggestionsValue: value,\n\t\t\t\t\tloading: false,\n\t\t\t\t\tshowSuggestions: !! suggestions.length,\n\t\t\t\t} );\n\n\t\t\t\tif ( !! suggestions.length ) {\n\t\t\t\t\tthis.props.debouncedSpeak(\n\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t/* translators: %s: number of results. */\n\t\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t\t'%d result found, use up and down arrow keys to navigate.',\n\t\t\t\t\t\t\t\t'%d results found, use up and down arrow keys to navigate.',\n\t\t\t\t\t\t\t\tsuggestions.length\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tsuggestions.length\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'assertive'\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.debouncedSpeak(\n\t\t\t\t\t\t__( 'No results.' ),\n\t\t\t\t\t\t'assertive'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tif ( this.suggestionsRequest !== request ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tisUpdatingSuggestions: false,\n\t\t\t\t\tloading: false,\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t// Note that this assignment is handled *before* the async search request\n\t\t// as a Promise always resolves on the next tick of the event loop.\n\t\tthis.suggestionsRequest = request;\n\t}\n\n\tonChange( event ) {\n\t\tthis.props.onChange( event.target.value );\n\t}\n\n\tonFocus() {\n\t\tconst { suggestions } = this.state;\n\t\tconst { disableSuggestions, value } = this.props;\n\n\t\t// When opening the link editor, if there's a value present, we want to load the suggestions pane with the results for this input search value\n\t\t// Don't re-run the suggestions on focus if there are already suggestions present (prevents searching again when tabbing between the input and buttons)\n\t\tif (\n\t\t\tvalue &&\n\t\t\t! disableSuggestions &&\n\t\t\t! this.state.isUpdatingSuggestions &&\n\t\t\t! ( suggestions && suggestions.length )\n\t\t) {\n\t\t\t// Ensure the suggestions are updated with the current input value.\n\t\t\tthis.updateSuggestions( value );\n\t\t}\n\t}\n\n\tonKeyDown( event ) {\n\t\tthis.props.onKeyDown?.( event );\n\t\tconst { showSuggestions, selectedSuggestion, suggestions, loading } =\n\t\t\tthis.state;\n\n\t\t// If the suggestions are not shown or loading, we shouldn't handle the arrow keys\n\t\t// We shouldn't preventDefault to allow block arrow keys navigation.\n\t\tif ( ! showSuggestions || ! suggestions.length || loading ) {\n\t\t\t// In the Windows version of Firefox the up and down arrows don't move the caret\n\t\t\t// within an input field like they do for Mac Firefox/Chrome/Safari. This causes\n\t\t\t// a form of focus trapping that is disruptive to the user experience. This disruption\n\t\t\t// only happens if the caret is not in the first or last position in the text input.\n\t\t\t// See: https://github.com/WordPress/gutenberg/issues/5693#issuecomment-436684747\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\t// When UP is pressed, if the caret is at the start of the text, move it to the 0\n\t\t\t\t// position.\n\t\t\t\tcase UP: {\n\t\t\t\t\tif ( 0 !== event.target.selectionStart ) {\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Set the input caret to position 0.\n\t\t\t\t\t\tevent.target.setSelectionRange( 0, 0 );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// When DOWN is pressed, if the caret is not at the end of the text, move it to the\n\t\t\t\t// last position.\n\t\t\t\tcase DOWN: {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.props.value.length !== event.target.selectionStart\n\t\t\t\t\t) {\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Set the input caret to the last position.\n\t\t\t\t\t\tevent.target.setSelectionRange(\n\t\t\t\t\t\t\tthis.props.value.length,\n\t\t\t\t\t\t\tthis.props.value.length\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// Submitting while loading should trigger onSubmit.\n\t\t\t\tcase ENTER: {\n\t\t\t\t\tif ( this.props.onSubmit ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tthis.props.onSubmit( null, event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst suggestion =\n\t\t\tthis.state.suggestions[ this.state.selectedSuggestion ];\n\n\t\tswitch ( event.keyCode ) {\n\t\t\tcase UP: {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst previousIndex = ! selectedSuggestion\n\t\t\t\t\t? suggestions.length - 1\n\t\t\t\t\t: selectedSuggestion - 1;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tselectedSuggestion: previousIndex,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase DOWN: {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst nextIndex =\n\t\t\t\t\tselectedSuggestion === null ||\n\t\t\t\t\tselectedSuggestion === suggestions.length - 1\n\t\t\t\t\t\t? 0\n\t\t\t\t\t\t: selectedSuggestion + 1;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tselectedSuggestion: nextIndex,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase TAB: {\n\t\t\t\tif ( this.state.selectedSuggestion !== null ) {\n\t\t\t\t\tthis.selectLink( suggestion );\n\t\t\t\t\t// Announce a link has been selected when tabbing away from the input field.\n\t\t\t\t\tthis.props.speak( __( 'Link selected.' ) );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ENTER: {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( this.state.selectedSuggestion !== null ) {\n\t\t\t\t\tthis.selectLink( suggestion );\n\n\t\t\t\t\tif ( this.props.onSubmit ) {\n\t\t\t\t\t\tthis.props.onSubmit( suggestion, event );\n\t\t\t\t\t}\n\t\t\t\t} else if ( this.props.onSubmit ) {\n\t\t\t\t\tthis.props.onSubmit( null, event );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tselectLink( suggestion ) {\n\t\tthis.props.onChange( suggestion.url, suggestion );\n\t\tthis.setState( {\n\t\t\tselectedSuggestion: null,\n\t\t\tshowSuggestions: false,\n\t\t} );\n\t}\n\n\thandleOnClick( suggestion ) {\n\t\tthis.selectLink( suggestion );\n\t\t// Move focus to the input field when a link suggestion is clicked.\n\t\tthis.inputRef.current.focus();\n\t}\n\n\tstatic getDerivedStateFromProps(\n\t\t{\n\t\t\tvalue,\n\t\t\tinstanceId,\n\t\t\tdisableSuggestions,\n\t\t\t__experimentalShowInitialSuggestions = false,\n\t\t},\n\t\t{ showSuggestions }\n\t) {\n\t\tlet shouldShowSuggestions = showSuggestions;\n\n\t\tconst hasValue = value && value.length;\n\n\t\tif ( ! __experimentalShowInitialSuggestions && ! hasValue ) {\n\t\t\tshouldShowSuggestions = false;\n\t\t}\n\n\t\tif ( disableSuggestions === true ) {\n\t\t\tshouldShowSuggestions = false;\n\t\t}\n\n\t\treturn {\n\t\t\tshowSuggestions: shouldShowSuggestions,\n\t\t\tsuggestionsListboxId: `block-editor-url-input-suggestions-${ instanceId }`,\n\t\t\tsuggestionOptionIdPrefix: `block-editor-url-input-suggestion-${ instanceId }`,\n\t\t};\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ this.renderControl() }\n\t\t\t\t{ this.renderSuggestions() }\n\t\t\t</>\n\t\t);\n\t}\n\n\trenderControl() {\n\t\tconst {\n\t\t\t/** Start opting into the new margin-free styles that will become the default in a future version. */\n\t\t\t__nextHasNoMarginBottom = false,\n\t\t\tlabel = null,\n\t\t\tclassName,\n\t\t\tisFullWidth,\n\t\t\tinstanceId,\n\t\t\tplaceholder = __( 'Paste URL or type to search' ),\n\t\t\t__experimentalRenderControl: renderControl,\n\t\t\tvalue = '',\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tloading,\n\t\t\tshowSuggestions,\n\t\t\tselectedSuggestion,\n\t\t\tsuggestionsListboxId,\n\t\t\tsuggestionOptionIdPrefix,\n\t\t} = this.state;\n\n\t\tconst inputId = `url-input-control-${ instanceId }`;\n\n\t\tconst controlProps = {\n\t\t\tid: inputId, // Passes attribute to label for the for attribute\n\t\t\tlabel,\n\t\t\tclassName: classnames( 'block-editor-url-input', className, {\n\t\t\t\t'is-full-width': isFullWidth,\n\t\t\t} ),\n\t\t};\n\n\t\tconst inputProps = {\n\t\t\tid: inputId,\n\t\t\tvalue,\n\t\t\trequired: true,\n\t\t\tclassName: 'block-editor-url-input__input',\n\t\t\ttype: 'text',\n\t\t\tonChange: this.onChange,\n\t\t\tonFocus: this.onFocus,\n\t\t\tplaceholder,\n\t\t\tonKeyDown: this.onKeyDown,\n\t\t\trole: 'combobox',\n\t\t\t'aria-label': label ? undefined : __( 'URL' ), // Ensure input always has an accessible label\n\t\t\t'aria-expanded': showSuggestions,\n\t\t\t'aria-autocomplete': 'list',\n\t\t\t'aria-owns': suggestionsListboxId,\n\t\t\t'aria-activedescendant':\n\t\t\t\tselectedSuggestion !== null\n\t\t\t\t\t? `${ suggestionOptionIdPrefix }-${ selectedSuggestion }`\n\t\t\t\t\t: undefined,\n\t\t\tref: this.inputRef,\n\t\t};\n\n\t\tif ( renderControl ) {\n\t\t\treturn renderControl( controlProps, inputProps, loading );\n\t\t}\n\n\t\tif ( ! __nextHasNoMarginBottom ) {\n\t\t\tdeprecated( 'Bottom margin styles for wp.blockEditor.URLInput', {\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.5',\n\t\t\t\thint: 'Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version',\n\t\t\t} );\n\t\t}\n\n\t\treturn (\n\t\t\t<BaseControl\n\t\t\t\t__nextHasNoMarginBottom={ __nextHasNoMarginBottom }\n\t\t\t\t{ ...controlProps }\n\t\t\t>\n\t\t\t\t<input { ...inputProps } />\n\t\t\t\t{ loading && <Spinner /> }\n\t\t\t</BaseControl>\n\t\t);\n\t}\n\n\trenderSuggestions() {\n\t\tconst {\n\t\t\tclassName,\n\t\t\t__experimentalRenderSuggestions: renderSuggestions,\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tshowSuggestions,\n\t\t\tsuggestions,\n\t\t\tsuggestionsValue,\n\t\t\tselectedSuggestion,\n\t\t\tsuggestionsListboxId,\n\t\t\tsuggestionOptionIdPrefix,\n\t\t\tloading,\n\t\t} = this.state;\n\n\t\tif ( ! showSuggestions || suggestions.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst suggestionsListProps = {\n\t\t\tid: suggestionsListboxId,\n\t\t\tref: this.autocompleteRef,\n\t\t\trole: 'listbox',\n\t\t};\n\n\t\tconst buildSuggestionItemProps = ( suggestion, index ) => {\n\t\t\treturn {\n\t\t\t\trole: 'option',\n\t\t\t\ttabIndex: '-1',\n\t\t\t\tid: `${ suggestionOptionIdPrefix }-${ index }`,\n\t\t\t\tref: this.bindSuggestionNode( index ),\n\t\t\t\t'aria-selected':\n\t\t\t\t\tindex === selectedSuggestion ? true : undefined,\n\t\t\t};\n\t\t};\n\n\t\tif ( isFunction( renderSuggestions ) ) {\n\t\t\treturn renderSuggestions( {\n\t\t\t\tsuggestions,\n\t\t\t\tselectedSuggestion,\n\t\t\t\tsuggestionsListProps,\n\t\t\t\tbuildSuggestionItemProps,\n\t\t\t\tisLoading: loading,\n\t\t\t\thandleSuggestionClick: this.handleOnClick,\n\t\t\t\tisInitialSuggestions: ! suggestionsValue?.length,\n\t\t\t\tcurrentInputValue: suggestionsValue,\n\t\t\t} );\n\t\t}\n\n\t\treturn (\n\t\t\t<Popover placement=\"bottom\" focusOnMount={ false }>\n\t\t\t\t<div\n\t\t\t\t\t{ ...suggestionsListProps }\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'block-editor-url-input__suggestions',\n\t\t\t\t\t\t`${ className }__suggestions`\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ suggestions.map( ( suggestion, index ) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t{ ...buildSuggestionItemProps( suggestion, index ) }\n\t\t\t\t\t\t\tkey={ suggestion.id }\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'block-editor-url-input__suggestion',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'is-selected': index === selectedSuggestion,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tonClick={ () => this.handleOnClick( suggestion ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ suggestion.title }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) ) }\n\t\t\t\t</div>\n\t\t\t</Popover>\n\t\t);\n\t}\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/url-input/README.md\n */\nexport default compose(\n\twithSafeTimeout,\n\twithSpokenMessages,\n\twithInstanceId,\n\twithSelect( ( select, props ) => {\n\t\t// If a link suggestions handler is already provided then\n\t\t// bail.\n\t\tif ( isFunction( props.__experimentalFetchLinkSuggestions ) ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn {\n\t\t\t__experimentalFetchLinkSuggestions:\n\t\t\t\tgetSettings().__experimentalFetchLinkSuggestions,\n\t\t};\n\t} )\n)( URLInput );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { createInterpolateElement } from '@wordpress/element';\nimport { Icon, plus } from '@wordpress/icons';\n\nexport const LinkControlSearchCreate = ( {\n\tsearchTerm,\n\tonClick,\n\titemProps,\n\tisSelected,\n\tbuttonText,\n} ) => {\n\tif ( ! searchTerm ) {\n\t\treturn null;\n\t}\n\n\tlet text;\n\tif ( buttonText ) {\n\t\ttext =\n\t\t\ttypeof buttonText === 'function'\n\t\t\t\t? buttonText( searchTerm )\n\t\t\t\t: buttonText;\n\t} else {\n\t\ttext = createInterpolateElement(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: search term. */\n\t\t\t\t__( 'Create: <mark>%s</mark>' ),\n\t\t\t\tsearchTerm\n\t\t\t),\n\t\t\t{ mark: <mark /> }\n\t\t);\n\t}\n\n\treturn (\n\t\t<Button\n\t\t\t{ ...itemProps }\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-link-control__search-create block-editor-link-control__search-item',\n\t\t\t\t{\n\t\t\t\t\t'is-selected': isSelected,\n\t\t\t\t}\n\t\t\t) }\n\t\t\tonClick={ onClick }\n\t\t>\n\t\t\t<Icon\n\t\t\t\tclassName=\"block-editor-link-control__search-item-icon\"\n\t\t\t\ticon={ plus }\n\t\t\t/>\n\n\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-title\">\n\t\t\t\t\t{ text }\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</Button>\n\t);\n};\n\nexport default LinkControlSearchCreate;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst postList = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v12zM7 11h2V9H7v2zm0 4h2v-2H7v2zm3-4h7V9h-7v2zm0 4h7v-2h-7v2z\" />\n\t</SVG>\n);\n\nexport default postList;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst tag = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M20.1 11.2l-6.7-6.7c-.1-.1-.3-.2-.5-.2H5c-.4-.1-.8.3-.8.7v7.8c0 .2.1.4.2.5l6.7 6.7c.2.2.5.4.7.5s.6.2.9.2c.3 0 .6-.1.9-.2.3-.1.5-.3.8-.5l5.6-5.6c.4-.4.7-1 .7-1.6.1-.6-.2-1.2-.6-1.6zM19 13.4L13.4 19c-.1.1-.2.1-.3.2-.2.1-.4.1-.6 0-.1 0-.2-.1-.3-.2l-6.5-6.5V5.8h6.8l6.5 6.5c.2.2.2.4.2.6 0 .1 0 .3-.2.5zM9 8c-.6 0-1 .4-1 1s.4 1 1 1 1-.4 1-1-.4-1-1-1z\" />\n\t</SVG>\n);\n\nexport default tag;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst category = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path\n\t\t\td=\"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z\"\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t/>\n\t</SVG>\n);\n\nexport default category;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst file = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M19 6.2h-5.9l-.6-1.1c-.3-.7-1-1.1-1.8-1.1H5c-1.1 0-2 .9-2 2v11.8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8.2c0-1.1-.9-2-2-2zm.5 11.6c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h5.8c.2 0 .4.1.4.3l1 2H19c.3 0 .5.2.5.5v9.5z\" />\n\t</SVG>\n);\n\nexport default file;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst globe = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12 3.3c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8s-4-8.8-8.8-8.8zm6.5 5.5h-2.6C15.4 7.3 14.8 6 14 5c2 .6 3.6 2 4.5 3.8zm.7 3.2c0 .6-.1 1.2-.2 1.8h-2.9c.1-.6.1-1.2.1-1.8s-.1-1.2-.1-1.8H19c.2.6.2 1.2.2 1.8zM12 18.7c-1-.7-1.8-1.9-2.3-3.5h4.6c-.5 1.6-1.3 2.9-2.3 3.5zm-2.6-4.9c-.1-.6-.1-1.1-.1-1.8 0-.6.1-1.2.1-1.8h5.2c.1.6.1 1.1.1 1.8s-.1 1.2-.1 1.8H9.4zM4.8 12c0-.6.1-1.2.2-1.8h2.9c-.1.6-.1 1.2-.1 1.8 0 .6.1 1.2.1 1.8H5c-.2-.6-.2-1.2-.2-1.8zM12 5.3c1 .7 1.8 1.9 2.3 3.5H9.7c.5-1.6 1.3-2.9 2.3-3.5zM10 5c-.8 1-1.4 2.3-1.8 3.8H5.5C6.4 7 8 5.6 10 5zM5.5 15.3h2.6c.4 1.5 1 2.8 1.8 3.7-1.8-.6-3.5-2-4.4-3.7zM14 19c.8-1 1.4-2.2 1.8-3.7h2.6C17.6 17 16 18.4 14 19z\" />\n\t</SVG>\n);\n\nexport default globe;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\nimport { __ } from '@wordpress/i18n';\nimport { Button, TextHighlight } from '@wordpress/components';\nimport {\n\tIcon,\n\tglobe,\n\tpage,\n\ttag,\n\tpostList,\n\tcategory,\n\tfile,\n} from '@wordpress/icons';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\n\nconst ICONS_MAP = {\n\tpost: postList,\n\tpage,\n\tpost_tag: tag,\n\tcategory,\n\tattachment: file,\n};\n\nfunction SearchItemIcon( { isURL, suggestion } ) {\n\tlet icon = null;\n\n\tif ( isURL ) {\n\t\ticon = globe;\n\t} else if ( suggestion.type in ICONS_MAP ) {\n\t\ticon = ICONS_MAP[ suggestion.type ];\n\t}\n\n\tif ( icon ) {\n\t\treturn (\n\t\t\t<Icon\n\t\t\t\tclassName=\"block-editor-link-control__search-item-icon\"\n\t\t\t\ticon={ icon }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n}\n\nexport const LinkControlSearchItem = ( {\n\titemProps,\n\tsuggestion,\n\tisSelected = false,\n\tonClick,\n\tisURL = false,\n\tsearchTerm = '',\n\tshouldShowType = false,\n} ) => {\n\treturn (\n\t\t<Button\n\t\t\t{ ...itemProps }\n\t\t\tonClick={ onClick }\n\t\t\tclassName={ classnames( 'block-editor-link-control__search-item', {\n\t\t\t\t'is-selected': isSelected,\n\t\t\t\t'is-url': isURL,\n\t\t\t\t'is-entity': ! isURL,\n\t\t\t} ) }\n\t\t>\n\t\t\t<SearchItemIcon suggestion={ suggestion } isURL={ isURL } />\n\n\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-title\">\n\t\t\t\t\t<TextHighlight\n\t\t\t\t\t\t// The component expects a plain text string.\n\t\t\t\t\t\ttext={ stripHTML( suggestion.title ) }\n\t\t\t\t\t\thighlight={ searchTerm }\n\t\t\t\t\t/>\n\t\t\t\t</span>\n\t\t\t\t<span\n\t\t\t\t\taria-hidden={ ! isURL }\n\t\t\t\t\tclassName=\"block-editor-link-control__search-item-info\"\n\t\t\t\t>\n\t\t\t\t\t{ ! isURL &&\n\t\t\t\t\t\t( filterURLForDisplay(\n\t\t\t\t\t\t\tsafeDecodeURI( suggestion.url )\n\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t'' ) }\n\t\t\t\t\t{ isURL && __( 'Press ENTER to add this link' ) }\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t\t{ shouldShowType && suggestion.type && (\n\t\t\t\t<span className=\"block-editor-link-control__search-item-type\">\n\t\t\t\t\t{ getVisualTypeName( suggestion ) }\n\t\t\t\t</span>\n\t\t\t) }\n\t\t</Button>\n\t);\n};\n\nfunction getVisualTypeName( suggestion ) {\n\tif ( suggestion.isFrontPage ) {\n\t\treturn 'front page';\n\t}\n\n\t// Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label.\n\treturn suggestion.type === 'post_tag' ? 'tag' : suggestion.type;\n}\n\nexport default LinkControlSearchItem;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n// Used as a unique identifier for the \"Create\" option within search results.\n// Used to help distinguish the \"Create\" suggestion within the search results in\n// order to handle it as a unique case.\nexport const CREATE_TYPE = '__CREATE__';\nexport const TEL_TYPE = 'tel';\nexport const URL_TYPE = 'URL';\nexport const MAILTO_TYPE = 'mailto';\nexport const INTERNAL_TYPE = 'internal';\n\nexport const LINK_ENTRY_TYPES = [\n\tURL_TYPE,\n\tMAILTO_TYPE,\n\tTEL_TYPE,\n\tINTERNAL_TYPE,\n];\n\nexport const DEFAULT_LINK_SETTINGS = [\n\t{\n\t\tid: 'opensInNewTab',\n\t\ttitle: __( 'Open in new tab' ),\n\t},\n];\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { VisuallyHidden } from '@wordpress/components';\n\n/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * Internal dependencies\n */\nimport LinkControlSearchCreate from './search-create-button';\nimport LinkControlSearchItem from './search-item';\nimport { CREATE_TYPE, LINK_ENTRY_TYPES } from './constants';\n\nexport default function LinkControlSearchResults( {\n\tinstanceId,\n\twithCreateSuggestion,\n\tcurrentInputValue,\n\thandleSuggestionClick,\n\tsuggestionsListProps,\n\tbuildSuggestionItemProps,\n\tsuggestions,\n\tselectedSuggestion,\n\tisLoading,\n\tisInitialSuggestions,\n\tcreateSuggestionButtonText,\n\tsuggestionsQuery,\n} ) {\n\tconst resultsListClasses = classnames(\n\t\t'block-editor-link-control__search-results',\n\t\t{\n\t\t\t'is-loading': isLoading,\n\t\t}\n\t);\n\n\tconst isSingleDirectEntryResult =\n\t\tsuggestions.length === 1 &&\n\t\tLINK_ENTRY_TYPES.includes( suggestions[ 0 ].type );\n\tconst shouldShowCreateSuggestion =\n\t\twithCreateSuggestion &&\n\t\t! isSingleDirectEntryResult &&\n\t\t! isInitialSuggestions;\n\t// If the query has a specified type, then we can skip showing them in the result. See #24839.\n\tconst shouldShowSuggestionsTypes = ! suggestionsQuery?.type;\n\n\t// According to guidelines aria-label should be added if the label\n\t// itself is not visible.\n\t// See: https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/listbox_role\n\tconst searchResultsLabelId = `block-editor-link-control-search-results-label-${ instanceId }`;\n\tconst labelText = isInitialSuggestions\n\t\t? __( 'Suggestions' )\n\t\t: sprintf(\n\t\t\t\t/* translators: %s: search term. */\n\t\t\t\t__( 'Search results for \"%s\"' ),\n\t\t\t\tcurrentInputValue\n\t\t  );\n\tconst searchResultsLabel = (\n\t\t<VisuallyHidden id={ searchResultsLabelId }>\n\t\t\t{ labelText }\n\t\t</VisuallyHidden>\n\t);\n\n\treturn (\n\t\t<div className=\"block-editor-link-control__search-results-wrapper\">\n\t\t\t{ searchResultsLabel }\n\t\t\t<div\n\t\t\t\t{ ...suggestionsListProps }\n\t\t\t\tclassName={ resultsListClasses }\n\t\t\t\taria-labelledby={ searchResultsLabelId }\n\t\t\t>\n\t\t\t\t{ suggestions.map( ( suggestion, index ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tshouldShowCreateSuggestion &&\n\t\t\t\t\t\tCREATE_TYPE === suggestion.type\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<LinkControlSearchCreate\n\t\t\t\t\t\t\t\tsearchTerm={ currentInputValue }\n\t\t\t\t\t\t\t\tbuttonText={ createSuggestionButtonText }\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\thandleSuggestionClick( suggestion )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Intentionally only using `type` here as\n\t\t\t\t\t\t\t\t// the constant is enough to uniquely\n\t\t\t\t\t\t\t\t// identify the single \"CREATE\" suggestion.\n\t\t\t\t\t\t\t\tkey={ suggestion.type }\n\t\t\t\t\t\t\t\titemProps={ buildSuggestionItemProps(\n\t\t\t\t\t\t\t\t\tsuggestion,\n\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tisSelected={ index === selectedSuggestion }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If we're not handling \"Create\" suggestions above then\n\t\t\t\t\t// we don't want them in the main results so exit early.\n\t\t\t\t\tif ( CREATE_TYPE === suggestion.type ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<LinkControlSearchItem\n\t\t\t\t\t\t\tkey={ `${ suggestion.id }-${ suggestion.type }` }\n\t\t\t\t\t\t\titemProps={ buildSuggestionItemProps(\n\t\t\t\t\t\t\t\tsuggestion,\n\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tsuggestion={ suggestion }\n\t\t\t\t\t\t\tindex={ index }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\thandleSuggestionClick( suggestion );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tisSelected={ index === selectedSuggestion }\n\t\t\t\t\t\t\tisURL={ LINK_ENTRY_TYPES.includes(\n\t\t\t\t\t\t\t\tsuggestion.type\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tsearchTerm={ currentInputValue }\n\t\t\t\t\t\t\tshouldShowType={ shouldShowSuggestionsTypes }\n\t\t\t\t\t\t\tisFrontPage={ suggestion?.isFrontPage }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { getProtocol, isValidProtocol, isValidFragment } from '@wordpress/url';\n\n/**\n * Determines whether a given value could be a URL. Note this does not\n * guarantee the value is a URL only that it looks like it might be one. For\n * example, just because a string has `www.` in it doesn't make it a URL,\n * but it does make it highly likely that it will be so in the context of\n * creating a link it makes sense to treat it like one.\n *\n * @param {string} val the candidate for being URL-like (or not).\n *\n * @return {boolean} whether or not the value is potentially a URL.\n */\nexport default function isURLLike( val ) {\n\tconst hasSpaces = val.includes( ' ' );\n\n\tif ( hasSpaces ) {\n\t\treturn false;\n\t}\n\n\tconst protocol = getProtocol( val );\n\tconst protocolIsValid = isValidProtocol( protocol );\n\n\tconst mayBeTLD = hasPossibleTLD( val );\n\n\tconst isWWW = val?.startsWith( 'www.' );\n\n\tconst isInternal = val?.startsWith( '#' ) && isValidFragment( val );\n\n\treturn protocolIsValid || isWWW || isInternal || mayBeTLD;\n}\n\n/**\n * Checks if a given URL has a valid Top-Level Domain (TLD).\n *\n * @param {string} url       - The URL to check.\n * @param {number} maxLength - The maximum length of the TLD.\n * @return {boolean} Returns true if the URL has a valid TLD, false otherwise.\n */\nfunction hasPossibleTLD( url, maxLength = 6 ) {\n\t// Clean the URL by removing anything after the first occurrence of \"?\" or \"#\".\n\tconst cleanedURL = url.split( /[?#]/ )[ 0 ];\n\n\t// Regular expression explanation:\n\t// - (?<=\\S)                  : Positive lookbehind assertion to ensure there is at least one non-whitespace character before the TLD\n\t// - \\.                       : Matches a literal dot (.)\n\t// - [a-zA-Z_]{2,maxLength}   : Matches 2 to maxLength letters or underscores, representing the TLD\n\t// - (?:\\/|$)                 : Non-capturing group that matches either a forward slash (/) or the end of the string\n\tconst regex = new RegExp(\n\t\t`(?<=\\\\S)\\\\.(?:[a-zA-Z_]{2,${ maxLength }})(?:\\\\/|$)`\n\t);\n\n\treturn regex.test( cleanedURL );\n}\n","/**\n * WordPress dependencies\n */\nimport { getProtocol, prependHTTP } from '@wordpress/url';\nimport { useCallback } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport isURLLike from './is-url-like';\nimport {\n\tCREATE_TYPE,\n\tTEL_TYPE,\n\tMAILTO_TYPE,\n\tINTERNAL_TYPE,\n\tURL_TYPE,\n} from './constants';\nimport { store as blockEditorStore } from '../../store';\n\nexport const handleNoop = () => Promise.resolve( [] );\n\nexport const handleDirectEntry = ( val ) => {\n\tlet type = URL_TYPE;\n\n\tconst protocol = getProtocol( val ) || '';\n\n\tif ( protocol.includes( 'mailto' ) ) {\n\t\ttype = MAILTO_TYPE;\n\t}\n\n\tif ( protocol.includes( 'tel' ) ) {\n\t\ttype = TEL_TYPE;\n\t}\n\n\tif ( val?.startsWith( '#' ) ) {\n\t\ttype = INTERNAL_TYPE;\n\t}\n\n\treturn Promise.resolve( [\n\t\t{\n\t\t\tid: val,\n\t\t\ttitle: val,\n\t\t\turl: type === 'URL' ? prependHTTP( val ) : val,\n\t\t\ttype,\n\t\t},\n\t] );\n};\n\nconst handleEntitySearch = async (\n\tval,\n\tsuggestionsQuery,\n\tfetchSearchSuggestions,\n\twithCreateSuggestion,\n\tpageOnFront\n) => {\n\tconst { isInitialSuggestions } = suggestionsQuery;\n\n\tconst results = await fetchSearchSuggestions( val, suggestionsQuery );\n\n\t// Identify front page and update type to match.\n\tresults.map( ( result ) => {\n\t\tif ( Number( result.id ) === pageOnFront ) {\n\t\t\tresult.isFrontPage = true;\n\t\t\treturn result;\n\t\t}\n\n\t\treturn result;\n\t} );\n\n\t// If displaying initial suggestions just return plain results.\n\tif ( isInitialSuggestions ) {\n\t\treturn results;\n\t}\n\n\t// Here we append a faux suggestion to represent a \"CREATE\" option. This\n\t// is detected in the rendering of the search results and handled as a\n\t// special case. This is currently necessary because the suggestions\n\t// dropdown will only appear if there are valid suggestions and\n\t// therefore unless the create option is a suggestion it will not\n\t// display in scenarios where there are no results returned from the\n\t// API. In addition promoting CREATE to a first class suggestion affords\n\t// the a11y benefits afforded by `URLInput` to all suggestions (eg:\n\t// keyboard handling, ARIA roles...etc).\n\t//\n\t// Note also that the value of the `title` and `url` properties must correspond\n\t// to the text value of the `<input>`. This is because `title` is used\n\t// when creating the suggestion. Similarly `url` is used when using keyboard to select\n\t// the suggestion (the <form> `onSubmit` handler falls-back to `url`).\n\treturn isURLLike( val ) || ! withCreateSuggestion\n\t\t? results\n\t\t: results.concat( {\n\t\t\t\t// the `id` prop is intentionally ommitted here because it\n\t\t\t\t// is never exposed as part of the component's public API.\n\t\t\t\t// see: https://github.com/WordPress/gutenberg/pull/19775#discussion_r378931316.\n\t\t\t\ttitle: val, // Must match the existing `<input>`s text value.\n\t\t\t\turl: val, // Must match the existing `<input>`s text value.\n\t\t\t\ttype: CREATE_TYPE,\n\t\t  } );\n};\n\nexport default function useSearchHandler(\n\tsuggestionsQuery,\n\tallowDirectEntry,\n\twithCreateSuggestion,\n\twithURLSuggestion\n) {\n\tconst { fetchSearchSuggestions, pageOnFront } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\n\t\treturn {\n\t\t\tpageOnFront: getSettings().pageOnFront,\n\t\t\tfetchSearchSuggestions:\n\t\t\t\tgetSettings().__experimentalFetchLinkSuggestions,\n\t\t};\n\t}, [] );\n\n\tconst directEntryHandler = allowDirectEntry\n\t\t? handleDirectEntry\n\t\t: handleNoop;\n\n\treturn useCallback(\n\t\t( val, { isInitialSuggestions } ) => {\n\t\t\treturn isURLLike( val )\n\t\t\t\t? directEntryHandler( val, { isInitialSuggestions } )\n\t\t\t\t: handleEntitySearch(\n\t\t\t\t\t\tval,\n\t\t\t\t\t\t{ ...suggestionsQuery, isInitialSuggestions },\n\t\t\t\t\t\tfetchSearchSuggestions,\n\t\t\t\t\t\twithCreateSuggestion,\n\t\t\t\t\t\twithURLSuggestion,\n\t\t\t\t\t\tpageOnFront\n\t\t\t\t  );\n\t\t},\n\t\t[\n\t\t\tdirectEntryHandler,\n\t\t\tfetchSearchSuggestions,\n\t\t\tpageOnFront,\n\t\t\tsuggestionsQuery,\n\t\t\twithCreateSuggestion,\n\t\t\twithURLSuggestion,\n\t\t]\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { forwardRef, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { URLInput } from '../';\nimport LinkControlSearchResults from './search-results';\nimport { CREATE_TYPE } from './constants';\nimport useSearchHandler from './use-search-handler';\n\n// Must be a function as otherwise URLInput will default\n// to the fetchLinkSuggestions passed in block editor settings\n// which will cause an unintended http request.\nconst noopSearchHandler = () => Promise.resolve( [] );\n\nconst noop = () => {};\n\nconst LinkControlSearchInput = forwardRef(\n\t(\n\t\t{\n\t\t\tvalue,\n\t\t\tchildren,\n\t\t\tcurrentLink = {},\n\t\t\tclassName = null,\n\t\t\tplaceholder = null,\n\t\t\twithCreateSuggestion = false,\n\t\t\tonCreateSuggestion = noop,\n\t\t\tonChange = noop,\n\t\t\tonSelect = noop,\n\t\t\tshowSuggestions = true,\n\t\t\trenderSuggestions = ( props ) => (\n\t\t\t\t<LinkControlSearchResults { ...props } />\n\t\t\t),\n\t\t\tfetchSuggestions = null,\n\t\t\tallowDirectEntry = true,\n\t\t\tshowInitialSuggestions = false,\n\t\t\tsuggestionsQuery = {},\n\t\t\twithURLSuggestion = true,\n\t\t\tcreateSuggestionButtonText,\n\t\t\tuseLabel = false,\n\t\t},\n\t\tref\n\t) => {\n\t\tconst genericSearchHandler = useSearchHandler(\n\t\t\tsuggestionsQuery,\n\t\t\tallowDirectEntry,\n\t\t\twithCreateSuggestion,\n\t\t\twithURLSuggestion\n\t\t);\n\n\t\tconst searchHandler = showSuggestions\n\t\t\t? fetchSuggestions || genericSearchHandler\n\t\t\t: noopSearchHandler;\n\n\t\tconst instanceId = useInstanceId( LinkControlSearchInput );\n\t\tconst [ focusedSuggestion, setFocusedSuggestion ] = useState();\n\n\t\t/**\n\t\t * Handles the user moving between different suggestions. Does not handle\n\t\t * choosing an individual item.\n\t\t *\n\t\t * @param {string} selection  the url of the selected suggestion.\n\t\t * @param {Object} suggestion the suggestion object.\n\t\t */\n\t\tconst onInputChange = ( selection, suggestion ) => {\n\t\t\tonChange( selection );\n\t\t\tsetFocusedSuggestion( suggestion );\n\t\t};\n\n\t\tconst handleRenderSuggestions = ( props ) =>\n\t\t\trenderSuggestions( {\n\t\t\t\t...props,\n\t\t\t\tinstanceId,\n\t\t\t\twithCreateSuggestion,\n\t\t\t\tcreateSuggestionButtonText,\n\t\t\t\tsuggestionsQuery,\n\t\t\t\thandleSuggestionClick: ( suggestion ) => {\n\t\t\t\t\tif ( props.handleSuggestionClick ) {\n\t\t\t\t\t\tprops.handleSuggestionClick( suggestion );\n\t\t\t\t\t}\n\t\t\t\t\tonSuggestionSelected( suggestion );\n\t\t\t\t},\n\t\t\t} );\n\n\t\tconst onSuggestionSelected = async ( selectedSuggestion ) => {\n\t\t\tlet suggestion = selectedSuggestion;\n\t\t\tif ( CREATE_TYPE === selectedSuggestion.type ) {\n\t\t\t\t// Create a new page and call onSelect with the output from the onCreateSuggestion callback.\n\t\t\t\ttry {\n\t\t\t\t\tsuggestion = await onCreateSuggestion(\n\t\t\t\t\t\tselectedSuggestion.title\n\t\t\t\t\t);\n\t\t\t\t\tif ( suggestion?.url ) {\n\t\t\t\t\t\tonSelect( suggestion );\n\t\t\t\t\t}\n\t\t\t\t} catch ( e ) {}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tallowDirectEntry ||\n\t\t\t\t( suggestion && Object.keys( suggestion ).length >= 1 )\n\t\t\t) {\n\t\t\t\tconst { id, url, ...restLinkProps } = currentLink ?? {};\n\t\t\t\tonSelect(\n\t\t\t\t\t// Some direct entries don't have types or IDs, and we still need to clear the previous ones.\n\t\t\t\t\t{ ...restLinkProps, ...suggestion },\n\t\t\t\t\tsuggestion\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\tconst inputClasses = classnames( className, {\n\t\t\t'has-no-label': ! useLabel,\n\t\t} );\n\n\t\treturn (\n\t\t\t<div className=\"block-editor-link-control__search-input-container\">\n\t\t\t\t<URLInput\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ useLabel ? 'URL' : undefined }\n\t\t\t\t\tclassName={ inputClasses }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ onInputChange }\n\t\t\t\t\tplaceholder={ placeholder ?? __( 'Search or type url' ) }\n\t\t\t\t\t__experimentalRenderSuggestions={\n\t\t\t\t\t\tshowSuggestions ? handleRenderSuggestions : null\n\t\t\t\t\t}\n\t\t\t\t\t__experimentalFetchLinkSuggestions={ searchHandler }\n\t\t\t\t\t__experimentalHandleURLSuggestions={ true }\n\t\t\t\t\t__experimentalShowInitialSuggestions={\n\t\t\t\t\t\tshowInitialSuggestions\n\t\t\t\t\t}\n\t\t\t\t\tonSubmit={ ( suggestion, event ) => {\n\t\t\t\t\t\tconst hasSuggestion = suggestion || focusedSuggestion;\n\n\t\t\t\t\t\t// If there is no suggestion and the value (ie: any manually entered URL) is empty\n\t\t\t\t\t\t// then don't allow submission otherwise we get empty links.\n\t\t\t\t\t\tif ( ! hasSuggestion && ! value?.trim()?.length ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tonSuggestionSelected(\n\t\t\t\t\t\t\t\thasSuggestion || { url: value }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tref={ ref }\n\t\t\t\t/>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nexport default LinkControlSearchInput;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst info = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z\" />\n\t</SVG>\n);\n\nexport default info;\n","/**\n * Internal dependencies\n */\n\nimport { default as pencil } from './pencil';\nexport default pencil;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst pencil = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z\" />\n\t</SVG>\n);\n\nexport default pencil;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst { Slot: ViewerSlot, Fill: ViewerFill } = createSlotFill(\n\t'BlockEditorLinkControlViewer'\n);\n\nexport { ViewerSlot, ViewerFill };\nexport default ViewerSlot;\n","/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useEffect, useReducer } from '@wordpress/element';\n\nfunction reducer( state, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RESOLVED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: false,\n\t\t\t\trichData: action.richData,\n\t\t\t};\n\t\tcase 'ERROR':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: false,\n\t\t\t\trichData: null,\n\t\t\t};\n\t\tcase 'LOADING':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: true,\n\t\t\t};\n\t\tdefault:\n\t\t\tthrow new Error( `Unexpected action type ${ action.type }` );\n\t}\n}\n\nfunction useRemoteUrlData( url ) {\n\tconst [ state, dispatch ] = useReducer( reducer, {\n\t\trichData: null,\n\t\tisFetching: false,\n\t} );\n\n\tconst { fetchRichUrlData } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn {\n\t\t\tfetchRichUrlData: getSettings().__experimentalFetchRichUrlData,\n\t\t};\n\t}, [] );\n\n\tuseEffect( () => {\n\t\t// Only make the request if we have an actual URL\n\t\t// and the fetching util is available. In some editors\n\t\t// there may not be such a util.\n\t\tif (\n\t\t\turl?.length &&\n\t\t\tfetchRichUrlData &&\n\t\t\ttypeof AbortController !== 'undefined'\n\t\t) {\n\t\t\tdispatch( {\n\t\t\t\ttype: 'LOADING',\n\t\t\t} );\n\n\t\t\tconst controller = new window.AbortController();\n\n\t\t\tconst signal = controller.signal;\n\n\t\t\tfetchRichUrlData( url, {\n\t\t\t\tsignal,\n\t\t\t} )\n\t\t\t\t.then( ( urlData ) => {\n\t\t\t\t\tdispatch( {\n\t\t\t\t\t\ttype: 'RESOLVED',\n\t\t\t\t\t\trichData: urlData,\n\t\t\t\t\t} );\n\t\t\t\t} )\n\t\t\t\t.catch( () => {\n\t\t\t\t\t// Avoid setting state on unmounted component\n\t\t\t\t\tif ( ! signal.aborted ) {\n\t\t\t\t\t\tdispatch( {\n\t\t\t\t\t\t\ttype: 'ERROR',\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t// Cleanup: when the URL changes the abort the current request.\n\t\t\treturn () => {\n\t\t\t\tcontroller.abort();\n\t\t\t};\n\t\t}\n\t}, [ url ] );\n\n\treturn state;\n}\n\nexport default useRemoteUrlData;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tButton,\n\tExternalLink,\n\t__experimentalText as Text,\n} from '@wordpress/components';\nimport { filterURLForDisplay, safeDecodeURI } from '@wordpress/url';\nimport { Icon, globe, info, linkOff, edit } from '@wordpress/icons';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport { ViewerSlot } from './viewer-slot';\n\nimport useRichUrlData from './use-rich-url-data';\n\nexport default function LinkPreview( {\n\tvalue,\n\tonEditClick,\n\thasRichPreviews = false,\n\thasUnlinkControl = false,\n\tonRemove,\n} ) {\n\t// Avoid fetching if rich previews are not desired.\n\tconst showRichPreviews = hasRichPreviews ? value?.url : null;\n\n\tconst { richData, isFetching } = useRichUrlData( showRichPreviews );\n\n\t// Rich data may be an empty object so test for that.\n\tconst hasRichData = richData && Object.keys( richData ).length;\n\n\tconst displayURL =\n\t\t( value && filterURLForDisplay( safeDecodeURI( value.url ), 16 ) ) ||\n\t\t'';\n\n\tconst displayTitle = richData?.title || value?.title || displayURL;\n\n\t// url can be undefined if the href attribute is unset\n\tconst isEmptyURL = ! value?.url?.length;\n\n\tlet icon;\n\n\tif ( richData?.icon ) {\n\t\ticon = <img src={ richData?.icon } alt=\"\" />;\n\t} else if ( isEmptyURL ) {\n\t\ticon = <Icon icon={ info } size={ 32 } />;\n\t} else {\n\t\ticon = <Icon icon={ globe } />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\taria-label={ __( 'Currently selected' ) }\n\t\t\tclassName={ classnames( 'block-editor-link-control__search-item', {\n\t\t\t\t'is-current': true,\n\t\t\t\t'is-rich': hasRichData,\n\t\t\t\t'is-fetching': !! isFetching,\n\t\t\t\t'is-preview': true,\n\t\t\t\t'is-error': isEmptyURL,\n\t\t\t} ) }\n\t\t>\n\t\t\t<div className=\"block-editor-link-control__search-item-top\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'block-editor-link-control__search-item-icon',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-image': richData?.icon,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ icon }\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"block-editor-link-control__search-item-details\">\n\t\t\t\t\t\t{ ! isEmptyURL ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-title\"\n\t\t\t\t\t\t\t\t\thref={ value.url }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ stripHTML( displayTitle ) }\n\t\t\t\t\t\t\t\t</ExternalLink>\n\n\t\t\t\t\t\t\t\t{ value?.url && (\n\t\t\t\t\t\t\t\t\t<span className=\"block-editor-link-control__search-item-info\">\n\t\t\t\t\t\t\t\t\t\t{ displayURL }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className=\"block-editor-link-control__search-item-error-notice\">\n\t\t\t\t\t\t\t\t{ __( 'Link is empty' ) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\n\t\t\t\t<Button\n\t\t\t\t\ticon={ edit }\n\t\t\t\t\tlabel={ __( 'Edit' ) }\n\t\t\t\t\tclassName=\"block-editor-link-control__search-item-action\"\n\t\t\t\t\tonClick={ onEditClick }\n\t\t\t\t\ticonSize={ 24 }\n\t\t\t\t/>\n\t\t\t\t{ hasUnlinkControl && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ linkOff }\n\t\t\t\t\t\tlabel={ __( 'Unlink' ) }\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-action block-editor-link-control__unlink\"\n\t\t\t\t\t\tonClick={ onRemove }\n\t\t\t\t\t\ticonSize={ 24 }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<ViewerSlot fillProps={ value } />\n\t\t\t</div>\n\n\t\t\t{ !! (\n\t\t\t\t( hasRichData &&\n\t\t\t\t\t( richData?.image || richData?.description ) ) ||\n\t\t\t\tisFetching\n\t\t\t) && (\n\t\t\t\t<div className=\"block-editor-link-control__search-item-bottom\">\n\t\t\t\t\t{ ( richData?.image || isFetching ) && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\taria-hidden={ ! richData?.image }\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'block-editor-link-control__search-item-image',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'is-placeholder': ! richData?.image,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ richData?.image && (\n\t\t\t\t\t\t\t\t<img src={ richData?.image } alt=\"\" />\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ ( richData?.description || isFetching ) && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\taria-hidden={ ! richData?.description }\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'block-editor-link-control__search-item-description',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'is-placeholder': ! richData?.description,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ richData?.description && (\n\t\t\t\t\t\t\t\t<Text truncate numberOfLines=\"2\">\n\t\t\t\t\t\t\t\t\t{ richData.description }\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { CheckboxControl, VisuallyHidden } from '@wordpress/components';\n\nconst noop = () => {};\n\nconst LinkControlSettings = ( { value, onChange = noop, settings } ) => {\n\tif ( ! settings || ! settings.length ) {\n\t\treturn null;\n\t}\n\n\tconst handleSettingChange = ( setting ) => ( newValue ) => {\n\t\tonChange( {\n\t\t\t...value,\n\t\t\t[ setting.id ]: newValue,\n\t\t} );\n\t};\n\n\tconst theSettings = settings.map( ( setting ) => (\n\t\t<CheckboxControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tclassName=\"block-editor-link-control__setting\"\n\t\t\tkey={ setting.id }\n\t\t\tlabel={ setting.title }\n\t\t\tonChange={ handleSettingChange( setting ) }\n\t\t\tchecked={ value ? !! value[ setting.id ] : false }\n\t\t/>\n\t) );\n\n\treturn (\n\t\t<fieldset className=\"block-editor-link-control__settings\">\n\t\t\t<VisuallyHidden as=\"legend\">\n\t\t\t\t{ __( 'Currently selected link settings' ) }\n\t\t\t</VisuallyHidden>\n\t\t\t{ theSettings }\n\t\t</fieldset>\n\t);\n};\n\nexport default LinkControlSettings;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Button, Spinner, Notice, TextControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useRef, useState, useEffect } from '@wordpress/element';\nimport { focus } from '@wordpress/dom';\nimport { ENTER } from '@wordpress/keycodes';\nimport { isShallowEqualObjects } from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport LinkControlSettingsDrawer from './settings-drawer';\nimport LinkControlSearchInput from './search-input';\nimport LinkPreview from './link-preview';\nimport LinkSettings from './settings';\nimport useCreatePage from './use-create-page';\nimport useInternalValue from './use-internal-value';\nimport { ViewerFill } from './viewer-slot';\nimport { DEFAULT_LINK_SETTINGS } from './constants';\n\n/**\n * Default properties associated with a link control value.\n *\n * @typedef WPLinkControlDefaultValue\n *\n * @property {string}   url           Link URL.\n * @property {string=}  title         Link title.\n * @property {boolean=} opensInNewTab Whether link should open in a new browser\n *                                    tab. This value is only assigned if not\n *                                    providing a custom `settings` prop.\n */\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Custom settings values associated with a link.\n *\n * @typedef {{[setting:string]:any}} WPLinkControlSettingsValue\n */\n/* eslint-enable */\n\n/**\n * Custom settings values associated with a link.\n *\n * @typedef WPLinkControlSetting\n *\n * @property {string} id    Identifier to use as property for setting value.\n * @property {string} title Human-readable label to show in user interface.\n */\n\n/**\n * Properties associated with a link control value, composed as a union of the\n * default properties and any custom settings values.\n *\n * @typedef {WPLinkControlDefaultValue&WPLinkControlSettingsValue} WPLinkControlValue\n */\n\n/** @typedef {(nextValue:WPLinkControlValue)=>void} WPLinkControlOnChangeProp */\n\n/**\n * Properties associated with a search suggestion used within the LinkControl.\n *\n * @typedef WPLinkControlSuggestion\n *\n * @property {string} id    Identifier to use to uniquely identify the suggestion.\n * @property {string} type  Identifies the type of the suggestion (eg: `post`,\n *                          `page`, `url`...etc)\n * @property {string} title Human-readable label to show in user interface.\n * @property {string} url   A URL for the suggestion.\n */\n\n/** @typedef {(title:string)=>WPLinkControlSuggestion} WPLinkControlCreateSuggestionProp */\n\n/**\n * @typedef WPLinkControlProps\n *\n * @property {(WPLinkControlSetting[])=}  settings                   An array of settings objects. Each object will used to\n *                                                                   render a `ToggleControl` for that setting.\n * @property {boolean=}                   forceIsEditingLink         If passed as either `true` or `false`, controls the\n *                                                                   internal editing state of the component to respective\n *                                                                   show or not show the URL input field.\n * @property {WPLinkControlValue=}        value                      Current link value.\n * @property {WPLinkControlOnChangeProp=} onChange                   Value change handler, called with the updated value if\n *                                                                   the user selects a new link or updates settings.\n * @property {boolean=}                   noDirectEntry              Whether to allow turning a URL-like search query directly into a link.\n * @property {boolean=}                   showSuggestions            Whether to present suggestions when typing the URL.\n * @property {boolean=}                   showInitialSuggestions     Whether to present initial suggestions immediately.\n * @property {boolean=}                   withCreateSuggestion       Whether to allow creation of link value from suggestion.\n * @property {Object=}                    suggestionsQuery           Query parameters to pass along to wp.blockEditor.__experimentalFetchLinkSuggestions.\n * @property {boolean=}                   noURLSuggestion            Whether to add a fallback suggestion which treats the search query as a URL.\n * @property {boolean=}                   hasTextControl             Whether to add a text field to the UI to update the value.title.\n * @property {string|Function|undefined}  createSuggestionButtonText The text to use in the button that calls createSuggestion.\n * @property {Function}                   renderControlBottom        Optional controls to be rendered at the bottom of the component.\n */\n\nconst noop = () => {};\n\n/**\n * Renders a link control. A link control is a controlled input which maintains\n * a value associated with a link (HTML anchor element) and relevant settings\n * for how that link is expected to behave.\n *\n * @param {WPLinkControlProps} props Component props.\n */\nfunction LinkControl( {\n\tsearchInputPlaceholder,\n\tvalue,\n\tsettings = DEFAULT_LINK_SETTINGS,\n\tonChange = noop,\n\tonRemove,\n\tonCancel,\n\tnoDirectEntry = false,\n\tshowSuggestions = true,\n\tshowInitialSuggestions,\n\tforceIsEditingLink,\n\tcreateSuggestion,\n\twithCreateSuggestion,\n\tinputValue: propInputValue = '',\n\tsuggestionsQuery = {},\n\tnoURLSuggestion = false,\n\tcreateSuggestionButtonText,\n\thasRichPreviews = false,\n\thasTextControl = false,\n\trenderControlBottom = null,\n} ) {\n\tif ( withCreateSuggestion === undefined && createSuggestion ) {\n\t\twithCreateSuggestion = true;\n\t}\n\n\tconst isMounting = useRef( true );\n\tconst wrapperNode = useRef();\n\tconst textInputRef = useRef();\n\tconst isEndingEditWithFocus = useRef( false );\n\n\tconst settingsKeys = settings.map( ( { id } ) => id );\n\n\tconst [ settingsOpen, setSettingsOpen ] = useState( false );\n\n\tconst [\n\t\tinternalControlValue,\n\t\tsetInternalControlValue,\n\t\tsetInternalURLInputValue,\n\t\tsetInternalTextInputValue,\n\t\tcreateSetInternalSettingValueHandler,\n\t] = useInternalValue( value );\n\n\tconst valueHasChanges =\n\t\tvalue && ! isShallowEqualObjects( internalControlValue, value );\n\n\tconst [ isEditingLink, setIsEditingLink ] = useState(\n\t\tforceIsEditingLink !== undefined\n\t\t\t? forceIsEditingLink\n\t\t\t: ! value || ! value.url\n\t);\n\n\tconst { createPage, isCreatingPage, errorMessage } =\n\t\tuseCreatePage( createSuggestion );\n\n\tuseEffect( () => {\n\t\tif (\n\t\t\tforceIsEditingLink !== undefined &&\n\t\t\tforceIsEditingLink !== isEditingLink\n\t\t) {\n\t\t\tsetIsEditingLink( forceIsEditingLink );\n\t\t}\n\t\t// Todo: bug if the missing dep is introduced. Will need a fix.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ forceIsEditingLink ] );\n\n\tuseEffect( () => {\n\t\t// We don't auto focus into the Link UI on mount\n\t\t// because otherwise using the keyboard to select text\n\t\t// *within* the link format is not possible.\n\t\tif ( isMounting.current ) {\n\t\t\tisMounting.current = false;\n\t\t\treturn;\n\t\t}\n\t\t// Unless we are mounting, we always want to focus either:\n\t\t// - the URL input\n\t\t// - the first focusable element in the Link UI.\n\t\t// But in editing mode if there is a text input present then\n\t\t// the URL input is at index 1. If not then it is at index 0.\n\t\tconst whichFocusTargetIndex = textInputRef?.current ? 1 : 0;\n\n\t\t// Scenario - when:\n\t\t// - switching between editable and non editable LinkControl\n\t\t// - clicking on a link\n\t\t// ...then move focus to the *first* element to avoid focus loss\n\t\t// and to ensure focus is *within* the Link UI.\n\t\tconst nextFocusTarget =\n\t\t\tfocus.focusable.find( wrapperNode.current )[\n\t\t\t\twhichFocusTargetIndex\n\t\t\t] || wrapperNode.current;\n\n\t\tnextFocusTarget.focus();\n\n\t\tisEndingEditWithFocus.current = false;\n\t}, [ isEditingLink, isCreatingPage ] );\n\n\tconst hasLinkValue = value?.url?.trim()?.length > 0;\n\n\t/**\n\t * Cancels editing state and marks that focus may need to be restored after\n\t * the next render, if focus was within the wrapper when editing finished.\n\t */\n\tconst stopEditing = () => {\n\t\tisEndingEditWithFocus.current = !! wrapperNode.current?.contains(\n\t\t\twrapperNode.current.ownerDocument.activeElement\n\t\t);\n\n\t\tsetSettingsOpen( false );\n\t\tsetIsEditingLink( false );\n\t};\n\n\tconst handleSelectSuggestion = ( updatedValue ) => {\n\t\t// Suggestions may contains \"settings\" values (e.g. `opensInNewTab`)\n\t\t// which should not overide any existing settings values set by the\n\t\t// user. This filters out any settings values from the suggestion.\n\t\tconst nonSettingsChanges = Object.keys( updatedValue ).reduce(\n\t\t\t( acc, key ) => {\n\t\t\t\tif ( ! settingsKeys.includes( key ) ) {\n\t\t\t\t\tacc[ key ] = updatedValue[ key ];\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t{}\n\t\t);\n\n\t\tonChange( {\n\t\t\t...internalControlValue,\n\t\t\t...nonSettingsChanges,\n\t\t\t// As title is not a setting, it must be manually applied\n\t\t\t// in such a way as to preserve the users changes over\n\t\t\t// any \"title\" value provided by the \"suggestion\".\n\t\t\ttitle: internalControlValue?.title || updatedValue?.title,\n\t\t} );\n\n\t\tstopEditing();\n\t};\n\n\tconst handleSubmit = () => {\n\t\tif ( valueHasChanges ) {\n\t\t\t// Submit the original value with new stored values applied\n\t\t\t// on top. URL is a special case as it may also be a prop.\n\t\t\tonChange( {\n\t\t\t\t...value,\n\t\t\t\t...internalControlValue,\n\t\t\t\turl: currentUrlInputValue,\n\t\t\t} );\n\t\t}\n\t\tstopEditing();\n\t};\n\n\tconst handleSubmitWithEnter = ( event ) => {\n\t\tconst { keyCode } = event;\n\n\t\tif (\n\t\t\tkeyCode === ENTER &&\n\t\t\t! currentInputIsEmpty // Disallow submitting empty values.\n\t\t) {\n\t\t\tevent.preventDefault();\n\t\t\thandleSubmit();\n\t\t}\n\t};\n\n\tconst resetInternalValues = () => {\n\t\tsetInternalControlValue( value );\n\t};\n\n\tconst handleCancel = ( event ) => {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t// Ensure that any unsubmitted input changes are reset.\n\t\tresetInternalValues();\n\n\t\tif ( hasLinkValue ) {\n\t\t\t// If there is a link then exist editing mode and show preview.\n\t\t\tstopEditing();\n\t\t} else {\n\t\t\t// If there is no link value, then remove the link entirely.\n\t\t\tonRemove?.();\n\t\t}\n\n\t\tonCancel?.();\n\t};\n\n\tconst currentUrlInputValue =\n\t\tpropInputValue || internalControlValue?.url || '';\n\n\tconst currentInputIsEmpty = ! currentUrlInputValue?.trim()?.length;\n\n\tconst shownUnlinkControl =\n\t\tonRemove && value && ! isEditingLink && ! isCreatingPage;\n\n\tconst showSettings = !! settings?.length;\n\n\t// Only show text control once a URL value has been committed\n\t// and it isn't just empty whitespace.\n\t// See https://github.com/WordPress/gutenberg/pull/33849/#issuecomment-932194927.\n\tconst showTextControl = hasLinkValue && hasTextControl;\n\n\tconst isEditing = ( isEditingLink || ! value ) && ! isCreatingPage;\n\tconst isDisabled = ! valueHasChanges || currentInputIsEmpty;\n\n\treturn (\n\t\t<div\n\t\t\ttabIndex={ -1 }\n\t\t\tref={ wrapperNode }\n\t\t\tclassName=\"block-editor-link-control\"\n\t\t>\n\t\t\t{ isCreatingPage && (\n\t\t\t\t<div className=\"block-editor-link-control__loading\">\n\t\t\t\t\t<Spinner /> { __( 'Creating' ) }…\n\t\t\t\t</div>\n\t\t\t) }\n\n\t\t\t{ isEditing && (\n\t\t\t\t<>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ classnames( {\n\t\t\t\t\t\t\t'block-editor-link-control__search-input-wrapper': true,\n\t\t\t\t\t\t\t'has-text-control': showTextControl,\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<LinkControlSearchInput\n\t\t\t\t\t\t\tcurrentLink={ value }\n\t\t\t\t\t\t\tclassName=\"block-editor-link-control__field block-editor-link-control__search-input\"\n\t\t\t\t\t\t\tplaceholder={ searchInputPlaceholder }\n\t\t\t\t\t\t\tvalue={ currentUrlInputValue }\n\t\t\t\t\t\t\twithCreateSuggestion={ withCreateSuggestion }\n\t\t\t\t\t\t\tonCreateSuggestion={ createPage }\n\t\t\t\t\t\t\tonChange={ setInternalURLInputValue }\n\t\t\t\t\t\t\tonSelect={ handleSelectSuggestion }\n\t\t\t\t\t\t\tshowInitialSuggestions={ showInitialSuggestions }\n\t\t\t\t\t\t\tallowDirectEntry={ ! noDirectEntry }\n\t\t\t\t\t\t\tshowSuggestions={ showSuggestions }\n\t\t\t\t\t\t\tsuggestionsQuery={ suggestionsQuery }\n\t\t\t\t\t\t\twithURLSuggestion={ ! noURLSuggestion }\n\t\t\t\t\t\t\tcreateSuggestionButtonText={\n\t\t\t\t\t\t\t\tcreateSuggestionButtonText\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuseLabel={ showTextControl }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ showTextControl && (\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tref={ textInputRef }\n\t\t\t\t\t\t\t\tclassName=\"block-editor-link-control__field block-editor-link-control__text-content\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Text' ) }\n\t\t\t\t\t\t\t\tvalue={ internalControlValue?.title }\n\t\t\t\t\t\t\t\tonChange={ setInternalTextInputValue }\n\t\t\t\t\t\t\t\tonKeyDown={ handleSubmitWithEnter }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t\t{ errorMessage && (\n\t\t\t\t\t\t<Notice\n\t\t\t\t\t\t\tclassName=\"block-editor-link-control__search-error\"\n\t\t\t\t\t\t\tstatus=\"error\"\n\t\t\t\t\t\t\tisDismissible={ false }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ errorMessage }\n\t\t\t\t\t\t</Notice>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\n\t\t\t{ value && ! isEditingLink && ! isCreatingPage && (\n\t\t\t\t<LinkPreview\n\t\t\t\t\tkey={ value?.url } // force remount when URL changes to avoid race conditions for rich previews\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonEditClick={ () => setIsEditingLink( true ) }\n\t\t\t\t\thasRichPreviews={ hasRichPreviews }\n\t\t\t\t\thasUnlinkControl={ shownUnlinkControl }\n\t\t\t\t\tonRemove={ onRemove }\n\t\t\t\t/>\n\t\t\t) }\n\n\t\t\t{ isEditing && (\n\t\t\t\t<div className=\"block-editor-link-control__tools\">\n\t\t\t\t\t{ showSettings && (\n\t\t\t\t\t\t<LinkControlSettingsDrawer\n\t\t\t\t\t\t\tsettingsOpen={ settingsOpen }\n\t\t\t\t\t\t\tsetSettingsOpen={ setSettingsOpen }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<LinkSettings\n\t\t\t\t\t\t\t\tvalue={ internalControlValue }\n\t\t\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t\t\t\tonChange={ createSetInternalSettingValueHandler(\n\t\t\t\t\t\t\t\t\tsettingsKeys\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</LinkControlSettingsDrawer>\n\t\t\t\t\t) }\n\n\t\t\t\t\t<div className=\"block-editor-link-control__search-actions\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\tonClick={ isDisabled ? noop : handleSubmit }\n\t\t\t\t\t\t\tclassName=\"block-editor-link-control__search-submit\"\n\t\t\t\t\t\t\taria-disabled={ isDisabled }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"tertiary\" onClick={ handleCancel }>\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) }\n\n\t\t\t{ renderControlBottom && renderControlBottom() }\n\t\t</div>\n\t);\n}\n\nLinkControl.ViewerFill = ViewerFill;\n\nexport default LinkControl;\n","/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\n\nexport default function useInternalValue( value ) {\n\tconst [ internalValue, setInternalValue ] = useState( value || {} );\n\n\t// If the value prop changes, update the internal state.\n\tuseEffect( () => {\n\t\tsetInternalValue( ( prevValue ) => {\n\t\t\tif ( value && value !== prevValue ) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\treturn prevValue;\n\t\t} );\n\t}, [ value ] );\n\n\tconst setInternalURLInputValue = ( nextValue ) => {\n\t\tsetInternalValue( {\n\t\t\t...internalValue,\n\t\t\turl: nextValue,\n\t\t} );\n\t};\n\n\tconst setInternalTextInputValue = ( nextValue ) => {\n\t\tsetInternalValue( {\n\t\t\t...internalValue,\n\t\t\ttitle: nextValue,\n\t\t} );\n\t};\n\n\tconst createSetInternalSettingValueHandler =\n\t\t( settingsKeys ) => ( nextValue ) => {\n\t\t\t// Only apply settings values which are defined in the settings prop.\n\t\t\tconst settingsUpdates = Object.keys( nextValue ).reduce(\n\t\t\t\t( acc, key ) => {\n\t\t\t\t\tif ( settingsKeys.includes( key ) ) {\n\t\t\t\t\t\tacc[ key ] = nextValue[ key ];\n\t\t\t\t\t}\n\t\t\t\t\treturn acc;\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t);\n\n\t\t\tsetInternalValue( {\n\t\t\t\t...internalValue,\n\t\t\t\t...settingsUpdates,\n\t\t\t} );\n\t\t};\n\n\treturn [\n\t\tinternalValue,\n\t\tsetInternalValue,\n\t\tsetInternalURLInputValue,\n\t\tsetInternalTextInputValue,\n\t\tcreateSetInternalSettingValueHandler,\n\t];\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useEffect, useState, useRef } from '@wordpress/element';\n\nexport default function useCreatePage( handleCreatePage ) {\n\tconst cancelableCreateSuggestion = useRef();\n\tconst [ isCreatingPage, setIsCreatingPage ] = useState( false );\n\tconst [ errorMessage, setErrorMessage ] = useState( null );\n\n\tconst createPage = async function ( suggestionTitle ) {\n\t\tsetIsCreatingPage( true );\n\t\tsetErrorMessage( null );\n\n\t\ttry {\n\t\t\t// Make cancellable in order that we can avoid setting State\n\t\t\t// if the component unmounts during the call to `createSuggestion`\n\t\t\tcancelableCreateSuggestion.current = makeCancelable(\n\t\t\t\t// Using Promise.resolve to allow createSuggestion to return a\n\t\t\t\t// non-Promise based value.\n\t\t\t\tPromise.resolve( handleCreatePage( suggestionTitle ) )\n\t\t\t);\n\n\t\t\treturn await cancelableCreateSuggestion.current.promise;\n\t\t} catch ( error ) {\n\t\t\tif ( error && error.isCanceled ) {\n\t\t\t\treturn; // bail if canceled to avoid setting state\n\t\t\t}\n\n\t\t\tsetErrorMessage(\n\t\t\t\terror.message ||\n\t\t\t\t\t__(\n\t\t\t\t\t\t'An unknown error occurred during creation. Please try again.'\n\t\t\t\t\t)\n\t\t\t);\n\t\t\tthrow error;\n\t\t} finally {\n\t\t\tsetIsCreatingPage( false );\n\t\t}\n\t};\n\n\t/**\n\t * Handles cancelling any pending Promises that have been made cancelable.\n\t */\n\tuseEffect( () => {\n\t\treturn () => {\n\t\t\t// componentDidUnmount\n\t\t\tif ( cancelableCreateSuggestion.current ) {\n\t\t\t\tcancelableCreateSuggestion.current.cancel();\n\t\t\t}\n\t\t};\n\t}, [] );\n\n\treturn {\n\t\tcreatePage,\n\t\tisCreatingPage,\n\t\terrorMessage,\n\t};\n}\n\n/**\n * Creates a wrapper around a promise which allows it to be programmatically\n * cancelled.\n * See: https://reactjs.org/blog/2015/12/16/ismounted-antipattern.html\n *\n * @param {Promise} promise the Promise to make cancelable\n */\nconst makeCancelable = ( promise ) => {\n\tlet hasCanceled_ = false;\n\n\tconst wrappedPromise = new Promise( ( resolve, reject ) => {\n\t\tpromise.then(\n\t\t\t( val ) =>\n\t\t\t\thasCanceled_ ? reject( { isCanceled: true } ) : resolve( val ),\n\t\t\t( error ) =>\n\t\t\t\thasCanceled_ ? reject( { isCanceled: true } ) : reject( error )\n\t\t);\n\t} );\n\n\treturn {\n\t\tpromise: wrappedPromise,\n\t\tcancel() {\n\t\t\thasCanceled_ = true;\n\t\t},\n\t};\n};\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst media = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"m7 6.5 4 2.5-4 2.5z\" />\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"m5 3c-1.10457 0-2 .89543-2 2v14c0 1.1046.89543 2 2 2h14c1.1046 0 2-.8954 2-2v-14c0-1.10457-.8954-2-2-2zm14 1.5h-14c-.27614 0-.5.22386-.5.5v10.7072l3.62953-2.6465c.25108-.1831.58905-.1924.84981-.0234l2.92666 1.8969 3.5712-3.4719c.2911-.2831.7545-.2831 1.0456 0l2.9772 2.8945v-9.3568c0-.27614-.2239-.5-.5-.5zm-14.5 14.5v-1.4364l4.09643-2.987 2.99567 1.9417c.2936.1903.6798.1523.9307-.0917l3.4772-3.3806 3.4772 3.3806.0228-.0234v2.5968c0 .2761-.2239.5-.5.5h-14c-.27614 0-.5-.2239-.5-.5z\"\n\t\t/>\n\t</SVG>\n);\n\nexport default media;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst upload = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z\" />\n\t</SVG>\n);\n\nexport default upload;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst postFeaturedImage = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M19 3H5c-.6 0-1 .4-1 1v7c0 .5.4 1 1 1h14c.5 0 1-.4 1-1V4c0-.6-.4-1-1-1zM5.5 10.5v-.4l1.8-1.3 1.3.8c.3.2.7.2.9-.1L11 8.1l2.4 2.4H5.5zm13 0h-2.9l-4-4c-.3-.3-.8-.3-1.1 0L8.9 8l-1.2-.8c-.3-.2-.6-.2-.9 0l-1.3 1V4.5h13v6zM4 20h9v-1.5H4V20zm0-4h16v-1.5H4V16z\" />\n\t</SVG>\n);\n\nexport default postFeaturedImage;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { speak } from '@wordpress/a11y';\nimport {\n\tFormFileUpload,\n\tNavigableMenu,\n\tMenuItem,\n\tToolbarButton,\n\tDropdown,\n\twithFilters,\n\tTooltip,\n} from '@wordpress/components';\nimport { useSelect, withDispatch } from '@wordpress/data';\nimport { DOWN } from '@wordpress/keycodes';\nimport {\n\tpostFeaturedImage,\n\tupload,\n\tmedia as mediaIcon,\n} from '@wordpress/icons';\nimport { compose } from '@wordpress/compose';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport MediaUpload from '../media-upload';\nimport MediaUploadCheck from '../media-upload/check';\nimport LinkControl from '../link-control';\nimport { store as blockEditorStore } from '../../store';\n\nconst noop = () => {};\nlet uniqueId = 0;\n\nconst MediaReplaceFlow = ( {\n\tmediaURL,\n\tmediaId,\n\tmediaIds,\n\tallowedTypes,\n\taccept,\n\tonError,\n\tonSelect,\n\tonSelectURL,\n\tonToggleFeaturedImage,\n\tuseFeaturedImage,\n\tonFilesUpload = noop,\n\tname = __( 'Replace' ),\n\tcreateNotice,\n\tremoveNotice,\n\tchildren,\n\tmultiple = false,\n\taddToGallery,\n\thandleUpload = true,\n\tpopoverProps = {\n\t\tvariant: 'toolbar',\n\t},\n} ) => {\n\tconst mediaUpload = useSelect( ( select ) => {\n\t\treturn select( blockEditorStore ).getSettings().mediaUpload;\n\t}, [] );\n\tconst canUpload = !! mediaUpload;\n\tconst editMediaButtonRef = useRef();\n\tconst errorNoticeID = `block-editor/media-replace-flow/error-notice/${ ++uniqueId }`;\n\n\tconst onUploadError = ( message ) => {\n\t\tconst safeMessage = stripHTML( message );\n\t\tif ( onError ) {\n\t\t\tonError( safeMessage );\n\t\t\treturn;\n\t\t}\n\t\t// We need to set a timeout for showing the notice\n\t\t// so that VoiceOver and possibly other screen readers\n\t\t// can announce the error afer the toolbar button\n\t\t// regains focus once the upload dialog closes.\n\t\t// Otherwise VO simply skips over the notice and announces\n\t\t// the focused element and the open menu.\n\t\tsetTimeout( () => {\n\t\t\tcreateNotice( 'error', safeMessage, {\n\t\t\t\tspeak: true,\n\t\t\t\tid: errorNoticeID,\n\t\t\t\tisDismissible: true,\n\t\t\t} );\n\t\t}, 1000 );\n\t};\n\n\tconst selectMedia = ( media, closeMenu ) => {\n\t\tif ( useFeaturedImage && onToggleFeaturedImage ) {\n\t\t\tonToggleFeaturedImage();\n\t\t}\n\t\tcloseMenu();\n\t\t// Calling `onSelect` after the state update since it might unmount the component.\n\t\tonSelect( media );\n\t\tspeak( __( 'The media file has been replaced' ) );\n\t\tremoveNotice( errorNoticeID );\n\t};\n\n\tconst uploadFiles = ( event, closeMenu ) => {\n\t\tconst files = event.target.files;\n\t\tif ( ! handleUpload ) {\n\t\t\tcloseMenu();\n\t\t\treturn onSelect( files );\n\t\t}\n\t\tonFilesUpload( files );\n\t\tmediaUpload( {\n\t\t\tallowedTypes,\n\t\t\tfilesList: files,\n\t\t\tonFileChange: ( [ media ] ) => {\n\t\t\t\tselectMedia( media, closeMenu );\n\t\t\t},\n\t\t\tonError: onUploadError,\n\t\t} );\n\t};\n\n\tconst openOnArrowDown = ( event ) => {\n\t\tif ( event.keyCode === DOWN ) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.target.click();\n\t\t}\n\t};\n\n\tconst onlyAllowsImages = () => {\n\t\tif ( ! allowedTypes || allowedTypes.length === 0 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn allowedTypes.every(\n\t\t\t( allowedType ) =>\n\t\t\t\tallowedType === 'image' || allowedType.startsWith( 'image/' )\n\t\t);\n\t};\n\n\tconst gallery = multiple && onlyAllowsImages();\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ popoverProps }\n\t\t\tcontentClassName=\"block-editor-media-replace-flow__options\"\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tref={ editMediaButtonRef }\n\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\tonKeyDown={ openOnArrowDown }\n\t\t\t\t>\n\t\t\t\t\t{ name }\n\t\t\t\t</ToolbarButton>\n\t\t\t) }\n\t\t\trenderContent={ ( { onClose } ) => (\n\t\t\t\t<>\n\t\t\t\t\t<NavigableMenu className=\"block-editor-media-replace-flow__media-upload-menu\">\n\t\t\t\t\t\t<MediaUploadCheck>\n\t\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\tgallery={ gallery }\n\t\t\t\t\t\t\t\taddToGallery={ addToGallery }\n\t\t\t\t\t\t\t\tmultiple={ multiple }\n\t\t\t\t\t\t\t\tvalue={ multiple ? mediaIds : mediaId }\n\t\t\t\t\t\t\t\tonSelect={ ( media ) =>\n\t\t\t\t\t\t\t\t\tselectMedia( media, onClose )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tallowedTypes={ allowedTypes }\n\t\t\t\t\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\ticon={ mediaIcon }\n\t\t\t\t\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Open Media Library' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormFileUpload\n\t\t\t\t\t\t\t\tonChange={ ( event ) => {\n\t\t\t\t\t\t\t\t\tuploadFiles( event, onClose );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\taccept={ accept }\n\t\t\t\t\t\t\t\tmultiple={ multiple }\n\t\t\t\t\t\t\t\trender={ ( { openFileDialog } ) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\ticon={ upload }\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\topenFileDialog();\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Upload' ) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MediaUploadCheck>\n\t\t\t\t\t\t{ onToggleFeaturedImage && (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\ticon={ postFeaturedImage }\n\t\t\t\t\t\t\t\tonClick={ onToggleFeaturedImage }\n\t\t\t\t\t\t\t\tisPressed={ useFeaturedImage }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Use featured image' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t</NavigableMenu>\n\t\t\t\t\t{ onSelectURL && (\n\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\n\t\t\t\t\t\t<form\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'block-editor-media-flow__url-input',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'has-siblings':\n\t\t\t\t\t\t\t\t\t\tcanUpload || onToggleFeaturedImage,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"block-editor-media-replace-flow__image-url-label\">\n\t\t\t\t\t\t\t\t{ __( 'Current media URL:' ) }\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<Tooltip text={ mediaURL } position=\"bottom\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<LinkControl\n\t\t\t\t\t\t\t\t\t\tvalue={ { url: mediaURL } }\n\t\t\t\t\t\t\t\t\t\tsettings={ [] }\n\t\t\t\t\t\t\t\t\t\tshowSuggestions={ false }\n\t\t\t\t\t\t\t\t\t\tonChange={ ( { url } ) => {\n\t\t\t\t\t\t\t\t\t\t\tonSelectURL( url );\n\t\t\t\t\t\t\t\t\t\t\teditMediaButtonRef.current.focus();\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\t\t/>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-replace-flow/README.md\n */\nexport default compose( [\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice, removeNotice } = dispatch( noticesStore );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tremoveNotice,\n\t\t};\n\t} ),\n\twithFilters( 'editor.MediaReplaceFlow' ),\n] )( MediaReplaceFlow );\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst keyboardReturn = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-2 -2 24 24\">\n\t\t<Path d=\"M6.734 16.106l2.176-2.38-1.093-1.028-3.846 4.158 3.846 4.157 1.093-1.027-2.176-2.38h2.811c1.125 0 2.25.03 3.374 0 1.428-.001 3.362-.25 4.963-1.277 1.66-1.065 2.868-2.906 2.868-5.859 0-2.479-1.327-4.896-3.65-5.93-1.82-.813-3.044-.8-4.806-.788l-.567.002v1.5c.184 0 .368 0 .553-.002 1.82-.007 2.704-.014 4.21.657 1.854.827 2.76 2.657 2.76 4.561 0 2.472-.973 3.824-2.178 4.596-1.258.807-2.864 1.04-4.163 1.04h-.02c-1.115.03-2.229 0-3.344 0H6.734z\" />\n\t</SVG>\n);\n\nexport default keyboardReturn;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { ExternalLink } from '@wordpress/components';\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\n\nexport default function LinkViewerURL( { url, urlLabel, className } ) {\n\tconst linkClassName = classnames(\n\t\tclassName,\n\t\t'block-editor-url-popover__link-viewer-url'\n\t);\n\n\tif ( ! url ) {\n\t\treturn <span className={ linkClassName }></span>;\n\t}\n\n\treturn (\n\t\t<ExternalLink className={ linkClassName } href={ url }>\n\t\t\t{ urlLabel || filterURLForDisplay( safeDecodeURI( url ) ) }\n\t\t</ExternalLink>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport {\n\tButton,\n\tPopover,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { chevronDown } from '@wordpress/icons';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport LinkViewer from './link-viewer';\nimport LinkEditor from './link-editor';\nimport { unlock } from '../../lock-unlock';\n\nconst { __experimentalPopoverLegacyPositionToPlacement } = unlock(\n\tcomponentsPrivateApis\n);\n\nconst DEFAULT_PLACEMENT = 'bottom';\n\nfunction URLPopover( {\n\tadditionalControls,\n\tchildren,\n\trenderSettings,\n\t// The DEFAULT_PLACEMENT value is assigned inside the function's body\n\tplacement,\n\tfocusOnMount = 'firstElement',\n\t// Deprecated\n\tposition,\n\t// Rest\n\t...popoverProps\n} ) {\n\tif ( position !== undefined ) {\n\t\tdeprecated( '`position` prop in wp.blockEditor.URLPopover', {\n\t\t\tsince: '6.2',\n\t\t\talternative: '`placement` prop',\n\t\t} );\n\t}\n\n\t// Compute popover's placement:\n\t// - give priority to `placement` prop, if defined\n\t// - otherwise, compute it from the legacy `position` prop (if defined)\n\t// - finally, fallback to the DEFAULT_PLACEMENT.\n\tlet computedPlacement;\n\tif ( placement !== undefined ) {\n\t\tcomputedPlacement = placement;\n\t} else if ( position !== undefined ) {\n\t\tcomputedPlacement =\n\t\t\t__experimentalPopoverLegacyPositionToPlacement( position );\n\t}\n\tcomputedPlacement = computedPlacement || DEFAULT_PLACEMENT;\n\n\tconst [ isSettingsExpanded, setIsSettingsExpanded ] = useState( false );\n\n\tconst showSettings = !! renderSettings && isSettingsExpanded;\n\n\tconst toggleSettingsVisibility = () => {\n\t\tsetIsSettingsExpanded( ! isSettingsExpanded );\n\t};\n\n\treturn (\n\t\t<Popover\n\t\t\tclassName=\"block-editor-url-popover\"\n\t\t\tfocusOnMount={ focusOnMount }\n\t\t\tplacement={ computedPlacement }\n\t\t\tshift\n\t\t\t{ ...popoverProps }\n\t\t>\n\t\t\t<div className=\"block-editor-url-popover__input-container\">\n\t\t\t\t<div className=\"block-editor-url-popover__row\">\n\t\t\t\t\t{ children }\n\t\t\t\t\t{ !! renderSettings && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"block-editor-url-popover__settings-toggle\"\n\t\t\t\t\t\t\ticon={ chevronDown }\n\t\t\t\t\t\t\tlabel={ __( 'Link settings' ) }\n\t\t\t\t\t\t\tonClick={ toggleSettingsVisibility }\n\t\t\t\t\t\t\taria-expanded={ isSettingsExpanded }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t{ showSettings && (\n\t\t\t\t\t<div className=\"block-editor-url-popover__row block-editor-url-popover__settings\">\n\t\t\t\t\t\t{ renderSettings() }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t\t{ additionalControls && ! showSettings && (\n\t\t\t\t<div className=\"block-editor-url-popover__additional-controls\">\n\t\t\t\t\t{ additionalControls }\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</Popover>\n\t);\n}\n\nURLPopover.LinkEditor = LinkEditor;\n\nURLPopover.LinkViewer = LinkViewer;\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/url-popover/README.md\n */\nexport default URLPopover;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { keyboardReturn } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport URLInput from '../url-input';\n\nexport default function LinkEditor( {\n\tautocompleteRef,\n\tclassName,\n\tonChangeInputValue,\n\tvalue,\n\t...props\n} ) {\n\treturn (\n\t\t<form\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-url-popover__link-editor',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<URLInput\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChangeInputValue }\n\t\t\t\tautocompleteRef={ autocompleteRef }\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\ticon={ keyboardReturn }\n\t\t\t\tlabel={ __( 'Apply' ) }\n\t\t\t\ttype=\"submit\"\n\t\t\t/>\n\t\t</form>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { edit } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport LinkViewerURL from './link-viewer-url';\n\nexport default function LinkViewer( {\n\tclassName,\n\tlinkClassName,\n\tonEditLinkClick,\n\turl,\n\turlLabel,\n\t...props\n} ) {\n\treturn (\n\t\t<div\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-url-popover__link-viewer',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<LinkViewerURL\n\t\t\t\turl={ url }\n\t\t\t\turlLabel={ urlLabel }\n\t\t\t\tclassName={ linkClassName }\n\t\t\t/>\n\t\t\t{ onEditLinkClick && (\n\t\t\t\t<Button\n\t\t\t\t\ticon={ edit }\n\t\t\t\t\tlabel={ __( 'Edit' ) }\n\t\t\t\t\tonClick={ onEditLinkClick }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tFormFileUpload,\n\tPlaceholder,\n\tDropZone,\n\twithFilters,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useState, useEffect } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { keyboardReturn } from '@wordpress/icons';\nimport { pasteHandler } from '@wordpress/blocks';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport MediaUpload from '../media-upload';\nimport MediaUploadCheck from '../media-upload/check';\nimport URLPopover from '../url-popover';\nimport { store as blockEditorStore } from '../../store';\n\nconst noop = () => {};\n\nconst InsertFromURLPopover = ( { src, onChange, onSubmit, onClose } ) => (\n\t<URLPopover onClose={ onClose }>\n\t\t<form\n\t\t\tclassName=\"block-editor-media-placeholder__url-input-form\"\n\t\t\tonSubmit={ onSubmit }\n\t\t>\n\t\t\t<input\n\t\t\t\tclassName=\"block-editor-media-placeholder__url-input-field\"\n\t\t\t\ttype=\"text\"\n\t\t\t\taria-label={ __( 'URL' ) }\n\t\t\t\tplaceholder={ __( 'Paste or type URL' ) }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tvalue={ src }\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tclassName=\"block-editor-media-placeholder__url-input-submit-button\"\n\t\t\t\ticon={ keyboardReturn }\n\t\t\t\tlabel={ __( 'Apply' ) }\n\t\t\t\ttype=\"submit\"\n\t\t\t/>\n\t\t</form>\n\t</URLPopover>\n);\n\nexport function MediaPlaceholder( {\n\tvalue = {},\n\tallowedTypes,\n\tclassName,\n\ticon,\n\tlabels = {},\n\tmediaPreview,\n\tnotices,\n\tisAppender,\n\taccept,\n\taddToGallery,\n\tmultiple = false,\n\thandleUpload = true,\n\tdisableDropZone,\n\tdisableMediaButtons,\n\tonError,\n\tonSelect,\n\tonCancel,\n\tonSelectURL,\n\tonToggleFeaturedImage,\n\tonDoubleClick,\n\tonFilesPreUpload = noop,\n\tonHTMLDrop: deprecatedOnHTMLDrop,\n\tchildren,\n\tmediaLibraryButton,\n\tplaceholder,\n\tstyle,\n} ) {\n\tif ( deprecatedOnHTMLDrop ) {\n\t\tdeprecated( 'wp.blockEditor.MediaPlaceholder onHTMLDrop prop', {\n\t\t\tsince: '6.2',\n\t\t\tversion: '6.4',\n\t\t} );\n\t}\n\n\tconst mediaUpload = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn getSettings().mediaUpload;\n\t}, [] );\n\tconst [ src, setSrc ] = useState( '' );\n\tconst [ isURLInputVisible, setIsURLInputVisible ] = useState( false );\n\n\tuseEffect( () => {\n\t\tsetSrc( value?.src ?? '' );\n\t}, [ value?.src ] );\n\n\tconst onlyAllowsImages = () => {\n\t\tif ( ! allowedTypes || allowedTypes.length === 0 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn allowedTypes.every(\n\t\t\t( allowedType ) =>\n\t\t\t\tallowedType === 'image' || allowedType.startsWith( 'image/' )\n\t\t);\n\t};\n\n\tconst onChangeSrc = ( event ) => {\n\t\tsetSrc( event.target.value );\n\t};\n\n\tconst openURLInput = () => {\n\t\tsetIsURLInputVisible( true );\n\t};\n\tconst closeURLInput = () => {\n\t\tsetIsURLInputVisible( false );\n\t};\n\n\tconst onSubmitSrc = ( event ) => {\n\t\tevent.preventDefault();\n\t\tif ( src && onSelectURL ) {\n\t\t\tonSelectURL( src );\n\t\t\tcloseURLInput();\n\t\t}\n\t};\n\n\tconst onFilesUpload = ( files ) => {\n\t\tif ( ! handleUpload ) {\n\t\t\treturn onSelect( files );\n\t\t}\n\t\tonFilesPreUpload( files );\n\t\tlet setMedia;\n\t\tif ( multiple ) {\n\t\t\tif ( addToGallery ) {\n\t\t\t\t// Since the setMedia function runs multiple times per upload group\n\t\t\t\t// and is passed newMedia containing every item in its group each time, we must\n\t\t\t\t// filter out whatever this upload group had previously returned to the\n\t\t\t\t// gallery before adding and returning the image array with replacement newMedia\n\t\t\t\t// values.\n\n\t\t\t\t// Define an array to store urls from newMedia between subsequent function calls.\n\t\t\t\tlet lastMediaPassed = [];\n\t\t\t\tsetMedia = ( newMedia ) => {\n\t\t\t\t\t// Remove any images this upload group is responsible for (lastMediaPassed).\n\t\t\t\t\t// Their replacements are contained in newMedia.\n\t\t\t\t\tconst filteredMedia = ( value ?? [] ).filter( ( item ) => {\n\t\t\t\t\t\t// If Item has id, only remove it if lastMediaPassed has an item with that id.\n\t\t\t\t\t\tif ( item.id ) {\n\t\t\t\t\t\t\treturn ! lastMediaPassed.some(\n\t\t\t\t\t\t\t\t// Be sure to convert to number for comparison.\n\t\t\t\t\t\t\t\t( { id } ) => Number( id ) === Number( item.id )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Compare transient images via .includes since gallery may append extra info onto the url.\n\t\t\t\t\t\treturn ! lastMediaPassed.some( ( { urlSlug } ) =>\n\t\t\t\t\t\t\titem.url.includes( urlSlug )\n\t\t\t\t\t\t);\n\t\t\t\t\t} );\n\t\t\t\t\t// Return the filtered media array along with newMedia.\n\t\t\t\t\tonSelect( filteredMedia.concat( newMedia ) );\n\t\t\t\t\t// Reset lastMediaPassed and set it with ids and urls from newMedia.\n\t\t\t\t\tlastMediaPassed = newMedia.map( ( media ) => {\n\t\t\t\t\t\t// Add everything up to '.fileType' to compare via .includes.\n\t\t\t\t\t\tconst cutOffIndex = media.url.lastIndexOf( '.' );\n\t\t\t\t\t\tconst urlSlug = media.url.slice( 0, cutOffIndex );\n\t\t\t\t\t\treturn { id: media.id, urlSlug };\n\t\t\t\t\t} );\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tsetMedia = onSelect;\n\t\t\t}\n\t\t} else {\n\t\t\tsetMedia = ( [ media ] ) => onSelect( media );\n\t\t}\n\t\tmediaUpload( {\n\t\t\tallowedTypes,\n\t\t\tfilesList: files,\n\t\t\tonFileChange: setMedia,\n\t\t\tonError,\n\t\t} );\n\t};\n\n\tasync function handleBlocksDrop( blocks ) {\n\t\tif ( ! blocks || ! Array.isArray( blocks ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction recursivelyFindMediaFromBlocks( _blocks ) {\n\t\t\treturn _blocks.flatMap( ( block ) =>\n\t\t\t\t( block.name === 'core/image' ||\n\t\t\t\t\tblock.name === 'core/audio' ||\n\t\t\t\t\tblock.name === 'core/video' ) &&\n\t\t\t\tblock.attributes.url\n\t\t\t\t\t? [ block ]\n\t\t\t\t\t: recursivelyFindMediaFromBlocks( block.innerBlocks )\n\t\t\t);\n\t\t}\n\n\t\tconst mediaBlocks = recursivelyFindMediaFromBlocks( blocks );\n\n\t\tif ( ! mediaBlocks.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst uploadedMediaList = await Promise.all(\n\t\t\tmediaBlocks.map( ( block ) =>\n\t\t\t\tblock.attributes.id\n\t\t\t\t\t? block.attributes\n\t\t\t\t\t: new Promise( ( resolve, reject ) => {\n\t\t\t\t\t\t\twindow\n\t\t\t\t\t\t\t\t.fetch( block.attributes.url )\n\t\t\t\t\t\t\t\t.then( ( response ) => response.blob() )\n\t\t\t\t\t\t\t\t.then( ( blob ) =>\n\t\t\t\t\t\t\t\t\tmediaUpload( {\n\t\t\t\t\t\t\t\t\t\tfilesList: [ blob ],\n\t\t\t\t\t\t\t\t\t\tadditionalData: {\n\t\t\t\t\t\t\t\t\t\t\ttitle: block.attributes.title,\n\t\t\t\t\t\t\t\t\t\t\talt_text: block.attributes.alt,\n\t\t\t\t\t\t\t\t\t\t\tcaption: block.attributes.caption,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tonFileChange: ( [ media ] ) => {\n\t\t\t\t\t\t\t\t\t\t\tif ( media.id ) {\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( media );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tallowedTypes,\n\t\t\t\t\t\t\t\t\t\tonError: reject,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.catch( () => resolve( block.attributes.url ) );\n\t\t\t\t\t  } )\n\t\t\t)\n\t\t).catch( ( err ) => onError( err ) );\n\n\t\tif ( multiple ) {\n\t\t\tonSelect( uploadedMediaList );\n\t\t} else {\n\t\t\tonSelect( uploadedMediaList[ 0 ] );\n\t\t}\n\t}\n\n\tasync function onHTMLDrop( HTML ) {\n\t\tconst blocks = pasteHandler( { HTML } );\n\t\treturn await handleBlocksDrop( blocks );\n\t}\n\n\tconst onUpload = ( event ) => {\n\t\tonFilesUpload( event.target.files );\n\t};\n\n\tconst defaultRenderPlaceholder = ( content ) => {\n\t\tlet { instructions, title } = labels;\n\n\t\tif ( ! mediaUpload && ! onSelectURL ) {\n\t\t\tinstructions = __(\n\t\t\t\t'To edit this block, you need permission to upload media.'\n\t\t\t);\n\t\t}\n\n\t\tif ( instructions === undefined || title === undefined ) {\n\t\t\tconst typesAllowed = allowedTypes ?? [];\n\n\t\t\tconst [ firstAllowedType ] = typesAllowed;\n\t\t\tconst isOneType = 1 === typesAllowed.length;\n\t\t\tconst isAudio = isOneType && 'audio' === firstAllowedType;\n\t\t\tconst isImage = isOneType && 'image' === firstAllowedType;\n\t\t\tconst isVideo = isOneType && 'video' === firstAllowedType;\n\n\t\t\tif ( instructions === undefined && mediaUpload ) {\n\t\t\t\tinstructions = __(\n\t\t\t\t\t'Upload a media file or pick one from your media library.'\n\t\t\t\t);\n\n\t\t\t\tif ( isAudio ) {\n\t\t\t\t\tinstructions = __(\n\t\t\t\t\t\t'Upload an audio file, pick one from your media library, or add one with a URL.'\n\t\t\t\t\t);\n\t\t\t\t} else if ( isImage ) {\n\t\t\t\t\tinstructions = __(\n\t\t\t\t\t\t'Upload an image file, pick one from your media library, or add one with a URL.'\n\t\t\t\t\t);\n\t\t\t\t} else if ( isVideo ) {\n\t\t\t\t\tinstructions = __(\n\t\t\t\t\t\t'Upload a video file, pick one from your media library, or add one with a URL.'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( title === undefined ) {\n\t\t\t\ttitle = __( 'Media' );\n\n\t\t\t\tif ( isAudio ) {\n\t\t\t\t\ttitle = __( 'Audio' );\n\t\t\t\t} else if ( isImage ) {\n\t\t\t\t\ttitle = __( 'Image' );\n\t\t\t\t} else if ( isVideo ) {\n\t\t\t\t\ttitle = __( 'Video' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst placeholderClassName = classnames(\n\t\t\t'block-editor-media-placeholder',\n\t\t\tclassName,\n\t\t\t{\n\t\t\t\t'is-appender': isAppender,\n\t\t\t}\n\t\t);\n\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\ticon={ icon }\n\t\t\t\tlabel={ title }\n\t\t\t\tinstructions={ instructions }\n\t\t\t\tclassName={ placeholderClassName }\n\t\t\t\tnotices={ notices }\n\t\t\t\tonDoubleClick={ onDoubleClick }\n\t\t\t\tpreview={ mediaPreview }\n\t\t\t\tstyle={ style }\n\t\t\t>\n\t\t\t\t{ content }\n\t\t\t\t{ children }\n\t\t\t</Placeholder>\n\t\t);\n\t};\n\tconst renderPlaceholder = placeholder ?? defaultRenderPlaceholder;\n\n\tconst renderDropZone = () => {\n\t\tif ( disableDropZone ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<DropZone onFilesDrop={ onFilesUpload } onHTMLDrop={ onHTMLDrop } />\n\t\t);\n\t};\n\n\tconst renderCancelLink = () => {\n\t\treturn (\n\t\t\tonCancel && (\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"block-editor-media-placeholder__cancel-button\"\n\t\t\t\t\ttitle={ __( 'Cancel' ) }\n\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\tonClick={ onCancel }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t</Button>\n\t\t\t)\n\t\t);\n\t};\n\n\tconst renderUrlSelectionUI = () => {\n\t\treturn (\n\t\t\tonSelectURL && (\n\t\t\t\t<div className=\"block-editor-media-placeholder__url-input-container\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"block-editor-media-placeholder__button\"\n\t\t\t\t\t\tonClick={ openURLInput }\n\t\t\t\t\t\tisPressed={ isURLInputVisible }\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Insert from URL' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t\t{ isURLInputVisible && (\n\t\t\t\t\t\t<InsertFromURLPopover\n\t\t\t\t\t\t\tsrc={ src }\n\t\t\t\t\t\t\tonChange={ onChangeSrc }\n\t\t\t\t\t\t\tonSubmit={ onSubmitSrc }\n\t\t\t\t\t\t\tonClose={ closeURLInput }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t)\n\t\t);\n\t};\n\n\tconst renderFeaturedImageToggle = () => {\n\t\treturn (\n\t\t\tonToggleFeaturedImage && (\n\t\t\t\t<div className=\"block-editor-media-placeholder__url-input-container\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"block-editor-media-placeholder__button\"\n\t\t\t\t\t\tonClick={ onToggleFeaturedImage }\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Use featured image' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t)\n\t\t);\n\t};\n\n\tconst renderMediaUploadChecked = () => {\n\t\tconst defaultButton = ( { open } ) => {\n\t\t\treturn (\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\topen();\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Media Library' ) }\n\t\t\t\t</Button>\n\t\t\t);\n\t\t};\n\t\tconst libraryButton = mediaLibraryButton ?? defaultButton;\n\t\tconst uploadMediaLibraryButton = (\n\t\t\t<MediaUpload\n\t\t\t\taddToGallery={ addToGallery }\n\t\t\t\tgallery={ multiple && onlyAllowsImages() }\n\t\t\t\tmultiple={ multiple }\n\t\t\t\tonSelect={ onSelect }\n\t\t\t\tallowedTypes={ allowedTypes }\n\t\t\t\tmode={ 'browse' }\n\t\t\t\tvalue={\n\t\t\t\t\tArray.isArray( value )\n\t\t\t\t\t\t? value.map( ( { id } ) => id )\n\t\t\t\t\t\t: value.id\n\t\t\t\t}\n\t\t\t\trender={ libraryButton }\n\t\t\t/>\n\t\t);\n\n\t\tif ( mediaUpload && isAppender ) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{ renderDropZone() }\n\t\t\t\t\t<FormFileUpload\n\t\t\t\t\t\tonChange={ onUpload }\n\t\t\t\t\t\taccept={ accept }\n\t\t\t\t\t\tmultiple={ multiple }\n\t\t\t\t\t\trender={ ( { openFileDialog } ) => {\n\t\t\t\t\t\t\tconst content = (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t\t\t\t'block-editor-media-placeholder__button',\n\t\t\t\t\t\t\t\t\t\t\t'block-editor-media-placeholder__upload-button'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tonClick={ openFileDialog }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Upload' ) }\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t{ uploadMediaLibraryButton }\n\t\t\t\t\t\t\t\t\t{ renderUrlSelectionUI() }\n\t\t\t\t\t\t\t\t\t{ renderFeaturedImageToggle() }\n\t\t\t\t\t\t\t\t\t{ renderCancelLink() }\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn renderPlaceholder( content );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\tif ( mediaUpload ) {\n\t\t\tconst content = (\n\t\t\t\t<>\n\t\t\t\t\t{ renderDropZone() }\n\t\t\t\t\t<FormFileUpload\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'block-editor-media-placeholder__button',\n\t\t\t\t\t\t\t'block-editor-media-placeholder__upload-button'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonChange={ onUpload }\n\t\t\t\t\t\taccept={ accept }\n\t\t\t\t\t\tmultiple={ multiple }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Upload' ) }\n\t\t\t\t\t</FormFileUpload>\n\t\t\t\t\t{ uploadMediaLibraryButton }\n\t\t\t\t\t{ renderUrlSelectionUI() }\n\t\t\t\t\t{ renderFeaturedImageToggle() }\n\t\t\t\t\t{ renderCancelLink() }\n\t\t\t\t</>\n\t\t\t);\n\t\t\treturn renderPlaceholder( content );\n\t\t}\n\n\t\treturn renderPlaceholder( uploadMediaLibraryButton );\n\t};\n\n\tif ( disableMediaButtons ) {\n\t\treturn <MediaUploadCheck>{ renderDropZone() }</MediaUploadCheck>;\n\t}\n\n\treturn (\n\t\t<MediaUploadCheck\n\t\t\tfallback={ renderPlaceholder( renderUrlSelectionUI() ) }\n\t\t>\n\t\t\t{ renderMediaUploadChecked() }\n\t\t</MediaUploadCheck>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-placeholder/README.md\n */\nexport default withFilters( 'editor.MediaPlaceholder' )( MediaPlaceholder );\n","/**\n * Internal dependencies\n */\nimport PanelColorGradientSettings from '../colors-gradients/panel-color-gradient-settings';\n\nconst PanelColorSettings = ( { colorSettings, ...props } ) => {\n\tconst settings = colorSettings.map( ( setting ) => {\n\t\tif ( ! setting ) {\n\t\t\treturn setting;\n\t\t}\n\t\tconst { value, onChange, ...otherSettings } = setting;\n\t\treturn {\n\t\t\t...otherSettings,\n\t\t\tcolorValue: value,\n\t\t\tonColorChange: onChange,\n\t\t};\n\t} );\n\treturn (\n\t\t<PanelColorGradientSettings\n\t\t\tsettings={ settings }\n\t\t\tgradients={ [] }\n\t\t\tdisableCustomGradients={ true }\n\t\t\t{ ...props }\n\t\t/>\n\t);\n};\nexport default PanelColorSettings;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { ToolbarItem, DropdownMenu, Slot } from '@wordpress/components';\nimport { chevronDown } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { orderBy } from '../../../utils/sorting';\n\nconst POPOVER_PROPS = {\n\tposition: 'bottom right',\n\tvariant: 'toolbar',\n};\n\nconst FormatToolbar = () => {\n\treturn (\n\t\t<>\n\t\t\t{ [ 'bold', 'italic', 'link', 'unknown' ].map( ( format ) => (\n\t\t\t\t<Slot\n\t\t\t\t\tname={ `RichText.ToolbarControls.${ format }` }\n\t\t\t\t\tkey={ format }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t\t<Slot name=\"RichText.ToolbarControls\">\n\t\t\t\t{ ( fills ) => {\n\t\t\t\t\tif ( ! fills.length ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst allProps = fills.map( ( [ { props } ] ) => props );\n\t\t\t\t\tconst hasActive = allProps.some(\n\t\t\t\t\t\t( { isActive } ) => isActive\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ToolbarItem>\n\t\t\t\t\t\t\t{ ( toggleProps ) => (\n\t\t\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\t\t\ticon={ chevronDown }\n\t\t\t\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\t\t\t\t\t\t\tlabel={ __( 'More' ) }\n\t\t\t\t\t\t\t\t\ttoggleProps={ {\n\t\t\t\t\t\t\t\t\t\t...toggleProps,\n\t\t\t\t\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t\t\t\t\ttoggleProps.className,\n\t\t\t\t\t\t\t\t\t\t\t{ 'is-pressed': hasActive }\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tdescribedBy: __(\n\t\t\t\t\t\t\t\t\t\t\t'Displays more block tools'\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tcontrols={ orderBy(\n\t\t\t\t\t\t\t\t\t\tfills.map( ( [ { props } ] ) => props ),\n\t\t\t\t\t\t\t\t\t\t'title'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</ToolbarItem>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Slot>\n\t\t</>\n\t);\n};\n\nexport default FormatToolbar;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Popover, ToolbarGroup } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tisCollapsed,\n\tgetActiveFormats,\n\tuseAnchor,\n\tstore as richTextStore,\n} from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport BlockControls from '../block-controls';\nimport FormatToolbar from './format-toolbar';\nimport NavigableToolbar from '../navigable-toolbar';\nimport { store as blockEditorStore } from '../../store';\n\nfunction InlineSelectionToolbar( { editableContentElement, activeFormats } ) {\n\tconst lastFormat = activeFormats[ activeFormats.length - 1 ];\n\tconst lastFormatType = lastFormat?.type;\n\tconst settings = useSelect(\n\t\t( select ) => select( richTextStore ).getFormatType( lastFormatType ),\n\t\t[ lastFormatType ]\n\t);\n\tconst popoverAnchor = useAnchor( {\n\t\teditableContentElement,\n\t\tsettings,\n\t} );\n\n\treturn <InlineToolbar popoverAnchor={ popoverAnchor } />;\n}\n\nfunction InlineToolbar( { popoverAnchor } ) {\n\treturn (\n\t\t<Popover\n\t\t\tplacement=\"top\"\n\t\t\tfocusOnMount={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar\"\n\t\t\t__unstableSlotName=\"block-toolbar\"\n\t\t>\n\t\t\t<NavigableToolbar\n\t\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar-group\"\n\t\t\t\t/* translators: accessibility text for the inline format toolbar */\n\t\t\t\taria-label={ __( 'Format tools' ) }\n\t\t\t>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<FormatToolbar />\n\t\t\t\t</ToolbarGroup>\n\t\t\t</NavigableToolbar>\n\t\t</Popover>\n\t);\n}\n\nconst FormatToolbarContainer = ( {\n\tinline,\n\teditableContentElement,\n\tvalue,\n} ) => {\n\tconst hasInlineToolbar = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings().hasInlineToolbar,\n\t\t[]\n\t);\n\n\tif ( inline ) {\n\t\treturn <InlineToolbar popoverAnchor={ editableContentElement } />;\n\t}\n\n\tif ( hasInlineToolbar ) {\n\t\tconst activeFormats = getActiveFormats( value );\n\n\t\tif ( isCollapsed( value ) && ! activeFormats.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<InlineSelectionToolbar\n\t\t\t\teditableContentElement={ editableContentElement }\n\t\t\t\tactiveFormats={ activeFormats }\n\t\t\t/>\n\t\t);\n\t}\n\n\t// Render regular toolbar.\n\treturn (\n\t\t<BlockControls group=\"inline\">\n\t\t\t<FormatToolbar />\n\t\t</BlockControls>\n\t);\n};\n\nexport default FormatToolbarContainer;\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\nimport { BACKSPACE, DELETE, ESCAPE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport function useUndoAutomaticChange() {\n\tconst { didAutomaticChange, getSettings } = useSelect( blockEditorStore );\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onKeyDown( event ) {\n\t\t\tconst { keyCode } = event;\n\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tkeyCode !== DELETE &&\n\t\t\t\tkeyCode !== BACKSPACE &&\n\t\t\t\tkeyCode !== ESCAPE\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { __experimentalUndo } = getSettings();\n\n\t\t\tif ( ! __experimentalUndo ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! didAutomaticChange() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\t\t\t__experimentalUndo();\n\t\t}\n\n\t\telement.addEventListener( 'keydown', onKeyDown );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"shortcode\"];","/**\n * WordPress dependencies\n */\nimport { regexp } from '@wordpress/shortcode';\nimport { renderToString } from '@wordpress/element';\nimport { createBlock } from '@wordpress/blocks';\n\nexport function addActiveFormats( value, activeFormats ) {\n\tif ( activeFormats?.length ) {\n\t\tlet index = value.formats.length;\n\n\t\twhile ( index-- ) {\n\t\t\tvalue.formats[ index ] = [\n\t\t\t\t...activeFormats,\n\t\t\t\t...( value.formats[ index ] || [] ),\n\t\t\t];\n\t\t}\n\t}\n}\n\n/**\n * Get the multiline tag based on the multiline prop.\n *\n * @param {?(string|boolean)} multiline The multiline prop.\n *\n * @return {string | undefined} The multiline tag.\n */\nexport function getMultilineTag( multiline ) {\n\tif ( multiline !== true && multiline !== 'p' && multiline !== 'li' ) {\n\t\treturn;\n\t}\n\n\treturn multiline === true ? 'p' : multiline;\n}\n\nexport function getAllowedFormats( { allowedFormats, disableFormats } ) {\n\tif ( disableFormats ) {\n\t\treturn getAllowedFormats.EMPTY_ARRAY;\n\t}\n\n\treturn allowedFormats;\n}\n\ngetAllowedFormats.EMPTY_ARRAY = [];\n\nexport const isShortcode = ( text ) => regexp( '.*' ).test( text );\n\n/**\n * Creates a link from pasted URL.\n * Creates a paragraph block containing a link to the URL, and calls `onReplace`.\n *\n * @param {string}   url       The URL that could not be embedded.\n * @param {Function} onReplace Function to call with the created fallback block.\n */\nexport function createLinkInParagraph( url, onReplace ) {\n\tconst link = <a href={ url }>{ url }</a>;\n\tonReplace(\n\t\tcreateBlock( 'core/paragraph', { content: renderToString( link ) } )\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { isEmpty, split, toHTMLString } from '@wordpress/rich-text';\n\n/*\n * Signals to the RichText owner that the block can be replaced with two blocks\n * as a result of splitting the block by pressing enter, or with blocks as a\n * result of splitting the block by pasting block content in the instance.\n */\nexport function splitValue( {\n\tvalue,\n\tpastedBlocks = [],\n\tonReplace,\n\tonSplit,\n\tonSplitMiddle,\n\tmultilineTag,\n} ) {\n\tif ( ! onReplace || ! onSplit ) {\n\t\treturn;\n\t}\n\n\t// Ensure the value has a selection. This might happen when trying to split\n\t// an empty value before there was a `selectionchange` event.\n\tconst { start = 0, end = 0 } = value;\n\tconst valueWithEnsuredSelection = { ...value, start, end };\n\tconst blocks = [];\n\tconst [ before, after ] = split( valueWithEnsuredSelection );\n\tconst hasPastedBlocks = pastedBlocks.length > 0;\n\tlet lastPastedBlockIndex = -1;\n\n\t// Consider the after value to be the original it is not empty and the\n\t// before value *is* empty.\n\tconst isAfterOriginal = isEmpty( before ) && ! isEmpty( after );\n\n\t// Create a block with the content before the caret if there's no pasted\n\t// blocks, or if there are pasted blocks and the value is not empty. We do\n\t// not want a leading empty block on paste, but we do if split with e.g. the\n\t// enter key.\n\tif ( ! hasPastedBlocks || ! isEmpty( before ) ) {\n\t\tblocks.push(\n\t\t\tonSplit(\n\t\t\t\ttoHTMLString( {\n\t\t\t\t\tvalue: before,\n\t\t\t\t\tmultilineTag,\n\t\t\t\t} ),\n\t\t\t\t! isAfterOriginal\n\t\t\t)\n\t\t);\n\t\tlastPastedBlockIndex += 1;\n\t}\n\n\tif ( hasPastedBlocks ) {\n\t\tblocks.push( ...pastedBlocks );\n\t\tlastPastedBlockIndex += pastedBlocks.length;\n\t} else if ( onSplitMiddle ) {\n\t\tblocks.push( onSplitMiddle() );\n\t}\n\n\t// If there's pasted blocks, append a block with non empty content / after\n\t// the caret. Otherwise, do append an empty block if there is no\n\t// `onSplitMiddle` prop, but if there is and the content is empty, the\n\t// middle block is enough to set focus in.\n\tif (\n\t\thasPastedBlocks\n\t\t\t? ! isEmpty( after )\n\t\t\t: ! onSplitMiddle || ! isEmpty( after )\n\t) {\n\t\tblocks.push(\n\t\t\tonSplit(\n\t\t\t\ttoHTMLString( {\n\t\t\t\t\tvalue: after,\n\t\t\t\t\tmultilineTag,\n\t\t\t\t} ),\n\t\t\t\tisAfterOriginal\n\t\t\t)\n\t\t);\n\t}\n\n\t// If there are pasted blocks, set the selection to the last one. Otherwise,\n\t// set the selection to the second block.\n\tconst indexToSelect = hasPastedBlocks ? lastPastedBlockIndex : 1;\n\n\t// If there are pasted blocks, move the caret to the end of the selected\n\t// block Otherwise, retain the default value.\n\tconst initialPosition = hasPastedBlocks ? -1 : 0;\n\n\tonReplace( blocks, indexToSelect, initialPosition );\n}\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\nimport { getFilesFromDataTransfer } from '@wordpress/dom';\nimport {\n\tpasteHandler,\n\tfindTransform,\n\tgetBlockTransforms,\n} from '@wordpress/blocks';\nimport {\n\tisEmpty,\n\tinsert,\n\tcreate,\n\treplace,\n\t__UNSTABLE_LINE_SEPARATOR as LINE_SEPARATOR,\n} from '@wordpress/rich-text';\nimport { isURL } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { addActiveFormats, isShortcode } from './utils';\nimport { splitValue } from './split-value';\nimport { shouldDismissPastedFiles } from '../../utils/pasting';\n\n/** @typedef {import('@wordpress/rich-text').RichTextValue} RichTextValue */\n\n/**\n * Replaces line separators with line breaks if not multiline.\n * Replaces line breaks with line separators if multiline.\n *\n * @param {RichTextValue} value       Value to adjust.\n * @param {boolean}       isMultiline Whether to adjust to multiline or not.\n *\n * @return {RichTextValue} Adjusted value.\n */\nfunction adjustLines( value, isMultiline ) {\n\tif ( isMultiline ) {\n\t\treturn replace( value, /\\n+/g, LINE_SEPARATOR );\n\t}\n\n\treturn replace( value, new RegExp( LINE_SEPARATOR, 'g' ), '\\n' );\n}\n\nexport function usePasteHandler( props ) {\n\tconst propsRef = useRef( props );\n\tpropsRef.current = props;\n\treturn useRefEffect( ( element ) => {\n\t\tfunction _onPaste( event ) {\n\t\t\tconst {\n\t\t\t\tisSelected,\n\t\t\t\tdisableFormats,\n\t\t\t\tonChange,\n\t\t\t\tvalue,\n\t\t\t\tformatTypes,\n\t\t\t\ttagName,\n\t\t\t\tonReplace,\n\t\t\t\tonSplit,\n\t\t\t\tonSplitMiddle,\n\t\t\t\t__unstableEmbedURLOnPaste,\n\t\t\t\tmultilineTag,\n\t\t\t\tpreserveWhiteSpace,\n\t\t\t\tpastePlainText,\n\t\t\t} = propsRef.current;\n\n\t\t\tif ( ! isSelected ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { clipboardData } = event;\n\n\t\t\tlet plainText = '';\n\t\t\tlet html = '';\n\n\t\t\t// IE11 only supports `Text` as an argument for `getData` and will\n\t\t\t// otherwise throw an invalid argument error, so we try the standard\n\t\t\t// arguments first, then fallback to `Text` if they fail.\n\t\t\ttry {\n\t\t\t\tplainText = clipboardData.getData( 'text/plain' );\n\t\t\t\thtml = clipboardData.getData( 'text/html' );\n\t\t\t} catch ( error1 ) {\n\t\t\t\ttry {\n\t\t\t\t\thtml = clipboardData.getData( 'Text' );\n\t\t\t\t} catch ( error2 ) {\n\t\t\t\t\t// Some browsers like UC Browser paste plain text by default and\n\t\t\t\t\t// don't support clipboardData at all, so allow default\n\t\t\t\t\t// behaviour.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove Windows-specific metadata appended within copied HTML text.\n\t\t\thtml = removeWindowsFragments( html );\n\n\t\t\t// Strip meta tag.\n\t\t\thtml = removeCharsetMetaTag( html );\n\n\t\t\tevent.preventDefault();\n\n\t\t\t// Allows us to ask for this information when we get a report.\n\t\t\twindow.console.log( 'Received HTML:\\n\\n', html );\n\t\t\twindow.console.log( 'Received plain text:\\n\\n', plainText );\n\n\t\t\tif ( disableFormats ) {\n\t\t\t\tonChange( insert( value, plainText ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst transformed = formatTypes.reduce(\n\t\t\t\t( accumlator, { __unstablePasteRule } ) => {\n\t\t\t\t\t// Only allow one transform.\n\t\t\t\t\tif ( __unstablePasteRule && accumlator === value ) {\n\t\t\t\t\t\taccumlator = __unstablePasteRule( value, {\n\t\t\t\t\t\t\thtml,\n\t\t\t\t\t\t\tplainText,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn accumlator;\n\t\t\t\t},\n\t\t\t\tvalue\n\t\t\t);\n\n\t\t\tif ( transformed !== value ) {\n\t\t\t\tonChange( transformed );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst files = [ ...getFilesFromDataTransfer( clipboardData ) ];\n\t\t\tconst isInternal = clipboardData.getData( 'rich-text' ) === 'true';\n\n\t\t\t// If the data comes from a rich text instance, we can directly use it\n\t\t\t// without filtering the data. The filters are only meant for externally\n\t\t\t// pasted content and remove inline styles.\n\t\t\tif ( isInternal ) {\n\t\t\t\tconst pastedMultilineTag =\n\t\t\t\t\tclipboardData.getData( 'rich-text-multi-line-tag' ) ||\n\t\t\t\t\tundefined;\n\t\t\t\tlet pastedValue = create( {\n\t\t\t\t\thtml,\n\t\t\t\t\tmultilineTag: pastedMultilineTag,\n\t\t\t\t\tmultilineWrapperTags:\n\t\t\t\t\t\tpastedMultilineTag === 'li'\n\t\t\t\t\t\t\t? [ 'ul', 'ol' ]\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\tpreserveWhiteSpace,\n\t\t\t\t} );\n\t\t\t\tpastedValue = adjustLines( pastedValue, !! multilineTag );\n\t\t\t\taddActiveFormats( pastedValue, value.activeFormats );\n\t\t\t\tonChange( insert( value, pastedValue ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( pastePlainText ) {\n\t\t\t\tonChange( insert( value, create( { text: plainText } ) ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( files?.length ) {\n\t\t\t\t// Allows us to ask for this information when we get a report.\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\twindow.console.log( 'Received items:\\n\\n', files );\n\t\t\t}\n\n\t\t\t// Process any attached files, unless we infer that the files in\n\t\t\t// question are redundant \"screenshots\" of the actual HTML payload,\n\t\t\t// as created by certain office-type programs.\n\t\t\t//\n\t\t\t// @see shouldDismissPastedFiles\n\t\t\tif (\n\t\t\t\tfiles?.length &&\n\t\t\t\t! shouldDismissPastedFiles( files, html, plainText )\n\t\t\t) {\n\t\t\t\tconst fromTransforms = getBlockTransforms( 'from' );\n\t\t\t\tconst blocks = files\n\t\t\t\t\t.reduce( ( accumulator, file ) => {\n\t\t\t\t\t\tconst transformation = findTransform(\n\t\t\t\t\t\t\tfromTransforms,\n\t\t\t\t\t\t\t( transform ) =>\n\t\t\t\t\t\t\t\ttransform.type === 'files' &&\n\t\t\t\t\t\t\t\ttransform.isMatch( [ file ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( transformation ) {\n\t\t\t\t\t\t\taccumulator.push(\n\t\t\t\t\t\t\t\ttransformation.transform( [ file ] )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn accumulator;\n\t\t\t\t\t}, [] )\n\t\t\t\t\t.flat();\n\t\t\t\tif ( ! blocks.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( onReplace && isEmpty( value ) ) {\n\t\t\t\t\tonReplace( blocks );\n\t\t\t\t} else {\n\t\t\t\t\tsplitValue( {\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tpastedBlocks: blocks,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t\tonSplitMiddle,\n\t\t\t\t\t\tmultilineTag,\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet mode = onReplace && onSplit ? 'AUTO' : 'INLINE';\n\n\t\t\t// Force the blocks mode when the user is pasting\n\t\t\t// on a new line & the content resembles a shortcode.\n\t\t\t// Otherwise it's going to be detected as inline\n\t\t\t// and the shortcode won't be replaced.\n\t\t\tif (\n\t\t\t\tmode === 'AUTO' &&\n\t\t\t\tisEmpty( value ) &&\n\t\t\t\tisShortcode( plainText )\n\t\t\t) {\n\t\t\t\tmode = 'BLOCKS';\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t__unstableEmbedURLOnPaste &&\n\t\t\t\tisEmpty( value ) &&\n\t\t\t\tisURL( plainText.trim() )\n\t\t\t) {\n\t\t\t\tmode = 'BLOCKS';\n\t\t\t}\n\n\t\t\tconst content = pasteHandler( {\n\t\t\t\tHTML: html,\n\t\t\t\tplainText,\n\t\t\t\tmode,\n\t\t\t\ttagName,\n\t\t\t\tpreserveWhiteSpace,\n\t\t\t} );\n\n\t\t\tif ( typeof content === 'string' ) {\n\t\t\t\tlet valueToInsert = create( { html: content } );\n\n\t\t\t\t// If the content should be multiline, we should process text\n\t\t\t\t// separated by a line break as separate lines.\n\t\t\t\tvalueToInsert = adjustLines( valueToInsert, !! multilineTag );\n\n\t\t\t\taddActiveFormats( valueToInsert, value.activeFormats );\n\t\t\t\tonChange( insert( value, valueToInsert ) );\n\t\t\t} else if ( content.length > 0 ) {\n\t\t\t\tif ( onReplace && isEmpty( value ) ) {\n\t\t\t\t\tonReplace( content, content.length - 1, -1 );\n\t\t\t\t} else {\n\t\t\t\t\tsplitValue( {\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tpastedBlocks: content,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t\tonSplitMiddle,\n\t\t\t\t\t\tmultilineTag,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'paste', _onPaste );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'paste', _onPaste );\n\t\t};\n\t}, [] );\n}\n\n/**\n * Normalizes a given string of HTML to remove the Windows-specific \"Fragment\"\n * comments and any preceding and trailing content.\n *\n * @param {string} html the html to be normalized\n * @return {string} the normalized html\n */\nfunction removeWindowsFragments( html ) {\n\tconst startStr = '<!--StartFragment-->';\n\tconst startIdx = html.indexOf( startStr );\n\tif ( startIdx > -1 ) {\n\t\thtml = html.substring( startIdx + startStr.length );\n\t} else {\n\t\t// No point looking for EndFragment\n\t\treturn html;\n\t}\n\n\tconst endStr = '<!--EndFragment-->';\n\tconst endIdx = html.indexOf( endStr );\n\tif ( endIdx > -1 ) {\n\t\thtml = html.substring( 0, endIdx );\n\t}\n\n\treturn html;\n}\n\n/**\n * Removes the charset meta tag inserted by Chromium.\n * See:\n * - https://github.com/WordPress/gutenberg/issues/33585\n * - https://bugs.chromium.org/p/chromium/issues/detail?id=1264616#c4\n *\n * @param {string} html the html to be stripped of the meta tag.\n * @return {string} the cleaned html\n */\nfunction removeCharsetMetaTag( html ) {\n\tconst metaTag = `<meta charset='utf-8'>`;\n\n\tif ( html.startsWith( metaTag ) ) {\n\t\treturn html.slice( metaTag.length );\n\t}\n\n\treturn html;\n}\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\nimport { insert, isCollapsed } from '@wordpress/rich-text';\nimport { useDispatch } from '@wordpress/data';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * When typing over a selection, the selection will we wrapped by a matching\n * character pair. The second character is optional, it defaults to the first\n * character.\n *\n * @type {string[]} Array of character pairs.\n */\nconst wrapSelectionSettings = [ '`', '\"', \"'\", '“”', '‘’' ];\n\nexport function useBeforeInputRules( props ) {\n\tconst {\n\t\t__unstableMarkLastChangeAsPersistent,\n\t\t__unstableMarkAutomaticChange,\n\t} = useDispatch( blockEditorStore );\n\tconst propsRef = useRef( props );\n\tpropsRef.current = props;\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onInput( event ) {\n\t\t\tconst { inputType, data } = event;\n\t\t\tconst { value, onChange } = propsRef.current;\n\n\t\t\t// Only run the rules when inserting text.\n\t\t\tif ( inputType !== 'insertText' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isCollapsed( value ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst pair = applyFilters(\n\t\t\t\t'blockEditor.wrapSelectionSettings',\n\t\t\t\twrapSelectionSettings\n\t\t\t).find(\n\t\t\t\t( [ startChar, endChar ] ) =>\n\t\t\t\t\tstartChar === data || endChar === data\n\t\t\t);\n\n\t\t\tif ( ! pair ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst [ startChar, endChar = startChar ] = pair;\n\t\t\tconst start = value.start;\n\t\t\tconst end = value.end + startChar.length;\n\n\t\t\tlet newValue = insert( value, startChar, start, start );\n\t\t\tnewValue = insert( newValue, endChar, end, end );\n\n\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\tonChange( newValue );\n\t\t\t__unstableMarkAutomaticChange();\n\n\t\t\tconst init = {};\n\n\t\t\tfor ( const key in event ) {\n\t\t\t\tinit[ key ] = event[ key ];\n\t\t\t}\n\n\t\t\tinit.data = endChar;\n\n\t\t\tconst { ownerDocument } = element;\n\t\t\tconst { defaultView } = ownerDocument;\n\t\t\tconst newEvent = new defaultView.InputEvent( 'input', init );\n\n\t\t\t// Dispatch an `input` event with the new data. This will trigger the\n\t\t\t// input rules.\n\t\t\t// Postpone the `input` to the next event loop tick so that the dispatch\n\t\t\t// doesn't happen synchronously in the middle of `beforeinput` dispatch.\n\t\t\t// This is closer to how native `input` event would be timed, and also\n\t\t\t// makes sure that the `input` event is dispatched only after the `onChange`\n\t\t\t// call few lines above has fully updated the data store state and rerendered\n\t\t\t// all affected components.\n\t\t\twindow.queueMicrotask( () => {\n\t\t\t\tevent.target.dispatchEvent( newEvent );\n\t\t\t} );\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\telement.addEventListener( 'beforeinput', onInput );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'beforeinput', onInput );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\nimport { insert, toHTMLString } from '@wordpress/rich-text';\nimport { getBlockTransforms, findTransform } from '@wordpress/blocks';\nimport { useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { preventEventDiscovery } from './prevent-event-discovery';\nimport {\n\tretrieveSelectedAttribute,\n\tSTART_OF_SELECTED_AREA,\n} from '../../utils/selection';\n\nfunction findSelection( blocks ) {\n\tlet i = blocks.length;\n\n\twhile ( i-- ) {\n\t\tconst attributeKey = retrieveSelectedAttribute(\n\t\t\tblocks[ i ].attributes\n\t\t);\n\n\t\tif ( attributeKey ) {\n\t\t\tblocks[ i ].attributes[ attributeKey ] = blocks[ i ].attributes[\n\t\t\t\tattributeKey\n\t\t\t].replace( START_OF_SELECTED_AREA, '' );\n\t\t\treturn [ blocks[ i ].clientId, attributeKey, 0, 0 ];\n\t\t}\n\n\t\tconst nestedSelection = findSelection( blocks[ i ].innerBlocks );\n\n\t\tif ( nestedSelection ) {\n\t\t\treturn nestedSelection;\n\t\t}\n\t}\n\n\treturn [];\n}\n\nexport function useInputRules( props ) {\n\tconst {\n\t\t__unstableMarkLastChangeAsPersistent,\n\t\t__unstableMarkAutomaticChange,\n\t} = useDispatch( blockEditorStore );\n\tconst propsRef = useRef( props );\n\tpropsRef.current = props;\n\treturn useRefEffect( ( element ) => {\n\t\tfunction inputRule() {\n\t\t\tconst { getValue, onReplace, selectionChange } = propsRef.current;\n\n\t\t\tif ( ! onReplace ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// We must use getValue() here because value may be update\n\t\t\t// asynchronously.\n\t\t\tconst value = getValue();\n\t\t\tconst { start, text } = value;\n\t\t\tconst characterBefore = text.slice( start - 1, start );\n\n\t\t\t// The character right before the caret must be a plain space.\n\t\t\tif ( characterBefore !== ' ' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst trimmedTextBefore = text.slice( 0, start ).trim();\n\t\t\tconst prefixTransforms = getBlockTransforms( 'from' ).filter(\n\t\t\t\t( { type } ) => type === 'prefix'\n\t\t\t);\n\t\t\tconst transformation = findTransform(\n\t\t\t\tprefixTransforms,\n\t\t\t\t( { prefix } ) => {\n\t\t\t\t\treturn trimmedTextBefore === prefix;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif ( ! transformation ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst content = toHTMLString( {\n\t\t\t\tvalue: insert( value, START_OF_SELECTED_AREA, 0, start ),\n\t\t\t} );\n\t\t\tconst block = transformation.transform( content );\n\n\t\t\tselectionChange( ...findSelection( [ block ] ) );\n\t\t\tonReplace( [ block ] );\n\t\t\t__unstableMarkAutomaticChange();\n\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction onInput( event ) {\n\t\t\tconst { inputType, type } = event;\n\t\t\tconst {\n\t\t\t\tgetValue,\n\t\t\t\tonChange,\n\t\t\t\t__unstableAllowPrefixTransformations,\n\t\t\t\tformatTypes,\n\t\t\t} = propsRef.current;\n\n\t\t\t// Only run input rules when inserting text.\n\t\t\tif ( inputType !== 'insertText' && type !== 'compositionend' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( __unstableAllowPrefixTransformations && inputRule ) {\n\t\t\t\tif ( inputRule() ) return;\n\t\t\t}\n\n\t\t\tconst value = getValue();\n\t\t\tconst transformed = formatTypes.reduce(\n\t\t\t\t( accumlator, { __unstableInputRule } ) => {\n\t\t\t\t\tif ( __unstableInputRule ) {\n\t\t\t\t\t\taccumlator = __unstableInputRule( accumlator );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn accumlator;\n\t\t\t\t},\n\t\t\t\tpreventEventDiscovery( value )\n\t\t\t);\n\n\t\t\tif ( transformed !== value ) {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t\tonChange( {\n\t\t\t\t\t...transformed,\n\t\t\t\t\tactiveFormats: value.activeFormats,\n\t\t\t\t} );\n\t\t\t\t__unstableMarkAutomaticChange();\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'input', onInput );\n\t\telement.addEventListener( 'compositionend', onInput );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'input', onInput );\n\t\t\telement.removeEventListener( 'compositionend', onInput );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { insert } from '@wordpress/rich-text';\n\nexport function preventEventDiscovery( value ) {\n\tconst searchText = 'tales of gutenberg';\n\tconst addText =\n\t\t' 🐡🐢🦀🐤🦋🐘🐧🐹🦁🦄🦍🐼🐿🎃🐴🐝🐆🦕🦔🌱🍇π🍌🐉💧🥨🌌🍂🍠🥦🥚🥝🎟🥥🥒🛵🥖🍒🍯🎾🎲🐺🐚🐮⌛️';\n\tconst { start, text } = value;\n\n\tif ( start < searchText.length ) {\n\t\treturn value;\n\t}\n\n\tconst charactersBefore = text.slice( start - searchText.length, start );\n\n\tif ( charactersBefore.toLowerCase() !== searchText ) {\n\t\treturn value;\n\t}\n\n\treturn insert( value, addText );\n}\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\nimport { DELETE, BACKSPACE } from '@wordpress/keycodes';\nimport { isCollapsed, isEmpty } from '@wordpress/rich-text';\n\nexport function useDelete( props ) {\n\tconst propsRef = useRef( props );\n\tpropsRef.current = props;\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onKeyDown( event ) {\n\t\t\tconst { keyCode } = event;\n\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { value, onMerge, onRemove } = propsRef.current;\n\n\t\t\tif ( keyCode === DELETE || keyCode === BACKSPACE ) {\n\t\t\t\tconst { start, end, text } = value;\n\t\t\t\tconst isReverse = keyCode === BACKSPACE;\n\t\t\t\tconst hasActiveFormats =\n\t\t\t\t\tvalue.activeFormats && !! value.activeFormats.length;\n\n\t\t\t\t// Only process delete if the key press occurs at an uncollapsed edge.\n\t\t\t\tif (\n\t\t\t\t\t! isCollapsed( value ) ||\n\t\t\t\t\thasActiveFormats ||\n\t\t\t\t\t( isReverse && start !== 0 ) ||\n\t\t\t\t\t( ! isReverse && end !== text.length )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( onMerge ) {\n\t\t\t\t\tonMerge( ! isReverse );\n\t\t\t\t}\n\n\t\t\t\t// Only handle remove on Backspace. This serves dual-purpose of being\n\t\t\t\t// an intentional user interaction distinguishing between Backspace and\n\t\t\t\t// Delete to remove the empty field, but also to avoid merge & remove\n\t\t\t\t// causing destruction of two fields (merge, then removed merged).\n\t\t\t\tif ( onRemove && isEmpty( value ) && isReverse ) {\n\t\t\t\t\tonRemove( ! isReverse );\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'keydown', onKeyDown );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\nimport { ENTER } from '@wordpress/keycodes';\nimport {\n\tinsert,\n\t__unstableIsEmptyLine as isEmptyLine,\n\t__unstableInsertLineSeparator as insertLineSeparator,\n} from '@wordpress/rich-text';\nimport { getBlockTransforms, findTransform } from '@wordpress/blocks';\nimport { useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { splitValue } from './split-value';\n\nexport function useEnter( props ) {\n\tconst { __unstableMarkAutomaticChange } = useDispatch( blockEditorStore );\n\tconst propsRef = useRef( props );\n\tpropsRef.current = props;\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onKeyDown( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( event.keyCode !== ENTER ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tremoveEditorOnlyFormats,\n\t\t\t\tvalue,\n\t\t\t\tonReplace,\n\t\t\t\tonSplit,\n\t\t\t\tonSplitMiddle,\n\t\t\t\tmultilineTag,\n\t\t\t\tonChange,\n\t\t\t\tdisableLineBreaks,\n\t\t\t\tonSplitAtEnd,\n\t\t\t} = propsRef.current;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tconst _value = { ...value };\n\t\t\t_value.formats = removeEditorOnlyFormats( value );\n\t\t\tconst canSplit = onReplace && onSplit;\n\n\t\t\tif ( onReplace ) {\n\t\t\t\tconst transforms = getBlockTransforms( 'from' ).filter(\n\t\t\t\t\t( { type } ) => type === 'enter'\n\t\t\t\t);\n\t\t\t\tconst transformation = findTransform( transforms, ( item ) => {\n\t\t\t\t\treturn item.regExp.test( _value.text );\n\t\t\t\t} );\n\n\t\t\t\tif ( transformation ) {\n\t\t\t\t\tonReplace( [\n\t\t\t\t\t\ttransformation.transform( {\n\t\t\t\t\t\t\tcontent: _value.text,\n\t\t\t\t\t\t} ),\n\t\t\t\t\t] );\n\t\t\t\t\t__unstableMarkAutomaticChange();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( multilineTag ) {\n\t\t\t\tif ( event.shiftKey ) {\n\t\t\t\t\tif ( ! disableLineBreaks ) {\n\t\t\t\t\t\tonChange( insert( _value, '\\n' ) );\n\t\t\t\t\t}\n\t\t\t\t} else if ( canSplit && isEmptyLine( _value ) ) {\n\t\t\t\t\tsplitValue( {\n\t\t\t\t\t\tvalue: _value,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t\tonSplitMiddle,\n\t\t\t\t\t\tmultilineTag,\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tonChange( insertLineSeparator( _value ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst { text, start, end } = _value;\n\t\t\t\tconst canSplitAtEnd =\n\t\t\t\t\tonSplitAtEnd && start === end && end === text.length;\n\n\t\t\t\tif ( event.shiftKey || ( ! canSplit && ! canSplitAtEnd ) ) {\n\t\t\t\t\tif ( ! disableLineBreaks ) {\n\t\t\t\t\t\tonChange( insert( _value, '\\n' ) );\n\t\t\t\t\t}\n\t\t\t\t} else if ( ! canSplit && canSplitAtEnd ) {\n\t\t\t\t\tonSplitAtEnd();\n\t\t\t\t} else if ( canSplit ) {\n\t\t\t\t\tsplitValue( {\n\t\t\t\t\t\tvalue: _value,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t\tonSplitMiddle,\n\t\t\t\t\t\tmultilineTag,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'keydown', onKeyDown );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as richTextStore } from '@wordpress/rich-text';\n\nfunction formatTypesSelector( select ) {\n\treturn select( richTextStore ).getFormatTypes();\n}\n\n/**\n * Set of all interactive content tags.\n *\n * @see https://html.spec.whatwg.org/multipage/dom.html#interactive-content\n */\nconst interactiveContentTags = new Set( [\n\t'a',\n\t'audio',\n\t'button',\n\t'details',\n\t'embed',\n\t'iframe',\n\t'input',\n\t'label',\n\t'select',\n\t'textarea',\n\t'video',\n] );\n\nfunction prefixSelectKeys( selected, prefix ) {\n\tif ( typeof selected !== 'object' ) return { [ prefix ]: selected };\n\treturn Object.fromEntries(\n\t\tObject.entries( selected ).map( ( [ key, value ] ) => [\n\t\t\t`${ prefix }.${ key }`,\n\t\t\tvalue,\n\t\t] )\n\t);\n}\n\nfunction getPrefixedSelectKeys( selected, prefix ) {\n\tif ( selected[ prefix ] ) return selected[ prefix ];\n\treturn Object.keys( selected )\n\t\t.filter( ( key ) => key.startsWith( prefix + '.' ) )\n\t\t.reduce( ( accumulator, key ) => {\n\t\t\taccumulator[ key.slice( prefix.length + 1 ) ] = selected[ key ];\n\t\t\treturn accumulator;\n\t\t}, {} );\n}\n\n/**\n * This hook provides RichText with the `formatTypes` and its derived props from\n * experimental format type settings.\n *\n * @param {Object}  $0                              Options\n * @param {string}  $0.clientId                     Block client ID.\n * @param {string}  $0.identifier                   Block attribute.\n * @param {boolean} $0.withoutInteractiveFormatting Whether to clean the interactive formattings or not.\n * @param {Array}   $0.allowedFormats               Allowed formats\n */\nexport function useFormatTypes( {\n\tclientId,\n\tidentifier,\n\twithoutInteractiveFormatting,\n\tallowedFormats,\n} ) {\n\tconst allFormatTypes = useSelect( formatTypesSelector, [] );\n\tconst formatTypes = useMemo( () => {\n\t\treturn allFormatTypes.filter( ( { name, tagName } ) => {\n\t\t\tif ( allowedFormats && ! allowedFormats.includes( name ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\twithoutInteractiveFormatting &&\n\t\t\t\tinteractiveContentTags.has( tagName )\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t} );\n\t}, [ allFormatTypes, allowedFormats, interactiveContentTags ] );\n\tconst keyedSelected = useSelect(\n\t\t( select ) =>\n\t\t\tformatTypes.reduce( ( accumulator, type ) => {\n\t\t\t\tif ( ! type.__experimentalGetPropsForEditableTreePreparation ) {\n\t\t\t\t\treturn accumulator;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...accumulator,\n\t\t\t\t\t...prefixSelectKeys(\n\t\t\t\t\t\ttype.__experimentalGetPropsForEditableTreePreparation(\n\t\t\t\t\t\t\tselect,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trichTextIdentifier: identifier,\n\t\t\t\t\t\t\t\tblockClientId: clientId,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttype.name\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t}, {} ),\n\t\t[ formatTypes, clientId, identifier ]\n\t);\n\tconst dispatch = useDispatch();\n\tconst prepareHandlers = [];\n\tconst valueHandlers = [];\n\tconst changeHandlers = [];\n\tconst dependencies = [];\n\n\tfor ( const key in keyedSelected ) {\n\t\tdependencies.push( keyedSelected[ key ] );\n\t}\n\n\tformatTypes.forEach( ( type ) => {\n\t\tif ( type.__experimentalCreatePrepareEditableTree ) {\n\t\t\tconst handler = type.__experimentalCreatePrepareEditableTree(\n\t\t\t\tgetPrefixedSelectKeys( keyedSelected, type.name ),\n\t\t\t\t{\n\t\t\t\t\trichTextIdentifier: identifier,\n\t\t\t\t\tblockClientId: clientId,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif ( type.__experimentalCreateOnChangeEditableValue ) {\n\t\t\t\tvalueHandlers.push( handler );\n\t\t\t} else {\n\t\t\t\tprepareHandlers.push( handler );\n\t\t\t}\n\t\t}\n\n\t\tif ( type.__experimentalCreateOnChangeEditableValue ) {\n\t\t\tlet dispatchers = {};\n\n\t\t\tif ( type.__experimentalGetPropsForEditableTreeChangeHandler ) {\n\t\t\t\tdispatchers =\n\t\t\t\t\ttype.__experimentalGetPropsForEditableTreeChangeHandler(\n\t\t\t\t\t\tdispatch,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trichTextIdentifier: identifier,\n\t\t\t\t\t\t\tblockClientId: clientId,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst selected = getPrefixedSelectKeys( keyedSelected, type.name );\n\t\t\tchangeHandlers.push(\n\t\t\t\ttype.__experimentalCreateOnChangeEditableValue(\n\t\t\t\t\t{\n\t\t\t\t\t\t...( typeof selected === 'object' ? selected : {} ),\n\t\t\t\t\t\t...dispatchers,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\trichTextIdentifier: identifier,\n\t\t\t\t\t\tblockClientId: clientId,\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t} );\n\n\treturn {\n\t\tformatTypes,\n\t\tprepareHandlers,\n\t\tvalueHandlers,\n\t\tchangeHandlers,\n\t\tdependencies,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\n\nexport function useShortcuts( keyboardShortcuts ) {\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onKeyDown( event ) {\n\t\t\tfor ( const keyboardShortcut of keyboardShortcuts.current ) {\n\t\t\t\tkeyboardShortcut( event );\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'keydown', onKeyDown );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\n\nexport function useInputEvents( inputEvents ) {\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onInput( event ) {\n\t\t\tfor ( const keyboardShortcut of inputEvents.current ) {\n\t\t\t\tkeyboardShortcut( event );\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'input', onInput );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'input', onInput );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * When the browser is about to auto correct, add an undo level so the user can\n * revert the change.\n */\nexport function useInsertReplacementText() {\n\tconst { __unstableMarkLastChangeAsPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onInput( event ) {\n\t\t\tif ( event.inputType === 'insertReplacementText' ) {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'beforeinput', onInput );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'beforeinput', onInput );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { SPACE } from '@wordpress/keycodes';\nimport { insert } from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport function useFirefoxCompat( props ) {\n\tconst propsRef = useRef( props );\n\tpropsRef.current = props;\n\n\tconst { isMultiSelecting } = useSelect( blockEditorStore );\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onFocus() {\n\t\t\tif ( ! isMultiSelecting() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// This is a little hack to work around focus issues with nested\n\t\t\t// editable elements in Firefox. For some reason the editable child\n\t\t\t// element sometimes regains focus, while it should not be focusable\n\t\t\t// and focus should remain on the editable parent element.\n\t\t\t// To do: try to find the cause of the shifting focus.\n\t\t\tconst parentEditable = element.parentElement.closest(\n\t\t\t\t'[contenteditable=\"true\"]'\n\t\t\t);\n\n\t\t\tif ( parentEditable ) {\n\t\t\t\tparentEditable.focus();\n\t\t\t}\n\t\t}\n\n\t\t// If a contenteditable element is inside a button/summary element,\n\t\t// it is not possible to type a space in Firefox. Therefore, cancel\n\t\t// the default event and insert a space explicitly.\n\t\t// See: https://bugzilla.mozilla.org/show_bug.cgi?id=1822860\n\t\tfunction onKeyDown( event ) {\n\t\t\tif ( event.keyCode !== SPACE ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( element.closest( 'button, summary' ) === null ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { value, onChange } = propsRef.current;\n\t\t\tonChange( insert( value, ' ' ) );\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\telement.addEventListener( 'focus', onFocus );\n\t\telement.addEventListener( 'keydown', onKeyDown );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'focus', onFocus );\n\t\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { getActiveFormat, getActiveObject } from '@wordpress/rich-text';\n\nexport default function FormatEdit( {\n\tformatTypes,\n\tonChange,\n\tonFocus,\n\tvalue,\n\tforwardedRef,\n} ) {\n\treturn formatTypes.map( ( settings ) => {\n\t\tconst { name, edit: Edit } = settings;\n\n\t\tif ( ! Edit ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst activeFormat = getActiveFormat( value, name );\n\t\tconst isActive = activeFormat !== undefined;\n\t\tconst activeObject = getActiveObject( value );\n\t\tconst isObjectActive =\n\t\t\tactiveObject !== undefined && activeObject.type === name;\n\n\t\treturn (\n\t\t\t<Edit\n\t\t\t\tkey={ name }\n\t\t\t\tisActive={ isActive }\n\t\t\t\tactiveAttributes={\n\t\t\t\t\tisActive ? activeFormat.attributes || {} : {}\n\t\t\t\t}\n\t\t\t\tisObjectActive={ isObjectActive }\n\t\t\t\tactiveObjectAttributes={\n\t\t\t\t\tisObjectActive ? activeObject.attributes || {} : {}\n\t\t\t\t}\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tonFocus={ onFocus }\n\t\t\t\tcontentRef={ forwardedRef }\n\t\t\t/>\n\t\t);\n\t} );\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tRawHTML,\n\tuseRef,\n\tuseCallback,\n\tforwardRef,\n\tcreateContext,\n} from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { children as childrenSource } from '@wordpress/blocks';\nimport { useInstanceId, useMergeRefs } from '@wordpress/compose';\nimport {\n\t__unstableUseRichText as useRichText,\n\t__unstableCreateElement,\n\tremoveFormat,\n} from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\nimport { Popover } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditorAutocompleteProps } from '../autocomplete';\nimport { useBlockEditContext } from '../block-edit';\nimport FormatToolbarContainer from './format-toolbar-container';\nimport { store as blockEditorStore } from '../../store';\nimport { useUndoAutomaticChange } from './use-undo-automatic-change';\nimport { useMarkPersistent } from './use-mark-persistent';\nimport { usePasteHandler } from './use-paste-handler';\nimport { useBeforeInputRules } from './use-before-input-rules';\nimport { useInputRules } from './use-input-rules';\nimport { useDelete } from './use-delete';\nimport { useEnter } from './use-enter';\nimport { useFormatTypes } from './use-format-types';\nimport { useRemoveBrowserShortcuts } from './use-remove-browser-shortcuts';\nimport { useShortcuts } from './use-shortcuts';\nimport { useInputEvents } from './use-input-events';\nimport { useInsertReplacementText } from './use-insert-replacement-text';\nimport { useFirefoxCompat } from './use-firefox-compat';\nimport FormatEdit from './format-edit';\nimport { getMultilineTag, getAllowedFormats } from './utils';\n\nexport const keyboardShortcutContext = createContext();\nexport const inputEventContext = createContext();\n\n/**\n * Removes props used for the native version of RichText so that they are not\n * passed to the DOM element and log warnings.\n *\n * @param {Object} props Props to filter.\n *\n * @return {Object} Filtered props.\n */\nfunction removeNativeProps( props ) {\n\tconst {\n\t\t__unstableMobileNoFocusOnMount,\n\t\tdeleteEnter,\n\t\tplaceholderTextColor,\n\t\ttextAlign,\n\t\tselectionColor,\n\t\ttagsToEliminate,\n\t\tdisableEditingMenu,\n\t\tfontSize,\n\t\tfontFamily,\n\t\tfontWeight,\n\t\tfontStyle,\n\t\tminWidth,\n\t\tmaxWidth,\n\t\tsetRef,\n\t\tdisableSuggestions,\n\t\tdisableAutocorrection,\n\t\t...restProps\n\t} = props;\n\treturn restProps;\n}\n\nfunction RichTextWrapper(\n\t{\n\t\tchildren,\n\t\ttagName = 'div',\n\t\tvalue: originalValue = '',\n\t\tonChange: originalOnChange,\n\t\tisSelected: originalIsSelected,\n\t\tmultiline,\n\t\tinlineToolbar,\n\t\twrapperClassName,\n\t\tautocompleters,\n\t\tonReplace,\n\t\tplaceholder,\n\t\tallowedFormats,\n\t\twithoutInteractiveFormatting,\n\t\tonRemove,\n\t\tonMerge,\n\t\tonSplit,\n\t\t__unstableOnSplitAtEnd: onSplitAtEnd,\n\t\t__unstableOnSplitMiddle: onSplitMiddle,\n\t\tidentifier,\n\t\tpreserveWhiteSpace,\n\t\t__unstablePastePlainText: pastePlainText,\n\t\t__unstableEmbedURLOnPaste,\n\t\t__unstableDisableFormats: disableFormats,\n\t\tdisableLineBreaks,\n\t\t__unstableAllowPrefixTransformations,\n\t\t...props\n\t},\n\tforwardedRef\n) {\n\tif ( multiline ) {\n\t\tdeprecated( 'wp.blockEditor.RichText multiline prop', {\n\t\t\tsince: '6.1',\n\t\t\tversion: '6.3',\n\t\t\talternative: 'nested blocks (InnerBlocks)',\n\t\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/nested-blocks-inner-blocks/',\n\t\t} );\n\t}\n\n\tconst instanceId = useInstanceId( RichTextWrapper );\n\n\tidentifier = identifier || instanceId;\n\tprops = removeNativeProps( props );\n\n\tconst anchorRef = useRef();\n\tconst { clientId } = useBlockEditContext();\n\tconst selector = ( select ) => {\n\t\tconst { getSelectionStart, getSelectionEnd } =\n\t\t\tselect( blockEditorStore );\n\t\tconst selectionStart = getSelectionStart();\n\t\tconst selectionEnd = getSelectionEnd();\n\n\t\tlet isSelected;\n\n\t\tif ( originalIsSelected === undefined ) {\n\t\t\tisSelected =\n\t\t\t\tselectionStart.clientId === clientId &&\n\t\t\t\tselectionEnd.clientId === clientId &&\n\t\t\t\tselectionStart.attributeKey === identifier;\n\t\t} else if ( originalIsSelected ) {\n\t\t\tisSelected = selectionStart.clientId === clientId;\n\t\t}\n\n\t\treturn {\n\t\t\tselectionStart: isSelected ? selectionStart.offset : undefined,\n\t\t\tselectionEnd: isSelected ? selectionEnd.offset : undefined,\n\t\t\tisSelected,\n\t\t};\n\t};\n\t// This selector must run on every render so the right selection state is\n\t// retreived from the store on merge.\n\t// To do: fix this somehow.\n\tconst { selectionStart, selectionEnd, isSelected } = useSelect( selector );\n\tconst { getSelectionStart, getSelectionEnd, getBlockRootClientId } =\n\t\tuseSelect( blockEditorStore );\n\tconst { selectionChange } = useDispatch( blockEditorStore );\n\tconst multilineTag = getMultilineTag( multiline );\n\tconst adjustedAllowedFormats = getAllowedFormats( {\n\t\tallowedFormats,\n\t\tdisableFormats,\n\t} );\n\tconst hasFormats =\n\t\t! adjustedAllowedFormats || adjustedAllowedFormats.length > 0;\n\tlet adjustedValue = originalValue;\n\tlet adjustedOnChange = originalOnChange;\n\n\t// Handle deprecated format.\n\tif ( Array.isArray( originalValue ) ) {\n\t\tdeprecated( 'wp.blockEditor.RichText value prop as children type', {\n\t\t\tsince: '6.1',\n\t\t\tversion: '6.3',\n\t\t\talternative: 'value prop as string',\n\t\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t\t} );\n\n\t\tadjustedValue = childrenSource.toHTML( originalValue );\n\t\tadjustedOnChange = ( newValue ) =>\n\t\t\toriginalOnChange(\n\t\t\t\tchildrenSource.fromDOM(\n\t\t\t\t\t__unstableCreateElement( document, newValue ).childNodes\n\t\t\t\t)\n\t\t\t);\n\t}\n\n\tconst onSelectionChange = useCallback(\n\t\t( start, end ) => {\n\t\t\tconst selection = {};\n\t\t\tconst unset = start === undefined && end === undefined;\n\n\t\t\tif ( typeof start === 'number' || unset ) {\n\t\t\t\t// If we are only setting the start (or the end below), which\n\t\t\t\t// means a partial selection, and we're not updating a selection\n\t\t\t\t// with the same client ID, abort. This means the selected block\n\t\t\t\t// is a parent block.\n\t\t\t\tif (\n\t\t\t\t\tend === undefined &&\n\t\t\t\t\tgetBlockRootClientId( clientId ) !==\n\t\t\t\t\t\tgetBlockRootClientId( getSelectionEnd().clientId )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tselection.start = {\n\t\t\t\t\tclientId,\n\t\t\t\t\tattributeKey: identifier,\n\t\t\t\t\toffset: start,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif ( typeof end === 'number' || unset ) {\n\t\t\t\tif (\n\t\t\t\t\tstart === undefined &&\n\t\t\t\t\tgetBlockRootClientId( clientId ) !==\n\t\t\t\t\t\tgetBlockRootClientId( getSelectionStart().clientId )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tselection.end = {\n\t\t\t\t\tclientId,\n\t\t\t\t\tattributeKey: identifier,\n\t\t\t\t\toffset: end,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tselectionChange( selection );\n\t\t},\n\t\t[ clientId, identifier ]\n\t);\n\n\tconst {\n\t\tformatTypes,\n\t\tprepareHandlers,\n\t\tvalueHandlers,\n\t\tchangeHandlers,\n\t\tdependencies,\n\t} = useFormatTypes( {\n\t\tclientId,\n\t\tidentifier,\n\t\twithoutInteractiveFormatting,\n\t\tallowedFormats: adjustedAllowedFormats,\n\t} );\n\n\tfunction addEditorOnlyFormats( value ) {\n\t\treturn valueHandlers.reduce(\n\t\t\t( accumulator, fn ) => fn( accumulator, value.text ),\n\t\t\tvalue.formats\n\t\t);\n\t}\n\n\tfunction removeEditorOnlyFormats( value ) {\n\t\tformatTypes.forEach( ( formatType ) => {\n\t\t\t// Remove formats created by prepareEditableTree, because they are editor only.\n\t\t\tif ( formatType.__experimentalCreatePrepareEditableTree ) {\n\t\t\t\tvalue = removeFormat(\n\t\t\t\t\tvalue,\n\t\t\t\t\tformatType.name,\n\t\t\t\t\t0,\n\t\t\t\t\tvalue.text.length\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\treturn value.formats;\n\t}\n\n\tfunction addInvisibleFormats( value ) {\n\t\treturn prepareHandlers.reduce(\n\t\t\t( accumulator, fn ) => fn( accumulator, value.text ),\n\t\t\tvalue.formats\n\t\t);\n\t}\n\n\tconst {\n\t\tvalue,\n\t\tgetValue,\n\t\tonChange,\n\t\tref: richTextRef,\n\t} = useRichText( {\n\t\tvalue: adjustedValue,\n\t\tonChange( html, { __unstableFormats, __unstableText } ) {\n\t\t\tadjustedOnChange( html );\n\t\t\tObject.values( changeHandlers ).forEach( ( changeHandler ) => {\n\t\t\t\tchangeHandler( __unstableFormats, __unstableText );\n\t\t\t} );\n\t\t},\n\t\tselectionStart,\n\t\tselectionEnd,\n\t\tonSelectionChange,\n\t\tplaceholder,\n\t\t__unstableIsSelected: isSelected,\n\t\t__unstableMultilineTag: multilineTag,\n\t\t__unstableDisableFormats: disableFormats,\n\t\tpreserveWhiteSpace,\n\t\t__unstableDependencies: [ ...dependencies, tagName ],\n\t\t__unstableAfterParse: addEditorOnlyFormats,\n\t\t__unstableBeforeSerialize: removeEditorOnlyFormats,\n\t\t__unstableAddInvisibleFormats: addInvisibleFormats,\n\t} );\n\tconst autocompleteProps = useBlockEditorAutocompleteProps( {\n\t\tonReplace,\n\t\tcompleters: autocompleters,\n\t\trecord: value,\n\t\tonChange,\n\t} );\n\n\tuseMarkPersistent( { html: adjustedValue, value } );\n\n\tconst keyboardShortcuts = useRef( new Set() );\n\tconst inputEvents = useRef( new Set() );\n\n\tfunction onFocus() {\n\t\tanchorRef.current?.focus();\n\t}\n\n\tconst TagName = tagName;\n\treturn (\n\t\t<>\n\t\t\t{ isSelected && (\n\t\t\t\t<keyboardShortcutContext.Provider value={ keyboardShortcuts }>\n\t\t\t\t\t<inputEventContext.Provider value={ inputEvents }>\n\t\t\t\t\t\t<Popover.__unstableSlotNameProvider value=\"__unstable-block-tools-after\">\n\t\t\t\t\t\t\t{ children &&\n\t\t\t\t\t\t\t\tchildren( { value, onChange, onFocus } ) }\n\n\t\t\t\t\t\t\t<FormatEdit\n\t\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\t\tformatTypes={ formatTypes }\n\t\t\t\t\t\t\t\tforwardedRef={ anchorRef }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Popover.__unstableSlotNameProvider>\n\t\t\t\t\t</inputEventContext.Provider>\n\t\t\t\t</keyboardShortcutContext.Provider>\n\t\t\t) }\n\t\t\t{ isSelected && hasFormats && (\n\t\t\t\t<FormatToolbarContainer\n\t\t\t\t\tinline={ inlineToolbar }\n\t\t\t\t\teditableContentElement={ anchorRef.current }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<TagName\n\t\t\t\t// Overridable props.\n\t\t\t\trole=\"textbox\"\n\t\t\t\taria-multiline={ ! disableLineBreaks }\n\t\t\t\taria-label={ placeholder }\n\t\t\t\t{ ...props }\n\t\t\t\t{ ...autocompleteProps }\n\t\t\t\tref={ useMergeRefs( [\n\t\t\t\t\tforwardedRef,\n\t\t\t\t\tautocompleteProps.ref,\n\t\t\t\t\tprops.ref,\n\t\t\t\t\trichTextRef,\n\t\t\t\t\tuseBeforeInputRules( { value, onChange } ),\n\t\t\t\t\tuseInputRules( {\n\t\t\t\t\t\tgetValue,\n\t\t\t\t\t\tonChange,\n\t\t\t\t\t\t__unstableAllowPrefixTransformations,\n\t\t\t\t\t\tformatTypes,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tselectionChange,\n\t\t\t\t\t} ),\n\t\t\t\t\tuseInsertReplacementText(),\n\t\t\t\t\tuseRemoveBrowserShortcuts(),\n\t\t\t\t\tuseShortcuts( keyboardShortcuts ),\n\t\t\t\t\tuseInputEvents( inputEvents ),\n\t\t\t\t\tuseUndoAutomaticChange(),\n\t\t\t\t\tusePasteHandler( {\n\t\t\t\t\t\tisSelected,\n\t\t\t\t\t\tdisableFormats,\n\t\t\t\t\t\tonChange,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tformatTypes,\n\t\t\t\t\t\ttagName,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t\tonSplitMiddle,\n\t\t\t\t\t\t__unstableEmbedURLOnPaste,\n\t\t\t\t\t\tmultilineTag,\n\t\t\t\t\t\tpreserveWhiteSpace,\n\t\t\t\t\t\tpastePlainText,\n\t\t\t\t\t} ),\n\t\t\t\t\tuseDelete( {\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tonMerge,\n\t\t\t\t\t\tonRemove,\n\t\t\t\t\t} ),\n\t\t\t\t\tuseEnter( {\n\t\t\t\t\t\tremoveEditorOnlyFormats,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t\tonSplitMiddle,\n\t\t\t\t\t\tmultilineTag,\n\t\t\t\t\t\tonChange,\n\t\t\t\t\t\tdisableLineBreaks,\n\t\t\t\t\t\tonSplitAtEnd,\n\t\t\t\t\t} ),\n\t\t\t\t\tuseFirefoxCompat( { value, onChange } ),\n\t\t\t\t\tanchorRef,\n\t\t\t\t] ) }\n\t\t\t\tcontentEditable={ true }\n\t\t\t\tsuppressContentEditableWarning={ true }\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'block-editor-rich-text__editable',\n\t\t\t\t\tprops.className,\n\t\t\t\t\t'rich-text'\n\t\t\t\t) }\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nconst ForwardedRichTextContainer = forwardRef( RichTextWrapper );\n\nForwardedRichTextContainer.Content = ( {\n\tvalue,\n\ttagName: Tag,\n\tmultiline,\n\t...props\n} ) => {\n\t// Handle deprecated `children` and `node` sources.\n\tif ( Array.isArray( value ) ) {\n\t\tdeprecated( 'wp.blockEditor.RichText value prop as children type', {\n\t\t\tsince: '6.1',\n\t\t\tversion: '6.3',\n\t\t\talternative: 'value prop as string',\n\t\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t\t} );\n\n\t\tvalue = childrenSource.toHTML( value );\n\t}\n\n\tconst MultilineTag = getMultilineTag( multiline );\n\n\tif ( ! value && MultilineTag ) {\n\t\tvalue = `<${ MultilineTag }></${ MultilineTag }>`;\n\t}\n\n\tconst content = <RawHTML>{ value }</RawHTML>;\n\n\tif ( Tag ) {\n\t\tconst { format, ...restProps } = props;\n\t\treturn <Tag { ...restProps }>{ content }</Tag>;\n\t}\n\n\treturn content;\n};\n\nForwardedRichTextContainer.isEmpty = ( value ) => {\n\treturn ! value || value.length === 0;\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/rich-text/README.md\n */\nexport default ForwardedRichTextContainer;\nexport { RichTextShortcut } from './shortcut';\nexport { RichTextToolbarButton } from './toolbar-button';\nexport { __unstableRichTextInputEvent } from './input-event';\n","/**\n * WordPress dependencies\n */\nimport { useLayoutEffect, useRef } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport function useMarkPersistent( { html, value } ) {\n\tconst previousText = useRef();\n\tconst hasActiveFormats =\n\t\tvalue.activeFormats && !! value.activeFormats.length;\n\tconst { __unstableMarkLastChangeAsPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\n\t// Must be set synchronously to make sure it applies to the last change.\n\tuseLayoutEffect( () => {\n\t\t// Ignore mount.\n\t\tif ( ! previousText.current ) {\n\t\t\tpreviousText.current = value.text;\n\t\t\treturn;\n\t\t}\n\n\t\t// Text input, so don't create an undo level for every character.\n\t\t// Create an undo level after 1 second of no input.\n\t\tif ( previousText.current !== value.text ) {\n\t\t\tconst timeout = window.setTimeout( () => {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t}, 1000 );\n\t\t\tpreviousText.current = value.text;\n\t\t\treturn () => {\n\t\t\t\twindow.clearTimeout( timeout );\n\t\t\t};\n\t\t}\n\n\t\t__unstableMarkLastChangeAsPersistent();\n\t}, [ html, hasActiveFormats ] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { isKeyboardEvent } from '@wordpress/keycodes';\n\n/**\n * Hook to prevent default behaviors for key combinations otherwise handled\n * internally by RichText.\n *\n * @return {import('react').RefObject} The component to be rendered.\n */\nexport function useRemoveBrowserShortcuts() {\n\treturn useRefEffect( ( node ) => {\n\t\tfunction onKeydown( event ) {\n\t\t\tif (\n\t\t\t\tisKeyboardEvent.primary( event, 'z' ) ||\n\t\t\t\tisKeyboardEvent.primary( event, 'y' ) ||\n\t\t\t\tisKeyboardEvent.primaryShift( event, 'z' )\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t\tnode.addEventListener( 'keydown', onKeydown );\n\t\treturn () => {\n\t\t\tnode.addEventListener( 'keydown', onKeydown );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport RichText from '../rich-text';\n\nconst EditableText = forwardRef( ( props, ref ) => {\n\treturn (\n\t\t<RichText\n\t\t\tref={ ref }\n\t\t\t{ ...props }\n\t\t\t__unstableDisableFormats\n\t\t\tpreserveWhiteSpace\n\t\t/>\n\t);\n} );\n\nEditableText.Content = ( { value = '', tagName: Tag = 'div', ...props } ) => {\n\treturn <Tag { ...props }>{ value }</Tag>;\n};\n\n/**\n * Renders an editable text input in which text formatting is not allowed.\n */\nexport default EditableText;\n","/**\n * External dependencies\n */\nimport TextareaAutosize from 'react-autosize-textarea';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport EditableText from '../editable-text';\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/plain-text/README.md\n */\nconst PlainText = forwardRef( ( { __experimentalVersion, ...props }, ref ) => {\n\tif ( __experimentalVersion === 2 ) {\n\t\treturn <EditableText ref={ ref } { ...props } />;\n\t}\n\n\tconst { className, onChange, ...remainingProps } = props;\n\n\treturn (\n\t\t<TextareaAutosize\n\t\t\tref={ ref }\n\t\t\tclassName={ classnames( 'block-editor-plain-text', className ) }\n\t\t\tonChange={ ( event ) => onChange( event.target.value ) }\n\t\t\t{ ...remainingProps }\n\t\t/>\n\t);\n} );\n\nexport default PlainText;\n","/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { VisuallyHidden } from '@wordpress/components';\nimport { _x, sprintf } from '@wordpress/i18n';\n\nexport default function ResponsiveBlockControlLabel( {\n\tproperty,\n\tviewport,\n\tdesc,\n} ) {\n\tconst instanceId = useInstanceId( ResponsiveBlockControlLabel );\n\tconst accessibleLabel =\n\t\tdesc ||\n\t\tsprintf(\n\t\t\t/* translators: 1: property name. 2: viewport name. */\n\t\t\t_x(\n\t\t\t\t'Controls the %1$s property for %2$s viewports.',\n\t\t\t\t'Text labelling a interface as controlling a given layout property (eg: margin) for a given screen size.'\n\t\t\t),\n\t\t\tproperty,\n\t\t\tviewport.label\n\t\t);\n\treturn (\n\t\t<>\n\t\t\t<span aria-describedby={ `rbc-desc-${ instanceId }` }>\n\t\t\t\t{ viewport.label }\n\t\t\t</span>\n\t\t\t<VisuallyHidden as=\"span\" id={ `rbc-desc-${ instanceId }` }>\n\t\t\t\t{ accessibleLabel }\n\t\t\t</VisuallyHidden>\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { ToggleControl } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport ResponsiveBlockControlLabel from './label';\n\nfunction ResponsiveBlockControl( props ) {\n\tconst {\n\t\ttitle,\n\t\tproperty,\n\t\ttoggleLabel,\n\t\tonIsResponsiveChange,\n\t\trenderDefaultControl,\n\t\trenderResponsiveControls,\n\t\tisResponsive = false,\n\t\tdefaultLabel = {\n\t\t\tid: 'all',\n\t\t\t/* translators: 'Label. Used to signify a layout property (eg: margin, padding) will apply uniformly to all screensizes.' */\n\t\t\tlabel: __( 'All' ),\n\t\t},\n\t\tviewports = [\n\t\t\t{\n\t\t\t\tid: 'small',\n\t\t\t\tlabel: __( 'Small screens' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'medium',\n\t\t\t\tlabel: __( 'Medium screens' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'large',\n\t\t\t\tlabel: __( 'Large screens' ),\n\t\t\t},\n\t\t],\n\t} = props;\n\n\tif ( ! title || ! property || ! renderDefaultControl ) {\n\t\treturn null;\n\t}\n\n\tconst toggleControlLabel =\n\t\ttoggleLabel ||\n\t\tsprintf(\n\t\t\t/* translators: 'Toggle control label. Should the property be the same across all screen sizes or unique per screen size.'. %s property value for the control (eg: margin, padding...etc) */\n\t\t\t__( 'Use the same %s on all screensizes.' ),\n\t\t\tproperty\n\t\t);\n\n\t/* translators: 'Help text for the responsive mode toggle control.' */\n\tconst toggleHelpText = __(\n\t\t'Toggle between using the same value for all screen sizes or using a unique value per screen size.'\n\t);\n\n\tconst defaultControl = renderDefaultControl(\n\t\t<ResponsiveBlockControlLabel\n\t\t\tproperty={ property }\n\t\t\tviewport={ defaultLabel }\n\t\t/>,\n\t\tdefaultLabel\n\t);\n\n\tconst defaultResponsiveControls = () => {\n\t\treturn viewports.map( ( viewport ) => (\n\t\t\t<Fragment key={ viewport.id }>\n\t\t\t\t{ renderDefaultControl(\n\t\t\t\t\t<ResponsiveBlockControlLabel\n\t\t\t\t\t\tproperty={ property }\n\t\t\t\t\t\tviewport={ viewport }\n\t\t\t\t\t/>,\n\t\t\t\t\tviewport\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t) );\n\t};\n\n\treturn (\n\t\t<fieldset className=\"block-editor-responsive-block-control\">\n\t\t\t<legend className=\"block-editor-responsive-block-control__title\">\n\t\t\t\t{ title }\n\t\t\t</legend>\n\n\t\t\t<div className=\"block-editor-responsive-block-control__inner\">\n\t\t\t\t<ToggleControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tclassName=\"block-editor-responsive-block-control__toggle\"\n\t\t\t\t\tlabel={ toggleControlLabel }\n\t\t\t\t\tchecked={ ! isResponsive }\n\t\t\t\t\tonChange={ onIsResponsiveChange }\n\t\t\t\t\thelp={ toggleHelpText }\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'block-editor-responsive-block-control__group',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'is-responsive': isResponsive,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ ! isResponsive && defaultControl }\n\t\t\t\t\t{ isResponsive &&\n\t\t\t\t\t\t( renderResponsiveControls\n\t\t\t\t\t\t\t? renderResponsiveControls( viewports )\n\t\t\t\t\t\t\t: defaultResponsiveControls() ) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</fieldset>\n\t);\n}\n\nexport default ResponsiveBlockControl;\n","/**\n * WordPress dependencies\n */\nimport { isKeyboardEvent } from '@wordpress/keycodes';\nimport { useEffect, useContext, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { keyboardShortcutContext } from './';\n\nexport function RichTextShortcut( { character, type, onUse } ) {\n\tconst keyboardShortcuts = useContext( keyboardShortcutContext );\n\tconst onUseRef = useRef();\n\tonUseRef.current = onUse;\n\n\tuseEffect( () => {\n\t\tfunction callback( event ) {\n\t\t\tif ( isKeyboardEvent[ type ]( event, character ) ) {\n\t\t\t\tonUseRef.current();\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\tkeyboardShortcuts.current.add( callback );\n\t\treturn () => {\n\t\t\tkeyboardShortcuts.current.delete( callback );\n\t\t};\n\t}, [ character, type ] );\n\n\treturn null;\n}\n","/**\n * WordPress dependencies\n */\nimport { Fill, ToolbarButton } from '@wordpress/components';\nimport { displayShortcut } from '@wordpress/keycodes';\n\nexport function RichTextToolbarButton( {\n\tname,\n\tshortcutType,\n\tshortcutCharacter,\n\t...props\n} ) {\n\tlet shortcut;\n\tlet fillName = 'RichText.ToolbarControls';\n\n\tif ( name ) {\n\t\tfillName += `.${ name }`;\n\t}\n\n\tif ( shortcutType && shortcutCharacter ) {\n\t\tshortcut = displayShortcut[ shortcutType ]( shortcutCharacter );\n\t}\n\n\treturn (\n\t\t<Fill name={ fillName }>\n\t\t\t<ToolbarButton { ...props } shortcut={ shortcut } />\n\t\t</Fill>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useContext, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { inputEventContext } from './';\n\nexport function __unstableRichTextInputEvent( { inputType, onInput } ) {\n\tconst callbacks = useContext( inputEventContext );\n\tconst onInputRef = useRef();\n\tonInputRef.current = onInput;\n\n\tuseEffect( () => {\n\t\tfunction callback( event ) {\n\t\t\tif ( event.inputType === inputType ) {\n\t\t\t\tonInputRef.current();\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\tcallbacks.current.add( callback );\n\t\treturn () => {\n\t\t\tcallbacks.current.delete( callback );\n\t\t};\n\t}, [ inputType ] );\n\n\treturn null;\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tDropdown,\n\tButton,\n\tMenuItemsChoice,\n\tSVG,\n\tPath,\n\tNavigableMenu,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\nimport { Icon, edit as editIcon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst selectIcon = (\n\t<SVG\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\twidth=\"24\"\n\t\theight=\"24\"\n\t\tviewBox=\"0 0 24 24\"\n\t>\n\t\t<Path d=\"M9.4 20.5L5.2 3.8l14.6 9-2 .3c-.2 0-.4.1-.7.1-.9.2-1.6.3-2.2.5-.8.3-1.4.5-1.8.8-.4.3-.8.8-1.3 1.5-.4.5-.8 1.2-1.2 2l-.3.6-.9 1.9zM7.6 7.1l2.4 9.3c.2-.4.5-.8.7-1.1.6-.8 1.1-1.4 1.6-1.8.5-.4 1.3-.8 2.2-1.1l1.2-.3-8.1-5z\" />\n\t</SVG>\n);\n\nfunction ToolSelector( props, ref ) {\n\tconst mode = useSelect(\n\t\t( select ) => select( blockEditorStore ).__unstableGetEditorMode(),\n\t\t[]\n\t);\n\tconst { __unstableSetEditorMode } = useDispatch( blockEditorStore );\n\n\treturn (\n\t\t<Dropdown\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t<Button\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tref={ ref }\n\t\t\t\t\ticon={ mode === 'navigation' ? selectIcon : editIcon }\n\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\n\t\t\t\t\tlabel={ __( 'Tools' ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\tpopoverProps={ { placement: 'bottom-start' } }\n\t\t\trenderContent={ () => (\n\t\t\t\t<>\n\t\t\t\t\t<NavigableMenu role=\"menu\" aria-label={ __( 'Tools' ) }>\n\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\tmode === 'navigation' ? 'navigation' : 'edit'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonSelect={ __unstableSetEditorMode }\n\t\t\t\t\t\t\tchoices={ [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: 'edit',\n\t\t\t\t\t\t\t\t\tlabel: (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<Icon icon={ editIcon } />\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Edit' ) }\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: 'navigation',\n\t\t\t\t\t\t\t\t\tlabel: (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t{ selectIcon }\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Select' ) }\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</NavigableMenu>\n\t\t\t\t\t<div className=\"block-editor-tool-selector__help\">\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Tools provide different interactions for selecting, navigating, and editing blocks. Toggle between select and edit by pressing Escape and Enter.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( ToolSelector );\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalUnitControl as BaseUnitControl,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport useSetting from '../use-setting';\n\nexport default function UnitControl( { units: unitsProp, ...props } ) {\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: useSetting( 'spacing.units' ) || [\n\t\t\t'%',\n\t\t\t'px',\n\t\t\t'em',\n\t\t\t'rem',\n\t\t\t'vw',\n\t\t],\n\t\tunits: unitsProp,\n\t} );\n\n\treturn <BaseUnitControl units={ units } { ...props } />;\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst arrowLeft = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z\" />\n\t</SVG>\n);\n\nexport default arrowLeft;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport { link, keyboardReturn, arrowLeft } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport URLInput from './';\n\nclass URLInputButton extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.toggle = this.toggle.bind( this );\n\t\tthis.submitLink = this.submitLink.bind( this );\n\t\tthis.state = {\n\t\t\texpanded: false,\n\t\t};\n\t}\n\n\ttoggle() {\n\t\tthis.setState( { expanded: ! this.state.expanded } );\n\t}\n\n\tsubmitLink( event ) {\n\t\tevent.preventDefault();\n\t\tthis.toggle();\n\t}\n\n\trender() {\n\t\tconst { url, onChange } = this.props;\n\t\tconst { expanded } = this.state;\n\t\tconst buttonLabel = url ? __( 'Edit link' ) : __( 'Insert link' );\n\n\t\treturn (\n\t\t\t<div className=\"block-editor-url-input__button\">\n\t\t\t\t<Button\n\t\t\t\t\ticon={ link }\n\t\t\t\t\tlabel={ buttonLabel }\n\t\t\t\t\tonClick={ this.toggle }\n\t\t\t\t\tclassName=\"components-toolbar__control\"\n\t\t\t\t\tisPressed={ !! url }\n\t\t\t\t/>\n\t\t\t\t{ expanded && (\n\t\t\t\t\t<form\n\t\t\t\t\t\tclassName=\"block-editor-url-input__button-modal\"\n\t\t\t\t\t\tonSubmit={ this.submitLink }\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"block-editor-url-input__button-modal-line\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"block-editor-url-input__back\"\n\t\t\t\t\t\t\t\ticon={ arrowLeft }\n\t\t\t\t\t\t\t\tlabel={ __( 'Close' ) }\n\t\t\t\t\t\t\t\tonClick={ this.toggle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<URLInput\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tvalue={ url || '' }\n\t\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ticon={ keyboardReturn }\n\t\t\t\t\t\t\t\tlabel={ __( 'Submit' ) }\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/url-input/README.md\n */\nexport default URLInputButton;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst close = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z\" />\n\t</SVG>\n);\n\nexport default close;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useRef, useState, useCallback } from '@wordpress/element';\nimport {\n\tToolbarButton,\n\tButton,\n\tNavigableMenu,\n\tMenuItem,\n\tToggleControl,\n\tTextControl,\n\tSVG,\n\tPath,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { link as linkIcon, close } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport URLPopover from './index';\n\nconst LINK_DESTINATION_NONE = 'none';\nconst LINK_DESTINATION_CUSTOM = 'custom';\nconst LINK_DESTINATION_MEDIA = 'media';\nconst LINK_DESTINATION_ATTACHMENT = 'attachment';\nconst NEW_TAB_REL = [ 'noreferrer', 'noopener' ];\n\nconst icon = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M0,0h24v24H0V0z\" fill=\"none\" />\n\t\t<Path d=\"m19 5v14h-14v-14h14m0-2h-14c-1.1 0-2 0.9-2 2v14c0 1.1 0.9 2 2 2h14c1.1 0 2-0.9 2-2v-14c0-1.1-0.9-2-2-2z\" />\n\t\t<Path d=\"m14.14 11.86l-3 3.87-2.14-2.59-3 3.86h12l-3.86-5.14z\" />\n\t</SVG>\n);\n\nconst ImageURLInputUI = ( {\n\tlinkDestination,\n\tonChangeUrl,\n\turl,\n\tmediaType = 'image',\n\tmediaUrl,\n\tmediaLink,\n\tlinkTarget,\n\tlinkClass,\n\trel,\n} ) => {\n\tconst [ isOpen, setIsOpen ] = useState( false );\n\t// Use internal state instead of a ref to make sure that the component\n\t// re-renders when the popover's anchor updates.\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\n\tconst openLinkUI = useCallback( () => {\n\t\tsetIsOpen( true );\n\t} );\n\n\tconst [ isEditingLink, setIsEditingLink ] = useState( false );\n\tconst [ urlInput, setUrlInput ] = useState( null );\n\n\tconst autocompleteRef = useRef( null );\n\n\tconst startEditLink = useCallback( () => {\n\t\tif (\n\t\t\tlinkDestination === LINK_DESTINATION_MEDIA ||\n\t\t\tlinkDestination === LINK_DESTINATION_ATTACHMENT\n\t\t) {\n\t\t\tsetUrlInput( '' );\n\t\t}\n\t\tsetIsEditingLink( true );\n\t} );\n\n\tconst stopEditLink = useCallback( () => {\n\t\tsetIsEditingLink( false );\n\t} );\n\n\tconst closeLinkUI = useCallback( () => {\n\t\tsetUrlInput( null );\n\t\tstopEditLink();\n\t\tsetIsOpen( false );\n\t} );\n\n\tconst getUpdatedLinkTargetSettings = ( value ) => {\n\t\tconst newLinkTarget = value ? '_blank' : undefined;\n\n\t\tlet updatedRel;\n\t\tif ( newLinkTarget ) {\n\t\t\tconst rels = ( rel ?? '' ).split( ' ' );\n\t\t\tNEW_TAB_REL.forEach( ( relVal ) => {\n\t\t\t\tif ( ! rels.includes( relVal ) ) {\n\t\t\t\t\trels.push( relVal );\n\t\t\t\t}\n\t\t\t} );\n\t\t\tupdatedRel = rels.join( ' ' );\n\t\t} else {\n\t\t\tconst rels = ( rel ?? '' )\n\t\t\t\t.split( ' ' )\n\t\t\t\t.filter(\n\t\t\t\t\t( relVal ) => NEW_TAB_REL.includes( relVal ) === false\n\t\t\t\t);\n\t\t\tupdatedRel = rels.length ? rels.join( ' ' ) : undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tlinkTarget: newLinkTarget,\n\t\t\trel: updatedRel,\n\t\t};\n\t};\n\n\tconst onFocusOutside = useCallback( () => {\n\t\treturn ( event ) => {\n\t\t\t// The autocomplete suggestions list renders in a separate popover (in a portal),\n\t\t\t// so onFocusOutside fails to detect that a click on a suggestion occurred in the\n\t\t\t// LinkContainer. Detect clicks on autocomplete suggestions using a ref here, and\n\t\t\t// return to avoid the popover being closed.\n\t\t\tconst autocompleteElement = autocompleteRef.current;\n\t\t\tif (\n\t\t\t\tautocompleteElement &&\n\t\t\t\tautocompleteElement.contains( event.target )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetIsOpen( false );\n\t\t\tsetUrlInput( null );\n\t\t\tstopEditLink();\n\t\t};\n\t} );\n\n\tconst onSubmitLinkChange = useCallback( () => {\n\t\treturn ( event ) => {\n\t\t\tif ( urlInput ) {\n\t\t\t\t// It is possible the entered URL actually matches a named link destination.\n\t\t\t\t// This check will ensure our link destination is correct.\n\t\t\t\tconst selectedDestination =\n\t\t\t\t\tgetLinkDestinations().find(\n\t\t\t\t\t\t( destination ) => destination.url === urlInput\n\t\t\t\t\t)?.linkDestination || LINK_DESTINATION_CUSTOM;\n\n\t\t\t\tonChangeUrl( {\n\t\t\t\t\thref: urlInput,\n\t\t\t\t\tlinkDestination: selectedDestination,\n\t\t\t\t} );\n\t\t\t}\n\t\t\tstopEditLink();\n\t\t\tsetUrlInput( null );\n\t\t\tevent.preventDefault();\n\t\t};\n\t} );\n\n\tconst onLinkRemove = useCallback( () => {\n\t\tonChangeUrl( {\n\t\t\tlinkDestination: LINK_DESTINATION_NONE,\n\t\t\thref: '',\n\t\t} );\n\t} );\n\n\tconst getLinkDestinations = () => {\n\t\tconst linkDestinations = [\n\t\t\t{\n\t\t\t\tlinkDestination: LINK_DESTINATION_MEDIA,\n\t\t\t\ttitle: __( 'Media File' ),\n\t\t\t\turl: mediaType === 'image' ? mediaUrl : undefined,\n\t\t\t\ticon,\n\t\t\t},\n\t\t];\n\t\tif ( mediaType === 'image' && mediaLink ) {\n\t\t\tlinkDestinations.push( {\n\t\t\t\tlinkDestination: LINK_DESTINATION_ATTACHMENT,\n\t\t\t\ttitle: __( 'Attachment Page' ),\n\t\t\t\turl: mediaType === 'image' ? mediaLink : undefined,\n\t\t\t\ticon: (\n\t\t\t\t\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<Path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n\t\t\t\t\t\t<Path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z\" />\n\t\t\t\t\t</SVG>\n\t\t\t\t),\n\t\t\t} );\n\t\t}\n\t\treturn linkDestinations;\n\t};\n\n\tconst onSetHref = ( value ) => {\n\t\tconst linkDestinations = getLinkDestinations();\n\t\tlet linkDestinationInput;\n\t\tif ( ! value ) {\n\t\t\tlinkDestinationInput = LINK_DESTINATION_NONE;\n\t\t} else {\n\t\t\tlinkDestinationInput = (\n\t\t\t\tlinkDestinations.find( ( destination ) => {\n\t\t\t\t\treturn destination.url === value;\n\t\t\t\t} ) || { linkDestination: LINK_DESTINATION_CUSTOM }\n\t\t\t).linkDestination;\n\t\t}\n\t\tonChangeUrl( {\n\t\t\tlinkDestination: linkDestinationInput,\n\t\t\thref: value,\n\t\t} );\n\t};\n\n\tconst onSetNewTab = ( value ) => {\n\t\tconst updatedLinkTarget = getUpdatedLinkTargetSettings( value );\n\t\tonChangeUrl( updatedLinkTarget );\n\t};\n\n\tconst onSetLinkRel = ( value ) => {\n\t\tonChangeUrl( { rel: value } );\n\t};\n\n\tconst onSetLinkClass = ( value ) => {\n\t\tonChangeUrl( { linkClass: value } );\n\t};\n\n\tconst advancedOptions = (\n\t\t<VStack spacing=\"3\">\n\t\t\t<ToggleControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\tonChange={ onSetNewTab }\n\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t/>\n\t\t\t<TextControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Link rel' ) }\n\t\t\t\tvalue={ rel ?? '' }\n\t\t\t\tonChange={ onSetLinkRel }\n\t\t\t/>\n\t\t\t<TextControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Link CSS Class' ) }\n\t\t\t\tvalue={ linkClass || '' }\n\t\t\t\tonChange={ onSetLinkClass }\n\t\t\t/>\n\t\t</VStack>\n\t);\n\n\tconst linkEditorValue = urlInput !== null ? urlInput : url;\n\n\tconst urlLabel = (\n\t\tgetLinkDestinations().find(\n\t\t\t( destination ) => destination.linkDestination === linkDestination\n\t\t) || {}\n\t).title;\n\n\treturn (\n\t\t<>\n\t\t\t<ToolbarButton\n\t\t\t\ticon={ linkIcon }\n\t\t\t\tclassName=\"components-toolbar__control\"\n\t\t\t\tlabel={ url ? __( 'Edit link' ) : __( 'Insert link' ) }\n\t\t\t\taria-expanded={ isOpen }\n\t\t\t\tonClick={ openLinkUI }\n\t\t\t\tref={ setPopoverAnchor }\n\t\t\t/>\n\t\t\t{ isOpen && (\n\t\t\t\t<URLPopover\n\t\t\t\t\tanchor={ popoverAnchor }\n\t\t\t\t\tonFocusOutside={ onFocusOutside() }\n\t\t\t\t\tonClose={ closeLinkUI }\n\t\t\t\t\trenderSettings={ () => advancedOptions }\n\t\t\t\t\tadditionalControls={\n\t\t\t\t\t\t! linkEditorValue && (\n\t\t\t\t\t\t\t<NavigableMenu>\n\t\t\t\t\t\t\t\t{ getLinkDestinations().map( ( link ) => (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={ link.linkDestination }\n\t\t\t\t\t\t\t\t\t\ticon={ link.icon }\n\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\tsetUrlInput( null );\n\t\t\t\t\t\t\t\t\t\t\tonSetHref( link.url );\n\t\t\t\t\t\t\t\t\t\t\tstopEditLink();\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ link.title }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t</NavigableMenu>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{ ( ! url || isEditingLink ) && (\n\t\t\t\t\t\t<URLPopover.LinkEditor\n\t\t\t\t\t\t\tclassName=\"block-editor-format-toolbar__link-container-content\"\n\t\t\t\t\t\t\tvalue={ linkEditorValue }\n\t\t\t\t\t\t\tonChangeInputValue={ setUrlInput }\n\t\t\t\t\t\t\tonSubmit={ onSubmitLinkChange() }\n\t\t\t\t\t\t\tautocompleteRef={ autocompleteRef }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ url && ! isEditingLink && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<URLPopover.LinkViewer\n\t\t\t\t\t\t\t\tclassName=\"block-editor-format-toolbar__link-container-content\"\n\t\t\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\t\t\tonEditLinkClick={ startEditLink }\n\t\t\t\t\t\t\t\turlLabel={ urlLabel }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ticon={ close }\n\t\t\t\t\t\t\t\tlabel={ __( 'Remove link' ) }\n\t\t\t\t\t\t\t\tonClick={ onLinkRemove }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t</URLPopover>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nexport { ImageURLInputUI as __experimentalImageURLInputUI };\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst mobile = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z\" />\n\t</SVG>\n);\n\nexport default mobile;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst tablet = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M17 4H7c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12zm-7.5-.5h4V16h-4v1.5z\" />\n\t</SVG>\n);\n\nexport default tablet;\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst desktop = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z\" />\n\t</SVG>\n);\n\nexport default desktop;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useViewportMatch } from '@wordpress/compose';\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { check, desktop, mobile, tablet } from '@wordpress/icons';\n\nexport default function PreviewOptions( {\n\tchildren,\n\tviewLabel,\n\tclassName,\n\tisEnabled = true,\n\tdeviceType,\n\tsetDeviceType,\n} ) {\n\tconst isMobile = useViewportMatch( 'small', '<' );\n\tif ( isMobile ) return null;\n\n\tconst popoverProps = {\n\t\tclassName: classnames(\n\t\t\tclassName,\n\t\t\t'block-editor-post-preview__dropdown-content'\n\t\t),\n\t\tposition: 'bottom left',\n\t};\n\tconst toggleProps = {\n\t\tvariant: 'tertiary',\n\t\tclassName: 'block-editor-post-preview__button-toggle',\n\t\tdisabled: ! isEnabled,\n\t\tchildren: viewLabel,\n\t};\n\tconst menuProps = {\n\t\t'aria-label': __( 'View options' ),\n\t};\n\n\tconst deviceIcons = {\n\t\tmobile,\n\t\ttablet,\n\t\tdesktop,\n\t};\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\tclassName=\"block-editor-post-preview__dropdown\"\n\t\t\tpopoverProps={ popoverProps }\n\t\t\ttoggleProps={ toggleProps }\n\t\t\tmenuProps={ menuProps }\n\t\t\ticon={ deviceIcons[ deviceType.toLowerCase() ] }\n\t\t>\n\t\t\t{ () => (\n\t\t\t\t<>\n\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tclassName=\"block-editor-post-preview__button-resize\"\n\t\t\t\t\t\t\tonClick={ () => setDeviceType( 'Desktop' ) }\n\t\t\t\t\t\t\ticon={ deviceType === 'Desktop' && check }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Desktop' ) }\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tclassName=\"block-editor-post-preview__button-resize\"\n\t\t\t\t\t\t\tonClick={ () => setDeviceType( 'Tablet' ) }\n\t\t\t\t\t\t\ticon={ deviceType === 'Tablet' && check }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Tablet' ) }\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tclassName=\"block-editor-post-preview__button-resize\"\n\t\t\t\t\t\t\tonClick={ () => setDeviceType( 'Mobile' ) }\n\t\t\t\t\t\t\ticon={ deviceType === 'Mobile' && check }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Mobile' ) }\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t{ children }\n\t\t\t\t</>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\n\n/**\n * Function to resize the editor window.\n *\n * @param {string} deviceType Used for determining the size of the container (e.g. Desktop, Tablet, Mobile)\n *\n * @return {Object} Inline styles to be added to resizable container.\n */\nexport default function useResizeCanvas( deviceType ) {\n\tconst [ actualWidth, updateActualWidth ] = useState( window.innerWidth );\n\n\tuseEffect( () => {\n\t\tif ( deviceType === 'Desktop' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst resizeListener = () => updateActualWidth( window.innerWidth );\n\t\twindow.addEventListener( 'resize', resizeListener );\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener( 'resize', resizeListener );\n\t\t};\n\t}, [ deviceType ] );\n\n\tconst getCanvasWidth = ( device ) => {\n\t\tlet deviceWidth;\n\n\t\tswitch ( device ) {\n\t\t\tcase 'Tablet':\n\t\t\t\tdeviceWidth = 780;\n\t\t\t\tbreak;\n\t\t\tcase 'Mobile':\n\t\t\t\tdeviceWidth = 360;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\n\t\treturn deviceWidth < actualWidth ? deviceWidth : actualWidth;\n\t};\n\n\tconst marginValue = () => ( window.innerHeight < 800 ? 36 : 72 );\n\n\tconst contentInlineStyles = ( device ) => {\n\t\tconst height = device === 'Mobile' ? '768px' : '1024px';\n\t\tconst marginVertical = marginValue() + 'px';\n\t\tconst marginHorizontal = 'auto';\n\n\t\tswitch ( device ) {\n\t\t\tcase 'Tablet':\n\t\t\tcase 'Mobile':\n\t\t\t\treturn {\n\t\t\t\t\twidth: getCanvasWidth( device ),\n\t\t\t\t\t// Keeping margin styles separate to avoid warnings\n\t\t\t\t\t// when those props get overridden in the iframe component\n\t\t\t\t\tmarginTop: marginVertical,\n\t\t\t\t\tmarginBottom: marginVertical,\n\t\t\t\t\tmarginLeft: marginHorizontal,\n\t\t\t\t\tmarginRight: marginHorizontal,\n\t\t\t\t\theight,\n\t\t\t\t\tborderRadius: '2px 2px 2px 2px',\n\t\t\t\t\tborder: '1px solid #ddd',\n\t\t\t\t\toverflowY: 'auto',\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t};\n\n\treturn contentInlineStyles( deviceType );\n}\n","/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { __unstableUseBlockRef as useBlockRef } from '../block-list/use-block-props/use-block-refs';\n\nconst SkipToSelectedBlock = ( { selectedBlockClientId } ) => {\n\tconst ref = useBlockRef( selectedBlockClientId );\n\tconst onClick = () => {\n\t\tref.current.focus();\n\t};\n\n\treturn selectedBlockClientId ? (\n\t\t<Button\n\t\t\tvariant=\"secondary\"\n\t\t\tclassName=\"block-editor-skip-to-selected-block\"\n\t\t\tonClick={ onClick }\n\t\t>\n\t\t\t{ __( 'Skip to the selected block' ) }\n\t\t</Button>\n\t) : null;\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/skip-to-selected-block/README.md\n */\nexport default withSelect( ( select ) => {\n\treturn {\n\t\tselectedBlockClientId:\n\t\t\tselect( blockEditorStore ).getBlockSelectionStart(),\n\t};\n} )( SkipToSelectedBlock );\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"wordcount\"];","/**\n * WordPress dependencies\n */\nimport { sprintf, _n } from '@wordpress/i18n';\nimport { withSelect } from '@wordpress/data';\nimport { serialize } from '@wordpress/blocks';\nimport { count as wordCount } from '@wordpress/wordcount';\nimport { copy } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { store as blockEditorStore } from '../../store';\n\nfunction MultiSelectionInspector( { blocks } ) {\n\tconst words = wordCount( serialize( blocks ), 'words' );\n\n\treturn (\n\t\t<div className=\"block-editor-multi-selection-inspector__card\">\n\t\t\t<BlockIcon icon={ copy } showColors />\n\t\t\t<div className=\"block-editor-multi-selection-inspector__card-content\">\n\t\t\t\t<div className=\"block-editor-multi-selection-inspector__card-title\">\n\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t/* translators: %d: number of blocks */\n\t\t\t\t\t\t_n( '%d Block', '%d Blocks', blocks.length ),\n\t\t\t\t\t\tblocks.length\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"block-editor-multi-selection-inspector__card-description\">\n\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t/* translators: %d: number of words */\n\t\t\t\t\t\t_n( '%d word selected.', '%d words selected.', words ),\n\t\t\t\t\t\twords\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default withSelect( ( select ) => {\n\tconst { getMultiSelectedBlocks } = select( blockEditorStore );\n\treturn {\n\t\tblocks: getMultiSelectedBlocks(),\n\t};\n} )( MultiSelectionInspector );\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useMemo, useCallback } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { SelectControl } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { getDefaultStyle } from '../block-styles/utils';\n\nexport default function DefaultStylePicker( { blockName } ) {\n\tconst { preferredStyle, onUpdatePreferredStyleVariations, styles } =\n\t\tuseSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst settings = select( blockEditorStore ).getSettings();\n\t\t\t\tconst preferredStyleVariations =\n\t\t\t\t\tsettings.__experimentalPreferredStyleVariations;\n\t\t\t\treturn {\n\t\t\t\t\tpreferredStyle:\n\t\t\t\t\t\tpreferredStyleVariations?.value?.[ blockName ],\n\t\t\t\t\tonUpdatePreferredStyleVariations:\n\t\t\t\t\t\tpreferredStyleVariations?.onChange ?? null,\n\t\t\t\t\tstyles: select( blocksStore ).getBlockStyles( blockName ),\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ blockName ]\n\t\t);\n\tconst selectOptions = useMemo(\n\t\t() => [\n\t\t\t{ label: __( 'Not set' ), value: '' },\n\t\t\t...styles.map( ( { label, name } ) => ( { label, value: name } ) ),\n\t\t],\n\t\t[ styles ]\n\t);\n\tconst defaultStyleName = useMemo(\n\t\t() => getDefaultStyle( styles )?.name,\n\t\t[ styles ]\n\t);\n\tconst selectOnChange = useCallback(\n\t\t( blockStyle ) => {\n\t\t\tonUpdatePreferredStyleVariations( blockName, blockStyle );\n\t\t},\n\t\t[ blockName, onUpdatePreferredStyleVariations ]\n\t);\n\n\t// Until the functionality is migrated to global styles,\n\t// only show the default style picker if a non-default style has already been selected.\n\tif ( ! preferredStyle || preferredStyle === defaultStyleName ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\tonUpdatePreferredStyleVariations && (\n\t\t\t<div className=\"default-style-picker__default-switcher\">\n\t\t\t\t<SelectControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\toptions={ selectOptions }\n\t\t\t\t\tvalue={ preferredStyle || '' }\n\t\t\t\t\tlabel={ __( 'Default Style' ) }\n\t\t\t\t\tonChange={ selectOnChange }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst cog = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\td=\"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z\"\n\t\t\tclipRule=\"evenodd\"\n\t\t/>\n\t</SVG>\n);\n\nexport default cog;\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nexport const styles = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M12 4c-4.4 0-8 3.6-8 8v.1c0 4.1 3.2 7.5 7.2 7.9h.8c4.4 0 8-3.6 8-8s-3.6-8-8-8zm0 15V5c3.9 0 7 3.1 7 7s-3.1 7-7 7z\" />\n\t</SVG>\n);\n\nexport default styles;\n","/**\n * WordPress dependencies\n */\nimport { cog, styles, listView } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\n\nexport const TAB_SETTINGS = {\n\tname: 'settings',\n\ttitle: __( 'Settings' ),\n\tvalue: 'settings',\n\ticon: cog,\n\tclassName: 'block-editor-block-inspector__tab-item',\n};\n\nexport const TAB_STYLES = {\n\tname: 'styles',\n\ttitle: __( 'Styles' ),\n\tvalue: 'styles',\n\ticon: styles,\n\tclassName: 'block-editor-block-inspector__tab-item',\n};\n\nexport const TAB_LIST_VIEW = {\n\tname: 'list',\n\ttitle: __( 'List View' ),\n\tvalue: 'list-view',\n\ticon: listView,\n\tclassName: 'block-editor-block-inspector__tab-item',\n};\n","/**\n * WordPress dependencies\n */\nimport {\n\tPanelBody,\n\t__experimentalUseSlotFills as useSlotFills,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport {\n\tdefault as InspectorControls,\n\tInspectorAdvancedControls,\n} from '../inspector-controls';\n\nconst AdvancedControls = () => {\n\tconst fills = useSlotFills( InspectorAdvancedControls.slotName );\n\tconst hasFills = Boolean( fills && fills.length );\n\n\tif ( ! hasFills ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"block-editor-block-inspector__advanced\"\n\t\t\ttitle={ __( 'Advanced' ) }\n\t\t\tinitialOpen={ false }\n\t\t>\n\t\t\t<InspectorControls.Slot group=\"advanced\" />\n\t\t</PanelBody>\n\t);\n};\n\nexport default AdvancedControls;\n","/**\n * WordPress dependencies\n */\nimport {\n\tPanelBody,\n\t__experimentalUseSlotFills as useSlotFills,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { useLayoutEffect, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport InspectorControlsGroups from '../inspector-controls/groups';\nimport { default as InspectorControls } from '../inspector-controls';\nimport { store as blockEditorStore } from '../../store';\n\nconst PositionControlsPanel = () => {\n\tconst [ initialOpen, setInitialOpen ] = useState();\n\n\t// Determine whether the panel should be expanded.\n\tconst { multiSelectedBlocks } = useSelect( ( select ) => {\n\t\tconst { getBlocksByClientId, getSelectedBlockClientIds } =\n\t\t\tselect( blockEditorStore );\n\t\tconst clientIds = getSelectedBlockClientIds();\n\t\treturn {\n\t\t\tmultiSelectedBlocks: getBlocksByClientId( clientIds ),\n\t\t};\n\t}, [] );\n\n\tuseLayoutEffect( () => {\n\t\t// If any selected block has a position set, open the panel by default.\n\t\t// The first block's value will still be used within the control though.\n\t\tif ( initialOpen === undefined ) {\n\t\t\tsetInitialOpen(\n\t\t\t\tmultiSelectedBlocks.some(\n\t\t\t\t\t( { attributes } ) => !! attributes?.style?.position?.type\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}, [ initialOpen, multiSelectedBlocks, setInitialOpen ] );\n\n\treturn (\n\t\t<PanelBody\n\t\t\tclassName=\"block-editor-block-inspector__position\"\n\t\t\ttitle={ __( 'Position' ) }\n\t\t\tinitialOpen={ initialOpen ?? false }\n\t\t>\n\t\t\t<InspectorControls.Slot group=\"position\" />\n\t\t</PanelBody>\n\t);\n};\n\nconst PositionControls = () => {\n\tconst fills = useSlotFills(\n\t\tInspectorControlsGroups.position.Slot.__unstableName\n\t);\n\tconst hasFills = Boolean( fills && fills.length );\n\n\tif ( ! hasFills ) {\n\t\treturn null;\n\t}\n\n\treturn <PositionControlsPanel />;\n};\n\nexport default PositionControls;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"preferences\"];","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { focus } from '@wordpress/dom';\nimport { useRef } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { close } from '@wordpress/icons';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\nconst PREFERENCE_NAME = 'isInspectorControlsTabsHintVisible';\n\nexport default function InspectorControlsTabsHint() {\n\tconst isInspectorControlsTabsHintVisible = useSelect(\n\t\t( select ) =>\n\t\t\tselect( preferencesStore ).get( 'core', PREFERENCE_NAME ) ?? true,\n\t\t[]\n\t);\n\n\tconst ref = useRef();\n\n\tconst { set: setPreference } = useDispatch( preferencesStore );\n\tif ( ! isInspectorControlsTabsHintVisible ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div ref={ ref } className=\"block-editor-inspector-controls-tabs__hint\">\n\t\t\t<div className=\"block-editor-inspector-controls-tabs__hint-content\">\n\t\t\t\t{ __(\n\t\t\t\t\t\"Looking for other block settings? They've moved to the styles tab.\"\n\t\t\t\t) }\n\t\t\t</div>\n\t\t\t<Button\n\t\t\t\tclassName=\"block-editor-inspector-controls-tabs__hint-dismiss\"\n\t\t\t\ticon={ close }\n\t\t\t\ticonSize=\"16\"\n\t\t\t\tlabel={ __( 'Dismiss hint' ) }\n\t\t\t\tonClick={ () => {\n\t\t\t\t\t// Retain focus when dismissing the element.\n\t\t\t\t\tconst previousElement = focus.tabbable.findPrevious(\n\t\t\t\t\t\tref.current\n\t\t\t\t\t);\n\t\t\t\t\tpreviousElement?.focus();\n\t\t\t\t\tsetPreference( 'core', PREFERENCE_NAME, false );\n\t\t\t\t} }\n\t\t\t\tshowTooltip={ false }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport AdvancedControls from './advanced-controls-panel';\nimport PositionControls from './position-controls-panel';\nimport { default as InspectorControls } from '../inspector-controls';\nimport SettingsTabHint from './settings-tab-hint';\n\nconst SettingsTab = ( { showAdvancedControls = false } ) => (\n\t<>\n\t\t<InspectorControls.Slot />\n\t\t<PositionControls />\n\t\t{ showAdvancedControls && (\n\t\t\t<div>\n\t\t\t\t<AdvancedControls />\n\t\t\t</div>\n\t\t) }\n\t\t<SettingsTabHint />\n\t</>\n);\n\nexport default SettingsTab;\n","/**\n * WordPress dependencies\n */\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport { PanelBody } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockStyles from '../block-styles';\nimport DefaultStylePicker from '../default-style-picker';\nimport InspectorControls from '../inspector-controls';\n\nconst StylesTab = ( { blockName, clientId, hasBlockStyles } ) => {\n\treturn (\n\t\t<>\n\t\t\t{ hasBlockStyles && (\n\t\t\t\t<div>\n\t\t\t\t\t<PanelBody title={ __( 'Styles' ) }>\n\t\t\t\t\t\t<BlockStyles clientId={ clientId } />\n\t\t\t\t\t\t{ hasBlockSupport(\n\t\t\t\t\t\t\tblockName,\n\t\t\t\t\t\t\t'defaultStylePicker',\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t) && <DefaultStylePicker blockName={ blockName } /> }\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<InspectorControls.Slot\n\t\t\t\tgroup=\"color\"\n\t\t\t\tlabel={ __( 'Color' ) }\n\t\t\t\tclassName=\"color-block-support-panel__inner-wrapper\"\n\t\t\t/>\n\t\t\t<InspectorControls.Slot group=\"filter\" />\n\t\t\t<InspectorControls.Slot\n\t\t\t\tgroup=\"typography\"\n\t\t\t\tlabel={ __( 'Typography' ) }\n\t\t\t/>\n\t\t\t<InspectorControls.Slot\n\t\t\t\tgroup=\"dimensions\"\n\t\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\t/>\n\t\t\t<InspectorControls.Slot group=\"border\" label={ __( 'Border' ) } />\n\t\t\t<InspectorControls.Slot group=\"styles\" />\n\t\t</>\n\t);\n};\n\nexport default StylesTab;\n","// List view tab restricts the blocks that may render to it via the\n// allowlist below.\nconst allowlist = [ 'core/navigation' ];\n\nexport const useIsListViewTabDisabled = ( blockName ) => {\n\treturn ! allowlist.includes( blockName );\n};\n\nexport default useIsListViewTabDisabled;\n","/**\n * WordPress dependencies\n */\nimport { TabPanel } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { TAB_SETTINGS, TAB_STYLES, TAB_LIST_VIEW } from './utils';\nimport SettingsTab from './settings-tab';\nimport StylesTab from './styles-tab';\nimport InspectorControls from '../inspector-controls';\nimport useIsListViewTabDisabled from './use-is-list-view-tab-disabled';\n\nexport default function InspectorControlsTabs( {\n\tblockName,\n\tclientId,\n\thasBlockStyles,\n\ttabs,\n} ) {\n\t// The tabs panel will mount before fills are rendered to the list view\n\t// slot. This means the list view tab isn't initially included in the\n\t// available tabs so the panel defaults selection to the settings tab\n\t// which at the time is the first tab. This check allows blocks known to\n\t// include the list view tab to set it as the tab selected by default.\n\tconst initialTabName = ! useIsListViewTabDisabled( blockName )\n\t\t? TAB_LIST_VIEW.name\n\t\t: undefined;\n\treturn (\n\t\t<TabPanel\n\t\t\tclassName=\"block-editor-block-inspector__tabs\"\n\t\t\ttabs={ tabs }\n\t\t\tinitialTabName={ initialTabName }\n\t\t\tkey={ clientId }\n\t\t>\n\t\t\t{ ( tab ) => {\n\t\t\t\tif ( tab.name === TAB_SETTINGS.name ) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<SettingsTab showAdvancedControls={ !! blockName } />\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif ( tab.name === TAB_STYLES.name ) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<StylesTab\n\t\t\t\t\t\t\tblockName={ blockName }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\thasBlockStyles={ hasBlockStyles }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif ( tab.name === TAB_LIST_VIEW.name ) {\n\t\t\t\t\treturn <InspectorControls.Slot group=\"list\" />;\n\t\t\t\t}\n\t\t\t} }\n\t\t</TabPanel>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __experimentalUseSlotFills as useSlotFills } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport InspectorControlsGroups from '../inspector-controls/groups';\nimport useIsListViewTabDisabled from './use-is-list-view-tab-disabled';\nimport { InspectorAdvancedControls } from '../inspector-controls';\nimport { TAB_LIST_VIEW, TAB_SETTINGS, TAB_STYLES } from './utils';\nimport { store as blockEditorStore } from '../../store';\n\nconst EMPTY_ARRAY = [];\n\nfunction getShowTabs( blockName, tabSettings = {} ) {\n\t// Block specific setting takes precedence over generic default.\n\tif ( tabSettings[ blockName ] !== undefined ) {\n\t\treturn tabSettings[ blockName ];\n\t}\n\n\t// Use generic default if set over the Gutenberg experiment option.\n\tif ( tabSettings.default !== undefined ) {\n\t\treturn tabSettings.default;\n\t}\n\n\treturn true;\n}\n\nexport default function useInspectorControlsTabs( blockName ) {\n\tconst tabs = [];\n\tconst {\n\t\tborder: borderGroup,\n\t\tcolor: colorGroup,\n\t\tdefault: defaultGroup,\n\t\tdimensions: dimensionsGroup,\n\t\tlist: listGroup,\n\t\tposition: positionGroup,\n\t\tstyles: stylesGroup,\n\t\ttypography: typographyGroup,\n\t} = InspectorControlsGroups;\n\n\t// List View Tab: If there are any fills for the list group add that tab.\n\tconst listViewDisabled = useIsListViewTabDisabled( blockName );\n\tconst listFills = useSlotFills( listGroup.Slot.__unstableName );\n\tconst hasListFills = ! listViewDisabled && !! listFills && listFills.length;\n\n\t// Styles Tab: Add this tab if there are any fills for block supports\n\t// e.g. border, color, spacing, typography, etc.\n\tconst styleFills = [\n\t\t...( useSlotFills( borderGroup.Slot.__unstableName ) || [] ),\n\t\t...( useSlotFills( colorGroup.Slot.__unstableName ) || [] ),\n\t\t...( useSlotFills( dimensionsGroup.Slot.__unstableName ) || [] ),\n\t\t...( useSlotFills( stylesGroup.Slot.__unstableName ) || [] ),\n\t\t...( useSlotFills( typographyGroup.Slot.__unstableName ) || [] ),\n\t];\n\tconst hasStyleFills = styleFills.length;\n\n\t// Settings Tab: If we don't have multiple tabs to display\n\t// (i.e. both list view and styles), check only the default and position\n\t// InspectorControls slots. If we have multiple tabs, we'll need to check\n\t// the advanced controls slot as well to ensure they are rendered.\n\tconst advancedFills =\n\t\tuseSlotFills( InspectorAdvancedControls.slotName ) || [];\n\n\tconst settingsFills = [\n\t\t...( useSlotFills( defaultGroup.Slot.__unstableName ) || [] ),\n\t\t...( useSlotFills( positionGroup.Slot.__unstableName ) || [] ),\n\t\t...( hasListFills && hasStyleFills > 1 ? advancedFills : [] ),\n\t];\n\n\t// Add the tabs in the order that they will default to if available.\n\t// List View > Settings > Styles.\n\tif ( hasListFills ) {\n\t\ttabs.push( TAB_LIST_VIEW );\n\t}\n\n\tif ( settingsFills.length ) {\n\t\ttabs.push( TAB_SETTINGS );\n\t}\n\n\tif ( hasStyleFills ) {\n\t\ttabs.push( TAB_STYLES );\n\t}\n\n\tconst tabSettings = useSelect( ( select ) => {\n\t\treturn select( blockEditorStore ).getSettings().blockInspectorTabs;\n\t}, [] );\n\n\tconst showTabs = getShowTabs( blockName, tabSettings );\n\treturn showTabs ? tabs : EMPTY_ARRAY;\n}\n","/**\n * WordPress dependencies\n */\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport useDisplayBlockControls from '../use-display-block-controls';\n\nconst { createPrivateSlotFill } = unlock( componentsPrivateApis );\nconst { Fill, Slot } = createPrivateSlotFill( 'BlockInformation' );\n\nconst BlockInfo = ( props ) => {\n\tconst isDisplayed = useDisplayBlockControls();\n\tif ( ! isDisplayed ) {\n\t\treturn null;\n\t}\n\treturn <Fill { ...props } />;\n};\nBlockInfo.Slot = ( props ) => <Slot { ...props } />;\n\nexport default BlockInfo;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tgetBlockType,\n\tgetUnregisteredTypeHandlerName,\n\thasBlockSupport,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport {\n\tFlexItem,\n\tPanelBody,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\tButton,\n\t__unstableMotion as motion,\n} from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useMemo, useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport SkipToSelectedBlock from '../skip-to-selected-block';\nimport BlockCard from '../block-card';\nimport MultiSelectionInspector from '../multi-selection-inspector';\nimport BlockVariationTransforms from '../block-variation-transforms';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport { store as blockEditorStore } from '../../store';\nimport BlockIcon from '../block-icon';\nimport BlockStyles from '../block-styles';\nimport DefaultStylePicker from '../default-style-picker';\nimport { default as InspectorControls } from '../inspector-controls';\nimport { default as InspectorControlsTabs } from '../inspector-controls-tabs';\nimport useInspectorControlsTabs from '../inspector-controls-tabs/use-inspector-controls-tabs';\nimport AdvancedControls from '../inspector-controls-tabs/advanced-controls-panel';\nimport PositionControls from '../inspector-controls-tabs/position-controls-panel';\nimport useBlockInspectorAnimationSettings from './useBlockInspectorAnimationSettings';\nimport BlockInfo from '../block-info-slot-fill';\n\nfunction useContentBlocks( blockTypes, block ) {\n\tconst contentBlocksObjectAux = useMemo( () => {\n\t\treturn blockTypes.reduce( ( result, blockType ) => {\n\t\t\tif (\n\t\t\t\tblockType.name !== 'core/list-item' &&\n\t\t\t\tObject.entries( blockType.attributes ).some(\n\t\t\t\t\t( [ , { __experimentalRole } ] ) =>\n\t\t\t\t\t\t__experimentalRole === 'content'\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tresult[ blockType.name ] = true;\n\t\t\t}\n\t\t\treturn result;\n\t\t}, {} );\n\t}, [ blockTypes ] );\n\tconst isContentBlock = useCallback(\n\t\t( blockName ) => {\n\t\t\treturn !! contentBlocksObjectAux[ blockName ];\n\t\t},\n\t\t[ contentBlocksObjectAux ]\n\t);\n\treturn useMemo( () => {\n\t\treturn getContentBlocks( [ block ], isContentBlock );\n\t}, [ block, isContentBlock ] );\n}\n\nfunction getContentBlocks( blocks, isContentBlock ) {\n\tconst result = [];\n\tfor ( const block of blocks ) {\n\t\tif ( isContentBlock( block.name ) ) {\n\t\t\tresult.push( block );\n\t\t}\n\t\tresult.push( ...getContentBlocks( block.innerBlocks, isContentBlock ) );\n\t}\n\treturn result;\n}\n\nfunction BlockNavigationButton( { blockTypes, block, selectedBlock } ) {\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\tconst blockType = blockTypes.find( ( { name } ) => name === block.name );\n\tconst isSelected =\n\t\tselectedBlock && selectedBlock.clientId === block.clientId;\n\treturn (\n\t\t<Button\n\t\t\tisPressed={ isSelected }\n\t\t\tonClick={ () => selectBlock( block.clientId ) }\n\t\t>\n\t\t\t<HStack justify=\"flex-start\">\n\t\t\t\t<BlockIcon icon={ blockType.icon } />\n\t\t\t\t<FlexItem>{ blockType.title }</FlexItem>\n\t\t\t</HStack>\n\t\t</Button>\n\t);\n}\n\nfunction BlockInspectorLockedBlocks( { topLevelLockedBlock } ) {\n\tconst { blockTypes, block, selectedBlock } = useSelect(\n\t\t( select ) => {\n\t\t\treturn {\n\t\t\t\tblockTypes: select( blocksStore ).getBlockTypes(),\n\t\t\t\tblock: select( blockEditorStore ).getBlock(\n\t\t\t\t\ttopLevelLockedBlock\n\t\t\t\t),\n\t\t\t\tselectedBlock: select( blockEditorStore ).getSelectedBlock(),\n\t\t\t};\n\t\t},\n\t\t[ topLevelLockedBlock ]\n\t);\n\tconst blockInformation = useBlockDisplayInformation( topLevelLockedBlock );\n\tconst contentBlocks = useContentBlocks( blockTypes, block );\n\treturn (\n\t\t<div className=\"block-editor-block-inspector\">\n\t\t\t<BlockCard\n\t\t\t\t{ ...blockInformation }\n\t\t\t\tclassName={ blockInformation.isSynced && 'is-synced' }\n\t\t\t/>\n\t\t\t<BlockVariationTransforms blockClientId={ topLevelLockedBlock } />\n\t\t\t<BlockInfo.Slot />\n\t\t\t<VStack\n\t\t\t\tspacing={ 1 }\n\t\t\t\tpadding={ 4 }\n\t\t\t\tclassName=\"block-editor-block-inspector__block-buttons-container\"\n\t\t\t>\n\t\t\t\t<h2 className=\"block-editor-block-card__title\">\n\t\t\t\t\t{ __( 'Content' ) }\n\t\t\t\t</h2>\n\t\t\t\t{ contentBlocks.map( ( contentBlock ) => (\n\t\t\t\t\t<BlockNavigationButton\n\t\t\t\t\t\tselectedBlock={ selectedBlock }\n\t\t\t\t\t\tkey={ contentBlock.clientId }\n\t\t\t\t\t\tblock={ contentBlock }\n\t\t\t\t\t\tblockTypes={ blockTypes }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</VStack>\n\t\t</div>\n\t);\n}\n\nconst BlockInspector = ( { showNoBlockSelectedMessage = true } ) => {\n\tconst {\n\t\tcount,\n\t\tselectedBlockName,\n\t\tselectedBlockClientId,\n\t\tblockType,\n\t\ttopLevelLockedBlock,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetSelectedBlockCount,\n\t\t\tgetBlockName,\n\t\t\t__unstableGetContentLockingParent,\n\t\t\tgetTemplateLock,\n\t\t} = select( blockEditorStore );\n\n\t\tconst _selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst _selectedBlockName =\n\t\t\t_selectedBlockClientId && getBlockName( _selectedBlockClientId );\n\t\tconst _blockType =\n\t\t\t_selectedBlockName && getBlockType( _selectedBlockName );\n\n\t\treturn {\n\t\t\tcount: getSelectedBlockCount(),\n\t\t\tselectedBlockClientId: _selectedBlockClientId,\n\t\t\tselectedBlockName: _selectedBlockName,\n\t\t\tblockType: _blockType,\n\t\t\ttopLevelLockedBlock:\n\t\t\t\t__unstableGetContentLockingParent( _selectedBlockClientId ) ||\n\t\t\t\t( getTemplateLock( _selectedBlockClientId ) === 'contentOnly'\n\t\t\t\t\t? _selectedBlockClientId\n\t\t\t\t\t: undefined ),\n\t\t};\n\t}, [] );\n\n\tconst availableTabs = useInspectorControlsTabs( blockType?.name );\n\tconst showTabs = availableTabs?.length > 1;\n\n\t// The block inspector animation settings will be completely\n\t// removed in the future to create an API which allows the block\n\t// inspector to transition between what it\n\t// displays based on the relationship between the selected block\n\t// and its parent, and only enable it if the parent is controlling\n\t// its children blocks.\n\tconst blockInspectorAnimationSettings = useBlockInspectorAnimationSettings(\n\t\tblockType,\n\t\tselectedBlockClientId\n\t);\n\n\tif ( count > 1 ) {\n\t\treturn (\n\t\t\t<div className=\"block-editor-block-inspector\">\n\t\t\t\t<MultiSelectionInspector />\n\t\t\t\t{ showTabs ? (\n\t\t\t\t\t<InspectorControlsTabs tabs={ availableTabs } />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<InspectorControls.Slot />\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"color\"\n\t\t\t\t\t\t\tlabel={ __( 'Color' ) }\n\t\t\t\t\t\t\tclassName=\"color-block-support-panel__inner-wrapper\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"typography\"\n\t\t\t\t\t\t\tlabel={ __( 'Typography' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"dimensions\"\n\t\t\t\t\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"border\"\n\t\t\t\t\t\t\tlabel={ __( 'Border' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot group=\"styles\" />\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst isSelectedBlockUnregistered =\n\t\tselectedBlockName === getUnregisteredTypeHandlerName();\n\n\t/*\n\t * If the selected block is of an unregistered type, avoid showing it as an actual selection\n\t * because we want the user to focus on the unregistered block warning, not block settings.\n\t */\n\tif (\n\t\t! blockType ||\n\t\t! selectedBlockClientId ||\n\t\tisSelectedBlockUnregistered\n\t) {\n\t\tif ( showNoBlockSelectedMessage ) {\n\t\t\treturn (\n\t\t\t\t<span className=\"block-editor-block-inspector__no-blocks\">\n\t\t\t\t\t{ __( 'No block selected.' ) }\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n\tif ( topLevelLockedBlock ) {\n\t\treturn (\n\t\t\t<BlockInspectorLockedBlocks\n\t\t\t\ttopLevelLockedBlock={ topLevelLockedBlock }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<BlockInspectorSingleBlockWrapper\n\t\t\tanimate={ blockInspectorAnimationSettings }\n\t\t\twrapper={ ( children ) => (\n\t\t\t\t<AnimatedContainer\n\t\t\t\t\tblockInspectorAnimationSettings={\n\t\t\t\t\t\tblockInspectorAnimationSettings\n\t\t\t\t\t}\n\t\t\t\t\tselectedBlockClientId={ selectedBlockClientId }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</AnimatedContainer>\n\t\t\t) }\n\t\t>\n\t\t\t<BlockInspectorSingleBlock\n\t\t\t\tclientId={ selectedBlockClientId }\n\t\t\t\tblockName={ blockType.name }\n\t\t\t/>\n\t\t</BlockInspectorSingleBlockWrapper>\n\t);\n};\n\nconst BlockInspectorSingleBlockWrapper = ( { animate, wrapper, children } ) => {\n\treturn animate ? wrapper( children ) : children;\n};\n\nconst AnimatedContainer = ( {\n\tblockInspectorAnimationSettings,\n\tselectedBlockClientId,\n\tchildren,\n} ) => {\n\tconst animationOrigin =\n\t\tblockInspectorAnimationSettings &&\n\t\tblockInspectorAnimationSettings.enterDirection === 'leftToRight'\n\t\t\t? -50\n\t\t\t: 50;\n\n\treturn (\n\t\t<motion.div\n\t\t\tanimate={ {\n\t\t\t\tx: 0,\n\t\t\t\topacity: 1,\n\t\t\t\ttransition: {\n\t\t\t\t\tease: 'easeInOut',\n\t\t\t\t\tduration: 0.14,\n\t\t\t\t},\n\t\t\t} }\n\t\t\tinitial={ {\n\t\t\t\tx: animationOrigin,\n\t\t\t\topacity: 0,\n\t\t\t} }\n\t\t\tkey={ selectedBlockClientId }\n\t\t>\n\t\t\t{ children }\n\t\t</motion.div>\n\t);\n};\n\nconst BlockInspectorSingleBlock = ( { clientId, blockName } ) => {\n\tconst availableTabs = useInspectorControlsTabs( blockName );\n\tconst showTabs = availableTabs?.length > 1;\n\n\tconst hasBlockStyles = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockStyles } = select( blocksStore );\n\t\t\tconst blockStyles = getBlockStyles( blockName );\n\t\t\treturn blockStyles && blockStyles.length > 0;\n\t\t},\n\t\t[ blockName ]\n\t);\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\n\treturn (\n\t\t<div className=\"block-editor-block-inspector\">\n\t\t\t<BlockCard\n\t\t\t\t{ ...blockInformation }\n\t\t\t\tclassName={ blockInformation.isSynced && 'is-synced' }\n\t\t\t/>\n\t\t\t<BlockVariationTransforms blockClientId={ clientId } />\n\t\t\t<BlockInfo.Slot />\n\t\t\t{ showTabs && (\n\t\t\t\t<InspectorControlsTabs\n\t\t\t\t\thasBlockStyles={ hasBlockStyles }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tblockName={ blockName }\n\t\t\t\t\ttabs={ availableTabs }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ ! showTabs && (\n\t\t\t\t<>\n\t\t\t\t\t{ hasBlockStyles && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<PanelBody title={ __( 'Styles' ) }>\n\t\t\t\t\t\t\t\t<BlockStyles clientId={ clientId } />\n\t\t\t\t\t\t\t\t{ hasBlockSupport(\n\t\t\t\t\t\t\t\t\tblockName,\n\t\t\t\t\t\t\t\t\t'defaultStylePicker',\n\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t) && (\n\t\t\t\t\t\t\t\t\t<DefaultStylePicker\n\t\t\t\t\t\t\t\t\t\tblockName={ blockName }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t\t<InspectorControls.Slot />\n\t\t\t\t\t<InspectorControls.Slot group=\"list\" />\n\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\tgroup=\"color\"\n\t\t\t\t\t\tlabel={ __( 'Color' ) }\n\t\t\t\t\t\tclassName=\"color-block-support-panel__inner-wrapper\"\n\t\t\t\t\t/>\n\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\tgroup=\"typography\"\n\t\t\t\t\t\tlabel={ __( 'Typography' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\tgroup=\"dimensions\"\n\t\t\t\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\tgroup=\"border\"\n\t\t\t\t\t\tlabel={ __( 'Border' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<InspectorControls.Slot group=\"styles\" />\n\t\t\t\t\t<PositionControls />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AdvancedControls />\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t<SkipToSelectedBlock key=\"back\" />\n\t\t</div>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-inspector/README.md\n */\nexport default BlockInspector;\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport default function useBlockInspectorAnimationSettings(\n\tblockType,\n\tselectedBlockClientId\n) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tif ( blockType ) {\n\t\t\t\tconst globalBlockInspectorAnimationSettings =\n\t\t\t\t\tselect( blockEditorStore ).getSettings()\n\t\t\t\t\t\t.blockInspectorAnimation;\n\n\t\t\t\t// Get the name of the block that will allow it's children to be animated.\n\t\t\t\tconst animationParent =\n\t\t\t\t\tglobalBlockInspectorAnimationSettings?.animationParent;\n\n\t\t\t\t// Determine whether the animationParent block is a parent of the selected block.\n\t\t\t\tconst { getSelectedBlockClientId, getBlockParentsByBlockName } =\n\t\t\t\t\tselect( blockEditorStore );\n\t\t\t\tconst _selectedBlockClientId = getSelectedBlockClientId();\n\t\t\t\tconst animationParentBlockClientId = getBlockParentsByBlockName(\n\t\t\t\t\t_selectedBlockClientId,\n\t\t\t\t\tanimationParent,\n\t\t\t\t\ttrue\n\t\t\t\t)[ 0 ];\n\n\t\t\t\t// If the selected block is not a child of the animationParent block,\n\t\t\t\t// and not an animationParent block itself, don't animate.\n\t\t\t\tif (\n\t\t\t\t\t! animationParentBlockClientId &&\n\t\t\t\t\tblockType.name !== animationParent\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn globalBlockInspectorAnimationSettings?.[\n\t\t\t\t\tblockType.name\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t[ selectedBlockClientId, blockType ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useEffect, useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockPopoverInbetween from '../block-popover/inbetween';\nimport { store as blockEditorStore } from '../../store';\nimport Inserter from '../inserter';\n\nfunction ZoomOutModeInserters( { __unstableContentRef } ) {\n\tconst [ isReady, setIsReady ] = useState( false );\n\tconst blockOrder = useSelect( ( select ) => {\n\t\treturn select( blockEditorStore ).getBlockOrder();\n\t}, [] );\n\n\t// Defer the initial rendering to avoid the jumps due to the animation.\n\tuseEffect( () => {\n\t\tconst timeout = setTimeout( () => {\n\t\t\tsetIsReady( true );\n\t\t}, 500 );\n\t\treturn () => {\n\t\t\tclearTimeout( timeout );\n\t\t};\n\t}, [] );\n\n\tif ( ! isReady ) {\n\t\treturn null;\n\t}\n\n\treturn blockOrder.map( ( clientId, index ) => {\n\t\tif ( index === blockOrder.length - 1 ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<BlockPopoverInbetween\n\t\t\t\tkey={ clientId }\n\t\t\t\tpreviousClientId={ clientId }\n\t\t\t\tnextClientId={ blockOrder[ index + 1 ] }\n\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t>\n\t\t\t\t<div className=\"block-editor-block-list__insertion-point-inserter is-with-inserter\">\n\t\t\t\t\t<Inserter\n\t\t\t\t\t\tposition=\"bottom center\"\n\t\t\t\t\t\tclientId={ blockOrder[ index + 1 ] }\n\t\t\t\t\t\t__experimentalIsQuick\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</BlockPopoverInbetween>\n\t\t);\n\t} );\n}\n\nexport default ZoomOutModeInserters;\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useViewportMatch } from '@wordpress/compose';\nimport { Popover } from '@wordpress/components';\nimport { __unstableUseShortcutEventMatch as useShortcutEventMatch } from '@wordpress/keyboard-shortcuts';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport {\n\tInsertionPointOpenRef,\n\tdefault as InsertionPoint,\n} from './insertion-point';\nimport SelectedBlockPopover from './selected-block-popover';\nimport { store as blockEditorStore } from '../../store';\nimport BlockContextualToolbar from './block-contextual-toolbar';\nimport usePopoverScroll from '../block-popover/use-popover-scroll';\nimport ZoomOutModeInserters from './zoom-out-mode-inserters';\n\nfunction selector( select ) {\n\tconst { __unstableGetEditorMode, getSettings, isTyping } =\n\t\tselect( blockEditorStore );\n\n\treturn {\n\t\tisZoomOutMode: __unstableGetEditorMode() === 'zoom-out',\n\t\thasFixedToolbar: getSettings().hasFixedToolbar,\n\t\tisTyping: isTyping(),\n\t};\n}\n\n/**\n * Renders block tools (the block toolbar, select/navigation mode toolbar, the\n * insertion point and a slot for the inline rich text toolbar). Must be wrapped\n * around the block content and editor styles wrapper or iframe.\n *\n * @param {Object} $0                      Props.\n * @param {Object} $0.children             The block content and style container.\n * @param {Object} $0.__unstableContentRef Ref holding the content scroll container.\n */\nexport default function BlockTools( {\n\tchildren,\n\t__unstableContentRef,\n\t...props\n} ) {\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\tconst { hasFixedToolbar, isZoomOutMode, isTyping } = useSelect(\n\t\tselector,\n\t\t[]\n\t);\n\tconst isMatch = useShortcutEventMatch();\n\tconst { getSelectedBlockClientIds, getBlockRootClientId } =\n\t\tuseSelect( blockEditorStore );\n\tconst {\n\t\tduplicateBlocks,\n\t\tremoveBlocks,\n\t\tinsertAfterBlock,\n\t\tinsertBeforeBlock,\n\t\tclearSelectedBlock,\n\t\tmoveBlocksUp,\n\t\tmoveBlocksDown,\n\t} = useDispatch( blockEditorStore );\n\n\tfunction onKeyDown( event ) {\n\t\tif ( event.defaultPrevented ) return;\n\n\t\tif ( isMatch( 'core/block-editor/move-up', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\t\t\t\tmoveBlocksUp( clientIds, rootClientId );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/move-down', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\t\t\t\tmoveBlocksDown( clientIds, rootClientId );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/duplicate', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tduplicateBlocks( clientIds );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/remove', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tremoveBlocks( clientIds );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/insert-after', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tinsertAfterBlock( clientIds[ clientIds.length - 1 ] );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/insert-before', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tinsertBeforeBlock( clientIds[ 0 ] );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/unselect', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tclearSelectedBlock();\n\t\t\t\tevent.target.ownerDocument.defaultView\n\t\t\t\t\t.getSelection()\n\t\t\t\t\t.removeAllRanges();\n\t\t\t\t__unstableContentRef?.current.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tconst blockToolbarRef = usePopoverScroll( __unstableContentRef );\n\tconst blockToolbarAfterRef = usePopoverScroll( __unstableContentRef );\n\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/no-static-element-interactions\n\t\t<div { ...props } onKeyDown={ onKeyDown }>\n\t\t\t<InsertionPointOpenRef.Provider value={ useRef( false ) }>\n\t\t\t\t{ ! isTyping && (\n\t\t\t\t\t<InsertionPoint\n\t\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ! isZoomOutMode &&\n\t\t\t\t\t( hasFixedToolbar || ! isLargeViewport ) && (\n\t\t\t\t\t\t<BlockContextualToolbar isFixed />\n\t\t\t\t\t) }\n\t\t\t\t{ /* Even if the toolbar is fixed, the block popover is still\n\t\t\t\t\tneeded for navigation and zoom-out mode. */ }\n\t\t\t\t<SelectedBlockPopover\n\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t/>\n\t\t\t\t{ /* Used for the inline rich text toolbar. */ }\n\t\t\t\t<Popover.Slot name=\"block-toolbar\" ref={ blockToolbarRef } />\n\t\t\t\t{ children }\n\t\t\t\t{ /* Used for inline rich text popovers. */ }\n\t\t\t\t<Popover.Slot\n\t\t\t\t\tname=\"__unstable-block-tools-after\"\n\t\t\t\t\tref={ blockToolbarAfterRef }\n\t\t\t\t/>\n\t\t\t\t{ isZoomOutMode && (\n\t\t\t\t\t<ZoomOutModeInserters\n\t\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</InsertionPointOpenRef.Provider>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport InserterMenu from './menu';\nimport { store as blockEditorStore } from '../../store';\n\nconst noop = () => {};\n\nfunction InserterLibrary(\n\t{\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\tshowInserterHelpPanel,\n\t\tshowMostUsedBlocks = false,\n\t\t__experimentalInsertionIndex,\n\t\t__experimentalFilterValue,\n\t\tonSelect = noop,\n\t\tshouldFocusBlock = false,\n\t},\n\tref\n) {\n\tconst { destinationRootClientId, prioritizePatterns } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockRootClientId, getSettings } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\tconst _rootClientId =\n\t\t\t\trootClientId || getBlockRootClientId( clientId ) || undefined;\n\t\t\treturn {\n\t\t\t\tdestinationRootClientId: _rootClientId,\n\t\t\t\tprioritizePatterns:\n\t\t\t\t\tgetSettings().__experimentalPreferPatternsOnRoot,\n\t\t\t};\n\t\t},\n\t\t[ clientId, rootClientId ]\n\t);\n\n\treturn (\n\t\t<InserterMenu\n\t\t\tonSelect={ onSelect }\n\t\t\trootClientId={ destinationRootClientId }\n\t\t\tclientId={ clientId }\n\t\t\tisAppender={ isAppender }\n\t\t\tshowInserterHelpPanel={ showInserterHelpPanel }\n\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t__experimentalInsertionIndex={ __experimentalInsertionIndex }\n\t\t\t__experimentalFilterValue={ __experimentalFilterValue }\n\t\t\tshouldFocusBlock={ shouldFocusBlock }\n\t\t\tprioritizePatterns={ prioritizePatterns }\n\t\t\tref={ ref }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( InserterLibrary );\n","/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\nimport { __ } from '@wordpress/i18n';\n\nfunction KeyboardShortcuts() {\n\treturn null;\n}\n\nfunction KeyboardShortcutsRegister() {\n\t// Registering the shortcuts.\n\tconst { registerShortcut } = useDispatch( keyboardShortcutsStore );\n\tuseEffect( () => {\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/duplicate',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Duplicate the selected block(s).' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryShift',\n\t\t\t\tcharacter: 'd',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/remove',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Remove the selected block(s).' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'access',\n\t\t\t\tcharacter: 'z',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/insert-before',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __(\n\t\t\t\t'Insert a new block before the selected block(s).'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryAlt',\n\t\t\t\tcharacter: 't',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/insert-after',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __(\n\t\t\t\t'Insert a new block after the selected block(s).'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryAlt',\n\t\t\t\tcharacter: 'y',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/delete-multi-selection',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Delete selection.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tcharacter: 'del',\n\t\t\t},\n\t\t\taliases: [\n\t\t\t\t{\n\t\t\t\t\tcharacter: 'backspace',\n\t\t\t\t},\n\t\t\t],\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/select-all',\n\t\t\tcategory: 'selection',\n\t\t\tdescription: __(\n\t\t\t\t'Select all text when typing. Press again to select all blocks.'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 'a',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/unselect',\n\t\t\tcategory: 'selection',\n\t\t\tdescription: __( 'Clear selection.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tcharacter: 'escape',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/focus-toolbar',\n\t\t\tcategory: 'global',\n\t\t\tdescription: __( 'Navigate to the nearest toolbar.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'alt',\n\t\t\t\tcharacter: 'F10',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/move-up',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Move the selected block(s) up.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'secondary',\n\t\t\t\tcharacter: 't',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/move-down',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Move the selected block(s) down.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'secondary',\n\t\t\t\tcharacter: 'y',\n\t\t\t},\n\t\t} );\n\t}, [ registerShortcut ] );\n\n\treturn null;\n}\n\nKeyboardShortcuts.Register = KeyboardShortcutsRegister;\n\nexport default KeyboardShortcuts;\n","/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Scrolls the multi block selection end into view if not in view already. This\n * is important to do after selection by keyboard.\n *\n * @deprecated\n */\nexport function MultiSelectScrollIntoView() {\n\tdeprecated( 'wp.blockEditor.MultiSelectScrollIntoView', {\n\t\thint: 'This behaviour is now built-in.',\n\t\tsince: '5.8',\n\t} );\n\treturn null;\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect, useMergeRefs } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { isTextField } from '@wordpress/dom';\nimport {\n\tUP,\n\tRIGHT,\n\tDOWN,\n\tLEFT,\n\tENTER,\n\tBACKSPACE,\n\tESCAPE,\n\tTAB,\n} from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Set of key codes upon which typing is to be initiated on a keydown event.\n *\n * @type {Set<number>}\n */\nconst KEY_DOWN_ELIGIBLE_KEY_CODES = new Set( [\n\tUP,\n\tRIGHT,\n\tDOWN,\n\tLEFT,\n\tENTER,\n\tBACKSPACE,\n] );\n\n/**\n * Returns true if a given keydown event can be inferred as intent to start\n * typing, or false otherwise. A keydown is considered eligible if it is a\n * text navigation without shift active.\n *\n * @param {KeyboardEvent} event Keydown event to test.\n *\n * @return {boolean} Whether event is eligible to start typing.\n */\nfunction isKeyDownEligibleForStartTyping( event ) {\n\tconst { keyCode, shiftKey } = event;\n\treturn ! shiftKey && KEY_DOWN_ELIGIBLE_KEY_CODES.has( keyCode );\n}\n\n/**\n * Removes the `isTyping` flag when the mouse moves in the document of the given\n * element.\n */\nexport function useMouseMoveTypingReset() {\n\tconst isTyping = useSelect(\n\t\t( select ) => select( blockEditorStore ).isTyping(),\n\t\t[]\n\t);\n\tconst { stopTyping } = useDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! isTyping ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { ownerDocument } = node;\n\t\t\tlet lastClientX;\n\t\t\tlet lastClientY;\n\n\t\t\t/**\n\t\t\t * On mouse move, unset typing flag if user has moved cursor.\n\t\t\t *\n\t\t\t * @param {MouseEvent} event Mousemove event.\n\t\t\t */\n\t\t\tfunction stopTypingOnMouseMove( event ) {\n\t\t\t\tconst { clientX, clientY } = event;\n\n\t\t\t\t// We need to check that the mouse really moved because Safari\n\t\t\t\t// triggers mousemove events when shift or ctrl are pressed.\n\t\t\t\tif (\n\t\t\t\t\tlastClientX &&\n\t\t\t\t\tlastClientY &&\n\t\t\t\t\t( lastClientX !== clientX || lastClientY !== clientY )\n\t\t\t\t) {\n\t\t\t\t\tstopTyping();\n\t\t\t\t}\n\n\t\t\t\tlastClientX = clientX;\n\t\t\t\tlastClientY = clientY;\n\t\t\t}\n\n\t\t\townerDocument.addEventListener(\n\t\t\t\t'mousemove',\n\t\t\t\tstopTypingOnMouseMove\n\t\t\t);\n\n\t\t\treturn () => {\n\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t'mousemove',\n\t\t\t\t\tstopTypingOnMouseMove\n\t\t\t\t);\n\t\t\t};\n\t\t},\n\t\t[ isTyping, stopTyping ]\n\t);\n}\n\n/**\n * Sets and removes the `isTyping` flag based on user actions:\n *\n * - Sets the flag if the user types within the given element.\n * - Removes the flag when the user selects some text, focusses a non-text\n *   field, presses ESC or TAB, or moves the mouse in the document.\n */\nexport function useTypingObserver() {\n\tconst { isTyping, hasInlineToolbar } = useSelect( ( select ) => {\n\t\tconst { isTyping: _isTyping, getSettings } = select( blockEditorStore );\n\t\treturn {\n\t\t\tisTyping: _isTyping(),\n\t\t\thasInlineToolbar: getSettings().hasInlineToolbar,\n\t\t};\n\t}, [] );\n\tconst { startTyping, stopTyping } = useDispatch( blockEditorStore );\n\n\tconst ref1 = useMouseMoveTypingReset();\n\tconst ref2 = useRefEffect(\n\t\t( node ) => {\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\t\t\tconst selection = defaultView.getSelection();\n\n\t\t\t// Listeners to stop typing should only be added when typing.\n\t\t\t// Listeners to start typing should only be added when not typing.\n\t\t\tif ( isTyping ) {\n\t\t\t\tlet timerId;\n\n\t\t\t\t/**\n\t\t\t\t * Stops typing when focus transitions to a non-text field element.\n\t\t\t\t *\n\t\t\t\t * @param {FocusEvent} event Focus event.\n\t\t\t\t */\n\t\t\t\tfunction stopTypingOnNonTextField( event ) {\n\t\t\t\t\tconst { target } = event;\n\n\t\t\t\t\t// Since focus to a non-text field via arrow key will trigger\n\t\t\t\t\t// before the keydown event, wait until after current stack\n\t\t\t\t\t// before evaluating whether typing is to be stopped. Otherwise,\n\t\t\t\t\t// typing will re-start.\n\t\t\t\t\ttimerId = defaultView.setTimeout( () => {\n\t\t\t\t\t\tif ( ! isTextField( target ) ) {\n\t\t\t\t\t\t\tstopTyping();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Unsets typing flag if user presses Escape while typing flag is\n\t\t\t\t * active.\n\t\t\t\t *\n\t\t\t\t * @param {KeyboardEvent} event Keypress or keydown event to\n\t\t\t\t *                              interpret.\n\t\t\t\t */\n\t\t\t\tfunction stopTypingOnEscapeKey( event ) {\n\t\t\t\t\tconst { keyCode } = event;\n\n\t\t\t\t\tif ( keyCode === ESCAPE || keyCode === TAB ) {\n\t\t\t\t\t\tstopTyping();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * On selection change, unset typing flag if user has made an\n\t\t\t\t * uncollapsed (shift) selection.\n\t\t\t\t */\n\t\t\t\tfunction stopTypingOnSelectionUncollapse() {\n\t\t\t\t\tif ( ! selection.isCollapsed ) {\n\t\t\t\t\t\tstopTyping();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnode.addEventListener( 'focus', stopTypingOnNonTextField );\n\t\t\t\tnode.addEventListener( 'keydown', stopTypingOnEscapeKey );\n\n\t\t\t\tif ( ! hasInlineToolbar ) {\n\t\t\t\t\townerDocument.addEventListener(\n\t\t\t\t\t\t'selectionchange',\n\t\t\t\t\t\tstopTypingOnSelectionUncollapse\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn () => {\n\t\t\t\t\tdefaultView.clearTimeout( timerId );\n\t\t\t\t\tnode.removeEventListener(\n\t\t\t\t\t\t'focus',\n\t\t\t\t\t\tstopTypingOnNonTextField\n\t\t\t\t\t);\n\t\t\t\t\tnode.removeEventListener(\n\t\t\t\t\t\t'keydown',\n\t\t\t\t\t\tstopTypingOnEscapeKey\n\t\t\t\t\t);\n\t\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t\t'selectionchange',\n\t\t\t\t\t\tstopTypingOnSelectionUncollapse\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Handles a keypress or keydown event to infer intention to start\n\t\t\t * typing.\n\t\t\t *\n\t\t\t * @param {KeyboardEvent} event Keypress or keydown event to interpret.\n\t\t\t */\n\t\t\tfunction startTypingInTextField( event ) {\n\t\t\t\tconst { type, target } = event;\n\n\t\t\t\t// Abort early if already typing, or key press is incurred outside a\n\t\t\t\t// text field (e.g. arrow-ing through toolbar buttons).\n\t\t\t\t// Ignore typing if outside the current DOM container\n\t\t\t\tif ( ! isTextField( target ) || ! node.contains( target ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Special-case keydown because certain keys do not emit a keypress\n\t\t\t\t// event. Conversely avoid keydown as the canonical event since\n\t\t\t\t// there are many keydown which are explicitly not targeted for\n\t\t\t\t// typing.\n\t\t\t\tif (\n\t\t\t\t\ttype === 'keydown' &&\n\t\t\t\t\t! isKeyDownEligibleForStartTyping( event )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstartTyping();\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'keypress', startTypingInTextField );\n\t\t\tnode.addEventListener( 'keydown', startTypingInTextField );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'keypress', startTypingInTextField );\n\t\t\t\tnode.removeEventListener( 'keydown', startTypingInTextField );\n\t\t\t};\n\t\t},\n\t\t[ isTyping, hasInlineToolbar, startTyping, stopTyping ]\n\t);\n\n\treturn useMergeRefs( [ ref1, ref2 ] );\n}\n\nfunction ObserveTyping( { children } ) {\n\treturn <div ref={ useTypingObserver() }>{ children }</div>;\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/observe-typing/README.md\n */\nexport default ObserveTyping;\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { computeCaretRect, getScrollContainer } from '@wordpress/dom';\nimport { useSelect } from '@wordpress/data';\nimport { UP, DOWN, LEFT, RIGHT } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst isIE = window.navigator.userAgent.indexOf( 'Trident' ) !== -1;\nconst arrowKeyCodes = new Set( [ UP, DOWN, LEFT, RIGHT ] );\nconst initialTriggerPercentage = 0.75;\n\nexport function useTypewriter() {\n\tconst hasSelectedBlock = useSelect(\n\t\t( select ) => select( blockEditorStore ).hasSelectedBlock(),\n\t\t[]\n\t);\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! hasSelectedBlock ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\tlet scrollResizeRafId;\n\t\t\tlet onKeyDownRafId;\n\n\t\t\tlet caretRect;\n\n\t\t\tfunction onScrollResize() {\n\t\t\t\tif ( scrollResizeRafId ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tscrollResizeRafId = defaultView.requestAnimationFrame( () => {\n\t\t\t\t\tcomputeCaretRectangle();\n\t\t\t\t\tscrollResizeRafId = null;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tfunction onKeyDown( event ) {\n\t\t\t\t// Ensure the any remaining request is cancelled.\n\t\t\t\tif ( onKeyDownRafId ) {\n\t\t\t\t\tdefaultView.cancelAnimationFrame( onKeyDownRafId );\n\t\t\t\t}\n\n\t\t\t\t// Use an animation frame for a smooth result.\n\t\t\t\tonKeyDownRafId = defaultView.requestAnimationFrame( () => {\n\t\t\t\t\tmaintainCaretPosition( event );\n\t\t\t\t\tonKeyDownRafId = null;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Maintains the scroll position after a selection change caused by a\n\t\t\t * keyboard event.\n\t\t\t *\n\t\t\t * @param {KeyboardEvent} event Keyboard event.\n\t\t\t */\n\t\t\tfunction maintainCaretPosition( { keyCode } ) {\n\t\t\t\tif ( ! isSelectionEligibleForScroll() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst currentCaretRect = computeCaretRect( defaultView );\n\n\t\t\t\tif ( ! currentCaretRect ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// If for some reason there is no position set to be scrolled to, let\n\t\t\t\t// this be the position to be scrolled to in the future.\n\t\t\t\tif ( ! caretRect ) {\n\t\t\t\t\tcaretRect = currentCaretRect;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Even though enabling the typewriter effect for arrow keys results in\n\t\t\t\t// a pleasant experience, it may not be the case for everyone, so, for\n\t\t\t\t// now, let's disable it.\n\t\t\t\tif ( arrowKeyCodes.has( keyCode ) ) {\n\t\t\t\t\t// Reset the caret position to maintain.\n\t\t\t\t\tcaretRect = currentCaretRect;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst diff = currentCaretRect.top - caretRect.top;\n\n\t\t\t\tif ( diff === 0 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst scrollContainer = getScrollContainer( node );\n\n\t\t\t\t// The page must be scrollable.\n\t\t\t\tif ( ! scrollContainer ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst windowScroll =\n\t\t\t\t\tscrollContainer === ownerDocument.body ||\n\t\t\t\t\tscrollContainer === ownerDocument.documentElement;\n\t\t\t\tconst scrollY = windowScroll\n\t\t\t\t\t? defaultView.scrollY\n\t\t\t\t\t: scrollContainer.scrollTop;\n\t\t\t\tconst scrollContainerY = windowScroll\n\t\t\t\t\t? 0\n\t\t\t\t\t: scrollContainer.getBoundingClientRect().top;\n\t\t\t\tconst relativeScrollPosition = windowScroll\n\t\t\t\t\t? caretRect.top / defaultView.innerHeight\n\t\t\t\t\t: ( caretRect.top - scrollContainerY ) /\n\t\t\t\t\t  ( defaultView.innerHeight - scrollContainerY );\n\n\t\t\t\t// If the scroll position is at the start, the active editable element\n\t\t\t\t// is the last one, and the caret is positioned within the initial\n\t\t\t\t// trigger percentage of the page, do not scroll the page.\n\t\t\t\t// The typewriter effect should not kick in until an empty page has been\n\t\t\t\t// filled with the initial trigger percentage or the user scrolls\n\t\t\t\t// intentionally down.\n\t\t\t\tif (\n\t\t\t\t\tscrollY === 0 &&\n\t\t\t\t\trelativeScrollPosition < initialTriggerPercentage &&\n\t\t\t\t\tisLastEditableNode()\n\t\t\t\t) {\n\t\t\t\t\t// Reset the caret position to maintain.\n\t\t\t\t\tcaretRect = currentCaretRect;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst scrollContainerHeight = windowScroll\n\t\t\t\t\t? defaultView.innerHeight\n\t\t\t\t\t: scrollContainer.clientHeight;\n\n\t\t\t\t// Abort if the target scroll position would scroll the caret out of\n\t\t\t\t// view.\n\t\t\t\tif (\n\t\t\t\t\t// The caret is under the lower fold.\n\t\t\t\t\tcaretRect.top + caretRect.height >\n\t\t\t\t\t\tscrollContainerY + scrollContainerHeight ||\n\t\t\t\t\t// The caret is above the upper fold.\n\t\t\t\t\tcaretRect.top < scrollContainerY\n\t\t\t\t) {\n\t\t\t\t\t// Reset the caret position to maintain.\n\t\t\t\t\tcaretRect = currentCaretRect;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( windowScroll ) {\n\t\t\t\t\tdefaultView.scrollBy( 0, diff );\n\t\t\t\t} else {\n\t\t\t\t\tscrollContainer.scrollTop += diff;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Adds a `selectionchange` listener to reset the scroll position to be\n\t\t\t * maintained.\n\t\t\t */\n\t\t\tfunction addSelectionChangeListener() {\n\t\t\t\townerDocument.addEventListener(\n\t\t\t\t\t'selectionchange',\n\t\t\t\t\tcomputeCaretRectOnSelectionChange\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Resets the scroll position to be maintained during a `selectionchange`\n\t\t\t * event. Also removes the listener, so it acts as a one-time listener.\n\t\t\t */\n\t\t\tfunction computeCaretRectOnSelectionChange() {\n\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t'selectionchange',\n\t\t\t\t\tcomputeCaretRectOnSelectionChange\n\t\t\t\t);\n\t\t\t\tcomputeCaretRectangle();\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Resets the scroll position to be maintained.\n\t\t\t */\n\t\t\tfunction computeCaretRectangle() {\n\t\t\t\tif ( isSelectionEligibleForScroll() ) {\n\t\t\t\t\tcaretRect = computeCaretRect( defaultView );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Checks if the current situation is elegible for scroll:\n\t\t\t * - There should be one and only one block selected.\n\t\t\t * - The component must contain the selection.\n\t\t\t * - The active element must be contenteditable.\n\t\t\t */\n\t\t\tfunction isSelectionEligibleForScroll() {\n\t\t\t\treturn (\n\t\t\t\t\tnode.contains( ownerDocument.activeElement ) &&\n\t\t\t\t\townerDocument.activeElement.isContentEditable\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfunction isLastEditableNode() {\n\t\t\t\tconst editableNodes = node.querySelectorAll(\n\t\t\t\t\t'[contenteditable=\"true\"]'\n\t\t\t\t);\n\t\t\t\tconst lastEditableNode =\n\t\t\t\t\teditableNodes[ editableNodes.length - 1 ];\n\t\t\t\treturn lastEditableNode === ownerDocument.activeElement;\n\t\t\t}\n\n\t\t\t// When the user scrolls or resizes, the scroll position should be\n\t\t\t// reset.\n\t\t\tdefaultView.addEventListener( 'scroll', onScrollResize, true );\n\t\t\tdefaultView.addEventListener( 'resize', onScrollResize, true );\n\n\t\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\t\tnode.addEventListener( 'keyup', maintainCaretPosition );\n\t\t\tnode.addEventListener( 'mousedown', addSelectionChangeListener );\n\t\t\tnode.addEventListener( 'touchstart', addSelectionChangeListener );\n\n\t\t\treturn () => {\n\t\t\t\tdefaultView.removeEventListener(\n\t\t\t\t\t'scroll',\n\t\t\t\t\tonScrollResize,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tdefaultView.removeEventListener(\n\t\t\t\t\t'resize',\n\t\t\t\t\tonScrollResize,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\n\t\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t\t\tnode.removeEventListener( 'keyup', maintainCaretPosition );\n\t\t\t\tnode.removeEventListener(\n\t\t\t\t\t'mousedown',\n\t\t\t\t\taddSelectionChangeListener\n\t\t\t\t);\n\t\t\t\tnode.removeEventListener(\n\t\t\t\t\t'touchstart',\n\t\t\t\t\taddSelectionChangeListener\n\t\t\t\t);\n\n\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t'selectionchange',\n\t\t\t\t\tcomputeCaretRectOnSelectionChange\n\t\t\t\t);\n\n\t\t\t\tdefaultView.cancelAnimationFrame( scrollResizeRafId );\n\t\t\t\tdefaultView.cancelAnimationFrame( onKeyDownRafId );\n\t\t\t};\n\t\t},\n\t\t[ hasSelectedBlock ]\n\t);\n}\n\nfunction Typewriter( { children } ) {\n\treturn (\n\t\t<div ref={ useTypewriter() } className=\"block-editor__typewriter\">\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n\n/**\n * The exported component. The implementation of Typewriter faced technical\n * challenges in Internet Explorer, and is simply skipped, rendering the given\n * props children instead.\n *\n * @type {WPComponent}\n */\nconst TypewriterOrIEBypass = isIE ? ( props ) => props.children : Typewriter;\n\n/**\n * Ensures that the text selection keeps the same vertical distance from the\n * viewport during keyboard events within this component. The vertical distance\n * can vary. It is the last clicked or scrolled to position.\n */\nexport default TypewriterOrIEBypass;\n","/**\n * WordPress dependencies\n */\nimport { createContext, useContext, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit/context';\n\nconst RenderedRefsContext = createContext( {} );\n\n/**\n * Immutably adds an unique identifier to a set scoped for a given block type.\n *\n * @param {Object} renderedBlocks Rendered blocks grouped by block name\n * @param {string} blockName      Name of the block.\n * @param {*}      uniqueId       Any value that acts as a unique identifier for a block instance.\n *\n * @return {Object} The list of rendered blocks grouped by block name.\n */\nfunction addToBlockType( renderedBlocks, blockName, uniqueId ) {\n\tconst result = {\n\t\t...renderedBlocks,\n\t\t[ blockName ]: renderedBlocks[ blockName ]\n\t\t\t? new Set( renderedBlocks[ blockName ] )\n\t\t\t: new Set(),\n\t};\n\tresult[ blockName ].add( uniqueId );\n\n\treturn result;\n}\n\n/**\n * A React context provider for use with the `useHasRecursion` hook to prevent recursive\n * renders.\n *\n * Wrap block content with this provider and provide the same `uniqueId` prop as used\n * with `useHasRecursion`.\n *\n * @param {Object}      props\n * @param {*}           props.uniqueId  Any value that acts as a unique identifier for a block instance.\n * @param {string}      props.blockName Optional block name.\n * @param {JSX.Element} props.children  React children.\n *\n * @return {JSX.Element} A React element.\n */\nexport function RecursionProvider( { children, uniqueId, blockName = '' } ) {\n\tconst previouslyRenderedBlocks = useContext( RenderedRefsContext );\n\tconst { name } = useBlockEditContext();\n\n\tblockName = blockName || name;\n\n\tconst newRenderedBlocks = useMemo(\n\t\t() => addToBlockType( previouslyRenderedBlocks, blockName, uniqueId ),\n\t\t[ previouslyRenderedBlocks, blockName, uniqueId ]\n\t);\n\n\treturn (\n\t\t<RenderedRefsContext.Provider value={ newRenderedBlocks }>\n\t\t\t{ children }\n\t\t</RenderedRefsContext.Provider>\n\t);\n}\n\n/**\n * A React hook for keeping track of blocks previously rendered up in the block\n * tree. Blocks susceptible to recursion can use this hook in their `Edit`\n * function to prevent said recursion.\n *\n * Use this with the `RecursionProvider` component, using the same `uniqueId` value\n * for both the hook and the provider.\n *\n * @param {*}      uniqueId  Any value that acts as a unique identifier for a block instance.\n * @param {string} blockName Optional block name.\n *\n * @return {boolean} A boolean describing whether the provided id has already been rendered.\n */\nexport function useHasRecursion( uniqueId, blockName = '' ) {\n\tconst previouslyRenderedBlocks = useContext( RenderedRefsContext );\n\tconst { name } = useBlockEditContext();\n\tblockName = blockName || name;\n\treturn Boolean( previouslyRenderedBlocks[ blockName ]?.has( uniqueId ) );\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst closeSmall = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z\" />\n\t</SVG>\n);\n\nexport default closeSmall;\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalVStack as VStack,\n\t__experimentalHStack as HStack,\n\t__experimentalHeading as Heading,\n\t__experimentalSpacer as Spacer,\n\tButton,\n\t__experimentalText as Text,\n} from '@wordpress/components';\nimport { closeSmall } from '@wordpress/icons';\nimport { __ } from '@wordpress/i18n';\n\nexport default function InspectorPopoverHeader( {\n\ttitle,\n\thelp,\n\tactions = [],\n\tonClose,\n} ) {\n\treturn (\n\t\t<VStack className=\"block-editor-inspector-popover-header\" spacing={ 4 }>\n\t\t\t<HStack alignment=\"center\">\n\t\t\t\t<Heading\n\t\t\t\t\tclassName=\"block-editor-inspector-popover-header__heading\"\n\t\t\t\t\tlevel={ 2 }\n\t\t\t\t\tsize={ 13 }\n\t\t\t\t>\n\t\t\t\t\t{ title }\n\t\t\t\t</Heading>\n\t\t\t\t<Spacer />\n\t\t\t\t{ actions.map( ( { label, icon, onClick } ) => (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tkey={ label }\n\t\t\t\t\t\tclassName=\"block-editor-inspector-popover-header__action\"\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tvariant={ ! icon && 'tertiary' }\n\t\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ! icon && label }\n\t\t\t\t\t</Button>\n\t\t\t\t) ) }\n\t\t\t\t{ onClose && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"block-editor-inspector-popover-header__action\"\n\t\t\t\t\t\tlabel={ __( 'Close' ) }\n\t\t\t\t\t\ticon={ closeSmall }\n\t\t\t\t\t\tonClick={ onClose }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</HStack>\n\t\t\t{ help && <Text>{ help }</Text> }\n\t\t</VStack>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { DateTimePicker } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { forwardRef } from '@wordpress/element';\nimport { getSettings } from '@wordpress/date';\n\n/**\n * Internal dependencies\n */\nimport InspectorPopoverHeader from '../inspector-popover-header';\n\nfunction PublishDateTimePicker(\n\t{ onClose, onChange, ...additionalProps },\n\tref\n) {\n\treturn (\n\t\t<div ref={ ref } className=\"block-editor-publish-date-time-picker\">\n\t\t\t<InspectorPopoverHeader\n\t\t\t\ttitle={ __( 'Publish' ) }\n\t\t\t\tactions={ [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __( 'Now' ),\n\t\t\t\t\t\tonClick: () => onChange?.( null ),\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t\tonClose={ onClose }\n\t\t\t/>\n\t\t\t<DateTimePicker\n\t\t\t\tstartOfWeek={ getSettings().l10n.startOfWeek }\n\t\t\t\tonChange={ onChange }\n\t\t\t\t{ ...additionalProps }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default forwardRef( PublishDateTimePicker );\n","const ELEMENT_CLASS_NAMES = {\n\tbutton: 'wp-element-button',\n\tcaption: 'wp-element-caption',\n};\n\nexport const __experimentalGetElementClassName = ( element ) => {\n\treturn ELEMENT_CLASS_NAMES[ element ] ? ELEMENT_CLASS_NAMES[ element ] : '';\n};\n","/** @typedef {import('@wordpress/blocks').WPBlockVariation} WPBlockVariation */\n\nfunction matchesAttributes( blockAttributes, variation ) {\n\treturn Object.entries( variation ).every( ( [ key, value ] ) => {\n\t\tif (\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof blockAttributes[ key ] === 'object'\n\t\t) {\n\t\t\treturn matchesAttributes( blockAttributes[ key ], value );\n\t\t}\n\t\treturn blockAttributes[ key ] === value;\n\t} );\n}\n\n/**\n * Matches the provided block variations with a block's attributes. If no match\n * or more than one matches are found it returns `undefined`. If a single match is\n * found it returns it.\n *\n * This is a simple implementation for now as it takes into account only the attributes\n * of a block variation and not `InnerBlocks`.\n *\n * @param {Object}             blockAttributes - The block attributes to try to find a match.\n * @param {WPBlockVariation[]} variations      - A list of block variations to test for a match.\n * @return {WPBlockVariation | undefined} - If a match is found returns it. If not or more than one matches are found returns `undefined`.\n */\nexport const __experimentalGetMatchingVariation = (\n\tblockAttributes,\n\tvariations\n) => {\n\tif ( ! variations || ! blockAttributes ) return;\n\tconst matches = variations.filter( ( { attributes } ) => {\n\t\tif ( ! attributes || ! Object.keys( attributes ).length ) return false;\n\t\treturn matchesAttributes( blockAttributes, attributes );\n\t} );\n\tif ( matches.length !== 1 ) return;\n\treturn matches[ 0 ];\n};\n","/**\n * Converts string to object { value, unit }.\n *\n * @param {string} cssUnit\n * @return {Object} parsedUnit\n */\nfunction parseUnit( cssUnit ) {\n\tconst match = cssUnit\n\t\t?.trim()\n\t\t.match(\n\t\t\t/^(0?[-.]?\\d*\\.?\\d+)(r?e[m|x]|v[h|w|min|max]+|p[x|t|c]|[c|m]m|%|in|ch|Q|lh)$/\n\t\t);\n\tif ( ! isNaN( cssUnit ) && ! isNaN( parseFloat( cssUnit ) ) ) {\n\t\treturn { value: parseFloat( cssUnit ), unit: 'px' };\n\t}\n\treturn match\n\t\t? { value: parseFloat( match[ 1 ] ) || match[ 1 ], unit: match[ 2 ] }\n\t\t: { value: cssUnit, unit: undefined };\n}\n/**\n * Evaluate a math expression.\n *\n * @param {string} expression\n * @return {number} evaluated expression.\n */\nfunction calculate( expression ) {\n\ttry {\n\t\treturn Function( `'use strict'; return (${ expression })` )();\n\t} catch ( err ) {\n\t\treturn null;\n\t}\n}\n\n/**\n * Calculates the css function value for the supported css functions such as max, min, clamp and calc.\n *\n * @param {string} functionUnitValue string should be in a particular format (for example min(12px,12px) ) no nested loops.\n * @param {Object} options\n * @return {string} unit containing the unit in PX.\n */\nfunction getFunctionUnitValue( functionUnitValue, options ) {\n\tconst functionUnit = functionUnitValue.split( /[(),]/g ).filter( Boolean );\n\n\tconst units = functionUnit\n\t\t.slice( 1 )\n\t\t.map( ( unit ) => parseUnit( getPxFromCssUnit( unit, options ) ).value )\n\t\t.filter( Boolean );\n\n\tswitch ( functionUnit[ 0 ] ) {\n\t\tcase 'min':\n\t\t\treturn Math.min( ...units ) + 'px';\n\t\tcase 'max':\n\t\t\treturn Math.max( ...units ) + 'px';\n\t\tcase 'clamp':\n\t\t\tif ( units.length !== 3 ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif ( units[ 1 ] < units[ 0 ] ) {\n\t\t\t\treturn units[ 0 ] + 'px';\n\t\t\t}\n\t\t\tif ( units[ 1 ] > units[ 2 ] ) {\n\t\t\t\treturn units[ 2 ] + 'px';\n\t\t\t}\n\t\t\treturn units[ 1 ] + 'px';\n\t\tcase 'calc':\n\t\t\treturn units[ 0 ] + 'px';\n\t}\n}\n\n/**\n * Take a css function such as min, max, calc, clamp and returns parsedUnit\n *\n * How this works for the nested function is that it first replaces the inner function call.\n * Then it tackles the outer onces.\n * So for example: min( max(25px, 35px), 40px )\n * in the first pass we would replace max(25px, 35px) with 35px.\n * then we would try to evaluate min( 35px, 40px )\n * and then finally return 35px.\n *\n * @param {string} cssUnit\n * @return {Object} parsedUnit object.\n */\nfunction parseUnitFunction( cssUnit ) {\n\twhile ( true ) {\n\t\tconst currentCssUnit = cssUnit;\n\t\tconst regExp = /(max|min|calc|clamp)\\(([^()]*)\\)/g;\n\t\tconst matches = regExp.exec( cssUnit ) || [];\n\t\tif ( matches[ 0 ] ) {\n\t\t\tconst functionUnitValue = getFunctionUnitValue( matches[ 0 ] );\n\t\t\tcssUnit = cssUnit.replace( matches[ 0 ], functionUnitValue );\n\t\t}\n\n\t\t// If the unit hasn't been modified or we have a single value break free.\n\t\tif ( cssUnit === currentCssUnit || parseFloat( cssUnit ) ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn parseUnit( cssUnit );\n}\n/**\n * Return true if we think this is a math expression.\n *\n * @param {string} cssUnit the cssUnit value being evaluted.\n * @return {boolean} Whether the cssUnit is a math expression.\n */\nfunction isMathExpression( cssUnit ) {\n\tfor ( let i = 0; i < cssUnit.length; i++ ) {\n\t\tif ( [ '+', '-', '/', '*' ].includes( cssUnit[ i ] ) ) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n/**\n * Evaluates the math expression and return a px value.\n *\n * @param {string} cssUnit the cssUnit value being evaluted.\n * @return {string} return a converfted value to px.\n */\nfunction evalMathExpression( cssUnit ) {\n\tlet errorFound = false;\n\t// Convert every part of the expression to px values.\n\t// The following regex matches numbers that have a following unit\n\t// E.g. 5.25rem, 1vw\n\tconst cssUnitsBits = cssUnit.match( /\\d+\\.?\\d*[a-zA-Z]+|\\.\\d+[a-zA-Z]+/g );\n\tif ( cssUnitsBits ) {\n\t\tfor ( const unit of cssUnitsBits ) {\n\t\t\t// Standardize the unit to px and extract the value.\n\t\t\tconst parsedUnit = parseUnit( getPxFromCssUnit( unit ) );\n\t\t\tif ( ! parseFloat( parsedUnit.value ) ) {\n\t\t\t\terrorFound = true;\n\t\t\t\t// End early since we are dealing with a null value.\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcssUnit = cssUnit.replace( unit, parsedUnit.value );\n\t\t}\n\t} else {\n\t\terrorFound = true;\n\t}\n\n\t// For mixed math expressions wrapped within CSS expressions\n\tconst expressionsMatches = cssUnit.match( /(max|min|clamp)/g );\n\tif ( ! errorFound && expressionsMatches ) {\n\t\tconst values = cssUnit.split( ',' );\n\t\tfor ( const currentValue of values ) {\n\t\t\t// Check for nested calc() and remove them to calculate the value.\n\t\t\tconst rawCurrentValue = currentValue.replace( /\\s|calc/g, '' );\n\n\t\t\tif ( isMathExpression( rawCurrentValue ) ) {\n\t\t\t\tconst calculatedExpression = calculate( rawCurrentValue );\n\n\t\t\t\tif ( calculatedExpression ) {\n\t\t\t\t\tconst calculatedValue =\n\t\t\t\t\t\tcalculatedExpression.toFixed( 0 ) + 'px';\n\t\t\t\t\tcssUnit = cssUnit.replace( currentValue, calculatedValue );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst parsedValue = parseUnitFunction( cssUnit );\n\t\treturn ! parsedValue ? null : parsedValue.value + parsedValue.unit;\n\t}\n\n\tif ( errorFound ) {\n\t\treturn null;\n\t}\n\n\tconst calculatedResult = calculate( cssUnit );\n\treturn calculatedResult ? calculatedResult.toFixed( 0 ) + 'px' : null;\n}\n\n/**\n * Convert a parsedUnit object to px value.\n *\n * @param {Object} parsedUnit\n * @param {Object} options\n * @return {string} or {null} returns the converted with in a px value format.\n */\nfunction convertParsedUnitToPx( parsedUnit, options ) {\n\tconst PIXELS_PER_INCH = 96;\n\tconst ONE_PERCENT = 0.01;\n\n\tconst defaultProperties = {\n\t\tfontSize: 16,\n\t\tlineHeight: 16,\n\t\twidth: 375,\n\t\theight: 812,\n\t\ttype: 'font',\n\t};\n\n\tconst setOptions = Object.assign( {}, defaultProperties, options );\n\n\tconst relativeUnits = {\n\t\tem: setOptions.fontSize,\n\t\trem: setOptions.fontSize,\n\t\tvh: setOptions.height * ONE_PERCENT,\n\t\tvw: setOptions.width * ONE_PERCENT,\n\t\tvmin:\n\t\t\t( setOptions.width < setOptions.height\n\t\t\t\t? setOptions.width\n\t\t\t\t: setOptions.height ) * ONE_PERCENT,\n\t\tvmax:\n\t\t\t( setOptions.width > setOptions.height\n\t\t\t\t? setOptions.width\n\t\t\t\t: setOptions.height ) * ONE_PERCENT,\n\t\t'%':\n\t\t\t( setOptions.type === 'font'\n\t\t\t\t? setOptions.fontSize\n\t\t\t\t: setOptions.width ) * ONE_PERCENT,\n\t\tch: 8, // The advance measure (width) of the glyph \"0\" of the element's font. Approximate\n\t\tex: 7.15625, // X-height of the element's font. Approximate.\n\t\tlh: setOptions.lineHeight,\n\t};\n\n\tconst absoluteUnits = {\n\t\tin: PIXELS_PER_INCH,\n\t\tcm: PIXELS_PER_INCH / 2.54,\n\t\tmm: PIXELS_PER_INCH / 25.4,\n\t\tpt: PIXELS_PER_INCH / 72,\n\t\tpc: PIXELS_PER_INCH / 6,\n\t\tpx: 1,\n\t\tQ: PIXELS_PER_INCH / 2.54 / 40,\n\t};\n\n\tif ( relativeUnits[ parsedUnit.unit ] ) {\n\t\treturn (\n\t\t\t( relativeUnits[ parsedUnit.unit ] * parsedUnit.value ).toFixed(\n\t\t\t\t0\n\t\t\t) + 'px'\n\t\t);\n\t}\n\n\tif ( absoluteUnits[ parsedUnit.unit ] ) {\n\t\treturn (\n\t\t\t( absoluteUnits[ parsedUnit.unit ] * parsedUnit.value ).toFixed(\n\t\t\t\t0\n\t\t\t) + 'px'\n\t\t);\n\t}\n\n\treturn null;\n}\n\n/**\n * Returns the px value of a cssUnit.\n *\n * @param {string} cssUnit\n * @param {Object} options\n * @return {string} returns the cssUnit value in a simple px format.\n */\nexport function getPxFromCssUnit( cssUnit, options = {} ) {\n\tif ( Number.isFinite( cssUnit ) ) {\n\t\treturn cssUnit.toFixed( 0 ) + 'px';\n\t}\n\tif ( cssUnit === undefined ) {\n\t\treturn null;\n\t}\n\tlet parsedUnit = parseUnit( cssUnit );\n\n\tif ( ! parsedUnit.unit ) {\n\t\tparsedUnit = parseUnitFunction( cssUnit );\n\t}\n\n\tif ( isMathExpression( cssUnit ) && ! parsedUnit.unit ) {\n\t\treturn evalMathExpression( cssUnit );\n\t}\n\n\treturn convertParsedUnitToPx( parsedUnit, options );\n}\n\n// Use simple cache.\nconst cache = {};\n/**\n * Returns the px value of a cssUnit. The memoized version of getPxFromCssUnit;\n *\n * @param {string} cssUnit\n * @param {Object} options\n * @return {string} returns the cssUnit value in a simple px format.\n */\nfunction memoizedGetPxFromCssUnit( cssUnit, options = {} ) {\n\tconst hash = cssUnit + hashOptions( options );\n\n\tif ( ! cache[ hash ] ) {\n\t\tcache[ hash ] = getPxFromCssUnit( cssUnit, options );\n\t}\n\treturn cache[ hash ];\n}\n\nfunction hashOptions( options ) {\n\tlet hash = '';\n\tif ( options.hasOwnProperty( 'fontSize' ) ) {\n\t\thash = ':' + options.width;\n\t}\n\tif ( options.hasOwnProperty( 'lineHeight' ) ) {\n\t\thash = ':' + options.lineHeight;\n\t}\n\tif ( options.hasOwnProperty( 'width' ) ) {\n\t\thash = ':' + options.width;\n\t}\n\tif ( options.hasOwnProperty( 'height' ) ) {\n\t\thash = ':' + options.height;\n\t}\n\tif ( options.hasOwnProperty( 'type' ) ) {\n\t\thash = ':' + options.type;\n\t}\n\treturn hash;\n}\n\nexport default memoizedGetPxFromCssUnit;\n","/**\n * External dependencies\n */\nimport { get, kebabCase, set } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__EXPERIMENTAL_STYLE_PROPERTY as STYLE_PROPERTY,\n\t__EXPERIMENTAL_ELEMENTS as ELEMENTS,\n\tgetBlockSupport,\n\tgetBlockTypes,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { renderToString, useContext, useMemo } from '@wordpress/element';\nimport { getCSSRules } from '@wordpress/style-engine';\n\n/**\n * Internal dependencies\n */\nimport { PRESET_METADATA, ROOT_BLOCK_SELECTOR, scopeSelector } from './utils';\nimport { getBlockCSSSelector } from './get-block-css-selector';\nimport {\n\tgetTypographyFontSizeValue,\n\tgetFluidTypographyOptionsFromSettings,\n} from './typography-utils';\nimport { GlobalStylesContext } from './context';\nimport { useGlobalSetting } from './hooks';\nimport { PresetDuotoneFilter } from '../duotone/components';\nimport { getGapCSSValue } from '../../hooks/gap';\nimport { store as blockEditorStore } from '../../store';\n\n// List of block support features that can have their related styles\n// generated under their own feature level selector rather than the block's.\nconst BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS = {\n\t__experimentalBorder: 'border',\n\tcolor: 'color',\n\tspacing: 'spacing',\n\ttypography: 'typography',\n};\n\nfunction compileStyleValue( uncompiledValue ) {\n\tconst VARIABLE_REFERENCE_PREFIX = 'var:';\n\tconst VARIABLE_PATH_SEPARATOR_TOKEN_ATTRIBUTE = '|';\n\tconst VARIABLE_PATH_SEPARATOR_TOKEN_STYLE = '--';\n\n\tif ( uncompiledValue?.startsWith?.( VARIABLE_REFERENCE_PREFIX ) ) {\n\t\tconst variable = uncompiledValue\n\t\t\t.slice( VARIABLE_REFERENCE_PREFIX.length )\n\t\t\t.split( VARIABLE_PATH_SEPARATOR_TOKEN_ATTRIBUTE )\n\t\t\t.join( VARIABLE_PATH_SEPARATOR_TOKEN_STYLE );\n\t\treturn `var(--wp--${ variable })`;\n\t}\n\treturn uncompiledValue;\n}\n\n/**\n * Transform given preset tree into a set of style declarations.\n *\n * @param {Object} blockPresets\n * @param {Object} mergedSettings Merged theme.json settings.\n *\n * @return {Array<Object>} An array of style declarations.\n */\nfunction getPresetsDeclarations( blockPresets = {}, mergedSettings ) {\n\treturn PRESET_METADATA.reduce(\n\t\t( declarations, { path, valueKey, valueFunc, cssVarInfix } ) => {\n\t\t\tconst presetByOrigin = get( blockPresets, path, [] );\n\t\t\t[ 'default', 'theme', 'custom' ].forEach( ( origin ) => {\n\t\t\t\tif ( presetByOrigin[ origin ] ) {\n\t\t\t\t\tpresetByOrigin[ origin ].forEach( ( value ) => {\n\t\t\t\t\t\tif ( valueKey && ! valueFunc ) {\n\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t`--wp--preset--${ cssVarInfix }--${ kebabCase(\n\t\t\t\t\t\t\t\t\tvalue.slug\n\t\t\t\t\t\t\t\t) }: ${ value[ valueKey ] }`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tvalueFunc &&\n\t\t\t\t\t\t\ttypeof valueFunc === 'function'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t`--wp--preset--${ cssVarInfix }--${ kebabCase(\n\t\t\t\t\t\t\t\t\tvalue.slug\n\t\t\t\t\t\t\t\t) }: ${ valueFunc( value, mergedSettings ) }`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn declarations;\n\t\t},\n\t\t[]\n\t);\n}\n\n/**\n * Transform given preset tree into a set of preset class declarations.\n *\n * @param {?string} blockSelector\n * @param {Object}  blockPresets\n * @return {string} CSS declarations for the preset classes.\n */\nfunction getPresetsClasses( blockSelector = '*', blockPresets = {} ) {\n\treturn PRESET_METADATA.reduce(\n\t\t( declarations, { path, cssVarInfix, classes } ) => {\n\t\t\tif ( ! classes ) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\n\t\t\tconst presetByOrigin = get( blockPresets, path, [] );\n\t\t\t[ 'default', 'theme', 'custom' ].forEach( ( origin ) => {\n\t\t\t\tif ( presetByOrigin[ origin ] ) {\n\t\t\t\t\tpresetByOrigin[ origin ].forEach( ( { slug } ) => {\n\t\t\t\t\t\tclasses.forEach( ( { classSuffix, propertyName } ) => {\n\t\t\t\t\t\t\tconst classSelectorToUse = `.has-${ kebabCase(\n\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t) }-${ classSuffix }`;\n\t\t\t\t\t\t\tconst selectorToUse = blockSelector\n\t\t\t\t\t\t\t\t.split( ',' ) // Selector can be \"h1, h2, h3\"\n\t\t\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\t\t\t( selector ) =>\n\t\t\t\t\t\t\t\t\t\t`${ selector }${ classSelectorToUse }`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.join( ',' );\n\t\t\t\t\t\t\tconst value = `var(--wp--preset--${ cssVarInfix }--${ kebabCase(\n\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t) })`;\n\t\t\t\t\t\t\tdeclarations += `${ selectorToUse }{${ propertyName }: ${ value } !important;}`;\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn declarations;\n\t\t},\n\t\t''\n\t);\n}\n\nfunction getPresetsSvgFilters( blockPresets = {} ) {\n\treturn PRESET_METADATA.filter(\n\t\t// Duotone are the only type of filters for now.\n\t\t( metadata ) => metadata.path.at( -1 ) === 'duotone'\n\t).flatMap( ( metadata ) => {\n\t\tconst presetByOrigin = get( blockPresets, metadata.path, {} );\n\t\treturn [ 'default', 'theme' ]\n\t\t\t.filter( ( origin ) => presetByOrigin[ origin ] )\n\t\t\t.flatMap( ( origin ) =>\n\t\t\t\tpresetByOrigin[ origin ].map( ( preset ) =>\n\t\t\t\t\trenderToString(\n\t\t\t\t\t\t<PresetDuotoneFilter\n\t\t\t\t\t\t\tpreset={ preset }\n\t\t\t\t\t\t\tkey={ preset.slug }\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t\t.join( '' );\n\t} );\n}\n\nfunction flattenTree( input = {}, prefix, token ) {\n\tlet result = [];\n\tObject.keys( input ).forEach( ( key ) => {\n\t\tconst newKey = prefix + kebabCase( key.replace( '/', '-' ) );\n\t\tconst newLeaf = input[ key ];\n\n\t\tif ( newLeaf instanceof Object ) {\n\t\t\tconst newPrefix = newKey + token;\n\t\t\tresult = [ ...result, ...flattenTree( newLeaf, newPrefix, token ) ];\n\t\t} else {\n\t\t\tresult.push( `${ newKey }: ${ newLeaf }` );\n\t\t}\n\t} );\n\treturn result;\n}\n\n/**\n * Gets variation selector string from feature selector.\n *\n * @param {string} featureSelector        The feature selector.\n *\n * @param {string} styleVariationSelector The style variation selector.\n * @return {string} Combined selector string.\n *\n */\nfunction concatFeatureVariationSelectorString(\n\tfeatureSelector,\n\tstyleVariationSelector\n) {\n\tconst featureSelectors = featureSelector.split( ',' );\n\tconst combinedSelectors = [];\n\tfeatureSelectors.forEach( ( selector ) => {\n\t\tcombinedSelectors.push(\n\t\t\t`${ styleVariationSelector.trim() }${ selector.trim() }`\n\t\t);\n\t} );\n\treturn combinedSelectors.join( ', ' );\n}\n\n/**\n * Generate style declarations for a block's custom feature and subfeature\n * selectors.\n *\n * NOTE: The passed `styles` object will be mutated by this function.\n *\n * @param {Object} selectors Custom selectors object for a block.\n * @param {Object} styles    A block's styles object.\n *\n * @return {Object} Style declarations.\n */\nconst getFeatureDeclarations = ( selectors, styles ) => {\n\tconst declarations = {};\n\n\tObject.entries( selectors ).forEach( ( [ feature, selector ] ) => {\n\t\t// We're only processing features/subfeatures that have styles.\n\t\tif ( feature === 'root' || ! styles?.[ feature ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isShorthand = typeof selector === 'string';\n\n\t\t// If we have a selector object instead of shorthand process it.\n\t\tif ( ! isShorthand ) {\n\t\t\tObject.entries( selector ).forEach(\n\t\t\t\t( [ subfeature, subfeatureSelector ] ) => {\n\t\t\t\t\t// Don't process root feature selector yet or any\n\t\t\t\t\t// subfeature that doesn't have a style.\n\t\t\t\t\tif (\n\t\t\t\t\t\tsubfeature === 'root' ||\n\t\t\t\t\t\t! styles?.[ feature ][ subfeature ]\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create a temporary styles object and build\n\t\t\t\t\t// declarations for subfeature.\n\t\t\t\t\tconst subfeatureStyles = {\n\t\t\t\t\t\t[ feature ]: {\n\t\t\t\t\t\t\t[ subfeature ]: styles[ feature ][ subfeature ],\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\tconst newDeclarations =\n\t\t\t\t\t\tgetStylesDeclarations( subfeatureStyles );\n\n\t\t\t\t\t// Merge new declarations in with any others that\n\t\t\t\t\t// share the same selector.\n\t\t\t\t\tdeclarations[ subfeatureSelector ] = [\n\t\t\t\t\t\t...( declarations[ subfeatureSelector ] || [] ),\n\t\t\t\t\t\t...newDeclarations,\n\t\t\t\t\t];\n\n\t\t\t\t\t// Remove the subfeature's style now it will be\n\t\t\t\t\t// included under its own selector not the block's.\n\t\t\t\t\tdelete styles[ feature ][ subfeature ];\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t// Now subfeatures have been processed and removed, we can\n\t\t// process root, or shorthand, feature selectors.\n\t\tif ( isShorthand || selector.root ) {\n\t\t\tconst featureSelector = isShorthand ? selector : selector.root;\n\n\t\t\t// Create temporary style object and build declarations for feature.\n\t\t\tconst featureStyles = { [ feature ]: styles[ feature ] };\n\t\t\tconst newDeclarations = getStylesDeclarations( featureStyles );\n\n\t\t\t// Merge new declarations with any others that share the selector.\n\t\t\tdeclarations[ featureSelector ] = [\n\t\t\t\t...( declarations[ featureSelector ] || [] ),\n\t\t\t\t...newDeclarations,\n\t\t\t];\n\n\t\t\t// Remove the feature from the block's styles now as it will be\n\t\t\t// included under its own selector not the block's.\n\t\t\tdelete styles[ feature ];\n\t\t}\n\t} );\n\n\treturn declarations;\n};\n\n/**\n * Transform given style tree into a set of style declarations.\n *\n * @param {Object}  blockStyles         Block styles.\n *\n * @param {string}  selector            The selector these declarations should attach to.\n *\n * @param {boolean} useRootPaddingAlign Whether to use CSS custom properties in root selector.\n *\n * @param {Object}  tree                A theme.json tree containing layout definitions.\n *\n * @return {Array} An array of style declarations.\n */\nexport function getStylesDeclarations(\n\tblockStyles = {},\n\tselector = '',\n\tuseRootPaddingAlign,\n\ttree = {}\n) {\n\tconst isRoot = ROOT_BLOCK_SELECTOR === selector;\n\tconst output = Object.entries( STYLE_PROPERTY ).reduce(\n\t\t(\n\t\t\tdeclarations,\n\t\t\t[ key, { value, properties, useEngine, rootOnly } ]\n\t\t) => {\n\t\t\tif ( rootOnly && ! isRoot ) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\t\t\tconst pathToValue = value;\n\t\t\tif ( pathToValue[ 0 ] === 'elements' || useEngine ) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\n\t\t\tconst styleValue = get( blockStyles, pathToValue );\n\n\t\t\t// Root-level padding styles don't currently support strings with CSS shorthand values.\n\t\t\t// This may change: https://github.com/WordPress/gutenberg/issues/40132.\n\t\t\tif (\n\t\t\t\tkey === '--wp--style--root--padding' &&\n\t\t\t\t( typeof styleValue === 'string' || ! useRootPaddingAlign )\n\t\t\t) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\n\t\t\tif ( properties && typeof styleValue !== 'string' ) {\n\t\t\t\tObject.entries( properties ).forEach( ( entry ) => {\n\t\t\t\t\tconst [ name, prop ] = entry;\n\n\t\t\t\t\tif ( ! get( styleValue, [ prop ], false ) ) {\n\t\t\t\t\t\t// Do not create a declaration\n\t\t\t\t\t\t// for sub-properties that don't have any value.\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cssProperty = name.startsWith( '--' )\n\t\t\t\t\t\t? name\n\t\t\t\t\t\t: kebabCase( name );\n\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t`${ cssProperty }: ${ compileStyleValue(\n\t\t\t\t\t\t\tget( styleValue, [ prop ] )\n\t\t\t\t\t\t) }`\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} else if ( get( blockStyles, pathToValue, false ) ) {\n\t\t\t\tconst cssProperty = key.startsWith( '--' )\n\t\t\t\t\t? key\n\t\t\t\t\t: kebabCase( key );\n\t\t\t\tdeclarations.push(\n\t\t\t\t\t`${ cssProperty }: ${ compileStyleValue(\n\t\t\t\t\t\tget( blockStyles, pathToValue )\n\t\t\t\t\t) }`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn declarations;\n\t\t},\n\t\t[]\n\t);\n\n\t// The goal is to move everything to server side generated engine styles\n\t// This is temporary as we absorb more and more styles into the engine.\n\tconst extraRules = getCSSRules( blockStyles );\n\textraRules.forEach( ( rule ) => {\n\t\t// Don't output padding properties if padding variables are set.\n\t\tif (\n\t\t\tisRoot &&\n\t\t\tuseRootPaddingAlign &&\n\t\t\trule.key.startsWith( 'padding' )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tconst cssProperty = rule.key.startsWith( '--' )\n\t\t\t? rule.key\n\t\t\t: kebabCase( rule.key );\n\n\t\tlet ruleValue = rule.value;\n\t\tif ( typeof ruleValue !== 'string' && ruleValue?.ref ) {\n\t\t\tconst refPath = ruleValue.ref.split( '.' );\n\t\t\truleValue = get( tree, refPath );\n\t\t\t// Presence of another ref indicates a reference to another dynamic value.\n\t\t\t// Pointing to another dynamic value is not supported.\n\t\t\tif ( ! ruleValue || ruleValue?.ref ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Calculate fluid typography rules where available.\n\t\tif ( cssProperty === 'font-size' ) {\n\t\t\t/*\n\t\t\t * getTypographyFontSizeValue() will check\n\t\t\t * if fluid typography has been activated and also\n\t\t\t * whether the incoming value can be converted to a fluid value.\n\t\t\t * Values that already have a \"clamp()\" function will not pass the test,\n\t\t\t * and therefore the original $value will be returned.\n\t\t\t */\n\t\t\truleValue = getTypographyFontSizeValue(\n\t\t\t\t{ size: ruleValue },\n\t\t\t\tgetFluidTypographyOptionsFromSettings( tree?.settings )\n\t\t\t);\n\t\t}\n\n\t\toutput.push( `${ cssProperty }: ${ ruleValue }` );\n\t} );\n\n\treturn output;\n}\n\n/**\n * Get generated CSS for layout styles by looking up layout definitions provided\n * in theme.json, and outputting common layout styles, and specific blockGap values.\n *\n * @param {Object}  props\n * @param {Object}  props.tree                  A theme.json tree containing layout definitions.\n * @param {Object}  props.style                 A style object containing spacing values.\n * @param {string}  props.selector              Selector used to group together layout styling rules.\n * @param {boolean} props.hasBlockGapSupport    Whether or not the theme opts-in to blockGap support.\n * @param {boolean} props.hasFallbackGapSupport Whether or not the theme allows fallback gap styles.\n * @param {?string} props.fallbackGapValue      An optional fallback gap value if no real gap value is available.\n * @return {string} Generated CSS rules for the layout styles.\n */\nexport function getLayoutStyles( {\n\ttree,\n\tstyle,\n\tselector,\n\thasBlockGapSupport,\n\thasFallbackGapSupport,\n\tfallbackGapValue,\n} ) {\n\tlet ruleset = '';\n\tlet gapValue = hasBlockGapSupport\n\t\t? getGapCSSValue( style?.spacing?.blockGap )\n\t\t: '';\n\n\t// Ensure a fallback gap value for the root layout definitions,\n\t// and use a fallback value if one is provided for the current block.\n\tif ( hasFallbackGapSupport ) {\n\t\tif ( selector === ROOT_BLOCK_SELECTOR ) {\n\t\t\tgapValue = ! gapValue ? '0.5em' : gapValue;\n\t\t} else if ( ! hasBlockGapSupport && fallbackGapValue ) {\n\t\t\tgapValue = fallbackGapValue;\n\t\t}\n\t}\n\n\tif ( gapValue && tree?.settings?.layout?.definitions ) {\n\t\tObject.values( tree.settings.layout.definitions ).forEach(\n\t\t\t( { className, name, spacingStyles } ) => {\n\t\t\t\t// Allow outputting fallback gap styles for flex layout type when block gap support isn't available.\n\t\t\t\tif (\n\t\t\t\t\t! hasBlockGapSupport &&\n\t\t\t\t\t'flex' !== name &&\n\t\t\t\t\t'grid' !== name\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( spacingStyles?.length ) {\n\t\t\t\t\tspacingStyles.forEach( ( spacingStyle ) => {\n\t\t\t\t\t\tconst declarations = [];\n\n\t\t\t\t\t\tif ( spacingStyle.rules ) {\n\t\t\t\t\t\t\tObject.entries( spacingStyle.rules ).forEach(\n\t\t\t\t\t\t\t\t( [ cssProperty, cssValue ] ) => {\n\t\t\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t\t\t`${ cssProperty }: ${\n\t\t\t\t\t\t\t\t\t\t\tcssValue ? cssValue : gapValue\n\t\t\t\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\tlet combinedSelector = '';\n\n\t\t\t\t\t\t\tif ( ! hasBlockGapSupport ) {\n\t\t\t\t\t\t\t\t// For fallback gap styles, use lower specificity, to ensure styles do not unintentionally override theme styles.\n\t\t\t\t\t\t\t\tcombinedSelector =\n\t\t\t\t\t\t\t\t\tselector === ROOT_BLOCK_SELECTOR\n\t\t\t\t\t\t\t\t\t\t? `:where(.${ className }${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  })`\n\t\t\t\t\t\t\t\t\t\t: `:where(${ selector }.${ className }${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  })`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcombinedSelector =\n\t\t\t\t\t\t\t\t\tselector === ROOT_BLOCK_SELECTOR\n\t\t\t\t\t\t\t\t\t\t? `:where(${ selector } .${ className })${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  }`\n\t\t\t\t\t\t\t\t\t\t: `${ selector }-${ className }${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  }`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\truleset += `${ combinedSelector } { ${ declarations.join(\n\t\t\t\t\t\t\t\t'; '\n\t\t\t\t\t\t\t) }; }`;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t// For backwards compatibility, ensure the legacy block gap CSS variable is still available.\n\t\tif ( selector === ROOT_BLOCK_SELECTOR && hasBlockGapSupport ) {\n\t\t\truleset += `${ selector } { --wp--style--block-gap: ${ gapValue }; }`;\n\t\t}\n\t}\n\n\t// Output base styles\n\tif (\n\t\tselector === ROOT_BLOCK_SELECTOR &&\n\t\ttree?.settings?.layout?.definitions\n\t) {\n\t\tconst validDisplayModes = [ 'block', 'flex', 'grid' ];\n\t\tObject.values( tree.settings.layout.definitions ).forEach(\n\t\t\t( { className, displayMode, baseStyles } ) => {\n\t\t\t\tif (\n\t\t\t\t\tdisplayMode &&\n\t\t\t\t\tvalidDisplayModes.includes( displayMode )\n\t\t\t\t) {\n\t\t\t\t\truleset += `${ selector } .${ className } { display:${ displayMode }; }`;\n\t\t\t\t}\n\n\t\t\t\tif ( baseStyles?.length ) {\n\t\t\t\t\tbaseStyles.forEach( ( baseStyle ) => {\n\t\t\t\t\t\tconst declarations = [];\n\n\t\t\t\t\t\tif ( baseStyle.rules ) {\n\t\t\t\t\t\t\tObject.entries( baseStyle.rules ).forEach(\n\t\t\t\t\t\t\t\t( [ cssProperty, cssValue ] ) => {\n\t\t\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t\t\t`${ cssProperty }: ${ cssValue }`\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\tconst combinedSelector = `${ selector } .${ className }${\n\t\t\t\t\t\t\t\tbaseStyle?.selector || ''\n\t\t\t\t\t\t\t}`;\n\t\t\t\t\t\t\truleset += `${ combinedSelector } { ${ declarations.join(\n\t\t\t\t\t\t\t\t'; '\n\t\t\t\t\t\t\t) }; }`;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\treturn ruleset;\n}\n\nconst STYLE_KEYS = [\n\t'border',\n\t'color',\n\t'dimensions',\n\t'spacing',\n\t'typography',\n\t'filter',\n\t'outline',\n\t'shadow',\n];\n\nfunction pickStyleKeys( treeToPickFrom ) {\n\tif ( ! treeToPickFrom ) {\n\t\treturn {};\n\t}\n\tconst entries = Object.entries( treeToPickFrom );\n\tconst pickedEntries = entries.filter( ( [ key ] ) =>\n\t\tSTYLE_KEYS.includes( key )\n\t);\n\t// clone the style objects so that `getFeatureDeclarations` can remove consumed keys from it\n\tconst clonedEntries = pickedEntries.map( ( [ key, style ] ) => [\n\t\tkey,\n\t\tJSON.parse( JSON.stringify( style ) ),\n\t] );\n\treturn Object.fromEntries( clonedEntries );\n}\n\nexport const getNodesWithStyles = ( tree, blockSelectors ) => {\n\tconst nodes = [];\n\n\tif ( ! tree?.styles ) {\n\t\treturn nodes;\n\t}\n\n\t// Top-level.\n\tconst styles = pickStyleKeys( tree.styles );\n\tif ( styles ) {\n\t\tnodes.push( {\n\t\t\tstyles,\n\t\t\tselector: ROOT_BLOCK_SELECTOR,\n\t\t} );\n\t}\n\n\tObject.entries( ELEMENTS ).forEach( ( [ name, selector ] ) => {\n\t\tif ( tree.styles?.elements?.[ name ] ) {\n\t\t\tnodes.push( {\n\t\t\t\tstyles: tree.styles?.elements?.[ name ],\n\t\t\t\tselector,\n\t\t\t} );\n\t\t}\n\t} );\n\n\t// Iterate over blocks: they can have styles & elements.\n\tObject.entries( tree.styles?.blocks ?? {} ).forEach(\n\t\t( [ blockName, node ] ) => {\n\t\t\tconst blockStyles = pickStyleKeys( node );\n\n\t\t\tif ( node?.variations ) {\n\t\t\t\tconst variations = {};\n\t\t\t\tObject.keys( node.variations ).forEach( ( variation ) => {\n\t\t\t\t\tvariations[ variation ] = pickStyleKeys(\n\t\t\t\t\t\tnode.variations[ variation ]\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t\tblockStyles.variations = variations;\n\t\t\t}\n\t\t\tif ( blockStyles && blockSelectors?.[ blockName ]?.selector ) {\n\t\t\t\tnodes.push( {\n\t\t\t\t\tduotoneSelector:\n\t\t\t\t\t\tblockSelectors[ blockName ].duotoneSelector,\n\t\t\t\t\tfallbackGapValue:\n\t\t\t\t\t\tblockSelectors[ blockName ].fallbackGapValue,\n\t\t\t\t\thasLayoutSupport:\n\t\t\t\t\t\tblockSelectors[ blockName ].hasLayoutSupport,\n\t\t\t\t\tselector: blockSelectors[ blockName ].selector,\n\t\t\t\t\tstyles: blockStyles,\n\t\t\t\t\tfeatureSelectors:\n\t\t\t\t\t\tblockSelectors[ blockName ].featureSelectors,\n\t\t\t\t\tstyleVariationSelectors:\n\t\t\t\t\t\tblockSelectors[ blockName ].styleVariationSelectors,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tObject.entries( node?.elements ?? {} ).forEach(\n\t\t\t\t( [ elementName, value ] ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvalue &&\n\t\t\t\t\t\tblockSelectors?.[ blockName ] &&\n\t\t\t\t\t\tELEMENTS[ elementName ]\n\t\t\t\t\t) {\n\t\t\t\t\t\tnodes.push( {\n\t\t\t\t\t\t\tstyles: value,\n\t\t\t\t\t\t\tselector: blockSelectors[ blockName ]?.selector\n\t\t\t\t\t\t\t\t.split( ',' )\n\t\t\t\t\t\t\t\t.map( ( sel ) => {\n\t\t\t\t\t\t\t\t\tconst elementSelectors =\n\t\t\t\t\t\t\t\t\t\tELEMENTS[ elementName ].split( ',' );\n\t\t\t\t\t\t\t\t\treturn elementSelectors.map(\n\t\t\t\t\t\t\t\t\t\t( elementSelector ) =>\n\t\t\t\t\t\t\t\t\t\t\tsel + ' ' + elementSelector\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t.join( ',' ),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n\n\treturn nodes;\n};\n\nexport const getNodesWithSettings = ( tree, blockSelectors ) => {\n\tconst nodes = [];\n\n\tif ( ! tree?.settings ) {\n\t\treturn nodes;\n\t}\n\n\tconst pickPresets = ( treeToPickFrom ) => {\n\t\tconst presets = {};\n\t\tPRESET_METADATA.forEach( ( { path } ) => {\n\t\t\tconst value = get( treeToPickFrom, path, false );\n\t\t\tif ( value !== false ) {\n\t\t\t\tset( presets, path, value );\n\t\t\t}\n\t\t} );\n\t\treturn presets;\n\t};\n\n\t// Top-level.\n\tconst presets = pickPresets( tree.settings );\n\tconst custom = tree.settings?.custom;\n\tif ( Object.keys( presets ).length > 0 || custom ) {\n\t\tnodes.push( {\n\t\t\tpresets,\n\t\t\tcustom,\n\t\t\tselector: ROOT_BLOCK_SELECTOR,\n\t\t} );\n\t}\n\n\t// Blocks.\n\tObject.entries( tree.settings?.blocks ?? {} ).forEach(\n\t\t( [ blockName, node ] ) => {\n\t\t\tconst blockPresets = pickPresets( node );\n\t\t\tconst blockCustom = node.custom;\n\t\t\tif ( Object.keys( blockPresets ).length > 0 || blockCustom ) {\n\t\t\t\tnodes.push( {\n\t\t\t\t\tpresets: blockPresets,\n\t\t\t\t\tcustom: blockCustom,\n\t\t\t\t\tselector: blockSelectors[ blockName ]?.selector,\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t);\n\n\treturn nodes;\n};\n\nexport const toCustomProperties = ( tree, blockSelectors ) => {\n\tconst settings = getNodesWithSettings( tree, blockSelectors );\n\tlet ruleset = '';\n\tsettings.forEach( ( { presets, custom, selector } ) => {\n\t\tconst declarations = getPresetsDeclarations( presets, tree?.settings );\n\t\tconst customProps = flattenTree( custom, '--wp--custom--', '--' );\n\t\tif ( customProps.length > 0 ) {\n\t\t\tdeclarations.push( ...customProps );\n\t\t}\n\n\t\tif ( declarations.length > 0 ) {\n\t\t\truleset += `${ selector }{${ declarations.join( ';' ) };}`;\n\t\t}\n\t} );\n\n\treturn ruleset;\n};\n\nexport const toStyles = (\n\ttree,\n\tblockSelectors,\n\thasBlockGapSupport,\n\thasFallbackGapSupport,\n\tdisableLayoutStyles = false\n) => {\n\tconst nodesWithStyles = getNodesWithStyles( tree, blockSelectors );\n\tconst nodesWithSettings = getNodesWithSettings( tree, blockSelectors );\n\tconst useRootPaddingAlign = tree?.settings?.useRootPaddingAwareAlignments;\n\tconst { contentSize, wideSize } = tree?.settings?.layout || {};\n\n\t/*\n\t * Reset default browser margin on the root body element.\n\t * This is set on the root selector **before** generating the ruleset\n\t * from the `theme.json`. This is to ensure that if the `theme.json` declares\n\t * `margin` in its `spacing` declaration for the `body` element then these\n\t * user-generated values take precedence in the CSS cascade.\n\t * @link https://github.com/WordPress/gutenberg/issues/36147.\n\t */\n\tlet ruleset = 'body {margin: 0;';\n\n\tif ( contentSize ) {\n\t\truleset += ` --wp--style--global--content-size: ${ contentSize };`;\n\t}\n\n\tif ( wideSize ) {\n\t\truleset += ` --wp--style--global--wide-size: ${ wideSize };`;\n\t}\n\n\tif ( useRootPaddingAlign ) {\n\t\t/*\n\t\t * These rules reproduce the ones from https://github.com/WordPress/gutenberg/blob/79103f124925d1f457f627e154f52a56228ed5ad/lib/class-wp-theme-json-gutenberg.php#L2508\n\t\t * almost exactly, but for the selectors that target block wrappers in the front end. This code only runs in the editor, so it doesn't need those selectors.\n\t\t */\n\t\truleset += `padding-right: 0; padding-left: 0; padding-top: var(--wp--style--root--padding-top); padding-bottom: var(--wp--style--root--padding-bottom) }\n\t\t\t.has-global-padding { padding-right: var(--wp--style--root--padding-right); padding-left: var(--wp--style--root--padding-left); }\n\t\t\t.has-global-padding :where(.has-global-padding) { padding-right: 0; padding-left: 0; }\n\t\t\t.has-global-padding > .alignfull { margin-right: calc(var(--wp--style--root--padding-right) * -1); margin-left: calc(var(--wp--style--root--padding-left) * -1); }\n\t\t\t.has-global-padding :where(.has-global-padding) > .alignfull { margin-right: 0; margin-left: 0; }\n\t\t\t.has-global-padding > .alignfull:where(:not(.has-global-padding)) > :where(.wp-block:not(.alignfull),p,h1,h2,h3,h4,h5,h6,ul,ol) { padding-right: var(--wp--style--root--padding-right); padding-left: var(--wp--style--root--padding-left); }\n\t\t\t.has-global-padding :where(.has-global-padding) > .alignfull:where(:not(.has-global-padding)) > :where(.wp-block:not(.alignfull),p,h1,h2,h3,h4,h5,h6,ul,ol) { padding-right: 0; padding-left: 0;`;\n\t}\n\n\truleset += '}';\n\n\tnodesWithStyles.forEach(\n\t\t( {\n\t\t\tselector,\n\t\t\tduotoneSelector,\n\t\t\tstyles,\n\t\t\tfallbackGapValue,\n\t\t\thasLayoutSupport,\n\t\t\tfeatureSelectors,\n\t\t\tstyleVariationSelectors,\n\t\t} ) => {\n\t\t\t// Process styles for block support features with custom feature level\n\t\t\t// CSS selectors set.\n\t\t\tif ( featureSelectors ) {\n\t\t\t\tconst featureDeclarations = getFeatureDeclarations(\n\t\t\t\t\tfeatureSelectors,\n\t\t\t\t\tstyles\n\t\t\t\t);\n\n\t\t\t\tObject.entries( featureDeclarations ).forEach(\n\t\t\t\t\t( [ cssSelector, declarations ] ) => {\n\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\tconst rules = declarations.join( ';' );\n\t\t\t\t\t\t\truleset += `${ cssSelector }{${ rules };}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( styleVariationSelectors ) {\n\t\t\t\tObject.entries( styleVariationSelectors ).forEach(\n\t\t\t\t\t( [ styleVariationName, styleVariationSelector ] ) => {\n\t\t\t\t\t\tconst styleVariations =\n\t\t\t\t\t\t\tstyles?.variations?.[ styleVariationName ];\n\t\t\t\t\t\tif ( styleVariations ) {\n\t\t\t\t\t\t\t// If the block uses any custom selectors for block support, add those first.\n\t\t\t\t\t\t\tif ( featureSelectors ) {\n\t\t\t\t\t\t\t\tconst featureDeclarations =\n\t\t\t\t\t\t\t\t\tgetFeatureDeclarations(\n\t\t\t\t\t\t\t\t\t\tfeatureSelectors,\n\t\t\t\t\t\t\t\t\t\tstyleVariations\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tObject.entries( featureDeclarations ).forEach(\n\t\t\t\t\t\t\t\t\t( [ baseSelector, declarations ] ) => {\n\t\t\t\t\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\t\t\t\t\tconst cssSelector =\n\t\t\t\t\t\t\t\t\t\t\t\tconcatFeatureVariationSelectorString(\n\t\t\t\t\t\t\t\t\t\t\t\t\tbaseSelector,\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyleVariationSelector\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tconst rules =\n\t\t\t\t\t\t\t\t\t\t\t\tdeclarations.join( ';' );\n\t\t\t\t\t\t\t\t\t\t\truleset += `${ cssSelector }{${ rules };}`;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Otherwise add regular selectors.\n\t\t\t\t\t\t\tconst styleVariationDeclarations =\n\t\t\t\t\t\t\t\tgetStylesDeclarations(\n\t\t\t\t\t\t\t\t\tstyleVariations,\n\t\t\t\t\t\t\t\t\tstyleVariationSelector,\n\t\t\t\t\t\t\t\t\tuseRootPaddingAlign,\n\t\t\t\t\t\t\t\t\ttree\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif ( styleVariationDeclarations.length ) {\n\t\t\t\t\t\t\t\truleset += `${ styleVariationSelector }{${ styleVariationDeclarations.join(\n\t\t\t\t\t\t\t\t\t';'\n\t\t\t\t\t\t\t\t) };}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Process duotone styles.\n\t\t\tif ( duotoneSelector ) {\n\t\t\t\tconst duotoneStyles = {};\n\t\t\t\tif ( styles?.filter ) {\n\t\t\t\t\tduotoneStyles.filter = styles.filter;\n\t\t\t\t\tdelete styles.filter;\n\t\t\t\t}\n\t\t\t\tconst duotoneDeclarations =\n\t\t\t\t\tgetStylesDeclarations( duotoneStyles );\n\t\t\t\tif ( duotoneDeclarations.length ) {\n\t\t\t\t\truleset += `${ duotoneSelector }{${ duotoneDeclarations.join(\n\t\t\t\t\t\t';'\n\t\t\t\t\t) };}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Process blockGap and layout styles.\n\t\t\tif (\n\t\t\t\t! disableLayoutStyles &&\n\t\t\t\t( ROOT_BLOCK_SELECTOR === selector || hasLayoutSupport )\n\t\t\t) {\n\t\t\t\truleset += getLayoutStyles( {\n\t\t\t\t\ttree,\n\t\t\t\t\tstyle: styles,\n\t\t\t\t\tselector,\n\t\t\t\t\thasBlockGapSupport,\n\t\t\t\t\thasFallbackGapSupport,\n\t\t\t\t\tfallbackGapValue,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Process the remaining block styles (they use either normal block class or __experimentalSelector).\n\t\t\tconst declarations = getStylesDeclarations(\n\t\t\t\tstyles,\n\t\t\t\tselector,\n\t\t\t\tuseRootPaddingAlign,\n\t\t\t\ttree\n\t\t\t);\n\t\t\tif ( declarations?.length ) {\n\t\t\t\truleset += `${ selector }{${ declarations.join( ';' ) };}`;\n\t\t\t}\n\n\t\t\t// Check for pseudo selector in `styles` and handle separately.\n\t\t\tconst pseudoSelectorStyles = Object.entries( styles ).filter(\n\t\t\t\t( [ key ] ) => key.startsWith( ':' )\n\t\t\t);\n\n\t\t\tif ( pseudoSelectorStyles?.length ) {\n\t\t\t\tpseudoSelectorStyles.forEach(\n\t\t\t\t\t( [ pseudoKey, pseudoStyle ] ) => {\n\t\t\t\t\t\tconst pseudoDeclarations =\n\t\t\t\t\t\t\tgetStylesDeclarations( pseudoStyle );\n\n\t\t\t\t\t\tif ( ! pseudoDeclarations?.length ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// `selector` maybe provided in a form\n\t\t\t\t\t\t// where block level selectors have sub element\n\t\t\t\t\t\t// selectors appended to them as a comma separated\n\t\t\t\t\t\t// string.\n\t\t\t\t\t\t// e.g. `h1 a,h2 a,h3 a,h4 a,h5 a,h6 a`;\n\t\t\t\t\t\t// Split and append pseudo selector to create\n\t\t\t\t\t\t// the proper rules to target the elements.\n\t\t\t\t\t\tconst _selector = selector\n\t\t\t\t\t\t\t.split( ',' )\n\t\t\t\t\t\t\t.map( ( sel ) => sel + pseudoKey )\n\t\t\t\t\t\t\t.join( ',' );\n\n\t\t\t\t\t\tconst pseudoRule = `${ _selector }{${ pseudoDeclarations.join(\n\t\t\t\t\t\t\t';'\n\t\t\t\t\t\t) };}`;\n\n\t\t\t\t\t\truleset += pseudoRule;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t);\n\n\t/* Add alignment / layout styles */\n\truleset =\n\t\truleset +\n\t\t'.wp-site-blocks > .alignleft { float: left; margin-right: 2em; }';\n\truleset =\n\t\truleset +\n\t\t'.wp-site-blocks > .alignright { float: right; margin-left: 2em; }';\n\truleset =\n\t\truleset +\n\t\t'.wp-site-blocks > .aligncenter { justify-content: center; margin-left: auto; margin-right: auto; }';\n\n\tif ( hasBlockGapSupport ) {\n\t\t// Use fallback of `0.5em` just in case, however if there is blockGap support, there should nearly always be a real value.\n\t\tconst gapValue =\n\t\t\tgetGapCSSValue( tree?.styles?.spacing?.blockGap ) || '0.5em';\n\t\truleset =\n\t\t\truleset +\n\t\t\t`:where(.wp-site-blocks) > * { margin-block-start: ${ gapValue }; margin-block-end: 0; }`;\n\t\truleset =\n\t\t\truleset +\n\t\t\t':where(.wp-site-blocks) > :first-child:first-child { margin-block-start: 0; }';\n\t\truleset =\n\t\t\truleset +\n\t\t\t':where(.wp-site-blocks) > :last-child:last-child { margin-block-end: 0; }';\n\t}\n\n\tnodesWithSettings.forEach( ( { selector, presets } ) => {\n\t\tif ( ROOT_BLOCK_SELECTOR === selector ) {\n\t\t\t// Do not add extra specificity for top-level classes.\n\t\t\tselector = '';\n\t\t}\n\n\t\tconst classes = getPresetsClasses( selector, presets );\n\t\tif ( classes.length > 0 ) {\n\t\t\truleset += classes;\n\t\t}\n\t} );\n\n\treturn ruleset;\n};\n\nexport function toSvgFilters( tree, blockSelectors ) {\n\tconst nodesWithSettings = getNodesWithSettings( tree, blockSelectors );\n\treturn nodesWithSettings.flatMap( ( { presets } ) => {\n\t\treturn getPresetsSvgFilters( presets );\n\t} );\n}\n\nconst getSelectorsConfig = ( blockType, rootSelector ) => {\n\tif (\n\t\tblockType?.selectors &&\n\t\tObject.keys( blockType.selectors ).length > 0\n\t) {\n\t\treturn blockType.selectors;\n\t}\n\n\tconst config = { root: rootSelector };\n\tObject.entries( BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS ).forEach(\n\t\t( [ featureKey, featureName ] ) => {\n\t\t\tconst featureSelector = getBlockCSSSelector(\n\t\t\t\tblockType,\n\t\t\t\tfeatureKey\n\t\t\t);\n\n\t\t\tif ( featureSelector ) {\n\t\t\t\tconfig[ featureName ] = featureSelector;\n\t\t\t}\n\t\t}\n\t);\n\n\treturn config;\n};\n\nexport const getBlockSelectors = ( blockTypes, getBlockStyles ) => {\n\tconst result = {};\n\tblockTypes.forEach( ( blockType ) => {\n\t\tconst name = blockType.name;\n\t\tconst selector = getBlockCSSSelector( blockType );\n\t\tlet duotoneSelector = getBlockCSSSelector(\n\t\t\tblockType,\n\t\t\t'filter.duotone'\n\t\t);\n\n\t\t// Keep backwards compatibility for support.color.__experimentalDuotone.\n\t\tif ( ! duotoneSelector ) {\n\t\t\tconst rootSelector = getBlockCSSSelector( blockType );\n\t\t\tconst duotoneSupport = getBlockSupport(\n\t\t\t\tblockType,\n\t\t\t\t'color.__experimentalDuotone',\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tduotoneSelector =\n\t\t\t\tduotoneSupport && scopeSelector( rootSelector, duotoneSupport );\n\t\t}\n\n\t\tconst hasLayoutSupport = !! blockType?.supports?.__experimentalLayout;\n\t\tconst fallbackGapValue =\n\t\t\tblockType?.supports?.spacing?.blockGap?.__experimentalDefault;\n\n\t\tconst blockStyleVariations = getBlockStyles( name );\n\t\tconst styleVariationSelectors = {};\n\t\tif ( blockStyleVariations?.length ) {\n\t\t\tblockStyleVariations.forEach( ( variation ) => {\n\t\t\t\tconst styleVariationSelector = `.is-style-${ variation.name }${ selector }`;\n\t\t\t\tstyleVariationSelectors[ variation.name ] =\n\t\t\t\t\tstyleVariationSelector;\n\t\t\t} );\n\t\t}\n\t\t// For each block support feature add any custom selectors.\n\t\tconst featureSelectors = getSelectorsConfig( blockType, selector );\n\n\t\tresult[ name ] = {\n\t\t\tduotoneSelector,\n\t\t\tfallbackGapValue,\n\t\t\tfeatureSelectors: Object.keys( featureSelectors ).length\n\t\t\t\t? featureSelectors\n\t\t\t\t: undefined,\n\t\t\thasLayoutSupport,\n\t\t\tname,\n\t\t\tselector,\n\t\t\tstyleVariationSelectors: Object.keys( styleVariationSelectors )\n\t\t\t\t.length\n\t\t\t\t? styleVariationSelectors\n\t\t\t\t: undefined,\n\t\t};\n\t} );\n\n\treturn result;\n};\n\n/**\n * If there is a separator block whose color is defined in theme.json via background,\n * update the separator color to the same value by using border color.\n *\n * @param {Object} config Theme.json configuration file object.\n * @return {Object} configTheme.json configuration file object updated.\n */\nfunction updateConfigWithSeparator( config ) {\n\tconst needsSeparatorStyleUpdate =\n\t\tconfig.styles?.blocks?.[ 'core/separator' ] &&\n\t\tconfig.styles?.blocks?.[ 'core/separator' ].color?.background &&\n\t\t! config.styles?.blocks?.[ 'core/separator' ].color?.text &&\n\t\t! config.styles?.blocks?.[ 'core/separator' ].border?.color;\n\tif ( needsSeparatorStyleUpdate ) {\n\t\treturn {\n\t\t\t...config,\n\t\t\tstyles: {\n\t\t\t\t...config.styles,\n\t\t\t\tblocks: {\n\t\t\t\t\t...config.styles.blocks,\n\t\t\t\t\t'core/separator': {\n\t\t\t\t\t\t...config.styles.blocks[ 'core/separator' ],\n\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t...config.styles.blocks[ 'core/separator' ].color,\n\t\t\t\t\t\t\ttext: config.styles?.blocks[ 'core/separator' ]\n\t\t\t\t\t\t\t\t.color.background,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\treturn config;\n}\n\nconst processCSSNesting = ( css, blockSelector ) => {\n\tlet processedCSS = '';\n\n\t// Split CSS nested rules.\n\tconst parts = css.split( '&' );\n\tparts.forEach( ( part ) => {\n\t\tprocessedCSS += ! part.includes( '{' )\n\t\t\t? blockSelector + '{' + part + '}' // If the part doesn't contain braces, it applies to the root level.\n\t\t\t: blockSelector + part; // Prepend the selector, which effectively replaces the \"&\" character.\n\t} );\n\treturn processedCSS;\n};\n\n/**\n * Returns the global styles output using a global styles configuration.\n * If wishing to generate global styles and settings based on the\n * global styles config loaded in the editor context, use `useGlobalStylesOutput()`.\n * The use case for a custom config is to generate bespoke styles\n * and settings for previews, or other out-of-editor experiences.\n *\n * @param {Object} mergedConfig Global styles configuration.\n * @return {Array} Array of stylesheets and settings.\n */\nexport function useGlobalStylesOutputWithConfig( mergedConfig = {} ) {\n\tconst [ blockGap ] = useGlobalSetting( 'spacing.blockGap' );\n\tconst hasBlockGapSupport = blockGap !== null;\n\tconst hasFallbackGapSupport = ! hasBlockGapSupport; // This setting isn't useful yet: it exists as a placeholder for a future explicit fallback styles support.\n\tconst disableLayoutStyles = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn !! getSettings().disableLayoutStyles;\n\t} );\n\n\tconst getBlockStyles = useSelect( ( select ) => {\n\t\treturn select( blocksStore ).getBlockStyles;\n\t}, [] );\n\n\treturn useMemo( () => {\n\t\tif ( ! mergedConfig?.styles || ! mergedConfig?.settings ) {\n\t\t\treturn [];\n\t\t}\n\t\tmergedConfig = updateConfigWithSeparator( mergedConfig );\n\n\t\tconst blockSelectors = getBlockSelectors(\n\t\t\tgetBlockTypes(),\n\t\t\tgetBlockStyles\n\t\t);\n\n\t\tconst customProperties = toCustomProperties(\n\t\t\tmergedConfig,\n\t\t\tblockSelectors\n\t\t);\n\t\tconst globalStyles = toStyles(\n\t\t\tmergedConfig,\n\t\t\tblockSelectors,\n\t\t\thasBlockGapSupport,\n\t\t\thasFallbackGapSupport,\n\t\t\tdisableLayoutStyles\n\t\t);\n\t\tconst svgs = toSvgFilters( mergedConfig, blockSelectors );\n\n\t\tconst styles = [\n\t\t\t{\n\t\t\t\tcss: customProperties,\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tcss: globalStyles,\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t\t// Load custom CSS in own stylesheet so that any invalid CSS entered in the input won't break all the global styles in the editor.\n\t\t\t{\n\t\t\t\tcss: mergedConfig.styles.css ?? '',\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tassets: svgs,\n\t\t\t\t__unstableType: 'svg',\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t];\n\n\t\t// Loop through the blocks to check if there are custom CSS values.\n\t\t// If there are, get the block selector and push the selector together with\n\t\t// the CSS value to the 'stylesheets' array.\n\t\tgetBlockTypes().forEach( ( blockType ) => {\n\t\t\tif ( mergedConfig.styles.blocks[ blockType.name ]?.css ) {\n\t\t\t\tconst selector = blockSelectors[ blockType.name ].selector;\n\t\t\t\tstyles.push( {\n\t\t\t\t\tcss: processCSSNesting(\n\t\t\t\t\t\tmergedConfig.styles.blocks[ blockType.name ]?.css,\n\t\t\t\t\t\tselector\n\t\t\t\t\t),\n\t\t\t\t\tisGlobalStyles: true,\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\treturn [ styles, mergedConfig.settings ];\n\t}, [\n\t\thasBlockGapSupport,\n\t\thasFallbackGapSupport,\n\t\tmergedConfig,\n\t\tdisableLayoutStyles,\n\t] );\n}\n\n/**\n * Returns the global styles output based on the current state of global styles config loaded in the editor context.\n *\n * @return {Array} Array of stylesheets and settings.\n */\nexport function useGlobalStylesOutput() {\n\tconst { merged: mergedConfig } = useContext( GlobalStylesContext );\n\treturn useGlobalStylesOutputWithConfig( mergedConfig );\n}\n","/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\n\nconst shadow = (\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"M12 8c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm0 6.5c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zM12.8 3h-1.5v3h1.5V3zm-1.6 18h1.5v-3h-1.5v3zm6.8-9.8v1.5h3v-1.5h-3zm-12 0H3v1.5h3v-1.5zm9.7 5.6 2.1 2.1 1.1-1.1-2.1-2.1-1.1 1.1zM8.3 7.2 6.2 5.1 5.1 6.2l2.1 2.1 1.1-1.1zM5.1 17.8l1.1 1.1 2.1-2.1-1.1-1.1-2.1 2.1zM18.9 6.2l-1.1-1.1-2.1 2.1 1.1 1.1 2.1-2.1z\" />\n\t</SVG>\n);\n\nexport default shadow;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\t__experimentalGrid as Grid,\n\t__experimentalHeading as Heading,\n\tFlexItem,\n\tDropdown,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\tButton,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\nimport { shadow as shadowIcon, Icon, check } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromVariable } from './utils';\nimport { setImmutably } from '../../utils/object';\n\nexport function useHasEffectsPanel( settings ) {\n\tconst hasShadowControl = useHasShadowControl( settings );\n\treturn hasShadowControl;\n}\n\nfunction useHasShadowControl( settings ) {\n\treturn !! settings?.shadow;\n}\n\nfunction EffectsToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Effects' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tshadow: true,\n};\n\nexport default function EffectsPanel( {\n\tas: Wrapper = EffectsToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n} ) {\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\n\t// Shadow\n\tconst hasShadowEnabled = useHasShadowControl( settings );\n\tconst shadow = decodeValue( inheritedValue?.shadow );\n\tconst setShadow = ( newValue ) => {\n\t\tonChange( setImmutably( value, [ 'shadow' ], newValue ) );\n\t};\n\tconst hasShadow = () => !! value?.shadow;\n\tconst resetShadow = () => setShadow( undefined );\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tshadow: undefined,\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ hasShadowEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Shadow' ) }\n\t\t\t\t\thasValue={ hasShadow }\n\t\t\t\t\tonDeselect={ resetShadow }\n\t\t\t\t\tisShownByDefault={ defaultControls.shadow }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<ItemGroup isBordered isSeparated>\n\t\t\t\t\t\t<ShadowPopover\n\t\t\t\t\t\t\tshadow={ shadow }\n\t\t\t\t\t\t\tonShadowChange={ setShadow }\n\t\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ItemGroup>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n\nconst ShadowPopover = ( { shadow, onShadowChange, settings } ) => {\n\tconst popoverProps = {\n\t\tplacement: 'left-start',\n\t\toffset: 36,\n\t\tshift: true,\n\t};\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ popoverProps }\n\t\t\tclassName=\"block-editor-global-styles-effects-panel__shadow-dropdown\"\n\t\t\trenderToggle={ renderShadowToggle() }\n\t\t\trenderContent={ () => (\n\t\t\t\t<DropdownContentWrapper paddingSize=\"medium\">\n\t\t\t\t\t<ShadowPopoverContainer\n\t\t\t\t\t\tshadow={ shadow }\n\t\t\t\t\t\tonShadowChange={ onShadowChange }\n\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t/>\n\t\t\t\t</DropdownContentWrapper>\n\t\t\t) }\n\t\t/>\n\t);\n};\n\nfunction renderShadowToggle() {\n\treturn ( { onToggle, isOpen } ) => {\n\t\tconst toggleProps = {\n\t\t\tonClick: onToggle,\n\t\t\tclassName: classnames( { 'is-open': isOpen } ),\n\t\t\t'aria-expanded': isOpen,\n\t\t};\n\n\t\treturn (\n\t\t\t<Button { ...toggleProps }>\n\t\t\t\t<HStack justify=\"flex-start\">\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tclassName=\"block-editor-global-styles-effects-panel__toggle-icon\"\n\t\t\t\t\t\ticon={ shadowIcon }\n\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t/>\n\t\t\t\t\t<FlexItem>{ __( 'Shadow' ) }</FlexItem>\n\t\t\t\t</HStack>\n\t\t\t</Button>\n\t\t);\n\t};\n}\n\nfunction ShadowPopoverContainer( { shadow, onShadowChange, settings } ) {\n\tconst defaultShadows = settings?.shadow?.presets?.default;\n\tconst themeShadows = settings?.shadow?.presets?.theme;\n\tconst defaultPresetsEnabled = settings?.shadow?.defaultPresets;\n\n\tconst shadows = [\n\t\t...( defaultPresetsEnabled ? defaultShadows : [] ),\n\t\t...( themeShadows || [] ),\n\t];\n\n\treturn (\n\t\t<div className=\"block-editor-global-styles-effects-panel__shadow-popover-container\">\n\t\t\t<VStack spacing={ 4 }>\n\t\t\t\t<Heading level={ 5 }>{ __( 'Shadow' ) }</Heading>\n\t\t\t\t<ShadowPresets\n\t\t\t\t\tpresets={ shadows }\n\t\t\t\t\tactiveShadow={ shadow }\n\t\t\t\t\tonSelect={ onShadowChange }\n\t\t\t\t/>\n\t\t\t</VStack>\n\t\t</div>\n\t);\n}\n\nfunction ShadowPresets( { presets, activeShadow, onSelect } ) {\n\treturn ! presets ? null : (\n\t\t<Grid columns={ 6 } gap={ 0 } align=\"center\" justify=\"center\">\n\t\t\t{ presets.map( ( { name, slug, shadow } ) => (\n\t\t\t\t<ShadowIndicator\n\t\t\t\t\tkey={ slug }\n\t\t\t\t\tlabel={ name }\n\t\t\t\t\tisActive={ shadow === activeShadow }\n\t\t\t\t\tonSelect={ () =>\n\t\t\t\t\t\tonSelect( shadow === activeShadow ? undefined : shadow )\n\t\t\t\t\t}\n\t\t\t\t\tshadow={ shadow }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</Grid>\n\t);\n}\n\nfunction ShadowIndicator( { label, isActive, onSelect, shadow } ) {\n\treturn (\n\t\t<div className=\"block-editor-global-styles-effects-panel__shadow-indicator-wrapper\">\n\t\t\t<Button\n\t\t\t\tclassName=\"block-editor-global-styles-effects-panel__shadow-indicator\"\n\t\t\t\tonClick={ onSelect }\n\t\t\t\tlabel={ label }\n\t\t\t\tstyle={ { boxShadow: shadow } }\n\t\t\t\tshowTooltip\n\t\t\t>\n\t\t\t\t{ isActive && <Icon icon={ check } /> }\n\t\t\t</Button>\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tTextareaControl,\n\tTooltip,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Icon, info } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { default as transformStyles } from '../../utils/transform-styles';\n\nexport default function AdvancedPanel( {\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n} ) {\n\t// Custom CSS\n\tconst [ cssError, setCSSError ] = useState( null );\n\tconst customCSS = inheritedValue?.css;\n\tfunction handleOnChange( newValue ) {\n\t\tonChange( {\n\t\t\t...value,\n\t\t\tcss: newValue,\n\t\t} );\n\t\tif ( cssError ) {\n\t\t\tconst [ transformed ] = transformStyles(\n\t\t\t\t[ { css: value } ],\n\t\t\t\t'.editor-styles-wrapper'\n\t\t\t);\n\t\t\tif ( transformed ) {\n\t\t\t\tsetCSSError( null );\n\t\t\t}\n\t\t}\n\t}\n\tfunction handleOnBlur( event ) {\n\t\tif ( ! event?.target?.value ) {\n\t\t\tsetCSSError( null );\n\t\t\treturn;\n\t\t}\n\n\t\tconst [ transformed ] = transformStyles(\n\t\t\t[ { css: event.target.value } ],\n\t\t\t'.editor-styles-wrapper'\n\t\t);\n\n\t\tsetCSSError(\n\t\t\ttransformed === null\n\t\t\t\t? __( 'There is an error with your CSS structure.' )\n\t\t\t\t: null\n\t\t);\n\t}\n\n\treturn (\n\t\t<VStack spacing={ 3 }>\n\t\t\t<TextareaControl\n\t\t\t\tlabel={ __( 'Additional CSS' ) }\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tvalue={ customCSS }\n\t\t\t\tonChange={ ( newValue ) => handleOnChange( newValue ) }\n\t\t\t\tonBlur={ handleOnBlur }\n\t\t\t\tclassName=\"block-editor-global-styles-advanced-panel__custom-css-input\"\n\t\t\t\tspellCheck={ false }\n\t\t\t/>\n\t\t\t{ cssError && (\n\t\t\t\t<Tooltip text={ cssError }>\n\t\t\t\t\t<div className=\"block-editor-global-styles-advanced-panel__custom-css-validation-wrapper\">\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticon={ info }\n\t\t\t\t\t\t\tclassName=\"block-editor-global-styles-advanced-panel__custom-css-validation-icon\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Tooltip>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport * as globalStyles from './components/global-styles';\nimport { ExperimentalBlockEditorProvider } from './components/provider';\nimport { lock } from './lock-unlock';\nimport ResizableBoxPopover from './components/resizable-box-popover';\nimport { ComposedPrivateInserter as PrivateInserter } from './components/inserter';\nimport { PrivateListView } from './components/list-view';\nimport BlockInfo from './components/block-info-slot-fill';\nimport { useShouldContextualToolbarShow } from './utils/use-should-contextual-toolbar-show';\nimport { cleanEmptyObject } from './hooks/utils';\nimport { useBlockEditingMode } from './components/block-editing-mode';\n\n/**\n * Private @wordpress/block-editor APIs.\n */\nexport const privateApis = {};\nlock( privateApis, {\n\t...globalStyles,\n\tExperimentalBlockEditorProvider,\n\tPrivateInserter,\n\tPrivateListView,\n\tResizableBoxPopover,\n\tBlockInfo,\n\tuseShouldContextualToolbarShow,\n\tcleanEmptyObject,\n\tuseBlockEditingMode,\n} );\n","/**\n * WordPress dependencies\n */\nimport { ResizableBox } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockPopover from '../block-popover';\n\nexport default function ResizableBoxPopover( {\n\tclientId,\n\tresizableBoxProps,\n\t...props\n} ) {\n\treturn (\n\t\t<BlockPopover\n\t\t\tclientId={ clientId }\n\t\t\t__unstableCoverTarget\n\t\t\t__unstablePopoverSlot=\"block-toolbar\"\n\t\t\tshift={ false }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<ResizableBox { ...resizableBoxProps } />\n\t\t</BlockPopover>\n\t);\n}\n"],"names":["module","exports","keys","values","map","Map","has","key","indexOf","get","set","value","push","delete","index","splice","createEvent","name","Event","bubbles","e","evt","document","initEvent","assign","ta","nodeName","heightOffset","clientWidth","cachedHeight","pageResize","update","destroy","style","window","removeEventListener","Object","forEach","bind","height","resize","overflowY","overflowX","wordWrap","addEventListener","getComputedStyle","boxSizing","parseFloat","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","isNaN","changeOverflow","width","offsetWidth","scrollHeight","overflows","el","arr","parentNode","Element","scrollTop","node","getParentOverflows","docTop","documentElement","styleHeight","Math","round","computed","actualHeight","offsetHeight","dispatchEvent","err","methods","autosize","options","Array","prototype","call","length","x","default","hasOwn","hasOwnProperty","classNames","classes","i","arguments","arg","argType","isArray","inner","apply","toString","join","prop","currentStyle","replace","word","letter","toUpperCase","Diff","buildValues","diff","components","newString","oldString","useLongestToken","componentPos","componentLen","newPos","oldPos","component","removed","slice","count","added","tmp","oldValue","lastComponent","equals","pop","callback","this","self","done","setTimeout","undefined","castInput","removeEmpty","tokenize","newLen","oldLen","editLength","maxEditLength","bestPath","extractCommon","execEditLength","diagonalPath","basePath","addPath","removePath","canAdd","canRemove","path","pushComponent","exec","ret","last","commonCount","left","right","comparator","ignoreCase","toLowerCase","array","split","chars","oldStr","newStr","characterDiff","util","elem","container","config","nodeType","getWindow","allowHorizontalScroll","onlyScrollIfNeeded","alignWithTop","alignWithLeft","offsetTop","offsetLeft","offsetBottom","offsetRight","isWin","isWindow","isFramed","frameElement","elemOffset","offset","eh","outerHeight","ew","outerWidth","containerOffset","ch","cw","containerScroll","diffTop","diffBottom","win","winScroll","ww","wh","scrollingElement","body","scrollLeft","top","clientHeight","css","_extends","target","source","_typeof","Symbol","iterator","obj","constructor","getScroll","w","method","d","getScrollLeft","getScrollTop","getOffset","pos","box","y","doc","ownerDocument","docElem","getBoundingClientRect","clientLeft","clientTop","getClientPosition","defaultView","parentWindow","_RE_NUM_NO_PX","RegExp","RE_POS","CURRENT_STYLE","RUNTIME_STYLE","LEFT","getComputedStyleX","each","fn","isBorderBoxFn","computedStyle_","val","computedStyle","getPropertyValue","test","rsLeft","pixelLeft","BOX_MODELS","CONTENT_INDEX","PADDING_INDEX","BORDER_INDEX","getPBMWidth","props","which","j","cssProp","domUtils","getWH","extra","viewportWidth","viewportHeight","docWidth","docHeight","borderBoxValue","isBorderBox","cssBoxValue","Number","borderBoxValueOrIsBorderBox","padding","refWin","max","documentElementProp","compatMode","cssShow","position","visibility","display","getWHIgnoreDisplay","args","old","swap","v","first","charAt","includeMargin","current","setOffset","clone","overflow","scrollTo","equal","a","b","size","entries","Set","ArrayBuffer","isView","flags","valueOf","create","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","lnHeightStr","lnHeight","_lnHeightStyle","lineHeight","_node","createElement","innerHTML","setAttribute","fontSizeStr","fontSize","border","appendChild","removeChild","canUseDOM","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","attachEvent","canUseViewport","screen","isInWorker","_ie","_firefox","_opera","_webkit","_chrome","_ie_real_version","_osx","_windows","_linux","_android","_win64","_iphone","_ipad","_native","_mobile","_populated","_populate","uas","navigator","userAgent","agent","os","NaN","documentMode","trident","ver","UserAgent_DEPRECATED","ie","ieCompatibilityMode","ie64","firefox","opera","webkit","safari","chrome","windows","osx","linux","iphone","mobile","nativeApp","android","ipad","useHasFeature","implementation","hasFeature","eventNameSuffix","capture","eventName","isSupported","element","isEventSupported","normalizeWheel","event","sX","sY","pX","pY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","spinX","spinY","pixelX","pixelY","getEventType","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","location","propFullName","secret","Error","getShim","isRequired","ReactPropTypes","bool","func","number","object","string","symbol","any","arrayOf","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","extendStatics","__extends","setPrototypeOf","__proto__","p","__","__assign","t","s","n","__rest","getOwnPropertySymbols","__esModule","React","getLineHeight","RESIZED","TextareaAutosizeClass","_super","_this","state","textarea","onResize","updateLineHeight","setState","onChange","currentValue","currentTarget","componentDidMount","_a","maxRows","async","componentWillUnmount","render","_b","children","innerRef","maxHeight","ref","componentDidUpdate","defaultProps","rows","propTypes","Component","TextareaAutosize","forwardRef","TextareaAutosize_1","characterMap","allAccents","firstAccent","removeAccents","match","remove","traverse","Traverse","walk","root","cb","immutable","parents","alive","walker","node_","copy","modifiers","keepGoing","concat","parent","isRoot","level","circular","stopHere","before","f","after","pre","post","stop","block","updateState","objectKeys","isLeaf","notLeaf","notRoot","child","isLast","isFirst","src","dst","toS","Date","getTime","isError","message","isBoolean","Boolean","isNumber","isString","String","getPrototypeOf","proto","T","ps","reduce","init","skip","acc","paths","nodes","res","xs","isMergeableObject","isNonNullObject","stringValue","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","for","cloneUnlessOtherwiseSpecified","deepmerge","defaultArrayMerge","getKeys","filter","propertyIsEnumerable","getEnumerableOwnPropertySymbols","propertyIsOnObject","property","_","arrayMerge","sourceIsArray","destination","propertyIsUnsafe","customMerge","getMergeFunction","mergeObject","all","prev","next","deepmerge_1","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","o","defineProperty","r","toStringTag","addFilter","settings","apiVersion","hasBlockSupport","createSlotFill","inline","other","PREFERENCES_DEFAULTS","insertUsage","SETTINGS_DEFAULTS","alignWide","supportsLayout","colors","slug","color","fontSizes","_x","imageDefaultSize","imageSizes","imageEditing","maxWidth","allowedBlockTypes","maxUploadFileSize","allowedMimeTypes","canLockBlocks","enableOpenverseMediaCategory","clearBlockSelection","__experimentalCanUserUseUnfilteredHTML","__experimentalBlockDirectory","__mobileEnablePageTemplates","__experimentalBlockPatterns","__experimentalBlockPatternCategories","__unstableGalleryWithImageBlocks","__unstableIsPreviewMode","blockInspectorAnimation","animationParent","enterDirection","generateAnchors","gradients","gradient","__unstableResolvedAssets","styles","scripts","insertAt","elements","moveTo","from","to","withoutMovedElements","identity","mapBlockOrder","blocks","rootClientId","result","clientId","innerBlocks","order","subClientId","mapBlockParents","stack","currentBlocks","shift","flattenBlocks","transform","getFlattenedBlocksWithoutAttributes","attributes","restBlock","getFlattenedBlockAttributes","isUpdatingSameBlockAttribute","action","lastAction","type","fastDeepEqual","clientIds","hasSameKeys","updateBlockTreeForBlocks","treeToUpdate","tree","flattenedBlocks","byClientId","subBlock","updateParentInnerBlocksInTree","updatedClientIds","updateChildrenOfUpdatedClientIds","uncontrolledParents","controlledParents","controlledInnerBlocks","add","pipe","combineReducers","reducer","id","updatedId","newState","inserterClientIds","getFlattenedClientIds","replacedClientIds","parentsOfRemovedBlocks","removedClientIds","updatedBlockUids","fromRootClientId","toRootClientId","getAllChildren","keepControlledInnerBlocks","nestedControllers","stateAfterBlocksRemoval","stateAfterInsert","stateAfterInsertOrder","_key","markNextChangeAsNotPersistent","nextState","isExplicitPersistentChange","nextIsPersistentChange","isPersistentChange","IGNORED_ACTION_TYPES","isIgnoredChange","tempState","changes","updates","every","hasChange","updatedAttributeEntries","uniqueByBlock","hasUpdatedAttributes","existingAttributes","newAttributes","blockOrder","subState","mappedBlocks","fromIndex","includes","firstClientId","firstIndex","lastClientId","newSubOrder","hasControlledInnerBlocks","selectionHelper","updateSelection","blockToSelect","indexToSelect","combinedReducers","isTyping","isBlockInterfaceHidden","draggedBlocks","selection","selectionStart","attributeKey","startOffset","selectionEnd","endOffset","start","end","startClientId","endClientId","some","isMultiSelecting","isSelectionEnabled","initialPosition","blocksMode","blockListSettings","fromEntries","removedBlock","restBlocks","insertionPoint","__unstableWithInserter","operation","template","isValid","preferences","prevState","blockName","select","blocksStore","getActiveBlockVariation","time","lastBlockAttributesChange","accumulator","editorMode","mode","hasBlockMovingClientId","highlightedBlock","isHighlighted","lastBlockInserted","meta","temporarilyEditingAsBlocks","blockVisibility","blockEditingModes","automaticChangeStatus","LEAF_KEY","isShallowEqual","selector","getDependants","rootCache","normalizedGetDependants","clear","WeakMap","callSelector","cache","dependants","len","dependant","caches","isUniqueByDependants","head","createCache","getCache","lastDependants","SVG","xmlns","viewBox","Path","mapRichTextSettings","attributeDefinition","multiline","multilineTag","__unstableMultilineWrapperTags","multilineWrapperTags","__unstablePreserveWhiteSpace","preserveWhiteSpace","orderBy","items","field","sort","cmpA","cmpB","orderA","findIndex","item","orderB","getLastInsertedBlocksClientIds","getBlockEditingMode","createSelector","getBlockRootClientId","getTemplateLock","getBlockName","__experimentalHasContentRoleAttribute","parentMode","templateLock","isBlockSubtreeDisabled","isChildSubtreeDisabled","childClientId","getBlockOrder","EMPTY_ARRAY","EMPTY_SET","socialLinkName","Platform","service","isBlockValid","getBlockAttributes","getBlock","__unstableGetBlockWithoutInnerBlocks","getBlocks","treeKey","areInnerBlocksControlled","__unstableGetClientIdWithClientIdsTree","__unstableGetClientIdsTree","getClientIdsOfDescendants","collectedIds","givenId","descendantId","getClientIdsWithDescendants","topLevelId","getGlobalBlockCount","__experimentalGetGlobalBlocksByName","foundBlocks","getBlocksByClientId","getBlockNamesByClientId","getBlockCount","getSelectionStart","getSelectionEnd","getBlockSelectionStart","getBlockSelectionEnd","getSelectedBlockCount","getMultiSelectedBlockClientIds","hasSelectedBlock","getSelectedBlockClientId","getSelectedBlock","getBlockParents","ascending","reverse","getBlockParentsByBlockName","getBlockHierarchyRootClientId","getLowestCommonAncestorWithSelectedBlock","selectedId","clientParents","selectedParents","lowestCommonAncestor","maxDepth","min","getAdjacentBlockClientId","modifier","getFirstMultiSelectedBlockClientId","getLastMultiSelectedBlockClientId","orderSet","nextIndex","getPreviousBlockClientId","getNextBlockClientId","getSelectedBlocksInitialCaretPosition","getSelectedBlockClientIds","startIndex","endIndex","getMultiSelectedBlocks","multiSelectedBlockClientIds","selectedClientIds","isFirstMultiSelectedBlock","isBlockMultiSelected","isAncestorMultiSelected","ancestorClientId","isMultiSelected","getMultiSelectedBlocksStartClientId","getMultiSelectedBlocksEndClientId","__unstableIsFullySelected","selectionAnchor","selectionFocus","__unstableIsSelectionCollapsed","__unstableSelectionHasUnmergeableBlock","getBlockType","merge","__unstableIsSelectionMergeable","isForward","anchorRootClientId","targetBlockClientId","blockToMergeClientId","targetBlockName","blockToMerge","blocksToMerge","switchToBlockType","__unstableGetSelectedBlocksWithPartialSelection","anchorIndex","focusIndex","blockA","blockAType","blockB","blockBType","htmlA","htmlB","attributeDefinitionA","attributeDefinitionB","valueA","html","valueB","text","toHTMLString","getBlockIndex","isBlockSelected","hasSelectedInnerBlock","deep","innerClientId","hasDraggedInnerBlock","isBlockBeingDragged","isBlockWithinSelection","hasMultiSelection","getBlockMode","isDraggingBlocks","getDraggedBlockClientIds","isAncestorBeingDragged","parentClientId","isCaretWithinFormattedText","deprecated","since","version","getBlockInsertionPoint","isBlockInsertionPointVisible","isValidTemplate","getTemplate","getBlockListSettings","checkAllowList","list","defaultResult","canInsertBlockTypeUnmemoized","blockType","getSettings","parentBlockListSettings","parentAllowedBlocks","allowedBlocks","hasParentAllowedBlock","blockAllowedParentBlocks","parentName","hasBlockAllowedParent","hasBlockAllowedAncestor","blockAllowedAncestorBlocks","ancestor","canInsert","applyFilters","canInsertBlockType","canInsertBlocks","canRemoveBlock","lock","canRemoveBlocks","canMoveBlock","move","canMoveBlocks","canEditBlock","edit","canLockBlockType","nameOrType","getInsertUsage","canIncludeBlockTypeInInserter","calculateFrecency","duration","now","buildBlockTypeItem","buildScope","isDisabled","blockItemBase","title","icon","frecency","inserterVariations","getBlockVariations","initialAttributes","description","category","keywords","variations","example","utility","getInserterItems","buildBlockTypeInserterItem","blockParserTokenizer","blockTypeInserterItems","getBlockTypes","reusableBlockInserterItems","getReusableBlocks","reusableBlock","rawBlockMatch","content","raw","namespace","referencedBlockType","isDefault","variationMapper","variation","variationId","getItemFromVariation","core","coreItems","noncore","nonCoreItems","startsWith","getBlockTransformItems","normalizedBlocks","buildBlockTypeTransformItem","blockTypeTransformItems","itemsByName","possibleTransforms","getPossibleBlockTransformations","hasInserterItems","getAllowedBlocks","__experimentalGetAllowedBlocks","alternative","__experimentalGetDirectInsertBlock","defaultBlock","__experimentalDefaultBlock","directInsert","__experimentalDirectInsert","__experimentalGetParsedPattern","patternName","pattern","find","parse","__unstableSkipMigrationLogs","getAllAllowedPatterns","patterns","parsedPatterns","inserter","allowedPatterns","blocksQueue","innerBlock","checkAllowListRecursive","__experimentalGetAllowedPatterns","patternsAllowed","getPatternsByBlockTypes","blockNames","normalizedBlockNames","filteredPatterns","blockTypes","__experimentalGetPatternsByBlockTypes","__experimentalGetPatternTransformItems","selectedBlockNames","getBehaviors","behaviors","isLastBlockChangePersistent","__experimentalGetBlockListSettingsForBlocks","blockListSettingsForBlocks","__experimentalGetReusableBlockTitle","__unstableIsLastBlockChangeIgnored","__experimentalGetLastBlockAttributeChanges","__experimentalReusableBlocks","isNavigationMode","__unstableGetEditorMode","didAutomaticChange","isBlockHighlighted","__experimentalGetActiveBlockIdByBlockNames","validBlockNames","selectedBlockClientId","entityAreaParents","wasBlockJustInserted","isBlockVisible","__unstableGetVisibleBlocks","visibleBlocks","__unstableGetContentLockingParent","__unstableGetTemporarilyEditingAsBlocks","__unstableHasActiveBlockOverlayActive","blockSupportDisable","__unstableIsWithinBlockOverlay","privateSettings","__experimentalUpdateSettings","stripExperimentalSettings","cleanSettings","hideBlockInterface","showBlockInterface","setBlockEditingMode","unsetBlockEditingMode","START_OF_SELECTED_AREA","retrieveSelectedAttribute","blockAttributes","castArray","maybeArray","resetBlocks","dispatch","validateBlocksToTemplate","isBlocksValidToTemplate","doBlocksMatchTemplate","setTemplateValidity","resetSelection","receiveBlocks","updateBlockAttributes","updateBlock","selectBlock","selectPreviousBlock","fallbackToParent","previousBlockClientId","firstParentClientId","selectNextBlock","nextBlockClientId","startMultiSelect","stopMultiSelect","multiSelect","__experimentalInitialPosition","blockCount","speak","sprintf","_n","clearSelectedBlock","toggleSelection","getBlocksWithDefaultStylesApplied","blockEditorSettings","preferredStyleVariations","__experimentalPreferredStyleVariations","className","blockStyle","trim","replaceBlocks","__unstableHasCustomAppender","insertDefaultBlock","replaceBlock","createOnMove","moveBlocksDown","moveBlocksUp","moveBlocksToPosition","moveBlockToPosition","insertBlock","insertBlocks","hint","showInsertionPoint","__unstableOptions","hideInsertionPoint","synchronizeTemplate","updatedBlockList","synchronizeBlocksWithTemplate","__unstableDeleteSelection","registry","targetSelection","targetBlock","targetBlockType","selectionA","selectionB","insert","cloneA","cloneBlock","cloneB","followingBlock","blocksWithTheSameType","updatedAttributes","newAttributeKey","convertedHtml","convertedValue","newOffset","newValue","newHtml","selectedBlockClientIds","replacement","batch","selectionChange","__unstableSplitSelection","createBlock","getDefaultBlockName","__unstableExpandSelection","mergeBlocks","firstBlockClientId","secondBlockClientId","clientIdA","clientIdB","blockWithSameType","removeBlock","canRestoreTextSelection","console","error","selectedBlock","removeBlocks","selectPrevious","replaceInnerBlocks","toggleBlockMode","startTyping","stopTyping","startDraggingBlocks","stopDraggingBlocks","enterFormattedText","exitFormattedText","defaultBlockName","updateBlockListSettings","updateSettings","__unstableSaveReusableBlock","__unstableMarkLastChangeAsPersistent","__unstableMarkNextChangeAsNotPersistent","__unstableMarkAutomaticChange","requestIdleCallback","setNavigationMode","__unstableSetEditorMode","firstSelectedClientId","setBlockMovingClientId","duplicateBlocks","clientIdsArray","lastSelectedIndex","clonedBlocks","__experimentalCloneSanitizedBlock","insertBeforeBlock","firstSelectedIndex","insertAfterBlock","toggleBlockHighlight","flashBlock","Promise","resolve","setHasControlledInnerBlocks","setBlockVisibility","__unstableSetTemporarilyEditingAsBlocks","STORE_NAME","unlock","__dangerousOptInToUnstableAPIsOnlyForCoreModules","storeConfig","selectors","actions","store","createReduxStore","persist","registeredStore","registerStore","registerPrivateActions","privateActions","registerPrivateSelectors","privateSelectors","DEFAULT_BLOCK_EDIT_CONTEXT","isSelected","Context","createContext","Provider","useBlockEditContext","useContext","useDisplayBlockControls","useSelect","blockEditorStore","BlockControlsFill","group","controls","__experimentalShareWithChildBlocks","Fill","shareWithChildBlocks","isDisplayed","isParentDisplayed","groups","useBlockControlsFill","innerMarkup","ToolbarGroup","fillProps","forwardedContext","ComponentsContext","privateApis","BlockControlsSlot","toolbarState","ToolbarContext","contextState","useMemo","Slot","fills","useSlotFills","__unstableName","slot","bubblesVirtually","BlockControls","BlockFormatControls","appendSelectors","append","subselector","getBlockGapCSS","layoutDefinitions","layoutType","blockGapValue","output","spacingStyles","gapStyle","rules","cssProperty","getAlignmentsInfo","layout","contentSize","wideSize","alignmentInfo","sizeRegex","none","wide","fill","fillRule","clipRule","opacity","sidesLeft","ALL_SIDES","DEFAULT_VALUES","bottom","ICONS","custom","sidesAll","axial","sidesAxial","horizontal","sidesHorizontal","vertical","sidesVertical","sidesTop","sidesRight","sidesBottom","LABELS","mixed","VIEWS","isValueSpacingPreset","getCustomValueFromPreset","spacingSizes","getSpacingPresetSlug","spacingSize","getSpacingPresetCssVar","hasAxisSupport","sides","hasHorizontalSupport","hasVerticalSupport","getGapCSSValue","defaultValue","blockGapBoxControlValue","isValueString","getGapBoxControlValueFromStyle","row","column","alignBottom","alignCenter","alignTop","alignStretch","spaceBetween","BLOCK_ALIGNMENTS_CONTROLS","center","stretch","DEFAULT_CONTROLS","isCollapsed","isToolbar","activeAlignment","defaultAlignmentControl","UIComponent","ToolbarDropdownMenu","extraProps","popoverProps","variant","label","control","isActive","role","onClick","align","BlockVerticalAlignmentControl","BlockVerticalAlignmentToolbar","icons","justifyLeft","justifyCenter","justifyRight","justifySpaceBetween","justifyStretch","allowedControls","handleClick","allControls","JustifyContentControl","JustifyToolbar","blockedPaths","deprecatedFlags","disableCustomColors","disableCustomGradients","disableCustomFontSizes","enableCustomLineHeight","enableCustomUnits","enableCustomSpacing","prefixedFlags","removeCustomPrefixes","useSetting","warn","normalizedPath","candidates","candidateClientId","candidateBlockName","candidateAtts","defaultsPath","blockPath","PATHS_WITH_MERGE","theme","deprecatedSettingsValue","DEFAULT_MAXIMUM_VIEWPORT_WIDTH","DEFAULT_MINIMUM_VIEWPORT_WIDTH","DEFAULT_SCALE_FACTOR","DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MIN","DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MAX","DEFAULT_MINIMUM_FONT_SIZE_LIMIT","getComputedFluidTypographyValue","minimumFontSize","maximumFontSize","minimumViewPortWidth","maximumViewPortWidth","scaleFactor","minimumFontSizeLimit","getTypographyValueAndUnit","fontSizeParsed","unit","minimumFontSizeLimitParsed","coerceTo","fontSizeValueInPx","minimumFontSizeFactor","log2","calculatedMinimumFontSize","roundToPrecision","minimumFontSizeParsed","fontSizeUnit","maximumFontSizeParsed","minimumFontSizeRem","maximumViewPortWidthParsed","minumumViewPortWidthParsed","minViewPortWidthOffsetValue","viewPortWidthOffset","linearFactorScaled","rawValue","isFinite","rootSizeValue","acceptableUnits","acceptableUnitsGroup","regexUnits","matches","returnValue","digits","base","pow","getTypographyFontSizeValue","preset","typographyOptions","defaultSize","isFluidTypographyEnabled","fluid","fluidTypographySettings","minFontSize","maxViewPortWidth","typographySettings","fluidSettings","getFluidTypographyOptionsFromSettings","typography","layoutSettings","ROOT_BLOCK_SELECTOR","PRESET_METADATA","valueKey","cssVarInfix","classSuffix","propertyName","valueFunc","STYLE_PATH_TO_CSS_VAR_INFIX","shadow","findInPresetsBy","features","presetPath","presetProperty","presetValueValue","orderedPresetsByOrigin","presetByOrigin","origins","origin","presets","presetObject","getValueFromVariable","variable","refPath","parsedVar","USER_VALUE_PREFIX","endsWith","THEME_VALUE_PREFIX","THEME_VALUE_SUFFIX","presetType","metadata","data","getValueFromPresetVariable","getValueFromCustomVariable","scopeSelector","scope","scopes","selectorsScoped","outer","areGlobalStyleConfigsEqual","original","GlobalStylesContext","user","merged","setUserConfig","EMPTY_CONFIG","VALID_SETTINGS","useGlobalStylesReset","useCallback","useGlobalSetting","propertyPath","configs","appendedBlockPath","appendedPropertyPath","contextualPath","globalPath","sourceKey","configToUse","setting","currentConfig","newUserConfig","JSON","stringify","useGlobalStyle","shouldDecodeEncode","mergedConfig","baseConfig","userConfig","appendedPath","finalPath","rawResult","variableStylePath","presetPropertyValue","getPresetVariableFromValue","useSettingsForBlockElement","parentSettings","supportedStyles","supports","getSupportedStyles","updatedSettings","customFontSize","fontFamilies","background","button","heading","link","caption","customGradient","defaultDuotone","customDuotone","textColumns","spacing","dimensions","minHeight","useColorsPerOrigin","customColors","palette","themeColors","defaultColors","shouldDisplayDefaultColors","defaultPalette","useGradientsPerOrigin","customGradients","themeGradients","defaultGradients","shouldDisplayDefaultGradients","cloneObject","setImmutably","normalizePath","newObject","cleanEmptyObject","cleanedNestedObjects","transformStyles","activeSupports","migrationPaths","results","referenceBlockAttributes","returnBlock","support","styleValue","shouldSkipSerialization","featureSet","feature","getBlockSupport","skipSerialization","__experimentalSkipSerialization","useBlockSettings","parentLayout","fontStyle","fontWeight","textDecoration","textTransform","letterSpacing","margin","blockGap","units","borderColor","borderRadius","borderStyle","borderWidth","customColorsEnabled","userDuotonePalette","themeDuotonePalette","defaultDuotonePalette","userGradientPalette","themeGradientPalette","defaultGradientPalette","areCustomGradientsEnabled","isBackgroundEnabled","isLinkEnabled","isTextEnabled","duotone","radius","justifyContentMap","alignItemsMap","verticalAlignmentMap","flexWrapOptions","inspectorControls","layoutBlockSupport","allowOrientation","Flex","FlexItem","FlexLayoutJustifyContentControl","OrientationControl","FlexWrapControl","toolBarControls","allowSwitching","allowVerticalAlignment","FlexLayoutVerticalAlignmentControl","getLayoutStyle","hasBlockGapSupport","orientation","justifyContent","flexWrap","verticalAlignment","alignItems","getOrientation","getAlignments","defaultVerticalAlignment","onVerticalAlignmentChange","verticalAlignmentOptions","Button","isPressed","onJustificationChange","justificationOptions","__nextHasNoMarginBottom","ToggleControl","checked","newVerticalAlignment","newJustification","arrowRight","arrowDown","blockGapStyleValue","isBlockBasedTheme","alignments","unshift","alignment","info","cloneElement","allowJustification","useCustomUnits","availableUnits","labelPosition","__unstableInputWidth","nextWidth","positionCenter","stretchWide","marginLeft","marginRight","getCSSRules","rule","RANGE_CONTROL_MAX_VALUES","px","vw","vh","em","rem","columnCount","GridLayoutColumnsControl","GridLayoutMinimumWidthControl","minimumColumnWidth","quantity","parseQuantityAndUnitFromRawValue","BaseControl","as","gap","isBlock","onUnitChange","newUnit","toFixed","RangeControl","withInputField","layoutTypes","flow","flex","constrained","grid","getLayoutType","defaultLayout","Layout","LayoutProvider","useLayout","LayoutStyle","layoutStyle","WIDE_CONTROLS","useAvailableAlignments","wideControlsEnabled","themeSupportsLayout","__unstableIsBlockBasedTheme","layoutAlignments","alignmentName","availableAlignments","enabledControls","enabledControl","alignNone","positionLeft","positionRight","full","stretchFullWidth","POPOVER_PROPS","onChangeAlignment","activeAlignmentControl","commonProps","controlName","toggleProps","describedBy","onClose","MenuGroup","MenuItem","iconPosition","BlockAlignmentControl","BlockAlignmentToolbar","BlockListBlockContext","useBlockEditingMode","blockEditingMode","useDispatch","useEffect","ALL_ALIGNMENTS","WIDE_ALIGNMENTS","getValidAlignments","blockAlign","hasWideBlockSupport","hasWideEnabled","validAlignments","withToolbarControls","createHigherOrderComponent","BlockEdit","blockEdit","nextAlign","blockDefaultAlign","setAttributes","withDataAlign","BlockListBlock","wrapperProps","enum","classnames","InspectorControlsDefault","InspectorControlsAdvanced","InspectorControlsBorder","InspectorControlsColor","InspectorControlsFilter","InspectorControlsDimensions","InspectorControlsPosition","InspectorControlsTypography","advanced","InspectorControlsFill","__experimentalGroup","resetAllFilter","ToolsPanelInspectorControl","registerResetAllFilter","deregisterResetAllFilter","BlockSupportToolsPanel","panelId","resetAll","resetFilters","newBlockAttributes","resetFilter","hasInnerWrapper","shouldRenderPlaceholderItems","__experimentalFirstVisibleItemClass","__experimentalLastVisibleItemClass","BlockSupportSlotContainer","toolsPanelContext","ToolsPanelContext","InspectorControlsSlot","InspectorControls","InspectorAdvancedControls","slotName","ANCHOR_REGEX","ANCHOR_SCHEMA","attribute","withInspectorControl","hasAnchor","isWeb","textControl","TextControl","help","ExternalLink","href","anchor","placeholder","nextValue","autoCapitalize","autoComplete","PanelBody","ARIA_LABEL_SCHEMA","ariaLabel","originClassName","getBlockDefaultClassName","BlockContextProvider","context","DEFAULT_BLOCK_CONTEXT","withFilters","blockContext","BlockContext","usesContext","save","generatedClassName","__unstableLayoutClassNames","secondaryActions","Children","DropdownMenu","moreHorizontal","noIcons","BlockView","rawContent","renderedContent","actionText","RawHTML","safeHTML","tabIndex","onKeep","onConvert","convertor","convertButtonText","converted","convertedBlock","getSaveContent","difference","originalContent","newContent","diffChars","blockToBlocks","rawHandler","HTML","BlockInvalidWarning","canInsertHTMLBlock","canInsertClassicBlock","compare","setCompare","useState","onCompareClose","convert","toClassic","classicBlock","toHTML","htmlBlock","toBlocks","newBlocks","toRecoveredBlock","recoveredBlock","Modal","onRequestClose","warning","BlockCrashBoundary","super","hasError","componentDidCatch","fallback","setHtml","getBlockContent","onBlur","validateBlock","updateQueue","makeQueue","raf","schedule","writeQueue","write","onStartQueue","onStart","onFrameQueue","onFrame","onFinishQueue","onFinish","timeouts","handler","ms","cancel","pendingCount","timeout","findTimeout","sync","batchedUpdates","throttle","lastArgs","queuedFn","throttled","nativeRaf","requestAnimationFrame","use","impl","performance","catch","frameLoop","advance","ts","queue","loop","prevTs","eachSafely","flush","noop","fun","str","num","und","isEqual","eachProp","ctx","flushCalls","isSSR","createStringInterpolator$1","colors$1","skipAnimation","willAdvance","globals","freeze","createStringInterpolator","startQueue","currentFrame","prevFrame","priority","idle","animation","flushStartQueue","startSafely","prevIndex","startUnsafely","dt","nextFrame","NUMBER","PERCENTAGE","parts","rgb","rgba","hsl","hsla","hex3","hex4","hex6","hex8","hue2rgb","q","hslToRgb","h","l","g","parse255","int","parseInt","parse360","parse1","parsePercentage","colorToRgba","input","int32Color","normalizeColor","createInterpolator","range","extrapolate","outputRange","inputRange","extrapolateLeft","extrapolateRight","easing","findRange","inputMin","inputMax","outputMin","outputMax","Infinity","interpolate","$get","$observers","hasFluidValue","getFluidValue","getFluidObservers","callFluidObservers","observers","observer","eventObserved","callFluidObserver","FluidValue","setFluidGetter","setHidden","addFluidObserver","observerAdded","removeFluidObserver","observerRemoved","numberRegex","colorRegex","unitRegex","rgbaRegex","cssVariableRegex","variableToRgba","token","parseCSSVariable","namedColorRegex","rgbaRound","p1","p2","p3","p4","keyframes","outputRanges","interpolators","_output$find","missingUnit","prefix","once","called","TypeError","warnInterpolate","warnDirectCall","isAnimatedString","useLayoutEffect","useIsMounted","isMounted","useRef","random","effect","emptyDeps","prevRef","$node","getAnimated","owner","setAnimated","defineHidden","getPayload","Animated","payload","AnimatedValue","_value","elapsedTime","lastPosition","lastVelocity","v0","durationProgress","static","getValue","setValue","step","reset","AnimatedString","_string","_toString","goal","TreeContext","dependencies","AnimatedObject","animated","_makePayload","_addToPayload","AnimatedArray","makeAnimated","getAnimatedType","withAnimated","host","hasInstance","isReactComponent","givenProps","givenRef","instanceRef","updateRef","deps","createAnimatedStyle","getAnimatedState","forceUpdate","instance","applyAnimatedValues","PropsObserver","observerRef","dep","usedProps","getComponentProps","cacheKey","getDisplayName","displayName","callProp","matchProp","resolveProp","getDefaultProp","noopTransform","getDefaultProps","DEFAULT_PROPS","defaults","RESERVED_PROPS","pause","immediate","delay","onProps","onPause","onResume","onRest","onResolve","trail","expires","initial","enter","leave","onDestroyed","callId","parentId","inferTo","forward","getForwardProps","out","computeGoal","isAsyncTo","c1","c2","c3","c4","PI","c5","bounceOut","n1","d1","easings","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInBack","easeOutBack","easeInOutBack","easeInElastic","easeOutElastic","easeInOutElastic","easeInBounce","easeOutBounce","easeInOutBounce","tension","friction","mass","damping","clamp","AnimationConfig","frequency","velocity","restVelocity","precision","progress","bounce","decay","sanitizeConfig","isTensionConfig","emptyArray","Animation","changed","toValues","fromValues","scheduleProps","reject","_props$cancel","paused","resumeQueue","resume","delayed","pauseQueue","cancelId","getCombinedResult","cancelled","getCancelledResult","getNoopResult","getFinishedResult","finished","runAsync","asyncTo","prevTo","promise","prevPromise","asyncId","preventBail","bail","bailPromise","bailIfEnded","bailSignal","bailResult","animate","arg1","arg2","BailSignal","skipAnimationSignal","SkipAniamtionSignal","stopAsync","animating","then","isFrameValue","FrameValue","nextId$1","_priority","_onPriorityChange","toJSON","_attach","_detach","_onChange","$P","hasAnimated","isAnimating","isPaused","setActiveBit","active","IS_ANIMATING","setPausedBit","SpringValue","_state","_pendingCalls","_lastCallId","_lastToId","_memoizedDuration","isDelayed","anim","elapsed","abs","exp","bounceFactor","canBounce","isGrowing","isMoving","isBouncing","numSteps","ceil","currVal","finalVal","_stop","_focus","_set","_update","finish","_onStart","_start","_prepareNode","_ref","isLoop","mergeActiveFn","sendEvent","isFrozen","checkFinished","_resume","_merge","nextProps","createLoopUpdate","hasToProp","hasFromProp","prevFrom","hasFromChanged","hasToChanged","hasAsyncTo","newConfig","defaultConfig","mergeConfig","isAnimatable","goalType","started","hasValueChanged","ACTIVE_EVENTS","oldNode","loopRet","overrides","createUpdate","findDefined","declareUpdate","_target$animation$typ","_target$animation","_target$defaultProps$","_target$defaultProps","BATCHED_EVENTS","nextId","Controller","springs","_flush","_initialProps","_lastAsyncId","_active","_changed","_started","_item","_events","_onFrame","spring","prepareKeys","flushUpdateQueue","ctrl","flushUpdate","promises","getSprings","prepareSprings","createSpring","setSprings","_excluded$3","SpringContext","excluded","sourceKeys","_objectWithoutPropertiesLoose","inherited","getResult","inputs","committed","prevCache","useCache","areInputsEqual","useMemoOne","_context","Consumer","SpringRef","_getProps","useSpring","isFn","propsFn","layoutId","ctrls","prevLength","declareUpdates","_ctrl$ref","detachRefs","prevContext","hasContext","hasProps","_ctrl$ref2","replaceRef","useSprings","TransitionPhase","Interpolation","calc","_get","_dt","checkIdle","becomeIdle","highest","isIdle","isCustomPropRE","dangerousStyleValue","isUnitlessNumber","attributeCache","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columns","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","lineClamp","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","prefixes","substring","prefixKey","domTransforms","pxTransforms","degTransforms","addUnit","isValueIdentity","AnimatedStyle","z","transforms","xyz","deg","FluidTransform","unstable_batchedUpdates","transparent","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","_applyAnimatedValues","_createAnimatedStyle","_getComponentProps","hostConfig","createHost","isFilterElement","names","hasAttribute","textContent","setProperty","counterReducer","getAbsolutePosition","adjustScrolling","enableAnimation","triggerAnimationOnChange","prefersReducedMotion","useReducedMotion","triggeredAnimation","triggerAnimation","useReducer","finishedAnimation","endAnimation","setTransform","previous","preserveScrollPosition","scrollContainer","getScrollContainer","prevRect","finishedMoving","transformOrigin","BLOCK_SELECTOR","APPENDER_SELECTOR","BLOCK_APPENDER_CLASS","isInsideRootBlock","blockElement","closest","getBlockClientId","ELEMENT_NODE","blockNode","useFocusFirstElement","useInitialPosition","activeElement","textInputs","focus","isTextField","isReverse","getAttribute","focusElement","isFormElement","placeCaretAtHorizontalEdge","listener","defaultPrevented","preventDefault","classList","useIsHovered","isEnabled","outlineMode","useRefEffect","useBlockClassNames","isDragging","isAncestorOfSelectedBlock","isReusableBlock","useBlockDefaultClassName","useBlockCustomClassName","useBlockMovingModeClassNames","movingClientId","useFocusHandler","onFocus","parentElement","isContentEditable","useEventHandlers","onKeyDown","onDragStart","keyCode","ENTER","BACKSPACE","DELETE","useNavModeExit","onMouseDown","BlockRefs","refs","callbacks","BlockRefsProvider","useBlockRefProvider","setElement","useBlockRef","freshClientId","useBlockElement","useIntersectionObserver","IntersectionObserver","observe","unobserve","useBlockOverlayActive","BLOCK_ANIMATION_THRESHOLD","useBlockProps","__unstableIsHtml","isAligned","blockApiVersion","blockTitle","isPartOfSelection","isSubtreeDisabled","isPartOfMultiSelection","hasOverlay","blockLabel","htmlSuffix","mergedRefs","useMergeRefs","useMovingAnimation","useDisabled","blockEditContext","inert","Block","isHtml","getBlockProps","applyWithSelect","withSelect","canMove","isLocked","applyWithDispatch","withDispatch","ownProps","onInsertBlocks","onInsertBlocksAfter","onMerge","moveFirstItemUp","_clientId","changeSelection","targetRootClientId","isUnmodifiedBlock","nextRootClientId","rootAttributes","previousRootAttributes","previousRootClientId","onReplace","isUnmodifiedDefaultBlock","selectionEnabled","compose","pure","ifCondition","__unstableBlockSource","layoutClassNames","isTemporarilyEditingAsBlocks","onRemove","insertBlocksAfter","__unstableParentLayout","getEditWrapperProps","propsA","propsB","newProps","mergeWrapperProps","saveContent","serializeRawBlock","dataAlign","restWrapperProps","memoizedValue","globalTips","createInterpolateElement","kbd","randomIndex","floor","Tip","memo","showColors","blockDefault","renderedIcon","Icon","backgroundColor","foreground","parentNavBlockClientId","minWidth","isRTL","chevronRight","chevronLeft","isSmall","withRegistryProvider","WrappedComponent","withRegistry","useSubRegistry","subRegistry","setSubRegistry","newRegistry","createRegistry","blockEditorStoreName","RegistryProvider","useBlockSync","controlledBlocks","controlledSelection","onInput","useRegistry","isControlled","pendingChanges","incoming","outgoing","subscribed","setControlledBlocks","storeBlocks","onInputRef","onChangeRef","hadSelecton","selectionStillExists","isPersistent","previousAreBlocksDifferent","unsubscribe","subscribe","newIsPersistent","areBlocksDifferent","ExperimentalBlockEditorProvider","__internalIsInitialized","useBlockSelectionClearer","BlockSelectionClearer","isFullSelection","useMultiSelection","contentEditable","getSelection","removeAllRanges","getClosestTabbable","containerElement","onlyVertical","targetRect","focusableNodes","isInSameBlock","firstElementChild","nodeRect","useArrowNav","verticalRect","shiftKey","ctrlKey","altKey","metaKey","isUp","UP","isDown","DOWN","isLeft","isRight","RIGHT","isHorizontal","isVertical","isNav","hasModifier","isNavEdge","isVerticalEdge","isHorizontalEdge","tagName","isNavigationCandidate","computeCaretRect","isReverseDir","keepCaretInsideBlock","closestTabbable","isClosestTabbableABlock","placeCaretAtVerticalEdge","useSelectAll","isMatch","useShortcutEventMatch","isEntirelySelected","blockClientIds","setContentEditableWrapper","useDragSelection","anchorElement","rafId","onMouseUp","rangeCount","commonAncestorContainer","getRangeAt","contains","onMouseLeave","buttons","cancelAnimationFrame","useSelectionObserver","onSelectionChange","isClickShift","anchorNode","anchorOffset","TEXT_NODE","childNodes","extractSelectionStartNode","focusNode","focusOffset","extractSelectionEndNode","selectedClientId","clickedClientId","focusNodeIsNonSelectable","startPath","endPath","depth","findDepth","addListeners","removeListeners","resetListeners","useClickSelection","useInput","onBeforeInput","onCompositionStart","useWritingFlow","focusCaptureBeforeRef","focusCaptureAfterRef","lastFocus","focusCaptureTabIndex","noCapture","onFocusCapture","canvasElement","isBefore","compareDocumentPosition","DOCUMENT_POSITION_FOLLOWING","tabbables","ESCAPE","TAB","isShift","direction","preventScroll","onFocusOut","relatedTarget","preventScrollOnTab","useTabNav","removeAttribute","forwardedRef","Iframe","contentRef","scale","frameSize","expand","readonly","assets","forceRender","iframeDocument","setIframeDocument","bodyClasses","setBodyClasses","compatStyles","styleSheets","styleSheet","cssRules","ownerNode","matchFromRules","_cssRules","selectorText","conditionText","__cssRules","isInline","mainStylesCssId","mainStylesElement","getElementById","cloneNode","inlineStylesCssId","inlineStylesElement","createHTMLDocument","useParsedAssets","clearerRef","writingFlowRef","contentResizeListener","contentHeight","useResizeObserver","setRef","iFrameDocument","preventFileDropDefault","onLoad","contentDocument","bubbleEvent","constructorName","Constructor","MouseEvent","rect","clientX","clientY","newEvent","eventTypes","bubbleEvents","dir","compatStyle","headRef","script","onload","onerror","loadScript","finally","disabledRef","bodyRef","cleanup","_src","URL","createObjectURL","Blob","revokeObjectURL","marginFromScaling","marginTop","marginBottom","transition","createPortal","grad","turn","rad","u","c","m","substr","N","M","H","$","parsed","brightness","isDark","isLight","toHex","toRgb","toRgbString","toHsl","toHslString","toHsv","invert","saturate","desaturate","grayscale","lighten","darken","rotate","hue","alpha","S","k","toName","luminance","contrast","isReadable","commentre","lineno","updatePosition","lines","lastIndexOf","line","Position","whitespace","errorsList","msg","reason","filename","silent","open","close","comments","atrule","re","comment","matched","declaration","declarations","decls","decl","keyframe","vals","atimport","_compileAtrule","atcharset","atnamespace","vendor","frame","frames","atkeyframes","media","atmedia","atcustommedia","atsupports","atdocument","sel","atpage","athost","atfontface","addParent","rulesList","stylesheet","parsingErrors","isNode","childParent","Compiler","opts","emit","visit","mapVisit","delim","buf","Base","inherits","compile","import","charset","page","indentation","indent","isValidURL","filePath","isRemotePath","getResourcePath","baseURL","IS_ROOT_TAG","wrapperClassName","ignore","wrap","rootURL","updatedURLs","reg","URLs","quote","getURLs","newUrl","updated","updatedNode","compress","Compressed","Identity","EDITOR_STYLES_SELECTOR","useDarkThemeBodyClassName","canvas","querySelector","tempCanvas","colordBackgroundColor","colord","EditorStyles","stylesArray","transformedStyles","transformedSvgs","__unstableType","dangerouslySetInnerHTML","__html","MemoizedBlockList","extend","namesPlugin","a11yPlugin","MAX_HEIGHT","ScaledBlockPreview","containerWidth","additionalStyles","editorStyles","BlockList","Disabled","bodyElement","pointerEvents","renderAppender","AutoBlockPreview","containerResizeListener","__experimentalMinHeight","__experimentalPadding","originalSettings","renderedBlocks","useBlockPreview","__experimentalLayout","BlockListItems","isReusable","getBlockFromExample","InserterListboxContext","focusable","htmlProps","propsWithTabIndex","BlockDraggableChip","isPattern","patternLabel","justify","dragHandle","transferData","Draggable","__experimentalTransferDataType","dataTransfer","setData","serialize","__experimentalDragComponent","onDraggableStart","onDraggableEnd","draggable","onDragEnd","onSelect","onHover","isDraggable","itemIconStyle","createBlocksFromInnerBlocksTemplate","isSynced","isTemplatePart","disabled","isAppleOS","onMouseEnter","numberOfLines","shouldSpeak","setShouldSpeak","chunks","chunk","getBlockMenuDefaultClassName","onInsert","categories","collections","getCategories","getCollections","shouldFocusBlock","insertedBlock","compositeState","useCompositeState","showMostUsedBlocks","onSelectItem","useBlockTypesState","suggestedItems","uncategorizedItems","itemsPerCategory","itemList","itemsPerCollection","getBlockNamespace","currentlyRenderedCategories","useAsyncList","didRenderAllCategories","collectionEntries","currentlyRenderedCollections","categoryItems","collection","collectionItems","patternCategories","createSuccessNotice","noticesStore","onClickPattern","WithToolTip","showTooltip","Tooltip","BlockPattern","composite","setIsDragging","descriptionId","useInstanceId","VisuallyHidden","BlockPatternPlaceholder","blockPatterns","shownPatterns","showTitlesAsTooltip","PatternCategoriesList","selectedCategory","onClickCategory","baseClassName","PatternsExplorerSearch","filterValue","setFilterValue","SearchControl","insertionIndex","isAppender","selectBlockOnInsert","destinationRootClientId","destinationIndex","_destinationIndex","_destinationRootClientId","shouldForceFocusBlock","blockLength","onToggleInsertionPoint","show","lowerCase","DEFAULT_SPLIT_REGEXP","DEFAULT_STRIP_REGEXP","defaultGetName","defaultGetTitle","defaultGetDescription","defaultGetKeywords","defaultGetCategory","defaultGetCollection","extractWords","splitRegexp","stripRegexp","delimiter","noCase","normalizeSearchInput","getNormalizedSearchTerms","searchBlockItems","searchInput","searchItems","getCategory","getCollection","rankedItems","getItemSearchRank","rank","rank1","rank2","searchTerm","getName","getTitle","getDescription","getKeywords","normalizedSearchInput","normalizedTitle","terms","unmatchedTerms","unprocessedTerms","term","unprocessedTerm","PatternsListHeader","filteredBlockPatternsLength","debouncedSpeak","useDebounce","useInsertionPoint","allPatterns","onSelectBlockPattern","usePatternsState","registeredPatternCategories","patternCategory","filteredBlockPatterns","resultsFoundMessage","currentShownPatterns","hasItems","PatternsExplorer","initialCategory","setSelectedCategory","onModalClose","restProps","isFullScreen","ScreenHeader","paddingX","paddingY","MobileTabNavigation","initialPath","Item","isAction","FlexBlock","patternCategoriesOrder","usePatternsCategories","allCategories","hasRegisteredCategory","cat","aName","bName","aIndex","bIndex","BlockPatternsCategoryDialog","firstTabbable","clearTimeout","BlockPatternsCategoryPanel","availableCategories","currentCategoryPatterns","availableCategory","onSelectCategory","showPatternsExplorer","setShowPatternsExplorer","isMobile","useViewportMatch","ReusableBlocksList","filteredItems","addQueryArgs","post_type","useMediaCategories","setCategories","canInsertImage","canInsertVideo","canInsertAudio","inserterMediaCategories","mimeType","mediaType","useInserterMediaCategories","_categories","categoriesHaveMedia","isExternalResource","fetch","per_page","canInsertMediaType","image","video","audio","mediaTypeTag","getBlockAndPreviewFromMedia","mediaSrc","url","alt","PreviewTag","preview","previewUrl","onError","ALLOWED_MEDIA_TYPES","MEDIA_OPTIONS_POPOVER_PROPS","MediaPreviewOptions","getReportUrl","reportUrl","moreVertical","external","InsertExternalImageModal","onSubmit","expanded","MediaPreview","showExternalUploadModal","setShowExternalUploadModal","isHovered","setIsHovered","isInserting","setIsInserting","createErrorNotice","mediaUpload","onMediaInsert","previewBlock","clonedBlock","response","blob","filesList","additionalData","onFileChange","img","isBlobURL","allowedTypes","rendered","truncatedTitle","omission","Spinner","mediaList","sourceId","useDebouncedInput","setInput","debounced","setter","setDebounced","INITIAL_MEDIA_ITEMS_PER_PAGE","MediaCategoryDialog","MediaCategoryPanel","search","setSearch","debouncedSearch","isLoading","query","setMediaList","setIsLoading","lastRequest","_media","useMediaResults","baseCssClass","searchLabel","labels","search_items","hasUploadPermissions","mediaCategories","onSelectMedia","mobileMediaCategories","mediaCategory","multiple","__unstableInserterMenuExtension","orderInserterBlockItems","__experimentalInsertionIndex","maxBlockPatterns","maxBlockTypes","showBlockDirectory","prioritizePatterns","prioritizedBlocks","prioritizedInserterBlocks","blockTypeCategories","blockTypeCollections","onSelectBlockType","maxBlockTypesToShow","filteredBlockTypes","orderedItems","currentShownBlockTypes","blocksUI","patternsUI","blocksTab","patternsTab","reusableBlocksTab","reusableBlockIcon","mediaTab","showPatterns","showReusableBlocks","showMedia","tabs","tempTabs","TabPanel","showInserterHelpPanel","__experimentalFilterValue","delayedFilterValue","hoveredItem","setHoveredItem","selectedPatternCategory","setSelectedPatternCategory","selectedMediaCategory","setSelectedMediaCategory","selectedTab","setSelectedTab","inserterItems","hasReusableBlocks","onInsertPattern","onHoverPattern","onClickPatternCategory","getCurrentTab","tab","searchRef","useImperativeHandle","focusSearch","showPatternPanel","showAsTabs","showMediaPanel","QuickInserter","setInserterIsOpened","__experimentalSetIsInserterOpened","showSearch","defaultRenderToggle","onToggle","isOpen","hasSingleBlockType","Wrapper","labelProp","rest","plus","tooltipPosition","PrivateInserter","renderToggle","renderContent","directInsertBlock","__experimentalIsQuick","isQuick","onSelectOrClose","firstBlock","insertOnlyAllowedBlock","Dropdown","contentClassName","expandOnMobile","headerTitle","ComposedPrivateInserter","shouldDirectInsert","allowedBlockType","__experimentalPreferPatternsOnRoot","blockToInsert","attributesToCopy","adjacentAttributes","currentBlock","previousBlock","parentBlock","lastInnerBlock","getAdjacentBlockAttributes","getInsertionIndex","isEmpty","bodyPlaceholder","showPrompt","onAppend","decodeEntities","SPACE","ButtonBlockAppender","isToggleButton","inserterButton","ButtonBlockerAppender","DefaultAppender","TagName","appender","CustomAppender","hideInserter","isParentSelected","useAppender","isDragOver","scrollableRef","onWheel","scrollBy","passive","MAX_POPOVER_RECOMPUTE_COUNTER","MAX_SAFE_INTEGER","previousClientId","nextClientId","__unstablePopoverSlot","__unstableContentRef","popoverRecomputeCounter","forcePopoverRecompute","isVisible","_rootClientId","previousElement","nextElement","popoverAnchor","previousRect","nextRect","DOMRect","popoverScrollRef","usePopoverScroll","MutationObserver","disconnect","Popover","focusOnMount","__unstableSlotName","flip","placement","bottomClientId","__unstableRefreshSize","__unstableCoverTarget","selectedElement","lastSelectedElement","popoverDimensionsRecomputeCounter","forceRecomputePopoverDimensions","selectedBCR","lastSelectedBCR","animateVariants","hide","scaleY","exit","reducedMotion","InsertionPointOpenRef","InbetweenInsertionPointPopover","openRef","isInserterShown","isDistractionFree","_isNavigationMode","_previousClientId","_nextClientId","disableMotion","lineVariants","hover","inserterVariants","whileHover","whileTap","onHoverEnd","variants","InsertionPoint","isBlockListEmpty","blockInsertionPoint","useInBetweenInserter","isInBetweenInserterDisabled","onMouseMove","blockEl","blockElRect","elementRect","cancelIdleCallback","useBlockDisplayInformation","blockTypeInfo","useBlockDisplayTitle","maximumLength","reusableBlockTitle","blockInformation","getBlockLabel","BlockTitle","cloneClassname","srcRootClientId","startScrolling","scrollOnDragOver","stopScrolling","dragStartY","velocityY","scrollParentY","scrollEditorInterval","clearInterval","setInterval","newTop","scroll","scrollParentHeight","offsetDragStartPosition","offsetDragPosition","moveableDistance","dragDistance","distancePercentage","PIXELS_PER_SECOND_PER_PERCENTAGE","useScrollWhenDragging","srcClientIds","onDragOver","getMovementDirection","moveDirection","getArrowIcon","chevronUp","chevronDown","getMovementDirectionLabel","BlockMoverButton","moverOrientation","instanceId","normalizedClientIds","blocksCount","blockRootClientId","firstBlockIndex","lastBlockIndex","isFirstBlock","isLastBlock","blockListOrientation","moverFunction","__experimentalIsFocusable","selectedCount","movementDirection","getMultiBlockMoverDescription","getBlockMoverDescription","BlockMoverUpButton","BlockMoverDownButton","hideDragHandle","lastIndex","dragHandleLabel","draggableProps","ToolbarItem","itemProps","selected","blockMovingMode","getAccessibleBlockLabel","isTab","isEscape","isEnter","isSpace","selectionEndClientId","selectionBeforeEndClientId","selectionAfterEndClientId","navigateUp","navigateDown","navigateOut","navigateIn","focusedBlockUid","startingBlockClientId","sourceRoot","destRoot","sourceBlockIndex","destinationBlockIndex","nextTabbable","getAllToolbarItemsIn","querySelectorAll","shouldUseKeyboardFocusShortcut","__experimentalInitialIndex","initialIndex","__experimentalOnIndexChange","onIndexChange","isAccessibleToolbar","setIsAccessibleToolbar","determineIsAccessibleToolbar","onlyToolbarItem","dataset","childList","subtree","useIsAccessibleToolbar","defaultIndex","initialFocusOnMount","focusToolbar","focusFirstTabbableIn","useShortcut","navigableToolbarRef","useToolbarFocus","Toolbar","NavigableMenu","DEBOUNCE_TIMEOUT","useDebouncedShowMovers","isFocused","debounceTimeout","showMovers","setShowMovers","timeoutRef","handleOnChange","nextIsFocused","clearTimeoutRef","debouncedShowMovers","stopPropagation","debouncedHideMovers","shouldHideMovers","useShowMoversGestures","setIsFocused","registerRef","isFocusedWithin","handleOnFocus","handleOnBlur","gestures","BlockParentSelector","shouldHide","_firstParentClientId","parentBlockName","_parentBlockType","nodeRef","showMoversGestures","ToolbarButton","PreviewBlockPopover","EMPTY_OBJECT","BlockVariationTranformationItem","setHoveredTransformItemName","transformations","hoveredTransformItemName","RestTransformationItems","restTransformations","BlockTranformationItem","possibleBlockTransformations","possibleBlockVariationTransformations","onSelectVariation","priorityTextTransformations","priorityContentTranformationBlocks","priorityTextTranformsNames","currentName","nextName","useGroupedTransforms","hasBothContentTransformations","restTransformItems","replaceActiveStyle","activeStyle","newStyle","TokenList","getDefaultStyle","useStylesForBlocks","onSwitch","getBlockStyles","stylesToRender","getRenderedStyles","potentialStyleName","getActiveStyle","genericPreviewBlock","useGenericPreviewBlock","styleClassName","BlockStylesMenuItems","menuItemText","check","limit","ellipsizeMode","truncate","BlockStylesMenu","hoveredBlock","getMatchingBlockByName","selectedBlockName","consumedBlocks","transformMatchingBlock","retainedBlockAttributes","contentAttributes","getBlockAttributesNamesByRole","_accumulator","getRetainedBlockAttributes","PreviewPatternsPopover","BlockPatternsList","transformedBlocks","statePatterns","showTransforms","setShowTransforms","selectedBlocks","_pattern","patternBlocks","_patternBlocks","patternBlock","getPatternTransformedBlocks","useTransformedPatterns","BlockSwitcherDropdownMenu","hasBlockStyles","firstBlockName","_isSingleBlockSelected","_icon","blockVariationTransformations","activeBlockVariation","useBlockVariationTransforms","isTemplate","selectForMultipleBlocks","insertedBlocks","hasPossibleBlockTransformations","hasPossibleBlockVariationTransformations","hasPatternTransformation","blockSwitcherLabel","blockSwitcherDescription","hasBlockOrBlockVariationTransforms","showDropDown","menuProps","onPatternTransform","onBlockTransform","variationName","onBlockVariationTransform","__unstableBlockToolbarLastItem","shouldDismissPastedFiles","files","IMAGE_TAG","IMG_WITH_LOCAL_SRC","useNotifyCopy","eventType","notice","useClipboardHandler","notifyCopy","documentHasUncollapsedSelection","documentHasSelection","eventDefaultPrevented","isSelectionMergeable","shouldHandleWholeBlocks","expandSelectionIsNeeded","tail","wrapperBlockName","clipboardData","getData","serialized","stripHTML","canUserUseUnfilteredHTML","plainText","error1","error2","getFilesFromDataTransfer","getPasteEventData","fromTransforms","getBlockTransforms","file","transformation","findTransform","flat","pasteHandler","BORDER_SUPPORT_KEY","COLOR_SUPPORT_KEY","FONT_FAMILY_SUPPORT_KEY","FONT_SIZE_SUPPORT_KEY","styleSupportKeys","STYLE_ATTRIBUTES","hasBorderSupport","colorSupport","textColor","fontFamily","getStyleAttributes","sourceBlock","hasSupport","recursivelyUpdateBlockAttributes","targetBlocks","sourceBlocks","BlockActions","__experimentalUpdateSelection","getGroupingBlockName","canDuplicate","canInsertDefaultBlock","pasteStyles","createWarningNotice","clipboard","readText","__unstableSkipAutop","hasSerializedBlocks","copiedBlocks","usePasteStyles","onDuplicate","onInsertBefore","onInsertAfter","onMoveTo","onGroup","groupingBlockName","onUngroup","onCopy","shouldRender","small","__unstableBlockSettingsMenuFirstItem","ConvertToGroupButton","isGroupable","isUngroupable","blocksSelection","onConvertToGroup","onConvertFromGroup","useConvertToGroupButtonProps","groupingBlockAvailable","isSingleBlockSelected","firstSelectedBlock","ungroup","useBlockLock","canEdit","canLock","isContentLocked","ALLOWS_EDIT_LOCKING","getTemplateLockValue","BlockLockModal","setLock","allowsEditLocking","hasTemplateLock","applyTemplateLock","setApplyTemplateLock","isAllChecked","isMixed","overlayClassName","CheckboxControl","indeterminate","prevLock","lockIcon","unlockIcon","BlockLockMenuItem","isModalOpen","toggleModal","lockOutline","isCodeEditingEnabled","codeEditingEnabled","onToggleMode","BlockSettingsMenuControls","__unstableDisplayLocation","ids","showLockButton","convertToGroupButtonProps","showConvertToGroupButton","onlyBlock","CopyMenuItem","useCopyToClipboard","copyMenuItemBlocksLabel","copyMenuItemLabel","BlockSettingsDropdown","__experimentalSelectBlock","parentBlockType","shortcuts","getShortcutRepresentation","keyboardShortcutsStore","duplicate","insertAfter","insertBefore","__unstableUseShortcutEventMatch","hasSelectedBlocks","updateSelectionAfterDuplicate","clientIdsPromise","updateSelectionAfterRemove","blockToFocus","shouldUpdateSelection","removeBlockLabel","selectParentButtonRef","showParentOutlineGestures","parentBlockIsSelected","onPasteStyles","shortcut","BlockLockToolbar","layouts","canInsertRow","canInsertStack","BlockEditVisuallyButton","canEditVisually","blockClientId","hasFixedToolbar","isVisual","displayHeaderToolbar","isLargeViewport","shouldShowMovers","shouldShowVisualToolbar","isMultiToolbar","isFixed","setIsCollapsed","toolbarButtonRef","hasParents","showParentSelector","_selectedBlockClientId","levelUp","collapsed","CustomSelectControl","componentsPrivateApis","POSITION_SUPPORT_KEY","OPTION_CLASSNAME","DEFAULT_OPTION","STICKY_OPTION","__experimentalHint","FIXED_OPTION","POSITION_SIDES","VALID_POSITION_TYPES","hasStickyOrFixedPositionValue","positionType","useIsPositionDisabled","allowFixed","allowSticky","PositionPanel","fixed","hasFixedPositionSupport","sticky","hasStickyPositionSupport","availableOptions","selectedOption","option","web","__nextUnconstrainedWidth","__next36pxDefaultSize","hideLabelFromVision","__experimentalShowSelectedHint","selectedItem","onChangeType","native","withInspectorControls","withPositionStyles","allowPositionStyles","__unstableElementContext","side","getPositionCSS","COMMON_PROPS","RESTRICTED_HEIGHT_PROPS","getProps","contentElement","selectedBlockElement","toolbarHeight","isSticky","blockRect","topOfContentElementInViewport","restrictedTopArea","hasSpaceForToolbarAbove","isBlockTallerThanViewport","useShouldContextualToolbarShow","shouldShowContextualToolbar","canFocusHiddenToolbar","fixedToolbarCanBeFocused","isEditMode","selectedBlockId","hasSelectedBlockId","isEmptyDefaultBlock","_shouldShowContextualToolbar","SelectedBlockPopover","capturingClientId","isInsertionPointVisible","isToolbarForced","showEmptyBlockSideInserter","shouldShowBreadcrumb","initialToolbarItemIndexRef","setToolbarHeight","blockIndex","setProps","popoverRef","popoverNode","updateProps","contentView","resizeObserver","addEventHandler","blockView","ResizeObserver","removeEventHandler","useBlockToolbarPopoverProps","wrapperSelector","blockParentsClientIds","__experimentalCaptureToolbars","WrappedBlockPopover","BlockToolsBackCompat","withClientId","showSeparator","isFloating","onAddBlock","isToggle","lastBlockClientId","pendingSettingsUpdates","useOnBlockDrop","targetBlockIndex","insertOrReplaceBlocks","moveBlocks","sourceClientIds","sourceRootClientId","insertIndex","_onDrop","dropType","srcIndex","parseDropEvent","blocksToInsert","isAtSameLevel","draggedBlockCount","onBlockDrop","_onFilesDrop","onFilesDrop","_onHTMLDrop","onHTMLDrop","getDistanceToNearestEdge","point","allowedEdges","candidateDistance","candidateEdge","edge","distance","pointLateralPosition","pointForwardPosition","edgeStart","edgeEnd","edgeForwardPosition","edgeLateralPosition","getDistanceFromPointToEdge","isPointContainedByRect","UncontrolledInnerBlocks","wrapperRef","templateInsertUpdatesSelection","captureToolbars","__experimentalAppenderTagName","parentLock","_allowedBlocks","_prioritizedInserterBlocks","newSettings","queueMicrotask","useNestedSettingsUpdate","existingTemplate","isCancelled","currentInnerBlocks","shouldApplyTemplate","hasTemplateChanged","nextBlocks","useInnerBlockTemplateSync","providesContext","contextName","attributeName","useBlockContext","defaultLayoutBlockSupport","allowSizingOnChildren","usedLayout","memoedLayout","ControlledInnerBlocks","ForwardedInnerBlocks","innerBlocksProps","useInnerBlocksProps","__unstableDisableLayoutClassNames","__unstableDisableDropZone","isSmallScreen","enableClickThrough","blockDropZoneRef","dropTarget","setDropTarget","useThrottle","blocksData","getIsUnmodifiedDefaultBlock","targetIndex","isRightToLeft","nearestIndex","insertPosition","minDistance","adjacentIndex","isNearestBlockUnmodifiedDefaultBlock","isAdjacentBlockUnmodifiedDefaultBlock","getDropTargetPosition","useDropZone","onDrop","onDragLeave","useBlockDropZone","InnerBlocks","getInnerBlocksProps","DefaultBlockAppender","Content","elementContext","pendingBlockVisibilityUpdatesPerRegistry","Root","isOutlineMode","isFocusMode","focusMode","delayedBlockVisibilityUpdates","isIntersecting","trailing","intersectionObserver","Observer","entry","isPreviewMode","_select","handle","usePreParsePatterns","Items","AsyncModeProvider","getColorObjectByAttributeValues","definedColor","customColor","colorObj","getColorObjectByColorValue","colorValue","getColorClassName","colorContextName","colorSlug","kebabCase","useMultipleOriginColorsAndGradients","colorGradientSettings","hasColorsOrGradients","inputArray","getAllUnit","selectedUnits","cornerUnits","getAllValue","parsedQuantitiesAndUnits","allValues","allUnits","hasMixedValues","allValue","hasDefinedValues","AllInputControl","setSelectedUnits","allPlaceholder","disableUnits","isOnly","isNumeric","topLeft","topRight","bottomLeft","bottomRight","CORNERS","BoxInputControls","valuesProp","createHandleOnChange","corner","parsedQuantity","parsedUnit","computedUnit","newUnits","LinkedButton","isLinked","linkOff","iconSize","MIN_BORDER_RADIUS_VALUE","MAX_BORDER_RADIUS_VALUES","BorderRadiusControl","setIsLinked","unitConfig","useHasBorderPanel","useHasBorderColorControl","useHasBorderRadiusControl","useHasBorderStyleControl","useHasBorderWidthControl","BorderToolsPanel","updatedValue","BorderPanel","inheritedValue","defaultControls","encodeColorValue","colorObject","flatMap","originColors","decodeColorValue","hasSplitBorders","borderValue","setBorder","newBorder","showBorderColor","showBorderStyle","showBorderWidth","showBorderRadius","borderRadiusValues","setBorderRadius","newBorderRadius","hasBorderRadius","borderValues","previousValue","showBorderByDefault","hasValue","isDefinedBorder","onDeselect","resetBorder","isShownByDefault","enableAlpha","enableStyle","updatedBorder","popoverOffset","popoverPlacement","__experimentalIsRenderedInSidebar","getColorByProperty","matchedColor","getMultiOriginColor","namedColor","getColorSlugFromVariable","styleToAttributes","borderColorValue","borderColorSlug","updatedStyle","attributesToStyle","BordersInspectorControl","attributesResetAllFilter","existingStyle","addSaveProps","borderClasses","getBorderClasses","newClassName","borderColorClass","withBorderColorPaletteStyles","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","extraStyles","__experimentalGetGradientClass","gradientSlug","getGradientValueBySlug","__experimentalGetGradientObjectByGradientValue","getGradientSlugByValue","__experimentalUseGradient","gradientAttribute","customGradientAttribute","allGradients","setGradient","newGradientValue","gradientClass","gradientValue","existingGetEditWrapperProps","colorsAndGradientKeys","TAB_COLOR","TAB_GRADIENT","TABS_SETTINGS","ColorGradientControlInner","onColorChange","onGradientChange","clearable","showTitle","headingLevel","canChooseAColor","canChooseAGradient","tabPanels","ColorPalette","newColor","GradientPicker","__nextHasNoMargin","newGradient","renderPanelType","initialTabName","ColorGradientControlSelect","useHasColorPanel","hasTextPanel","useHasTextPanel","hasBackgroundPanel","useHasBackgroundPanel","hasLinkPanel","useHasLinkPanel","hasHeadingPanel","useHasHeadingPanel","hasButtonPanel","hasCaptionPanel","useHasCaptionPanel","useHasButtonPanel","ColorToolsPanel","LabeledColorIndicators","indicators","isLayered","indicator","ColorIndicator","ColorPanelTab","isGradient","userValue","colorGradientControlSettings","ColorPanelDropdown","resetValue","tabConfigs","tabLabel","paddingSize","ColorPanel","areCustomSolidsEnabled","hasSolidColors","hasGradientColors","decodeValue","encodeGradientValue","gradientObject","originGradients","showTextPanel","userTextColor","setTextColor","showBackgroundPanel","userBackgroundColor","userGradient","showLinkPanel","linkColor","userLinkColor","hoverLinkColor","userHoverLinkColor","showPanel","elementBackgroundColor","elementGradient","elementTextColor","elementBackgroundUserColor","elementGradientUserColor","elementTextUserColor","supportsBackground","newTextColor","newBackgroundColor","fallbackBackgroundColor","fallbackTextColor","fallbackLinkColor","isLargeText","enableAlphaChecker","currentBackgroundColor","currentTextColor","currentLinkColor","textColors","backgroundColorHasTransparency","backgroundColorBrightness","isReadableOptions","speakMessage","colordTextColor","isColordTextReadable","textHasTransparency","Notice","spokenMessage","status","isDismissible","BlockColorContrastChecker","detectedBackgroundColor","setDetectedBackgroundColor","detectedColor","setDetectedColor","detectedLinkColor","setDetectedLinkColor","firstLinkElement","innerText","backgroundColorNode","hasColorSupport","hasLinkColorSupport","hasGradientSupport","hasBackgroundColorSupport","hasTextColorSupport","hasGradient","shouldSerialize","textClass","backgroundClass","serializeHasBackground","hasBackground","textColorValue","textColorSlug","backgroundColorValue","backgroundColorSlug","ColorInspectorControl","ColorEdit","enableContrastChecking","enableContrastChecker","withColorPaletteStyles","userPalette","themePalette","MIGRATION_PATHS","FontFamilyControl","blockLevelFontFamilies","SelectControl","destinationBlockType","FONT_STYLES","FONT_WEIGHTS","getFontAppearanceLabel","hasFontStyles","hasFontWeights","FontAppearanceControl","otherProps","hasStylesOrWeights","defaultOption","selectOptions","combinedOptions","styleName","weightName","weightValue","optionName","combineOptions","styleOptions","weightOptions","currentSelection","isDefined","isLineHeightDefined","adjustNextValue","wasTypedOrPasted","BASE_DEFAULT_VALUE","deprecatedStyles","__unstableStateReducer","nativeEvent","inputType","spinControls","LetterSpacingControl","defaultValues","TEXT_TRANSFORMS","formatUppercase","formatLowercase","formatCapitalize","TextTransformControl","TEXT_DECORATIONS","formatUnderline","formatStrikethrough","TextDecorationControl","MIN_TEXT_COLUMNS","MAX_TEXT_COLUMNS","useHasTypographyPanel","hasFontFamily","useHasFontFamilyControl","hasLineHeight","useHasLineHeightControl","hasFontAppearance","useHasAppearanceControl","hasLetterSpacing","useHasLetterSpacingControl","hasTextTransform","useHasTextTransformControl","hasTextDecoration","useHasTextDecorationControl","hasTextColumns","useHasTextColumnsControl","hasFontSize","useHasFontSizeControl","fontSizesPerOrigin","fontFamiliesPerOrigin","TypographyToolsPanel","fontAppearance","TypographyPanel","hasFontFamilyEnabled","setFontFamily","hasFontSizeEnabled","setFontSize","hasAppearanceControl","appearanceControlLabel","useAppearanceControlLabel","setFontAppearance","newFontStyle","newFontWeight","hasLineHeightEnabled","setLineHeight","hasLetterSpacingControl","setLetterSpacing","hasTextColumnsControl","setTextColumns","hasTextTransformControl","setTextTransform","hasTextDecorationControl","setTextDecoration","FontSizePicker","withReset","withSlider","showNone","TYPOGRAPHY_SUPPORT_KEY","getFontSize","fontSizeAttribute","customFontSizeAttribute","fontSizeObject","getFontSizeObjectByValue","getFontSizeClass","fontSizeSlug","withFontSizeInlineStyles","fontSizeValue","omit","fluidTypographyConfig","__experimentalFeatures","newFontSize","TYPOGRAPHY_SUPPORT_KEYS","fontFamilyValue","fontFamilySlug","TypographyInspectorControl","CUSTOM_VALUE_SETTINGS","steps","rm","SpacingInputControl","minimumCustomValue","onMouseOut","onMouseOver","showSideInLabel","spacingMatch","getPresetValueFromCustomValue","selectListSizes","showRangeControl","disableCustomSpacingSizes","editorSettings","showCustomValueControl","setShowCustomValueControl","usePrevious","presetValue","sliderValue","getSliderValueFromPreset","selectedUnit","customRangeValue","getNewPresetValue","newSize","controlType","marks","_newValue","sideLabel","typeLabel","getNewCustomValue","offsetX","renderTooltipContent","groupedSides","AxialInputControls","nextValues","filteredSides","axisValue","SeparatedInputControls","SingleInputControl","currentSide","checkIcon","SidesDropdown","supportedItems","menuItems","numberOfIndividualSides","getSupportedMenuItems","sideIcon","customItem","suffix","SpacingSizesControl","inputProps","useSpacingSizes","inputValues","hasOneSide","hasOnlyAxialSides","view","setView","sideValues","hasMatchingAxialValues","hasNoValuesAndBalancedSides","counts","hasBalancedSidesSupport","getInitialView","inputControlProps","newValues","dropdownLabelText","RANGE_CONTROL_CUSTOM_SETTINGS","HeightControl","currentUnit","marginX","helpText","selfStretch","ChildLayoutControl","childLayout","flexSize","childLayoutOrientation","newFlexSize","AXIAL_SIDES","useHasDimensionsPanel","hasContentSize","useHasContentSize","hasWideSize","useHasWideSize","hasPadding","useHasPadding","hasMargin","useHasMargin","hasGap","useHasGap","hasMinHeight","useHasMinHeight","hasChildLayout","useHasChildLayout","parentLayoutType","defaultParentLayoutType","filterValuesBySides","filteredValues","splitStyleValue","DimensionsToolsPanel","DimensionsPanel","onVisualize","includeLayoutControls","showSpacingPresetsControl","defaultPresets","useHasSpacingPresets","showContentSizeControl","contentSizeValue","setContentSizeValue","showWideSizeControl","wideSizeValue","setWideSizeValue","showPaddingControl","paddingValues","paddingSides","isAxialPadding","setPaddingValues","newPaddingValues","onMouseOverPadding","showMarginControl","marginValues","marginSides","isAxialMargin","setMarginValues","newMarginValues","onMouseOverMargin","showGapControl","gapValue","gapValues","splitGapValue","gapSides","isAxialGap","setGapValue","newGapValue","setGapValues","nextBoxGapValue","showMinHeightControl","minHeightValue","setMinHeightValue","showChildLayoutControl","childLayoutOrientationLabel","setChildLayout","newChildLayout","onMouseLeaveControls","nextContentSize","nextWideSize","allowReset","splitOnAxis","ToolsPanelItem","getComputedCSS","MarginVisualizer","forceShow","setStyle","borderRightWidth","borderLeftWidth","setIsActive","valueRef","PaddingVisualizer","DIMENSIONS_SUPPORT_KEY","SPACING_SUPPORT_KEY","DimensionsInspectorControl","visualizedProperty","setVisualizedProperty","useVisualizer","useCustomSides","hasStyleSupport","getInlineStyles","skipSerializationPathsEdit","skipSerializationPathsSave","renamedFeatures","omitStyle","preserveReference","firstSubpath","restPath","skipPaths","featureName","withBlockControls","shouldDisplayControls","withElementsStyles","blockElementsContainerIdentifier","skipLinkColorSerialization","ELEMENTS","elementCssRules","elementStyles","cssRule","compileCSS","colorPalette","duotonePalette","disableCustomDuotone","toolbarIcon","DuotoneSwatch","DuotonePicker","getValuesFromColors","rgbColor","DuotoneStylesheet","DuotoneUnsetStylesheet","DuotoneFilter","xmlnsXlink","colorInterpolationFilters","tableValues","in2","operator","PresetDuotoneFilter","getBlockCSSSelector","hasSelectors","rootSelector","__experimentalSelector","pathArray","fallbackSelector","featureSelector","subfeatureSelector","useMultiOriginColorPresets","presetSetting","defaultSetting","disableDefault","userPresets","themePresets","useHasFiltersPanel","useHasDuotoneControl","FiltersToolsPanel","LabeledColorIndicator","FiltersPanel","hasDuotoneEnabled","setDuotone","duotonePreset","settedValue","isBordered","isSeparated","InlineDuotone","useMultiOriginPresets","getColorsFromDuotonePreset","DuotonePanel","duotoneStyle","duotonePresetOrColors","newDuotone","maybePreset","getDuotonePresetFromColors","withDuotoneControls","hasDuotoneSupport","DuotoneStyles","filterId","duotoneSelector","duotoneAttr","isCustom","isPreset","selectorPart","isValidFilter","withDuotoneStyles","experimentalDuotone","filterClass","layoutBlockSupportKey","useLayoutClasses","rootPaddingAlignment","useRootPaddingAwareAlignments","globalLayoutSettings","defaultBlockLayout","inherit","layoutClassnames","definitions","compoundClassName","useLayoutStyles","fullLayoutType","LayoutPanel","defaultThemeLayout","allowEditing","allowInheriting","showInheritToggle","constrainedType","displayControlsForLegacyLayouts","hasContentSizeOrLegacySettings","onChangeLayout","newLayout","LayoutTypeSwitcher","newType","ButtonGroup","supportLayout","withLayoutStyles","hasLayoutBlockSupport","disableLayoutStyles","shouldRenderLayoutStyles","layoutClasses","withChildLayoutStyles","shouldRenderChildLayoutStyles","StopEditingAsBlocksOnOutsideSelect","stopEditingAsBlock","isBlockOrDescendantSelected","focusModeToRevert","isLockedByParent","isEditingAsBlocks","showStopEditingAsBlocks","showStartEditingAsBlocks","META_ATTRIBUTE_NAME","hasBlockMetadataSupport","blockTypeSettings","__experimentalLabel","BehaviorsControl","blockBehaviors","themeBehaviors","noBehaviorsOption","behaviorsOptions","behaviorName","behaviorValue","lightbox","hideCancelButton","withBehaviors","blockHasLink","linkDestination","getBorderClassesAndStyles","useBorderProps","borderProps","borderColorObject","getColorClassesAndStyles","__experimentalInteractivityAPI","useColorProps","gradientsPerOrigin","colorProps","backgroundColorObject","textColorObject","getSpacingClassesAndStyles","getTypographyClassesAndStyles","typographyStyles","fontFamilyClassName","useCachedTruthy","cachedValue","setCachedValue","upperFirst","firstLetter","withCustomColorPalette","colorsArray","withEditorColorPalette","allColors","createColorHOC","colorTypes","withColorPalette","colorMap","colorType","setters","createSetters","colorUtils","getMostReadableColor","colordColor","getColorContrast","maxContrast","settersAccumulator","colorAttributeName","upperFirstColorAttributeName","customColorAttributeName","createSetColor","previousState","colorContext","previousColorObject","previousColor","class","createCustomColorsHOC","withColors","DEFAULT_FONT_SIZES","fontSizeNames","fontSizeAttributeNames","fontSizeAttributeNamesAccumulator","fontSizeAttributeName","customFontSizeAttributeName","createSetFontSize","didAttributesChange","newStateAccumulator","fontSizeAttributeValue","DEFAULT_ALIGNMENT_CONTROLS","alignLeft","alignRight","alignmentControls","applyOrUnset","AlignmentControl","AlignmentToolbar","triggerPrefix","useItems","blockItem","allowContext","getOptionCompletion","inserterItem","apiFetch","letters","order_by","getOptionKeywords","getOptionLabel","subtype","useCompleters","completers","filteredCompleters","linkAutocompleter","blockAutocompleter","hasFilter","completer","Autocomplete","fullscreen","hasFocusBorder","rootLabelText","hasSelection","rootLabel","chevronRightSmall","ColorSelectorSVGIcon","ColorSelectorIcon","renderToggleComponent","TextColor","BackgroundColor","ListViewContext","useListViewContext","AriaReferencedText","hidden","Appender","nestingLevel","setInsertedBlock","insertedBlockTitle","maybeInsertedBlock","AnimatedTreeGridRow","TreeGridRow","rowCount","animationRef","mergedRef","positionInSet","setSize","isExpanded","ListViewExpander","forceToggle","chevronLeftSmall","onToggleExpanded","ariaDescribedBy","updateFocusAndSelection","isDeletingSelectedBlocks","firstBlockRootClientId","blocksToDelete","clearData","ListViewBlockContents","siblingBlockCount","blockMovingClientId","selectedBlockInBlockEditor","AdditionalBlockContent","isBlockMoveTarget","draggableClientIds","ListViewBlock","isDragged","isBranchSelected","showBlockMovers","isSyncedBranch","cellRef","rowRef","isFirstSelectedBlock","isLastSelectedBlock","showBlockActions","blockPositionDescription","siblingCount","getBlockPositionDescription","blockAriaLabel","settingsAriaLabel","isTreeGridMounted","collapse","BlockSettingsMenu","listViewInstanceId","expandedState","treeGridElementRef","hasRenderedMovers","moverCellClassName","listViewBlockSettingsClassName","selectEditorBlock","focusClientId","shouldSelectBlock","getFocusElement","toggleExpanded","colSpan","dropdownClientIds","rowItemRef","isSingleSelection","rowRect","scrollContainerRect","scrollIntoView","useListViewScrollIntoView","currentlyEditingBlockInCanvas","withoutGridItem","disableOpenOnArrowDown","countBlocks","draggedClientIds","isExpandedByDefault","countReducer","ListViewBranch","listPosition","fixedListWindow","shouldShowInnerBlocks","showAppender","showAppenderProp","parentBlockInformation","syncedBranch","canParentExpand","filteredBlocks","nextPosition","itemInView","blockInView","updatedPath","hasNestedBlocks","shouldExpand","isClientIdSelected","isSelectedBranch","showBlock","treeGridCellProps","ListViewDropIndicator","listViewRef","blockDropTarget","dropPosition","rootBlockElement","targetElement","getDropIndicatorIndent","targetElementRect","getDropIndicatorWidth","getNextNonDraggedBlock","nextBlockData","isDraggedBlock","ALLOWED_DROP_EDGES","getListViewDropTarget","candidateBlockData","candidateRect","candidateBlockIndex","blockData","isCursorWithinBlock","previousBlockData","candidateBlockParents","currentBlockData","getCandidateBlockParents","isDraggingBelow","blockIndentPosition","isUpGesture","nextBlock","currentLevel","nextLevel","desiredRelativeLevel","desiredParentLevel","getDesiredRelativeParentLevel","targetParentIndex","newBlockIndex","canInsertDraggedBlocksAsChild","innerBlockCount","isNestingGesture","canInsertDraggedBlocksAsSibling","PrivateListView","ListViewComponent","dropZoneElement","blockSettingsMenu","additionalBlockContent","clientIdsTree","removeDisabledBlocks","useListViewClientIds","visibleBlockCount","updateBlockSelection","destinationClientId","focusPosition","isKeyPress","HOME","END","clientIdWithParents","blockId","startTarget","endTarget","startParents","endParents","startId","endId","getCommonDepthClientIds","updatedSelectedBlocks","selectionDiff","useBlockSelection","setExpandedState","dropZoneRef","setTarget","draggedBlockClientIds","isBlockDrag","newTarget","useListViewDropZone","elementRef","treeGridRef","setSelectedTreeId","firstSelectedBlockClientId","selectedTreeId","selectedBlockParentClientIds","parentClientIds","useListViewExpandSelectedItem","useFixedWindowList","useWindowing","windowOverscan","expandRow","collapseRow","focusRow","startRow","endRow","contextValue","onCollapseRow","onExpandRow","onFocusRow","applicationAriaLabel","BlockNavigationDropdownToggle","listView","BlockStylesPreviewPanel","previewBlocks","BlockStyles","onHoverClassName","previewClassName","hoveredStyle","setHoveredStyle","isMobileViewport","debouncedSetHoveredStyle","debounce","styleItemHandler","buttonText","onSelectStylePreview","instructions","allowSkip","Placeholder","VIEWMODES","Actions","onBlockPatternSelect","CarouselNavigation","handlePrevious","handleNext","activeSlide","totalSlides","viewMode","setViewMode","isCarouselView","displayControls","SetupContent","showTitles","containerClass","slideClass","BlockPatternSlide","filterPatternsFn","initialViewMode","setActiveSlide","usePatternsSetup","onPatternSelectCallback","VariationsButtons","selectedValue","VariationsDropdown","MenuItemsChoice","choices","hasUniqueIcons","variationIcons","colorsFeature","disableCustomColorsFeature","hasColorsToChoose","withColorContext","ColorPaletteControl","EXAMPLE_DATE","DateFormatPicker","format","defaultFormat","dateI18n","NonDefaultControls","suggestedFormats","suggestedOptions","suggestedFormat","customOption","setIsCustom","Link","WithToolsPanelItem","ColorGradientSettingsDropdown","controlProps","toggleSettings","PanelColorGradientSettingsInner","marginY","PanelColorGradientSettingsSelect","useColorsAndGradientsPalettes","ImageEditingContext","useImageEditingContext","ImageEditingProvider","naturalWidth","naturalHeight","onFinishEditing","onSaveImage","transformImage","editedUrl","setEditedUrl","crop","setCrop","setPosition","setZoom","rotation","setRotation","defaultAspect","aspect","setAspect","rotateClockwise","angle","naturalAspectRatio","Image","translateX","translateY","getContext","translate","drawImage","toBlob","imgCrossOrigin","crossOrigin","useTransformImage","saveImage","isInProgress","setIsInProgress","source_url","useSaveImage","providerValue","restrictPosition","mediaSize","cropSize","rotateSize","restrictPositionCoord","maxPosition","getDistanceBetweenPoints","pointA","pointB","getRotationBetweenPoints","atan2","limitArea","noOp","_max","getCenter","rotRad","_i","hasWheelJustStarted","currentDoc","onDragStopped","onTouchMove","containerRef","wheelTimer","computeSizes","emitCropData","setInitialCrop","onMediaLoaded","initialCroppedAreaPercentages","croppedAreaPercentages","minZoom","maxZoom","mediaBBoxSize","getInitialCropFromCroppedAreaPercentages","onCropChange","onZoomChange","initialCroppedAreaPixels","croppedAreaPixels","mediaNaturalBBoxSize","mediaZoom","getMediaZoom","getZoomFromCroppedAreaPixels","cropZoom","getInitialCropFromCroppedAreaPixels","mediaRef","imageRef","videoRef","containerRect","containerAspect","videoWidth","videoHeight","mediaAspect","renderedMediaSize","objectFit","setMediaSize","mediaWidth","mediaHeight","containerHeight","fittingWidth","fittingHeight","getCropSize","onCropSizeChange","recomputeCropPosition","setCropSize","Cropper","getMousePoint","onDrag","onTouchRequest","touches","onPinchStart","getTouchPoint","onPinchMove","dragStartPosition","dragStartCrop","onInteractionStart","rafDragTimeout","currentWindow","offsetY","requestedPosition","newPosition","cleanEvents","onInteractionEnd","onWheelRequest","newZoom","zoomSpeed","setNewZoom","shouldUpdatePosition","zoomPoint","getPointOnContainer","zoomTarget","getPointOnMedia","limitAreaFn","widthInPixels","heightInPixels","sizePixels","computeCroppedArea","getAspect","cropData","getCropData","onCropComplete","onCropAreaChange","zoomWithScroll","preventZoomSafari","disableAutomaticStylesInjection","styleRef","nonce","complete","onMediaLoad","setImageRef","setVideoRef","clearScrollEvent","prevProps","emitCropAreaChange","load","lastPinchDistance","lastPinchRotation","rafPinchTimeout","newRotation","onRotationChange","mediaProps","cropShape","showGrid","_c","containerStyle","cropAreaStyle","mediaStyle","_d","containerClassName","cropAreaClassName","mediaClassName","onTouchStart","autoPlay","muted","onLoadedMetadata","touch","MIN_ZOOM","MAX_ZOOM","ImageCropper","editedHeight","newCropPercent","ZoomDropdown","AspectGroup","aspectRatios","AspectRatioDropdown","aspectRatioIcon","newAspect","RotationButton","rotateRightIcon","FormControls","ImageEditor","IMAGE_SIZE_PRESETS","ImageSizeControl","imageSizeHelp","imageWidth","imageHeight","imageSizeOptions","isResizable","onChangeImage","currentHeight","currentWidth","updateDimension","updateDimensions","customHeight","customWidth","defaultHeight","defaultWidth","setCurrentWidth","setCurrentHeight","dimension","parsedValue","nextHeight","useDimensionHandler","scaledWidth","scaledHeight","isCurrent","LinkSettingsDrawer","settingsOpen","setSettingsOpen","MaybeAnimatePresence","Fragment","AnimatePresence","MaybeMotionDiv","motion","settingsDrawerId","settingsIcon","isFunction","maybeFunc","URLInput","selectLink","handleOnClick","bindSuggestionNode","autocompleteRef","createRef","inputRef","updateSuggestions","suggestionNodes","suggestionsRequest","suggestions","showSuggestions","isUpdatingSuggestions","suggestionsValue","selectedSuggestion","suggestionsListboxId","suggestionOptionIdPrefix","__experimentalShowInitialSuggestions","scrollingIntoView","disableSuggestions","shouldShowInitialSuggestions","__experimentalFetchLinkSuggestions","fetchLinkSuggestions","__experimentalHandleURLSuggestions","handleURLSuggestions","isInitialSuggestions","isURL","loading","request","setSelectionRange","suggestion","previousIndex","shouldShowSuggestions","renderControl","renderSuggestions","isFullWidth","__experimentalRenderControl","inputId","required","__experimentalRenderSuggestions","suggestionsListProps","buildSuggestionItemProps","handleSuggestionClick","currentInputValue","withSafeTimeout","withSpokenMessages","withInstanceId","mark","ICONS_MAP","postList","post_tag","tag","attachment","SearchItemIcon","globe","shouldShowType","TextHighlight","highlight","filterURLForDisplay","safeDecodeURI","isFrontPage","getVisualTypeName","CREATE_TYPE","MAILTO_TYPE","INTERNAL_TYPE","LINK_ENTRY_TYPES","DEFAULT_LINK_SETTINGS","LinkControlSearchResults","withCreateSuggestion","createSuggestionButtonText","suggestionsQuery","resultsListClasses","isSingleDirectEntryResult","shouldShowCreateSuggestion","shouldShowSuggestionsTypes","searchResultsLabelId","labelText","searchResultsLabel","isURLLike","protocol","getProtocol","protocolIsValid","isValidProtocol","mayBeTLD","maxLength","cleanedURL","hasPossibleTLD","isWWW","isInternal","isValidFragment","handleNoop","handleDirectEntry","prependHTTP","noopSearchHandler","LinkControlSearchInput","currentLink","onCreateSuggestion","fetchSuggestions","allowDirectEntry","showInitialSuggestions","withURLSuggestion","useLabel","genericSearchHandler","fetchSearchSuggestions","pageOnFront","directEntryHandler","handleEntitySearch","useSearchHandler","searchHandler","focusedSuggestion","setFocusedSuggestion","onSuggestionSelected","restLinkProps","inputClasses","hasSuggestion","ViewerSlot","ViewerFill","isFetching","richData","fetchRichUrlData","__experimentalFetchRichUrlData","AbortController","controller","signal","urlData","aborted","abort","LinkPreview","onEditClick","hasRichPreviews","hasUnlinkControl","showRichPreviews","useRichUrlData","hasRichData","displayURL","displayTitle","isEmptyURL","handleSettingChange","theSettings","LinkControl","searchInputPlaceholder","onCancel","noDirectEntry","forceIsEditingLink","createSuggestion","inputValue","propInputValue","noURLSuggestion","hasTextControl","renderControlBottom","isMounting","wrapperNode","textInputRef","isEndingEditWithFocus","settingsKeys","internalControlValue","setInternalControlValue","setInternalURLInputValue","setInternalTextInputValue","createSetInternalSettingValueHandler","internalValue","setInternalValue","prevValue","settingsUpdates","useInternalValue","valueHasChanges","isShallowEqualObjects","isEditingLink","setIsEditingLink","createPage","isCreatingPage","errorMessage","handleCreatePage","cancelableCreateSuggestion","setIsCreatingPage","setErrorMessage","suggestionTitle","hasCanceled_","isCanceled","makeCancelable","useCreatePage","whichFocusTargetIndex","hasLinkValue","stopEditing","handleSubmit","currentUrlInputValue","currentInputIsEmpty","shownUnlinkControl","showSettings","showTextControl","isEditing","nonSettingsChanges","uniqueId","createNotice","removeNotice","mediaURL","mediaId","mediaIds","accept","onSelectURL","onToggleFeaturedImage","useFeaturedImage","onFilesUpload","addToGallery","handleUpload","canUpload","editMediaButtonRef","errorNoticeID","onUploadError","safeMessage","selectMedia","closeMenu","openOnArrowDown","click","gallery","allowedType","mediaIcon","FormFileUpload","uploadFiles","openFileDialog","upload","postFeaturedImage","LinkViewerURL","urlLabel","linkClassName","__experimentalPopoverLegacyPositionToPlacement","URLPopover","additionalControls","renderSettings","computedPlacement","isSettingsExpanded","setIsSettingsExpanded","LinkEditor","onChangeInputValue","keyboardReturn","LinkViewer","onEditLinkClick","InsertFromURLPopover","mediaPreview","notices","disableDropZone","disableMediaButtons","onDoubleClick","onFilesPreUpload","deprecatedOnHTMLDrop","mediaLibraryButton","setSrc","isURLInputVisible","setIsURLInputVisible","onChangeSrc","openURLInput","closeURLInput","onSubmitSrc","setMedia","lastMediaPassed","newMedia","filteredMedia","urlSlug","cutOffIndex","mediaBlocks","recursivelyFindMediaFromBlocks","_blocks","uploadedMediaList","alt_text","handleBlocksDrop","onUpload","renderPlaceholder","typesAllowed","firstAllowedType","isOneType","isAudio","isImage","isVideo","placeholderClassName","renderDropZone","DropZone","renderCancelLink","renderUrlSelectionUI","renderFeaturedImageToggle","libraryButton","uploadMediaLibraryButton","renderMediaUploadChecked","colorSettings","otherSettings","hasActive","InlineSelectionToolbar","editableContentElement","activeFormats","lastFormat","lastFormatType","richTextStore","getFormatType","useAnchor","InlineToolbar","hasInlineToolbar","getActiveFormats","useUndoAutomaticChange","__experimentalUndo","addActiveFormats","formats","getMultilineTag","getAllowedFormats","allowedFormats","disableFormats","splitValue","pastedBlocks","onSplit","onSplitMiddle","valueWithEnsuredSelection","hasPastedBlocks","lastPastedBlockIndex","isAfterOriginal","adjustLines","isMultiline","LINE_SEPARATOR","usePasteHandler","propsRef","_onPaste","formatTypes","__unstableEmbedURLOnPaste","pastePlainText","startStr","startIdx","endIdx","removeWindowsFragments","metaTag","removeCharsetMetaTag","log","transformed","accumlator","__unstablePasteRule","pastedMultilineTag","pastedValue","regexp","valueToInsert","wrapSelectionSettings","useBeforeInputRules","pair","startChar","endChar","InputEvent","findSelection","nestedSelection","useInputRules","inputRule","trimmedTextBefore","prefixTransforms","__unstableAllowPrefixTransformations","__unstableInputRule","searchText","preventEventDiscovery","useDelete","hasActiveFormats","useEnter","removeEditorOnlyFormats","disableLineBreaks","onSplitAtEnd","canSplit","regExp","isEmptyLine","insertLineSeparator","canSplitAtEnd","formatTypesSelector","getFormatTypes","interactiveContentTags","prefixSelectKeys","getPrefixedSelectKeys","useShortcuts","keyboardShortcuts","keyboardShortcut","useInputEvents","inputEvents","useInsertReplacementText","useFirefoxCompat","parentEditable","FormatEdit","Edit","activeFormat","getActiveFormat","activeObject","getActiveObject","isObjectActive","activeAttributes","activeObjectAttributes","keyboardShortcutContext","inputEventContext","ForwardedRichTextContainer","RichTextWrapper","originalValue","originalOnChange","originalIsSelected","inlineToolbar","autocompleters","withoutInteractiveFormatting","__unstableOnSplitAtEnd","__unstableOnSplitMiddle","identifier","__unstablePastePlainText","__unstableDisableFormats","__unstableMobileNoFocusOnMount","deleteEnter","placeholderTextColor","textAlign","selectionColor","tagsToEliminate","disableEditingMenu","disableAutocorrection","removeNativeProps","anchorRef","adjustedAllowedFormats","hasFormats","adjustedValue","adjustedOnChange","childrenSource","__unstableCreateElement","unset","prepareHandlers","valueHandlers","changeHandlers","allFormatTypes","keyedSelected","__experimentalGetPropsForEditableTreePreparation","richTextIdentifier","__experimentalCreatePrepareEditableTree","__experimentalCreateOnChangeEditableValue","dispatchers","__experimentalGetPropsForEditableTreeChangeHandler","useFormatTypes","formatType","removeFormat","richTextRef","useRichText","__unstableFormats","__unstableText","changeHandler","__unstableIsSelected","__unstableMultilineTag","__unstableDependencies","__unstableAfterParse","__unstableBeforeSerialize","__unstableAddInvisibleFormats","autocompleteProps","useAutocompleteProps","useBlockEditorAutocompleteProps","record","previousText","useMarkPersistent","onKeydown","isKeyboardEvent","suppressContentEditableWarning","Tag","MultilineTag","EditableText","__experimentalVersion","remainingProps","ResponsiveBlockControlLabel","viewport","desc","accessibleLabel","toggleLabel","onIsResponsiveChange","renderDefaultControl","renderResponsiveControls","isResponsive","defaultLabel","viewports","toggleControlLabel","toggleHelpText","defaultControl","RichTextShortcut","character","onUse","onUseRef","RichTextToolbarButton","shortcutType","shortcutCharacter","fillName","displayShortcut","__unstableRichTextInputEvent","selectIcon","editIcon","UnitControl","unitsProp","URLInputButton","toggle","submitLink","buttonLabel","arrowLeft","LINK_DESTINATION_NONE","LINK_DESTINATION_CUSTOM","LINK_DESTINATION_MEDIA","LINK_DESTINATION_ATTACHMENT","NEW_TAB_REL","ImageURLInputUI","onChangeUrl","mediaUrl","mediaLink","linkTarget","linkClass","rel","setIsOpen","setPopoverAnchor","openLinkUI","urlInput","setUrlInput","startEditLink","stopEditLink","closeLinkUI","onFocusOutside","autocompleteElement","onSubmitLinkChange","selectedDestination","getLinkDestinations","onLinkRemove","linkDestinations","advancedOptions","updatedLinkTarget","newLinkTarget","updatedRel","rels","relVal","getUpdatedLinkTargetSettings","linkEditorValue","linkIcon","linkDestinationInput","onSetHref","PreviewOptions","viewLabel","deviceType","setDeviceType","deviceIcons","tablet","desktop","useResizeCanvas","actualWidth","updateActualWidth","innerWidth","resizeListener","getCanvasWidth","device","deviceWidth","marginVertical","innerHeight","marginHorizontal","contentInlineStyles","words","wordCount","DefaultStylePicker","preferredStyle","onUpdatePreferredStyleVariations","defaultStyleName","selectOnChange","TAB_SETTINGS","cog","TAB_STYLES","TAB_LIST_VIEW","initialOpen","PositionControlsPanel","setInitialOpen","multiSelectedBlocks","InspectorControlsGroups","PREFERENCE_NAME","InspectorControlsTabsHint","isInspectorControlsTabsHintVisible","preferencesStore","setPreference","showAdvancedControls","allowlist","InspectorControlsTabs","useIsListViewTabDisabled","useInspectorControlsTabs","borderGroup","colorGroup","defaultGroup","dimensionsGroup","listGroup","positionGroup","stylesGroup","typographyGroup","listViewDisabled","listFills","hasListFills","hasStyleFills","advancedFills","settingsFills","showTabs","tabSettings","getShowTabs","blockInspectorTabs","createPrivateSlotFill","BlockInfo","useContentBlocks","contentBlocksObjectAux","__experimentalRole","isContentBlock","getContentBlocks","BlockNavigationButton","BlockInspectorLockedBlocks","topLevelLockedBlock","contentBlocks","contentBlock","BlockInspectorSingleBlockWrapper","wrapper","AnimatedContainer","blockInspectorAnimationSettings","animationOrigin","ease","BlockInspectorSingleBlock","availableTabs","blockStyles","showNoBlockSelectedMessage","_selectedBlockName","_blockType","globalBlockInspectorAnimationSettings","useBlockInspectorAnimationSettings","isSelectedBlockUnregistered","getUnregisteredTypeHandlerName","isReady","setIsReady","isZoomOutMode","BlockTools","blockToolbarRef","blockToolbarAfterRef","KeyboardShortcuts","Register","registerShortcut","keyCombination","aliases","MultiSelectScrollIntoView","KEY_DOWN_ELIGIBLE_KEY_CODES","useMouseMoveTypingReset","lastClientX","lastClientY","stopTypingOnMouseMove","useTypingObserver","_isTyping","ref1","ref2","timerId","stopTypingOnNonTextField","stopTypingOnEscapeKey","stopTypingOnSelectionUncollapse","startTypingInTextField","isKeyDownEligibleForStartTyping","isIE","arrowKeyCodes","initialTriggerPercentage","useTypewriter","scrollResizeRafId","onKeyDownRafId","caretRect","onScrollResize","computeCaretRectangle","maintainCaretPosition","isSelectionEligibleForScroll","currentCaretRect","windowScroll","scrollY","scrollContainerY","relativeScrollPosition","editableNodes","isLastEditableNode","scrollContainerHeight","addSelectionChangeListener","computeCaretRectOnSelectionChange","RenderedRefsContext","RecursionProvider","previouslyRenderedBlocks","newRenderedBlocks","addToBlockType","useHasRecursion","InspectorPopoverHeader","closeSmall","additionalProps","DateTimePicker","startOfWeek","l10n","ELEMENT_CLASS_NAMES","__experimentalGetElementClassName","matchesAttributes","__experimentalGetMatchingVariation","parseUnit","cssUnit","calculate","expression","Function","getFunctionUnitValue","functionUnitValue","functionUnit","getPxFromCssUnit","parseUnitFunction","currentCssUnit","isMathExpression","errorFound","cssUnitsBits","expressionsMatches","rawCurrentValue","calculatedExpression","calculatedValue","calculatedResult","evalMathExpression","ONE_PERCENT","setOptions","relativeUnits","vmin","vmax","ex","lh","absoluteUnits","in","cm","PIXELS_PER_INCH","mm","pt","pc","Q","convertParsedUnitToPx","hash","hashOptions","BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS","__experimentalBorder","compileStyleValue","uncompiledValue","VARIABLE_REFERENCE_PREFIX","flattenTree","newKey","newLeaf","newPrefix","getFeatureDeclarations","isShorthand","subfeature","newDeclarations","getStylesDeclarations","useRootPaddingAlign","STYLE_PROPERTY","properties","useEngine","rootOnly","pathToValue","ruleValue","STYLE_KEYS","pickStyleKeys","treeToPickFrom","clonedEntries","getNodesWithSettings","blockSelectors","pickPresets","blockPresets","blockCustom","toCustomProperties","ruleset","mergedSettings","getPresetsDeclarations","customProps","toStyles","hasFallbackGapSupport","nodesWithStyles","fallbackGapValue","hasLayoutSupport","featureSelectors","styleVariationSelectors","elementName","elementSelector","getNodesWithStyles","nodesWithSettings","featureDeclarations","cssSelector","styleVariationName","styleVariationSelector","styleVariations","baseSelector","combinedSelectors","concatFeatureVariationSelectorString","styleVariationDeclarations","duotoneStyles","duotoneDeclarations","spacingStyle","cssValue","combinedSelector","validDisplayModes","displayMode","baseStyles","baseStyle","getLayoutStyles","pseudoSelectorStyles","pseudoKey","pseudoStyle","pseudoDeclarations","pseudoRule","blockSelector","classSelectorToUse","selectorToUse","getPresetsClasses","getBlockSelectors","duotoneSupport","__experimentalDefault","blockStyleVariations","featureKey","getSelectorsConfig","processCSSNesting","processedCSS","part","useGlobalStylesOutputWithConfig","customProperties","globalStyles","svgs","at","renderToString","getPresetsSvgFilters","toSvgFilters","isGlobalStyles","useGlobalStylesOutput","useHasEffectsPanel","useHasShadowControl","EffectsToolsPanel","EffectsPanel","hasShadowEnabled","setShadow","ShadowPopover","onShadowChange","shadowIcon","ShadowPopoverContainer","defaultShadows","themeShadows","defaultPresetsEnabled","shadows","ShadowPresets","activeShadow","ShadowIndicator","boxShadow","AdvancedPanel","cssError","setCSSError","customCSS","TextareaControl","spellCheck","ResizableBoxPopover","resizableBoxProps","ResizableBox"],"sourceRoot":""}